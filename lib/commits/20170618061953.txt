{"fetchDate": "2019-12-19", "content": [{"sha": "42fe74955d953138c279edf680a0aa9e8dc755f9", "node_id": "MDY6Q29tbWl0NDUwODIwMjM6NDJmZTc0OTU1ZDk1MzEzOGMyNzllZGY2ODBhMGFhOWU4ZGM3NTVmOQ==", "commit": {"author": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2017-06-18T06:19:53Z"}, "committer": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2017-06-18T06:19:53Z"}, "message": "Guild PQ + fixed negative EXP error\n\nImplemented Guild PQ. Fixed a problem introduced earlier where negative\nEXP would be deemed as \"integer overflow\", provoking many game breaking\nissues as result.", "tree": {"sha": "28d3537e8dddfdb628a8b0b4407b74764e495e78", "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/trees/28d3537e8dddfdb628a8b0b4407b74764e495e78"}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/commits/42fe74955d953138c279edf680a0aa9e8dc755f9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/42fe74955d953138c279edf680a0aa9e8dc755f9", "html_url": "https://github.com/ronancpl/HeavenMS/commit/42fe74955d953138c279edf680a0aa9e8dc755f9", "comments_url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/42fe74955d953138c279edf680a0aa9e8dc755f9/comments", "author": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "81f92262864fc271d380bd6261d51d51fc2224df", "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/81f92262864fc271d380bd6261d51d51fc2224df", "html_url": "https://github.com/ronancpl/HeavenMS/commit/81f92262864fc271d380bd6261d51d51fc2224df"}], "stats": {"total": 1380, "additions": 819, "deletions": 561}, "files": [{"sha": "a0f912d872370ccc574a33a95e3c757a2dd46a7c", "filename": "build/built-jar.properties", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/built-jar.properties", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/built-jar.properties", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/built-jar.properties?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -1,4 +1,4 @@\n-#Tue, 13 Jun 2017 20:04:33 -0300\n+#Sun, 18 Jun 2017 02:53:19 -0300\n \n \n C\\:\\\\Nexon\\\\MapleSolaxia\\\\MapleSolaxiaV2="}, {"sha": "8c915665a3f7f74117f7f96e176b62961cd6b647", "filename": "build/classes/client/MapleCharacter$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$1.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "5db70657ff092a41155d2bf28eaabdd794867b09", "filename": "build/classes/client/MapleCharacter$10.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$10.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$10.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$10.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "fd894efb846b4d5fe2d34455d83083aa01b0fc6c", "filename": "build/classes/client/MapleCharacter$11.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$11.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$11.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$11.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "9e5dca18cf4408eaa1841f7f028a41e72a949291", "filename": "build/classes/client/MapleCharacter$12.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$12.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$12.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$12.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "920166640330da05419be68b05ab5a651e8c17d5", "filename": "build/classes/client/MapleCharacter$13.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$13.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$13.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$13.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "da427c2bdd6a5f4a5198c1b56567f2b136945cae", "filename": "build/classes/client/MapleCharacter$14.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$14.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$14.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$14.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "6749638e94a8bac0d5cd81e7d8b1d78d11fc7285", "filename": "build/classes/client/MapleCharacter$15.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$15.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$15.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$15.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "80d653728955b2237bc7460c0393a79022172648", "filename": "build/classes/client/MapleCharacter$16.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$16.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$16.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$16.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "e832dbcf96f85511394918d81b14bda339cf3c1b", "filename": "build/classes/client/MapleCharacter$17.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$17.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$17.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$17.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "f86ec6adca835627a5cdc93c904df7a0bcbed29e", "filename": "build/classes/client/MapleCharacter$18.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$18.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$18.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$18.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "a2ea5df276e70940076d3c419a5019ea806b0709", "filename": "build/classes/client/MapleCharacter$2.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$2.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$2.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$2.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "1887522ea6bd1b6df9d8db5dbc92666e05f54703", "filename": "build/classes/client/MapleCharacter$3.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$3.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$3.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$3.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "4712a8fea391e0d2163b6db8ad4a82e140fdb65d", "filename": "build/classes/client/MapleCharacter$4.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$4.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$4.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$4.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "2f97916868f8e9a61f3ed33ccbf56de80bacd6ec", "filename": "build/classes/client/MapleCharacter$5.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$5.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$5.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$5.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "002cc78e4fa6894f661abc99d90b09f0fb2667a2", "filename": "build/classes/client/MapleCharacter$6.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$6.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$6.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$6.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "9520854af1afca365d6b7d2e3ecc1b1ce2ae12cd", "filename": "build/classes/client/MapleCharacter$7.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$7.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$7.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$7.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "fc4c5544fb9b8fa2fe132ad8f353f5987b61e6a4", "filename": "build/classes/client/MapleCharacter$8.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$8.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$8.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$8.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "66829ca4739bfee17584bd893e5f9f881a66d410", "filename": "build/classes/client/MapleCharacter$9.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$9.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$9.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$9.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "a1c51341c8fe3d79a710775115b0dd0051b6d56e", "filename": "build/classes/client/MapleCharacter$CancelCooldownAction.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$CancelCooldownAction.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$CancelCooldownAction.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$CancelCooldownAction.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "df59fb778afa06db6736a73440ef7de4f7a7d8b2", "filename": "build/classes/client/MapleCharacter$FameStatus.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$FameStatus.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$FameStatus.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$FameStatus.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "dc55187e1a7a2d9b9772326265652d068cd0d0d5", "filename": "build/classes/client/MapleCharacter$MapleBuffStatValueHolder.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$MapleBuffStatValueHolder.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$MapleBuffStatValueHolder.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$MapleBuffStatValueHolder.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "7682ba19daca9a27e9109c708e0131017d03385f", "filename": "build/classes/client/MapleCharacter$MapleCoolDownValueHolder.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$MapleCoolDownValueHolder.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$MapleCoolDownValueHolder.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$MapleCoolDownValueHolder.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "ddc0380acf02446fdd320030628db742965915e7", "filename": "build/classes/client/MapleCharacter$SkillEntry.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$SkillEntry.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter$SkillEntry.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$SkillEntry.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "84bc4e34013b5a3ed247beb901d853a54f02728b", "filename": "build/classes/client/MapleCharacter.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/MapleCharacter.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "f788196e5787365dab764fe55628b947f26791eb", "filename": "build/classes/client/command/Commands$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/command/Commands$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/command/Commands$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/command/Commands$1.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "e0068cdf88160d104237bc8c69bd52aa1d7b5062", "filename": "build/classes/client/command/Commands.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/command/Commands.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/client/command/Commands.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/command/Commands.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "8f48ebf359989dca536183948de7fa00d43c69d2", "filename": "build/classes/constants/ServerConstants.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/constants/ServerConstants.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/constants/ServerConstants.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/constants/ServerConstants.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "2b69cd743c5a507afe72fd0a009a90bec36b6002", "filename": "build/classes/net/server/channel/handlers/ChangeMapHandler.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/net/server/channel/handlers/ChangeMapHandler.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/net/server/channel/handlers/ChangeMapHandler.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/handlers/ChangeMapHandler.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "f9972a7cd4831ef68d8fc0e1763b0e71edb0812c", "filename": "build/classes/net/server/channel/handlers/ItemMoveHandler.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/net/server/channel/handlers/ItemMoveHandler.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/net/server/channel/handlers/ItemMoveHandler.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/handlers/ItemMoveHandler.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "577606c790db2a3e9c100e41f036d23d8c206e89", "filename": "build/classes/net/server/channel/handlers/NPCTalkHandler.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/net/server/channel/handlers/NPCTalkHandler.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/net/server/channel/handlers/NPCTalkHandler.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/handlers/NPCTalkHandler.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "6d9ce2a135944613f54e0bce3468fc43927aef8c", "filename": "build/classes/net/server/channel/handlers/PlayerLoggedinHandler$1.class", "status": "removed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/81f92262864fc271d380bd6261d51d51fc2224df/build/classes/net/server/channel/handlers/PlayerLoggedinHandler$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/81f92262864fc271d380bd6261d51d51fc2224df/build/classes/net/server/channel/handlers/PlayerLoggedinHandler$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/handlers/PlayerLoggedinHandler$1.class?ref=81f92262864fc271d380bd6261d51d51fc2224df"}, {"sha": "4bf4f5bd2608be7c11705ac2693875ed06db0406", "filename": "build/classes/net/server/channel/handlers/PlayerLoggedinHandler.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/net/server/channel/handlers/PlayerLoggedinHandler.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/net/server/channel/handlers/PlayerLoggedinHandler.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/handlers/PlayerLoggedinHandler.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "c8824d3c00c05567967cf2d4be314c2839f288ba", "filename": "build/classes/net/server/channel/handlers/ReactorHitHandler.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/net/server/channel/handlers/ReactorHitHandler.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/net/server/channel/handlers/ReactorHitHandler.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/handlers/ReactorHitHandler.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "7c7a7b00694ba8635454105b0462086b88f691b2", "filename": "build/classes/net/server/world/MaplePartyCharacter.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/net/server/world/MaplePartyCharacter.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/net/server/world/MaplePartyCharacter.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/world/MaplePartyCharacter.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "84288ec78e2192c555ffa8d9c1d8ab7a147946cf", "filename": "build/classes/scripting/AbstractPlayerInteraction.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/scripting/AbstractPlayerInteraction.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/scripting/AbstractPlayerInteraction.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/scripting/AbstractPlayerInteraction.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "92fc1309362dab90b6f5e80f2109f144154681c1", "filename": "build/classes/scripting/event/EventInstanceManager.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/scripting/event/EventInstanceManager.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/scripting/event/EventInstanceManager.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/scripting/event/EventInstanceManager.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "14f26f70b6e6dfc4cacbf85c95edf66d2abdf41b", "filename": "build/classes/scripting/event/EventManager$3.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/scripting/event/EventManager$3.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/scripting/event/EventManager$3.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/scripting/event/EventManager$3.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "1b5cab9d04ced98888879f20e9b53899b5d6083d", "filename": "build/classes/scripting/event/EventManager.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/scripting/event/EventManager.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/scripting/event/EventManager.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/scripting/event/EventManager.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "2cb16fd043908023704b1e3d2cbdc3ad02d9615d", "filename": "build/classes/scripting/npc/NPCScriptManager.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/scripting/npc/NPCScriptManager.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/scripting/npc/NPCScriptManager.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/scripting/npc/NPCScriptManager.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "c7ff3a1fb5192722096cab09b5b86051f44de0fd", "filename": "build/classes/scripting/quest/QuestScriptManager.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/scripting/quest/QuestScriptManager.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/scripting/quest/QuestScriptManager.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/scripting/quest/QuestScriptManager.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "9f7b023c798d530bf79853b4140b4113b7406879", "filename": "build/classes/server/maps/MapleMap$10.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$10.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$10.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$10.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "67f2a1364940c18d3ab250d50ef56f13feec727c", "filename": "build/classes/server/maps/MapleMap$11.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$11.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$11.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$11.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "a7f19cf2efe25bc7ceed03ff04fb9f0b97a816ce", "filename": "build/classes/server/maps/MapleMap$12.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$12.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$12.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$12.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "2197c3bcf13e043f9916a4acaf5ec293f619bc71", "filename": "build/classes/server/maps/MapleMap$13.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$13.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$13.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$13.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "0c5ad5f47984e04c2994e83370e67e203ec4801f", "filename": "build/classes/server/maps/MapleMap$14.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$14.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$14.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$14.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "5425774b7ac36d4bf03430b3bed03c3d9ca82a0f", "filename": "build/classes/server/maps/MapleMap$15.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$15.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$15.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$15.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "b38aabf3fd9c52d494d6f05a0e2ef5f57fd4be8c", "filename": "build/classes/server/maps/MapleMap$16.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$16.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$16.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$16.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "4a8ee2964ca8085939d6c23ff79d43cb5537687e", "filename": "build/classes/server/maps/MapleMap$17.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$17.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$17.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$17.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "f7caf0518a75c322021663c2813f75cd2c91eef6", "filename": "build/classes/server/maps/MapleMap$18.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$18.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$18.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$18.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "a07608d038b9f647a0ee607b334e6ce63ce072f2", "filename": "build/classes/server/maps/MapleMap$19.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$19.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$19.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$19.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "3abb87449c19d66b69e5a1740ab85b56516b4455", "filename": "build/classes/server/maps/MapleMap$20.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$20.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$20.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$20.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "5edf33374efd9d7b4a84d806c4087251493f9721", "filename": "build/classes/server/maps/MapleMap$21.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$21.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$21.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$21.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "0b8b8616858f0d4c0e17cc46085bccc7bce55582", "filename": "build/classes/server/maps/MapleMap$22.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$22.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$22.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$22.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "3decbf69c22db308ed6a2f7a643d4e82d543b5fa", "filename": "build/classes/server/maps/MapleMap$23.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$23.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$23.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$23.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "d5c866da297f16f4e5864a9247d6eeab91ca8da6", "filename": "build/classes/server/maps/MapleMap$24.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$24.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$24.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$24.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "14d3ff85d442d31244b8963eb1034185f5bda193", "filename": "build/classes/server/maps/MapleMap$25.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$25.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$25.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$25.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "f67c821e95dc516034cb648bf32fae12d21f74da", "filename": "build/classes/server/maps/MapleMap$26.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$26.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$26.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$26.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "809f0b646568f8e17e90ee3ef143792794c34345", "filename": "build/classes/server/maps/MapleMap$27.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$27.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$27.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$27.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "76776741e5fb5c7343a197a56b9764c865d35531", "filename": "build/classes/server/maps/MapleMap$28$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$28$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$28$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$28$1.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "22d1d0c16c09de6b3ecb0a972de24b8e68533a6d", "filename": "build/classes/server/maps/MapleMap$28.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$28.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$28.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$28.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "18a955dc7a17e644e6b8eff3d99f59dc39378996", "filename": "build/classes/server/maps/MapleMap$29.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$29.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$29.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$29.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "4cd1edc44788a10c821cff7ce95fb11f2a4d828d", "filename": "build/classes/server/maps/MapleMap$3.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$3.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$3.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$3.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "b49086ca0cb0bca8bc28f999a971a926e928e377", "filename": "build/classes/server/maps/MapleMap$4.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$4.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$4.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$4.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "06c7600487f5df91320dda6bb6bf241b9682ebf7", "filename": "build/classes/server/maps/MapleMap$5.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$5.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$5.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$5.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "edb6cc7d679ee5db1433dea50f68b9ce4dc20953", "filename": "build/classes/server/maps/MapleMap$6.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$6.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$6.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$6.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "b297c9dae691200c2f1dcbdc0687731d1920e756", "filename": "build/classes/server/maps/MapleMap$7.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$7.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$7.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$7.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "9d01a1ba7acccbebd2c1e8ca4965e36f68e02c99", "filename": "build/classes/server/maps/MapleMap$8.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$8.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$8.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$8.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "1c4503ebe92a9bfe674e71a87c10e9e0fdbf92d4", "filename": "build/classes/server/maps/MapleMap$9.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$9.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$9.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$9.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "c000c48f1d9cdf01243239d55a0c01d2b000e257", "filename": "build/classes/server/maps/MapleMap$ActivateItemReactor$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$ActivateItemReactor$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$ActivateItemReactor$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$ActivateItemReactor$1.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "49a530c3e521929779df2d2e735a7267b2421278", "filename": "build/classes/server/maps/MapleMap$ActivateItemReactor.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$ActivateItemReactor.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$ActivateItemReactor.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$ActivateItemReactor.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "bfb6ced6d50daffd605fd196ff843f1da209b0f7", "filename": "build/classes/server/maps/MapleMap$ExpireMapItemJob.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$ExpireMapItemJob.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap$ExpireMapItemJob.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$ExpireMapItemJob.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "16f27e5ff504f0d1778725b1a3943a91b7544499", "filename": "build/classes/server/maps/MapleMap.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleMap.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "c8635e4b7e3523408cae99e2ef5c3a9c4d5fc124", "filename": "build/classes/server/maps/MapleReactor$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleReactor$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleReactor$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleReactor$1.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "306e9ababce1ebb2cea66b6cc5051606cb03d61e", "filename": "build/classes/server/maps/MapleReactor.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleReactor.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/build/classes/server/maps/MapleReactor.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleReactor.class?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "b0407b96697fd14eb5c5d6296cca4154ba7dd48f", "filename": "dist/MapleSolaxia.jar", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/dist/MapleSolaxia.jar", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/dist/MapleSolaxia.jar", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/dist/MapleSolaxia.jar?ref=42fe74955d953138c279edf680a0aa9e8dc755f9"}, {"sha": "dd89a5d819b1f5c2f5635e28fd753391bae9ca52", "filename": "feature_list.txt", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/feature_list.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/feature_list.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/feature_list.txt?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -4,22 +4,27 @@ Ronan - Freelance Developer\n Vcoc - Freelance Developer\n \n ---------------------------\n-Working features:\n+Feature list:\n ---------------------------\n \n PQs/Quests:\n * HPQ/KPQ/LPQ/LMPQ/OPQ/EllinPQ/PiratePQ 100%\n-* BalrogPQ semi-functional\n+* GuildPQ 100% + Guild queue and multi-lobby systems available.\n * Brand-new PQ: Boss Rush PQ 100%\n+* BalrogPQ semi-functional\n * Doll house quest 100%\n * Loads of quests have been patched.\n \n Player Social Network:\n-* Guild and Alliance system.\n-* Lobby system - Limited multiple PQ instances on same channel.\n+* Guild and Alliance system fully functional.\n \n Cash:\n * EXP/DROP/Cosmetic Coupons 100%\n+* Great deal of cash items functional.\n+\n+PQ potentials:\n+* Lobby system - Limited multiple PQ instances on same channel.\n+* Guild queue system - Guilds can register themselves on a queue for GPQ.\n \n Server potentials:\n * Multi-worlds 100%"}, {"sha": "ac28d947fe3a4aefe623f5614d9ad7a4f2c1714e", "filename": "mychanges_ptbr.txt", "status": "modified", "additions": 14, "deletions": 7, "changes": 21, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/mychanges_ptbr.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/mychanges_ptbr.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/mychanges_ptbr.txt?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -292,25 +292,32 @@ Diversos ajustes finos nos comandos existentes.\n Adicionados novos comandos: proitem, seteqstats, buffme, buffmap.\n V\ufffdrios ajustes finos em alguns comandos.\n \n-05 Junho 2016,\n+05 Junho 2017,\n Novo NPC Skillbook announcer: Abdula.\n Consertada a fun\ufffd\ufffdo que retorna se uma skill pertence ou n\ufffdo \ufffd \ufffdrvore de habilidades do jogador.\n \n-06 Junho 2016,\n+06 Junho 2017,\n Corrigido command empowerme.\n Corrigidos exploits relacionados a algumas das skills do empowerme.\n Corrigido possivel loop infinito no sistema de EXP.\n \n-07 - 10 Junho 2016,\n+07 - 10 Junho 2017,\n Implementa\ufffd\ufffdo da OPQ.\n \n-11 Junho 2016,\n+11 Junho 2017,\n Corre\ufffd\ufffdo de alguns bugs vindos com o commit da OPQ.\n Incrementada a documenta\ufffd\ufffdo referente aos m\ufffdtodos usados nos scripts de eventos.\n \n-12 Junho 2016,\n+12 Junho 2017,\n Corre\ufffd\ufffdo de falha em cria\ufffd\ufffdo de guilds, n\ufffdo atribuindo corretamente o t\ufffdtulo de mestre da guild ao criador.\n \n-13 Junho 2016,\n+13 Junho 2017,\n Mudan\ufffda nas mec\ufffdnicas de busca por portais ao transportar cada jogador: quando n\ufffdo for definido, escolhe-se um spawn point aleatoriamente.\n-Implementa\ufffd\ufffdo de fila de espera para Guilds na GPQ (funciona em harmonia com o sistema de lobbys).\n\\ No newline at end of file\n+Implementa\ufffd\ufffdo de fila de espera para Guilds na GPQ (funciona em harmonia com o sistema de lobbys).\n+\n+14 Junho 2017,\n+Corre\ufffd\ufffdo de bug envolvendo abuso de conversa com NPC logo ap\ufffds o sinal de dispose, ocasionando frequentemente crashes no cliente.\n+\n+15 - 17 Junho 2017,\n+Corre\ufffd\ufffdo de bug na fun\ufffd\ufffdo de atribui\ufffd\ufffdo de EXP, que n\ufffdo permitia receber valores negativos de EXP.\n+Implementa\ufffd\ufffdo da GPQ.\n\\ No newline at end of file"}, {"sha": "a0f2f44b10f3a0c288649f862af14d6c56ce189d", "filename": "nbproject/private/private.xml", "status": "modified", "additions": 7, "deletions": 6, "changes": 13, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/nbproject/private/private.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/nbproject/private/private.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/nbproject/private/private.xml?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -13,13 +13,14 @@\n     <open-files xmlns=\"http://www.netbeans.org/ns/projectui-open-files/2\">\n         <group>\n             <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/event/GuildQuest.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/event/CWKPQ.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/9040000.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/scripting/AbstractPlayerInteraction.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/2040034.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/9040009.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/net/server/channel/handlers/ChangeMapHandler.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/9040006.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/reactor/2006001.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/reactor/9208009.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/constants/ServerConstants.java</file>\n             <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/MapleCharacter.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/scripting/event/EventManager.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/net/server/channel/Channel.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/9040001.js</file>\n         </group>\n     </open-files>\n </project-private>"}, {"sha": "3a1ca2d447cef7cb2b9be996bc6b3d466a71d9c7", "filename": "scripts/event/0_EXAMPLE.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/event/0_EXAMPLE.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/event/0_EXAMPLE.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/0_EXAMPLE.js?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -10,7 +10,7 @@ var clearMap;                   // Upon event clearing, players may be moved to\n var minMapId;                   // Event takes place inside these map id interval. Players found out is instantly dropped from the event.\n var maxMapId;\n \n-var eventTime;                  // Max time alloted for the event, in minutes.\n+var eventTime;                  // Max time allotted for the event, in minutes.\n \n var lobbyRange = [0, 0];        // Range of concurrent lobbies (min range is 0, max range is 7).\n "}, {"sha": "e88e679c794fb585cf5afdd7b6f3a7299f98ae23", "filename": "scripts/event/EllinPQ.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/event/EllinPQ.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/event/EllinPQ.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/EllinPQ.js?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -96,7 +96,7 @@ function setup(level, lobbyid) {\n function afterSetup(eim) {}\n \n function respawnStg2(eim) {    \n-    if(!eim.getMapInstance(930000200).getAllPlayer().isEmpty()) eim.getMapInstance(930000200).instanceMapRespawn();\n+    if(!eim.getMapInstance(930000200).getPlayers().isEmpty()) eim.getMapInstance(930000200).instanceMapRespawn();\n     eim.schedule(\"respawnStg2\", 4 * 1000);\n }\n "}, {"sha": "5eed997ff626e6bc1e60193c58777064c62b3299", "filename": "scripts/event/GuildQuest.js", "status": "modified", "additions": 46, "deletions": 18, "changes": 64, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/event/GuildQuest.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/event/GuildQuest.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/GuildQuest.js?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -30,13 +30,14 @@ var minLevel = 1, maxLevel = 200;\n var entryMap = 990000000;\n var exitMap = 990001100;\n var recruitMap = 101030104;\n-var clearMap = 990001101;\n+var clearMap = 990001000;\n \n var minMapId = 990000000;\n var maxMapId = 990001101;\n \n-var waitTime = 3;\n+var waitTime = 3;       //  3 minutes\n var eventTime = 90;     // 90 minutes\n+var bonusTime = 0.5;    // 30 seconds\n \n var lobbyRange = [0, 0];\n \n@@ -119,7 +120,7 @@ function setup(level, lobbyid) {\n         \n         eim.setProperty(\"guild\", 0);\n         eim.setProperty(\"canJoin\", 1);\n-        eim.setProperty(\"statusStg1\", -1);\n+        eim.setProperty(\"canRevive\", 0);\n         \n         eim.getInstanceMap(990000000).resetPQ(level);\n         eim.getInstanceMap(990000100).resetPQ(level);\n@@ -175,7 +176,9 @@ function isTeamAllJobs(eim) {\n */\n \n function afterSetup(eim) {\n-        eim.setProperty(\"guild\", \"\" + eim.getLeader().getGuildId());\n+        var leader = em.getChannelServer().getPlayerStorage().getCharacterById(eim.getLeaderId());\n+        if(leader != null)\n+                eim.setProperty(\"guild\", \"\" + leader.getGuildId());\n }\n \n function respawnStages(eim) {}\n@@ -189,16 +192,20 @@ function playerEntry(eim, player) {\n }\n \n function scheduledTimeout(eim) {\n-        if(eim.getIntProperty(\"canJoin\") == 1) {\n-                eim.setProperty(\"canJoin\", 0);\n-    \n-                if(eim.checkEventTeamLacking(true, minPlayers)) {\n-                        end(eim);\n+        if(eim.isEventCleared()) {\n+                eim.warpEventTeam(990001100);\n+        } else {\n+                if(eim.getIntProperty(\"canJoin\") == 1) {\n+                        eim.setProperty(\"canJoin\", 0);\n+\n+                        if(eim.checkEventTeamLacking(true, minPlayers)) {\n+                                end(eim);\n+                        } else {\n+                                eim.startEventTimer(eventTime * 60000);\n+                        }\n                 } else {\n-                        eim.startEventTimer(eventTime * 60000);\n+                        end(eim);\n                 }\n-        } else {\n-                end(eim);\n         }\n }\n \n@@ -222,15 +229,33 @@ function changedMap(eim, player, mapid) {\n \n function changedLeader(eim, leader) {}\n \n-function playerDead(eim, player) {}\n+function playerDead(eim, player) {\n+        if(player.getMapId() == 990000900) {\n+                if(player.getMap().countAlivePlayers() == 0 && player.getMap().countMonsters() > 0) {\n+                        end(eim);\n+                }\n+        }\n+}\n \n function playerRevive(eim, player) { // player presses ok on the death pop up.\n-        if (eim.isEventTeamLackingNow(true, minPlayers, player) && eim.getIntProperty(\"canJoin\") == 0) {\n-                eim.unregisterPlayer(player);\n-                end(eim);\n+        if(eim.getIntProperty(\"canRevive\") == 0) {\n+                if (eim.isEventTeamLackingNow(true, minPlayers, player) && eim.getIntProperty(\"canJoin\") == 0) {\n+                        eim.unregisterPlayer(player);\n+                        player.setHp(50);\n+                        player.changeMap(exitMap);\n+                        \n+                        end(eim);\n+                }\n+                else {\n+                        eim.unregisterPlayer(player);\n+                        player.setHp(50);\n+                        player.changeMap(exitMap);\n+                }\n+                \n+                return false;\n         }\n-        else\n-                eim.unregisterPlayer(player);\n+        \n+        return true;\n }\n \n function playerDisconnected(eim, player) {\n@@ -267,6 +292,9 @@ function giveRandomEventReward(eim, player) {\n function clearPQ(eim) {\n         eim.stopEventTimer();\n         eim.setEventCleared();\n+        \n+        eim.warpEventTeam(clearMap);\n+        eim.startEventTimer(bonusTime * 60000);\n }\n \n function monsterKilled(mob, eim) {}"}, {"sha": "82176d693bc3f2f7d0e5b6226850ef8d6fa38b50", "filename": "scripts/npc/2013001.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/npc/2013001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/npc/2013001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2013001.js?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -147,12 +147,12 @@ function action(mode, type, selection) {\n                     var players = Array();\n                     var total = 0;\n                     for (var i = 0; i < 3; i++) {\n-                        var z = cm.getMap().getNumPlayersItemsInArea(i);\n+                        var z = cm.getMap().getNumPlayersInArea(i);\n                         players.push(z);\n                         total += z;\n                     }\n                     if (total != 3) {\n-                        cm.sendOk(\"There needs to be 3 players OR items on the platforms.\");\n+                        cm.sendOk(\"There needs to be exactly 3 players on these platforms.\");\n                     } else {\n                         var num_correct = 0;\n                         for (var i = 0; i < 3; i++) {"}, {"sha": "7471ac6f3e4a9e8771da674ea28fcd1226759e15", "filename": "scripts/npc/2040035.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/npc/2040035.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/npc/2040035.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2040035.js?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -45,7 +45,7 @@ function action(mode, type, selection) {\n                         var eim = cm.getEventInstance();\n                     \n                         if(!eim.giveEventReward(cm.getPlayer())) {\n-                                cm.sendNext(\"It seems you don't have a free slot in either your #rEquip#k, #rUse#k or #rEtc#k inventories. Please make room and try again.\");\n+                                cm.sendNext(\"It seems you don't have a free slot in either your #rEquip#k, #rUse#k or #rEtc#k inventories. Please make some room and try again.\");\n                         } else {\n                                 cm.warp(221024500);\n                         }"}, {"sha": "6f151112728d7ff7b1c63da53b2cd40fa6ba9c20", "filename": "scripts/npc/2080000.js", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/npc/2080000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/npc/2080000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2080000.js?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -68,36 +68,36 @@ function action(mode, type, selection) {\n             cm.sendNext(\"A stimulator is a special potion that I can add into the process of creating certain items. It gives it stats as though it had dropped from a monster. However, it is possible to have no change, and it is also possible for the item to be below average. There's also a 10% chance of not getting any item when using a stimulator, so please choose wisely.\")\n             cm.dispose();\n         } else if (selectedType == 1){ //warrior weapon\n-            var selStr = \"Very well, then which Warrior weapon shall recieve a dragon's power?#b\";\n+            var selStr = \"Very well, then which Warrior weapon shall receive a dragon's power?#b\";\n             var weapon = new Array (\"Dragon Carbella#k - Lv. 110 One-Handed Sword#b\",\"Dragon Axe#k - Lv. 110 One-Handed Axe#b\",\"Dragon Mace#k - Lv. 110 One-Handed BW#b\",\"Dragon Claymore#k - Lv. 110 Two-Handed Sword#b\",\"Dragon Battle Axe#k - Lv. 110 Two-Handed Axe#b\",\"Dragon Flame#k - Lv. 110 Two-Handed BW#b\",\n                 \"Dragon Faltizan#k - Lv. 110 Spear#b\",\"Dragon Chelbird#k - Lv. 110 Polearm#b\");\n             for (var i = 0; i < weapon.length; i++){\n                 selStr += \"\\r\\n#L\" + i + \"# \" + weapon[i] + \"#l\";\n             }\n             cm.sendSimple(selStr);\n         } else if (selectedType == 2){ //bowman weapon\n-            var selStr = \"Very well, then which Bowman weapon shall recieve a dragon's power?#b\";\n+            var selStr = \"Very well, then which Bowman weapon shall receive a dragon's power?#b\";\n             var weapon = new Array (\"Dragon Shiner Bow#k - Lv. 110 Bow#b\",\"Dragon Shiner Cross#k - Lv. 110 Crossbow#b\");\n             for (var i = 0; i < weapon.length; i++){\n                 selStr += \"\\r\\n#L\" + i + \"# \" + weapon[i] + \"#l\";\n             }\n             cm.sendSimple(selStr);\n         } else if (selectedType == 3){ //magician weapon\n-            var selStr = \"Very well, then which Magician weapon shall recieve a dragon's power?#b\";\n+            var selStr = \"Very well, then which Magician weapon shall receive a dragon's power?#b\";\n             var weapon = new Array (\"Dragon Wand#k - Lv. 108 Wand#b\",\"Dragon Staff#k - Lv. 110 Staff#b\");\n             for (var i = 0; i < weapon.length; i++){\n                 selStr += \"\\r\\n#L\" + i + \"# \" + weapon[i] + \"#l\";\n             }\n             cm.sendSimple(selStr);\n         } else if (selectedType == 4){ //thief weapon\n-            var selStr = \"Very well, then which Thief weapon shall recieve a dragon's power?#b\";\n+            var selStr = \"Very well, then which Thief weapon shall receive a dragon's power?#b\";\n             var weapon = new Array (\"Dragon Kanzir#k - Lv. 110 STR Dagger#b\",\"Dragon Kreda#k - Lv. 110 LUK Dagger#b\",\"Dragon Green Sleve#k - Lv. 110 Claw#b\");\n             for (var i = 0; i < weapon.length; i++){\n                 selStr += \"\\r\\n#L\" + i + \"# \" + weapon[i] + \"#l\";\n             }\n             cm.sendSimple(selStr);\n         } else if (selectedType == 5){ //pirate weapon\n-            var selStr = \"Very well, then which Pirate weapon shall recieve a dragon's power?#b\";\n+            var selStr = \"Very well, then which Pirate weapon shall receive a dragon's power?#b\";\n             var weapon = new Array (\"Dragon Slash Claw#k - Lv. 110 Knuckle#b\",\"Dragonfire Revolver#k - Lv. 110 Gun#b\");\n             for (var i = 0; i < weapon.length; i++){\n                     selStr += \"\\r\\n#L\" + i + \"# \" + weapon[i] + \"#l\";"}, {"sha": "8736065a67a94806a01f757fcaa9ec2af6cd135f", "filename": "scripts/npc/9040000.js", "status": "modified", "additions": 11, "deletions": 5, "changes": 16, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/npc/9040000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/npc/9040000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9040000.js?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -68,7 +68,7 @@ function action(mode, type, selection) {\n                                 if(cm.getPlayer().getGuildId() > 0) {\n                                         var eim = findLobby(cm.getPlayer().getGuildId());\n                                         if(eim == null) {\n-                                                cm.sendOk(\"You don't have a guild registered and currently on strategy time to assist on this channel.\");\n+                                                cm.sendOk(\"Your guild is not currently on strategy time on this channel. Check again if your guild is currently planning a Guild Quest or, if so, the channel they are allotted on.\");\n                                         } else {\n                                                 if(cm.isLeader()) {\n                                                         em.getEligibleParty(cm.getParty());\n@@ -83,16 +83,22 @@ function action(mode, type, selection) {\n                                 \n                                 cm.dispose();\n                         } else {\n-                                cm.sendOk(\"#e#b<Guild Quest: Sharenian Ruins>#k#n\\r\\n Team up with your guild members in an auspicious attempt to recover the Rubian from the skeleton's grasp, with teamwork overcoming many puzzles and challenges awaiting inside the Sharenian tombs. Great rewards can be obtained upon the instance completion, and Guild Points can be racked up for your Guild.\");\n+                                var reqStr = \"\";\n+                                reqStr += \"\\r\\n\\r\\n    Team requirements:\\r\\n\\r\\n\";\n+                                reqStr += \"     - 1 team member #rbelow or equal level 30#k.\\r\\n\";\n+                                reqStr += \"     - 1 team member who is a #rThief with Dark Sight#k skill and #rmaxed Haste#k.\\r\\n\";\n+                                reqStr += \"     - 1 team member who is a Magician with #rmaxed Teleport#k.\\r\\n\";\n+                                reqStr += \"     - 1 team member who is a #rlong ranged attacker#k like Bowman, Assassin, or Gunslinger.\\r\\n\";\n+                                reqStr += \"     - 1 team member with #rgood jumping skills#k like Assassin with maxed Flash Jump or Gunslinger with Wings.\\r\\n\";\n+                            \n+                                cm.sendOk(\"#e#b<Guild Quest: Sharenian Ruins>#k#n\\r\\n Team up with your guild members in an auspicious attempt to recover the Rubian from the skeleton's grasp, with teamwork overcoming many puzzles and challenges awaiting inside the Sharenian tombs. Great rewards can be obtained upon the instance completion, and Guild Points can be racked up for your Guild.\" + reqStr);\n                                 cm.dispose();\n                         }\n                 } else if (status == 2) {\n                         if (sel == 0) {\n                                 var entry = em.addGuildToQueue(cm.getPlayer().getGuildId(), cm.getPlayer().getId());\n                                 if(entry > 0) {\n-                                        if(entry == 1) {\n-                                                cm.sendOk(\"Your guild has been registered successfully. A message will pop on your chat keeping your guild aware about the registration status. Now, #rimportant#k: as the leader of this instance, #ryou must already be present on this channel#k the right moment your guild is called for the strategy time. #bThe missubmission of this action will void#k your guild registration as a whole, and the next guild will be called immediately. Must be noted also, that if you become absent from the end of the strategy time to any point on the duration of the instance, it will render the instance interrupted, and your guild will be moved out instantly, moving again the queue.\");\n-                                        }\n+                                        cm.sendOk(\"Your guild has been registered successfully. A message will pop on your chat keeping your guild aware about the registration status.\\r\\n\\r\\nNow, #rimportant#k: as the leader of this instance, #ryou must already be present on this channel#k the right moment your guild is called for the strategy time. #bThe missubmission of this action will void#k your guild registration as a whole, and the next guild will be called immediately. Must be noted also, that if you become absent from the end of the strategy time to any point on the duration of the instance, it will render the instance interrupted, and your guild will be moved out instantly, moving again the queue.\");\n                                 } else if(entry == 0) {\n                                         cm.sendOk(\"The queue on this channel is already full. Please be patient and try again after a while, or try on another channel.\");\n                                 } else {"}, {"sha": "6ae76a4b3eb237067fd6ae0518cbc9213c16dd97", "filename": "scripts/npc/9040001.js", "status": "modified", "additions": 41, "deletions": 13, "changes": 54, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/npc/9040001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/npc/9040001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9040001.js?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -19,20 +19,48 @@\n     You should have received a copy of the GNU Affero General Public License\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n+/*\n+@\tAuthor : Ronan\n+@\n+@\tNPC = Nuris (9040001)\n+@\tMap = Sharenian - Returning Path\n+@\tNPC MapId = 990001100\n+@\tNPC Exit-MapId = 101030104\n+@\n+ */\n \n-/* \n-* @Author Lerk\n-* \n-* Nuris, Sharenian: Returning Path (990001100)\n-* \n-* Exit of Guild Quest\n-*/\n-\n-var GQItems = new Array(1032033, 4001024, 4001025, 4001026, 4001027, 4001028, 4001029, 4001030, 4001031, 4001032, 4001033, 4001034, 4001035, 4001037);\n+var status;\n \n function start() {\n-    for (var i = 0; i < GQItems.length; i++)\n-        cm.removeAll(GQItems[i]);\n-    cm.warp(101030104);\n-    cm.dispose();\n+    status = -1;\n+    action(1,0,0);\n+}\n+\n+function action(mode, type, selection){\n+    if (mode == 1)\n+        status++;\n+    else {\n+        cm.dispose();\n+        return;\n+    }\n+\n+    if (status == 0) {\n+        var outText = \"It seems you have finished exploring Sharenian Keep, yes? Are you going to return to the recruitment map now?\";\n+        cm.sendYesNo(outText);\n+    } else if (mode == 1) {\n+        var eim = cm.getEventInstance();\n+        \n+        if(eim != null && eim.isEventCleared()) {\n+            if(!eim.giveEventReward(cm.getPlayer())) {\n+                    cm.sendNext(\"It seems you don't have a free slot in either your #rEquip#k, #rUse#k or #rEtc#k inventories. Please make some room first.\");\n+            } else {\n+                    cm.warp(101030104);\n+            }\n+            \n+            cm.dispose();\n+        } else {\n+            cm.warp(101030104);\n+            cm.dispose();\n+        }\n+    }\n }\n\\ No newline at end of file"}, {"sha": "55f2822ecb1c028847ff234864ba0473ae4eec0d", "filename": "scripts/npc/9040003.js", "status": "modified", "additions": 26, "deletions": 28, "changes": 54, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/npc/9040003.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/npc/9040003.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9040003.js?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -20,13 +20,20 @@\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n /* \n- * @Author TheRamon\n+ * @Author TheRamon, Ronan\n  * \n  * Sharen III's Soul, Sharenian: Sharen III's Grave (990000700)\n  * \n  * Guild Quest - end of stage 4\n  */\n \n+function clearStage(stage, eim) {\n+    eim.setProperty(\"stage\" + stage + \"clear\", \"true\");\n+    eim.showClearEffect(true);\n+\n+    eim.giveEventPlayersStageReward(stage);\n+}\n+\n var status = 0;\n function start() {\n     status = -1;\n@@ -41,39 +48,30 @@ function action(mode, type, selection) {\n             status++;\n         else\n             cm.dispose();\n+        \n+        var eim = cm.getPlayer().getEventInstance();\n+        \n+        if (eim.getProperty(\"stage4clear\") != null && eim.getProperty(\"stage4clear\").equals(\"true\")) {\n+            cm.sendOk(\"After what I thought would be an immortal sleep, I have finally found someone that will save Sharenian. I can truly rest in peace now.\");\n+            cm.dispose();\n+            return;\n+        }\n+        \n         if (status == 0) {\n-            if (cm.getPlayer().getEventInstance().getProperty(\"leader\").equals(cm.getPlayer().getName())) {\n-                if (cm.getPlayer().getEventInstance().getProperty(\"stage4clear\") != null && cm.getPlayer().getEventInstance().getProperty(\"stage4clear\").equals(\"true\"))\n-                {\n-                    cm.sendOk(\"After what I thought would be an immortal sleep, I have finally found someone that will save Sharenian. I can truly rest in peace now.\");\n-                    cm.dispose();\n-                }\n-                else {\n-                    var prev = cm.getPlayer().getEventInstance().setProperty(\"stage4clear\",\"true\",true);\n-                    if (prev == null) {\n-                        cm.sendNext(\"After what I thought would be an immortal sleep, I have finally found someone that will save Sharenian. This old man will now pave the way for you to finish the quest.\" + mode);\n-                    }\n-                    else {//if not null, was set before, and Gp already gained\n-                        cm.sendOk(\"After what I thought would be an immortal sleep, I have finally found someone that will save Sharenian. I can truly rest in peace now.\");\n-                        cm.dispose();\n-                    }\n-                }\n+            if (cm.isEventLeader()) {\n+                cm.sendNext(\"After what I thought would be an immortal sleep, I have finally found someone that will save Sharenian. This old man will now pave the way for you to finish the quest.\");\n+\n+                clearStage(4, eim);\n+                cm.getGuild().gainGP(30);\n+                cm.getPlayer().getMap().getReactorByName(\"ghostgate\").forceHitReactor(1);\n+    \n+                cm.dispose();\n             }\n             else\n             {\n-                if (cm.getPlayer().getEventInstance().getProperty(\"stage4clear\") != null && cm.getPlayer().getEventInstance().getProperty(\"stage4clear\").equals(\"true\"))\n-                    cm.sendOk(\"After what I thought would be an immortal sleep, I have finally found someone that will save Sharenian. I can truly rest in peace now.\");\n-                else\n-                    cm.sendOk(\"I need the leader of your party to speak with me, nobody else.\");\n+                cm.sendOk(\"I need the leader of your party to speak with me, nobody else.\");\n                 cm.dispose();\n             }\n         }\n-        else if (status == 1) {\n-            cm.getGuild().gainGP(30);\n-            cm.getPlayer().getMap().getReactorByName(\"ghostgate\").hitReactor(cm.getClient());\n-            cm.showEffect(\"quest/party/clear\");\n-            cm.playSound(\"Party1/Clear\");\n-            cm.dispose();\n-        }\n     }\n }\n\\ No newline at end of file"}, {"sha": "d01b2983cb0c05e391456eb67afd2e858058f91f", "filename": "scripts/npc/9040005.js", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/npc/9040005.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/npc/9040005.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9040005.js?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -25,10 +25,7 @@ function start() {\n \n function action(mode, type, selection) {\n \tif(mode == 1) {\n-\t\tvar eim = cm.getPlayer().getEventInstance();\n-\t\tif(eim != null) {\n-\t\t\teim.removePlayer(cm.getPlayer());\n-\t\t}\n+\t\tcm.warp(990001100);\n \t}\n \tcm.dispose();\n }"}, {"sha": "d45433c04e81fd45c1ff390afca88c0040d3be0b", "filename": "scripts/npc/9040006.js", "status": "modified", "additions": 162, "deletions": 207, "changes": 369, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/npc/9040006.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/npc/9040006.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9040006.js?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -1,254 +1,209 @@\n-/* @Author Lerk\n+/* @Author Lerk, Ronan\n  *\n  * Guardian Statue - Sharenian: Fountain of the Wiseman (990000500)\n  * \n  * Guild Quest Stage 3\n  */\n- \n+\n importPackage(Packages.tools);\n \n+function clearStage(stage, eim) {\n+        eim.setProperty(\"stage\" + stage + \"clear\", \"true\");\n+        eim.showClearEffect(true);\n+\n+        eim.giveEventPlayersStageReward(stage);\n+}\n+\n function start() {\n-    //everything can be done in one status, so let's do it here.\n+    if (cm.getPlayer().getMap().getReactorByName(\"watergate\").getState() > 0){\n+        cm.sendOk(\"Excellent work. You may proceed to the next stage.\");\n+        cm.dispose();\n+        return;\n+    }\n+    \n     var eim = cm.getPlayer().getEventInstance();\n     if (eim == null) {\n \tcm.warp(990001100);\n     } else {\n-\tif (eim.getProperty(\"leader\").equals(cm.getName())) {\n-\t    if (cm.getPlayer().getMap().getReactorByName(\"watergate\").getState() > 0){\n-\t\tcm.sendOk(\"You may proceed.\");\n-\t    } else {\n-\t\tvar currentCombo = eim.getProperty(\"stage3combo\");\n-\t\tif (currentCombo == null || currentCombo.equals(\"reset\")) {\n-\t\t    var newCombo = makeCombo();\n-\t\t    eim.setProperty(\"stage3combo\",newCombo);\n-\t\t    //cm.playerMessage(\"Debug: \" + newCombo);\n-\t\t    eim.setProperty(\"stage3attempt\",\"1\");\n-\t\t    cm.sendOk(\"This fountain guards the secret passage to the throne room. Offer items in the area to the vassals to proceed. The vassals shall tell you whether your offerings are accepted, and if not, which vassals are displeased. You have seven attempts. Good luck.\")\n-\t\t} else {\n-\t\t    var attempt = parseInt(eim.getProperty(\"stage3attempt\"));\n-\t\t    var combo = parseInt(currentCombo);\n-\t\t    var guess = getGroundItems();\n-\t\t    if (guess != null) {\n-\t\t\tif (combo == guess) {\n-\t\t\t    cm.getPlayer().getMap().getReactorByName(\"watergate\").hitReactor(cm.getClient());\n-\t\t\t    cm.sendOk(\"You may proceed.\");\n-\t\t\t\t\n-\t\t\t    cm.getPlayer().getMap().broadcastMessage(MaplePacketCreator.showEffect(\"quest/party/clear\"));\n-\t\t\t\tcm.getPlayer().getMap().broadcastMessage(MaplePacketCreator.playSound(\"Party1/Clear\"));\n-\t\t\t    var prev = eim.getProperty(\"stage3clear\");\n-\t\t\t\teim.setProperty(\"stage3clear\",\"true\");\n-\t\t\t    if (prev == null) {\n-\t\t\t\t\tcm.getPlayer().getGuild().gainGP(100);\n-\t\t\t    }\n-\t\t\t} else {\n-\t\t\t    if (attempt < 7) {\n-\t\t\t\t//cm.playerMessage(\"Combo : \" + combo);\n-\t\t\t\t//cm.playerMessage(\"Guess : \" + guess);\n-\t\t\t\tvar parsedCombo = parsePattern(combo);\n-\t\t\t\tvar parsedGuess = parsePattern(guess);\n-\t\t\t\tvar results = compare(parsedCombo, parsedGuess);\n-\t\t\t\tvar string = \"\";\n-\t\t\t\t//cm.playerMessage(\"Results - Correct: \" + results[0] + \" | Incorrect: \" + results[1] + \" | Unknown: \" + results[2]);\n-\t\t\t\tif (results[0] != 0) {\n-\t\t\t\t    if (results[0] == 1) {\n-\t\t\t\t\tstring += \"1 vassal is pleased with their offering.\\r\\n\";\n-\t\t\t\t    } else {\n-\t\t\t\t\tstring += results[0] + \" vassals are pleased with their offerings.\\r\\n\";\n-\t\t\t\t    }\n-\t\t\t\t}\n-\t\t\t\tif (results[1] != 0) {\n-\t\t\t\t    if (results[1] == 1) {\n-\t\t\t\t\tstring += \"1 vassal has recieved an incorrect offering.\\r\\n\";\n-\t\t\t\t    } else {\n-\t\t\t\t\tstring += results[1] + \" vassals have recieved incorrect offerings.\\r\\n\";\n-\t\t\t\t    }\n-\t\t\t\t}\n-\t\t\t\tif (results[2] != 0) {\n-\t\t\t\t    if (results[2] == 1) {\n-\t\t\t\t\tstring += \"1 vassal has recieved an unknown offering.\\r\\n\";\n-\t\t\t\t    } else {\n-\t\t\t\t\tstring += results[2] + \" vassals have recieved unknown offerings.\\r\\n\";\n-\t\t\t\t    }\n-\t\t\t\t}\n-\t\t\t\tstring += \"This is your \";\n-\t\t\t\tswitch (attempt) {\n-\t\t\t\t    case 1:\n-\t\t\t\t\tstring += \"1st\";\n-\t\t\t\t\tbreak;\n-\t\t\t\t    case 2:\n-\t\t\t\t\tstring += \"2nd\";\n-\t\t\t\t\tbreak;\n-\t\t\t\t    case 3:\n-\t\t\t\t\tstring += \"3rd\";\n-\t\t\t\t\tbreak;\n-\t\t\t\t    default:\n-\t\t\t\t\tstring += attempt + \"th\";\n-\t\t\t\t\tbreak;\n-\t\t\t\t}\n-\t\t\t\tstring += \" attempt.\";\n+\tif (cm.isEventLeader()) {\n+            var currentCombo = eim.getProperty(\"stage3combo\");\n+            if (currentCombo == null || currentCombo.equals(\"reset\")) {\n+                var newCombo = makeCombo();\n+                eim.setProperty(\"stage3combo\",newCombo);\n+                //cm.playerMessage(\"Debug: \" + newCombo);\n+                eim.setProperty(\"stage3attempt\",\"1\");\n+                cm.sendOk(\"This fountain guards the secret passage to the throne room. Offer items in the area to the vassals to proceed. The vassals shall tell you whether your offerings are accepted, and if not, which vassals are displeased. You have seven attempts. Good luck.\");\n+            } else {\n+                var attempt = parseInt(eim.getProperty(\"stage3attempt\"));\n+                var combo = parseInt(currentCombo);\n+                var guess = getGroundItems();\n+                if (guess != null) {\n+                    if (combo == guess) {\n+                        cm.getPlayer().getMap().getReactorByName(\"watergate\").forceHitReactor(1);\n+                        clearStage(3, eim);\n+                        cm.getGuild().gainGP(25);\n+                        \n+                        removeGroundItems();\n+                        cm.sendOk(\"Excellent work. You may proceed to the next stage.\");\n+                    } else {\n+                        if (attempt < 7) {\n+                            var comboItems = [0, 0, 0, 0];\n+                            var guessItems = [0, 0, 0, 0];\n+                            \n+                            var correct = 0, incorrect, unknown = 0;\n+                            for(var i = 0; i < 4; i++) {\n+                                var guessIdx = Math.floor(guess / Math.pow(10, i)) % 10;\n+                                var comboIdx = Math.floor(combo / Math.pow(10, i)) % 10;\n+                                \n+                                if(guessIdx == comboIdx) correct++;\n+                                else {\n+                                    (guessItems[guessIdx])++;\n+                                    (comboItems[comboIdx])++;\n+                                }\n+                            }\n+                            \n+                            for(var i = 0; i < 4; i++)  {\n+                                var diff = guessItems[i] - comboItems[i];\n+                                if(diff > 0) unknown += diff;\n+                            }\n+                            \n+                            incorrect = 4 - correct - unknown;\n+                            \n+                            var string = \"\";\n+                            //cm.playerMessage(\"Results - Correct: \" + results[0] + \" | Incorrect: \" + results[1] + \" | Unknown: \" + results[2]);\n+                            if (correct != 0) {\n+                                if (correct == 1) {\n+                                    string += \"1 vassal is pleased with their offering.\\r\\n\";\n+                                } else {\n+                                    string += correct + \" vassals are pleased with their offerings.\\r\\n\";\n+                                }\n+                            }\n+                            if (incorrect != 0) {\n+                                if (incorrect == 1) {\n+                                    string += \"1 vassal has received an incorrect offering.\\r\\n\";\n+                                } else {\n+                                    string += incorrect + \" vassals have received incorrect offerings.\\r\\n\";\n+                                }\n+                            }\n+                            if (unknown != 0) {\n+                                if (unknown == 1) {\n+                                    string += \"1 vassal has received an unknown offering.\\r\\n\";\n+                                } else {\n+                                    string += unknown + \" vassals have received unknown offerings.\\r\\n\";\n+                                }\n+                            }\n+                            string += \"This is your \";\n+                            switch (attempt) {\n+                                case 1:\n+                                    string += \"1st\";\n+                                    break;\n+                                case 2:\n+                                    string += \"2nd\";\n+                                    break;\n+                                case 3:\n+                                    string += \"3rd\";\n+                                    break;\n+                                default:\n+                                    string += attempt + \"th\";\n+                                    break;\n+                            }\n+                            string += \" attempt.\";\n \n-\t\t\t\t//spawn one black and one myst knight\n-\t\t\t\tspawnMob(9300036, -350, 150, cm.getPlayer().getMap());\n-\t\t\t\tspawnMob(9300037, 400, 150, cm.getPlayer().getMap());\n+                            //spawn one black and one myst knight\n+                            spawnMob(9300036, -350, 150, cm.getPlayer().getMap());\n+                            spawnMob(9300037, 400, 150, cm.getPlayer().getMap());\n \n-\t\t\t\tcm.sendOk(string);\n-\t\t\t\teim.setProperty(\"stage3attempt\",attempt + 1);\n-\t\t\t    } else {\n-\t\t\t\t//reset the combo and mass spawn monsters\n-\t\t\t\teim.setProperty(\"stage3combo\",\"reset\");\n-\t\t\t\tcm.sendOk(\"You have failed the test. Please compose yourselves and try again later.\");\n+                            cm.sendOk(string);\n+                            eim.setProperty(\"stage3attempt\",attempt + 1);\n+                        } else {\n+                            //reset the combo and mass spawn monsters\n+                            eim.setProperty(\"stage3combo\",\"reset\");\n+                            cm.sendOk(\"You have failed the test. Please compose yourselves and try again later.\");\n \n-\t\t\t\tfor (var i = 0; i < 6; i++) {\n-\t\t\t\t    //keep getting new monsters, lest we spawn the same monster five times o.o!\n-\t\t\t\t\tspawnMob(9300036, randX(), 150, cm.getPlayer().getMap());\n-\t\t\t\t\tspawnMob(9300037, randX(), 150, cm.getPlayer().getMap());\n-\t\t\t\t}\n-\t\t\t    }\n-\t\t\t}\n-\t\t    } else {\n-\t\t\tcm.sendOk(\"Please make sure your attempt is properly set in front of the vassals and talk to me again.\");\n-\t\t    }\n-\t\t}\n-\t    }\n-\t} else {\n-\t    cm.sendOk(\"Please have your leader speak to me.\");\n-\t}\n+                            for (var i = 0; i < 6; i++) {\n+                                //keep getting new monsters, lest we spawn the same monster five times o.o!\n+                                spawnMob(9300036, randX(), 150, cm.getPlayer().getMap());\n+                                spawnMob(9300037, randX(), 150, cm.getPlayer().getMap());\n+                            }\n+                        }\n+                        \n+                        eim.showWrongEffect();\n+                    }\n+                } else {\n+                    cm.sendOk(\"Please make sure your attempt is properly set in front of the vassals and talk to me again.\");\n+                }\n+            }\n+        } else {\n+            cm.sendOk(\"Please have your leader speak to me.\");\n+        }\n     }\n+    \n     cm.dispose();\n }\n \n-function action(mode, type, selection) {\n-}\n+function action(mode, type, selection) {}\n \n function makeCombo() {\n     var combo = 0;\n         \n     for (var i = 0; i < 4; i++) {\n-\tcombo += Math.floor(Math.random() * 4) * Math.pow(10, i);\n+\tcombo += (Math.floor(Math.random() * 4) * Math.pow(10, i));\n     }\n         \n     return combo;\n }\n \n-//check the items on ground and convert into an applicable string; null if items aren't proper\n-function getGroundItems() {\n-    var items = cm.getPlayer().getMap().getMapObjectsInRange(cm.getPlayer().getPosition(), Packages.java.lang.Double.POSITIVE_INFINITY, Packages.java.util.Arrays.asList([Packages.server.maps.MapleMapObjectType.ITEM]));\n-    var itemInArea = new Array(-1, -1, -1, -1);\n-        \n-    if (items.size() != 4) {\n-\tcm.getPlayer().dropMessage(\"There are too many items in the map. Please remove some\");\n-\treturn null;\n-    }\n-        \n-    var iter = items.iterator();\n+function getRawItems() {\n+    var mapItems = cm.getPlayer().getMap().getItems();\n+    var rawItems = new Array();\n+    \n+    var iter = mapItems.iterator();\n     while (iter.hasNext()) {\n \tvar item = iter.next();\n \tvar id = item.getItem().getItemId();\n \tif (id < 4001027 || id > 4001030) {\n-\t    cm.getPlayer().dropMessage(\"Some items in the map are not part of the 4 items needed\");\n-\t    return null;\n+\t    continue;\n \t} else {\n-\t    //check item location\n-\t    for (var i = 0; i < 4; i++) {\n-\t\tif (cm.getPlayer().getMap().getArea(i).contains(item.getPosition())) {\n-\t\t    itemInArea[i] = id - 4001027;\n-\t\t    //cm.getPlayer().dropMessage(\"Item in area \"+i+\": \" + id);\n-\t\t    break;\n-\t\t}\n-\t    }\n+\t    rawItems.push(item);\n \t}\n     }\n-        \n-    //guaranteed four items that are part of the stage 3 item set by this point, check to see if each area has an item\n-    if (itemInArea[0] == -1 || itemInArea[1] == -1 || itemInArea[2] == -1 || itemInArea[3] == -1) {\n-\tcm.getPlayer().dropMessage(\"Please place these in correct positions: \" + (itemInArea[0] == -1 ? \"Statue 1, \" : \"\") + (itemInArea[1] == -1 ? \"Statue 2, \" : \"\") + (itemInArea[2] == -1 ? \"Statue 3, \" : \"\") + (itemInArea[3] == -1 ? \"Statue 4. \" : \"\"));\n-              /*  for (var i = 0; i < 4; i++) {\n-                        cm.getPlayer().dropMessage(\"Item in area \"+i+\": \" + itemInArea[i]);\n-                }*/\n-\treturn null;\n-    }\n-        \n-    return (itemInArea[0] * 1000 + itemInArea[1] * 100 + itemInArea[2] * 10 + itemInArea[3]);\n-}\n-\n-//convert an integer for answer or guess into int array for comparison\n-function parsePattern(pattern) {\n-    var tempPattern = pattern;\n-    var items = new Array(-1, -1, -1, -1);\n-    for (var i = 0; i < 4; i++) {\n-\titems[i] = Math.floor(tempPattern / Math.pow(10, 3-i));\n-\ttempPattern = tempPattern % Math.pow(10, 3-i);\n-    }\n-    return items;\n+    \n+    return rawItems;\n }\n \n-// compare two int arrays for the puzzle\n-function compare(answer, guess) {\n-    var correct = 0;\n-    var incorrect = 0;\n-    /*var debugAnswer = \"Combo : \";\n-        var debugGuess = \"Guess : \";\n-        \n-        for (var d = 0; d < answer.length; d++) {\n-                debugAnswer += answer[d] + \" \";\n-                debugGuess += guess[d] + \" \";\n-        }\n-        \n-        cm.getPlayer().dropMessage(debugAnswer);\n-        cm.getPlayer().dropMessage(debugGuess);*/\n-        \n-    for (var i = 0; i < answer.length; i) {\n-\tif (answer[i] == guess[i]) {\n-\t    correct++;\n-\t    //cm.getPlayer().dropMessage(\"Item match : \" + answer[i]);\n-                        \n-\t    //pop the answer/guess at i\n-\t    if (i != answer.length - 1) {\n-\t\tanswer[i] = answer[answer.length - 1];\n-\t\tguess[i] = guess[guess.length - 1];\n-\t    }\n-                        \n-\t    answer.pop();\n-\t    guess.pop();\n-                        \n-\t/*/debugAnswer = \"Combo : \";\n-                        debugGuess = \"Guess : \";\n-\n-                        for (var d = 0; d < answer.length; d++) {\n-                                debugAnswer += answer[d] + \" \";\n-                                debugGuess += guess[d] + \" \";\n-                        }\n-\n-                        cm.getPlayer().dropMessage(debugAnswer);\n-                        cm.getPlayer().dropMessage(debugGuess);*/\n-\t}\n-\telse {\n-\t    i++;\n-\t}\n-    }\n+//check the items on ground and convert into an applicable string; null if items aren't proper\n+function getGroundItems() {\n+    var itemInArea = new Array(-1, -1, -1, -1);\n+    \n+    var rawItems = getRawItems();\n+    if (rawItems.length != 4) return null;\n         \n-    //check remaining answers for \"incorrect\": correct item in incorrect position\n-    var answerItems = new Array(0, 0, 0, 0);\n-    var guessItems = new Array(0, 0, 0, 0);\n+    for(var j = 0; j < rawItems.length; j++) {\n+        var item = rawItems[j];\n+        var id = item.getItem().getItemId();\n         \n-    for (var j = 0; j < answer.length; j++) {\n-\tvar aItem = answer[j];\n-\tvar gItem = guess[j]\n-\tanswerItems[aItem]++;\n-\tguessItems[gItem]++;\n+        //check item location\n+        for (var i = 0; i < 4; i++) {\n+            if (cm.getPlayer().getMap().getArea(i).contains(item.getPosition())) {\n+                itemInArea[i] = id - 4001027;\n+                break;\n+            }\n+        }\n     }\n         \n-    /*for (var d = 0; d < answer.length; d++) {\n-                cm.getPlayer().dropMessage(\"Item \" + d + \" in combo: \" + answerItems[d] + \" | in guess: \" + guessItems[d]);\n-        }*/\n+    //guaranteed four items that are part of the stage 3 item set by this point, check to see if each area has an item\n+    if (itemInArea[0] == -1 || itemInArea[1] == -1 || itemInArea[2] == -1 || itemInArea[3] == -1)\n+\treturn null;\n         \n-    for (var k = 0; k < answerItems.length; k++) {\n-\tvar inc = Math.min(answerItems[k], guessItems[k]);\n-\t//cm.getPlayer().dropMessage(\"Incorrect for item \" + k + \": \" + inc);\n-\tincorrect += inc;\n+    return ((itemInArea[0] * 1000) + (itemInArea[1] * 100) + (itemInArea[2] * 10) + itemInArea[3]);\n+}\n+\n+function removeGroundItems() {\n+    var map = cm.getMap();\n+    var rawItems = getRawItems();\n+    for(var j = 0; j < rawItems.length; j++) {\n+        map.makeDisappearItemFromMap(rawItems[j]);\n     }\n-        \n-    return new Array(correct, incorrect, (4 - correct - incorrect));\n }\n \n //for mass spawn"}, {"sha": "73ea28eff02733e63d0fcd401c2255bf73fb3f05", "filename": "scripts/npc/9040009.js", "status": "modified", "additions": 66, "deletions": 61, "changes": 127, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/npc/9040009.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/npc/9040009.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9040009.js?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -22,6 +22,13 @@\n var status;\n var stage;\n \n+function clearStage(stage, eim) {\n+        eim.setProperty(\"stage\" + stage + \"clear\", \"true\");\n+        eim.showClearEffect(true);\n+\n+        eim.giveEventPlayersStageReward(stage);\n+}\n+\n function start() {\n     status = -1;\n     action (1, 0, 0);\n@@ -39,79 +46,77 @@ function action(mode, type, selection) {\n             status++;\n         else\n             status--;\n+        \n         var eim = cm.getPlayer().getEventInstance();\n         if (eim == null) {\n             cm.warp(990001100);\n         } else {\n-            if (eim.getProperty(\"leader\").equals(cm.getPlayer().getName())) {\n-                if (cm.getPlayer().getMap().getReactorByName(\"statuegate\").getState() > 0){\n-                    cm.sendOk(\"Proceed.\");\n-                    cm.dispose();\n-                } else {\n-                    if (status == 0) {\n-                        if (eim.getProperty(\"stage1status\") == null || eim.getProperty(\"stage1status\").equals(\"waiting\")) {\n-                            if (eim.getProperty(\"stage1phase\") == null) {\n-                                stage = 1;\n-                                eim.setProperty(\"stage1phase\",stage);\n-                            } else {\n-                                stage = parseInt(eim.getProperty(\"stage1phase\"));\n-                            }\n-                            if (stage == 1) {\n-                                cm.sendOk(\"In this challenge, I shall show a pattern on the statues around me. When I give the word, repeat the pattern to me to proceed.\");\n-                            }\n-                            else {\n-                                cm.sendOk(\"I shall now present a more difficult puzzle for you. Good luck.\")\n-                            }\n-                        }\n-                        else if (eim.getProperty(\"stage1status\").equals(\"active\")) {\n+            if(eim.getProperty(\"stage1clear\") == \"true\") {\n+                cm.sendOk(\"Excellent work. You may proceed to the next stage.\");\n+                cm.dispose();\n+                return;\n+            }\n+            \n+            if (cm.isEventLeader()) {\n+                if (status == 0) {\n+                    if (eim.getProperty(\"stage1status\") == null || eim.getProperty(\"stage1status\").equals(\"waiting\")) {\n+                        if (eim.getProperty(\"stage1phase\") == null) {\n+                            stage = 1;\n+                            eim.setProperty(\"stage1phase\",stage);\n+                        } else {\n                             stage = parseInt(eim.getProperty(\"stage1phase\"));\n-                            if (eim.getProperty(\"stage1combo\").equals(eim.getProperty(\"stage1guess\"))) {\n-                                if (stage == 3) {\n-                                    cm.getPlayer().getMap().getReactorByName(\"statuegate\").hitReactor(cm.getClient());\n-                                    cm.sendOk(\"Excellent work. Please proceed to the next stage.\");\n-                                    cm.showEffect(\"quest/party/clear\");\n-                                    cm.playSound(\"Party1/Clear\");\n-                                    var prev = eim.getProperty(\"stage1clear\");\n-\t\t\t\t\t\t\t\t\teim.setProperty(\"stage1clear\",\"true\");\n-                                    if (prev == null) {\n-                                        cm.getGuild().gainGP(15);\n-                                    }\n-                                } else {\n-                                                                        \n-                                    cm.sendOk(\"Very good. You still have more to complete, however. Talk to me again when you're ready.\");\n-                                    eim.setProperty(\"stage1phase\", stage + 1);\n-                                    cm.mapMessage(5, \"You have completed part \" + stage + \" of the Gatekeeper Test.\");\n-                                }\n-                                                                \n-                            } else {\n-                                cm.sendOk(\"You have failed this test.\");\n-                                cm.mapMessage(5, \"You have failed the Gatekeeper Test.\");\n-                                eim.setProperty(\"stage1phase\",\"1\")\n-                            }\n-                            eim.setProperty(\"stage1status\", \"waiting\");\n-                            cm.dispose();\n+                        }\n+                        if (stage == 1) {\n+                            cm.sendOk(\"In this challenge, I shall show a pattern on the statues around me. When I give the word, repeat the pattern to me to proceed.\");\n                         }\n                         else {\n-                            cm.sendOk(\"Please wait.\");\n-                            cm.dispose();\n+                            cm.sendOk(\"I shall now present a more difficult puzzle for you. Good luck.\");\n                         }\n                     }\n-                    else if (status == 1) {\n-                        var reactors = getReactors();\n-                        var combo = makeCombo(reactors);\n-                        cm.mapMessage(5, \"Please wait while the combination is revealed.\");\n-                        var delay = 5000;\n-                        for (var i = 0; i < combo.length; i++) {\n-                            cm.getPlayer().getMap().getReactorByOid(combo[i]).delayedHitReactor(cm.getClient(), delay + 3500*i);\n+                    else if (eim.getProperty(\"stage1status\").equals(\"active\")) {\n+                        stage = parseInt(eim.getProperty(\"stage1phase\"));\n+                        \n+                        if (eim.getProperty(\"stage1combo\").equals(eim.getProperty(\"stage1guess\"))) {\n+                            if (stage == 3) {\n+                                cm.getPlayer().getMap().getReactorByName(\"statuegate\").forceHitReactor(1);\n+                                clearStage(1, eim);\n+                                cm.getGuild().gainGP(15);\n+\n+                                cm.sendOk(\"Excellent work. You may proceed to the next stage.\");\n+                            } else {\n+                                cm.sendOk(\"Very good. You still have more to complete, however. Talk to me again when you're ready.\");\n+                                eim.setProperty(\"stage1phase\", stage + 1);\n+                                cm.mapMessage(5, \"You have completed part \" + stage + \" of the Gatekeeper Test.\");\n+                            }\n+\n+                        } else {\n+                            eim.showWrongEffect();\n+                            cm.sendOk(\"You have failed this test.\");\n+                            cm.mapMessage(5, \"You have failed the Gatekeeper Test.\");\n+                            eim.setProperty(\"stage1phase\",\"1\");\n                         }\n-                        eim.setProperty(\"stage1status\", \"display\");\n-                        eim.setProperty(\"stage1combo\",\"\");\n+                        eim.setProperty(\"stage1status\", \"waiting\");\n+                        cm.dispose();\n+                    }\n+                    else {\n+                        cm.sendOk(\"The statues are working on the pattern. Please wait.\");\n                         cm.dispose();\n                     }\n                 }\n-\n+                else if (status == 1) {\n+                    var reactors = getReactors();\n+                    var combo = makeCombo(reactors);\n+                    cm.mapMessage(5, \"Please wait while the combination is revealed.\");\n+                    var delay = 5000;\n+                    for (var i = 0; i < combo.length; i++) {\n+                        cm.getPlayer().getMap().getReactorByOid(combo[i]).delayedHitReactor(cm.getClient(), delay + 3500*i);\n+                    }\n+                    eim.setProperty(\"stage1status\", \"display\");\n+                    eim.setProperty(\"stage1combo\",\"\");\n+                    cm.dispose();\n+                }\n             } else {\n-                cm.sendOk(\"I need the leader of your party to speak with me, nobody else.\");\n+                cm.sendOk(\"I need the leader of this event to speak with me, nobody else.\");\n                 cm.dispose();\n             }\n         }\n@@ -122,10 +127,10 @@ function action(mode, type, selection) {\n function getReactors() {\n     var reactors = new Array();\n         \n-    var iter = cm.getPlayer().getMap().getMapObjects().iterator();\n+    var iter = cm.getPlayer().getMap().getReactors().iterator();\n     while (iter.hasNext()) {\n         var mo = iter.next();\n-        if (mo.getType() == Packages.server.maps.MapleMapObjectType.REACTOR && !mo.getName().equals(\"statuegate\")) {\n+        if (!mo.getName().equals(\"statuegate\")) {\n             reactors.push(mo.getObjectId());\n         }\n     }"}, {"sha": "59244232be9796c879862e4f206e94b532093c93", "filename": "scripts/npc/9040010.js", "status": "modified", "additions": 11, "deletions": 5, "changes": 16, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/npc/9040010.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/npc/9040010.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9040010.js?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -22,26 +22,32 @@\n function start() {\n     var eim = cm.getPlayer().getEventInstance();\n     if (eim != null) {\n-        if (eim.getProperty(\"leader\").equals(cm.getPlayer().getName())) {\n+        if (cm.isEventLeader()) {\n             if (cm.haveItem(4001024)) {\n                 cm.removeAll(4001024);\n-                var prev = eim.setProperty(\"bossclear\",\"true\",true);\n+                var prev = eim.setProperty(\"bossclear\", \"true\");\n                 if (prev == null) {\n                     var start = parseInt(eim.getProperty(\"entryTimestamp\"));\n-                    var diff = Packages.java.lang.System.currentTimeMillis() - start;\n+                    var diff = Date.now() - start;\n+                    \n                     var points = 1000 - Math.floor(diff / (100 * 60));\n-\t\t\t\t\tif(points < 100)\n-\t\t\t\t\t\tpoints = 100;\n+                    if(points < 100) points = 100;\n+                    \n                     cm.getGuild().gainGP(points);\n                 }\n+                \n                 eim.clearPQ();\n             }\n             else {\n                 cm.sendOk(\"This is your final challenge. Defeat the evil lurking within the Rubian and return it to me. That is all.\");\n             }\n         }\n+        else {\n+            cm.sendOk(\"This is your final challenge. Defeat the evil lurking within the Rubian and let your event leader return it to me. That is all.\");\n+        }\n     }\n     else\n         cm.warp(990001100);\n+    \n     cm.dispose();\n }\n\\ No newline at end of file"}, {"sha": "49b9751838ec994d23e102e7bf67ebe1aedd5650", "filename": "scripts/npc/9103002.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/npc/9103002.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/npc/9103002.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9103002.js?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -51,7 +51,7 @@ function action(mode, type, selection){\n                 var eim = cm.getEventInstance();\n                     \n                 if(!eim.giveEventReward(cm.getPlayer())) {\n-                        cm.sendNext(\"It seems you don't have a free slot in either your #rEquip#k, #rUse#k or #rEtc#k inventories. Please make room and try again.\");\n+                        cm.sendNext(\"It seems you don't have a free slot in either your #rEquip#k, #rUse#k or #rEtc#k inventories. Please make some room and try again.\");\n                 } else {\n                         cm.warp(809050017);\n                 }"}, {"sha": "125b078cbe5c95a5102dd86d7943c3766bed47a5", "filename": "scripts/npc/9201005.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/npc/9201005.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/npc/9201005.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9201005.js?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -70,7 +70,7 @@ function action(mode, type, selection) {\n \t\t\t\t\tcm.sendOk(\"You already have a Gold Maple Leaf. Go give them to your guests before you go into the wedding.\");\n \t\t\t\t\tcm.dispose();\n                 } else if (hasEngageRing) {\n-\t\t\t\t\tcm.sendOk(\"You have recieved 15 Gold Maple Leaves.\");\n+\t\t\t\t\tcm.sendOk(\"You have received 15 Gold Maple Leaves.\");\n \t\t\t\t\tcm.gainItem(4000313,15);\n \t\t\t\t\tcm.dispose();\n \t\t\t\t} else {"}, {"sha": "5ffb9ccc9cda21faa4908ca6c8acd9d55b0d9b0f", "filename": "scripts/npc/9201049.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/npc/9201049.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/npc/9201049.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9201049.js?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -42,7 +42,7 @@ function start() {\n             break;\n         }\n     if (hasRing)\n-        cm.sendNext(\"You've reached the end of the wedding. You will recieve an Onyx Chest for Bride and Groom and an Onyx Chest. Exchange them at Pila, she is at the top of Amoria.\");\n+        cm.sendNext(\"You've reached the end of the wedding. You will receive an Onyx Chest for Bride and Groom and an Onyx Chest. Exchange them at Pila, she is at the top of Amoria.\");\n     else if (cm.haveItem(4000313)) {\n         cm.sendNext(\"Wow the end of the wedding already ? Good bye then.!\");\n         status = 20;"}, {"sha": "7edf4af15b20605c7c20c7fcaa976fe476f9425d", "filename": "scripts/portal/guild1F00.js", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/portal/guild1F00.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/portal/guild1F00.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/guild1F00.js?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -22,10 +22,13 @@\n /*\n Return from Sharen III's Grave - Guild Quest\n \n-@Author Lerk\n+@Author Ronan\n */\n \n function enter(pi) {\n-        pi.warp(990000600, 1);\n+        var backPortals = [6, 8, 9, 11];\n+        var idx = pi.getEventInstance().gridCheck(pi.getPlayer());\n+        \n+        pi.warp(990000600, backPortals[idx]);\n         return true;\n }\n\\ No newline at end of file"}, {"sha": "f7b8802840389219dd7c84830ccf84685d8bc637", "filename": "scripts/portal/guild1F01.js", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/portal/guild1F01.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/portal/guild1F01.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/guild1F01.js?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -28,6 +28,7 @@ Save location to return.\n */\n \n function enter(pi) {\n+        pi.getEventInstance().gridInsert(pi.getPlayer(), 0);\n \tpi.warp(990000700, \"st00\");\n \treturn true;\n }"}, {"sha": "bafec7ac4f4334aa1a6bb2135409cd6415eaea3c", "filename": "scripts/portal/guild1F02.js", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/portal/guild1F02.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/portal/guild1F02.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/guild1F02.js?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -28,6 +28,7 @@ Save location to return.\n */\n \n function enter(pi) {\n+        pi.getEventInstance().gridInsert(pi.getPlayer(), 1);\n \tpi.warp(990000700, \"st00\");\n \treturn true;\n }"}, {"sha": "2cb213bb53a9307917c28cfbb27ff45494bc586a", "filename": "scripts/portal/guild1F03.js", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/portal/guild1F03.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/portal/guild1F03.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/guild1F03.js?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -28,6 +28,7 @@ Save location to return.\n */\n \n function enter(pi) {\n+        pi.getEventInstance().gridInsert(pi.getPlayer(), 3);\n \tpi.warp(990000700, \"st00\");\n \treturn true;\n }"}, {"sha": "9303540e9e104cd3e70c31a34ed08cc396e8a28e", "filename": "scripts/portal/guild1F04.js", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/portal/guild1F04.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/portal/guild1F04.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/guild1F04.js?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -28,6 +28,7 @@ Save location to return.\n */\n \n function enter(pi) {\n+        pi.getEventInstance().gridInsert(pi.getPlayer(), 2);\n \tpi.warp(990000700, \"st00\");\n \treturn true;\n }"}, {"sha": "b4ffe0d4debf472080eb18655e4eb860b9728dd6", "filename": "scripts/portal/kinggate_open.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/portal/kinggate_open.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/portal/kinggate_open.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/kinggate_open.js?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -27,7 +27,7 @@ Stage 5: Door before Ergoth - Guild Quest\n \n function enter(pi) {\n     if (pi.getPlayer().getMap().getReactorByName(\"kinggate\").getState() == 1) {\n-        pi.warp(990000900);\n+        pi.warp(990000900, 1);\n         if (pi.getPlayer().getEventInstance().getProperty(\"boss\") != null && pi.getPlayer().getEventInstance().getProperty(\"boss\").equals(\"true\")) {\n             pi.changeMusic(\"Bgm10/Eregos\");\n         }"}, {"sha": "33e1fa1707b08572269c3f9095af8587facc37ef", "filename": "scripts/portal/speargate_open.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/portal/speargate_open.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/portal/speargate_open.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/speargate_open.js?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -26,7 +26,7 @@\n \n function enter(pi) {\n     if (pi.getPlayer().getMap().getReactorByName(\"speargate\").getState() == 4) {\n-        pi.warp(990000401);\n+        pi.warp(990000401, 0);\n         return true;\n     } else {\n         pi.getPlayer().dropMessage(5, \"This way forward is not open yet.\");"}, {"sha": "e50ee5399b574864f032f6f45f6ab611b36ab11f", "filename": "scripts/portal/statuegate_open.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/portal/statuegate_open.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/portal/statuegate_open.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/statuegate_open.js?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -25,7 +25,7 @@\n */\n function enter(pi) {\n     if (pi.getPlayer().getMap().getReactorByName(\"statuegate\").getState() == 1) {\n-        pi.warp(990000301);\n+        pi.warp(990000301, 0);\n         return true;\n     } else {\n         pi.getPlayer().dropMessage(5, \"The gate is closed.\");"}, {"sha": "791044c1505a0e928fa0eb3c64001cd1928c880a", "filename": "scripts/portal/watergate_open.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/portal/watergate_open.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/portal/watergate_open.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/watergate_open.js?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -26,7 +26,7 @@ Stage 3: Exit Door - Guild Quest\n \n function enter(pi) {\n     if (pi.getPlayer().getMap().getReactorByName(\"watergate\").getState() == 1) {\n-        pi.warp(990000600);\n+        pi.warp(990000600, 1);\n         return true;\n     } else\n         pi.getPlayer().dropMessage(5, \"This way forward is not open yet.\");"}, {"sha": "24ed334c6a56ee8794a3f707ea92b31a28e66efd", "filename": "scripts/reactor/9208000.js", "status": "modified", "additions": 21, "deletions": 10, "changes": 31, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/reactor/9208000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/reactor/9208000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/9208000.js?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -25,26 +25,37 @@\n  * \n */\n \n+function padWithZeroes(n, width) {\n+    while(n.length < width) n = '0' + n;\n+    return n;\n+}\n+\n function act() {\n     var eim = rm.getPlayer().getEventInstance();\n     if (eim != null) {\n         var status = eim.getProperty(\"stage1status\");\n         if (status != null && !status.equals(\"waiting\")) {\n             var stage = parseInt(eim.getProperty(\"stage1phase\"));\n             if (status.equals(\"display\")) {\n-                var prevCombo = eim.getProperty(\"stage1combo\");\n-                prevCombo += rm.getReactor().getObjectId();\n-                rm.mapMessage(6,\"Current Combo: \" + prevCombo);\n-                eim.setProperty(\"stage1combo\",prevCombo);\n-                if (prevCombo.length == (3 * (stage + 3))) { //end of displaying\n-                    eim.setProperty(\"stage1status\",\"active\");\n-                    rm.mapMessage(5, \"The combo has been displayed; Proceed with caution.\");\n-                    eim.setProperty(\"stage1guess\",\"\");\n+                if(!rm.getReactor().isRecentHitFromAttack()) {\n+                    var prevCombo = eim.getProperty(\"stage1combo\");\n+\n+                    var n = \"\" + rm.getReactor().getObjectId();\n+                    prevCombo += padWithZeroes(n, 3);\n+\n+                    eim.setProperty(\"stage1combo\",prevCombo);\n+                    if (prevCombo.length == (3 * (stage + 3))) { //end of displaying\n+                        eim.setProperty(\"stage1status\",\"active\");\n+                        rm.mapMessage(5, \"The combo has been displayed; Proceed with caution.\");\n+                        eim.setProperty(\"stage1guess\",\"\");\n+                    }\n                 }\n             } else { //active\n-                var prevGuess = eim.getProperty(\"stage1guess\");\n+                var prevGuess = \"\" + eim.getProperty(\"stage1guess\");\n                 if (prevGuess.length != (3 * (stage + 3))) {\n-                    prevGuess += rm.getReactor().getObjectId();\n+                    var n = \"\" + rm.getReactor().getObjectId();\n+                    prevGuess += padWithZeroes(n, 3);\n+                    \n                     eim.setProperty(\"stage1guess\",prevGuess);\n                 }\n             }"}, {"sha": "a03ee665e9d291a2a73cdbd4972128d14c55bd62", "filename": "scripts/reactor/9208001.js", "status": "modified", "additions": 23, "deletions": 10, "changes": 33, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/reactor/9208001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/reactor/9208001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/9208001.js?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -21,10 +21,16 @@\n */\n /* @Author Lerk\n  * \n- * 9208000.js: Guild Quest - Gatekeeper Puzzle Reactor\n+ * 9208001.js: Guild Quest - Gatekeeper Puzzle Reactor\n  * \n */\n \n+\n+function padWithZeroes(n, width) {\n+    while(n.length < width) n = '0' + n;\n+    return n;\n+}\n+\n function act() {\n     var eim = rm.getPlayer().getEventInstance();\n     if (eim != null) {\n@@ -33,18 +39,25 @@ function act() {\n             var stage = parseInt(eim.getProperty(\"stage1phase\"));\n             //rm.mapMessage(6,\"Stage \" + stage);\n             if (status.equals(\"display\")) {\n-                var prevCombo = eim.getProperty(\"stage1combo\");\n-                prevCombo += rm.getReactor().getObjectId();\n-                eim.setProperty(\"stage1combo\",prevCombo);\n-                if (prevCombo.length == (3 * (stage + 3))) { //end of displaying\n-                    eim.setProperty(\"stage1status\",\"active\");\n-                    rm.mapMessage(5, \"The combo has been displayed; Proceed with caution.\");\n-                    eim.setProperty(\"stage1guess\",\"\");\n+                if(!rm.getReactor().isRecentHitFromAttack()) {\n+                    var prevCombo = eim.getProperty(\"stage1combo\");\n+\n+                    var n = \"\" + rm.getReactor().getObjectId();\n+                    prevCombo += padWithZeroes(n, 3);\n+\n+                    eim.setProperty(\"stage1combo\",prevCombo);\n+                    if (prevCombo.length == (3 * (stage + 3))) { //end of displaying\n+                        eim.setProperty(\"stage1status\",\"active\");\n+                        rm.mapMessage(5, \"The combo has been displayed; Proceed with caution.\");\n+                        eim.setProperty(\"stage1guess\",\"\");\n+                    }\n                 }\n             } else { //active\n-                var prevGuess = eim.getProperty(\"stage1guess\");\n+                var prevGuess = \"\" + eim.getProperty(\"stage1guess\");\n                 if (prevGuess.length != (3 * (stage + 3))) {\n-                    prevGuess += rm.getReactor().getObjectId();\n+                    var n = \"\" + rm.getReactor().getObjectId();\n+                    prevGuess += padWithZeroes(n, 3);\n+                    \n                     eim.setProperty(\"stage1guess\",prevGuess);\n                 }\n             //rm.mapMessage(6,\"Current Guess: \" + prevGuess);"}, {"sha": "b015dc84eb8c7e365c4492868ec2ab3f23df3172", "filename": "scripts/reactor/9208002.js", "status": "modified", "additions": 22, "deletions": 11, "changes": 33, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/reactor/9208002.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/reactor/9208002.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/9208002.js?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -21,29 +21,40 @@\n \n /* @Author Lerk\n  * \n- * 9208000.js: Guild Quest - Gatekeeper Puzzle Reactor\n+ * 9208002.js: Guild Quest - Gatekeeper Puzzle Reactor\n  * \n */\n \n+function padWithZeroes(n, width) {\n+    while(n.length < width) n = '0' + n;\n+    return n;\n+}\n+\n function act() {\n     var eim = rm.getPlayer().getEventInstance();\n     if (eim != null) {\n         var status = eim.getProperty(\"stage1status\");\n         if (status != null && !status.equals(\"waiting\")) {\n             var stage = parseInt(eim.getProperty(\"stage1phase\"));\n             if (status.equals(\"display\")) {\n-                var prevCombo = eim.getProperty(\"stage1combo\");\n-                prevCombo += rm.getReactor().getObjectId();\n-                eim.setProperty(\"stage1combo\",prevCombo);\n-                if (prevCombo.length == (3 * (stage + 3))) { //end of displaying\n-                    eim.setProperty(\"stage1status\",\"active\");\n-                    rm.mapMessage(5, \"The combo has been displayed; Proceed with caution.\");\n-                    eim.setProperty(\"stage1guess\",\"\");\n+                if(!rm.getReactor().isRecentHitFromAttack()) {\n+                    var prevCombo = eim.getProperty(\"stage1combo\");\n+                    var n = \"\" + rm.getReactor().getObjectId();\n+                    prevCombo += padWithZeroes(n, 3);\n+\n+                    eim.setProperty(\"stage1combo\",prevCombo);\n+                    if (prevCombo.length == (3 * (stage + 3))) { //end of displaying\n+                        eim.setProperty(\"stage1status\",\"active\");\n+                        rm.mapMessage(5, \"The combo has been displayed; Proceed with caution.\");\n+                        eim.setProperty(\"stage1guess\",\"\");\n+                    }\n                 }\n             } else { //active\n-                var prevGuess = eim.getProperty(\"stage1guess\");\n-                if (prevGuess.length != (3 * stage + 9)) {\n-                    prevGuess += rm.getReactor().getObjectId();\n+                var prevGuess = \"\" + eim.getProperty(\"stage1guess\");\n+                if (prevGuess.length != (3 * (stage + 3))) {\n+                    var n = \"\" + rm.getReactor().getObjectId();\n+                    prevGuess += padWithZeroes(n, 3);\n+                \n                     eim.setProperty(\"stage1guess\",prevGuess);\n                 }\n             }"}, {"sha": "f4196455c23b1792cd474b89d049775bf5feb7ae", "filename": "scripts/reactor/9208007.js", "status": "modified", "additions": 14, "deletions": 2, "changes": 16, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/reactor/9208007.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/reactor/9208007.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/9208007.js?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -22,9 +22,21 @@\n /*\n Stage 2: Spear destinations - Guild Quest\n \n-@Author Lerk\n+@Author Lerk, Ronan\n */\n \n function act() {\n-        rm.getPlayer().getEventInstance().getMapInstance(990000400).getReactorByName(\"speargate\").hitReactor(rm.getPlayer().getClient());\n+        var react = rm.getPlayer().getEventInstance().getMapInstance(990000400).getReactorByName(\"speargate\");\n+        react.forceHitReactor(react.getState() + 1);\n+        \n+        if(react.getState() == 4) {\n+                var eim = rm.getPlayer().getEventInstance();\n+\n+                var maps = [990000400, 990000410, 990000420, 990000430, 990000431, 990000440];\n+                for(var i = 0; i < maps.length; i++) {\n+                        eim.showClearEffect(false, maps[i]);\n+                }\n+                \n+                rm.getGuild().gainGP(20);\n+        }\n }\n\\ No newline at end of file"}, {"sha": "0fe5410bb3a5adde3e9e4b39c3c27b731315b499", "filename": "scripts/reactor/9208009.js", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/reactor/9208009.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/scripts/reactor/9208009.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/9208009.js?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -0,0 +1,28 @@\n+/* \n+ * This file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc> \n+                       Matthias Butz <matze@odinms.de>\n+                       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License version 3\n+    as published by the Free Software Foundation. You may not use, modify\n+    or distribute this program under any other version of the\n+    GNU Affero General Public License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+\n+// Opened GPQ boss room, players may now revive and stay on the GPQ\n+\n+function act() {\n+        if(rm.getEventInstance() != null) {\n+                rm.getEventInstance().setProperty(\"canRevive\", \"1\");\n+        }\n+}"}, {"sha": "e609fdffe9057d4dd754125ec7ff431fdfe2d8f3", "filename": "sql/db_drops.sql", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/sql/db_drops.sql", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/sql/db_drops.sql", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/sql/db_drops.sql?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -19035,7 +19035,14 @@\n (9300043, 4001052, 1, 1, 0, 999999),\n (9300040, 4001074, 1, 1, 0, 999999),\n (9300048, 4001053, 1, 1, 0, 999999),\n-(9300049, 4001074, 1, 1, 0, 999999);\n+(9300049, 4001074, 1, 1, 0, 999999),\n+(9300019, 4001026, 1, 1, 0, 999999),\n+(9300022, 4001027, 1, 1, 0, 999999),\n+(9300023, 4001028, 1, 1, 0, 999999),\n+(9300024, 4001035, 1, 1, 0, 999999),\n+(9300025, 4001036, 1, 1, 0, 999999),\n+(9300027, 4001035, 1, 1, 0, 999999),\n+(9300033, 4001035, 1, 1, 0, 999999);\n \n # (dropperid, itemid, minqty, maxqty, questid, chance)\n "}, {"sha": "3e5e1f5048a330af8e051b18bdd1972224644f58", "filename": "src/client/MapleCharacter.java", "status": "modified", "additions": 50, "deletions": 24, "changes": 74, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/src/client/MapleCharacter.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/src/client/MapleCharacter.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/MapleCharacter.java?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -281,8 +281,9 @@\n     private boolean loggedIn = false;\n     private MapleDragon dragon = null;\n     private boolean useCS;  //chaos scroll upon crafting item.\n-    private long useDuey;\n+    private long npcCd;\n     private long petLootCd;\n+    private long lastHpDec = 0;\n     private int newWarpMap = -1;\n \n     private MapleCharacter() {\n@@ -310,10 +311,6 @@ private MapleCharacter() {\n         petLootCd = System.currentTimeMillis();\n     }\n     \n-    public void setHpDecreaseTask(ScheduledFuture<?> mapDotTask) {\n-        hpDecreaseTask = mapDotTask;\n-    }\n-    \n     public MapleJob getJobStyle() {\n         int jobtype = this.getJob().getId() / 100;\n         \n@@ -413,12 +410,12 @@ public void setCS(boolean cs) {\n         useCS = cs;\n     }\n     \n-    public long getDuey() {\n-        return useDuey;\n+    public long getNpcCooldown() {\n+        return npcCd;\n     }\n     \n-    public void setDuey(long d) {\n-        useDuey = d;\n+    public void setNpcCooldown(long d) {\n+        npcCd = d;\n     }\n \n     public void addCooldown(int skillId, long startTime, long length, ScheduledFuture<?> timer) {\n@@ -1104,7 +1101,7 @@ public void changeKeybinding(int key, MapleKeyBinding keybinding) {\n         }\n     }\n     \n-    protected MapleMap getWarpMap(int map) {\n+    public MapleMap getWarpMap(int map) {\n \tMapleMap target;\n \tif (getEventInstance() == null) {\n             target = client.getChannelServer().getMapFactory().getMap(map);\n@@ -1221,14 +1218,8 @@ private void changeMapInternal(final MapleMap to, final Point pos, final byte[]\n                 client.announce(MaplePacketCreator.updateParty(client.getChannel(), party, PartyOperation.SILENT_UPDATE, null));\n                 updatePartyMemberHP();\n             }\n-            if (getMap().getHPDec() > 0) {\n-                hpDecreaseTask = TimerManager.getInstance().schedule(new Runnable() {\n-                    @Override\n-                    public void run() {\n-                        doHurtHp();\n-                    }\n-                }, 10000);\n-            }\n+            \n+            if (getMap().getHPDec() > 0) resetHpDecreaseTask();\n         }\n         else {\n             FilePrinter.printError(FilePrinter.MAPLE_MAP, \"Character \" + this.getName() + \" got stuck when moving to map \" + map.getId() + \".\");\n@@ -1381,7 +1372,13 @@ public final void pickupItem(MapleMapObject ob, int petIndex) {     // yes, one\n                             this.getMap().broadcastMessage(pickupPacket, mapitem.getPosition());\n                             this.getMap().removeMapObject(ob);\n                             mapitem.setPickedUp(true);\n-                        } else if (MapleInventoryManipulator.addFromDrop(client, mapitem.getItem(), false)) {\n+                        } else if(mapitem.getItemId() == 4031865 || mapitem.getItemId() == 4031866) {\n+                            // Add NX to account, show effect and make item disappear\n+                            this.getCashShop().gainCash(1, mapitem.getItemId() == 4031865 ? 100 : 250);\n+                            this.getMap().broadcastMessage(pickupPacket, mapitem.getPosition());\n+                            this.getMap().removeMapObject(ob);\n+                            mapitem.setPickedUp(true);\n+                        } else if (MapleInventoryManipulator.addFromDrop(client, mapitem.getItem(), true)) {\n                             this.getMap().broadcastMessage(pickupPacket, mapitem.getPosition());\n                             this.getMap().removeMapObject(ob);\n                             mapitem.setPickedUp(true);\n@@ -1928,9 +1925,10 @@ private boolean dispelSkills(int skillid) {\n         }\n     }\n \n-    public void doHurtHp() {\n+    private void doHurtHp() {\n         if (!(this.getInventory(MapleInventoryType.EQUIPPED).findById(getMap().getHPDecProtect()) != null || buffMapProtection())) {\n             addHP(-getMap().getHPDec());\n+            lastHpDec = System.currentTimeMillis();\n         }\n         \n         hpDecreaseTask = TimerManager.getInstance().schedule(new Runnable() {\n@@ -1940,7 +1938,25 @@ public void run() {\n             }\n         }, 10000);\n     }\n-\n+    \n+    public void resetHpDecreaseTask() {\n+        if (hpDecreaseTask != null) {\n+            hpDecreaseTask.cancel(false);\n+        }\n+        \n+        long lastHpTask = System.currentTimeMillis() - lastHpDec;\n+        if(lastHpTask >= 10000) {\n+            doHurtHp();\n+        } else {\n+            hpDecreaseTask = TimerManager.getInstance().schedule(new Runnable() {\n+                @Override\n+                public void run() {\n+                    doHurtHp();\n+                }\n+            }, lastHpTask);\n+        }\n+    }\n+    \n     public void dropMessage(String message) {\n         dropMessage(0, message);\n     }\n@@ -2086,14 +2102,24 @@ public void gainExp(int gain, int party, boolean show, boolean inChat, boolean w\n         }\n \t\n         if(gain < 0) gain = Integer.MAX_VALUE;   // integer overflow, heh.\n+        if(party < 0) party = Integer.MAX_VALUE;   // integer overflow, heh.\n         int equip = (int)Math.min((long)((gain / 10) * pendantExp), Integer.MAX_VALUE);\n         \n         long total = gain + equip + party;\n         gainExpInternal(total, equip, party, show, inChat, white);\n     }\n     \n+    public void loseExp(int loss, boolean show, boolean inChat) {\n+        loseExp(loss, show, inChat, true);\n+    }\n+    \n+    public void loseExp(int loss, boolean show, boolean inChat, boolean white) {\n+        gainExpInternal(-loss, 0, 0, show, inChat, white);\n+    }\n+    \n     private void gainExpInternal(long gain, int equip, int party, boolean show, boolean inChat, boolean white) {\n-        long total = gain;\n+        long total = Math.max(gain, -exp.get());\n+        \n         if (level < getMaxLevel()) {\n             long leftover = 0;\n             long nextExp = exp.get() + total;\n@@ -4265,9 +4291,9 @@ private void playerDead() {\n                 }\n             }\n             if (getExp() > XPdummy) {\n-                gainExp(-XPdummy, false, false);\n+                loseExp(XPdummy, false, false);\n             } else {\n-                gainExp(-getExp(), false, false);\n+                loseExp(getExp(), false, false);\n             }\n         }\n         if (getBuffedValue(MapleBuffStat.MORPH) != null) {"}, {"sha": "c1d5a79d43082fecf7c92adf26d68039876a68ed", "filename": "src/client/MapleClient.java", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/src/client/MapleClient.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/src/client/MapleClient.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/MapleClient.java?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -972,15 +972,15 @@ public int getGMLevel() {\n \t}\n \n \tpublic void setScriptEngine(String name, ScriptEngine e) {\n-\t\tengines.put(name, e);\n+                engines.put(name, e);\n \t}\n \n \tpublic ScriptEngine getScriptEngine(String name) {\n \t\treturn engines.get(name);\n \t}\n \n \tpublic void removeScriptEngine(String name) {\n-\t\tengines.remove(name);\n+                engines.remove(name);\n \t}\n \n \tpublic ScheduledFuture<?> getIdleTask() {"}, {"sha": "85a05dcc9e29808d5519ebd95a98c5064a98f7b3", "filename": "src/client/autoban/AutobanManager.java", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/src/client/autoban/AutobanManager.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/src/client/autoban/AutobanManager.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/autoban/AutobanManager.java?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -97,8 +97,8 @@ public long getLastSpam(int type) {\n      * 3: ItemIdSort<br>\n      * 4: SpecialMove<br>\n      * 5: UseCatchItem<br>\n-\t * 6: Item Drop<br>\n-\t * 7: Chat<br>\n+     * 6: Item Drop<br>\n+     * 7: Chat<br>\n      *\n      * @param type type\n      * @return Timestamp checker"}, {"sha": "6e8d9c4606149381f4037ee3bddf29d8819b461d", "filename": "src/client/command/Commands.java", "status": "modified", "additions": 29, "deletions": 9, "changes": 38, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/src/client/command/Commands.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/src/client/command/Commands.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/command/Commands.java?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -22,6 +22,7 @@\n package client.command;\n \n import java.awt.Point;\n+import java.awt.Rectangle;\n import java.io.BufferedReader;\n import java.io.File;\n import java.io.FileReader;\n@@ -708,21 +709,33 @@ public static boolean executePlayerCommand(MapleClient c, String[] sub, char hea\n                             player.dropMessage(6, \"Current map id \" + player.getMap().getId() + \", event: '\" + ((player.getMap().getEventInstance() != null) ? player.getMap().getEventInstance().getName() : \"null\") + \"'; Players: \" + player.getMap().getAllPlayers().size() + \", Mobs: \" + player.getMap().countMonsters() + \", Reactors: \" + player.getMap().countReactors() + \", Items: \" + player.getMap().countItems() + \".\");\n                         }\n                         break;\n-                \n+                    \n                 case \"debugevent\":\n                         if(ServerConstants.USE_DEBUG) {\n                             if(player.getEventInstance() == null) player.dropMessage(6, \"Player currently not in an event.\");\n                             else player.dropMessage(6, \"Current event name: \" + player.getEventInstance().getName() + \".\");\n                         }\n                         break;\n+                    \n+                case \"debugareas\":\n+                        if(ServerConstants.USE_DEBUG) {\n+                            player.dropMessage(6, \"Configured areas on map \" + player.getMapId() + \":\");\n+                            \n+                            byte index = 0;\n+                            for(Rectangle rect: player.getMap().getAreas()) {\n+                                player.dropMessage(6, \"Id: \" + index + \" -> posX: \" + rect.getX() + \" posY: '\" + rect.getY() + \"' dX: \" + rect.getWidth() + \" dY: \" + rect.getHeight() + \".\");\n+                                index++;\n+                            }\n+                        }\n+                        break;\n                 \n                 case \"debugreactors\":\n                         if(ServerConstants.USE_DEBUG) {\n                             player.dropMessage(6, \"Current reactor states on map \" + player.getMapId() + \":\");\n                             \n                             for(MapleMapObject mmo: player.getMap().getReactors()) {\n                                 MapleReactor mr = (MapleReactor) mmo;\n-                                player.dropMessage(6, \"Reactor id: \" + mr.getId() + \" name: '\" + mr.getName() + \"' -> Type: \" + mr.getReactorType() + \" State: \" + mr.getState() + \" Event State: \" + mr.getEventState() + \" Position: x \" + mr.getPosition().getX() + \" y \" + mr.getPosition().getY() + \".\");\n+                                player.dropMessage(6, \"Id: \" + mr.getId() + \" Oid: \" + mr.getObjectId() + \" name: '\" + mr.getName() + \"' -> Type: \" + mr.getReactorType() + \" State: \" + mr.getState() + \" Event State: \" + mr.getEventState() + \" Position: x \" + mr.getPosition().getX() + \" y \" + mr.getPosition().getY() + \".\");\n                             }\n                         }\n                         break;\n@@ -986,7 +999,7 @@ else if (sub[0].equals(\"sp\")) {\n \t\t} else if (sub[0].equals(\"whereami\")) { //This is so not going to work on the first commit\n \t\t\tplayer.yellowMessage(\"Map ID: \" + player.getMap().getId());\n \t\t\tplayer.yellowMessage(\"Players on this map:\");\n-\t\t\tfor (MapleMapObject mmo : player.getMap().getAllPlayer()) {\n+\t\t\tfor (MapleMapObject mmo : player.getMap().getPlayers()) {\n \t\t\t\tMapleCharacter chr = (MapleCharacter) mmo;\n \t\t\t\tplayer.dropMessage(5, \">> \" + chr.getName());\n \t\t\t}\n@@ -1203,18 +1216,25 @@ else if (sub[0].equals(\"sp\")) {\n \t\t\t\t}\n \t\t\t}\n \t\t\tif (victim != null) {\n+                                boolean changingEvent = true;\n+                            \n \t\t\t\tif (victim.getEventInstance() != null) {\n-\t\t\t\t\tvictim.getEventInstance().unregisterPlayer(victim);\n+                                        if(player.getEventInstance() != null && victim.getEventInstance().getLeaderId() == player.getEventInstance().getLeaderId()) {\n+                                                changingEvent = false;\n+                                        }\n+                                        else {\n+                                                victim.getEventInstance().unregisterPlayer(victim);\n+                                        }\n \t\t\t\t}\n \t\t\t\t//Attempt to join the warpers instance.\n-\t\t\t\tif (player.getEventInstance() != null) {\n+\t\t\t\tif (player.getEventInstance() != null && changingEvent) {\n \t\t\t\t\tif (player.getClient().getChannel() == victim.getClient().getChannel()) {//just in case.. you never know...\n \t\t\t\t\t\tplayer.getEventInstance().registerPlayer(victim);\n \t\t\t\t\t\tvictim.changeMap(player.getEventInstance().getMapInstance(player.getMapId()), player.getMap().findClosestPortal(player.getPosition()));\n \t\t\t\t\t} else {\n \t\t\t\t\t\tplayer.dropMessage(\"Target isn't on your channel, not able to warp into event instance.\");\n \t\t\t\t\t}\n-\t\t\t\t} else {//If victim isn't in an event instance, just warp them.\n+\t\t\t\t} else {//If victim isn't in an event instance or is in the same event instance as the one the caller is, just warp them.\n \t\t\t\t\tvictim.changeMap(player.getMapId(), player.getMap().findClosestPortal(player.getPosition()));\n \t\t\t\t}\n \t\t\t\tif (player.getClient().getChannel() != victim.getClient().getChannel()) {//And then change channel if needed.\n@@ -1348,7 +1368,7 @@ else if (sub[0].equals(\"sp\")) {\n \t\t\t\tMapleMonster monster = (MapleMonster) monstermo;\n \t\t\t\tif (!monster.getStats().isFriendly()) {\n \t\t\t\t\tmap.killMonster(monster, player, true);\n-\t\t\t\t\tmonster.giveExpToCharacter(player, monster.getExp() * c.getPlayer().getExpRate(), true, 1);\n+\t\t\t\t\t//monster.giveExpToCharacter(player, monster.getExp() * c.getPlayer().getExpRate(), true, 1);\n \t\t\t\t}\n \t\t\t}\n \t\t\tplayer.dropMessage(\"Killed \" + monsters.size() + \" monsters.\");\n@@ -1367,7 +1387,7 @@ else if (sub[0].equals(\"sp\")) {\n \t\t\t}\n                     \n \t\t\tplayer.setLevel(Integer.parseInt(sub[1]) - 1);\n-\t\t\tplayer.gainExp(-player.getExp(), false, false);\n+\t\t\tplayer.loseExp(player.getExp(), false, false);\n \t\t\tplayer.levelUp(false);\n \t\t} else if (sub[0].equals(\"levelpro\")) {\n                         if (sub.length < 2){\n@@ -1381,7 +1401,7 @@ else if (sub[0].equals(\"sp\")) {\n \t\t} else if (sub[0].equals(\"maxstat\")) {\n \t\t\tfinal String[] s = {\"setall\", String.valueOf(Short.MAX_VALUE)};\n \t\t\texecuteGMCommand(c, s, heading);\n-                        player.gainExp(-player.getExp(), false, false);\n+                        player.loseExp(player.getExp(), false, false);\n \t\t\tplayer.setLevel(255);\n \t\t\tplayer.setFame(13337);\n \t\t\tplayer.setMaxHp(30000);"}, {"sha": "d1c2b019761600728333aa86f5d04a52011e8ace", "filename": "src/constants/ServerConstants.java", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/src/constants/ServerConstants.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/src/constants/ServerConstants.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/constants/ServerConstants.java?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -47,11 +47,15 @@\n     public static final boolean USE_AUTOBAN = false;            //Commands the server to detect infractors automatically.\n     public static final boolean USE_ANOTHER_AUTOASSIGN = true;  //Based on distributing AP accordingly with higher secondary stat on equipments.\n     public static final boolean USE_REFRESH_RANK_MOVE = true;\n-    public static final int MAX_AP = 20000;                     //Max AP alloted on the auto-assigner.\n+    public static final boolean USE_PERFECT_PITCH = true;\t        //For lvl 30 or above, each lvlup player gains 1 perfect pitch.\n+    \n+    \n+    public static final int MAX_AP = 20000;                     //Max AP allotted on the auto-assigner.\n     public static final int MAX_EVENT_LEVELS = 8;               //Event has different levels of rewarding system.\n-    public static final long BLOCK_DUEY_RACE_COND = (long)(0.5 * 1000);\n+    public static final long BLOCK_NPC_RACE_CONDT = (long)(0.5 * 1000); //Time the player client must wait before reopening a conversation with an NPC.\n     public static final long PET_LOOT_UPON_ATTACK = (long)(0.7 * 1000); //Time the pet must wait before trying to pick items up.\n-    public static final boolean USE_PERFECT_PITCH = true;\t        //For lvl 30 or above, each lvlup player gains 1 perfect pitch.\n+    \n+    public static final int ITEM_EXPIRE_TIME = 3 * 60 * 1000;   //Time before items start disappearing. Recommended to be set up to 3 minutes.\n     \n     //Some Gameplay Enhancing Configuration\n     public static final boolean USE_PERFECT_SCROLLING = true;   //Scrolls doesn't use slots upon failure."}, {"sha": "e3923ef8168b21c74fa98a942965f45861774743", "filename": "src/net/server/channel/handlers/ChangeMapHandler.java", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/src/net/server/channel/handlers/ChangeMapHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/src/net/server/channel/handlers/ChangeMapHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/ChangeMapHandler.java?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -49,7 +49,7 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n \t\t}\n \t\tif (slea.available() == 0) { //Cash Shop :)\n \t\t\tif(!chr.getCashShop().isOpened()) {                 \n-                            c.disconnect(false, false);               \n+                                c.disconnect(false, false);\n \t\t\t\treturn;           \n \t\t\t}\n \t\t\tString[] socket = c.getChannelServer().getIP().split(\":\");\n@@ -84,14 +84,14 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n \t\t\t\t\t\t\tchr.announce(MaplePacketCreator.showWheelsLeft(chr.getItemQuantity(5510000, false)));\n \t\t\t\t\t\t} else {\n \t\t\t\t\t\t\tchr.cancelAllBuffs(false);\n-\t\t\t\t\t\t\tto = chr.getMap().getReturnMap();\n+\t\t\t\t\t\t\tto = chr.getWarpMap(chr.getMap().getReturnMapId());\n \t\t\t\t\t\t\tchr.setStance(0);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tchr.setHp(50);\n \t\t\t\t\t\tchr.changeMap(to, to.getRandomPlayerSpawnpoint());\n \t\t\t\t\t}\n \t\t\t\t} else if (targetid != -1 && chr.isGM()) {\n-\t\t\t\t\tMapleMap to = c.getChannelServer().getMapFactory().getMap(targetid);\n+\t\t\t\t\tMapleMap to = chr.getWarpMap(targetid);\n \t\t\t\t\tchr.changeMap(to, to.getPortal(0));\n \t\t\t\t} else if (targetid != -1 && !chr.isGM()) {//Thanks celino for saving me some time (:\n \t\t\t\t\tfinal int divi = chr.getMapId() / 100;\n@@ -124,7 +124,7 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t\tif (warp) {\n-\t\t\t\t\t\tfinal MapleMap to = c.getChannelServer().getMapFactory().getMap(targetid);\n+\t\t\t\t\t\tfinal MapleMap to = chr.getWarpMap(targetid);\n \t\t\t\t\t\tchr.changeMap(to, to.getPortal(0));\n \t\t\t\t\t}\n \t\t\t\t}"}, {"sha": "bc08736817f3f12ba43bdab74f4c6faa0aa7381f", "filename": "src/net/server/channel/handlers/DueyHandler.java", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/src/net/server/channel/handlers/DueyHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/src/net/server/channel/handlers/DueyHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/DueyHandler.java?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -59,7 +59,7 @@\n         TOCLIENT_SAMEACC_ERROR(0x0D),\n         TOCLIENT_SUCCESSFULLY_SENT(0x12),\n         TOCLIENT_SUCCESSFUL_MSG(0x17),\n-        TOCLIENT_PACKAGE_MSG(0x1B); // Ending byte; 4 if recieved. 3 if delete.\n+        TOCLIENT_PACKAGE_MSG(0x1B); // Ending byte; 4 if received. 3 if delete.\n         final byte code;\n \n         private Actions(int code) {"}, {"sha": "2a3bdae9e7ade2c43d06d4fc04e8b3ae25955276", "filename": "src/net/server/channel/handlers/GeneralChatHandler.java", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/src/net/server/channel/handlers/GeneralChatHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/src/net/server/channel/handlers/GeneralChatHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/GeneralChatHandler.java?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -37,9 +37,9 @@\n     public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {\n         String s = slea.readMapleAsciiString();\n         MapleCharacter chr = c.getPlayer();\n-\t\tif(chr.getAutobanManager().getLastSpam(7) + 200 > System.currentTimeMillis()) {\n-\t\t\treturn;\n-\t\t}\n+        if(chr.getAutobanManager().getLastSpam(7) + 200 > System.currentTimeMillis()) {\n+                return;\n+        }\n         if (s.length() > Byte.MAX_VALUE && !chr.isGM()) {\n         \tAutobanFactory.PACKET_EDIT.alert(c.getPlayer(), c.getPlayer().getName() + \" tried to packet edit in General Chat.\");\n         \tFilePrinter.printError(FilePrinter.EXPLOITS + c.getPlayer().getName() + \".txt\", c.getPlayer().getName() + \" tried to send text with length of \" + s.length() + \"\\r\\n\");\n@@ -70,13 +70,13 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n \t\t\t\tchr.dropMessage(5, \"The map you are in is currently muted. Please try again later.\");\n \t\t\t\treturn;\n \t\t\t}\n-            if (!chr.isHidden()){\n+            if (!chr.isHidden()) {\n             \tchr.getMap().broadcastMessage(MaplePacketCreator.getChatText(chr.getId(), s, chr.getWhiteChat(), show));\t\n             } else {\n                 chr.getMap().broadcastGMMessage(MaplePacketCreator.getChatText(chr.getId(), s, chr.getWhiteChat(), show));\n             }\n         }\n-\t\tchr.getAutobanManager().spam(7);\n+        chr.getAutobanManager().spam(7);\n     }\n }\n "}, {"sha": "69840839bac1e05e9a55c578b37291dbeae42ef0", "filename": "src/net/server/channel/handlers/ItemMoveHandler.java", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/src/net/server/channel/handlers/ItemMoveHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/src/net/server/channel/handlers/ItemMoveHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/ItemMoveHandler.java?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -54,6 +54,8 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n         } else {\n             MapleInventoryManipulator.move(c, type, src, action);\n         }\n+        \n+        if (c.getPlayer().getMap().getHPDec() > 0) c.getPlayer().resetHpDecreaseTask();\n         c.getPlayer().getAutobanManager().spam(6);\n     }\n }\n\\ No newline at end of file"}, {"sha": "c2bc7688d1741b58e4d9661b8528bb10381feaf1", "filename": "src/net/server/channel/handlers/NPCTalkHandler.java", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/src/net/server/channel/handlers/NPCTalkHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/src/net/server/channel/handlers/NPCTalkHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/NPCTalkHandler.java?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -38,17 +38,17 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n             return;\n         }\n         \n+        if(System.currentTimeMillis() - c.getPlayer().getNpcCooldown() < ServerConstants.BLOCK_NPC_RACE_CONDT)\n+            return;\n+        \n         int oid = slea.readInt();\n         MapleMapObject obj = c.getPlayer().getMap().getMapObject(oid);\n         if (obj instanceof MapleNPC) {\n             MapleNPC npc = (MapleNPC) obj;\n             if(ServerConstants.USE_DEBUG == true) c.getPlayer().dropMessage(5, \"Talking to NPC \" + npc.getId());\n             \n             if (npc.getId() == 9010009) {   //is duey\n-                if(System.currentTimeMillis() - c.getPlayer().getDuey() < ServerConstants.BLOCK_DUEY_RACE_COND)\n-                    return;\n-                    \n-                c.getPlayer().setDuey(System.currentTimeMillis());\n+                c.getPlayer().setNpcCooldown(System.currentTimeMillis());\n                 c.announce(MaplePacketCreator.sendDuey((byte) 8, DueyHandler.loadItems(c.getPlayer())));\n             } else if (npc.hasShop()) {\n                 if (c.getPlayer().getShop() != null) {"}, {"sha": "08f0c5d4b1f6968f088d8a307950b49ab0da4e00", "filename": "src/net/server/channel/handlers/PartySearchStartHandler.java", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/src/net/server/channel/handlers/PartySearchStartHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/src/net/server/channel/handlers/PartySearchStartHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/PartySearchStartHandler.java?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -50,7 +50,7 @@ public void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {\n \t\tint jobs = slea.readInt();\n \t\tMapleCharacter chr = c.getPlayer();\n \t\tMapleMap map = chr.getMap();\n-\t\tCollection<MapleMapObject> mapobjs = map.getAllPlayer();\n+\t\tCollection<MapleMapObject> mapobjs = map.getPlayers();\n \t\tfor (MapleMapObject mapobj : mapobjs) {\n \t\t\tif (chr.getParty().getMembers().size() > 5) {\n \t\t\t\tbreak;"}, {"sha": "cd265431bd713e4bb3835422da38cdba3d1d4493", "filename": "src/net/server/channel/handlers/PlayerLoggedinHandler.java", "status": "modified", "additions": 1, "deletions": 12, "changes": 13, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/src/net/server/channel/handlers/PlayerLoggedinHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/src/net/server/channel/handlers/PlayerLoggedinHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/PlayerLoggedinHandler.java?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -267,18 +267,7 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n             \n         }\n         \n-        if (player.getMap().getHPDec() > 0) {\n-            final MapleCharacter mc = player;\n-            \n-            ScheduledFuture<?> hpDecreaseTask = TimerManager.getInstance().schedule(new Runnable() {\n-                @Override\n-                public void run() {\n-                    mc.doHurtHp();\n-                }\n-            }, 10000);\n-            \n-            mc.setHpDecreaseTask(hpDecreaseTask);\n-        }\n+        if (player.getMap().getHPDec() > 0) player.resetHpDecreaseTask();\n         \n         player.dispelBuffCoupons();\n         player.resetPlayerRates();"}, {"sha": "629d9c7cb33c3e157414b8885d534fc494a8376b", "filename": "src/net/server/channel/handlers/ReactorHitHandler.java", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/src/net/server/channel/handlers/ReactorHitHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/src/net/server/channel/handlers/ReactorHitHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/ReactorHitHandler.java?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -41,7 +41,7 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n         int skillid = slea.readInt();\n         MapleReactor reactor = c.getPlayer().getMap().getReactorByOid(oid);\n         if (reactor != null && reactor.isAlive()) {\n-            reactor.hitReactor(charPos, stance, skillid, c);\n+            reactor.hitReactor(true, charPos, stance, skillid, c);\n         }\n     }\n }"}, {"sha": "f972d38ef3d481ccfa80939d373b19038697f8e0", "filename": "src/net/server/guild/MapleGuild.java", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/src/net/server/guild/MapleGuild.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/src/net/server/guild/MapleGuild.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/guild/MapleGuild.java?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -540,7 +540,7 @@ public void gainGP(int amount) {\n         this.gp += amount;\n         this.writeToDB(false);\n         this.guildMessage(MaplePacketCreator.updateGP(this.id, this.gp));\n-\t\tthis.guildMessage(MaplePacketCreator.getGPMessage(amount));\n+        this.guildMessage(MaplePacketCreator.getGPMessage(amount));\n     }\n     \n     public void removeGP(int amount){"}, {"sha": "6b926960301fff4f5a2911c47a8a848594334654", "filename": "src/net/server/world/MaplePartyCharacter.java", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/src/net/server/world/MaplePartyCharacter.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/src/net/server/world/MaplePartyCharacter.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/world/MaplePartyCharacter.java?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -111,6 +111,10 @@ public int getId() {\n     public int getJobId() {\n         return jobid;\n     }\n+    \n+    public int getGuildId() {\n+        return character.getGuildId();\n+    }\n \n     public void updateDoor(MapleDoor door) {\n     \tthis.door.add(door);"}, {"sha": "a2d48c435c85450d0b0ac555ca454c7cfd581af2", "filename": "src/scripting/AbstractPlayerInteraction.java", "status": "modified", "additions": 6, "deletions": 8, "changes": 14, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/src/scripting/AbstractPlayerInteraction.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/src/scripting/AbstractPlayerInteraction.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/scripting/AbstractPlayerInteraction.java?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -131,13 +131,7 @@ public void warpParty(int id) {\n \t}\n \n \tpublic MapleMap getWarpMap(int map) {\n-\t\tMapleMap target;\n-\t\tif (getPlayer().getEventInstance() == null) {\n-\t\t\ttarget = c.getChannelServer().getMapFactory().getMap(map);\n-\t\t} else {\n-\t\t\ttarget = getPlayer().getEventInstance().getMapInstance(map);\n-\t\t}\n-\t\treturn target;\n+\t\treturn getPlayer().getWarpMap(map);\n \t}\n \n \tpublic MapleMap getMap(int map) {\n@@ -529,11 +523,15 @@ public MapleParty getParty() {\n \t\treturn getPlayer().getParty();\n \t}\n         \n+        public boolean isLeader() {\n+                return isPartyLeader();\n+        }\n+        \n         public boolean isGuildLeader() {\n                 return getPlayer().isGuildLeader();\n         }\n \n-\tpublic boolean isLeader() {\n+        public boolean isPartyLeader() {\n \t\tif(getParty() == null)\n \t\t\treturn false;\n \t\t"}, {"sha": "9c6c8e70606d5a178368a899d3ca433b0bee8525", "filename": "src/scripting/event/EventInstanceManager.java", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/src/scripting/event/EventInstanceManager.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/src/scripting/event/EventInstanceManager.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/scripting/event/EventInstanceManager.java?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -952,7 +952,11 @@ public final void setLeader(MapleCharacter chr) {\n         }\n         \n         public final void showWrongEffect() {\n-                MapleMap map = getMapInstance(getLeader().getMapId());\n+                showWrongEffect(getLeader().getMapId());\n+        }\n+        \n+        public final void showWrongEffect(int mapId) {\n+                MapleMap map = getMapInstance(mapId);\n                 map.broadcastMessage(MaplePacketCreator.showEffect(\"quest/party/wrong_kor\"));\n                 map.broadcastMessage(MaplePacketCreator.playSound(\"Party1/Failed\"));\n         }\n@@ -962,7 +966,11 @@ public final void showClearEffect() {\n         }\n         \n         public final void showClearEffect(boolean hasGate) {\n-                MapleMap map = getMapInstance(getLeader().getMapId());\n+                showClearEffect(hasGate, getLeader().getMapId());\n+        }\n+        \n+        public final void showClearEffect(boolean hasGate, int mapId) {\n+                MapleMap map = getMapInstance(mapId);\n                 map.broadcastMessage(MaplePacketCreator.showEffect(\"quest/party/clear\"));\n                 map.broadcastMessage(MaplePacketCreator.playSound(\"Party1/Clear\"));\n                 if(hasGate) {"}, {"sha": "f992ab30103f9012376347f8e73db6250c227df0", "filename": "src/scripting/event/EventManager.java", "status": "modified", "additions": 13, "deletions": 8, "changes": 21, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/src/scripting/event/EventManager.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/src/scripting/event/EventManager.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/scripting/event/EventManager.java?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -145,9 +145,17 @@ public void run() {\n         }, timestamp);\n     }\n \n+    public World getWorldServer() {\n+        return wserv;\n+    }\n+    \n     public Channel getChannelServer() {\n         return cserv;\n     }\n+    \n+    public Invocable getIv() {\n+        return iv;\n+    }\n \n     public EventInstanceManager getInstance(String name) {\n         return instances.get(name);\n@@ -173,10 +181,6 @@ public void run() {\n         }, lobbyDelay * 1000);\n     }\n \n-    public Invocable getIv() {\n-        return iv;\n-    }\n-\n     public void setProperty(String key, String value) {\n         props.setProperty(key, value);\n     }\n@@ -298,8 +302,8 @@ public boolean startInstance(MapleCharacter chr) {\n         return startInstance(-1, chr);\n     }\n     \n-    public boolean startInstance(int lobbyId, MapleCharacter chr) {\n-        return startInstance(lobbyId, chr, chr, 1);\n+    public boolean startInstance(int lobbyId, MapleCharacter leader) {\n+        return startInstance(lobbyId, null, leader, 1);\n     }\n     \n     public boolean startInstance(int lobbyId, MapleCharacter chr, MapleCharacter leader, int difficulty) {\n@@ -321,7 +325,7 @@ public boolean startInstance(int lobbyId, MapleCharacter chr, MapleCharacter lea\n             instanceLocks.put(eim.getName(), lobbyId);\n             eim.setLeader(leader);\n             \n-            eim.registerPlayer(chr);\n+            if(chr != null) eim.registerPlayer(chr);\n             iv.invokeFunction(\"afterSetup\", eim);\n         } catch (ScriptException | NoSuchMethodException ex) {\n             Logger.getLogger(EventManager.class.getName()).log(Level.SEVERE, null, ex);\n@@ -502,7 +506,8 @@ private static String ordinal(int i) {\n     private void exportReadyGuild(Integer guildId) {\n         MapleGuild mg = server.getGuild(guildId);\n         String callout = \"Your guild has been registered to attend to the Sharenian Guild Quest at channel \" + this.getChannelServer().getId() \n-                       + \" and    JUST STARTED THE STRATEGY PHASE. After 3 minutes, no more guild members will be allowed to join the effort.\";\n+                       + \" and    HAS JUST STARTED THE STRATEGY PHASE. After 3 minutes, no more guild members will be allowed to join the effort.\"\n+                       + \" Check out Shuang at the excavation site in Perion for more info.\";\n         \n         mg.dropMessage(0, callout);\n     }"}, {"sha": "1603e8aad296e78d3bc72fef23bd1c8b01a4cbb3", "filename": "src/scripting/npc/NPCScriptManager.java", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/src/scripting/npc/NPCScriptManager.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/src/scripting/npc/NPCScriptManager.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/scripting/npc/NPCScriptManager.java?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -118,6 +118,7 @@ public void action(MapleClient c, byte mode, byte type, int selection) {\n     public void dispose(NPCConversationManager cm) {\n         MapleClient c = cm.getClient();\n         c.getPlayer().setCS(false);\n+        c.getPlayer().setNpcCooldown(System.currentTimeMillis());\n         cms.remove(c);\n         scripts.remove(c);\n         "}, {"sha": "4745dbb3e23156e4903e28fb769b9ee0660e8706", "filename": "src/scripting/quest/QuestScriptManager.java", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/src/scripting/quest/QuestScriptManager.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/src/scripting/quest/QuestScriptManager.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/scripting/quest/QuestScriptManager.java?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -148,6 +148,7 @@ public void end(MapleClient c, byte mode, byte type, int selection) {\n \tpublic void dispose(QuestActionManager qm, MapleClient c) {\n \t\tqms.remove(c);\n \t\tscripts.remove(c);\n+                c.getPlayer().setNpcCooldown(System.currentTimeMillis());\n \t\tresetContext(\"quest/\" + qm.getQuest() + \".js\", c);\n \t}\n "}, {"sha": "f01d71da50138cca1d224d24ae54953bde21158c", "filename": "src/server/maps/MapleMap.java", "status": "modified", "additions": 82, "deletions": 59, "changes": 141, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/src/server/maps/MapleMap.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/src/server/maps/MapleMap.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/maps/MapleMap.java?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -479,7 +479,7 @@ public void sendPackets(MapleClient c) {\n             }\n         }, null);\n \n-        TimerManager.getInstance().schedule(new ExpireMapItemJob(mdrop), 180000);\n+        TimerManager.getInstance().schedule(new ExpireMapItemJob(mdrop), ServerConstants.ITEM_EXPIRE_TIME);\n         activateItemReactors(mdrop, chr.getClient());\n     }\n \n@@ -495,7 +495,7 @@ public void sendPackets(MapleClient c) {\n             }\n         }, null);\n \n-        TimerManager.getInstance().schedule(new ExpireMapItemJob(mdrop), 180000);\n+        TimerManager.getInstance().schedule(new ExpireMapItemJob(mdrop), ServerConstants.ITEM_EXPIRE_TIME);\n     }\n \n     public final void disappearingItemDrop(final MapleMapObject dropper, final MapleCharacter owner, final Item item, final Point pos) {\n@@ -551,6 +551,56 @@ public int countItems() {\n         return getMapObjectsInRange(new Point(0, 0), Double.POSITIVE_INFINITY, Arrays.asList(MapleMapObjectType.ITEM));\n     }\n \n+    public int countPlayers() {\n+        return getMapObjectsInRange(new Point(0, 0), Double.POSITIVE_INFINITY, Arrays.asList(MapleMapObjectType.PLAYER)).size();\n+    }\n+    \n+    public List<MapleMapObject> getPlayers() {\n+        return getMapObjectsInRange(new Point(0, 0), Double.POSITIVE_INFINITY, Arrays.asList(MapleMapObjectType.PLAYER));\n+    }\n+    \n+    public List<MapleCharacter> getAllPlayers() {\n+        List<MapleCharacter> character = new LinkedList<>();\n+        chrRLock.lock();\n+        try {\n+            for (MapleCharacter a : characters) {\n+                character.add(a);\n+            }\n+        } finally {\n+            chrRLock.unlock();\n+        }\n+        \n+        return character;\n+    }\n+    \n+    public List<MapleCharacter> getPlayersInRange(Rectangle box, List<MapleCharacter> chr) {\n+        List<MapleCharacter> character = new LinkedList<>();\n+        chrRLock.lock();\n+        try {\n+            for (MapleCharacter a : characters) {\n+                if (chr.contains(a.getClient().getPlayer())) {\n+                    if (box.contains(a.getPosition())) {\n+                        character.add(a);\n+                    }\n+                }\n+            }\n+        } finally {\n+            chrRLock.unlock();\n+        }\n+        \n+        return character;\n+    }\n+    \n+    public int countAlivePlayers() {\n+        int count = 0;\n+        \n+        for(MapleCharacter mc: getAllPlayers()) {\n+            if(mc.isAlive()) count++;\n+        }\n+        \n+        return count;\n+    }\n+    \n     public boolean damageMonster(final MapleCharacter chr, final MapleMonster monster, final int damage) {\n         if (monster.getId() == 8800000) {\n             for (MapleMapObject object : chr.getMap().getMapObjects()) {\n@@ -658,7 +708,7 @@ public void killMonster(final MapleMonster monster, final MapleCharacter chr, fi\n         int buff = monster.getBuffToGive();\n         if (buff > -1) {\n             MapleItemInformationProvider mii = MapleItemInformationProvider.getInstance();\n-            for (MapleMapObject mmo : this.getAllPlayer()) {\n+            for (MapleMapObject mmo : this.getPlayers()) {\n                 MapleCharacter character = (MapleCharacter) mmo;\n                 if (character.isAlive()) {\n                     MapleStatEffect statEffect = mii.getItemEffect(buff);\n@@ -725,14 +775,14 @@ public void killMonster(final MapleMonster monster, final MapleCharacter chr, fi\n     }\n \n     public void killFriendlies(MapleMonster mob) {\n-        this.killMonster(mob, (MapleCharacter) getAllPlayer().get(0), false);\n+        this.killMonster(mob, (MapleCharacter) getPlayers().get(0), false);\n     }\n \n     public void killMonster(int monsId) {\n         for (MapleMapObject mmo : getMapObjects()) {\n             if (mmo instanceof MapleMonster) {\n                 if (((MapleMonster) mmo).getId() == monsId) {\n-                    this.killMonster((MapleMonster) mmo, (MapleCharacter) getAllPlayer().get(0), false);\n+                    this.killMonster((MapleMonster) mmo, (MapleCharacter) getPlayers().get(0), false);\n                 }\n             }\n         }\n@@ -788,43 +838,6 @@ public void killAllMonsters() {\n         }\n     }\n \n-    public List<MapleMapObject> getAllPlayer() {\n-        return getMapObjectsInRange(new Point(0, 0), Double.POSITIVE_INFINITY, Arrays.asList(MapleMapObjectType.PLAYER));\n-    }\n-    \n-    \n-    public List<MapleCharacter> getAllPlayers() {\n-        List<MapleCharacter> character = new LinkedList<>();\n-        chrRLock.lock();\n-        try {\n-            for (MapleCharacter a : characters) {\n-                character.add(a);\n-            }\n-        } finally {\n-            chrRLock.unlock();\n-        }\n-        \n-        return character;\n-    }\n-    \n-    public List<MapleCharacter> getPlayersInRange(Rectangle box, List<MapleCharacter> chr) {\n-        List<MapleCharacter> character = new LinkedList<>();\n-        chrRLock.lock();\n-        try {\n-            for (MapleCharacter a : characters) {\n-                if (chr.contains(a.getClient().getPlayer())) {\n-                    if (box.contains(a.getPosition())) {\n-                        character.add(a);\n-                    }\n-                }\n-            }\n-        } finally {\n-            chrRLock.unlock();\n-        }\n-        \n-        return character;\n-    }\n-\n     public void destroyReactor(int oid) {\n         final MapleReactor reactor = getReactorByOid(oid);\n         TimerManager tMan = TimerManager.getInstance();\n@@ -1052,12 +1065,12 @@ private void monsterItemDrop(final MapleMonster m, final Item item, long delay)\n         final ScheduledFuture<?> monsterItemDrop = TimerManager.getInstance().register(new Runnable() {\n             @Override\n             public void run() {\n-                if (MapleMap.this.getMonsterById(m.getId()) != null && !MapleMap.this.getAllPlayer().isEmpty()) {\n+                if (MapleMap.this.getMonsterById(m.getId()) != null && !MapleMap.this.getPlayers().isEmpty()) {\n                     if (item.getItemId() == 4001101) {\n                         MapleMap.this.riceCakes++;\n                         MapleMap.this.broadcastMessage(MaplePacketCreator.serverNotice(6, \"The Moon Bunny made rice cake number \" + (MapleMap.this.riceCakes)));\n                     }\n-                    spawnItemDrop(m, (MapleCharacter) getAllPlayer().get(0), item, m.getPosition(), false, false);\n+                    spawnItemDrop(m, (MapleCharacter) getPlayers().get(0), item, m.getPosition(), false, false);\n                 }\n             }\n         }, delay, delay);\n@@ -1345,7 +1358,7 @@ public void sendPackets(MapleClient c) {\n         broadcastMessage(MaplePacketCreator.dropItemFromMapObject(drop, dropper.getPosition(), droppos, (byte) 0));\n \n         if (!everlast) {\n-            TimerManager.getInstance().schedule(new ExpireMapItemJob(drop), 180000);\n+            TimerManager.getInstance().schedule(new ExpireMapItemJob(drop), ServerConstants.ITEM_EXPIRE_TIME);\n             activateItemReactors(drop, owner.getClient());\n         }\n     }\n@@ -1438,7 +1451,7 @@ public void addPlayer(final MapleCharacter chr) {\n         }\n         chr.setMapId(mapid);\n         if (onFirstUserEnter.length() != 0 && !chr.hasEntered(onFirstUserEnter, mapid) && MapScriptManager.getInstance().scriptExists(onFirstUserEnter, true)) {\n-            if (getAllPlayer().size() <= 1) {\n+            if (countPlayers() <= 1) {\n                 chr.enteredScript(onFirstUserEnter, mapid);\n                 MapScriptManager.getInstance().getMapScript(chr.getClient(), onFirstUserEnter, true);\n             }\n@@ -2116,6 +2129,28 @@ public MapleCharacter getCharacterByName(String name) {\n         }\n         return null;\n     }\n+    \n+    public void makeDisappearItemFromMap(MapleMapObject mapobj) {\n+        if(mapobj instanceof MapleMapItem) {\n+            makeDisappearItemFromMap((MapleMapItem) mapobj);\n+        }\n+    }\n+    \n+    public void makeDisappearItemFromMap(MapleMapItem mapitem) {\n+        if (mapitem != null && mapitem == getMapObject(mapitem.getObjectId())) {\n+            mapitem.itemLock.lock();\n+            try {\n+                if (mapitem.isPickedUp()) {\n+                    return;\n+                }\n+                MapleMap.this.broadcastMessage(MaplePacketCreator.removeItemFromMap(mapitem.getObjectId(), 0, 0), mapitem.getPosition());\n+                mapitem.setPickedUp(true);\n+            } finally {\n+                mapitem.itemLock.unlock();\n+                MapleMap.this.removeMapObject(mapitem);\n+            }\n+        }\n+    }\n \n     private class ExpireMapItemJob implements Runnable {\n \n@@ -2127,19 +2162,7 @@ public ExpireMapItemJob(MapleMapItem mapitem) {\n \n         @Override\n         public void run() {\n-            if (mapitem != null && mapitem == getMapObject(mapitem.getObjectId())) {\n-                mapitem.itemLock.lock();\n-                try {\n-                    if (mapitem.isPickedUp()) {\n-                        return;\n-                    }\n-                    MapleMap.this.broadcastMessage(MaplePacketCreator.removeItemFromMap(mapitem.getObjectId(), 0, 0), mapitem.getPosition());\n-                    mapitem.setPickedUp(true);\n-                } finally {\n-                    mapitem.itemLock.unlock();\n-                    MapleMap.this.removeMapObject(mapitem);\n-                }\n-            }\n+            makeDisappearItemFromMap(mapitem);\n         }\n     }\n "}, {"sha": "08d3cb2189227876de65a87d51056b421be39b54", "filename": "src/server/maps/MapleReactor.java", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/src/server/maps/MapleReactor.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/src/server/maps/MapleReactor.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/maps/MapleReactor.java?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -49,6 +49,7 @@\n     private String name;\n     private boolean alive;\n     private boolean shouldCollect;\n+    private boolean attackHit;\n     private Lock reactorLock = new ReentrantLock(true);\n \n     public MapleReactor(MapleReactorStats stats, int rid) {\n@@ -114,6 +115,10 @@ public MapleMapObjectType getType() {\n     public int getReactorType() {\n         return stats.getType(state);\n     }\n+    \n+    public boolean isRecentHitFromAttack() {\n+        return attackHit;\n+    }\n \n     public void setMap(MapleMap map) {\n         this.map = map;\n@@ -175,14 +180,17 @@ public void run() {\n     }\n \n     public void hitReactor(MapleClient c) {\n-        hitReactor(0, (short) 0, 0, c);\n+        hitReactor(false, 0, (short) 0, 0, c);\n     }\n     \n-    public synchronized void hitReactor(int charPos, short stance, int skillid, MapleClient c) {\n+    public synchronized void hitReactor(boolean wHit, int charPos, short stance, int skillid, MapleClient c) {\n         try {\n             if(!this.isAlive()) {\n                 return;\n             }\n+            \n+            attackHit = wHit;\n+            \n             if(ServerConstants.USE_DEBUG == true) c.getPlayer().dropMessage(5, \"Hitted REACTOR \" + this.getId() + \" with POS \" + charPos + \" , STANCE \" + stance + \" , SkillID \" + skillid + \" , STATE \" + stats.getType(state) + \" STATESIZE \" + stats.getStateSize(state));\n             ReactorScriptManager.getInstance().onHit(c, this);\n             "}, {"sha": "b30b98cd47a556ee7f241af480d3b41d26d82b5d", "filename": "wz/Reactor.wz/9202005.img.xml", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/wz/Reactor.wz/9202005.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/wz/Reactor.wz/9202005.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Reactor.wz/9202005.img.xml?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -102,6 +102,14 @@\n     <canvas name=\"0\" width=\"1\" height=\"1\">\n       <vector name=\"origin\" x=\"0\" y=\"0\"/>\n     </canvas>\n+    <imgdir name=\"event\">\n+      <imgdir name=\"0\">\n+        <int name=\"type\" value=\"0\"/>\n+        <int name=\"state\" value=\"5\"/>\n+      </imgdir>\n+    </imgdir>\n+    <imgdir name=\"hit\">\n+    </imgdir>\n   </imgdir>\n   <string name=\"action\" value=\"syarenItem5\"/>\n </imgdir>"}, {"sha": "618f6ca709dd19187cbf5b2a08a2bc80e5a455d4", "filename": "wz/Reactor.wz/9208003.img.xml", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/wz/Reactor.wz/9208003.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/wz/Reactor.wz/9208003.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Reactor.wz/9208003.img.xml?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -49,6 +49,12 @@\n         <int name=\"delay\" value=\"100\"/>\n       </canvas>\n     </imgdir>\n+    <imgdir name=\"event\">\n+      <imgdir name=\"0\">\n+        <int name=\"type\" value=\"0\"/>\n+        <int name=\"state\" value=\"0\"/>\n+      </imgdir>\n+    </imgdir>\n   </imgdir>\n   <imgdir name=\"1\">\n     <canvas name=\"0\" width=\"135\" height=\"214\">"}, {"sha": "81df19519f7091187e4cb56539cc00a267ab8c27", "filename": "wz/Reactor.wz/9208004.img.xml", "status": "modified", "additions": 31, "deletions": 1, "changes": 32, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/42fe74955d953138c279edf680a0aa9e8dc755f9/wz/Reactor.wz/9208004.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/42fe74955d953138c279edf680a0aa9e8dc755f9/wz/Reactor.wz/9208004.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Reactor.wz/9208004.img.xml?ref=42fe74955d953138c279edf680a0aa9e8dc755f9", "patch": "@@ -65,6 +65,14 @@\n       <int name=\"delay\" value=\"150\"/>\n     </canvas>\n     <int name=\"repeat\" value=\"1\"/>\n+    <imgdir name=\"event\">\n+      <imgdir name=\"0\">\n+        <int name=\"type\" value=\"0\"/>\n+        <int name=\"state\" value=\"1\"/>\n+      </imgdir>\n+    </imgdir>\n+    <imgdir name=\"hit\">\n+    </imgdir>\n   </imgdir>\n   <imgdir name=\"1\">\n     <canvas name=\"0\" width=\"231\" height=\"231\">\n@@ -128,6 +136,14 @@\n       <int name=\"delay\" value=\"150\"/>\n     </canvas>\n     <int name=\"repeat\" value=\"1\"/>\n+    <imgdir name=\"event\">\n+      <imgdir name=\"0\">\n+        <int name=\"type\" value=\"0\"/>\n+        <int name=\"state\" value=\"2\"/>\n+      </imgdir>\n+    </imgdir>\n+    <imgdir name=\"hit\">\n+    </imgdir>\n   </imgdir>\n   <imgdir name=\"2\">\n     <canvas name=\"0\" width=\"231\" height=\"231\">\n@@ -191,6 +207,14 @@\n       <int name=\"delay\" value=\"150\"/>\n     </canvas>\n     <int name=\"repeat\" value=\"1\"/>\n+    <imgdir name=\"event\">\n+      <imgdir name=\"0\">\n+        <int name=\"type\" value=\"0\"/>\n+        <int name=\"state\" value=\"3\"/>\n+      </imgdir>\n+    </imgdir>\n+    <imgdir name=\"hit\">\n+    </imgdir>\n   </imgdir>\n   <imgdir name=\"3\">\n     <canvas name=\"0\" width=\"231\" height=\"231\">\n@@ -315,10 +339,16 @@\n         <int name=\"delay\" value=\"120\"/>\n       </canvas>\n     </imgdir>\n+    <imgdir name=\"event\">\n+      <imgdir name=\"0\">\n+        <int name=\"type\" value=\"0\"/>\n+        <int name=\"state\" value=\"4\"/>\n+      </imgdir>\n+    </imgdir>\n   </imgdir>\n   <imgdir name=\"4\">\n     <canvas name=\"0\" width=\"1\" height=\"1\">\n-      <vector name=\"origin\" x=\"0\" y=\"0\"/>\n+      <vector name=\"origin\" x=\"115\" y=\"222\"/>\n     </canvas>\n   </imgdir>\n </imgdir>"}]}]},
