{"fetchDate": "2019-12-19", "content": [{"sha": "c09bc02c85071c7a832974f5606403398af590e5", "node_id": "MDY6Q29tbWl0NDUwODIwMjM6YzA5YmMwMmM4NTA3MWM3YTgzMjk3NGY1NjA2NDAzMzk4YWY1OTBlNQ==", "commit": {"author": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2017-07-20T15:02:59Z"}, "committer": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2017-07-20T15:02:59Z"}, "message": "Horntail PQ & Exped + Equip levelup fix\n\nAdded Horntail PQ and boss fight. Fixed short integer overflow of\nequipment stats on client messing up player stats.", "tree": {"sha": "f9cf7eb8af7a3d2ed2fd942d728c356221ef5a1a", "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/trees/f9cf7eb8af7a3d2ed2fd942d728c356221ef5a1a"}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/commits/c09bc02c85071c7a832974f5606403398af590e5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/c09bc02c85071c7a832974f5606403398af590e5", "html_url": "https://github.com/ronancpl/HeavenMS/commit/c09bc02c85071c7a832974f5606403398af590e5", "comments_url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/c09bc02c85071c7a832974f5606403398af590e5/comments", "author": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8fab2a6e3edf586c21a4a1aec2e59f2316e8b859", "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/8fab2a6e3edf586c21a4a1aec2e59f2316e8b859", "html_url": "https://github.com/ronancpl/HeavenMS/commit/8fab2a6e3edf586c21a4a1aec2e59f2316e8b859"}], "stats": {"total": 1739, "additions": 1155, "deletions": 584}, "files": [{"sha": "ebf4d7f97a17585e85470676ae2c34a4bc4aa708", "filename": "build/built-jar.properties", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/built-jar.properties", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/built-jar.properties", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/built-jar.properties?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -1,4 +1,4 @@\n-#Fri, 14 Jul 2017 20:30:46 -0300\n+#Mon, 17 Jul 2017 14:21:39 -0300\n \n \n C\\:\\\\Nexon\\\\MapleSolaxia\\\\MapleSolaxiaV2="}, {"sha": "223ef8043b70b346e327728aa02813a2943449c8", "filename": "build/classes/client/command/Commands$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/client/command/Commands$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/client/command/Commands$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/command/Commands$1.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "67ce8b4a53b126a2f76728369732c9f24d299342", "filename": "build/classes/client/command/Commands.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/client/command/Commands.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/client/command/Commands.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/command/Commands.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "f626cb98129bae0ffb37178526b31ebe4c0d5c94", "filename": "build/classes/client/inventory/Equip$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/client/inventory/Equip$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/client/inventory/Equip$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/inventory/Equip$1.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "e24f2e4576a1f6422312d2b1e05b3833278c6b33", "filename": "build/classes/client/inventory/Equip.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/client/inventory/Equip.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/client/inventory/Equip.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/inventory/Equip.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "b64defcd0998864eb08e405a59e0c3bf28e61b08", "filename": "build/classes/constants/ServerConstants.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/constants/ServerConstants.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/constants/ServerConstants.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/constants/ServerConstants.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "db7df0b6a9cf4105d60086646a5b2e153631ee2f", "filename": "build/classes/net/server/channel/handlers/ChangeMapHandler.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/net/server/channel/handlers/ChangeMapHandler.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/net/server/channel/handlers/ChangeMapHandler.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/handlers/ChangeMapHandler.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "88377230ced1534e6431eac7b05f1a4c5ade6b45", "filename": "build/classes/net/server/channel/handlers/DoorHandler.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/net/server/channel/handlers/DoorHandler.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/net/server/channel/handlers/DoorHandler.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/handlers/DoorHandler.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "d7e0ba5ffa4cd14219b1ecffaafb647553b89132", "filename": "build/classes/net/server/channel/handlers/ItemIdSortHandler.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/net/server/channel/handlers/ItemIdSortHandler.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/net/server/channel/handlers/ItemIdSortHandler.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/handlers/ItemIdSortHandler.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "498fa5ab07f3b2924b966d74997164ec2b0ab324", "filename": "build/classes/net/server/channel/handlers/ItemPickupHandler.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/net/server/channel/handlers/ItemPickupHandler.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/net/server/channel/handlers/ItemPickupHandler.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/handlers/ItemPickupHandler.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "423a93daab4d2616e513212d574b5308cb8ce1ab", "filename": "build/classes/net/server/channel/handlers/PairedQuicksort.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/net/server/channel/handlers/PairedQuicksort.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/net/server/channel/handlers/PairedQuicksort.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/handlers/PairedQuicksort.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "e14d0665d2634bec8e020c87dc46475f0f8f9964", "filename": "build/classes/net/server/channel/handlers/PetLootHandler.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/net/server/channel/handlers/PetLootHandler.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/net/server/channel/handlers/PetLootHandler.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/handlers/PetLootHandler.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "c7f003553273be02d39e0fdf55f6573f1644aa39", "filename": "build/classes/net/server/guild/MapleAlliance.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/net/server/guild/MapleAlliance.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/net/server/guild/MapleAlliance.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/guild/MapleAlliance.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "bb957a29f19b91767ad0f97948a02f1546770052", "filename": "build/classes/scripting/event/EventInstanceManager$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/scripting/event/EventInstanceManager$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/scripting/event/EventInstanceManager$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/scripting/event/EventInstanceManager$1.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "675d4a4b39b3694e4e19064cfeb748c197eab4eb", "filename": "build/classes/scripting/event/EventInstanceManager$2.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/scripting/event/EventInstanceManager$2.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/scripting/event/EventInstanceManager$2.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/scripting/event/EventInstanceManager$2.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "5fa44e05bb3c393124610dbd54d1585b7588150a", "filename": "build/classes/scripting/event/EventInstanceManager$3.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/scripting/event/EventInstanceManager$3.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/scripting/event/EventInstanceManager$3.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/scripting/event/EventInstanceManager$3.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "eb26cb6ef3c9bcf1293636adb74c15c61d865e31", "filename": "build/classes/scripting/event/EventInstanceManager.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/scripting/event/EventInstanceManager.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/scripting/event/EventInstanceManager.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/scripting/event/EventInstanceManager.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "7739b1e96ff6de0c27ecdcccc8e3ad9407e01e06", "filename": "build/classes/scripting/reactor/ReactorActionManager$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/scripting/reactor/ReactorActionManager$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/scripting/reactor/ReactorActionManager$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/scripting/reactor/ReactorActionManager$1.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "387dafe4c0ade28b23449794d76a5c17c95ebd86", "filename": "build/classes/scripting/reactor/ReactorActionManager$2.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/scripting/reactor/ReactorActionManager$2.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/scripting/reactor/ReactorActionManager$2.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/scripting/reactor/ReactorActionManager$2.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "df4fddabe31f822f742a7243e22f824eabdb1c30", "filename": "build/classes/scripting/reactor/ReactorActionManager.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/scripting/reactor/ReactorActionManager.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/scripting/reactor/ReactorActionManager.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/scripting/reactor/ReactorActionManager.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "c7109f522e215d10ec097f38bd6f447f678098c4", "filename": "build/classes/server/MapleStatEffect$CancelEffectAction.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/MapleStatEffect$CancelEffectAction.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/MapleStatEffect$CancelEffectAction.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/MapleStatEffect$CancelEffectAction.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "2b6e64f4d3764151ed8c2f003b59e46e4a268ba4", "filename": "build/classes/server/MapleStatEffect.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/MapleStatEffect.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/MapleStatEffect.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/MapleStatEffect.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "f1ca3fb5a12a36131a5d3d023276ae84467d861d", "filename": "build/classes/server/MapleTrade.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/MapleTrade.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/MapleTrade.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/MapleTrade.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "433843e29563fc7ce0743ef2c3f6744515849fb1", "filename": "build/classes/server/life/MapleNPC.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/life/MapleNPC.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/life/MapleNPC.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/life/MapleNPC.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "9090f95fcda7ca59f775c2e6c23b2c589b912051", "filename": "build/classes/server/maps/MapleDoor.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleDoor.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleDoor.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleDoor.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "720ff0b49a603be86367cd41fef858830f15802d", "filename": "build/classes/server/maps/MapleMap$10.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$10.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$10.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$10.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "95dee7959d9a3c9b28298c2aec0acb60faa7a2d0", "filename": "build/classes/server/maps/MapleMap$11.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$11.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$11.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$11.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "53948d06d342c176063d2858cc070742585b6adf", "filename": "build/classes/server/maps/MapleMap$12.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$12.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$12.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$12.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "8e8fba036117eda06db880e06db75ba22b1e5efb", "filename": "build/classes/server/maps/MapleMap$13.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$13.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$13.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$13.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "0cab912c92bf62e393b4f767817930293402624e", "filename": "build/classes/server/maps/MapleMap$14.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$14.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$14.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$14.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "23853cdcc11438c4bc2b49e9693b02930f1f23ed", "filename": "build/classes/server/maps/MapleMap$15.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$15.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$15.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$15.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "55f94acfc39091d00d248fb7618d6db481e2d12d", "filename": "build/classes/server/maps/MapleMap$16.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$16.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$16.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$16.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "9f806727af7ae2a2aa665c5bd270d2c2a93dcfcf", "filename": "build/classes/server/maps/MapleMap$17.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$17.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$17.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$17.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "34f579c6ba3208f1e64114dc597efe89017e3d28", "filename": "build/classes/server/maps/MapleMap$18.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$18.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$18.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$18.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "703521d58cad0c684f6dc48403bdc639729dca68", "filename": "build/classes/server/maps/MapleMap$19.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$19.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$19.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$19.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "63687ca308da81dadcf508531660f3f497902f20", "filename": "build/classes/server/maps/MapleMap$20.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$20.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$20.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$20.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "c8e6dc06239f3c538252a37a767d30d7aacc8c39", "filename": "build/classes/server/maps/MapleMap$21.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$21.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$21.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$21.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "8f54b9cee03eef3f47f79103701769dac4453a1a", "filename": "build/classes/server/maps/MapleMap$22.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$22.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$22.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$22.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "a4e35be459a0b4d0911edfa1daa90c079e9a2d02", "filename": "build/classes/server/maps/MapleMap$23.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$23.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$23.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$23.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "7e6c9caea780fd0bb75574314a7cceb2d86d48d8", "filename": "build/classes/server/maps/MapleMap$24.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$24.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$24.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$24.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "eb3d7e3758587ad2a01f9657ef8e2f8925541e4e", "filename": "build/classes/server/maps/MapleMap$25.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$25.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$25.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$25.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "63a6802ab26963c7f91d36e0ae33c2df84450cbc", "filename": "build/classes/server/maps/MapleMap$26.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$26.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$26.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$26.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "f7f3ecc1a2ec9621ea564842652ac6642796a254", "filename": "build/classes/server/maps/MapleMap$27.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$27.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$27.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$27.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "b0d0ef5fca10203893d9e41525e06065bffd9d7d", "filename": "build/classes/server/maps/MapleMap$28$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$28$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$28$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$28$1.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "97c7fe004082e51e2c4f342c1fad54701a6bf1fa", "filename": "build/classes/server/maps/MapleMap$28.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$28.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$28.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$28.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "b50386495879b748689833b77f5942dfae3837cf", "filename": "build/classes/server/maps/MapleMap$29.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$29.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$29.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$29.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "8eb6a1abe5f83fc1b52705b76470c2f2e769bec2", "filename": "build/classes/server/maps/MapleMap$3.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$3.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$3.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$3.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "c82dc5f68dd852e4b4c5bf535e3ae933ff2e8eef", "filename": "build/classes/server/maps/MapleMap$4.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$4.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$4.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$4.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "73a98bbe738ad0c6309e5d4cd7f8a672ba56311e", "filename": "build/classes/server/maps/MapleMap$5.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$5.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$5.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$5.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "25c47a8cbb4960ee4c5839eb841c0f4dff85d2d1", "filename": "build/classes/server/maps/MapleMap$6.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$6.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$6.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$6.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "ef080846e50aa913c76b63a3ba5dd3ff0a1b932d", "filename": "build/classes/server/maps/MapleMap$7.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$7.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$7.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$7.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "dd2696dcf24b8ad882cd6098aeb254d195079412", "filename": "build/classes/server/maps/MapleMap$8.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$8.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$8.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$8.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "c3ec8acd02032f6f57e0cb4a3a3a95a63fd472c4", "filename": "build/classes/server/maps/MapleMap$9.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$9.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$9.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$9.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "7fc2ef7515b088611cf918f07fa5d2ae9e358258", "filename": "build/classes/server/maps/MapleMap$ActivateItemReactor$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$ActivateItemReactor$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$ActivateItemReactor$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$ActivateItemReactor$1.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "c151440b4227097f35ef875155157f34d5e16f17", "filename": "build/classes/server/maps/MapleMap$ActivateItemReactor.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$ActivateItemReactor.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$ActivateItemReactor.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$ActivateItemReactor.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "13184ece7c88fc6ef856b689afb9986a9918302c", "filename": "build/classes/server/maps/MapleMap$ExpireMapItemJob.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$ExpireMapItemJob.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap$ExpireMapItemJob.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$ExpireMapItemJob.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "6081b2bb236b3c30736caacabb9b2635f3ccb633", "filename": "build/classes/server/maps/MapleMap.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/maps/MapleMap.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "5ef8e6638f29310d1b8f5fd8dda220e9a613681e", "filename": "build/classes/server/quest/actions/ItemAction$ItemData.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/quest/actions/ItemAction$ItemData.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/quest/actions/ItemAction$ItemData.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/quest/actions/ItemAction$ItemData.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "0d1e1f4ad049df028dfac554e1e8f5a01899e857", "filename": "build/classes/server/quest/actions/ItemAction.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/quest/actions/ItemAction.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/server/quest/actions/ItemAction.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/quest/actions/ItemAction.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "a6c147efd6a87aad2ea6a152bedd797c7aa74504", "filename": "build/classes/tools/MaplePacketCreator.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/build/classes/tools/MaplePacketCreator.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/build/classes/tools/MaplePacketCreator.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/tools/MaplePacketCreator.class?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "829103af93333918d7e39d6b1d2a6296b9501c52", "filename": "dist/MapleSolaxia.jar", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/dist/MapleSolaxia.jar", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/dist/MapleSolaxia.jar", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/dist/MapleSolaxia.jar?ref=c09bc02c85071c7a832974f5606403398af590e5"}, {"sha": "c1c6a1758c82e9f4b72aaa7a3d1ee65800fcb030", "filename": "feature_list.txt", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/feature_list.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/feature_list.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/feature_list.txt?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -8,9 +8,9 @@ Feature list:\n ---------------------------\n \n PQs:\n-* HPQ/KPQ/LPQ/LMPQ/OPQ/EllinPQ/PiratePQ 100%.\n+* HPQ/KPQ/LPQ/LMPQ/OPQ/EllinPQ/PiratePQ/HorntailPQ 100%.\n * CWKPQ as Expedition-based event 100%.\n-* Expeditions: Scarga 100%.\n+* Expeditions: Scarga/Horntail 100%.\n * GuildPQ 100% + Guild queue with multi-lobby systems available.\n * Brand-new PQ: Boss Rush PQ 100%.\n * BalrogPQ semi-functional."}, {"sha": "da671ce08292125a3e6f712f8e94e9621c95be88", "filename": "mychanges_ptbr.txt", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/mychanges_ptbr.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/mychanges_ptbr.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/mychanges_ptbr.txt?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -373,4 +373,12 @@ Corrigido mapas em CBD/Singapore fazendo jogador \"cair\" do mapa.\n Adicionado no sql lojas de NPCs de Malaysia.\n Adicionado minidungeon \"ByeBye station\" (Malaysia).\n Codificada expedi\ufffd\ufffdo Scarlion/Targa.\n-Corrigido exploit com mini-dungeons (toda party, independente de localiza\ufffd\ufffdo atual, movida para dentro da MD).\n\\ No newline at end of file\n+Corrigido exploit com mini-dungeons (toda party, independente de localiza\ufffd\ufffdo atual, movida para dentro da MD).\n+\n+15 Julho 2017,\n+Adicionado area boss Snack Bar.\n+Corrigido bugs com \"buffmap\" desconectando players em certos casos.\n+\n+16 - 17 Julho 2017,\n+Adicionados HTPQ e expedi\ufffd\ufffdo Horntail.\n+Corrigido bugs com levelup de equipamentos provocando Integer overflow (stats negativos) nos clientes.\n\\ No newline at end of file"}, {"sha": "a747e8fe02a521af111072caa6da100525674cbe", "filename": "nbproject/private/private.xml", "status": "modified", "additions": 4, "deletions": 37, "changes": 41, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/nbproject/private/private.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/nbproject/private/private.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/nbproject/private/private.xml?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -3,43 +3,10 @@\n     <editor-bookmarks xmlns=\"http://www.netbeans.org/ns/editor-bookmarks/2\" lastBookmarkId=\"1\"/>\n     <open-files xmlns=\"http://www.netbeans.org/ns/projectui-open-files/2\">\n         <group>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/2091005.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/server/expeditions/MapleExpeditionType.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/server/MapleStatEffect.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/event/ScargaBattle.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/scripting/AbstractPlayerInteraction.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/event/KerningPQ.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/portal/captinsg00.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/event/GuildQuest.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/event/CWKPQ.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/9270033.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/scripting/event/EventInstanceManager.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/9201113.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/2091005_old.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/server/maps/MapleMap.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/MapleCharacter.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/reactor/5511001.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/event/PiratePQ.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/scripting/event/EventManager.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/scripting/reactor/ReactorActionManager.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/net/server/channel/Channel.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/9270047.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/server/expeditions/MapleExpedition.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/reactor/5511000.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/server/maps/MapleReactor.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/2133004.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/portal/MD_high.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/tools/MaplePacketCreator.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/server/life/MapleMonster.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/server/TimerManager.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/scripting/reactor/ReactorScriptManager.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/event/HenesysPQ.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/portal/MD_drakeroom.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/event/BossRushPQ.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/scripting/npc/NPCConversationManager.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/9020001.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/event/LatanicaBattle.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/MapleClient.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/inventory/Equip.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/inventory/ItemFactory.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/command/Commands.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/constants/ServerConstants.java</file>\n         </group>\n     </open-files>\n </project-private>"}, {"sha": "fbb00f883cfe6c5d0498cc5939b321d586a68954", "filename": "scripts/event/AreaBossSnackBar.js", "status": "added", "additions": 57, "deletions": 0, "changes": 57, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/event/AreaBossSnackBar.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/event/AreaBossSnackBar.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/AreaBossSnackBar.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -0,0 +1,57 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/**\n+-- Odin JavaScript --------------------------------------------------------------------------------\n+\tSnack Bar Spawner\n+-- Edited by --------------------------------------------------------------------------------------\n+\tRonan (based on xQuasar's King Clang spawner)\n+\n+**/\n+function init() {\n+    scheduleNew();\n+}\n+\n+function scheduleNew() {\n+    setupTask = em.schedule(\"start\", 0);    //spawns upon server start. Each 3 hours an server event checks if boss exists, if not spawns it instantly.\n+}\n+\n+function cancelSchedule() {\n+    if (setupTask != null)\n+        setupTask.cancel(true);\n+}\n+\n+function start() {\n+    var snackBarMap = em.getChannelServer().getMapFactory().getMap(105090310);\n+    var snackBar = Packages.server.life.MapleLifeFactory.getMonster(8220008);\n+\t\n+\tif(snackBarMap.getMonsterById(8220008) != null || snackBarMap.getMonsterById(8220009) != null) {\n+\t\tem.schedule(\"start\", 3 * 60 * 60 * 1000);\n+\t\treturn;\n+\t}\n+\t\n+        var setPos = [[-626, -604], [735, -600]];\n+        var rndPos = setPos[Math.floor(Math.random() * setPos.length)];\n+        \n+        snackBarMap.spawnMonsterOnGroundBelow(snackBar, new Packages.java.awt.Point(rndPos[0], rndPos[1]));\n+        snackBarMap.broadcastMessage(Packages.tools.MaplePacketCreator.serverNotice(6, \"Slowly, a suspicious food stand opens up on a strangely remote place.\"));\n+\tem.schedule(\"start\", 3 * 60 *60 * 1000);\n+}\n\\ No newline at end of file"}, {"sha": "1931ef04cddf9a92354c80b5760f6914ebf78215", "filename": "scripts/event/HorntailFight.js", "status": "modified", "additions": 166, "deletions": 112, "changes": 278, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/event/HorntailFight.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/event/HorntailFight.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/HorntailFight.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -1,155 +1,209 @@\n-/* \n- * This file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc> \n-                       Matthias Butz <matze@odinms.de>\n-                       Jan Christian Meyer <vimes@odinms.de>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License version 3\n-    as published by the Free Software Foundation. You may not use, modify\n-    or distribute this program under any other version of the\n-    GNU Affero General Public License.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU Affero General Public License for more details.\n-\n-    You should have received a copy of the GNU Affero General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n- */\n-\n-/*\n- * @Author SharpAceX(Alan)\n- * Horntail fight\n- */\n-\n-importPackage(Packages.server.expeditions);\n-\n-var exitMap;\n-var minPlayers = 1;\n-var fightTime = 60;\n-\n-var trial1; //Cave of Life - The Cave of Trial I\n-var trial2; // Cave of Life - The Cave of Trial II\n-var fightMap; // Cave of Life - Horntail's Cave\n-var exitMap;\n-\t\n+/**\n+ * @author: Ronan\n+ * @event: Horntail Battle\n+*/\n+\n+importPackage(Packages.server.life);\n+\n+var isPq = true;\n+var minPlayers = 1, maxPlayers = 30;\n+var minLevel = 100, maxLevel = 255;\n+var entryMap = 240060000;\n+var exitMap = 240050600;\n+var recruitMap = 240050400;\n+var clearMap = 240050600;\n+\n+var minMapId = 240060000;\n+var maxMapId = 240060200;\n+\n+var eventTime = 15;     // 15 minutes\n+\n+var lobbyRange = [0, 0];\n+\n function init() {\n-    em.setProperty(\"shuffleReactors\",\"false\");\n-\ttrial1 = em.getChannelServer().getMapFactory().getMap(240060000); //Cave of Life - The Cave of Trial I\n-\ttrial2 = em.getChannelServer().getMapFactory().getMap(240060100); // Cave of Life - The Cave of Trial II\n-\tfightMap = em.getChannelServer().getMapFactory().getMap(240060200); // Cave of Life - Horntail's Cave\n-\texitMap = em.getChannelServer().getMapFactory().getMap(211042300);\n+        setEventRequirements();\n }\n \n+function setLobbyRange() {\n+        return lobbyRange;\n+}\n \n+function setEventRequirements() {\n+        var reqStr = \"\";\n+        \n+        reqStr += \"\\r\\n    Number of players: \";\n+        if(maxPlayers - minPlayers >= 1) reqStr += minPlayers + \" ~ \" + maxPlayers;\n+        else reqStr += minPlayers;\n+        \n+        reqStr += \"\\r\\n    Level range: \";\n+        if(maxLevel - minLevel >= 1) reqStr += minLevel + \" ~ \" + maxLevel;\n+        else reqStr += minLevel;\n+        \n+        reqStr += \"\\r\\n    Time limit: \";\n+        reqStr += eventTime + \" minutes\";\n+        \n+        em.setProperty(\"party\", reqStr);\n+}\n \n+function setEventExclusives(eim) {\n+        var itemSet = [];\n+        eim.setExclusiveItems(itemSet);\n+}\n \n-function setup() {\n-    var eim = em.newInstance(\"HorntailFight_\" + em.getProperty(\"channel\"));\n-\tvar timer = 1000 * 60 * fightTime;\n-    em.schedule(\"timeOut\", eim, timer);\n-    eim.startEventTimer(timer);\n-\treturn eim;\n+function setEventRewards(eim) {\n+        var itemSet, itemQty, evLevel, expStages, mesoStages;\n+\n+        evLevel = 1;    //Rewards at clear PQ\n+        itemSet = [];\n+        itemQty = [];\n+        eim.setEventRewards(evLevel, itemSet, itemQty);\n+        \n+        expStages = [];    //bonus exp given on CLEAR stage signal\n+        eim.setEventClearStageExp(expStages);\n+        \n+        mesoStages = [];    //bonus meso given on CLEAR stage signal\n+        eim.setEventClearStageMeso(mesoStages);\n }\n \n function afterSetup(eim) {}\n \n-function playerEntry(eim,player) {\n-    var map = eim.getMapInstance(trial1.getId());\n-    player.changeMap(map,map.getPortal(0));\n-    if (exitMap == null)\n-        debug(eim,\"The exit map was not properly linked.\");\n+function setup(channel) {\n+    var eim = em.newInstance(\"Scarga\" + channel);\n+    eim.setProperty(\"canJoin\", 1);\n+    eim.setProperty(\"defeatedBoss\", 0);\n+    eim.setProperty(\"defeatedHead\", 0);\n+\n+    var level = 1;\n+    eim.getInstanceMap(240060000).resetPQ(level);\n+    eim.getInstanceMap(240060100).resetPQ(level);\n+    eim.getInstanceMap(240060200).resetPQ(level);\n+    \n+    var map, mob;\n+    map = eim.getInstanceMap(240060000);\n+    mob = MapleLifeFactory.getMonster(8810000);\n+    map.spawnMonsterOnGroundBelow(mob, new java.awt.Point(960, 120));\n+    \n+    map = eim.getInstanceMap(240060100);\n+    mob = MapleLifeFactory.getMonster(8810001);\n+    map.spawnMonsterOnGroundBelow(mob, new java.awt.Point(-420, 120));\n+    \n+    eim.startEventTimer(eventTime * 60000);\n+    setEventRewards(eim);\n+    setEventExclusives(eim);\n+    \n+    return eim;\n }\n \n-function playerRevive(eim,player) {\n-    player.setHp(500);\n-    player.setStance(0);\n-    eim.unregisterPlayer(player);\n-    player.changeMap(exitMap, exitMap.getPortal(0));\n-    var party = eim.getPlayers();\n-    if (party.size() < minPlayers)\n-        end(eim,\"There are not enough players remaining, the Battle is over.\");\n-    return false;\n+function playerEntry(eim, player) {\n+    eim.dropMessage(5, \"[Expedition] \" + player.getName() + \" has entered the map.\");\n+    var map = eim.getMapInstance(entryMap);\n+    player.changeMap(map, map.getPortal(0));\n }\n \n-function playerDead(eim,player) {\n+function scheduledTimeout(eim) {\n+    end(eim);\n }\n \n-function playerDisconnected(eim,player) {\n-    var party = eim.getPlayers();\n-    if (player.getName().equals(eim.getProperty(\"leader\"))) {\n-        // tell members\n-        var iter = party.iterator();\n-        while (iter.hasNext())\n-            iter.next().getPlayer().dropMessage(6,\"The leader of the instance has disconnected.\");\n+function changedMap(eim, player, mapid) {\n+    if (mapid < minMapId || mapid > maxMapId) {\n+\tif (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+            eim.dropMessage(5, \"[Expedition] Either the leader has quitted the event or there is no longer the minimum number of members required to continue this event.\");\n+            eim.unregisterPlayer(player);\n+            end(eim);\n+        }\n+        else {\n+            eim.dropMessage(5, \"[Expedition] \" + player.getName() + \" has left the event.\");\n+            eim.unregisterPlayer(player);\n+        }\n+    }\n+}\n+\n+function changedLeader(eim, leader) {}\n+\n+function playerDead(eim, player) {}\n+\n+function playerRevive(eim, player) {\n+    if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+        eim.unregisterPlayer(player);\n+        eim.dropMessage(5, \"[Expedition] Either the leader has quitted the event or there is no longer the minimum number of members required to continue this event.\");\n+        end(eim);\n     }\n-    // and, if the party is too small\n-    if (party.size() < minPlayers) {\n-        end(eim,\"There are not enough players remaining. The Battle is over.\");\n+    else {\n+        eim.dropMessage(5, \"[Expedition] \" + player.getName() + \" has left the event.\");\n+        eim.unregisterPlayer(player);\n     }\n }\n \n-function monsterValue(eim, mobId) {\n-    return 1;\n+function playerDisconnected(eim, player) {\n+    if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+        eim.dropMessage(5, \"[Expedition] Either the leader has quitted the event or there is no longer the minimum number of members required to continue this event.\");\n+        eim.unregisterPlayer(player);\n+        end(eim);\n+    }\n+    else {\n+        eim.dropMessage(5, \"[Expedition] \" + player.getName() + \" has left the event.\");\n+        eim.unregisterPlayer(player);\n+    }\n }\n \n-function leftParty(eim,player) {}\n+function leftParty (eim, player) {}\n \n-function disbandParty(eim) {}\n+function disbandParty (eim) {}\n+\n+function monsterValue(eim, mobId) {\n+    return 1;\n+}\n \n function playerUnregistered(eim, player) {}\n \n-function playerExit(eim,player) {\n+function playerExit(eim, player) {\n     eim.unregisterPlayer(player);\n-    player.changeMap(exitMap,exitMap.getPortal(0));\n-    if (eim.getPlayers().size() < minPlayers)//not enough after someone left\n-        end(eim,\"There are no longer enough players to continue, and those remaining shall be warped out.\");\n+    player.changeMap(exitMap, 0);\n }\n \n-function end(eim,msg) {\n-    var iter = eim.getPlayers().iterator();\n-    while (iter.hasNext()) {\n-        var player = iter.next();\n-        player.getPlayer().dropMessage(6,msg);\n-        eim.unregisterPlayer(player);\n-        if (player != null)\n-            player.changeMap(exitMap, exitMap.getPortal(0));\n+function end(eim) {\n+    var party = eim.getPlayers();\n+    for (var i = 0; i < party.size(); i++) {\n+        playerExit(eim, party.get(i));\n     }\n     eim.dispose();\n }\n \n-// for offline folk\n-function removePlayer(eim,player) {\n-    eim.unregisterPlayer(player);\n-    player.getMap().removePlayer(player);\n-    player.setMap(exitMap);\n+function giveRandomEventReward(eim, player) {\n+    eim.giveEventReward(player);\n }\n \n-function clearPQ(eim) {}\n+function clearPQ(eim) {\n+    eim.stopEventTimer();\n+    eim.setEventCleared();\n+}\n \n-function finish(eim) {\n-    var iter = eim.getPlayers().iterator();\n-    while (iter.hasNext()) {\n-        var player = iter.next();\n-        eim.unregisterPlayer(player);\n-        player.changeMap(exitMap, exitMap.getPortal(0));\n-    }\n-    eim.dispose();\n+function isHorntailHead(mob) {\n+    var mobid = mob.getId();\n+    return (mobid == 8810000 || mobid == 8810001);\n+}\n+\n+function isHorntail(mob) {\n+    var mobid = mob.getId();\n+    return (mobid == 8810018);\n }\n \n-function monsterKilled(mob, eim) {}\n+function monsterKilled(mob, eim) {\n+    if(isHorntail(mob)) {\n+        eim.setIntProperty(\"defeatedBoss\", 1);\n+        eim.showClearEffect(mob.getMap().getId());\n+        eim.clearPQ();\n+        \n+        mob.getMap().broadcastHorntailVictory();\n+    } else if(isHorntailHead(mob)) {\n+        var killed = eim.getIntProperty(\"defeatedHead\");\n+        eim.setIntProperty(\"defeatedHead\", killed + 1);\n+        eim.showClearEffect(mob.getMap().getId());\n+    }\n+}\n \n function allMonstersDead(eim) {}\n \n function cancelSchedule() {}\n \n-function timeOut() {}\n-\n-function debug(eim,msg) {\n-    var iter = eim.getPlayers().iterator();\n-    while (iter.hasNext()) {\n-        iter.next().getClient().getSession().write(Packages.tools.MaplePacketCreator.serverNotice(6,msg));\n-    }\n-}\n\\ No newline at end of file\n+function dispose(eim) {}"}, {"sha": "8e466d81b25c1c51dfff61b5d0b5203509568c8d", "filename": "scripts/event/HorntailPQ.js", "status": "added", "additions": 213, "deletions": 0, "changes": 213, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/event/HorntailPQ.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/event/HorntailPQ.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/HorntailPQ.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -0,0 +1,213 @@\n+/**\n+ * @author: Ronan\n+ * @event: Horntail PQ\n+*/\n+\n+var isPq = true;\n+var minPlayers = 1, maxPlayers = 6;\n+var minLevel = 120, maxLevel = 255;\n+var entryMap = 240050100;\n+var exitMap = 240050500;\n+var recruitMap = 240050000;\n+var clearMap = 240050400;\n+\n+var minMapId = 240050100;\n+var maxMapId = 240050310;\n+\n+var eventTime = 25;     // 25 minutes\n+\n+var lobbyRange = [0, 0];\n+\n+function init() {\n+        setEventRequirements();\n+}\n+\n+function setLobbyRange() {\n+        return lobbyRange;\n+}\n+\n+function setEventRequirements() {\n+        var reqStr = \"\";\n+        \n+        reqStr += \"\\r\\n    Number of players: \";\n+        if(maxPlayers - minPlayers >= 1) reqStr += minPlayers + \" ~ \" + maxPlayers;\n+        else reqStr += minPlayers;\n+        \n+        reqStr += \"\\r\\n    Level range: \";\n+        if(maxLevel - minLevel >= 1) reqStr += minLevel + \" ~ \" + maxLevel;\n+        else reqStr += minLevel;\n+        \n+        reqStr += \"\\r\\n    Time limit: \";\n+        reqStr += eventTime + \" minutes\";\n+        \n+        em.setProperty(\"party\", reqStr);\n+}\n+\n+function setEventExclusives(eim) {\n+        var itemSet = [4001087, 4001088, 4001089, 4001090, 4001091, 4001092, 4001093];\n+        eim.setExclusiveItems(itemSet);\n+}\n+\n+function setEventRewards(eim) {\n+        var itemSet, itemQty, evLevel, expStages;\n+\n+        evLevel = 1;    //Rewards at clear PQ\n+        itemSet = [];\n+        itemQty = [];\n+        eim.setEventRewards(evLevel, itemSet, itemQty);\n+        \n+        expStages = [];    //bonus exp given on CLEAR stage signal\n+        eim.setEventClearStageExp(expStages);\n+}\n+\n+function getEligibleParty(party) {      //selects, from the given party, the team that is allowed to attempt this event\n+        var eligible = [];\n+        var hasLeader = false;\n+        \n+        if(party.size() > 0) {\n+                var partyList = party.toArray();\n+\n+                for(var i = 0; i < party.size(); i++) {\n+                        var ch = partyList[i];\n+\n+                        if(ch.getMapId() == recruitMap && ch.getLevel() >= minLevel && ch.getLevel() <= maxLevel) {\n+                                if(ch.isLeader()) hasLeader = true;\n+                                eligible.push(ch);\n+                        }\n+                }\n+        }\n+        \n+        if(!(hasLeader && eligible.length >= minPlayers && eligible.length <= maxPlayers)) eligible = [];\n+        return eligible;\n+}\n+\n+function setup(level, lobbyid) {\n+        var eim = em.newInstance(\"PreHorntail\" + lobbyid);\n+        eim.setProperty(\"level\", level);\n+        \n+        eim.getInstanceMap(240050000).resetPQ(level);\n+        eim.getInstanceMap(240050100).resetPQ(level);\n+        eim.getInstanceMap(240050101).resetPQ(level);\n+        eim.getInstanceMap(240050102).resetPQ(level);\n+        eim.getInstanceMap(240050103).resetPQ(level);\n+        eim.getInstanceMap(240050104).resetPQ(level);\n+        eim.getInstanceMap(240050105).resetPQ(level);\n+        eim.getInstanceMap(240050200).resetPQ(level);\n+        eim.getInstanceMap(240050300).resetPQ(level);\n+        eim.getInstanceMap(240050310).resetPQ(level);\n+        \n+        eim.getInstanceMap(240050101).getReactorByName(\"passKey1\").setEventState(0);\n+        eim.getInstanceMap(240050102).getReactorByName(\"passKey2\").setEventState(1);\n+        eim.getInstanceMap(240050103).getReactorByName(\"passKey3\").setEventState(2);\n+        eim.getInstanceMap(240050104).getReactorByName(\"passKey4\").setEventState(3);\n+        \n+        respawnStages(eim);\n+        \n+        eim.startEventTimer(eventTime * 60000);\n+        setEventRewards(eim);\n+        setEventExclusives(eim);\n+        \n+        return eim;\n+}\n+\n+function afterSetup(eim) {}\n+\n+function respawnStages(eim) {}\n+\n+function playerEntry(eim, player) {\n+        var map = eim.getMapInstance(entryMap);\n+        player.changeMap(map, map.getPortal(0));\n+}\n+\n+function scheduledTimeout(eim) {\n+        end(eim);\n+}\n+\n+function playerUnregistered(eim, player) {}\n+\n+function playerExit(eim, player) {\n+        eim.unregisterPlayer(player);\n+        player.changeMap(exitMap, 0);\n+}\n+\n+function changedMap(eim, player, mapid) {\n+        if (mapid < minMapId || mapid > maxMapId) {\n+                if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+                        eim.unregisterPlayer(player);\n+                        end(eim);\n+                }\n+                else\n+                        eim.unregisterPlayer(player);\n+        }\n+}\n+\n+function changedLeader(eim, leader) {\n+        var mapid = leader.getMapId();\n+        if (!eim.isEventCleared() && (mapid < minMapId || mapid > maxMapId)) {\n+                end(eim);\n+        }\n+}\n+\n+function playerDead(eim, player) {}\n+\n+function playerRevive(eim, player) { // player presses ok on the death pop up.\n+        if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+                eim.unregisterPlayer(player);\n+                end(eim);\n+        }\n+        else\n+                eim.unregisterPlayer(player);\n+}\n+\n+function playerDisconnected(eim, player) {\n+        if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+                eim.unregisterPlayer(player);\n+                end(eim);\n+        }\n+        else\n+                eim.unregisterPlayer(player);\n+}\n+\n+function leftParty(eim, player) {\n+        if (eim.isEventTeamLackingNow(false, minPlayers, player)) {\n+                eim.unregisterPlayer(player);\n+                end(eim);\n+        }\n+        else\n+                eim.unregisterPlayer(player);\n+}\n+\n+function disbandParty(eim) {\n+        end(eim);\n+}\n+\n+function monsterValue(eim, mobId) {\n+        return 1;\n+}\n+\n+function end(eim) {\n+        var party = eim.getPlayers();\n+        for (var i = 0; i < party.size(); i++) {\n+                playerExit(eim, party.get(i));\n+        }\n+        eim.dispose();\n+}\n+\n+function giveRandomEventReward(eim, player) {\n+        eim.giveEventReward(player);\n+}\n+\n+function clearPQ(eim) {\n+        eim.stopEventTimer();\n+        eim.setEventCleared();\n+        \n+        eim.warpEventTeam(clearMap);\n+}\n+\n+function monsterKilled(mob, eim) {}\n+\n+function allMonstersDead(eim) {}\n+\n+function cancelSchedule() {}\n+\n+function dispose(eim) {}"}, {"sha": "0d8e7df0e64396ec75812b3fccc3c63ced086a1c", "filename": "scripts/event/ScargaBattle.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/event/ScargaBattle.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/event/ScargaBattle.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/ScargaBattle.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -68,7 +68,7 @@ function afterSetup(eim) {}\n function setup(channel) {\n     var eim = em.newInstance(\"Scarga\" + channel);\n     eim.setProperty(\"canJoin\", 1);\n-    eim.setProperty(\"defeatedBoss\", 1);\n+    eim.setProperty(\"defeatedBoss\", 0);\n \n     var level = 1;\n     eim.getInstanceMap(551030200).resetPQ(level);"}, {"sha": "7eebfda51ab294b391ccf5c74c22bbe640f32563", "filename": "scripts/npc/1012112.js", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/1012112.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/1012112.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1012112.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -20,7 +20,8 @@\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n /**\n- * @author BubblesDev, Ronan\n+ * @author BubblesDev\n+ * @author Ronan\n  * @NPC Tory\n  */\n "}, {"sha": "542f6c75beadc6a3db9059133c6e0f2820728fd8", "filename": "scripts/npc/1012113.js", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/1012113.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/1012113.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1012113.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -20,7 +20,8 @@\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n /**\n- * @author BubblesDev, Ronan\n+ * @author BubblesDev\n+ * @author Ronan\n  * @npc Tommy (HPQ)\n  */\n var status = 0;"}, {"sha": "f077c3a636f950b6de6c8e676f401afa80ddd051", "filename": "scripts/npc/1012114.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/1012114.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/1012114.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1012114.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -2,7 +2,7 @@\n   Growlie (that fatass uhh.. hungry lion or whatever)\n   FightDesign @RageZONE\n \n-  Ronan\n+  @author Ronan\n   */\n \n var status = 0;"}, {"sha": "3ac5efa29a042e0d9f21d11dcae83e2bcc32a5ea", "filename": "scripts/npc/2040034.js", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2040034.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2040034.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2040034.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -1,5 +1,6 @@\n /**\n- * @author: Eric, Ronan\n+ * @author: Eric\n+ * @author: Ronan\n  * @npc: Red Sign\n  * @map: 101st Floor Eos Tower (221024500)\n  * @func: Ludi PQ"}, {"sha": "f313499239e403998b8b0ffbd06718695a475b1a", "filename": "scripts/npc/2040036.js", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2040036.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2040036.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2040036.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -20,7 +20,8 @@\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n /*\n-@\tAuthor : Raz, Ronan\n+@\tAuthor : Raz\n+@       Author : Ronan\n @\n @\tNPC = Red Balloon\n @\tMap = Hidden-Street <Stage 1>"}, {"sha": "b67f4cc446c86b912d44ff2d81f0f79ead681458", "filename": "scripts/npc/2040037.js", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2040037.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2040037.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2040037.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -20,7 +20,8 @@\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n /*\n-@\tAuthor : Raz, Ronan\n+@\tAuthor : Raz\n+@       Author : Ronan\n @\n @\tNPC = Orange Balloon\n @\tMap = Hidden-Street <Stage 2>"}, {"sha": "6a97ef8a25e7ef46847d3a4c5b0bd99610b8e5f9", "filename": "scripts/npc/2040038.js", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2040038.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2040038.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2040038.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -20,7 +20,8 @@\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n /*\n-@\tAuthor : Raz, Ronan\n+@\tAuthor : Raz\n+@       Author : Ronan\n @\n @\tNPC = Yellow Balloon\n @\tMap = Hidden-Street <Stage 3>"}, {"sha": "c16abba0fc924118c99ac51d059d45a6fa0906fe", "filename": "scripts/npc/2040039.js", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2040039.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2040039.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2040039.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -20,7 +20,8 @@\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n /*\n-@\tAuthor : Raz, Ronan\n+@\tAuthor : Raz\n+@       Author : Ronan\n @\n @\tNPC = Lime Balloon\n @\tMap = Hidden-Street <Stage 4>"}, {"sha": "7f8c31c181f110f03de08b015b20629bad15d845", "filename": "scripts/npc/2040040.js", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2040040.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2040040.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2040040.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -20,7 +20,8 @@\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n /*\n-@\tAuthor : Raz, Ronan\n+@\tAuthor : Raz\n+@       Author : Ronan\n @\n @\tNPC = Green Balloon\n @\tMap = Hidden-Street <Stage 5>"}, {"sha": "772e9e78188a76cc8dc43df4d4551cf10555205a", "filename": "scripts/npc/2040042.js", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2040042.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2040042.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2040042.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -20,7 +20,8 @@\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n /*\n-@\tAuthor : Raz, Ronan\n+@\tAuthor : Raz\n+@       Author : Ronan\n @\n @\tNPC = Sky-Blue Balloon\n @\tMap = Hidden-Street <Stage 7>"}, {"sha": "698fbda291814a97d4ca7bc02e1b0ff2f017159d", "filename": "scripts/npc/2040043.js", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2040043.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2040043.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2040043.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -20,7 +20,8 @@\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n /*\n-@\tAuthor : Twdtwd, Ronan\n+@\tAuthor : Twdtwd\n+@       Author : Ronan\n @\n @\tNPC = Blue Balloon\n @\tMap = Hidden-Street <Stage 8>"}, {"sha": "20391b00ff4f4dc278f7d66c31963328f6ebde39", "filename": "scripts/npc/2040044.js", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2040044.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2040044.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2040044.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -20,7 +20,8 @@\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n /*\n-@\tAuthor : Twdtwd, Ronan\n+@\tAuthor : Twdtwd\n+@       Author : Ronan\n @\n @\tNPC = Violet Balloon\n @\tMap = Hidden-Street <Crack on the Wall>"}, {"sha": "228077ff59eeeed099c560a5114bd2030d74841d", "filename": "scripts/npc/2040045.js", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2040045.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2040045.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2040045.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -21,7 +21,8 @@\n */\n \n /*\n-@\tAuthor : Raz, Ronan\n+@\tAuthor : Raz\n+@       Author : Ronan\n @\n @\tNPC = Pink Balloon\n @\tMap = Hidden-Street <Stage B>"}, {"sha": "956d702078e0371d9e685682560620404d85302b", "filename": "scripts/npc/2040047.js", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2040047.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2040047.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2040047.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -20,7 +20,8 @@\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n /*\n-@\tAuthor : Raz, Ronan\n+@\tAuthor : Raz\n+@       Author : Ronan\n @\n @\tNPC = Sgt.Anderson\n @\tMap =  Abandoned Tower <Stage 1>"}, {"sha": "d35c1771ab265d396db40a6d93842377a9786dd2", "filename": "scripts/npc/2081005.js", "status": "modified", "additions": 24, "deletions": 6, "changes": 30, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2081005.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2081005.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2081005.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -19,25 +19,43 @@\n     You should have received a copy of the GNU Affero General Public License\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n-//Fixed by Moogra\n+//Fixed by Moogra, Ronan\n //Fixed grammar, javascript syntax\n+\n+importPackage(Packages.client);\n+\n var status = 0;\n var price = 100000;\n \n+function isTransformed(ch) {\n+        return ch.getBuffSource(MapleBuffStat.MORPH) == 2210003;\n+}\n+\n function start() {\n+    if(!(isTransformed(cm.getPlayer()) || cm.haveItem(4001086))) {\n+        cm.sendOk(\"This is the cave of the mighty Horntail, supreme ruler of the Leafre Canyons, outsiders are not welcome. Get lost!\");\n+        cm.dispose();\n+        return;\n+    }\n+    \n     cm.sendSimple(\"Welcome to Cave of Life - Entrance ! Would you like to go inside and fight #rHorntail#k ? If you want to fight him, you may might need some #b#v2000005##k, so you can recover some HP if you have been hit by #rHorntail#k.\\r\\n#L1#I would like to buy 10 for 100,000 Mesos!#l\\r\\n\\#L2#No thanks, let me in now!#l\");\n }\n \n function action(mode, type, selection) {\n     if (mode < 1)\n         cm.dispose();\n     else if (selection == 1) {\n-        if(cm.getMeso() >= price && cm.canHold(2000005)) {\n-            cm.gainMeso(-price);\n-            cm.gainItem(2000005, 10);\n-            cm.sendOk(\"Thank you for buying the potion. Use it as well!\");\n-        } else\n+        if(cm.getMeso() >= price) {\n+            if(!cm.canHold(2000005)) {\n+                cm.sendOk(\"Sorry, you don't have a slot on your inventory for the item!\");\n+            } else {\n+                cm.gainMeso(-price);\n+                cm.gainItem(2000005, 10);\n+                cm.sendOk(\"Thank you for buying the potion. Use it as well!\");\n+            }\n+        } else {\n             cm.sendOk(\"Sorry, you don't have enough mesos to buy them!\");\n+        }\n         cm.dispose();\n     } else if (selection == 2) {\n         if (cm.getLevel() > 99)"}, {"sha": "20e50edf9c49a93c60a80788c36dbdd1e4f4366b", "filename": "scripts/npc/2083000.js", "status": "modified", "additions": 5, "deletions": 58, "changes": 63, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2083000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2083000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2083000.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -47,68 +47,15 @@ function action(mode, type, selection) {\n         else\n             status--;\n         if (status == 0) {\n-            // Slate has no preamble, directly checks if you're in a party\n-            if (cm.getParty() == null) { // no party\n-                cm.sendOk(\"If you want to attempt the quest, try making a party and getting 6 People...\");\n+            if(cm.haveItem(4001086)) {\n+                cm.sendYesNo(\"Do you want to access #b#m240050400##k right now?\");\n+            } else {\n+                cm.sendOk(\"Those who don't have the #r#t4001086##k must prove their valor before challenging #bHorntail#k.\");\n                 cm.dispose();\n-                return;\n-            }\n-            if (!cm.isLeader()) { // not party leader\n-                cm.sendSimple(\"You are not the party leader.\");\n-                cm.dispose();\n-            }\n-            else {\n-                // Check teh partyy\n-                var party = cm.getParty().getMembers();\n-                var mapId = cm.getPlayer().getMapId();\n-                var next = true;\n-                var levelValid = 0;\n-                var inMap = 0;\n-                // Temp removal for testing\n-                if (party.size() < minPlayers || party.size() > maxPlayers)\n-                    next = false;\n-                else {\n-                    for (var i = 0; i < party.size() && next; i++) {\n-                        if ((party.get(i).getLevel() >= minLevel) && (party.get(i).getLevel() <= maxLevel))\n-                            levelValid += 1;\n-                        if (party.get(i).getMapId() == mapId)\n-                            inMap += 1;\n-                    }\n-                    if (levelValid < party.size() || inMap < party.size())\n-                        next = false;\n-                }\n-                if (next) {\n-                    // Kick it into action.  Slate says nothing here, just warps you in.\n-                    var em = cm.getEventManager(\"HontalePQ\");\n-                    if (em == null) {\n-                        cm.dispose();\n-                    }\n-                    else {\n-                        // Begin the PQ.\n-                        if(!em.startInstance(cm.getParty(),cm.getPlayer().getMap())) {\n-                            cm.sendOk(\"A party in your name is already registered in this event.\");\n-                            cm.dispose();\n-                            return;\n-                        }\n-                        //force the two scripts on portals in the map\n-                        //eim = cm.getPlayer().getEventInstance();\n-                        var map = eim.getMapInstance(240050100);\n-                        var bulbMap = eim.getMapInstance(240050200);\n-                        //map.getPortal(7).setScriptName(\"hontale_BtoB1\");\n-                        //map.getPortal(2).setScriptName(\"hontale_C\");\n-                        // Remove pass/coupons\n-                        party = cm.getPlayer().getEventInstance().getPlayers();\n-                    }\n-                    cm.dispose();\n-                }\n-                else {\n-                    cm.sendOk(\"Your party is not a party of six.  Make sure all your members are present and qualified to participate in this quest.  I see #b\" + levelValid.toString() + \" #kmembers are in the right level range, and #b\" + inMap.toString() + \"#k are in my map. If this seems wrong, #blog out and log back in,#k or reform the party.\");\n-                    cm.dispose();\n-                }\n             }\n         }\n         else {\n-            cm.sendOk(\"RAWR!?!?!?\");\n+            cm.warp(240050400);\n             cm.dispose();\n         }\n     }"}, {"sha": "fe0e0dbd7305280847887cdc91a7cd8fb36aa911", "filename": "scripts/npc/2083001.js", "status": "modified", "additions": 102, "deletions": 20, "changes": 122, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2083001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2083001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2083001.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -1,25 +1,107 @@\n-/*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc> \n-                       Matthias Butz <matze@odinms.de>\n-                       Jan Christian Meyer <vimes@odinms.de>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License version 3\n-    as published by the Free Software Foundation. You may not use, modify\n-    or distribute this program under any other version of the\n-    GNU Affero General Public License.\n+/**\n+ * @author: Ronan\n+ * @npc: Mark of the Squad\n+ * @map: Cave of Life - Cave Entrance (240050000)\n+ * @func: Horntail PQ\n+*/\n \n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU Affero General Public License for more details.\n+var status = 0;\n+var price = 100000;\n+var em = null;\n+var hasPass;\n \n-    You should have received a copy of the GNU Affero General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-*/\n+function isRecruitingMap(mapid) {\n+        return mapid == 240050000;\n+}\n \n function start() {\n-    cm.warp(240050400);\n-\tcm.dispose();\n+\tstatus = -1;\n+\taction(1, 0, 0);\n+}\n+\n+function action(mode, type, selection) {\n+        if (mode == -1) {\n+                cm.dispose();\n+        } else {\n+                if (mode == 0 && status == 0) {\n+                        cm.dispose();\n+                        return;\n+                }\n+                if (mode == 1)\n+                        status++;\n+                else\n+                        status--;\n+                \n+                if(isRecruitingMap(cm.getMapId())) {\n+                        if (status == 0) {\n+                                em = cm.getEventManager(\"HorntailPQ\");\n+                                if(em == null) {\n+                                        cm.sendOk(\"The Horntail PQ has encountered an error.\");\n+                                        cm.dispose();\n+                                        return;\n+                                }\n+\n+                                cm.sendSimple(\"#e#b<Party Quest: Horntail Trial Grounds>\\r\\n#k#n\" + em.getProperty(\"party\") + \"\\r\\n\\r\\nThis is the path to Horntail's lair. If you want to face him, you and your team shall be tested on the trial grounds ahead.#b\\r\\n#L0#Let us pass to the trial grounds.\\r\\n#L1#I would like to hear more details.\");\n+                        } else if (status == 1) {\n+                                if (selection == 0) {\n+                                        if (cm.getParty() == null) {\n+                                                cm.sendOk(\"You can participate in the party quest only if you are in a party.\");\n+                                                cm.dispose();\n+                                        } else if(!cm.isLeader()) {\n+                                                cm.sendOk(\"Your party leader must talk to me to start this party quest.\");\n+                                                cm.dispose();\n+                                        } else {\n+                                                var eli = em.getEligibleParty(cm.getParty());\n+                                                if(eli.size() > 0) {\n+                                                        if(!em.startInstance(cm.getParty(), cm.getPlayer().getMap(), 1)) {\n+                                                                cm.sendOk(\"Another party has already entered the #rParty Quest#k in this channel. Please try another channel, or wait for the current party to finish.\");\n+                                                        }\n+                                                }\n+                                                else {\n+                                                        cm.sendOk(\"Either I cannot accept some members of your party inside the cave or you team is lacking. Solve this problem then talk to me!\");\n+                                                }\n+\n+                                                cm.dispose();\n+                                        }\n+                                } else {\n+                                        cm.sendOk(\"#e#b<Party Quest: Horntail Trial Grounds>#k#n\\r\\nAs the gatekeeper of Horntail's lair, I will grant access #bjust to those worthy#k of his presence. Even for those people, the path inside is that of a maze, full of branches and trials. However, those #radept at fighting squad bosses#k have a better chance to stand to our leader, although those #rof our kind#k have a shabby chance as well.\");\n+                                        cm.dispose();\n+                                }\n+                        }\n+                } else {\n+                        if(!cm.isEventLeader()) {\n+                                cm.sendOk(\"Only your event leader is allowed to interact with the Schedule.\");\n+                        } else if(cm.getMapId() == 240050100) {\n+                                if(cm.haveItem(4001087) && cm.haveItem(4001088) && cm.haveItem(4001089) && cm.haveItem(4001090) && cm.haveItem(4001091)) {\n+                                        cm.gainItem(4001087, -1);\n+                                        cm.gainItem(4001088, -1);\n+                                        cm.gainItem(4001089, -1);\n+                                        cm.gainItem(4001090, -1);\n+                                        cm.gainItem(4001091, -1);\n+                                        \n+                                        cm.getEventInstance().warpEventTeam(240050200);\n+                                } else {\n+                                        cm.sendOk(\"You don't have all the keys needed to proceed.\");\n+                                }\n+                        } else if(cm.getMapId() == 240050300) {\n+                                if(cm.haveItem(4001092, 1) && cm.haveItem(4001093, 6)) {\n+                                        cm.gainItem(4001092, -1);\n+                                        cm.gainItem(4001093, -6);\n+                                        cm.getEventInstance().clearPQ();\n+                                } else {\n+                                        cm.sendOk(\"Check if you have got all 6 Red keys and 1 Blue key with you.\");\n+                                }\n+                        } else if(cm.getMapId() == 240050310) {\n+                                if(cm.haveItem(4001092, 1) && cm.haveItem(4001093, 6)) {\n+                                        cm.gainItem(4001092, -1);\n+                                        cm.gainItem(4001093, -6);\n+                                        cm.getEventInstance().clearPQ();\n+                                } else {\n+                                        cm.sendOk(\"Check if you have got all 6 Red keys and 1 Blue key with you.\");\n+                                }\n+                        }\n+                        \n+                        cm.dispose();\n+                }\n+        }\n }\n\\ No newline at end of file"}, {"sha": "14328826c090f030a7908589a5b853e1c8fe2d72", "filename": "scripts/npc/2083002.js", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2083002.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2083002.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2083002.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -22,7 +22,7 @@\n \n /**\n  *Crystal of Roots\n- *@Author: Moogra\n+ *@Author: Ronan\n  *@NPC: Crystal of Roots\n  */\n function start() {\n@@ -33,11 +33,9 @@ function action(mode, type, selection) {\n     if (mode < 1)\n         cm.dispose();\n     else {\n-        cm.warp(240040700);\n-        if (cm.getPlayer().getMap().getCharacters().size() < 2){\n-            cm.getPlayer().getMap().killAllMonsters();\n-            cm.getPlayer().getMap().resetReactors();\n-        }\n+        if(cm.getMapId() > 240050400) cm.warp(240050600);\n+        else cm.warp(240040700);\n+        \n         cm.dispose();\n     }\n }\n\\ No newline at end of file"}, {"sha": "de3553b9c33174248f8b41cb6b724b8ea9385479", "filename": "scripts/npc/2083004.js", "status": "modified", "additions": 116, "deletions": 94, "changes": 210, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2083004.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2083004.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2083004.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -19,11 +19,9 @@\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n /*Mark of the Squad\n- *@author Even\n+ *\n  *@author SharpAceX (Alan)\n- */\n-/*TODO \n- * ADD A CHECK TO SEE IF PLAYERS HAVE BADGE\n+ *@author Ronan\n  */\n importPackage(Packages.server.expeditions);\n importPackage(Packages.tools);\n@@ -33,7 +31,10 @@ var status = 0;\n var expedition;\n var player;\n var em;\n-var horntail = MapleExpeditionType.HORNTAIL;\n+var exped = MapleExpeditionType.HORNTAIL;\n+var expedName = \"Horntail\";\n+var expedBoss = \"mighty Horntail\";\n+\n var list = \"What would you like to do?#b\\r\\n\\r\\n#L1#View current Expedition members#l\\r\\n#L2#Start the fight!#l\\r\\n#L3#Stop the expedition.#l\";\n \n function start() {\n@@ -43,113 +44,134 @@ function start() {\n function action(mode, type, selection) {\n \n     player = cm.getPlayer();\n-    expedition = cm.getExpedition(horntail);\n+    expedition = cm.getExpedition(exped);\n     em = cm.getEventManager(\"HorntailFight\");\n \n-    if (mode < 1) {\n+    if (mode == -1) {\n         cm.dispose();\n-        return;\n-    }\n-    if (status == 0) {\n-        //cm.removeExpedition(expedition);\n-        if (player.getClient().getChannel() != 1) { //Only channel 1\n-            cm.sendOk(\"Sorry, Horntail may only be challenged on #bChannel 1#k.\");\n-            cm.dispose();\n-        } else if (player.getLevel() < horntail.getMinLevel() && player.getLevel() > horntail.getMaxLevel()) { //Don't fit requirement\n-            cm.sendOk(\"You do not meet the criteria to take on Horntail!\");\n+    } else {\n+        if (mode == 0) {\n             cm.dispose();\n-        } else if (expedition == null) { //Start an expedition\n-            cm.sendSimple(\"Would you like to assemble a team to take on the mighty #rHorntail#k?\\r\\n#b#L1#Lets get this going!#l\\r\\n\\#L2#No, I think I'll wait a bit...#l\");\n-            status = 1;\n-        } else if (expedition.isLeader(player)) { //If you're the leader, manage the exped\n-            cm.sendSimple(list);\n-            status = 2;\n-        } else if (expedition.isRegistering()) { //If the expedition is registering\n-            if (expedition.contains(player)) { //If you're in it but it hasn't started, be patient\n-                cm.sendOk(\"You have already registered for the expedition. Please wait for \" + expedition.getLeader().getName() + \" to begin the expedition.\");\n-                cm.dispose();\n-            } else { //If you aren't in it, you're going to get added\n-                cm.sendOk(expedition.addMember(cm.getPlayer()));\n+            return;\n+        }\n+\n+        if (status == 0) {\n+            if (player.getLevel() < exped.getMinLevel() && player.getLevel() > exped.getMaxLevel()) { //Don't fit requirement\n+                cm.sendOk(\"You do not meet the criteria to battle \" + expedBoss + \"!\");\n                 cm.dispose();\n+            } else if (expedition == null) { //Start an expedition\n+                cm.sendSimple(\"#e#b<Expedition: \" + expedName + \">\\r\\n#k#n\" + em.getProperty(\"party\") + \"\\r\\n\\r\\nWould you like to assemble a team to take on #r\" + expedBoss + \"#k?\\r\\n#b#L1#Lets get this going!#l\\r\\n\\#L2#No, I think I'll wait a bit...#l\");\n+                status = 1;\n+            } else if (expedition.isLeader(player)) { //If you're the leader, manage the exped\n+                cm.sendSimple(list);\n+                status = 2;\n+            } else if (expedition.isRegistering()) { //If the expedition is registering\n+                if (expedition.contains(player)) { //If you're in it but it hasn't started, be patient\n+                    cm.sendOk(\"You have already registered for the expedition. Please wait for #r\" + expedition.getLeader().getName() + \"#k to begin the expedition.\");\n+                    cm.dispose();\n+                } else { //If you aren't in it, you're going to get added\n+                    cm.sendOk(expedition.addMember(cm.getPlayer()));\n+                    cm.dispose();\n+                }\n+            } else if (expedition.isInProgress()) { //Only if the expedition is in progress\n+                if (expedition.contains(player)) { //If you're registered, warp you in\n+                    var eim = em.getInstance(expedName + player.getClient().getChannel());\n+                    if(eim.getIntProperty(\"canJoin\") == 1) {\n+                        eim.registerPlayer(player);\n+                    } else {\n+                        cm.sendOk(\"Your expedition already started the battle against \" + expedBoss + \". Lets pray for those brave souls.\");\n+                    }\n+                    \n+                    cm.dispose();\n+                } else { //If you're not in by now, tough luck\n+                    cm.sendOk(\"Another expedition has taken the initiative to challenge \" + expedBoss + \", lets pray for those brave souls.\");\n+                    cm.dispose();\n+                }\n             }\n-        } else if (expedition.isInProgress()) { //Only if the expedition is in progress\n-            if (expedition.contains(player)) { //If you're registered, warp you in\n-                em.getInstance(\"HorntailFight_\" + player.getClient().getChannel()).registerPlayer(player);\n+        } else if (status == 1) {\n+            if (selection == 1) {\n+                expedition = cm.getExpedition(exped);\n+                if(expedition != null) {\n+                    cm.sendOk(\"Someone already taken the initiative to be the leader of the expedition. Try joining them!\");\n+                    cm.dispose();\n+                    return;\n+                }\n+                \n+                cm.createExpedition(exped);\n+                cm.sendOk(\"The #r\" + expedBoss + \" Expedition#k has been created.\\r\\n\\r\\nTalk to me again to view the current team, or start the fight!\");\n                 cm.dispose();\n-            } else { //If you're not in by now, tough luck\n-                cm.sendOk(\"Another expedition has taken the initiative to fight Horntail, lets pray for those brave souls.\");\n+                return;\n+            } else if (selection == 2) {\n+                cm.sendOk(\"Sure, not everyone's up to challenging \" + expedBoss + \".\");\n                 cm.dispose();\n+                return;\n             }\n-        }\n-    } else if (status == 1) {\n-        if (selection == 1) {\n-            cm.createExpedition(horntail);\n-            cm.sendOk(\"The #rHorntail Expedition#k has been created.\\r\\n\\r\\nTalk to me again to view the current team, or start the fight!\");\n-            cm.dispose();\n-            return;\n-        } else if (selection == 2) {\n-            cm.sendOk(\"Sure, not everyone's up to challenging the might of Horntail.\");\n-            cm.dispose();\n-            return;\n-        }\n-    } else if (status == 2) {\n-        if (selection == 1) {\n-            if (expedition == null) {\n-                cm.sendOk(\"The expedition could not be loaded.\");\n+        } else if (status == 2) {\n+            if (selection == 1) {\n+                if (expedition == null) {\n+                    cm.sendOk(\"The expedition could not be loaded.\");\n+                    cm.dispose();\n+                    return;\n+                }\n+                var size = expedition.getMembers().size();\n+                if (size == 1) {\n+                    cm.sendOk(\"You are the only member of the expedition.\");\n+                    cm.dispose();\n+                    return;\n+                }\n+                var text = \"The following members make up your expedition (Click on them to expel them):\\r\\n\";\n+                text += \"\\r\\n\\t\\t1.\" + expedition.getLeader().getName();\n+                for (var i = 1; i < size; i++) {\n+                    text += \"\\r\\n#b#L\" + (i + 1) + \"#\" + (i + 1) + \". \" + expedition.getMembers().get(i).getName() + \"#l\\n\";\n+                }\n+                cm.sendSimple(text);\n+                status = 6;\n+            } else if (selection == 2) {\n+                //var min = exped.getMinSize();\n+                var min = 1;\n+                var size = expedition.getMembers().size();\n+                if (size < min) {\n+                    cm.sendOk(\"You need at least \" + min + \" players registered in your expedition.\");\n+                    cm.dispose();\n+                    return;\n+                }\n+                \n+                cm.sendOk(\"Good luck! All of Leafre is counting on you.\");\n+                status = 4;\n+            } else if (selection == 3) {\n+                player.getMap().broadcastMessage(MaplePacketCreator.serverNotice(6, expedition.getLeader().getName() + \" has ended the expedition.\"));\n+                cm.endExpedition(expedition);\n+                cm.sendOk(\"The expedition has now ended. Sometimes the best strategy is to run away.\");\n                 cm.dispose();\n                 return;\n             }\n-            var size = expedition.getMembers().size();\n-            if (size == 1) {\n-                cm.sendOk(\"You are the only member of the expedition.\");\n+        } else if (status == 4) {\n+            if (em == null) {\n+                cm.sendOk(\"The event could not be initialized, please report this on the forum.\");\n                 cm.dispose();\n                 return;\n             }\n-            var text = \"The following members make up your expedition (Click on them to expel them):\\r\\n\";\n-            text += \"\\r\\n\\t\\t1.\" + expedition.getLeader().getName();\n-            for (var i = 1; i < size; i++) {\n-                text += \"\\r\\n#b#L\" + (i + 1) + \"#\" + (i + 1) + \". \" + expedition.getMembers().get(i).getName() + \"#l\\n\";\n+\n+            em.setProperty(\"leader\", player.getName());\n+            em.setProperty(\"channel\", player.getClient().getChannel());\n+            if(!em.startInstance(expedition)) {\n+                cm.sendOk(\"Another expedition has taken the initiative to challenge \" + expedBoss + \", lets pray for those brave souls.\");\n+                cm.dispose();\n+                return;\n             }\n-            cm.sendSimple(text);\n-            status = 6;\n-        } else if (selection == 2) {\n-            cm.sendOk(\"The expedition will begin and you will be escorted to the #bCave of Trial I#k.\");\n-            status = 4;\n-        } else if (selection == 3) {\n-            cm.sendOk(\"The expedition has now ended. Sometimes the best strategy is to run away.\");\n-\t\t\tplayer.getMap().broadcastMessage(MaplePacketCreator.removeClock());\n-\t\t\tplayer.getMap().broadcastMessage(MaplePacketCreator.serverNotice(6, expedition.getLeader().getName() + \" has ended the expedition.\"));\n-            cm.endExpedition(expedition);\n-\t\t\tcm.dispose();\n-            return;\n-        }\n-    } else if (status == 4) {\n-        var min = 1; //horntail.getMinSize();\n-        var size = expedition.getMembers().size();\n-        if (size < min) {\n-            cm.sendOk(\"You need at least \" + min + \" players registered in your expedition.\");\n-            cm.dispose();\n-            return;\n-        }\n-        if (em == null) {\n-            cm.sendOk(\"The event could not be found, please report this on the forum.\");\n+            \n             cm.dispose();\n             return;\n-        }\n-        cm.sendOk(\"Good luck! All of Leafre is counting on you.\");\n-        em.setProperty(\"channel\", player.getClient().getChannel());\n-        em.startInstance(expedition);\n-        cm.dispose();\n-        return;\n-    } else if (status == 6) {\n-        if (selection > 0) {\n-\t\t\tvar banned = expedition.getMembers().get(selection);\n-            expedition.ban(banned);\n-            cm.sendOk(\"You have banned \" + banned.getName() + \" from the expedition.\");\n-            cm.dispose();\n-        } else {\n-            cm.sendSimple(list);\n-            status = 2;\n+        } else if (status == 6) {\n+            if (selection > 0) {\n+                var banned = expedition.getMembers().get(selection - 1);\n+                expedition.ban(banned);\n+                cm.sendOk(\"You have banned \" + banned.getName() + \" from the expedition.\");\n+                cm.dispose();\n+            } else {\n+                cm.sendSimple(list);\n+                status = 2;\n+            }\n         }\n     }\n }\n\\ No newline at end of file"}, {"sha": "8aaad68df308fcce29b429b0751a4c8b6b993898", "filename": "scripts/npc/2090004.js", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2090004.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2090004.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2090004.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -1,4 +1,5 @@\n-/* Author: aaroncsn(MapleSea Like), Ronan Lana\n+/* @author aaroncsn(MapleSea Like)\n+ * @author Ronan\n \tNPC Name: \t\tMr. Do\n \tMap(s): \t\tMu Lung: Mu Lung(2500000000)\n \tDescription: \t\tPotion Creator"}, {"sha": "c36d9483b49c6f8f663cd6c6ca10221adcc8340b", "filename": "scripts/npc/2101013.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2101013.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/2101013.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2101013.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -24,9 +24,9 @@ function action(mode, type, selection) {\n \telse\n \t\tstatus--;\n \tif(status == 0){\n-\t\tcm.sendAcceptDecline(\"I don't know how you found out about this, but you came to the right place! For those that wandered around Nihal Desert and are getting homesick, I am offering a flight straight to Victorial Island, non-stop! Don't worry about the flying ship--it's only fallen once or twice! Don't you feel claustrophobic being in a long flight on that small ship? What do you think? Are you willing to take the offer on this direct flight?\");\n+\t\tcm.sendNext(\"I don't know how you found out about this, but you came to the right place! For those that wandered around Nihal Desert and are getting homesick, I am offering a flight straight to Victorial Island, non-stop! Don't worry about the flying ship--it's only fallen once or twice! Don't you feel claustrophobic being in a long flight on that small ship?\");\n \t} else if(status == 1){\n-\t\tcm.sendAcceptDecline(\"Please remember two things. One, this line is actually for overseas shipping, so #rI cannot gurantee exactly which town you'll land#k. Two, since I am putting you in this special flight, it'll be a bit expensive. The service charge is #e#b10,000 mesos#n#k. There's a flight thats about to take off. Are you interested?\");\n+\t\tcm.sendAcceptDecline(\"Please remember two things. One, this line is actually for overseas shipping, so #rI cannot gurantee exactly which town you'll land#k. Two, since I am putting you in this special flight, it'll be a bit expensive. The service charge is #e#b10,000 mesos#n#k. There's a flight thats about to take off. Are you interested in this direct flight?\");\n \t} else if(status == 2){\n \t\tcm.sendNext(\"Okay, ready to takeoff~\");\n \t} else if(status == 3){"}, {"sha": "f9ee0e2205ebefc80e6992c67d8ed7743359fa8c", "filename": "scripts/npc/9000017.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/9000017.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/9000017.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9000017.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -2,7 +2,7 @@\n         Refining NPC: \n \t* Chaos scroll SYNTHETIZER (rofl)\n         * \n-        * By RonanLana\n+        * @author RonanLana\n */\n \n var status = 0;"}, {"sha": "87cf7cc8462201048cb3a05b84bb08151d62013d", "filename": "scripts/npc/9000036.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/9000036.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/9000036.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9000036.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -25,7 +25,7 @@\n \tRefining NPC:\n \t* Accessories refiner\n         * \n-        * By Ronan Lana\n+        * @author Ronan Lana\n */\n \n var status = -1;"}, {"sha": "aeb00fea058d34b9ce8bd6aab5346fc92331b11e", "filename": "scripts/npc/9000041.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/9000041.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/9000041.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9000041.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -23,7 +23,7 @@\n \tVictoria Road : Henesys\n \t\n \tNPC Bazaar:\n-        * By Ronan Lana\n+        * @author Ronan Lana\n */\n \n var options = [\"EQUIP\",\"USE\",\"SET-UP\",\"ETC\"];"}, {"sha": "1153623729987649749e2480fb6984fda9abb580", "filename": "scripts/npc/9040003.js", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/9040003.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/9040003.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9040003.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -20,7 +20,8 @@\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n /* \n- * @Author TheRamon, Ronan\n+ * @Author TheRamon\n+ * @Author Ronan\n  * \n  * Sharen III's Soul, Sharenian: Sharen III's Grave (990000700)\n  * "}, {"sha": "5d18e6834609721c11dc31bc023891e60d1e458c", "filename": "scripts/npc/9040006.js", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/9040006.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/9040006.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9040006.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -1,4 +1,5 @@\n-/* @Author Lerk, Ronan\n+/* @Author Lerk\n+ * @Author Ronan\n  *\n  * Guardian Statue - Sharenian: Fountain of the Wiseman (990000500)\n  * "}, {"sha": "8ad59a2ea845fd229d5544d4508e6ce344ed1db9", "filename": "scripts/npc/9103000.js", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/9103000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/9103000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9103000.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -20,7 +20,8 @@\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n /*\n-*\tAuthor : Raz, Ronan\n+*\tAuthor : Raz\n+*\tAuthor : Ronan\n *\n *\tNPC = 9103000 - Pierre\n *\tMap =  Ludibrium - Ludibrium Maze 16"}, {"sha": "70ae2af23c7ec3e51c34d73e428de7513d1aa341", "filename": "scripts/npc/9103001.js", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/9103001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/9103001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9103001.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -20,7 +20,8 @@\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n /*\n-*\tAuthor : Raz, Ronan\n+*\tAuthor : Raz\n+*\tAuthor : Ronan\n *\n *\tNPC = 9103001 - Rolly\n *\tMap =  Ludibrium - <Ludibrium>"}, {"sha": "408331b17d01db9bc16c1dfa5dbb83dff6cc99db", "filename": "scripts/npc/9201113.js", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/9201113.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/9201113.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9201113.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -20,7 +20,8 @@\n */\n /*Jack\n  *\n- *@author SharpAceX (Alan), Ronan\n+ *@author SharpAceX (Alan)\n+ *@author Ronan\n  */\n importPackage(Packages.server.expeditions);\n importPackage(Packages.tools);"}, {"sha": "be8fec82bd6040b6b1c4720af11438fee43f9687", "filename": "scripts/npc/9270047.js", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/9270047.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/npc/9270047.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9270047.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -20,7 +20,8 @@\n */\n /*Aldol\n  *\n- *@author SharpAceX (Alan), Ronan\n+ *@author SharpAceX (Alan)\n+ *@author Ronan\n  */\n importPackage(Packages.server.expeditions);\n importPackage(Packages.tools);\n@@ -31,6 +32,7 @@ var expedition;\n var player;\n var em;\n var exped = MapleExpeditionType.SCARGA;\n+var expedName = \"Scarga\";\n var expedBoss = \"Scarlion and Targa\";\n var expedMap = \"Spooky World\";\n var expedItem = 4032246;\n@@ -60,7 +62,7 @@ function action(mode, type, selection) {\n                 cm.sendOk(\"You do not meet the criteria to battle \" + expedBoss + \"!\");\n                 cm.dispose();\n             } else if (expedition == null) { //Start an expedition\n-                cm.sendSimple(\"#e#b<Expedition: Scarlion & Targa>\\r\\n#k#n\" + em.getProperty(\"party\") + \"\\r\\n\\r\\nWould you like to assemble a team to take on #r\" + expedBoss + \"#k?\\r\\n#b#L1#Lets get this going!#l\\r\\n\\#L2#No, I think I'll wait a bit...#l\");\n+                cm.sendSimple(\"#e#b<Expedition: \" + expedName + \">\\r\\n#k#n\" + em.getProperty(\"party\") + \"\\r\\n\\r\\nWould you like to assemble a team to take on #r\" + expedBoss + \"#k?\\r\\n#b#L1#Lets get this going!#l\\r\\n\\#L2#No, I think I'll wait a bit...#l\");\n                 status = 1;\n             } else if (expedition.isLeader(player)) { //If you're the leader, manage the exped\n                 cm.sendSimple(list);\n@@ -75,7 +77,7 @@ function action(mode, type, selection) {\n                 }\n             } else if (expedition.isInProgress()) { //Only if the expedition is in progress\n                 if (expedition.contains(player)) { //If you're registered, warp you in\n-                    var eim = em.getInstance(\"Scarga\" + player.getClient().getChannel());\n+                    var eim = em.getInstance(expedName + player.getClient().getChannel());\n                     if(eim.getIntProperty(\"canJoin\") == 1) {\n                         eim.registerPlayer(player);\n                     } else {"}, {"sha": "fa4f07c190c73e65b8d23a73c5d9dfc87d3eedac", "filename": "scripts/portal/ariant_queens.js", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/portal/ariant_queens.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/portal/ariant_queens.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/ariant_queens.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -0,0 +1,3 @@\n+//some quest where you must use hidden portals\n+function enter(pi) {\n+}\n\\ No newline at end of file"}, {"sha": "670d8e0363c10fdb5c64e404254ae3a068bbc9d1", "filename": "scripts/portal/captinsg00.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/portal/captinsg00.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/portal/captinsg00.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/captinsg00.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -1,4 +1,4 @@\n-/* By RonanLana */\n+/* @author RonanLana */\n \n function enter(pi) {\n         if (!pi.haveItem(4000381)) {"}, {"sha": "5c04dd9dd476d7153b77d2e56aaf6203cd229821", "filename": "scripts/portal/enterWitch.js", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/portal/enterWitch.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/portal/enterWitch.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/enterWitch.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -0,0 +1,15 @@\n+function enter(pi) {\n+    if (pi.getQuestStatus(20407) == 2) {\n+\tpi.warp(924010200,0);\n+        return true;\n+    } else if (pi.getQuestStatus(20406) == 2) {\n+\tpi.warp(924010100,0);\n+        return true;\n+    } else if (pi.getQuestStatus(20404) == 2) {\n+\tpi.warp(924010000,0);\n+        return true;\n+    } else {\n+\tpi.playerMessage(5, \"I shouldn't go here.. it's creepy!\");\n+        return false;\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "7e262a920139b41a909fc5a8f0729319d4890544", "filename": "scripts/portal/guildwaitingenter.js", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/portal/guildwaitingenter.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/portal/guildwaitingenter.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/guildwaitingenter.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -19,7 +19,8 @@\n     You should have received a copy of the GNU Affero General Public License\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n-/* @Author Lerk, Ronan\n+/* @Author Lerk\n+ * @Author Ronan\n  * \n  * Guild Quest Waiting Room - Entry Portal (map 990000000)\n  */"}, {"sha": "cb979f40d0e5cef053e5b8ec3fba7e9e3d49653d", "filename": "scripts/portal/hontale_BR.js", "status": "modified", "additions": 15, "deletions": 33, "changes": 48, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/portal/hontale_BR.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/portal/hontale_BR.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/hontale_BR.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -21,39 +21,21 @@\n */\n function enter(pi) {\n \tif (pi.getPlayer().getMapId() == 240060000) {\n-\t\tvar nextMap = 240060100;\n-\t\tvar eim = pi.getPlayer().getEventInstance()\n-\t\tvar target = eim.getMapInstance(nextMap);\n-\t\tvar targetPortal = target.getPortal(\"sp\");\n-\t\t// only let people through if the eim is ready\n-\t\tvar avail = eim.getProperty(\"head1\");\n-\t\tif (avail != \"yes\") {\n-\t\t\t// do nothing; send message to player\n-\t\t\tpi.getPlayer().dropMessage(6, \"Horntail\\'s Seal is Blocking this Door.\");\n-\t\t\treturn false;\n-\t\t}else {\n-\t\t\tpi.getPlayer().changeMap(target, targetPortal);\n-\t\t\tif (eim.getProperty(\"head2spawned\") != \"yes\") {\n-\t\t\t\teim.setProperty(\"head2spawned\", \"yes\");\n-\t\t\t\teim.schedule(\"headTwo\", 5000);\n-\t\t\t}\n-\t\t\treturn true;\n-\t\t}\n+\t\tif(pi.getEventInstance().getIntProperty(\"defeatedHead\") >= 1) {\n+                        pi.warp(240060100, 0);\n+                        return true;\n+                } else {\n+                        pi.getPlayer().dropMessage(6, \"Horntail\\'s Seal is Blocking this Door.\");\n+                        return false;\n+                }\n \t} else if (pi.getPlayer().getMapId() == 240060100) {\n-\t\tvar nextMap = 240060200;\n-\t\tvar eim = pi.getPlayer().getEventInstance()\n-\t\tvar target = eim.getMapInstance(nextMap);\n-\t\tvar targetPortal = target.getPortal(\"sp\");\n-\t\t// only let people through if the eim is ready\n-\t\tvar avail = eim.getProperty(\"head2\");\n-\t\tif (avail != \"yes\") {\n-\t\t\t// do nothing; send message to player\n-\t\t\tpi.getPlayer().dropMessage(6, \"Horntail\\'s Seal is Blocking this Door.\");\n-\t\t\treturn false;\n-\t\t}else {\n-\t\t\tpi.getPlayer().changeMap(target, targetPortal);\n-\t\t\treturn true;\n-\t\t}\n+\t\tif(pi.getEventInstance().getIntProperty(\"defeatedHead\") >= 2) {\n+                        pi.warp(240060200, 0);\n+                        return true;\n+                } else {\n+                        pi.getPlayer().dropMessage(6, \"Horntail\\'s Seal is Blocking this Door.\");\n+                        return false;\n+                }\n \t}\n-\treturn true;\t\n+\treturn false;\n }\n\\ No newline at end of file"}, {"sha": "0048dd7a66ae58f73272d03853c5bc3569203bd9", "filename": "scripts/portal/hontale_Bopen.js", "status": "modified", "additions": 27, "deletions": 15, "changes": 42, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/portal/hontale_Bopen.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/portal/hontale_Bopen.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/hontale_Bopen.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -29,10 +29,10 @@ function enter(pi) {\n         var target = eim.getMapInstance(nextMap);\n         var targetPortal = target.getPortal(\"sp\");\n         // only let people through if the eim is ready\n-        var avail = eim.getProperty(\"2stageclear\");\n+        var avail = eim.getProperty(\"1stageclear\");\n         if (avail == null) {\n             // do nothing; send message to player\n-            pi.getPlayer().dropMessage(6, \"This door is closed.\");\n+            pi.getPlayer().dropMessage(6, \"Horntail\\'s Seal is Blocking this Door.\");\n             return false;\n         }else {\n             pi.getPlayer().changeMap(target, targetPortal);\n@@ -45,10 +45,10 @@ function enter(pi) {\n         var target = eim.getMapInstance(nextMap);\n         var targetPortal = target.getPortal(\"sp\");\n         // only let people through if the eim is ready\n-        var avail = eim.getProperty(\"3stageclear\");\n+        var avail = eim.getProperty(\"2stageclear\");\n         if (avail == null) {\n             // do nothing; send message to player\n-            pi.getPlayer().dropMessage(6, \"This door is closed.\");\n+            pi.getPlayer().dropMessage(6, \"Horntail\\'s Seal is Blocking this Door.\");\n             return false;\n         }else {\n             pi.getPlayer().changeMap(target, targetPortal);\n@@ -61,10 +61,10 @@ function enter(pi) {\n         var target = eim.getMapInstance(nextMap);\n         var targetPortal = target.getPortal(\"sp\");\n         // only let people through if the eim is ready\n-        var avail = eim.getProperty(\"4stageclear\");\n+        var avail = eim.getProperty(\"3stageclear\");\n         if (avail == null) {\n             // do nothing; send message to player\n-            pi.getPlayer().dropMessage(6, \"This door is closed.\");\n+            pi.getPlayer().dropMessage(6, \"Horntail\\'s Seal is Blocking this Door.\");\n             return false;\n         }else {\n             pi.getPlayer().changeMap(target, targetPortal);\n@@ -77,25 +77,37 @@ function enter(pi) {\n         var target = eim.getMapInstance(nextMap);\n         var targetPortal = target.getPortal(\"sp\");\n         // only let people through if the eim is ready\n-        var avail = eim.getProperty(\"5stageclear\");\n+        var avail = eim.getProperty(\"4stageclear\");\n         if (avail == null) {\n             // do nothing; send message to player\n-            pi.getPlayer().dropMessage(6, \"This door is closed.\");\n+            pi.getPlayer().dropMessage(6, \"Horntail\\'s Seal is Blocking this Door.\");\n             return false;\n         }else {\n             pi.getPlayer().changeMap(target, targetPortal);\n             return true;\n         }\n     }\n     else if (pi.getPlayer().getMapId() == 240050105) {\n-        if (pi.haveItem(4001091, 6) && pi.isLeader()) {\n-            pi.gainItem(4001091, -6);\n-            pi.getPlayer().dropMessage(6, \"The six keys break the seal for a flash...\");\n-            pi.warp(240050100, \"st00\");\n+        var nextMap = 240050100;\n+        var eim = pi.getPlayer().getEventInstance()\n+        var target = eim.getMapInstance(nextMap);\n+        var targetPortal = target.getPortal(\"st00\");\n+        \n+        var avail = eim.getProperty(\"5stageclear\");\n+        if (avail == null) {\n+            if (pi.haveItem(4001092) && pi.isEventLeader()) {\n+                pi.getEventInstance().showClearEffect();\n+                pi.getPlayer().dropMessage(6, \"The leader's key break the seal for a flash...\");\n+                pi.getPlayer().changeMap(target, targetPortal);\n+                eim.setIntProperty(\"5stageclear\", 1);\n+                return true;\n+            } else {\n+                pi.getPlayer().dropMessage(6, \"Horntail\\'s Seal is blocking this door. Only the leader with the key can lift this seal.\");\n+                return false;\n+            }\n+        }else {\n+            pi.getPlayer().changeMap(target, targetPortal);\n             return true;\n-        } else {\n-            pi.getPlayer().dropMessage(6, \"Horntail\\'s Seal is blocking this door.\");\n-            return false;\n         }\n     }\n     return true;"}, {"sha": "2d60047ef63dee57474ec4859e8cb490e6511247", "filename": "scripts/portal/hontale_BtoB1.js", "status": "modified", "additions": 7, "deletions": 12, "changes": 19, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/portal/hontale_BtoB1.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/portal/hontale_BtoB1.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/hontale_BtoB1.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -24,20 +24,15 @@\n */\n \n function enter(pi) {\n-    var nextMap = 240050101;\n-    var eim = pi.getPlayer().getEventInstance()\n-    var target = eim.getMapInstance(nextMap);\n-    var targetPortal = target.getPortal(\"sp\");\n-    // only let people through if the eim is ready\n-    var avail = eim.getProperty(\"1stageclear\");\n-    if (!pi.haveItem(4001092, 1)) {\n-        // do nothing; send message to player\n-        pi.getPlayer().dropMessage(6, \"Horntail\\'s Seal is Blocking this Door.\");\n+    if (pi.getMap().countPlayers() == 1) {\n+        pi.getPlayer().dropMessage(6, \"As the last player on this map, you are compelled to wait for the incoming keys.\");\n         return false;\n     }else {\n-        pi.gainItem(4001092, -1);\n-        pi.getPlayer().dropMessage(6, \"The key disentegrates as Horntail\\'s Seal is broken for a flash...\");\n-        pi.getPlayer().changeMap(target, targetPortal);\n+        if(pi.haveItem(4001087)) {\n+            pi.getPlayer().dropMessage(6, \"You cannot pass to the next map holding the 1st Crystal Key in your inventory.\");\n+            return false;\n+        }\n+        pi.warp(240050101);\n         return true;\n     }\n }\n\\ No newline at end of file"}, {"sha": "e0fa7ee5f3b2fe034de9b45a4926ecf23203ce71", "filename": "scripts/portal/hontale_C.js", "status": "modified", "additions": 9, "deletions": 17, "changes": 26, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/portal/hontale_C.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/portal/hontale_C.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/hontale_C.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -23,31 +23,23 @@\n \n **hontale_c.js\n @author Jvlaple\n+@author Ronan\n */\n function enter(pi) {\n-\n-    if (pi.isLeader() == true) {\n+    if (pi.isEventLeader() == true) {\n         var eim = pi.getPlayer().getEventInstance();\n-        var party = eim.getPlayers();\n-        var target;\n-        var theWay = eim.getProperty(\"theWay\");\n         var target;\n-        if (theWay != null) {\n-            if (theWay = \"light\") {\n-                target = eim.getMapInstance(240050300); //light\n-            } else {\n-                target = eim.getMapInstance(240050310); //dark\n-            }\n+        var theWay = pi.getMap().getReactorByName(\"light\").getState();\n+        if (theWay == 1) {\n+            target = 240050300; //light\n+        } else if(theWay == 3) {\n+            target = 240050310; //dark\n         } else {\n             pi.playerMessage(5, \"Hit the Lightbulb to determine your fate!\");\n             return false;\n         }\n-        var targetPortal = target.getPortal(\"sp\");\n-        //Warp the full party into the map...\n-        var partyy = pi.getPlayer().getEventInstance().getPlayers();\n-        for (var i = 0; i < partyy.size(); i++) {\n-            party.get(i).changeMap(target, targetPortal);\n-        }\n+        \n+        eim.warpEventTeam(target);\n         return true;\n     } else {\n         pi.playerMessage(6, \"You are not the party leader. Only the party leader may proceed through this portal.\");"}, {"sha": "eca6d11c30ae765912010e89221bdd70d0a7cdc8", "filename": "scripts/portal/hontale_out1.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/portal/hontale_out1.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/portal/hontale_out1.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/hontale_out1.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -20,6 +20,6 @@\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n function enter(pi) {\n-\tpi.warp(240060000, \"st00\");\n+\tpi.warp(240050400, \"sp\");\n \treturn true;\n }\n\\ No newline at end of file"}, {"sha": "0461160468412ac2796d337833980fcd8d5fb748", "filename": "scripts/portal/nets_in.js", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/portal/nets_in.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/portal/nets_in.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/nets_in.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -0,0 +1,5 @@\n+function enter(pi) {\n+\tpi.saveLocation(\"MIRROR\");\n+\tpi.warp(926010000, 0);\n+\treturn true;\n+}\n\\ No newline at end of file"}, {"sha": "7711a75c8a2c250d6bcaee50e19b8b130fd3deff", "filename": "scripts/reactor/2401000.js", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/reactor/2401000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/reactor/2401000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2401000.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -19,14 +19,17 @@\n     You should have received a copy of the GNU Affero General Public License\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n-/* @Author Aexr\n+/* @Author Aexr, Ronan\n  * 2401000.js: Horntail's Cave - Summons Horntail.\n */\n \n function act() {\n     rm.changeMusic(\"Bgm14/HonTale\");\n     if (rm.getReactor().getMap().getMonsterById(8810026) == null) {\n-        rm.spawnMonster(8810026,71,260);\n+        rm.getReactor().getMap().spawnHorntailOnGroundBelow(new java.awt.Point(71,260));\n+        \n+        var eim = rm.getEventInstance();\n+        eim.restartEventTimer(60 * 60000);\n     }\n     rm.mapMessage(6, \"From the depths of his cave, here comes Horntail!\");\n }\n\\ No newline at end of file"}, {"sha": "b45773bd82eda05a71c94904ca11bfe6130f73a1", "filename": "scripts/reactor/2402006.js", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/reactor/2402006.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/reactor/2402006.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2402006.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -0,0 +1,30 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc> \n+\t\t\t\t\t   Matthias Butz <matze@odinms.de>\n+\t\t\t\t\t   Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+/* @Author Ronan\n+ * \n+ * HTPQ Box\n+*/\n+\n+function act(){\n+\trm.dropItems();\n+}\n\\ No newline at end of file"}, {"sha": "b2827ae5e63be2da62f923ead991d86e62bb2e92", "filename": "scripts/reactor/2406000.js", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/reactor/2406000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/reactor/2406000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2406000.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -0,0 +1,23 @@\n+/*\n+Dragon nest\n+*/\n+\n+function sendToHeaven() {\n+    rm.destroyNpc(2081008);\n+    rm.mapMessage(6, \"In a flicker of light, Nine Spirit's Little Dragon returns to the place it belongs, high above the skies.\");\n+    rm.getReactor().getMap().resetReactors();\n+}\n+\n+function touch() {\n+    if(rm.haveItem(4001094) && rm.getReactor().getState() == 0) {\n+        rm.hitReactor();\n+        rm.gainItem(4001094, -1);\n+    }\n+}\n+\n+function untouch() {}\n+\n+function act() {\n+    rm.spawnNpc(2081008);\n+    rm.schedule(\"sendToHeaven\", 12 * 1000);\n+}\n\\ No newline at end of file"}, {"sha": "3b55b5d787226208853b0c8076688601fa0ee45f", "filename": "scripts/reactor/2408002.js", "status": "modified", "additions": 14, "deletions": 9, "changes": 23, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/reactor/2408002.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/reactor/2408002.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2408002.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -25,46 +25,51 @@\n  *@author Jvlaple\n */\n \n+importPackage(Packages.client.inventory);\n+\n function act() {\n     var eim = rm.getPlayer().getEventInstance();\n-    var party = rm.getPlayer().getEventInstance().getPlayers();\n     var womanfred = eim.getMapFactory().getMap(240050100);\n     var vvpMap = rm.getPlayer().getMapId();\n     var vvpKey;\n-    var vvpOrig = 4001087;\n+    var vvpOrig = 4001088;\n     var vvpStage = -1;\n-    rm.mapMessage(6, \"The key is teleported somewhere...\");\n+    eim.showClearEffect(false, vvpMap);\n+    rm.mapMessage(6, \"The key has been teleported somewhere...\");\n     switch (vvpMap) {\n         case 240050101 : {\n             vvpKey = vvpOrig;\n-            vvpStage = 2;\n+            vvpStage = 1;\n             break;\n         }\n         case 240050102 : {\n             vvpKey = vvpOrig + 1;\n-            vvpStage = 3;\n+            vvpStage = 2;\n             break;\n         }\n         case 240050103 : {\n             vvpKey = vvpOrig + 2;\n-            vvpStage = 4;\n+            vvpStage = 3;\n             break;\n         }\n         case 240050104 : {\n             vvpKey = vvpOrig + 3;\n-            vvpStage = 5;\n+            vvpStage = 4;\n             break;\n         }\n         default : {\n             vvpKey = -1;\n             break;\n         }\n     }\n-    var tehWomanfred = new client.Item(vvpKey, 0, 1);\n+    \n+    eim.setIntProperty(vvpStage + \"stageclear\", 1);\n+    \n+    var tehWomanfred = new Item(vvpKey, 0, 1);\n     var theWomanfred = womanfred.getReactorByName(\"keyDrop1\");\n     var dropper = eim.getPlayers().get(0);\n     womanfred.spawnItemDrop(theWomanfred, dropper, tehWomanfred, theWomanfred.getPosition(), true, true);\n-    womanfred.dropMessage(5, \"A bright flash of light, then a key suddenly appears somewhere in the map.\");\n+    eim.getMapInstance(240050100).dropMessage(6, \"A bright flash of light, then a key suddenly appears somewhere in the map.\");\n }\n \t\n \t\n\\ No newline at end of file"}, {"sha": "b0dd87c0fcd2bedc035a5374ede7abf9cc1cbcb1", "filename": "scripts/reactor/2408004.js", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/reactor/2408004.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/reactor/2408004.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2408004.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -0,0 +1,3 @@\n+function act() {\n+    rm.spawnNpc(2081008);\n+}\n\\ No newline at end of file"}, {"sha": "26a3faf8d82b8ea72c950a0db38fa4f1267ae86d", "filename": "scripts/reactor/9208007.js", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/scripts/reactor/9208007.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/scripts/reactor/9208007.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/9208007.js?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -22,7 +22,8 @@\n /*\n Stage 2: Spear destinations - Guild Quest\n \n-@Author Lerk, Ronan\n+@Author Lerk\n+@Author Ronan\n */\n \n function act() {"}, {"sha": "f71568d294378eff4a76de0eb41a3e7fd102077a", "filename": "sql/db_drops.sql", "status": "modified", "additions": 25, "deletions": 2, "changes": 27, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/sql/db_drops.sql", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/sql/db_drops.sql", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/sql/db_drops.sql?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -19132,7 +19132,29 @@\n (9420544, 1003023, 1, 1, 0, 50000),\n (9420544, 1003024, 1, 1, 0, 50000),\n (9420549, 1003025, 1, 1, 0, 50000),\n-(9420549, 1003026, 1, 1, 0, 50000);\n+(9420549, 1003026, 1, 1, 0, 50000),\n+(9300066, 4001087, 1, 1, 0, 999999),\n+(9300067, 4001088, 1, 1, 0, 999999),\n+(9300069, 4001089, 1, 1, 0, 999999),\n+(9300071, 4001090, 1, 1, 0, 999999),\n+(9300073, 4001091, 1, 1, 0, 999999),\n+(9300075, 4001092, 1, 1, 0, 999999),\n+(9300077, 4001093, 1, 1, 0, 999999),\n+(9300065, 4001080, 1, 1, 7302, 40000),\n+(9300065, 4001081, 1, 1, 7302, 40000),\n+(9300068, 4001081, 1, 1, 7302, 40000),\n+(9300068, 4001082, 1, 1, 7302, 40000),\n+(9300070, 4001080, 1, 1, 7302, 40000),\n+(9300070, 4001082, 1, 1, 7302, 40000),\n+(9300072, 4001080, 1, 1, 7302, 40000),\n+(9300072, 4001081, 1, 1, 7302, 40000),\n+(9300074, 4001081, 1, 1, 7302, 40000),\n+(9300074, 4001082, 1, 1, 7302, 40000),\n+(9300076, 4001080, 1, 1, 7302, 40000),\n+(9300076, 4001082, 1, 1, 7302, 40000),\n+(9300078, 4001080, 1, 1, 7302, 40000),\n+(9300078, 4001081, 1, 1, 7302, 40000),\n+(9300078, 4001082, 1, 1, 7302, 40000);\n \n # (dropperid, itemid, minqty, maxqty, questid, chance)\n \n@@ -19440,7 +19462,8 @@\n     (2001012, 4001045, 1, -1),\n     (2001013, 4001045, 1, -1),\n     (2001014, 4001045, 1, -1),\n-    (2001015, 4001045, 1, -1);\n+    (2001015, 4001045, 1, -1),\n+    (2402006, 4001093, 1, -1);\n \n   # updates info for all cards on monster book\n   DROP TABLE `monstercarddata`;"}, {"sha": "a4af539440796b221f80dacfe41b0ae680e0fe1f", "filename": "src/client/command/Commands.java", "status": "modified", "additions": 5, "deletions": 13, "changes": 18, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/src/client/command/Commands.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/src/client/command/Commands.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/command/Commands.java?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -837,18 +837,11 @@ else if (sub[0].equals(\"sp\")) {\n                         player.setMp(player.getMaxMp());\n                         player.updateSingleStat(MapleStat.MP, player.getMaxMp());\n                 } else if (sub[0].equals(\"buffmap\")) {\n-                        for (MapleCharacter chr : player.getMap().getCharacters()){\n-                                //GM Skills : Haste(Super) - Holy Symbol - Bless - Hyper Body - Echo of Hero\n-                                SkillFactory.getSkill(9101001).getEffect(SkillFactory.getSkill(9101001).getMaxLevel()).applyTo(chr);\n-                                SkillFactory.getSkill(9101002).getEffect(SkillFactory.getSkill(9101002).getMaxLevel()).applyTo(chr);\n-                                SkillFactory.getSkill(9101003).getEffect(SkillFactory.getSkill(9101003).getMaxLevel()).applyTo(chr);\n-                                SkillFactory.getSkill(9101008).getEffect(SkillFactory.getSkill(9101008).getMaxLevel()).applyTo(chr);\n-                                SkillFactory.getSkill(1005).getEffect(SkillFactory.getSkill(1005).getMaxLevel()).applyTo(chr);\n-                                chr.setHp(chr.getMaxHp());\n-                                chr.updateSingleStat(MapleStat.HP, chr.getMaxHp());\n-                                chr.setMp(chr.getMaxMp());\n-                                chr.updateSingleStat(MapleStat.MP, chr.getMaxMp());\n-                        }\n+                        SkillFactory.getSkill(9101001).getEffect(SkillFactory.getSkill(9101001).getMaxLevel()).applyTo(player, true);\n+                        SkillFactory.getSkill(9101002).getEffect(SkillFactory.getSkill(9101002).getMaxLevel()).applyTo(player, true);\n+                        SkillFactory.getSkill(9101003).getEffect(SkillFactory.getSkill(9101003).getMaxLevel()).applyTo(player, true);\n+                        SkillFactory.getSkill(9101008).getEffect(SkillFactory.getSkill(9101008).getMaxLevel()).applyTo(player, true);\n+                        SkillFactory.getSkill(1005).getEffect(SkillFactory.getSkill(1005).getMaxLevel()).applyTo(player, true);\n                 } else if (sub[0].equals(\"buff\")) {\n                         if (sub.length < 2){\n                                 player.yellowMessage(\"Syntax: !buff <buffid>\");\n@@ -905,7 +898,6 @@ else if (sub[0].equals(\"sp\")) {\n                                         eu.setHp(incval);\n                                         eu.setMp(incval);\n                                         eu.setSpeed(incval);\n-                                        eu.setHands(incval);\n                                         eu.setWatk(incval);\n                                         eu.setDex(incval);\n                                         eu.setInt(incval);"}, {"sha": "e3e01426a8c7a83e68a4d690b9e94f499391c2a2", "filename": "src/client/inventory/Equip.java", "status": "modified", "additions": 44, "deletions": 28, "changes": 72, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/src/client/inventory/Equip.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/src/client/inventory/Equip.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/inventory/Equip.java?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -376,63 +376,79 @@ private void gainLevel(MapleClient c) {\n         boolean gotVicious = false, gotSlot = false;\n         \n         String lvupStr = \"'\" + MapleItemInformationProvider.getInstance().getName(this.getItemId()) + \"' is now level \" + itemLevel + \"! \";\n+        \n+        Integer statUp, maxStat = ServerConstants.MAX_EQUIPMNT_STAT;\n         for (Pair<StatUpgrade, Integer> stat : stats) {\n             switch (stat.getLeft()) {\n                 case incDEX:\n-                    dex += stat.getRight();\n-                    lvupStr += \"+\" + stat.getRight() + \"DEX \";\n+                    statUp = Math.min(stat.getRight(), maxStat - dex);\n+                    dex += statUp;\n+                    lvupStr += \"+\" + statUp + \"DEX \";\n                     break;\n                 case incSTR:\n-                    str += stat.getRight();\n-                    lvupStr += \"+\" + stat.getRight() + \"STR \";\n+                    statUp = Math.min(stat.getRight(), maxStat - str);\n+                    str += statUp;\n+                    lvupStr += \"+\" + statUp + \"STR \";\n                     break;\n                 case incINT:\n-                    _int += stat.getRight();\n-                    lvupStr += \"+\" + stat.getRight() + \"INT \";\n+                    statUp = Math.min(stat.getRight(), maxStat - _int);\n+                    _int += statUp;\n+                    lvupStr += \"+\" + statUp + \"INT \";\n                     break;\n                 case incLUK:\n-                    luk += stat.getRight();\n-                    lvupStr += \"+\" + stat.getRight() + \"LUK \";\n+                    statUp = Math.min(stat.getRight(), maxStat - luk);\n+                    luk += statUp;\n+                    lvupStr += \"+\" + statUp + \"LUK \";\n                     break;\n                 case incMHP:\n-                    hp += stat.getRight();\n-                    lvupStr += \"+\" + stat.getRight() + \"HP \";\n+                    statUp = Math.min(stat.getRight(), maxStat - hp);\n+                    hp += statUp;\n+                    lvupStr += \"+\" + statUp + \"HP \";\n                     break;\n                 case incMMP:\n-                    mp += stat.getRight();\n-                    lvupStr += \"+\" + stat.getRight() + \"MP \";\n+                    statUp = Math.min(stat.getRight(), maxStat - mp);\n+                    mp += statUp;\n+                    lvupStr += \"+\" + statUp + \"MP \";\n                     break;\n                 case incPAD:\n-                    watk += stat.getRight();\n-                    lvupStr += \"+\" + stat.getRight() + \"WATK \";\n+                    statUp = Math.min(stat.getRight(), maxStat - watk);\n+                    watk += statUp;\n+                    lvupStr += \"+\" + statUp + \"WATK \";\n                     break;\n                 case incMAD:\n-                    matk += stat.getRight();\n-                    lvupStr += \"+\" + stat.getRight() + \"MATK \";\n+                    statUp = Math.min(stat.getRight(), maxStat - matk);\n+                    matk += statUp;\n+                    lvupStr += \"+\" + statUp + \"MATK \";\n                     break;\n                 case incPDD:\n-                    wdef += stat.getRight();\n-                    lvupStr += \"+\" + stat.getRight() + \"WDEF \";\n+                    statUp = Math.min(stat.getRight(), maxStat - wdef);\n+                    wdef += statUp;\n+                    lvupStr += \"+\" + statUp + \"WDEF \";\n                     break;\n                 case incMDD:\n-                    mdef += stat.getRight();\n-                    lvupStr += \"+\" + stat.getRight() + \"MDEF \";\n+                    statUp = Math.min(stat.getRight(), maxStat - mdef);\n+                    mdef += statUp;\n+                    lvupStr += \"+\" + statUp + \"MDEF \";\n                     break;\n                 case incEVA:\n-                    avoid += stat.getRight();\n-                    lvupStr += \"+\" + stat.getRight() + \"AVOID \";\n+                    statUp = Math.min(stat.getRight(), maxStat - avoid);\n+                    avoid += statUp;\n+                    lvupStr += \"+\" + statUp + \"AVOID \";\n                     break;\n                 case incACC:\n-                    acc += stat.getRight();\n-                    lvupStr += \"+\" + stat.getRight() + \"ACC \";\n+                    statUp = Math.min(stat.getRight(), maxStat - acc);\n+                    acc += statUp;\n+                    lvupStr += \"+\" + statUp + \"ACC \";\n                     break;\n                 case incSpeed:\n-                    speed += stat.getRight();\n-                    lvupStr += \"+\" + stat.getRight() + \"SPEED \";\n+                    statUp = Math.min(stat.getRight(), maxStat - speed);\n+                    speed += statUp;\n+                    lvupStr += \"+\" + statUp + \"SPEED \";\n                     break;\n                 case incJump:\n-                    jump += stat.getRight();\n-                    lvupStr += \"+\" + stat.getRight() + \"JUMP \";\n+                    statUp = Math.min(stat.getRight(), maxStat - jump);\n+                    jump += statUp;\n+                    lvupStr += \"+\" + statUp + \"JUMP \";\n                     break;\n                     \n                 case incVicious:"}, {"sha": "640f28912795f8a4daf817800039443342b73944", "filename": "src/constants/ServerConstants.java", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/src/constants/ServerConstants.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/src/constants/ServerConstants.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/constants/ServerConstants.java?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -70,6 +70,7 @@\n     public static final boolean USE_EQUIPMNT_LVLUP_SLOTS = true;//Equips can upgrade slots at level up.\n     public static final boolean USE_EQUIPMNT_LVLUP_POWER = true;//Enable more powerful stats upgrades at equip level up.\n     public static final int MAX_EQUIPMNT_LVLUP_STAT_GAIN = 10000; //Max stat upgrade an equipment can have on a levelup.\n+    public static final int MAX_EQUIPMNT_STAT = 32767;            //Max stat on an equipment by leveling up.\n     public static final int USE_EQUIPMNT_LVLUP = 7;             //All equips lvlup at max level of N, set 1 to disable.\n     public static final int FAME_GAIN_BY_QUEST = 4;             //Fame gain each N quest completes, set 0 to disable.\n     public static final int SCROLL_CHANCE_RATE = 10;            //Number of tries for success on a scroll, set 0 for default."}, {"sha": "d58a74c710e1b01a2d2f4d6d0066ff312a960504", "filename": "src/net/server/channel/handlers/ChangeMapHandler.java", "status": "modified", "additions": 40, "deletions": 37, "changes": 77, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/src/net/server/channel/handlers/ChangeMapHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/src/net/server/channel/handlers/ChangeMapHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/ChangeMapHandler.java?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -90,43 +90,46 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n \t\t\t\t\t\tchr.setHp(50);\n \t\t\t\t\t\tchr.changeMap(to, to.getRandomPlayerSpawnpoint());\n \t\t\t\t\t}\n-\t\t\t\t} else if (targetid != -1 && chr.isGM()) {\n-\t\t\t\t\tMapleMap to = chr.getWarpMap(targetid);\n-\t\t\t\t\tchr.changeMap(to, to.getPortal(0));\n-\t\t\t\t} else if (targetid != -1 && !chr.isGM()) {//Thanks celino for saving me some time (:\n-\t\t\t\t\tfinal int divi = chr.getMapId() / 100;\n-\t\t\t\t\tboolean warp = false;\n-\t\t\t\t\tif (divi == 0) {\n-\t\t\t\t\t\tif (targetid == 10000) {\n-\t\t\t\t\t\t\twarp = true;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t} else if (divi == 20100) {\n-\t\t\t\t\t\tif (targetid == 104000000) {\n-\t\t\t\t\t\t\tc.announce(MaplePacketCreator.lockUI(false));\n-\t\t\t\t\t\t\tc.announce(MaplePacketCreator.disableUI(false));\n-\t\t\t\t\t\t\twarp = true;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t} else if (divi == 9130401) { // Only allow warp if player is already in Intro map, or else = hack\n-\t\t\t\t\t\tif (targetid == 130000000 || targetid / 100 == 9130401) { // Cygnus introduction\n-\t\t\t\t\t\t\twarp = true;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t} else if (divi == 9140900) { // Aran Introduction\n-\t\t\t\t\t\tif (targetid == 914090011 || targetid == 914090012 || targetid == 914090013 || targetid == 140090000) {\n-\t\t\t\t\t\t\twarp = true;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t} else if (divi / 10 == 1020) { // Adventurer movie clip Intro\n-\t\t\t\t\t\tif (targetid == 1020000) {\n-\t\t\t\t\t\t\twarp = true;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t} else if(divi / 10 >= 980040 && divi / 10 <= 980045) {\n-\t\t\t\t\t\tif(targetid == 980040000) {\n-\t\t\t\t\t\t\twarp = true;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t\tif (warp) {\n-\t\t\t\t\t\tfinal MapleMap to = chr.getWarpMap(targetid);\n-\t\t\t\t\t\tchr.changeMap(to, to.getPortal(0));\n-\t\t\t\t\t}\n+\t\t\t\t} else if (targetid != -1) {\n+                                        if(chr.isGM()) {\n+                                                MapleMap to = chr.getWarpMap(targetid);\n+                                                chr.changeMap(to, to.getPortal(0));\n+                                        }\n+                                        else {\n+                                                final int divi = chr.getMapId() / 100;\n+                                                boolean warp = false;\n+                                                if (divi == 0) {\n+                                                        if (targetid == 10000) {\n+                                                                warp = true;\n+                                                        }\n+                                                } else if (divi == 20100) {\n+                                                        if (targetid == 104000000) {\n+                                                                c.announce(MaplePacketCreator.lockUI(false));\n+                                                                c.announce(MaplePacketCreator.disableUI(false));\n+                                                                warp = true;\n+                                                        }\n+                                                } else if (divi == 9130401) { // Only allow warp if player is already in Intro map, or else = hack\n+                                                        if (targetid == 130000000 || targetid / 100 == 9130401) { // Cygnus introduction\n+                                                                warp = true;\n+                                                        }\n+                                                } else if (divi == 9140900) { // Aran Introduction\n+                                                        if (targetid == 914090011 || targetid == 914090012 || targetid == 914090013 || targetid == 140090000) {\n+                                                                warp = true;\n+                                                        }\n+                                                } else if (divi / 10 == 1020) { // Adventurer movie clip Intro\n+                                                        if (targetid == 1020000) {\n+                                                                warp = true;\n+                                                        }\n+                                                } else if(divi / 10 >= 980040 && divi / 10 <= 980045) {\n+                                                        if(targetid == 980040000) {\n+                                                                warp = true;\n+                                                        }\n+                                                }\n+                                                if (warp) {\n+                                                        final MapleMap to = chr.getWarpMap(targetid);\n+                                                        chr.changeMap(to, to.getPortal(0));\n+                                                }\n+                                        }\n \t\t\t\t}\n \t\t\t\tif (portal != null && !portal.getPortalStatus()) {\n \t\t\t\t\tc.announce(MaplePacketCreator.blockedMessage(1));"}, {"sha": "7f6e3c81ceddf125e63398ecc030bcf3c2e48775", "filename": "src/net/server/channel/handlers/DoorHandler.java", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/src/net/server/channel/handlers/DoorHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/src/net/server/channel/handlers/DoorHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/DoorHandler.java?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -29,7 +29,8 @@\n \n /**\n  *\n- * @author Matze, Ronan\n+ * @author Matze\n+ * @author Ronan\n  */\n public final class DoorHandler extends AbstractMaplePacketHandler {\n     public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {"}, {"sha": "b495ad5167209b536da89751b16bd7dd048c424b", "filename": "src/net/server/channel/handlers/ItemIdSortHandler.java", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/src/net/server/channel/handlers/ItemIdSortHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/src/net/server/channel/handlers/ItemIdSortHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/ItemIdSortHandler.java?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -40,11 +40,10 @@\n /**\n  *\n  * @author BubblesDev\n+ * @author Ronan\n  */\n \n class PairedQuicksort {\n-    /* by RonanLana */\n-    \n     private int i = 0;\n     private int j = 0;\n     private final ArrayList<Integer> intersect;"}, {"sha": "92f33f18d5a6ba20d3d786d477e53272d22d6fe2", "filename": "src/net/server/channel/handlers/ItemPickupHandler.java", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/src/net/server/channel/handlers/ItemPickupHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/src/net/server/channel/handlers/ItemPickupHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/ItemPickupHandler.java?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -29,7 +29,8 @@\n \n /**\n  *\n- * @author Matze, Ronan\n+ * @author Matze\n+ * @author Ronan\n  */\n public final class ItemPickupHandler extends AbstractMaplePacketHandler {\n "}, {"sha": "40a469740410b557eb2b37bd56ae30b90c30e9cd", "filename": "src/net/server/channel/handlers/PetLootHandler.java", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/src/net/server/channel/handlers/PetLootHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/src/net/server/channel/handlers/PetLootHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/PetLootHandler.java?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -31,7 +31,8 @@\n import constants.ServerConstants;\n \n /**\n- * @author TheRamon, Ronan\n+ * @author TheRamon\n+ * @author Ronan\n  */\n public final class PetLootHandler extends AbstractMaplePacketHandler {\n     public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {"}, {"sha": "0128d25c29d56a5672aa6f2426adc29f68c30904", "filename": "src/net/server/guild/MapleAlliance.java", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/src/net/server/guild/MapleAlliance.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/src/net/server/guild/MapleAlliance.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/guild/MapleAlliance.java?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -37,7 +37,8 @@\n \n /**\n  *\n- * @author XoticStory, Ronan.\n+ * @author XoticStory\n+ * @author Ronan\n  */\n public class MapleAlliance {\n     final private List<Integer> guilds = new LinkedList<>();"}, {"sha": "da5ba87270dc4703fd8df5e5efde27b62cf1be66", "filename": "src/scripting/AbstractPlayerInteraction.java", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/src/scripting/AbstractPlayerInteraction.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/src/scripting/AbstractPlayerInteraction.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/scripting/AbstractPlayerInteraction.java?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -748,13 +748,13 @@ public void spawnNpc(int npcId, Point pos, MapleMap map) {\n                         map.broadcastMessage(MaplePacketCreator.spawnNPC(npc));\n                 }\n         }\n-\n+        \n \tpublic void spawnMonster(int id, int x, int y) {\n \t\tMapleMonster monster = MapleLifeFactory.getMonster(id);\n \t\tmonster.setPosition(new Point(x, y));\n \t\tgetPlayer().getMap().spawnMonster(monster);\n \t}\n-\n+        \n \tpublic MapleMonster getMonsterLifeFactory(int mid) {\n \t\treturn MapleLifeFactory.getMonster(mid);\n \t}"}, {"sha": "c629f994e188364f338f20f757f6562f882d4513", "filename": "src/scripting/event/EventInstanceManager.java", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/src/scripting/event/EventInstanceManager.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/src/scripting/event/EventInstanceManager.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/scripting/event/EventInstanceManager.java?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -68,7 +68,8 @@\n \n /**\n  *\n- * @author Matze, Ronan\n+ * @author Matze\n+ * @author Ronan\n  */\n public class EventInstanceManager {\n \tprivate Map<Integer, MapleCharacter> chars = new HashMap<>();\n@@ -415,11 +416,13 @@ public void changedMap(MapleCharacter chr, int mapId) {\n \t}\n         \n         public void changedLeader(MapleCharacter ldr) {\n-\t\ttry {\n+                try {\n \t\t\tem.getIv().invokeFunction(\"changedLeader\", this, ldr);\n \t\t} catch (ScriptException | NoSuchMethodException ex) {\n \t\t\tex.printStackTrace();\n \t\t}\n+                \n+                leaderId = ldr.getId();\n \t}\n \t\n \tpublic void monsterKilled(MapleMonster mob) {\n@@ -1002,6 +1005,10 @@ public final void showClearEffect(boolean hasGate) {\n                 showClearEffect(hasGate, getLeader().getMapId());\n         }\n         \n+        public final void showClearEffect(int mapId) {\n+                showClearEffect(false, mapId);\n+        }\n+        \n         public final void showClearEffect(boolean hasGate, int mapId) {\n                 showClearEffect(hasGate, mapId, \"gate\", 2);\n         }"}, {"sha": "1a9fd257c74a17bfca44ab4bc7e33250ccc534ab", "filename": "src/scripting/reactor/ReactorActionManager.java", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/src/scripting/reactor/ReactorActionManager.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/src/scripting/reactor/ReactorActionManager.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/scripting/reactor/ReactorActionManager.java?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -45,7 +45,8 @@\n import server.maps.ReactorDropEntry;\n \n /**\n- * @author Lerk, Ronan\n+ * @author Lerk\n+ * @author Ronan\n  */\n public class ReactorActionManager extends AbstractPlayerInteraction {\n     private MapleReactor reactor;\n@@ -59,6 +60,14 @@ public ReactorActionManager(MapleClient c, MapleReactor reactor, Invocable iv) {\n         this.iv = iv;\n     }\n \n+    public void hitReactor() {\n+        reactor.hitReactor(client);\n+    }\n+    \n+    public void destroyNpc(int npcId) {\n+        reactor.getMap().destroyNPC(npcId);\n+    }\n+\n     public void dropItems() {\n         dropItems(false, 0, 0, 0, 0);\n     }"}, {"sha": "7dd399f6fd47c5d67130dd093eda7d383b449b04", "filename": "src/server/MapleStatEffect.java", "status": "modified", "additions": 28, "deletions": 12, "changes": 40, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/src/server/MapleStatEffect.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/src/server/MapleStatEffect.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/MapleStatEffect.java?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -699,14 +699,19 @@ public void applyPassive(MapleCharacter applyto, MapleMapObject obj, int attack)\n     }\n \n     public boolean applyTo(MapleCharacter chr) {\n-        return applyTo(chr, chr, true, null);\n+        return applyTo(chr, chr, true, null, false);\n+    }\n+    \n+    public boolean applyTo(MapleCharacter chr, boolean useMaxRange) {\n+        return applyTo(chr, chr, true, null, useMaxRange);\n     }\n \n     public boolean applyTo(MapleCharacter chr, Point pos) {\n-        return applyTo(chr, chr, true, pos);\n+        return applyTo(chr, chr, true, pos, false);\n     }\n \n-    private boolean applyTo(MapleCharacter applyfrom, MapleCharacter applyto, boolean primary, Point pos) {\n+    // primary: the player caster of the buff\n+    private boolean applyTo(MapleCharacter applyfrom, MapleCharacter applyto, boolean primary, Point pos, boolean useMaxRange) {\n         if (skill && (sourceid == GM.HIDE || sourceid == SuperGM.HIDE)) {\n             applyto.toggleHide(false);\n             return true;\n@@ -724,11 +729,14 @@ private boolean applyTo(MapleCharacter applyfrom, MapleCharacter applyto, boolea\n             }\n         }\n         List<Pair<MapleStat, Integer>> hpmpupdate = new ArrayList<>(2);\n-        if (!primary && isResurrection()) {\n-            hpchange = applyto.getMaxHp();\n-            applyto.setStance(0);\n-            applyto.getMap().broadcastMessage(applyto, MaplePacketCreator.removePlayerFromMap(applyto.getId()), false);\n-            applyto.getMap().broadcastMessage(applyto, MaplePacketCreator.spawnPlayerMapobject(applyto), false);\n+        if (!primary) {\n+            if(isResurrection()) {\n+                hpchange = applyto.getMaxHp();\n+                applyto.setStance(0);\n+                \n+                applyto.getMap().broadcastMessage(applyto, MaplePacketCreator.removePlayerFromMap(applyto.getId()), false);\n+                applyto.getMap().broadcastMessage(applyto, MaplePacketCreator.spawnPlayerMapobject(applyto), false);\n+            }\n         }\n         if (isDispel() && makeChanceResult()) {\n             applyto.dispelDebuffs();\n@@ -818,7 +826,7 @@ private boolean applyTo(MapleCharacter applyfrom, MapleCharacter applyto, boolea\n         }\n \n         if (primary && (overTime || isHeal())) {\n-            applyBuff(applyfrom);\n+            applyBuff(applyfrom, useMaxRange);\n         }\n \n         if (primary && isMonsterBuff()) {\n@@ -872,13 +880,17 @@ private boolean applyTo(MapleCharacter applyfrom, MapleCharacter applyto, boolea\n             applyfrom.getMap().spawnMist(mist, getDuration(), mist.isPoisonMist(), false, mist.isRecoveryMist());\n         } else if(isTimeLeap()) {\n             applyto.removeAllCooldownsExcept(Buccaneer.TIME_LEAP, true);\n+        } else if(isHyperBody() && !primary) {\n+            applyto.getMap().broadcastMessage(applyto, MaplePacketCreator.removePlayerFromMap(applyto.getId()), false);\n+            applyto.getMap().broadcastMessage(applyto, MaplePacketCreator.spawnPlayerMapobject(applyto), false);\n         }\n+        \n         return true;\n     }\n \n-    private void applyBuff(MapleCharacter applyfrom) {\n+    private void applyBuff(MapleCharacter applyfrom, boolean useMaxRange) {\n         if (isPartyBuff() && (applyfrom.getParty() != null || isGmBuff())) {\n-            Rectangle bounds = calculateBoundingBox(applyfrom.getPosition(), applyfrom.isFacingLeft());\n+            Rectangle bounds = (!useMaxRange) ? calculateBoundingBox(applyfrom.getPosition(), applyfrom.isFacingLeft()) : new Rectangle(Integer.MIN_VALUE / 2, Integer.MIN_VALUE / 2, Integer.MAX_VALUE, Integer.MAX_VALUE);\n             List<MapleMapObject> affecteds = applyfrom.getMap().getMapObjectsInRect(bounds, Arrays.asList(MapleMapObjectType.PLAYER));\n             List<MapleCharacter> affectedp = new ArrayList<>(affecteds.size());\n             for (MapleMapObject affectedmo : affecteds) {\n@@ -890,7 +902,7 @@ private void applyBuff(MapleCharacter applyfrom) {\n                 }\n             }\n             for (MapleCharacter affected : affectedp) {\n-                applyTo(applyfrom, affected, false, null);\n+                applyTo(applyfrom, affected, false, null, useMaxRange);\n                 affected.getClient().announce(MaplePacketCreator.showOwnBuffEffect(sourceid, 2));\n                 affected.getMap().broadcastMessage(affected, MaplePacketCreator.showBuffeffect(affected.getId(), sourceid, 2), false);\n             }\n@@ -1379,6 +1391,10 @@ private boolean isInfusion() {\n     private boolean isCygnusFA() {\n         return skill && (sourceid == DawnWarrior.FINAL_ATTACK || sourceid == WindArcher.FINAL_ATTACK);\n     }\n+    \n+    private boolean isHyperBody() {\n+        return skill && (sourceid == Spearman.HYPER_BODY || sourceid == GM.HYPER_BODY || sourceid == SuperGM.HYPER_BODY);\n+    }\n \n     private boolean isComboReset() {\n         return sourceid == Aran.COMBO_BARRIER || sourceid == Aran.COMBO_DRAIN;"}, {"sha": "0768c5a9423e6ede0c8692489debe95edc17579a", "filename": "src/server/MapleTrade.java", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/src/server/MapleTrade.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/src/server/MapleTrade.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/MapleTrade.java?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -38,7 +38,8 @@\n \n /**\n  *\n- * @author Matze, Ronan (concurrency safety)\n+ * @author Matze\n+ * @author Ronan (concurrency safety)\n  */\n public class MapleTrade {\n     private MapleTrade partner = null;"}, {"sha": "7ddffac09cbc327f975f559c3daa1d2ac458ffb8", "filename": "src/server/life/MapleNPC.java", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/src/server/life/MapleNPC.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/src/server/life/MapleNPC.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/life/MapleNPC.java?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -54,6 +54,7 @@ public void sendSpawnData(MapleClient client) {\n \n     @Override\n     public void sendDestroyData(MapleClient client) {\n+        client.announce(MaplePacketCreator.removeNPCController(getObjectId()));\n         client.announce(MaplePacketCreator.removeNPC(getObjectId()));\n     }\n "}, {"sha": "09672b6a4937180e381531a0ba5847ac0a595c6f", "filename": "src/server/maps/MapleDoor.java", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/src/server/maps/MapleDoor.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/src/server/maps/MapleDoor.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/maps/MapleDoor.java?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -30,7 +30,8 @@\n \n /**\n  *\n- * @author Matze, Ronan\n+ * @author Matze\n+ * @author Ronan\n  */\n public class MapleDoor {\n     private int ownerId;"}, {"sha": "576424570d52a919645deaa69878ca1830b3fa85", "filename": "src/server/maps/MapleMap.java", "status": "modified", "additions": 33, "deletions": 9, "changes": 42, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/src/server/maps/MapleMap.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/src/server/maps/MapleMap.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/maps/MapleMap.java?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -722,6 +722,14 @@ public boolean damageMonster(final MapleCharacter chr, final MapleMonster monste\n         }\n         return mobs;\n     }\n+    \n+    public void broadcastHorntailVictory() {\n+        for (Channel cserv : Server.getInstance().getWorld(world).getChannels()) {\n+            for (MapleCharacter player : cserv.getPlayerStorage().getAllCharacters()) {\n+                player.dropMessage(\"To the crew that have finally conquered Horned Tail after numerous attempts, I salute thee! You are the true heroes of Leafre!!\");\n+            }\n+        }\n+    }\n \n     public void killMonster(final MapleMonster monster, final MapleCharacter chr, final boolean withDrops) {\n         killMonster(monster, chr, withDrops, 1);\n@@ -760,13 +768,7 @@ public void killMonster(final MapleMonster monster, final MapleCharacter chr, fi\n                 }\n             }\n         }\n-        if (monster.getId() == 8810018 && chr.getMapId() == 240060200) {\n-            for (Channel cserv : Server.getInstance().getWorld(world).getChannels()) {\n-                for (MapleCharacter player : cserv.getPlayerStorage().getAllCharacters()) {\n-                    player.dropMessage(\"To the crew that have finally conquered Horned Tail after numerous attempts, I salute thee! You are the true heroes of Leafre!!\");\n-                }\n-            }\n-        }\n+        \n         spawnedMonstersOnMap.decrementAndGet();\n         monster.setHp(0);\n         //if (monster.getStats().selfDestruction() == null) {//FUU BOMBS D:\n@@ -1084,6 +1086,24 @@ public boolean containsNPC(int npcid) {\n         }\n         return false;\n     }\n+    \n+    public void destroyNPC(int npcid) {\n+        List<MapleMapObject> npcs = getMapObjectsInRange(new Point(0, 0), Double.POSITIVE_INFINITY, Arrays.asList(MapleMapObjectType.NPC));\n+        \n+        objectWLock.lock();\n+        try {\n+            for (MapleMapObject obj : npcs) {\n+                if (((MapleNPC) obj).getId() == npcid) {\n+                    broadcastMessage(MaplePacketCreator.removeNPCController(obj.getObjectId()));\n+                    broadcastMessage(MaplePacketCreator.removeNPC(obj.getObjectId()));\n+                    \n+                    this.mapobjects.remove(Integer.valueOf(obj.getObjectId()));\n+                }\n+            }\n+        } finally {\n+            objectWLock.unlock();\n+        }\n+    }\n \n     public MapleMapObject getMapObject(int oid) {\n         objectRLock.lock();\n@@ -1905,8 +1925,12 @@ public void removePlayer(MapleCharacter chr) {\n         }\n     }\n     \n+    public void dropMessage(int type, String message) {\n+        broadcastStringMessage(type, message);\n+    }\n+    \n     public void broadcastStringMessage(int type, String message) {\n-            broadcastMessage(MaplePacketCreator.serverNotice(type, message));\n+        broadcastMessage(MaplePacketCreator.serverNotice(type, message));\n     }\n \n     public void broadcastMessage(final byte[] packet) {\n@@ -2888,7 +2912,7 @@ public void toggleHiddenNPC(int id) {\n             objectRLock.unlock();\n         }\n     }\n-\n+    \n     public void setMobInterval(short interval) {\n         this.mobInterval = interval;\n     }"}, {"sha": "c5b517484c3cfd9e66f65509914d6e999877f805", "filename": "src/server/quest/actions/ItemAction.java", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/src/server/quest/actions/ItemAction.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/src/server/quest/actions/ItemAction.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/quest/actions/ItemAction.java?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -42,7 +42,8 @@\n \n /**\n  *\n- * @author Tyler (Twdtwd), Ronan\n+ * @author Tyler (Twdtwd)\n+ * @author Ronan\n  */\n public class ItemAction extends MapleQuestAction {\n \tList<ItemData> items = new ArrayList<>();"}, {"sha": "3f8e2b88ea3916a5adb08b60fdcc623f31175296", "filename": "src/tools/MaplePacketCreator.java", "status": "modified", "additions": 15, "deletions": 5, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/src/tools/MaplePacketCreator.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/src/tools/MaplePacketCreator.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/tools/MaplePacketCreator.java?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -949,7 +949,7 @@ private static void addMonsterBookInfo(final MaplePacketLittleEndianWriter mplew\n         /**\n          * Gets an empty stat update.\n          *\n-         * @return The empy stat update packet.\n+         * @return The empty stat update packet.\n          */\n         public static byte[] enableActions() {\n                 return updatePlayerStats(EMPTY_STATUPDATE, true, null);\n@@ -1325,7 +1325,7 @@ public int compare(Pair<MapleStat, Integer> o1, Pair<MapleStat, Integer> o2) {\n                 mplew.writeBool(MiniMap);\n                 return mplew.getPacket();\n         }\n-\n+        \n         /**\n          * Gets a spawn monster packet.\n          *\n@@ -2076,7 +2076,7 @@ private static void addAttackBody(LittleEndianWriter lew, MapleCharacter chr, in\n                         List<Integer> onedList = damage.get(oned);\n                         if (onedList != null) {\n                                 lew.writeInt(oned.intValue());\n-                                lew.write(0xFF);\n+                                lew.write(0x0);\n                                 if (skill == 4211006) {\n                                         lew.write(onedList.size());\n                                 }\n@@ -5676,11 +5676,21 @@ public static void addPetInfo(final MaplePacketLittleEndianWriter mplew, MaplePe\n                 return mplew.getPacket();\n         }\n \n-        public static byte[] removeNPC(int oid) { //Make npc's invisible\n+        public static byte[] removeNPC(int oid) {\n                 final MaplePacketLittleEndianWriter mplew = new MaplePacketLittleEndianWriter();\n+                mplew.writeShort(SendOpcode.REMOVE_NPC.getValue());\n+                mplew.writeInt(oid);\n+                \n+                return mplew.getPacket();\n+        }\n+        \n+        public static byte[] removeNPCController(int objectid) {\n+                MaplePacketLittleEndianWriter mplew = new MaplePacketLittleEndianWriter();\n+\n                 mplew.writeShort(SendOpcode.SPAWN_NPC_REQUEST_CONTROLLER.getValue());\n                 mplew.write(0);\n-                mplew.writeInt(oid);\n+                mplew.writeInt(objectid);\n+\n                 return mplew.getPacket();\n         }\n "}, {"sha": "6718c2dda17b1df677655eb5f5bce896381e3b03", "filename": "wz/Item.wz/Etc/0400.img.xml", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/wz/Item.wz/Etc/0400.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/wz/Item.wz/Etc/0400.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Item.wz/Etc/0400.img.xml?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -7126,8 +7126,7 @@\n         <int name=\"z\" value=\"0\"/>\n       </canvas>\n       <int name=\"price\" value=\"1\"/>\n-      <int name=\"quest\" value=\"1\"/>\n-      <int name=\"tradeBlock\" value=\"1\"/>\n+      <int name=\"only\" value=\"1\"/>\n     </imgdir>\n   </imgdir>\n   <imgdir name=\"04001095\">"}, {"sha": "9d7cd4f4b82741ec549e29c144e3aed83a25d158", "filename": "wz/Reactor.wz/2406000.img.xml", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/wz/Reactor.wz/2406000.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/wz/Reactor.wz/2406000.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Reactor.wz/2406000.img.xml?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -2,6 +2,7 @@\n <imgdir name=\"2406000.img\">\n   <imgdir name=\"info\">\n     <string name=\"name\" value=\"\ub098\uc778\uc2a4\ud53c\ub9bf\uc758\ub465\uc9c0\"/>\n+    <int name=\"activateByTouch\" value=\"1\"/>\n   </imgdir>\n   <imgdir name=\"0\">\n     <canvas name=\"0\" width=\"115\" height=\"45\">\n@@ -45,6 +46,12 @@\n         <int name=\"delay\" value=\"120\"/>\n       </canvas>\n     </imgdir>\n+    <imgdir name=\"event\">\n+      <imgdir name=\"0\">\n+        <int name=\"type\" value=\"6\"/>\n+        <int name=\"state\" value=\"1\"/>\n+      </imgdir>\n+    </imgdir>\n   </imgdir>\n   <imgdir name=\"1\">\n     <canvas name=\"0\" width=\"122\" height=\"137\">"}, {"sha": "44426c5d855dbaea8725436273aa67eb6d1ff95c", "filename": "wz/String.wz/Npc.img.xml", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/c09bc02c85071c7a832974f5606403398af590e5/wz/String.wz/Npc.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/c09bc02c85071c7a832974f5606403398af590e5/wz/String.wz/Npc.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/String.wz/Npc.img.xml?ref=c09bc02c85071c7a832974f5606403398af590e5", "patch": "@@ -3311,7 +3311,7 @@\n     <string name=\"d1\" value=\"How did you find me here...?\"/>\n   </imgdir>\n   <imgdir name=\"2081008\">\n-    <string name=\"name\" value=\"Nein Spirit&apos;s Baby Dragon\"/>\n+    <string name=\"name\" value=\"Nine Spirit&apos;s Baby Dragon\"/>\n     <string name=\"d0\" value=\"Kyuuu\"/>\n     <string name=\"d1\" value=\"Kyuuu...\"/>\n   </imgdir>\n@@ -6565,9 +6565,9 @@\n   </imgdir>\n   <imgdir name=\"9209000\">\n     <string name=\"name\" value=\"Abdula\"/>\n-    <string name=\"func\" value=\"Merchant Intermediary\"/>\n-    <string name=\"n0\" value=\"Ahem, if you have things to sell... let&apos;s see them... \"/>\n-    <string name=\"n1\" value=\"I welcome all fellow merchants!\"/>\n+    <string name=\"func\" value=\"Upgrade Book Announcer\"/>\n+    <string name=\"n0\" value=\"For those that already reached their prime and want more, talk to me!\"/>\n+    <string name=\"n1\" value=\"Are you in need for some upgrade books? Look no further, maybe I have your answer.\"/>\n   </imgdir>\n   <imgdir name=\"9209001\">\n     <string name=\"name\" value=\"Mimi\"/>"}]}]},
