{"fetchDate": "2019-12-19", "content": [{"sha": "134c34fa5867580b2d33a7221118315993d5ff65", "node_id": "MDY6Q29tbWl0NDUwODIwMjM6MTM0YzM0ZmE1ODY3NTgwYjJkMzNhNzIyMTExODMxNTk5M2Q1ZmY2NQ==", "commit": {"author": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2018-04-18T16:35:42Z"}, "committer": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2018-04-18T16:35:42Z"}, "message": "Autoassigner patch\n\nFixed autoassigner handler not reading the client's packet properly when using USE_SERVER_AUTOASSIGNER = false.\nUpdated questid for some drops on the DB.\nAdded scripts for some quests on the Aran's Full Swing skill questline.", "tree": {"sha": "e77a9ea5c0e22680668660d92a04f7d666c67527", "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/trees/e77a9ea5c0e22680668660d92a04f7d666c67527"}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/commits/134c34fa5867580b2d33a7221118315993d5ff65", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/134c34fa5867580b2d33a7221118315993d5ff65", "html_url": "https://github.com/ronancpl/HeavenMS/commit/134c34fa5867580b2d33a7221118315993d5ff65", "comments_url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/134c34fa5867580b2d33a7221118315993d5ff65/comments", "author": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "html_url": "https://github.com/ronancpl/HeavenMS/commit/6a63f9d95e68f54a30144acb2e99924dc3f2ce24"}], "stats": {"total": 326, "additions": 256, "deletions": 70}, "files": [{"sha": "525979118563417c4a8f2c0aa97c4b7bce70246f", "filename": ".gitignore", "status": "modified", "additions": 16, "deletions": 16, "changes": 32, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/134c34fa5867580b2d33a7221118315993d5ff65/.gitignore", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/134c34fa5867580b2d33a7221118315993d5ff65/.gitignore", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/.gitignore?ref=134c34fa5867580b2d33a7221118315993d5ff65", "patch": "@@ -5,66 +5,66 @@\n \n /build/\n /dist/\n-/nbproject/private/\n+/nbproject/\n \n /tools/MapleArrowFetcher/build/\n /tools/MapleArrowFetcher/dist/\n-/tools/MapleArrowFetcher/nbproject/private/\n+/tools/MapleArrowFetcher/nbproject/\n \n-/tools/MapleBossHpBarFetcher/nbproject/private/\n+/tools/MapleBossHpBarFetcher/nbproject/\n /tools/MapleBossHpBarFetcher/build/\n /tools/MapleBossHpBarFetcher/dist/\n \n-/tools/MapleCashDropFetcher/nbproject/private/\n+/tools/MapleCashDropFetcher/nbproject/\n /tools/MapleCashDropFetcher/build/\n /tools/MapleCashDropFetcher/dist/\n \n /tools/MapleCouponInstaller/build/\n /tools/MapleCouponInstaller/dist/\n-/tools/MapleCouponInstaller/nbproject/private/\n+/tools/MapleCouponInstaller/nbproject/\n \n /tools/MapleIdRetriever/build/\n /tools/MapleIdRetriever/dist/\n-/tools/MapleIdRetriever/nbproject/private/\n+/tools/MapleIdRetriever/nbproject/\n \n /tools/MapleInvalidItemIdFetcher/build/\n /tools/MapleInvalidItemIdFetcher/dist/\n-/tools/MapleInvalidItemIdFetcher/nbproject/private/\n+/tools/MapleInvalidItemIdFetcher/nbproject/\n \n /tools/MapleMapInfoRetriever/build/\n /tools/MapleMapInfoRetriever/dist/\n-/tools/MapleMapInfoRetriever/nbproject/private/\n+/tools/MapleMapInfoRetriever/nbproject/\n \n /tools/MapleMesoFetcher/build/\n /tools/MapleMesoFetcher/dist/\n-/tools/MapleMesoFetcher/nbproject/private/\n+/tools/MapleMesoFetcher/nbproject/\n \n /tools/MapleMobBookIndexer/build/\n /tools/MapleMobBookIndexer/dist/\n-/tools/MapleMobBookIndexer/nbproject/private/\n+/tools/MapleMobBookIndexer/nbproject/\n \n /tools/MapleMobBookUpdate/build/\n /tools/MapleMobBookUpdate/dist/\n-/tools/MapleMobBookUpdate/nbproject/private/\n+/tools/MapleMobBookUpdate/nbproject/\n \n-/tools/MapleQuestItemCountFetcher/nbproject/private/\n+/tools/MapleQuestItemCountFetcher/nbproject/\n /tools/MapleQuestItemCountFetcher/build/\n /tools/MapleQuestItemCountFetcher/dist/\n \n /tools/MapleQuestItemFetcher/build/\n /tools/MapleQuestItemFetcher/dist/\n-/tools/MapleQuestItemFetcher/nbproject/private/\n+/tools/MapleQuestItemFetcher/nbproject/\n \n /tools/MapleQuestMesoFetcher/build/\n /tools/MapleQuestMesoFetcher/dist/\n-/tools/MapleQuestMesoFetcher/nbproject/private/\n+/tools/MapleQuestMesoFetcher/nbproject/\n \n /tools/MapleSkillMakerFetcher/build/\n /tools/MapleSkillMakerFetcher/dist/\n-/tools/MapleSkillMakerFetcher/nbproject/private/\n+/tools/MapleSkillMakerFetcher/nbproject/\n \n /tools/MapleSkillMakerReagentIndexer/build/\n /tools/MapleSkillMakerReagentIndexer/dist/\n-/tools/MapleSkillMakerReagentIndexer/nbproject/private/\n+/tools/MapleSkillMakerReagentIndexer/nbproject/\n \n /out"}, {"sha": "c1f115882d66ce9846a59b8e2d9bf4dd9e2b92c8", "filename": "docs/mychanges_ptbr.txt", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/134c34fa5867580b2d33a7221118315993d5ff65/docs/mychanges_ptbr.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/134c34fa5867580b2d33a7221118315993d5ff65/docs/mychanges_ptbr.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/docs/mychanges_ptbr.txt?ref=134c34fa5867580b2d33a7221118315993d5ff65", "patch": "@@ -863,7 +863,9 @@ Implementado questline do Dyle.\n Corrigido poss\u00edvel exploit com sistema de quests, onde jogador podia come\u00e7ar e completar quaisquer quests livremente.\n Nova ferramenta: MapleCashDropFetcher. Aplica\u00e7\u00e3o busca por drop data de cash na DB e reporta.\n \n-13 Mer\u00e7o 2018,\n+13 - 14 Mar\u00e7o 2018,\n Adicionado feature de an\u00fancio de mudan\u00e7a de classe.\n Adicionado drops faltando da questline Puppeteer de Aran.\n-Movimenta\u00e7\u00e3o de GM rank para alguns comandos.\n\\ No newline at end of file\n+Movimenta\u00e7\u00e3o de GM rank para alguns comandos.\n+Corrigido autoassigner inesperadamente desconectando jogadores, quando o autoassigner do cliente est\u00e1 sendo utilizado.\n+Adicionado scripts para a questline de Full Swing de Aran.\n\\ No newline at end of file"}, {"sha": "44e168326f748c6f172cbe8f53a847dd71fbeeb9", "filename": "scripts/npc/commands.js", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/134c34fa5867580b2d33a7221118315993d5ff65/scripts/npc/commands.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/134c34fa5867580b2d33a7221118315993d5ff65/scripts/npc/commands.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/commands.js?ref=134c34fa5867580b2d33a7221118315993d5ff65", "patch": "@@ -8,6 +8,9 @@\n \n var status;\n \n+var common_heading = \"@\";\n+var staff_heading = \"!\";\n+\n var comm_lv6 = [];\n var desc_lv6 = [];\n \n@@ -220,9 +223,9 @@ function writeSolaxiaCommandsLv0() {    //Common\n         addCommand(\"leaveevent\", \"\");\n         addCommand(\"ranks\", \"\");\n         addCommand(\"str\", \"\");\n+        addCommand(\"dex\", \"\");\n         addCommand(\"int\", \"\");\n         addCommand(\"luk\", \"\");\n-        addCommand(\"dex\", \"\");\n }\n \n function writeSolaxiaCommands() {\n@@ -262,7 +265,7 @@ function action(mode, type, selection) {\n \n                         cm.sendSimple(sendStr);\n                 } else if(status == 1) {\n-                        var lvComm, lvDesc;\n+                        var lvComm, lvDesc, lvHead = (cm.getPlayer().gmLevel() < 2) ? common_heading : staff_heading;\n \n                         if(selection == 0) {\n                                 lvComm = comm_lv0;\n@@ -289,7 +292,7 @@ function action(mode, type, selection) {\n \n                         var sendStr = \"The following commands are available for #b\" + levels[selection] + \"#k:\\r\\n\\r\\n\";\n                         for(var i = 0; i < lvComm.length; i++) {\n-                            sendStr += \"  #L\" + i + \"# \" + lvComm[i] + \" - \" + lvDesc[i];\n+                            sendStr += \"  #L\" + i + \"# \" + lvHead + lvComm[i] + \" - \" + lvDesc[i];\n                             sendStr += \"#l\\r\\n\";\n                         }\n "}, {"sha": "d40883b126a970c8fc0ec269a089664856dcfccf", "filename": "scripts/quest/21750.js", "status": "added", "additions": 44, "deletions": 0, "changes": 44, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/134c34fa5867580b2d33a7221118315993d5ff65/scripts/quest/21750.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/134c34fa5867580b2d33a7221118315993d5ff65/scripts/quest/21750.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21750.js?ref=134c34fa5867580b2d33a7221118315993d5ff65", "patch": "@@ -0,0 +1,44 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+var status = -1;\n+\n+function end(mode, type, selection) {\n+    if (mode == -1) {\n+        qm.dispose();\n+    } else {\n+        if(mode == 0 && type > 0) {\n+            qm.dispose();\n+            return;\n+        }\n+        \n+        if (mode == 1)\n+            status++;\n+        else\n+            status--;\n+        \n+        if (status == 0) {\n+            qm.sendNext(\"Aran, you're finally back!!! How you've been doing? Where did you go for so long? We have so much to catch up...\");\n+            qm.forceCompleteQuest();\n+            \n+            qm.dispose();\n+        }\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "0d90e5b00c02acc1416072b18a2d436475039924", "filename": "scripts/quest/21753.js", "status": "added", "additions": 46, "deletions": 0, "changes": 46, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/134c34fa5867580b2d33a7221118315993d5ff65/scripts/quest/21753.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/134c34fa5867580b2d33a7221118315993d5ff65/scripts/quest/21753.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21753.js?ref=134c34fa5867580b2d33a7221118315993d5ff65", "patch": "@@ -0,0 +1,46 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+var status = -1;\n+\n+function start(mode, type, selection) {\n+    if (mode == -1) {\n+        qm.dispose();\n+    } else {\n+        if(mode == 0 && type > 0) {\n+            qm.dispose();\n+            return;\n+        }\n+        \n+        if (mode == 1)\n+            status++;\n+        else\n+            status--;\n+        \n+        if (status == 0) {\n+            qm.sendNext(\"Aran, I've discovered some disturbing news... You said you've come from the eastern forest section, right? We traced and studied the magic being used to support the portal over there. It turns out that's of a #rtemporal#k-type. The garments you're using... They were never seen around before. That must mean, #ryou must have come from the future#k.\");\n+        } else if (status == 1) {\n+            qm.sendNext(\"Now about the problem: the Seal Stone that seems to have been missing in your timeline... It is a powerful artifact, that prevents the army of the #rBlack Mage#k from laying siege on our world. If that stone goes away, nothing more can prevent him. As this is a matter of great importance, find the #rself of mine#k from the future. I'm actually a #rfairy#k with a great life expectancy, I must be alive even on your timeline. Got it, #rfetch the me from the future#k!\");\n+            qm.forceStartQuest();\n+            \n+            qm.dispose();\n+        }\n+    }\n+}"}, {"sha": "d804957a8cf9a0e0330bc324cf24251261924446", "filename": "scripts/quest/21754.js", "status": "added", "additions": 52, "deletions": 0, "changes": 52, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/134c34fa5867580b2d33a7221118315993d5ff65/scripts/quest/21754.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/134c34fa5867580b2d33a7221118315993d5ff65/scripts/quest/21754.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21754.js?ref=134c34fa5867580b2d33a7221118315993d5ff65", "patch": "@@ -0,0 +1,52 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+var status = -1;\n+\n+function start(mode, type, selection) {\n+    if (mode == -1) {\n+        qm.dispose();\n+    } else {\n+        if(mode == 0 && type > 0) {\n+            qm.dispose();\n+            return;\n+        }\n+        \n+        if (mode == 1)\n+            status++;\n+        else\n+            status--;\n+        \n+        if (status == 0) {\n+            if(!qm.canHold(4032328, 1)) {\n+                qm.sendNext(\"Hm, I will need you to prepare a ETC slot for a letter I need to give you.\");\n+                qm.dispose();\n+                return;\n+            }\n+            \n+            qm.sendNext(\"Here, take this. Send it to #r#p1002104##k, it contains a relevant matter for protecting this world. Please comply to this request.\");\n+        } else if (status == 1) {\n+            qm.forceStartQuest();\n+            \n+            qm.gainItem(4032328, 1);\n+            qm.dispose();\n+        }\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "dbc7df18766a841ba2c4d5b84c09d67db80804b0", "filename": "scripts/quest/21757.js", "status": "added", "additions": 46, "deletions": 0, "changes": 46, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/134c34fa5867580b2d33a7221118315993d5ff65/scripts/quest/21757.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/134c34fa5867580b2d33a7221118315993d5ff65/scripts/quest/21757.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21757.js?ref=134c34fa5867580b2d33a7221118315993d5ff65", "patch": "@@ -0,0 +1,46 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+var status = -1;\n+\n+function end(mode, type, selection) {\n+    if (mode == -1) {\n+        qm.dispose();\n+    } else {\n+        if(mode == 0 && type > 0) {\n+            qm.dispose();\n+            return;\n+        }\n+        \n+        if (mode == 1)\n+            status++;\n+        else\n+            status--;\n+        \n+        if (status == 0) {\n+            qm.sendNext(\"Oh, a letter for the #rempress#k? From the #bheroes#k?!\");\n+            qm.gainExp(1000 * qm.getPlayer().getExpRate());\n+            qm.gainItem(4032330, -1);\n+            qm.forceCompleteQuest();\n+            \n+            qm.dispose();\n+        }\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "52a9bee1e1c291ce4cb0143f44dc394806ea9493", "filename": "scripts/quest/21766.js", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/134c34fa5867580b2d33a7221118315993d5ff65/scripts/quest/21766.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/134c34fa5867580b2d33a7221118315993d5ff65/scripts/quest/21766.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21766.js?ref=134c34fa5867580b2d33a7221118315993d5ff65", "patch": "@@ -8,11 +8,12 @@ function start(mode, type, selection) {\n \t\tqm.sendNext(\"He used to scowl and whine about his arthritis until just recently, but he''s suddenly become all happy and smiley!!\");\n \t} else if (status == 2) {\n \t\tqm.sendNext(\"I have a feeling there is a secret behind that wooden box. Could you stealthily look into the wooden box next to #p20000#?\");\n+\t} else if (status == 3) {\n+\t\tqm.sendNext(\"You know where #p20000# is, right? Hes to the right. Just keep going until you see where Vikin is, then head down past the hanging shark and octopus, and you''ll see John. The box should be right next to him.\");\n \t} else {\n-\t\tqm.sendNext(\"You know where #p20000# is, right? He''s to the right. Just keep going until you see where Vikin is, then head down past the hanging shark and octopus, and you''ll see John. The box should be right next to him.\");\n-\t\tqm.forceStartQuest();\n+                qm.forceStartQuest();\n \t\tqm.dispose();\n-\t}\n+        }\n }\n \n function end(mode, type, selection) {"}, {"sha": "5d8d774512b2fe68267c54dfe39b4b2ac6f5409f", "filename": "scripts/quest/21767.js", "status": "modified", "additions": 9, "deletions": 6, "changes": 15, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/134c34fa5867580b2d33a7221118315993d5ff65/scripts/quest/21767.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/134c34fa5867580b2d33a7221118315993d5ff65/scripts/quest/21767.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21767.js?ref=134c34fa5867580b2d33a7221118315993d5ff65", "patch": "@@ -3,14 +3,17 @@ var status = -1;\n function start(mode, type, selection) {\n \tstatus++;\n \tif (status == 0) {\n+                if(qm.haveItem(4032423, 1)) {\n+                        qm.forceStartQuest();\n+                        qm.dispose();\n+                        return;\n+                }\n+            \n \t\tqm.sendNext(\"#bHm, there's a medicinal substance in the box. What could this be? You better take this to John and ask him what it is.#k\");\n \t} else {\n-\t\tqm.gainItem(4032423,1);\n-\t\tqm.forceCompleteQuest();\n+                qm.gainItem(4032423,1);\n+\t\t\n+                qm.forceStartQuest();\n \t\tqm.dispose();\n \t}\n-}\n-\n-function end(mode, type, selection) {\n-\tqm.dispose();\n }\n\\ No newline at end of file"}, {"sha": "695670b3ab0209896771aa37beb1483db1c6f86a", "filename": "sql/db_database.sql", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/134c34fa5867580b2d33a7221118315993d5ff65/sql/db_database.sql", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/134c34fa5867580b2d33a7221118315993d5ff65/sql/db_database.sql", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/sql/db_database.sql?ref=134c34fa5867580b2d33a7221118315993d5ff65", "patch": "@@ -11429,11 +11429,11 @@ INSERT IGNORE INTO `temp_data` (`id`, `dropperid`, `itemid`, `minimum_quantity`,\n (11210, 9001002, 4031059, 1, 1, 0, 999999),\n (11211, 9001003, 4031059, 1, 1, 0, 999999),\n (11212, 9001004, 4031059, 1, 1, 0, 999999),\n-(11213, 9001005, 4031857, 1, 1, 0, 300000),\n+(11213, 9001005, 4031857, 1, 1, 2192, 300000),\n (11214, 9001012, 4032311, 1, 1, 0, 300000),\n (11215, 9001012, 4032311, 1, 1, 0, 300000),\n (11216, 9001013, 4032312, 1, 1, 0, 999999),\n-(11217, 9001013, 4032339, 1, 1, 0, 999999),\n+(11217, 9001013, 4032339, 1, 1, 21303, 999999),\n (11219, 4230113, 1452016, 1, 1, 0, 700),\n (11220, 4230103, 1452016, 1, 1, 0, 700),\n (11221, 2230102, 1452016, 1, 1, 0, 700),\n@@ -11628,7 +11628,7 @@ INSERT IGNORE INTO `temp_data` (`id`, `dropperid`, `itemid`, `minimum_quantity`,\n (11628, 6220000, 1472055, 1, 1, 0, 1250),\n (11627, 5120500, 1472055, 1, 1, 0, 750),\n (11626, 5120000, 1472055, 1, 1, 0, 750),\n-(11625, 9001006, 4031856, 1, 1, 0, 400000),\n+(11625, 9001006, 4031856, 1, 1, 2191, 400000),\n (11624, 8190003, 4031461, 1, 1, 6169, 1000),\n (11623, 9400218, 4001106, 25, 50, 0, 999999),\n (11622, 9400217, 4001106, 1, 3, 0, 999999),\n@@ -16584,8 +16584,8 @@ INSERT INTO `reactordrops` (`reactordropid`, `reactorid`, `itemid`, `chance`, `q\n (37, 2212002, 2000002, 3, -1),\n (38, 2212001, 4031141, 2, -1),\n (39, 2212002, 4031143, 2, -1),\n-(40, 2212003, 4031107, 2, -1),\n-(41, 2212004, 4031116, 2, -1),\n+(40, 2212003, 4031107, 2, 3409),\n+(41, 2212004, 4031116, 2, 3419),\n (42, 2212004, 2000001, 2, -1),\n (43, 2212005, 4031136, 8, 3439),\n (44, 2222000, 4031231, 2, 3620),\n@@ -16669,7 +16669,7 @@ INSERT INTO `reactordrops` (`reactordropid`, `reactorid`, `itemid`, `chance`, `q\n (122, 2201001, 4001022, 1, -1),\n (123, 1402000, 4032309, 1, 21013),\n (124, 1402000, 4032310, 1, 21013),\n-(125, 1022001, 4032319, 7, -1),\n+(125, 1022001, 4032319, 7, 21723),\n (126, 1022002, 4001340, 1, 28167),\n (127, 1202000, 4001366, 1, 28194),\n (128, 1202003, 4001346, 3, 28225),"}, {"sha": "2237a67dc095ebb13a632417e7808df166ef5917", "filename": "sql/db_drops.sql", "status": "modified", "additions": 13, "deletions": 10, "changes": 23, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/134c34fa5867580b2d33a7221118315993d5ff65/sql/db_drops.sql", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/134c34fa5867580b2d33a7221118315993d5ff65/sql/db_drops.sql", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/sql/db_drops.sql?ref=134c34fa5867580b2d33a7221118315993d5ff65", "patch": "@@ -2850,9 +2850,9 @@ USE `heavenms`;\n (3110100, 4000032, 1, 1, 0, 200000), \n (9300234, 4000032, 1, 1, 0, 200000),\n (9500108, 4000032, 1, 1, 0, 200000), \n-(3110100, 4031164, 1, 1, 0, 7000), \n-(9300234, 4031164, 1, 1, 0, 7000), \n-(9500108, 4031164, 1, 1, 0, 7000), \n+(3110100, 4031164, 1, 1, 2084, 7000), \n+(9300234, 4031164, 1, 1, 2084, 7000), \n+(9500108, 4031164, 1, 1, 2084, 7000), \n (3110100, 4031405, 1, 1, 0, 7000), \n (9300234, 4031405, 1, 1, 0, 7000), \n (9500108, 4031405, 1, 1, 0, 7000), \n@@ -9148,8 +9148,8 @@ USE `heavenms`;\n (9420530, 1002212, 1, 1, 0, 700), \n (9420530, 1472013, 1, 1, 0, 700), \n (9420530, 1051006, 1, 1, 0, 700), \n-(5130107, 4031218, 1, 1, 0, 7000), \n-(9400504, 4031218, 1, 1, 0, 7000), \n+(5130107, 4031218, 1, 1, 3071, 7000), \n+(9400504, 4031218, 1, 1, 3071, 7000), \n (5130107, 2000002, 1, 1, 0, 40000), \n (9400504, 2000002, 1, 1, 0, 40000), \n (5130107, 2000003, 1, 1, 0, 40000), \n@@ -9202,7 +9202,7 @@ USE `heavenms`;\n (9400504, 1060083, 1, 1, 0, 700), \n (5130107, 1482008, 1, 1, 0, 700), \n (9400504, 1482008, 1, 1, 0, 700), \n-(5130108, 4031218, 1, 1, 0, 7000), \n+(5130108, 4031218, 1, 1, 3071, 7000), \n (5130108, 2000002, 1, 1, 0, 40000), \n (5130108, 2000003, 1, 1, 0, 40000),\n (5130108, 2000004, 1, 1, 0, 40000), \n@@ -11082,8 +11082,8 @@ USE `heavenms`;\n (9420534, 1061102, 1, 1, 0, 700), \n (6230300, 4000129, 1, 1, 0, 200000), \n (9300317, 4000129, 1, 1, 0, 200000), \n-(6230300, 4031189, 1, 1, 0, 7000), \n-(9300317, 4031189, 1, 1, 0, 7000), \n+(6230300, 4031189, 1, 1, 3448, 7000), \n+(9300317, 4031189, 1, 1, 3448, 7000), \n (6230300, 2000002, 1, 1, 0, 40000), \n (9300317, 2000002, 1, 4, 0, 40000), \n (6230300, 2043701, 1, 1, 0, 750), \n@@ -19239,7 +19239,7 @@ USE `heavenms`;\n (9400578, 1032013, 1, 1, 0, 1200),\n (9400578, 1372009, 1, 1, 0, 1200),\n (9400578, 1372009, 1, 1, 0, 1200),\n-(9300011, 4031130, 1, 1, 0, 10000),\n+(9300011, 4031130, 1, 1, 3238, 10000),\n (7160000, 2385015, 1, 1, 0, 10000),\n (3230306, 2022355, 1, 1, 3248, 100000),\n (4230113, 2022354, 1, 1, 3248, 100000),\n@@ -20185,7 +20185,10 @@ USE `heavenms`;\n (1110130, 4032317, 1, 1, 21717, 40000),\n (1110130, 4032318, 1, 1, 21718, 40000),\n (1140130, 4032319, 1, 1, 21723, 100000),\n-(2230131, 4032321, 1, 1, 21727, 20000);\n+(2230131, 4032321, 1, 1, 21727, 20000),\n+(5250002, 4032326, 1, 1, 21752, 100000),\n+(2110301, 4032401, 1, 1, 2261, 100000),\n+(2110300, 4032402, 1, 1, 2263, 100000);\n \n # (dropperid, itemid, minqty, maxqty, questid, chance)\n "}, {"sha": "599eb6367256d81b58460a729872fce5bf9df206", "filename": "src/client/command/Commands.java", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/134c34fa5867580b2d33a7221118315993d5ff65/src/client/command/Commands.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/134c34fa5867580b2d33a7221118315993d5ff65/src/client/command/Commands.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/command/Commands.java?ref=134c34fa5867580b2d33a7221118315993d5ff65", "patch": "@@ -594,9 +594,9 @@ public static boolean executeHeavenMsCommandLv0(Channel cserv, Server srv, Maple\n                     \n                 // stat autoassigning command credited to HeliosMS dev team\n                 case \"str\":\n+                case \"dex\":\n                 case \"int\":\n                 case \"luk\":\n-                case \"dex\":\n                         int amount = (sub.length > 1) ? Integer.parseInt(sub[1]) : player.getRemainingAp();\n                         boolean str = sub[0].equalsIgnoreCase(\"str\");\n                         boolean Int = sub[0].equalsIgnoreCase(\"int\");\n@@ -764,7 +764,7 @@ public static boolean executeHeavenMsCommandLv1(Channel cserv, Server srv, Maple\n                         \n                 case \"goto\":\n                         if (sub.length < 2){\n-\t\t\t\tplayer.yellowMessage(\"Syntax: !goto <map name>\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: @goto <map name>\");\n \t\t\t\tbreak;\n \t\t\t}\n                     "}, {"sha": "c9b1082f6f9cf30784389befb1c3c558efad478f", "filename": "src/constants/ServerConstants.java", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/134c34fa5867580b2d33a7221118315993d5ff65/src/constants/ServerConstants.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/134c34fa5867580b2d33a7221118315993d5ff65/src/constants/ServerConstants.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/constants/ServerConstants.java?ref=134c34fa5867580b2d33a7221118315993d5ff65", "patch": "@@ -57,7 +57,7 @@\n     public static final boolean USE_PARTY_FOR_STARTERS = true;      //Players level 10 or below can create/invite other players on the given level range.\n     public static final boolean USE_AUTOBAN = false;                //Commands the server to detect infractors automatically.\n     public static final boolean USE_AUTOSAVE = true;                //Enables server autosaving feature (saves characters to DB each 1 hour).\n-    public static final boolean USE_SERVER_AUTOASSIGNER = true;     //Server-builtin autoassigner, uses algorithm based on distributing AP accordingly with required secondary stat on equipments.\n+    public static final boolean USE_SERVER_AUTOASSIGNER = true;     //HeavenMS-builtin autoassigner, uses algorithm based on distributing AP accordingly with required secondary stat on equipments.\n     public static final boolean USE_REFRESH_RANK_MOVE = true;\n     public static final boolean USE_ENFORCE_HPMP_SWAP = false;      //Forces players to reuse stats (via AP Resetting) located on HP/MP pool only inside the HP/MP stats.\n     public static final boolean USE_ENFORCE_MOB_LEVEL_RANGE = true; //Players N levels below the killed mob will gain no experience from defeating it."}, {"sha": "bb1960543a3f4b8df2b09ad22d3a8633c19196a5", "filename": "src/net/server/channel/handlers/AutoAssignHandler.java", "status": "modified", "additions": 7, "deletions": 9, "changes": 16, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/134c34fa5867580b2d33a7221118315993d5ff65/src/net/server/channel/handlers/AutoAssignHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/134c34fa5867580b2d33a7221118315993d5ff65/src/net/server/channel/handlers/AutoAssignHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/AutoAssignHandler.java?ref=134c34fa5867580b2d33a7221118315993d5ff65", "patch": "@@ -52,19 +52,18 @@ private static int getNthHighestStat(List<Short> statList, short rank) {    // r\n     @Override\n     public void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {\n         MapleCharacter chr = c.getPlayer();\n+        if (chr.getRemainingAp() < 1) return;\n+        \n         int[] statGain = new int[4];\n         int[] statEqpd = new int[4];\n-        \n         statGain[0] = 0; statGain[1] = 0; statGain[2] = 0; statGain[3] = 0;\n         \n         slea.skip(8);\n-        byte opt = slea.readByte();     // useful for pirate autoassigning\n-        \n-        if (chr.getRemainingAp() < 1) return;\n         \n         if(ServerConstants.USE_SERVER_AUTOASSIGNER) {\n             // --------- Ronan Lana's AUTOASSIGNER ---------\n             // This method excels for assigning APs in such a way to cover all equipments AP requirements.\n+            byte opt = slea.readByte();     // useful for pirate autoassigning\n             \n             int str = 0, dex = 0, luk = 0, int_ = 0;\n             List<Short> eqpStrList = new ArrayList<>();\n@@ -324,16 +323,13 @@ public void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {\n             //----------------------------------------------------------------------------------------\n             \n             c.announce(MaplePacketCreator.serverNotice(1, \"Better AP applications detected:\\r\\nSTR: +\" + statGain[0] + \"\\r\\nDEX: +\" + statGain[1] + \"\\r\\nINT: +\" + statGain[3] + \"\\r\\nLUK: +\" + statGain[2]));\n-        }\n-        else {\n-            int total = 0;\n-            int extras = 0;\n+        } else {\n             if(slea.available() < 16) {\n                 AutobanFactory.PACKET_EDIT.alert(chr, \"Didn't send full packet for Auto Assign.\");\n                 c.disconnect(false, false);\n                 return;\n             }\n-            \n+\n             MapleInventory iv = chr.getInventory(MapleInventoryType.EQUIPPED);\n             Collection<Item> equippedC = iv.list();\n             for (Item item : equippedC) {   //selecting the biggest AP value of each stat from each equipped item.\n@@ -345,6 +341,8 @@ public void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {\n                 statEqpd[3] += nEquip.getInt();\n             }\n             \n+            int total = 0;\n+            int extras = 0;\n             for (int i = 0; i < 2; i++) {\n                 int type = slea.readInt();\n                 int tempVal = slea.readInt();"}, {"sha": "995419f46b7490214c3a0e7a9290d061838e6a97", "filename": "wz/Quest.wz/Check.img.xml", "status": "modified", "additions": 0, "deletions": 12, "changes": 12, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/134c34fa5867580b2d33a7221118315993d5ff65/wz/Quest.wz/Check.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/134c34fa5867580b2d33a7221118315993d5ff65/wz/Quest.wz/Check.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Quest.wz/Check.img.xml?ref=134c34fa5867580b2d33a7221118315993d5ff65", "patch": "@@ -22876,12 +22876,6 @@\n       <int name=\"npc\" value=\"2131000\"/>\n       <int name=\"lvmin\" value=\"63\"/>\n       <string name=\"startscript\" value=\"q21753s\"/>\n-      <int name=\"infoNumber\" value=\"21764\"/>\n-      <imgdir name=\"infoex\">\n-        <imgdir name=\"0\">\n-          <string name=\"value\" value=\"1\"/>\n-        </imgdir>\n-      </imgdir>\n       <imgdir name=\"quest\">\n         <imgdir name=\"0\">\n           <int name=\"id\" value=\"21751\"/>\n@@ -22903,12 +22897,6 @@\n       <int name=\"npc\" value=\"1012100\"/>\n       <int name=\"lvmin\" value=\"63\"/>\n       <string name=\"startscript\" value=\"q21754s\"/>\n-      <int name=\"infoNumber\" value=\"21765\"/>\n-      <imgdir name=\"infoex\">\n-        <imgdir name=\"0\">\n-          <string name=\"value\" value=\"2\"/>\n-        </imgdir>\n-      </imgdir>\n       <imgdir name=\"quest\">\n         <imgdir name=\"0\">\n           <int name=\"id\" value=\"21753\"/>"}]}]},
