{"fetchDate": "2019-12-19", "content": [{"sha": "3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "node_id": "MDY6Q29tbWl0NDUwODIwMjM6M2E4ODJjN2YzMWU2ZjdhMDNmY2YxMmMxNTEzNTlkNDlkZWRhYTZjOA==", "commit": {"author": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2017-10-04T05:35:52Z"}, "committer": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2017-10-04T05:35:52Z"}, "message": "Exp gain & Chaos scroll fix + Diet's MK Overhaul\n\nFixed issues with negative experience being distributed to characters\nwhen killing a mob, rendering \"Exp reset\". Fixed chaos scroll behaving\noddly. Refactored debuff expirations to manage one list with registered\ndebuffs and expire times, thus lifting some load from the TimerManager.\nAdded concurrency protection on how World deals with parties. Thanks to\nthe DietStory dev team, fixed some issues with the MK maps.", "tree": {"sha": "e987f18b2249651d14c19325f60f39ab008f599e", "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/trees/e987f18b2249651d14c19325f60f39ab008f599e"}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/commits/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "html_url": "https://github.com/ronancpl/HeavenMS/commit/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "comments_url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/comments", "author": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6445f0b4e4e34684b34016ea93d813f04f0deaad", "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/6445f0b4e4e34684b34016ea93d813f04f0deaad", "html_url": "https://github.com/ronancpl/HeavenMS/commit/6445f0b4e4e34684b34016ea93d813f04f0deaad"}], "stats": {"total": 2243, "additions": 1719, "deletions": 524}, "files": [{"sha": "636854a4148c21433cdeea50e8a32812d893d788", "filename": "build/built-jar.properties", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/built-jar.properties", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/built-jar.properties", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/built-jar.properties?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -1,4 +1,4 @@\n-#Fri, 29 Sep 2017 17:49:16 -0300\n+#Wed, 04 Oct 2017 01:18:34 -0300\n \n \n C\\:\\\\Nexon\\\\MapleSolaxia\\\\MapleSolaxiaV2="}, {"sha": "87c0423bcaacd28ca2ab8edf331b44a3918c4824", "filename": "build/classes/client/MapleCharacter$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$1.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "408825533f59338c6a6da53e69808dd295e69956", "filename": "build/classes/client/MapleCharacter$10.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$10.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$10.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$10.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "3e208d85ff0cab7e0a72f4b8b6256c4d2b93f0c5", "filename": "build/classes/client/MapleCharacter$11.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$11.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$11.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$11.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "8ff337fdfb6cd1caf970ee7344cf33c82fe969aa", "filename": "build/classes/client/MapleCharacter$12.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$12.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$12.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$12.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "9ab4c366a701b1e81d8d7b9769c7bbe06eaeaef3", "filename": "build/classes/client/MapleCharacter$13.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$13.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$13.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$13.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "80812804d559b724b38d610c13e62b1935e93eb4", "filename": "build/classes/client/MapleCharacter$14.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$14.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$14.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$14.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "e324653e5741655606a51329532c37e48a1c3b86", "filename": "build/classes/client/MapleCharacter$15.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$15.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$15.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$15.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "5b7fe85aebcadab047cb4871562151e97e1b87a4", "filename": "build/classes/client/MapleCharacter$16.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$16.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$16.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$16.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "dbf2eaa39da6838827b3abc4ea20d135d611a2be", "filename": "build/classes/client/MapleCharacter$17.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$17.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$17.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$17.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "462a28dfb5376a3817043dc7205f411bb61cb11f", "filename": "build/classes/client/MapleCharacter$18.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$18.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$18.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$18.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "7ac743104c818374163c8758caf3475fa8ca8e5c", "filename": "build/classes/client/MapleCharacter$19.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$19.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$19.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$19.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "4ca6c42c009e5e987d3b9cd75b98e42b331e1b7c", "filename": "build/classes/client/MapleCharacter$2.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$2.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$2.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$2.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "db78c174f2eae40eae7469a601fc3c6c891be6aa", "filename": "build/classes/client/MapleCharacter$3.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$3.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$3.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$3.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "0e98bcac155b9b420aaa239b4d9e7917010e33f8", "filename": "build/classes/client/MapleCharacter$4.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$4.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$4.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$4.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "543b9cae3a247033925827422fa150b84811cfca", "filename": "build/classes/client/MapleCharacter$5.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$5.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$5.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$5.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "d43741149b948cf1fef9b6f45558520d6937e9a2", "filename": "build/classes/client/MapleCharacter$6.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$6.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$6.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$6.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "199dab081e2d6d418c1765ee10069d8a55fcc95c", "filename": "build/classes/client/MapleCharacter$7.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$7.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$7.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$7.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "f8aafc7cc9596729edafd8cbdf31d10fe705211d", "filename": "build/classes/client/MapleCharacter$8.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$8.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$8.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$8.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "d99b8e9a875d7075552f8ad3c4af553c6f356ccc", "filename": "build/classes/client/MapleCharacter$9.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$9.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$9.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$9.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "e25906726523476529e42530c21c05acebf6eb0d", "filename": "build/classes/client/MapleCharacter$FameStatus.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$FameStatus.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$FameStatus.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$FameStatus.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "fc0b0782a723ffc17cde144ee90d32762a3b864e", "filename": "build/classes/client/MapleCharacter$MapleBuffStatValueHolder.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$MapleBuffStatValueHolder.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$MapleBuffStatValueHolder.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$MapleBuffStatValueHolder.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "2104ebcceeea976b6e4944bc8941dd38fd5a5920", "filename": "build/classes/client/MapleCharacter$MapleCoolDownValueHolder.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$MapleCoolDownValueHolder.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$MapleCoolDownValueHolder.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$MapleCoolDownValueHolder.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "4778446029410e5cb5fd22cd36a93a86e0a2d50a", "filename": "build/classes/client/MapleCharacter$SkillEntry.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$SkillEntry.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter$SkillEntry.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$SkillEntry.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "a7ec50c4569329200cea526fa3447833f75ec7d5", "filename": "build/classes/client/MapleCharacter.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleCharacter.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "14f584027fc27b4a3e9d509b860f405f81db3933", "filename": "build/classes/client/MapleClient$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleClient$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleClient$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleClient$1.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "71dc907cf154a2a59ddcf633b9526f9101070c7c", "filename": "build/classes/client/MapleClient.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleClient.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/MapleClient.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleClient.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "026abb3fdb3873aab20baea21e2a48c455f85257", "filename": "build/classes/client/command/Commands.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/command/Commands.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/client/command/Commands.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/command/Commands.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "6b52815ae25afe09baedba2991848e54f90c8856", "filename": "build/classes/constants/ServerConstants.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/constants/ServerConstants.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/constants/ServerConstants.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/constants/ServerConstants.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "c24236f2a0577d71b8e29e24c79837183e9dfdd8", "filename": "build/classes/net/mina/MaplePacketDecoder.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/net/mina/MaplePacketDecoder.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/net/mina/MaplePacketDecoder.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/mina/MaplePacketDecoder.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "bb60a586b72a13ac72d5912210f04d7921be6396", "filename": "build/classes/net/mina/MaplePacketEncoder.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/net/mina/MaplePacketEncoder.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/net/mina/MaplePacketEncoder.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/mina/MaplePacketEncoder.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "aeb8da9dadfe482c17c0ce691fef9551867edb46", "filename": "build/classes/net/server/channel/handlers/EnterCashShopHandler.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/net/server/channel/handlers/EnterCashShopHandler.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/net/server/channel/handlers/EnterCashShopHandler.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/handlers/EnterCashShopHandler.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "4e999fd1e4de93e47496f9ef3b059e746076ae91", "filename": "build/classes/net/server/channel/handlers/EnterMTSHandler.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/net/server/channel/handlers/EnterMTSHandler.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/net/server/channel/handlers/EnterMTSHandler.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/handlers/EnterMTSHandler.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "76444de686242ccd2504d1c95f18834766d90030", "filename": "build/classes/net/server/channel/handlers/PartyOperationHandler.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/net/server/channel/handlers/PartyOperationHandler.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/net/server/channel/handlers/PartyOperationHandler.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/handlers/PartyOperationHandler.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "18b3a932ba55bf40f8aca3332cc18e6fe23c8cf3", "filename": "build/classes/net/server/channel/handlers/PlayerLoggedinHandler.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/net/server/channel/handlers/PlayerLoggedinHandler.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/net/server/channel/handlers/PlayerLoggedinHandler.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/handlers/PlayerLoggedinHandler.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "fc9bc16440ad2158b6a418189b4ff6b9f6307a47", "filename": "build/classes/net/server/world/MapleParty$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/net/server/world/MapleParty$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/net/server/world/MapleParty$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/world/MapleParty$1.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "f6e35efcc67674085ed0dbbb87b53825b7f5d00b", "filename": "build/classes/net/server/world/MapleParty.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/net/server/world/MapleParty.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/net/server/world/MapleParty.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/world/MapleParty.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "04ce90d4a193a088845c3f854303981e2a670248", "filename": "build/classes/net/server/world/World$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/net/server/world/World$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/net/server/world/World$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/world/World$1.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "91d2968bf99f3c5ff0ceecfdf17b9ede96b06caa", "filename": "build/classes/net/server/world/World.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/net/server/world/World.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/net/server/world/World.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/world/World.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "db93f325826103045abce6ef44fd614c6d79c16a", "filename": "build/classes/scripting/AbstractPlayerInteraction.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/scripting/AbstractPlayerInteraction.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/scripting/AbstractPlayerInteraction.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/scripting/AbstractPlayerInteraction.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "b933fe76d4245a70a22725c4dacbad679cd5c043", "filename": "build/classes/server/MapleItemInformationProvider$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/MapleItemInformationProvider$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/MapleItemInformationProvider$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/MapleItemInformationProvider$1.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "574fe922652ad0047c338fc6809d5787395e2d19", "filename": "build/classes/server/MapleItemInformationProvider$RewardItem.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/MapleItemInformationProvider$RewardItem.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/MapleItemInformationProvider$RewardItem.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/MapleItemInformationProvider$RewardItem.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "6de16c88cbcef426aeb5b0d180396a115f3eb8ef", "filename": "build/classes/server/MapleItemInformationProvider$scriptedItem.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/MapleItemInformationProvider$scriptedItem.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/MapleItemInformationProvider$scriptedItem.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/MapleItemInformationProvider$scriptedItem.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "5fe4e6fd013f46f3dc565e7130b66e3a530a69a3", "filename": "build/classes/server/MapleItemInformationProvider.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/MapleItemInformationProvider.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/MapleItemInformationProvider.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/MapleItemInformationProvider.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "0b90120e43317ffe4ae3d3272f221b4503fef11c", "filename": "build/classes/server/life/MapleMonster$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/life/MapleMonster$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/life/MapleMonster$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/life/MapleMonster$1.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "947aba94f024f12c9a8482235b9cd20d026caed0", "filename": "build/classes/server/life/MapleMonster$2.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/life/MapleMonster$2.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/life/MapleMonster$2.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/life/MapleMonster$2.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "da2f603b7135153a1445c30aa2907c7c05615985", "filename": "build/classes/server/life/MapleMonster$3.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/life/MapleMonster$3.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/life/MapleMonster$3.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/life/MapleMonster$3.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "2e0760ef23d3c448b67821658a23bf30888d200c", "filename": "build/classes/server/life/MapleMonster$4.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/life/MapleMonster$4.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/life/MapleMonster$4.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/life/MapleMonster$4.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "58f188cec942e1a828e8bb641a6da98d5c6e0f5f", "filename": "build/classes/server/life/MapleMonster$5.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/life/MapleMonster$5.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/life/MapleMonster$5.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/life/MapleMonster$5.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "295643d0d0c9f2fd09e40534e485dcff5b7ec3e2", "filename": "build/classes/server/life/MapleMonster$6.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/life/MapleMonster$6.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/life/MapleMonster$6.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/life/MapleMonster$6.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "f7fd11c7502dd9fc408aa568decbf7225148bb7a", "filename": "build/classes/server/life/MapleMonster$DamageTask.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/life/MapleMonster$DamageTask.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/life/MapleMonster$DamageTask.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/life/MapleMonster$DamageTask.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "6a7f1efef2a36f6a8cae32fa91904721c2378aad", "filename": "build/classes/server/life/MapleMonster.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/life/MapleMonster.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/life/MapleMonster.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/life/MapleMonster.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "80658c3088030122fbd5145f8f37ae9a99f1dea5", "filename": "build/classes/server/maps/MapleMap$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$1.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "1fa5f138b301d6fae46f510a972062fac262d8ba", "filename": "build/classes/server/maps/MapleMap$10.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$10.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$10.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$10.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "d317c296616d9c5eea15430532172797271e280a", "filename": "build/classes/server/maps/MapleMap$11.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$11.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$11.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$11.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "f6f1c55fba744c6c68407f3ff59ad86bf935f317", "filename": "build/classes/server/maps/MapleMap$12.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$12.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$12.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$12.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "d9174819c95f339d57dcb5186c834668a3fa4b9d", "filename": "build/classes/server/maps/MapleMap$13.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$13.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$13.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$13.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "3114ac56134659fca45959825a3283dd0df3a03d", "filename": "build/classes/server/maps/MapleMap$14.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$14.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$14.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$14.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "416d5f56158e8eb8acab8aba9ec25eeed9810156", "filename": "build/classes/server/maps/MapleMap$15.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$15.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$15.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$15.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "cd76704b063f7b7144eb28fbab5b88c6d0a93dcf", "filename": "build/classes/server/maps/MapleMap$16.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$16.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$16.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$16.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "2509483fbab1d55d141bd92fbeaa018b68ff88c4", "filename": "build/classes/server/maps/MapleMap$17.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$17.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$17.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$17.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "dc4637f64f7acebf5fd6603a03e52804d5a245f5", "filename": "build/classes/server/maps/MapleMap$18.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$18.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$18.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$18.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "1c77fd2f8805e95a424ab3c5ec8566abb45bebe3", "filename": "build/classes/server/maps/MapleMap$19.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$19.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$19.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$19.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "f384bcd8a82d8ac368f07eb833901da3a89d8d7d", "filename": "build/classes/server/maps/MapleMap$2.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$2.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$2.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$2.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "84c0f6e3e999346519aa21132c4ae19de42797d0", "filename": "build/classes/server/maps/MapleMap$20.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$20.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$20.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$20.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "ffd289db599b04ca880e79cec05b43cc3308eef4", "filename": "build/classes/server/maps/MapleMap$21.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$21.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$21.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$21.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "1523cfa1021467d4301f5f841a59ed089c8161f8", "filename": "build/classes/server/maps/MapleMap$22.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$22.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$22.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$22.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "6ac0109238b91f969eb4c25940d33a1792b777b7", "filename": "build/classes/server/maps/MapleMap$23.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$23.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$23.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$23.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "8a5c6026de2d8ce5e176b69204d2d249fd339e2f", "filename": "build/classes/server/maps/MapleMap$24.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$24.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$24.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$24.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "e409dd8327a32834e25f12381b4ed99c23d53929", "filename": "build/classes/server/maps/MapleMap$25.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$25.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$25.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$25.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "2f5cea00d4b4d5aa8bd2ef4d4746eea5f596341f", "filename": "build/classes/server/maps/MapleMap$26.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$26.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$26.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$26.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "e59a680f42229cbfed252df9d0593412b84e9de9", "filename": "build/classes/server/maps/MapleMap$27.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$27.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$27.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$27.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "8349ecebd0496613e9c15b6e5a4bce7f435a3e97", "filename": "build/classes/server/maps/MapleMap$28.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$28.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$28.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$28.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "f166f7fff89693846d9a14a7f94497611f349155", "filename": "build/classes/server/maps/MapleMap$29$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$29$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$29$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$29$1.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "7374e8bff20608410d6db71a7435310ea3ca30d8", "filename": "build/classes/server/maps/MapleMap$29.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$29.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$29.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$29.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "ceb2145abd1ae7351dfcae8bda8cdc27433af4c3", "filename": "build/classes/server/maps/MapleMap$3.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$3.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$3.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$3.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "027519c30a318b72e885375fc6c2249920877a63", "filename": "build/classes/server/maps/MapleMap$30.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$30.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$30.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$30.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "85f0bb93b6300633f4b6300c1cc1259614da814f", "filename": "build/classes/server/maps/MapleMap$4.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$4.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$4.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$4.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "5921e9aa36df9faf8723c08dac52b02528a411e2", "filename": "build/classes/server/maps/MapleMap$5.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$5.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$5.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$5.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "76b76e08e6c98361046a1f18d0cdabefb55f22d8", "filename": "build/classes/server/maps/MapleMap$6.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$6.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$6.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$6.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "3c75135efde370a81999eba948789abe4df6b3ff", "filename": "build/classes/server/maps/MapleMap$7.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$7.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$7.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$7.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "65652d9a72e2613b74b1acdde92a4cbf821930b7", "filename": "build/classes/server/maps/MapleMap$8.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$8.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$8.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$8.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "bc3acfc77f11c4148ec5f24dd03cc909559beda1", "filename": "build/classes/server/maps/MapleMap$9.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$9.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$9.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$9.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "552d48405c4f0aee991daee574b308fc4d544f22", "filename": "build/classes/server/maps/MapleMap$ActivateItemReactor$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$ActivateItemReactor$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$ActivateItemReactor$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$ActivateItemReactor$1.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "5540d6b4ab9f4062955c20e8368aab525afacfa7", "filename": "build/classes/server/maps/MapleMap$ActivateItemReactor.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$ActivateItemReactor.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$ActivateItemReactor.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$ActivateItemReactor.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "a9028052bdc4351da82f11af7e078829a64d8e3c", "filename": "build/classes/server/maps/MapleMap$ExpireMapItemJob.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$ExpireMapItemJob.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap$ExpireMapItemJob.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$ExpireMapItemJob.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "aaf146c8c95bb55982254952ecf6fb32dceca290", "filename": "build/classes/server/maps/MapleMap.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/server/maps/MapleMap.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "485e3783203213baf4d3dd86e248eb2ad6084ee5", "filename": "build/classes/tools/MaplePacketCreator$2.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/tools/MaplePacketCreator$2.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/tools/MaplePacketCreator$2.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/tools/MaplePacketCreator$2.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "1f6cabd44575ed576e74a3dfb5dedd5844f6df1d", "filename": "build/classes/tools/MaplePacketCreator.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/tools/MaplePacketCreator.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/build/classes/tools/MaplePacketCreator.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/tools/MaplePacketCreator.class?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "c29d4b19e236c1968e97e1e5f115916c25602c54", "filename": "dist/MapleSolaxia.jar", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/dist/MapleSolaxia.jar", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/dist/MapleSolaxia.jar", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/dist/MapleSolaxia.jar?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8"}, {"sha": "0a5287043605ebe616b06bbb82ad5949034901db", "filename": "docs/mychanges_ptbr.txt", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/docs/mychanges_ptbr.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/docs/mychanges_ptbr.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/docs/mychanges_ptbr.txt?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -558,4 +558,11 @@ Adicionado Owl of Minerva.\n Corrigido um bug no sistema de checagem de slots.\n \n 28 Setembro 2017,\n-Adidionado wish tickets \ufffd AmoriaPQ.\n\\ No newline at end of file\n+Adidionado wish tickets \ufffd AmoriaPQ.\n+\n+02 - 03 Outubro 2017,\n+Adicionado prote\ufffd\ufffdo de acesso concorrente em MapleParty.\n+Corrigido bug em sistema de distribui\ufffd\ufffdo de EXP para party.\n+Corrigido bug de overflow em distribui\ufffd\ufffdo de EXP.\n+Corrigido bug com scrolls n\ufffdo usando slots quando resultam em sucesso.\n+Refatorado sistema de schedules para disease expiretimes.\n\\ No newline at end of file"}, {"sha": "1037c2634130a182c7ce8035806fab231607b46d", "filename": "nbproject/private/private.xml", "status": "modified", "additions": 7, "deletions": 20, "changes": 27, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/nbproject/private/private.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/nbproject/private/private.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/nbproject/private/private.xml?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -3,28 +3,15 @@\n     <editor-bookmarks xmlns=\"http://www.netbeans.org/ns/editor-bookmarks/2\" lastBookmarkId=\"1\"/>\n     <open-files xmlns=\"http://www.netbeans.org/ns/projectui-open-files/2\">\n         <group>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/net/RecvOpcode.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/tools/data/input/GenericLittleEndianAccessor.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/server/maps/MapleHiredMerchant.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/net/PacketProcessor.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/net/SendOpcode.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/net/server/channel/handlers/TakeDamageHandler.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/scripting/AbstractPlayerInteraction.java</file>\n             <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/constants/ServerConstants.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/net/server/world/World.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/net/server/channel/handlers/FredrickHandler.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/net/server/channel/handlers/OwlWarpHandler.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/net/server/channel/handlers/RemoteStoreHandler.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/net/server/channel/handlers/PlayerInteractionHandler.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/inventory/MapleInventory.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/tools/MaplePacketCreator.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/net/server/channel/handlers/UseCashItemHandler.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/net/server/channel/handlers/UseOwlOfMinervaHandler.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/server/MapleTrade.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/server/MapleInventoryManipulator.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/server/MapleMiniGame.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/server/MaplePlayerShop.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/tools/data/output/GenericLittleEndianWriter.java</file>\n             <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/MapleCharacter.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/MapleClient.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/net/server/channel/Channel.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/tools/data/input/LittleEndianAccessor.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/server/life/MobSkill.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/server/MapleItemInformationProvider.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/tools/MaplePacketCreator.java</file>\n         </group>\n     </open-files>\n </project-private>"}, {"sha": "cd2c2064e8fd168f782e6e7c93f567cff0f4fda7", "filename": "scripts/event/KingPepeAndYetis.js", "status": "added", "additions": 110, "deletions": 0, "changes": 110, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/event/KingPepeAndYetis.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/event/KingPepeAndYetis.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/KingPepeAndYetis.js?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -0,0 +1,110 @@\n+var minPlayers = 1;\n+var timeLimit = 20; //20 minutes\n+var eventTimer = 1000 * 60 * timeLimit;\n+var exitMap = 106021400;\n+\n+function init(){}\n+\n+function setup(difficulty, lobbyId){\n+\tvar eim = em.newInstance(\"KingPepe_\" +lobbyId);\n+\teim.getInstanceMap(106021500).resetFully();\n+\teim.getInstanceMap(106021500).allowSummonState(false);\n+\trespawn(eim);\n+\teim.startEventTimer(eventTimer);\n+\treturn eim;\n+}\n+\n+function afterSetup(eim){}\n+\n+function respawn(eim){\n+\tvar map = eim.getMapInstance(exitMap);\n+\tmap.allowSummonState(true);\n+\tmap.instanceMapRespawn();\n+\teim.schedule(\"respawn\", 10000);\n+}\n+\n+function playerEntry(eim, player){\n+\tvar yetiMap = eim.getMapInstance(106021500);\n+\tplayer.changeMap(yetiMap, yetiMap.getPortal(1));\n+}\n+\n+function scheduledTimeout(eim){\n+\tvar party = eim.getPlayers();\n+\n+\tfor(var i = 0; i < party.size(); i++)\n+\t\tplayerExit(eim, party.get(i));\n+\n+\teim.dispose();\n+}\n+\n+function playerRevive(eim, player){\n+\tplayer.setHp(50);\n+\tplayer.setStance(0);\n+\teim.unregisterPlayer(player);\n+\tplayer.changeMap(exitMap);\n+\treturn false;\n+}\n+\n+function playerDead(eim, player){}\n+\n+function playerDisconnected(eim, player){\n+\tvar party = eim.getPlayers();\n+\n+\tfor(var i = 0; i < party.size(); i++){\n+\t\tif(party.get(i).equals(player))\n+\t\t\tremovePlayer(eim, player);\n+\t\telse\n+\t\t\tplayerExit(eim, party.get(i));\n+\t}\n+\teim.dispose();\n+}\n+\n+function monsterValue(eim, mobId){\n+\treturn -1;\n+}\n+\n+function leftParty(eim, player){\n+\tvar party = eim.getPlayers();\n+\n+\tif(party.size() < minPlayers){\n+\t\tfor(var i = 0; i < party.size(); i++){\n+\t\t\tplayerExit(eim, party.get(i));\n+\t\t}\n+\t\teim.dispose();\n+\t}\n+\telse{\n+\t\tplayerExit(eim, player);\n+\t}\n+}\n+\n+function disbandParty(eim){}\n+\n+function playerUnregistered(eim, player){}\n+\n+function playerExit(eim, player){\n+\teim.unregisterPlayer(player);\n+\tplayer.changeMap(exitMap, 2);\n+}\n+\n+function moveMap(eim, player){\n+\tif(player.getMap().getId() == exitMap){\n+\t\tremovePlayer(eim, player);\n+\t\teim.dispose();\n+\t}\n+}\n+\n+function removePlayer(eim, player){\n+\teim.unregisterPlayer(player);\n+\tplayer.getMap().removePlayer(player);\n+\tplayer.setMap(exitMap);\n+}\n+\n+function cancelSchedule(){}\n+\n+function dispose(){}\n+\n+function clearPQ(eim){}\n+\n+function monsterKilled(mob, eim){}\n+\n+function allMonstersDead(eim){}\n\\ No newline at end of file"}, {"sha": "f987227b1073a9028a849656c4c70e50d213b60e", "filename": "scripts/event/MK_PrimeMinister.js", "status": "added", "additions": 108, "deletions": 0, "changes": 108, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/event/MK_PrimeMinister.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/event/MK_PrimeMinister.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/MK_PrimeMinister.js?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -0,0 +1,108 @@\n+var minPlayers = 1;\n+var entryMap = 106021402;\n+var exitMap = 106021600;\n+\n+function init(){}\n+\n+function setup(difficulty, lobbyId){\n+\tvar eim = em.newInstance(\"MK_PrimeMinister_\" +lobbyId);\n+\teim.getInstanceMap(106021601).resetFully();\n+\teim.getInstanceMap(106021601).allowSummonState(false);\n+\trespawn(eim);\n+\treturn eim;\n+}\n+\n+function afterSetup(eim){}\n+\n+function respawn(eim){\n+\tvar map = eim.getMapInstance(entryMap);\n+\tmap.allowSummonState(true);\n+\tmap.instanceMapRespawn();\n+\teim.schedule(\"respawn\", 10000);\n+}\n+\n+function playerEntry(eim, player){\n+\tvar weddinghall = eim.getMapInstance(106021601);\n+\tplayer.changeMap(weddinghall, weddinghall.getPortal(1));\n+}\n+\n+function scheduledTimeout(eim){\n+\tvar party = eim.getPlayers();\n+\n+\tfor(var i = 0; i < party.size(); i++)\n+\t\tplayerExit(eim, party.get(i));\n+\n+\teim.dispose();\n+}\n+\n+function playerRevive(eim, player){\n+\tplayer.setHp(50);\n+\tplayer.setStance(0);\n+\teim.unregisterPlayer(player);\n+\tplayer.changeMap(entryMap);\n+\treturn false;\n+}\n+\n+function playerDead(eim, player){}\n+\n+function playerDisconnected(eim, player){\n+\tvar party = eim.getPlayers();\n+\n+\tfor(var i = 0; i < party.size(); i++){\n+\t\tif(party.get(i).equals(player))\n+\t\t\tremovePlayer(eim, player);\n+\t\telse\n+\t\t\tplayerExit(eim, party.get(i));\n+\t}\n+\teim.dispose();\n+}\n+\n+function monsterValue(eim, mobId){\n+\treturn -1;\n+}\n+\n+function leftParty(eim, player){\n+\tvar party = eim.getPlayers();\n+\n+\tif(party.size() < minPlayers){\n+\t\tfor(var i = 0; i < party.size(); i++){\n+\t\t\tplayerExit(eim, party.get(i));\n+\t\t}\n+\t\teim.dispose();\n+\t}\n+\telse{\n+\t\tplayerExit(eim, player);\n+\t}\n+}\n+\n+function disbandParty(eim){}\n+\n+function playerUnregistered(eim, player){}\n+\n+function playerExit(eim, player){\n+\teim.unregisterPlayer(player);\n+\tplayer.changeMap(entryMap, 2);\n+}\n+\n+function moveMap(eim, player){\n+\tif(player.getMap().getId() == exitMap || player.getMap().getId() == entryMap){\n+\t\tremovePlayer(eim, player);\n+\t\teim.dispose();\n+\t}\n+}\n+\n+function removePlayer(eim, player){\n+\teim.unregisterPlayer(player);\n+\tplayer.getMap().removePlayer(player);\n+\tplayer.setMap(entryMap);\n+}\n+\n+function cancelSchedule(){}\n+\n+function dispose(){}\n+\n+function clearPQ(eim){}\n+\n+function monsterKilled(mob, eim){}\n+\n+function allMonstersDead(eim){}\n\\ No newline at end of file"}, {"sha": "5fd84391962eb47793f4bdc47ae812c8a2ab1bd5", "filename": "scripts/map/onUserEnter/pepeking_effect.js", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/map/onUserEnter/pepeking_effect.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/map/onUserEnter/pepeking_effect.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/map/onUserEnter/pepeking_effect.js?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -0,0 +1,9 @@\n+importPackage(Packages.server.life);\n+\n+function start(ms){\n+\tvar mobId = 3300000 + (Math.floor(Math.random() * 3) + 5);\n+\tvar player = ms.getPlayer();\n+\tvar map = player.getMap();\n+\n+\tmap.spawnMonsterOnGroundBelow(MapleLifeFactory.getMonster(mobId), new java.awt.Point(-28, -67));\n+}\n\\ No newline at end of file"}, {"sha": "826517af31bfa10018edcaa46100b92c68bcf8c7", "filename": "scripts/npc/1052109.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/npc/1052109.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/npc/1052109.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1052109.js?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -19,7 +19,7 @@\n     You should have received a copy of the GNU Affero General Public License\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n-/* Trash Can\n+/* Trash Can 1\n \t\n  */\n "}, {"sha": "0bba942db290b105f825e55f00c2237248cfe131", "filename": "scripts/npc/1052110.js", "status": "added", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/npc/1052110.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/npc/1052110.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1052110.js?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -0,0 +1,31 @@\n+/* \n+    Trash Can 2\n+    Kerning Subway\t\n+*/\n+\n+var status;\n+ \n+function start() {\n+    status = -1;\n+    action(1, 0, 0);\n+}\n+\n+function action(mode, type, selection) {\n+    if (mode == -1) {\n+        cm.dispose();\n+    } else {\n+        if (mode == 0 && type > 0) {\n+            cm.dispose();\n+            return;\n+        }\n+        if (mode == 1)\n+            status++;\n+        else\n+        status--;\n+    \n+        if(status == 0) {\n+            cm.sendOk(\"Just a trash can sitting there.\");\n+            cm.dispose();\n+        }\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "6183aa9d0e7ba886df8dd7391fd53a9828adf500", "filename": "scripts/npc/1052111.js", "status": "added", "additions": 51, "deletions": 0, "changes": 51, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/npc/1052111.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/npc/1052111.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1052111.js?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -0,0 +1,51 @@\n+/*\n+\tTrash Can 3\n+\tKerning Subway\n+*/\n+\n+var status;\n+\n+function start(){\n+\tstatus = -1;\n+\taction(1, 0, 0);\n+}\n+\n+function action(mode, type, selection){\n+\tif(mode == -1){\n+\t\tcm.dispose();\n+\t\treturn;\n+\t}\n+\telse{\n+\t\tif(mode == 0 && status == 0){\n+\t\t\tcm.dispose();\n+\t\t\treturn;\n+\t\t}\n+\t\telse if(mode == 0)\n+\t\t\tstatus--;\n+\t\telse\n+\t\t\tstatus++;\n+\n+\n+\t\tif(cm.isQuestStarted(20710)){\n+\t\t\tif(!cm.hasItem(4032136)){\n+\t\t\t\tcm.sendNext(\"You have found a #b#t4032136##k in the trash can!   #i4032136#\");\n+\n+\t\t\t\tif(cm.canHold(4032136)){\n+\t\t\t\t\tcm.gainItem(4032136, 1);\n+\t\t\t\t}\n+\t\t\t\telse{\n+\t\t\t\t\tcm.sendOk(\"#i4032136# Not enough space in your ETC inventory.\");\n+\t\t\t\t}\n+\t\t\t\tcm.dispose();\n+\t\t\t}\n+\t\t\telse{\n+\t\t\t\tcm.sendOk(\"Just a trash can sitting there.\");\n+\t\t\t\tcm.dispose();\n+\t\t\t}\n+\t\t}\n+\t\telse{\n+\t\t\tcm.sendOk(\"Just a trash can sitting there.\");\n+\t\t\tcm.dispose();\n+\t\t}\n+\t}\n+}\n\\ No newline at end of file"}, {"sha": "58909d5be0fdb715fde09be362f768bc2f2888c5", "filename": "scripts/npc/1052112.js", "status": "added", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/npc/1052112.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/npc/1052112.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1052112.js?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -0,0 +1,31 @@\n+/* \n+    Trash Can 4\n+    Kerning Subway\t\n+*/\n+\n+var status;\n+ \n+function start() {\n+    status = -1;\n+    action(1, 0, 0);\n+}\n+\n+function action(mode, type, selection) {\n+    if (mode == -1) {\n+        cm.dispose();\n+    } else {\n+        if (mode == 0 && type > 0) {\n+            cm.dispose();\n+            return;\n+        }\n+        if (mode == 1)\n+            status++;\n+        else\n+        status--;\n+    \n+        if(status == 0) {\n+            cm.sendOk(\"Just a trash can sitting there.\");\n+            cm.dispose();\n+        }\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "fcb55d97d81eecccef55394749d549af70e26e3a", "filename": "scripts/npc/1092000.js", "status": "modified", "additions": 28, "deletions": 22, "changes": 50, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/npc/1092000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/npc/1092000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1092000.js?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -3,19 +3,16 @@\n     Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n \t\t       Matthias Butz <matze@odinms.de>\n \t\t       Jan Christian Meyer <vimes@odinms.de>\n-\n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as\n     published by the Free Software Foundation version 3 as published by\n     the Free Software Foundation. You may not use, modify or distribute\n     this program under any other version of the GNU Affero General Public\n     License.\n-\n     This program is distributed in the hope that it will be useful,\n     but WITHOUT ANY WARRANTY; without even the implied warranty of\n     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n     GNU Affero General Public License for more details.\n-\n     You should have received a copy of the GNU Affero General Public License\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n@@ -24,28 +21,37 @@\n  * @Author       xXOsirisXx (BubblesDev)\n  */\n \n-status = -1;\n+var status;\n \n function start() {\n-    cm.sendNext(\"Okay, I'll now send you to the stable where my cows are. Watch out for the calves that drink all the milk. You don't want your effort to go to waste.\");\n+\tstatus = -1;\n+    action(1, 0, 0);\n }\n \n function action(mode, type, selection){\n-    if (mode == -1 || !cm.isQuestStarted(2180)){\n-        cm.dispose();\n-        return;\n-    } else if (mode == 0)\n-        status--;\n-    else\n-        status++;\n-    if (status == 1)\n-        cm.sendNextPrev(\"It won't be easy to tell at a glance between a calf and a cow. Those calves may only be a month or two old, but they have already grown to the size of their mother. They even look alike...even I get confused at times! Good luck!\");\n-    else if (status == 2) {\n-        if (cm.canHold(4031847)) {\n-            cm.gainItem(4031847, 1);\n-            cm.warp(912000100);\n-        } else\n-            cm.sendNextPrev(\"I can't give you the empty bottle because your inventory is full. Please make some room in your Etc window.\");\n-        cm.dispose();\n-    }\n+\tif (mode == -1 || !cm.isQuestStarted(2180)){\n+\t\tcm.dispose();\n+\t\treturn;\n+\t}\n+\telse{\n+\t\tif (mode == 1) status++;\n+\t\telse status --;\n+\n+\t\tif (status == 0){\n+\t\t\tcm.sendNext(\"Okay, I'll now send you to the stable where my cows are. Watch out for the calves that drink all the milk. You don't want your effort to go to waste.\");\n+\t\t}\n+\t\telse if (status == 1){\n+\t\t\tcm.sendNextPrev(\"It won't be easy to tell at a glance between a calf and a cow. Those calves may only be a month or two old, but they have already grown to the size of their mother. They even look alike...even I get confused at times! Good luck!\");\n+\t\t}\n+\t\telse if (status == 2){\n+\t\t\tif (cm.canHold(4031847)){\n+\t\t\t\tcm.gainItem(4031847, 1);\n+\t\t\t\tcm.warp(912000100);\n+\t\t\t}\n+\t\t\telse{\n+\t\t\t\tcm.sendOk(\"I can't give you the empty bottle because your inventory is full. Please make some room in your Etc window.\");\n+\t\t\t}\n+\t\t\tcm.dispose();\n+\t\t}\n+\t}\n }\n\\ No newline at end of file"}, {"sha": "22913c99677fa4e7cf3512022f7ed3969545b2b5", "filename": "scripts/npc/1300013.js", "status": "added", "additions": 40, "deletions": 0, "changes": 40, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/npc/1300013.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/npc/1300013.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1300013.js?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -0,0 +1,40 @@\n+/*\n+\tNPC: Blocked Entrance (portal?)\n+\tMAP: Mushroom Castle - East Castle Tower (106021400)\n+*/\n+\n+var status;\n+\n+function start(){\n+\tstatus = -1;\n+\taction(1, 0, 0);\n+}\n+\n+function action(mode, type, selection){\n+\tif(mode == -1){\n+\t\tcm.dispose();\n+\t\treturn;\n+\t}\n+\telse if(mode == 0 && status == 0){\n+\t\tcm.dispose();\n+\t\treturn;\n+\t}\n+\telse if(mode == 0)\n+\t\tstatus--;\n+\telse\n+\t\tstatus++;\n+\n+\n+\tif(status == 0){\n+\t\tcm.sendSimple(\"#L1#Enter to fight #bKing Pepe#k and #bYeti Brothers#k.#l\");\n+\t}\n+\telse if(status == 1){\n+\t\tif(selection == 1){\n+\t\t\tvar pepe = cm.getEventManager(\"KingPepeAndYetis\");\n+\t\t\tpepe.setProperty(\"player\", cm.getPlayer().getName());\n+\t\t\tpepe.startInstance(cm.getPlayer());\n+\t\t\tcm.dispose();\n+\t\t\treturn;\n+\t\t}\n+\t}\n+}\n\\ No newline at end of file"}, {"sha": "4ff99de78900253226ce6c22922d81334f4dad17", "filename": "scripts/npc/2060005.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/npc/2060005.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/npc/2060005.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2060005.js?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -46,7 +46,7 @@ function start() {\n         }\n     }\n     else {\n-        cm.sendSimple(\"Only few adventurers, from a selected public, are eligible to protect the Watch Hog.\");\n+        cm.sendOk(\"Only few adventurers, from a selected public, are eligible to protect the Watch Hog.\");\n     }\n     \n     cm.dispose();"}, {"sha": "e074b84fbcc7041a82bb5d93d656952c0848d909", "filename": "scripts/npc/9000017.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/npc/9000017.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/npc/9000017.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9000017.js?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -46,7 +46,7 @@ function action(mode, type, selection) {\n \n         var itemSet = new Array(2049100, 7777777);\n         var matSet = new Array(new Array(4031203,4001356,4000136,4000082,4001126,4080100,4000021,4003005));\n-        var matQtySet = new Array(new Array(10,6,4,8,8,1,20,12));\n+        var matQtySet = new Array(new Array(100,60,40,80,80,8,200,120));\n         var costSet = new Array(1200000, 7777777);\n         item = itemSet[selectedItem];\n         mats = matSet[selectedItem];"}, {"sha": "fe82c1f95c309a697cd7b0424db6532cce6f2f5f", "filename": "scripts/portal/TD_MC_Egate.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/portal/TD_MC_Egate.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/portal/TD_MC_Egate.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/TD_MC_Egate.js?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -1,5 +1,5 @@\n function enter(pi) {\n \tpi.playPortalSound();\n-\tpi.warp(106021300, 0);\n+\tpi.warp(106021300, 1);\n \treturn true;\n }\n\\ No newline at end of file"}, {"sha": "525c8e64f495c5594c5097ed0cc8a2d4dd7b6217", "filename": "scripts/portal/TD_MC_enterboss1.js", "status": "modified", "additions": 21, "deletions": 1, "changes": 22, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/portal/TD_MC_enterboss1.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/portal/TD_MC_enterboss1.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/TD_MC_enterboss1.js?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -1,3 +1,23 @@\n function enter(pi) {\n-\tpi.openNpc(1300013);\n+\tvar questProgress = pi.getQuestProgress(2330, 3300005) + pi.getQuestProgress(2330, 3300006) + pi.getQuestProgress(2330, 3300007); //3 Yetis\n+\n+\tif(questProgress == 3 && !pi.hasItem(4032388) && !pi.isQuestCompleted(2332)){\n+\t\tif(pi.canHold(4032388)){\n+\t\t\tpi.getPlayer().message(\"You have aquired a key to the Wedding Hall. King Pepe must have dropped it.\")\n+\t\t\tpi.gainItem(4032388, 1);\n+\t\t}\n+\t\telse{\n+\t\t\tpi.getPlayer().message(\"Please make room in your ETC inventory.\");\n+\t\t}\n+\t}\n+\n+\tif(pi.isQuestStarted(2330) && questProgress < 3){\n+\t\tpi.openNpc(1300013);\n+\t}\n+\telse{\n+\t\tpi.playPortalSound();\n+\t\tpi.warp(106021401, 1);\n+\t}\n+\t\n+\treturn true;\n }\n\\ No newline at end of file"}, {"sha": "70994ceeb05d0774268222a717d578198a54f2c6", "filename": "scripts/portal/TD_MC_enterboss2.js", "status": "modified", "additions": 46, "deletions": 33, "changes": 79, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/portal/TD_MC_enterboss2.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/portal/TD_MC_enterboss2.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/TD_MC_enterboss2.js?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -1,35 +1,48 @@\n-/*\n-\tThis file is part of the ZeroFusion MapleStory Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc> \n-                       Matthias Butz <matze@odinms.de>\n-                       Jan Christian Meyer <vimes@odinms.de>\n-    ZeroFusion organized by \"RMZero213\" <RMZero213@hotmail.com>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License version 3\n-    as published by the Free Software Foundation. You may not use, modify\n-    or distribute this program under any other version of the\n-    GNU Affero General Public License.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU Affero General Public License for more details.\n-\n-    You should have received a copy of the GNU Affero General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-*/\n-\n-var dungeonid = 106021600;\n-var dungeons = 10;\n-\n function enter(pi) {\n-    for(var i = 0; i < dungeons; i++) {\n-\t\tif (pi.getMap(dungeonid + i).getCharactersSize() == 0) {\n-\t\t\tpi.warp(dungeonid + i, 0);\n-\t\t    return true;\n-\t\t}\n+    if(pi.isQuestCompleted(2333) && pi.isQuestStarted(2331) && !pi.hasItem(4001318)){\n+        pi.getPlayer().message(\"Lost the Royal Seal, eh? Worry not! Kevin's code here to save your hide.\");\n+        if(pi.canHold(4001318)){\n+            pi.gainItem(4001318, 1);\n+        }\n+        else{\n+            pi.getPlayer().message(\"Hey, how do you plan to hold this Seal when your inventory is full?\");\n+        }\n+    }\n+\n+    if(pi.isQuestCompleted(2333)){\n+        pi.playPortalSound();\n+        pi.warp(106021600, 1);\n+        return true;\n+    }\n+    else if(pi.isQuestStarted(2332) && pi.hasItem(4032388)){\n+        if(pi.getPlayer().getParty() != null){\n+            pi.getPlayer().showHint(\"The next part of the quest is solo only! Must leave party.\");\n+            return false;\n+        }\n+        else{\n+            pi.forceCompleteQuest(2332, 1300002);\n+            pi.getPlayer().message(\"You've found the princess!\");\n+            pi.giveCharacterExp(4400 * 1.5, pi.getPlayer());\n+            var pm = pi.getEventManager(\"MK_PrimeMinister\");\n+            pm.setProperty(\"player\", pi.getPlayer().getName());\n+            pm.startInstance(pi.getPlayer());\n+            return true;\n+        }\n+    }\n+    else if(pi.isQuestStarted(2333) || (pi.isQuestCompleted(2332) && !pi.isQuestStarted(2333))){\n+        if(pi.getPlayer.getParty() != null){\n+            pi.getPlayer().showHint(\"The next part of the quest is solo only! Must leave party.\");\n+            return false;\n+        }\n+        else{\n+            var pm = pi.getEventManager(\"MK_PrimeMinister\");\n+            pm.setProperty(\"player\", pi.getPlayer().getName());\n+            pm.startInstance(pi.getPlayer());\n+            return true;\n+        }\n+    }\n+    else{\n+        pi.getPlayer().message(\"The door seems to be locked. Perhaps I can find a key to open it...\");\n+        return false;\n     }\n-    pi.playerMessage(5, \"All of the Mini-Dungeons are in use right now, please try again later.\");\n-\treturn false;\n-}\n+}\n\\ No newline at end of file"}, {"sha": "5960392204a689e2b763b193141215243c657873", "filename": "scripts/portal/end_cow.js", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/portal/end_cow.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/portal/end_cow.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/end_cow.js?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -0,0 +1,22 @@\n+/*\n+\tBy: Kevin\n+\tMap: Hidden Chamber - The Nautilus - Stable (912000100)\n+\tQuest: Find Fresh Milk (2180)\n+*/\n+\n+function enter(pi){\n+\tif (pi.isQuestStarted(2180) && (pi.hasItem(4031847) || pi.hasItem(4031848) || pi.hasItem(4031849) || pi.hasItem(4031850))){\n+\t\tif (pi.hasItem(4031850)){\n+\t\t\tpi.warp(120000103);\n+\t\t\treturn true;\n+\t\t}\n+\t\telse{\n+\t\t\tpi.getPlayer().dropMessage(5, \"Your milk jug is not full...\");\n+\t\t\treturn false;\n+\t\t}\n+\t}\n+\telse{\n+\t\tpi.warp(120000103);\n+\t\treturn true;\n+\t}\n+}\n\\ No newline at end of file"}, {"sha": "cd87306ea97a5bfd1b361c8bad6f5e2002f69cbd", "filename": "scripts/portal/go_secretroom.js", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/portal/go_secretroom.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/portal/go_secretroom.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/go_secretroom.js?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -0,0 +1,16 @@\n+function enter(pi) {\n+\t\n+\tif(!pi.isQuestStarted(2335) || (pi.isQuestStarted(2335) && !pi.hasItem(4032405))){\n+\t\tpi.getPlayer().message(\"The door is locked securely. I will need a key if I want to go in there.\");\n+\t\treturn false;\n+\t}\n+\n+\tif(pi.isQuestStarted(2335) && pi.hasItem(4032405)){\n+\t\tpi.forceCompleteQuest(2335, 1300002);\n+\t\tpi.giveCharacterExp(5000 * 1.5, pi.getPlayer());\n+\t\tpi.gainItem(4032405, -1);\n+\t}\n+\tpi.playPortalSound();\n+\tpi.warp(106021001, 1);\n+\treturn true;\n+}\n\\ No newline at end of file"}, {"sha": "6be6f1059a69a0a09ad3aa46a05a1f3cf1e6bb32", "filename": "scripts/portal/out_pepeking.js", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/portal/out_pepeking.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/portal/out_pepeking.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/out_pepeking.js?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -0,0 +1,9 @@\n+function enter(pi) {\n+\tvar eim = pi.getEventInstance();\n+\teim.stopEventTimer();\n+\teim.dispose();\n+\t\n+\tpi.playPortalSound();\n+\tpi.warp(106021400, 2);\n+\treturn true;\n+}\n\\ No newline at end of file"}, {"sha": "6e6bdd74863951b3e932d9f92a7e112725ecce07", "filename": "scripts/quest/20710.js", "status": "added", "additions": 35, "deletions": 0, "changes": 35, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/quest/20710.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/quest/20710.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/20710.js?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -0,0 +1,35 @@\n+/*\n+\tAuthor: DietStory dev team\n+\tNPC: Matthias\n+\tQuest: Hidden Inside the Trash Can\n+*/\n+\n+\n+var status = -1;\n+\n+function start(mode, type, selection){\n+\tif(mode == -1){\n+\t\tqm.dispose();\n+\t\treturn;\n+\t}\n+\telse if(mode == 0 && status == 0){\n+\t\tqm.sendOk(\"What? Are you declining the mission? Fine, do it like that. I'll just report it straight to #p1101002#.\");\n+\t\tqm.dispose();\n+\t\treturn;\n+\t}\n+\telse if(mode == 0){\n+\t\tstatus--;\n+\t}\n+\telse{\n+\t\tstatus++;\n+\t}\n+\n+\n+\tif(status == 0){\n+\t\tqm.sendAcceptDecline(\"You don't really instill confidence in me, but since you're a Cygnus Knight and all... and since no one else can go on a search right now... Okay, let me explain to you what this mission is about.\");\n+\t}\n+\telse if(status == 1){\n+\t\tqm.forceStartQuest();\n+\t\tqm.dispose();\n+\t}\n+}\n\\ No newline at end of file"}, {"sha": "111917079530a2979f013a21d469e3f253e7ae68", "filename": "scripts/quest/2293.js", "status": "added", "additions": 110, "deletions": 0, "changes": 110, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/quest/2293.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/quest/2293.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2293.js?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -0,0 +1,110 @@\n+/*\n+\tThis file is part of the DietStory Maple Story Server\n+    Copyright (C) 2017\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/* Author: Benji \n+\tNPC Name: \t\tMaestro Rho\n+\tMap(s): \t\tKerning Square Lobby\n+\tDescription: \tThe Last Song\n+*/\n+\n+importPackage(Packages.client);\n+\n+var status = -1;\n+\n+function start(mode, type, selection) {\n+    if(mode == -1 || (mode == 0 && status == 0)){\n+        qm.dispose();\n+        return;\n+    }\n+    else if(mode == 0)\n+        status--;\n+    else\n+        status++;\n+\n+    if(status == 0)\n+    {\n+        qm.sendNext(\"Do you remember the last song that the Spirit of Rock played? I can think of a few songs that he may be imitating, so listen carefully and tell me which song it is. #bYou only get one chance,#k so please choose wisely.\");\n+    }\n+    qm.forceStartQuest();\n+    qm.dispose();\n+}\n+\n+function end(mode, type, selection)\n+{\n+    if(mode == -1 || (mode == 0 && status == 0)){\n+            qm.dispose();\n+            return;\n+        }\n+        else if(mode == 0)\n+            status--;\n+        else\n+            status++;\n+\n+    if (status == 0)\n+    {\n+        qm.sendSimple(\"Here, I'll give you some samples. Please listen to them and choose one. Please listen carefully before making your choide.\\r\\n\\\n+            \\t#b#L1# Listen to song No. 1#l \\r\\n\\\n+            \\t#L2# Listen to Song No. 2#l \\r\\n\\\n+            \\t#L3# Listen to Song No. 3#l \\r\\n\\\n+            \\r\\n\\\n+            \\t#e#L4# Enter the correct song.#l\");\n+    }\n+    else if(status == 1)\n+    {\n+        if(selection == 1)\n+        {\n+            qm.playSound(\"Party1/Failed\");\n+            qm.sendOk(\"Awkwardly familiar...\"); \n+            status = -1;  \n+        }\n+        else if(selection == 2)\n+        {\n+            qm.playSound(\"Coconut/Failed\");\n+            qm.sendOk(\"Was it this?\");\n+            status = -1;\n+        }\n+        else if(selection == 3)\n+        {\n+            qm.playSound(\"quest2293/Die\");\n+            qm.sendOk(\"You heard that?\");\n+            status = -1;\n+        }\n+        else if(selection == 4)\n+        {\n+            qm.sendGetNumber(\"Now, please tell me the answer. You only get #bone chance#k, so please choose wisely. Please enter #b1, 2, or 3#k in the window below.\\r\\n\",1,1,3);\n+        }\n+    }\n+    else if(status == 2)\n+    {\n+        if(selection == 1)\n+        {\n+            qm.sendOk(\"Obviously you don't enjoy music.\");\n+            qm.dispose();\n+        }\n+        else if(selection == 2)\n+        {\n+            qm.sendOk(\"I suppose you could get #b#eone#n#k more chance.\");\n+            qm.dispose();\n+        }\n+        else if(selection == 3)\n+        {\n+            qm.sendOk(\"So that was the song he was playing... Well, it wasn't my song after all, but I'm glad I can know that now with certainty. Thank you so much.\");\n+            qm.gainExp(32500 * qm.getPlayer().getExpRate());\n+            qm.forceCompleteQuest();\n+            qm.dispose();\n+        }\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "2704bba250df70f3d3cc1b33ee3f4001a43b3836", "filename": "scripts/quest/2325.js", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/quest/2325.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/quest/2325.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2325.js?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -0,0 +1,30 @@\n+/*\n+\tQUEST: Jame's Whereabouts (1)\n+\tNPC: James\n+*/\n+\n+var status = -1;\n+\n+function end(mode, type, selection){\n+\tif(mode == -1){\n+\t\tqm.dispose();\n+\t\treturn;\n+\t}\n+\telse if(mode == 0)\n+\t\tstatus--;\n+\telse\n+\t\tstatus++;\n+\n+\tif(status == 0){\n+\t\tqm.sendNext(\"I... I am scared... Please... please help me...\");\n+\t}\n+\telse if(status == 1){\n+\t\tqm.sendNextPrev(\"Don't be afriad, #b#p1300005##k sent me here.\", 2);\n+\t}\n+\telse if(status == 2){\n+\t\tqm.sendOk(\"What? My brother sent you here? Ahhh... I am safe now. Thank you so much...\");\n+\t\tqm.forceCompleteQuest();\n+\t\tqm.gainExp(6000 * qm.getPlayer().getExpRate());\n+\t\tqm.dispose();\n+\t}\n+}\n\\ No newline at end of file"}, {"sha": "2299f14a8ce72ae50955b73d67314b4f530cb3b6", "filename": "scripts/quest/2327.js", "status": "added", "additions": 33, "deletions": 0, "changes": 33, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/quest/2327.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/quest/2327.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2327.js?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -0,0 +1,33 @@\n+/*\n+\tQUEST: James's Whereabouts (3)\n+\tNPC: James\n+\tWhy tf does this quest exist?!\n+*/\n+\n+var status = -1;\n+\n+function start(mode, type, selection){\n+\tif(mode == -1){\n+\t\tqm.dispose();\n+\t\treturn;\n+\t}\n+\telse if(mode == 0 && status == 0){\n+\t\tqm.dispose();\n+\t\treturn;\n+\t}\n+\telse if(mode == 0)\n+\t\tstatus--;\n+\telse\n+\t\tstatus++;\n+\n+\tif(status == 0){\n+\t\tqm.sendNext(\"Hey! Thank you for bringing me a #b#t4001317##k.\");\n+\t}\n+\telse if(status == 1){\n+\t\tqm.sendNextPrev(\"I plan to escape from here wearing the #b#t4001317##k. Give me a minute to put it on. Talk to you soon...\");\n+\t}\n+\telse if(status == 2){\n+\t\tqm.forceStartQuest();\n+\t\tqm.dispose();\n+\t}\n+}\n\\ No newline at end of file"}, {"sha": "432a2f985890a1956fa548e1b871330302a07e29", "filename": "scripts/quest/2332.js", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/quest/2332.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/quest/2332.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2332.js?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -0,0 +1,17 @@\n+/*\n+\tQUEST: Where's Violetta?\n+\tNPC: none\n+*/\n+\n+var status = -1;\n+\n+function start(mode, type, selection){\n+\tif(qm.hasItem(4032388) && !qm.isQuestStarted(2332)){\n+\t\tqm.forceStartQuest();\n+\t\tqm.getPlayer().showHint(\"I must find Violetta. (quest started)\");\n+\t}\n+\tqm.dispose();\n+}\n+\n+function end(mode, type, selection){\n+}\n\\ No newline at end of file"}, {"sha": "2eea658d7cdc665db6b8fdde6ea6ae6805181eae", "filename": "scripts/quest/2333.js", "status": "added", "additions": 65, "deletions": 0, "changes": 65, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/quest/2333.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/quest/2333.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2333.js?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -0,0 +1,65 @@\n+/*\n+\tQUEST: Where's Violetta?\n+\tNPC: none\n+*/\n+importPackage(Packages.server.life);\n+\n+var status = -1;\n+var timeLimit = 10; //10 minutes\n+var eventTimer = 1000 * 60 * timeLimit;\n+var mobId = 3300008; //Prime Minister\n+\n+function start(mode, type, selection){\n+\tif(mode == -1 || (mode == 0 && status == 0)){\n+\t\tqm.dispose();\n+\t\treturn;\n+\t}\n+\telse if(mode == 0)\n+\t\tstatus--;\n+\telse\n+\t\tstatus++;\n+\n+\n+\tif(status == 0){\n+\t\tqm.sendAcceptDecline(\"Please help me!\");\n+\t}\n+\telse if(status == 1){\n+\t\tqm.sendNext(\"The #bPrime Minister#k is the one who plotted all this! Oh no! Here he comes...\");\n+\t}\n+\telse if (status == 2){\n+\t\tqm.forceStartQuest();\n+\t\tvar eim = qm.getEventInstance();\n+\t\teim.startEventTimer(eventTimer);\n+\t\tqm.getPlayer().getMap().getPortal(1).setPortalState(false);\n+\t\tqm.getPlayer().getMap().spawnMonsterOnGroundBelow(MapleLifeFactory.getMonster(mobId), new java.awt.Point(292, 143));\n+\t\tqm.dispose();\n+\t}\n+}\n+\n+function end(mode, type, selection){\n+\tif(mode == -1 || (mode == 0 && status == 0)){\n+\t\tqm.dispose();\n+\t\treturn;\n+\t}\n+\telse if(mode == 0)\n+\t\tstatus--;\n+\telse\n+\t\tstatus++;\n+\n+\n+\tif(status == 0){\n+\t\tqm.sendNext(\"Hurray! #b#h ##k you defeated the #bPrime Minister#k.\");\n+\t}\n+\telse if(status == 1){\n+\t\tqm.gainExp(15000 * qm.getPlayer().getExpRate());\n+\t\tqm.forceCompleteQuest();\n+\n+\t\tvar eim = qm.getEventInstance();\n+\t\tqm.getPlayer().getMap().getPortal(1).setPortalState(true);\n+\t\teim.stopEventTimer();\n+\t\teim.warpEventTeam(106021600);\n+\n+\t\teim.dispose();\n+\t\tqm.dispose();\n+\t}\n+}\n\\ No newline at end of file"}, {"sha": "ac0e2aea87c0a065b43fe3588dfc1b36a836c714", "filename": "scripts/quest/2334.js", "status": "added", "additions": 46, "deletions": 0, "changes": 46, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/quest/2334.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/quest/2334.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2334.js?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -0,0 +1,46 @@\n+/*\n+\tQUEST: The Identity of the Princess\n+\tNPC: Violetta\n+*/\n+\n+var status = -1;\n+\n+function start(mode, type, selection){\n+\tif(mode == -1 || (mode == 0 && status == 0)){\n+\t\tqm.dispose();\n+\t\treturn;\n+\t}\n+\telse if(mode == 0)\n+\t\tstatus--;\n+\telse\n+\t\tstatus++;\n+\n+\n+\tif(status == 0){\n+\t\tqm.forceStartQuest();\n+\t\tqm.sendNext(\"Thank you so much, #b#h ##k. You are the hero that has saved our empire from danger. I'm so grateful for what you've done. I dont know how to thank you. And please understand why I can't show you my face.\");\n+\t}\n+\telse if(status == 1){\n+\t\tqm.sendNextPrev(\"It's humiliating to say this, but ever since I was a baby, my family has kept my face veiled from the world. They feared of men falling hopelessly in love with me. I've grown so accustomed to it that I even shy away from women. I know, it's rude of me to have my back turned against the hero, but I'll need some time to muster my courage before I can greet you face to face.\");\n+\t}\n+\telse if(status == 2){\n+\t\tqm.sendNextPrev(\"I see...\\r\\n#b(Wow, how pretty could she be?)\", 2);\n+\t}\n+\telse if(status == 3){\n+\t\tqm.sendNextPrev(\"#b(What the--)\", 2);\n+\t}\n+\telse if(status == 4){\n+\t\tqm.sendNextPrev(\"#b(Is that what's considered pretty in the world of mushrooms?!)\", 2);\n+\t}\n+\telse if(status == 5){\n+\t\tqm.sendNextPrev(\"I'm so shy, I'm blushing. Anyways, thank you, #b#h ##k.\");\n+\t}\n+\telse if(status == 6){\n+\t\tqm.forceStartQuest();\n+\t\tqm.gainExp(1000 * qm.getPlayer().getExpRate());\n+\t\tqm.forceCompleteQuest();\n+\t\tqm.dispose();\n+\t}\n+}\n+\n+function end(mode, type, selection){}\n\\ No newline at end of file"}, {"sha": "96117e0e4c4dfaaff2d7632ebf0d2dff34ae84cc", "filename": "scripts/quest/2335.js", "status": "added", "additions": 41, "deletions": 0, "changes": 41, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/quest/2335.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/quest/2335.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2335.js?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -0,0 +1,41 @@\n+/*\n+\tQUEST: Eliminating the Rest\n+\tNPC: Violetta\n+*/\n+\n+var status = -1;\n+\n+function start(mode, type, selection){\n+\tif(mode == -1 || (mode == 0 && status == 0)){\n+\t\tqm.dispose();\n+\t\treturn;\n+\t}\n+\telse if(mode == 0)\n+\t\tstatus--;\n+\telse\n+\t\tstatus++;\n+\n+\n+\tif(status == 0){\n+\t\tqm.sendNext(\"This is not the end, #b#h ##k. Minions of the #bPrime Minister#k can still be found scattered throughout the castle.\");\n+\t}\n+\telse if(status == 1){\n+\t\tqm.sendAcceptDecline(\"From what I've heard, there is a place near #bSkyscraper 3#k where a group of Prime Minister's minions can be found. I've picked up a key that the Prime Minister dropped the other day. Here, use this key.\");\n+\t}\n+\telse if(status == 2){\n+\t\tif(qm.canHold(4032405)){\n+\t\t\tqm.gainItem(4032405, 1);\n+\t\t\tqm.sendNext(\"For one last time, good luck.\");\n+\t\t}\n+\t\telse{\n+\t\t\tqm.sendOk(\"Please have a free space in your ETC inventory.\");\n+\t\t\tqm.dispose();\n+\t\t}\n+\t}\n+\telse if(status == 3){\n+\t\tqm.forceStartQuest();\n+\t\tqm.dispose();\n+\t}\n+}\n+\n+function end(mode, type, selection){}\n\\ No newline at end of file"}, {"sha": "6c8aed8d0d7511d3adf68ec7b639e74c43b0fdb6", "filename": "scripts/quest/2342.js", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/quest/2342.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/scripts/quest/2342.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2342.js?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -0,0 +1,28 @@\n+/*\n+\tQUEST: Recovered Royal Seal.\n+\tNPC: Violetta\n+*/\n+\n+var status = -1;\n+\n+function start(mode, type, selection){\n+\tif(!qm.hasItem(4001318) && qm.isQuestStarted(2331) && !qm.isQuestCompleted(2331)){\n+\t\tif(qm.canHold(4001318)){\n+\t\t\tqm.forceStartQuest();\n+\t\t\tqm.gainItem(4001318, 1);\n+\t\t\tqm.forceCompleteQuest();\n+\t\t\tqm.sendOk(\"Looks like you forgot to pick up the #b#t4001318##k when you fought with the #bPrime Minister#k. This is very important to our kingdom, so please deliver this to my father as soon as possible.\");\n+\t\t\tqm.dispose();\n+\t\t}\n+\t\telse{\n+\t\t\tqm.sendOk(\"Please free up one spot in your ETC inventory\");\n+\t\t\tqm.dispose();\n+\t\t}\n+\t}\n+\telse{\n+\t\tqm.dispose();\n+\t}\n+}\n+\n+function end(mode, type, selection){\n+}\n\\ No newline at end of file"}, {"sha": "e0891432765e0d1aa8a59bae9a2fe3985c1509ee", "filename": "sql/db_database.sql", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/sql/db_database.sql", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/sql/db_database.sql", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/sql/db_database.sql?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -21079,7 +21079,8 @@ INSERT INTO `shops` (`shopid`, `npcid`) VALUES\n  -- missing shops\n INSERT INTO `shops` (`shopid`, `npcid`) VALUES\n ( 57, 2002001 ),\n-(1052116, 1052116);\n+(1052116, 1052116),\n+(1301000, 1301000);\n \n INSERT INTO `shopitems` ( `shopid`, `itemid`, `price`, `position`) VALUES\n ( 57, 3990000, 500, 1 ), "}, {"sha": "f021bd77f7ef5059c2b9326f2cf055fa48b0f8dd", "filename": "sql/db_drops.sql", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/sql/db_drops.sql", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/sql/db_drops.sql", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/sql/db_drops.sql?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -19779,7 +19779,8 @@ USE `maplesolaxia`;\n (2130100, 4001367, 1, 1, 28257, 10000),\n (1110100, 4001369, 1, 1, 28259, 10000),\n (1210101, 4001370, 1, 1, 28260, 10000),\n-(1110101, 4001371, 1, 1, 28261, 10000);\n+(1110101, 4001371, 1, 1, 28261, 10000),\n+(3300003, 4001317, 1, 1, 2326, 20000);\n # (dropperid, itemid, minqty, maxqty, questid, chance)\n \n   # delete item drops from other mobs named Freezer\n@@ -19929,6 +19930,9 @@ USE `maplesolaxia`;\n   # remove belts dropping from mobs\n   DELETE FROM drop_data WHERE itemid>=1132000 AND itemid<=1132004;\n \n+  # remove Liar Tree Sap (unusable)\n+  DELETE FROM drop_data WHERE itemid=2049101;\n+\n   # remove items being dropped from mobs in HPQ\n   DELETE FROM drop_data WHERE dropperid >= 9300061 AND dropperid <= 9300064;\n   DELETE FROM drop_data WHERE dropperid >= 9300081 AND dropperid <= 9300083;\n@@ -20549,6 +20553,12 @@ USE `maplesolaxia`;\n (9400533, 4031597, 1, 1, 0, 999999),\n (9400534, 4031597, 1, 1, 0, 999999);\n \n+ -- Thanks to DietStory dev team\n+ -- There are two Jr. Boogies mob ids for some unknown reason. 3230301 had no drops, but 3230300 had all the correct drops.\n+ -- Just copying the drops from the one with the correct drop data.\n+ INSERT IGNORE INTO drop_data (`dropperid`, `itemid`, `minimum_quantity`, `maximum_quantity`, `questid`, `chance`)\n+ SELECT 3230301, `itemid`, `minimum_quantity`, `maximum_quantity`, `questid`, `chance` FROM drop_data WHERE dropperid = 3230300;\n+\n   # update quest reactor items\n   UPDATE reactordrops SET questid=2086 WHERE itemid=4031165;\n   UPDATE reactordrops SET questid=3407 WHERE itemid=4031141;"}, {"sha": "06f45652bb703b38fab15f657f224c37eb409e0a", "filename": "sql/db_shopupdate.sql", "status": "modified", "additions": 18, "deletions": 1, "changes": 19, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/sql/db_shopupdate.sql", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/sql/db_shopupdate.sql", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/sql/db_shopupdate.sql?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -283,4 +283,21 @@ INSERT INTO `shopitems` ( `shopid`, `itemid`, `price`, `pitch`, `position`) VALU\n  (1203590, 2000003, 200, 0, 184),\n  (1203590, 2000002, 320, 0, 188),\n  (1203590, 2000001, 160, 0, 192),\n- (1203590, 2000000, 50, 0, 196);\n\\ No newline at end of file\n+ (1203590, 2000000, 50, 0, 196),\n+ (1301000, 2330000, 600, 0, 1),\n+ (1301000, 2070000, 500, 0, 2),\n+ (1301000, 2061000, 1, 0, 3),\n+ (1301000, 2060000, 1, 0, 4),\n+ (1301000, 2030000, 400, 0, 5),\n+ (1301000, 2022000, 1650, 0, 6),\n+ (1301000, 2022003, 1100, 0, 7),\n+ (1301000, 2002005, 500, 0, 8),\n+ (1301000, 2002004, 500, 0, 9),\n+ (1301000, 2002002, 500, 0, 10),\n+ (1301000, 2002001, 400, 0, 11),\n+ (1301000, 2002000, 500, 0, 12),\n+ (1301000, 2000006, 620, 0, 13),\n+ (1301000, 2000003, 200, 0, 14),\n+ (1301000, 2000002, 320, 0, 15),\n+ (1301000, 2000015, 160, 0, 16),\n+ (1301000, 2000000, 50, 0, 17);\n\\ No newline at end of file"}, {"sha": "58a332a99005b35143a5044cde9873d48e095b2c", "filename": "src/client/MapleCharacter.java", "status": "modified", "additions": 215, "deletions": 83, "changes": 298, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/client/MapleCharacter.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/client/MapleCharacter.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/MapleCharacter.java?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -242,6 +242,7 @@\n     private Map<Integer, Integer> activeCouponRates = new LinkedHashMap<>();\n     private EnumMap<MapleBuffStat, MapleBuffStatValueHolder> effects = new EnumMap<>(MapleBuffStat.class);\n     private Map<MapleBuffStat, Byte> buffEffectsCount = new LinkedHashMap<>();\n+    private Map<MapleDisease, Long> diseaseExpires = new LinkedHashMap<>();\n     private Map<Integer, Map<MapleBuffStat, MapleBuffStatValueHolder>> buffEffects = new LinkedHashMap<>();\n     private Map<Integer, Long> buffExpires = new LinkedHashMap<>();\n     private Map<Integer, MapleKeyBinding> keymap = new LinkedHashMap<>();\n@@ -255,6 +256,7 @@\n     private ScheduledFuture<?> skillCooldownTask = null;\n     private ScheduledFuture<?> buffExpireTask = null;\n     private ScheduledFuture<?> itemExpireTask = null;\n+    private ScheduledFuture<?> diseaseExpireTask = null;\n     private ScheduledFuture<?> recoveryTask = null;\n     private ScheduledFuture<?> extraRecoveryTask = null;\n     private ScheduledFuture<?> chairRecoveryTask = null;\n@@ -263,6 +265,7 @@\n     private Lock chrLock = new ReentrantLock();\n     private Lock effLock = new ReentrantLock();\n     private Lock petLock = new ReentrantLock();\n+    private Lock prtLock = new ReentrantLock();\n     private Map<Integer, Set<Integer>> excluded = new LinkedHashMap<>();\n     private Set<Integer> excludedItems = new LinkedHashSet<>();\n     private List<MapleRing> crushRings = new ArrayList<>();\n@@ -866,8 +869,9 @@ private void cancelPlayerBuffs(List<MapleBuffStat> buffstats) {\n     }\n \n     public static boolean canCreateChar(String name) {\n+        String lname = name.toLowerCase();\n         for (String nameTest : BLOCKED_NAMES) {\n-            if (name.toLowerCase().contains(nameTest)) {\n+            if (lname.contains(nameTest)) {\n                 return false;\n             }\n         }\n@@ -1056,10 +1060,11 @@ public void changeKeybinding(int key, MapleKeyBinding keybinding) {\n     \n     public MapleMap getWarpMap(int map) {\n \tMapleMap target;\n-\tif (getEventInstance() == null) {\n+        EventInstanceManager eim = getEventInstance();\n+\tif (eim == null) {\n             target = client.getChannelServer().getMapFactory().getMap(map);\n \t} else {\n-            target = getEventInstance().getMapInstance(map);\n+            target = eim.getMapInstance(map);\n \t}\n \treturn target;\n     }\n@@ -1070,11 +1075,13 @@ public void warpAhead(int map) {\n     }\n     \n     private void eventChangedMap(int map) {\n-        if (getEventInstance() != null) getEventInstance().changedMap(this, map);\n+        EventInstanceManager eim = getEventInstance();\n+        if (eim != null) eim.changedMap(this, map);\n     }\n     \n     private void eventAfterChangedMap(int map) {\n-        if (getEventInstance() != null) getEventInstance().afterChangedMap(this, map);\n+        EventInstanceManager eim = getEventInstance();\n+        if (eim != null) eim.afterChangedMap(this, map);\n     }\n     \n     public boolean canRecoverLastBanish() {\n@@ -1117,8 +1124,10 @@ public void changeMapBanish(int mapid, String portal, String msg) {\n \n     public void changeMap(int map) {\n         MapleMap warpMap;\n-        if (getEventInstance() != null) {\n-            warpMap = getEventInstance().getMapInstance(map);\n+        EventInstanceManager eim = getEventInstance();\n+        \n+        if (eim != null) {\n+            warpMap = eim.getMapInstance(map);\n         } else {\n             warpMap = client.getChannelServer().getMapFactory().getMap(map);\n         }\n@@ -1128,8 +1137,10 @@ public void changeMap(int map) {\n \n     public void changeMap(int map, int portal) {\n         MapleMap warpMap;\n-        if (getEventInstance() != null) {\n-            warpMap = getEventInstance().getMapInstance(map);\n+        EventInstanceManager eim = getEventInstance();\n+        \n+        if (eim != null) {\n+            warpMap = eim.getMapInstance(map);\n         } else {\n             warpMap = client.getChannelServer().getMapFactory().getMap(map);\n         }\n@@ -1139,8 +1150,10 @@ public void changeMap(int map, int portal) {\n \n     public void changeMap(int map, String portal) {\n         MapleMap warpMap;\n-        if (getEventInstance() != null) {\n-            warpMap = getEventInstance().getMapInstance(map);\n+        EventInstanceManager eim = getEventInstance();\n+        \n+        if (eim != null) {\n+            warpMap = eim.getMapInstance(map);\n         } else {\n             warpMap = client.getChannelServer().getMapFactory().getMap(map);\n         }\n@@ -1150,8 +1163,10 @@ public void changeMap(int map, String portal) {\n \n     public void changeMap(int map, MaplePortal portal) {\n         MapleMap warpMap;\n-        if (getEventInstance() != null) {\n-            warpMap = getEventInstance().getMapInstance(map);\n+        EventInstanceManager eim = getEventInstance();\n+        \n+        if (eim != null) {\n+            warpMap = eim.getMapInstance(map);\n         } else {\n             warpMap = client.getChannelServer().getMapFactory().getMap(map);\n         }\n@@ -1231,11 +1246,17 @@ private void changeMapInternal(final MapleMap to, final Point pos, final byte[]\n             map = to;\n             setPosition(pos);\n             map.addPlayer(this);\n-            if (party != null) {\n-                mpc.setMapId(to.getId());\n-                silentPartyUpdate();\n-                client.announce(MaplePacketCreator.updateParty(client.getChannel(), party, PartyOperation.SILENT_UPDATE, null));\n-                updatePartyMemberHP();\n+            \n+            prtLock.lock();\n+            try {\n+                if (party != null) {\n+                    mpc.setMapId(to.getId());\n+                    silentPartyUpdateInternal();\n+                    client.announce(MaplePacketCreator.updateParty(client.getChannel(), party, PartyOperation.SILENT_UPDATE, null));\n+                    updatePartyMemberHPInternal();\n+                }\n+            } finally {\n+                prtLock.unlock();\n             }\n             \n             if (getMap().getHPDec() > 0) resetHpDecreaseTask();\n@@ -1254,8 +1275,9 @@ private void changeMapInternal(final MapleMap to, final Point pos, final byte[]\n         }\n         \n         // if this event map has a gate already opened, render it\n-        if(getEventInstance() != null) {\n-            getEventInstance().recoverOpenedGate(this, map.getId());\n+        EventInstanceManager eim = getEventInstance();\n+        if(eim != null) {\n+            eim.recoverOpenedGate(this, map.getId());\n         }\n         \n         // if this map has obstacle components moving, make it do so for this client\n@@ -1446,27 +1468,32 @@ public final void pickupItem(MapleMapObject ob, int petIndex) {     // yes, one\n                         return;\n                     }\n                     if (mapitem.getMeso() > 0) {\n-                        if (this.getParty() != null) {\n-                            int mesosamm = mapitem.getMeso();\n-                            if (mesosamm > 50000 * this.getMesoRate()) {\n-                                return;\n-                            }\n-                            int partynum = 0;\n-                            for (MaplePartyCharacter partymem : this.getParty().getMembers()) {\n-                                if (partymem.isOnline() && partymem.getMapId() == this.getMap().getId() && partymem.getChannel() == client.getChannel()) {\n-                                    partynum++;\n+                        prtLock.lock();\n+                        try {\n+                            if (this.party != null) {\n+                                int mesosamm = mapitem.getMeso();\n+                                if (mesosamm > 50000 * this.getMesoRate()) {\n+                                    return;\n                                 }\n-                            }\n-                            for (MaplePartyCharacter partymem : this.getParty().getMembers()) {\n-                                if (partymem.isOnline() && partymem.getMapId() == this.getMap().getId()) {\n-                                    MapleCharacter somecharacter = client.getChannelServer().getPlayerStorage().getCharacterById(partymem.getId());\n-                                    if (somecharacter != null) {\n-                                        somecharacter.gainMeso(mesosamm / partynum, true, true, false);\n+                                int partynum = 0;\n+                                for (MaplePartyCharacter partymem : this.party.getMembers()) {\n+                                    if (partymem.isOnline() && partymem.getMapId() == this.getMap().getId() && partymem.getChannel() == client.getChannel()) {\n+                                        partynum++;\n+                                    }\n+                                }\n+                                for (MaplePartyCharacter partymem : this.party.getMembers()) {\n+                                    if (partymem.isOnline() && partymem.getMapId() == this.getMap().getId()) {\n+                                        MapleCharacter somecharacter = client.getChannelServer().getPlayerStorage().getCharacterById(partymem.getId());\n+                                        if (somecharacter != null) {\n+                                            somecharacter.gainMeso(mesosamm / partynum, true, true, false);\n+                                        }\n                                     }\n                                 }\n+                            } else {\n+                                this.gainMeso(mapitem.getMeso(), true, true, false);\n                             }\n-                        } else {\n-                            this.gainMeso(mapitem.getMeso(), true, true, false);\n+                        } finally {\n+                            prtLock.unlock();\n                         }\n                     } else if (mapitem.getItem().getItemId() / 10000 == 243) {\n                         MapleItemInformationProvider.scriptedItem info = ii.getScriptedItemInfo(mapitem.getItem().getItemId());\n@@ -1930,16 +1957,11 @@ public void giveDebuff(final MapleDisease disease, MobSkill skill) {\n                 }\n             }\n             \n-            TimerManager.getInstance().schedule(new Runnable() {\n-                @Override\n-                public void run() {\n-                    dispelDebuff(disease);\n-                }\n-            }, skill.getDuration());\n-\n             chrLock.lock();\n             try {\n-                diseases.put(disease, new MapleDiseaseValueHolder(System.currentTimeMillis(), skill.getDuration()));\n+                long curTime = System.currentTimeMillis();\n+                diseaseExpires.put(disease, curTime + skill.getDuration());\n+                diseases.put(disease, new MapleDiseaseValueHolder(curTime, skill.getDuration()));\n             } finally {\n                 chrLock.unlock();\n             }\n@@ -1959,6 +1981,7 @@ public void dispelDebuff(MapleDisease debuff) {\n             chrLock.lock();\n             try {\n                 diseases.remove(debuff);\n+                diseaseExpires.remove(debuff);\n             } finally {\n                 chrLock.unlock();\n             }\n@@ -2092,6 +2115,41 @@ public void equipChanged() {\n         }\n     }\n     \n+    public void cancelDiseaseExpireTask() {\n+        if (diseaseExpireTask != null) {\n+            diseaseExpireTask.cancel(false);\n+            diseaseExpireTask = null;\n+        }\n+    }\n+\n+    public void diseaseExpireTask() {\n+        if (diseaseExpireTask == null) {\n+            diseaseExpireTask = TimerManager.getInstance().register(new Runnable() {\n+                @Override\n+                public void run() {\n+                    Set<MapleDisease> toExpire = new LinkedHashSet<>();\n+                    \n+                    chrLock.lock();\n+                    try {\n+                        long curTime = System.currentTimeMillis();\n+                        \n+                        for(Entry<MapleDisease, Long> d : diseaseExpires.entrySet()) {\n+                            if(d.getValue() < curTime) {\n+                                toExpire.add(d.getKey());\n+                            }\n+                        }\n+                    } finally {\n+                        chrLock.unlock();\n+                    }\n+                    \n+                    for(MapleDisease d : toExpire) {\n+                        dispelDebuff(d);\n+                    }\n+                }\n+            }, 1500);\n+        }\n+    }\n+    \n     public void cancelBuffExpireTask() {\n         if (buffExpireTask != null) {\n             buffExpireTask.cancel(false);\n@@ -2285,7 +2343,7 @@ public void gainExp(int gain, int party, boolean show, boolean inChat, boolean w\n         if(party < 0) party = Integer.MAX_VALUE;   // integer overflow, heh.\n         int equip = (int)Math.min((long)((gain / 10) * pendantExp), Integer.MAX_VALUE);\n         \n-        long total = gain + equip + party;\n+        long total = (long)gain + equip + party;\n         gainExpInternal(total, equip, party, show, inChat, white);\n     }\n     \n@@ -2918,12 +2976,17 @@ private void cancelEffect(MapleStatEffect effect, boolean overwrite, long startT\n                     destroyDoor.getTownDoor().sendDestroyData(chr.getClient());\n                 }\n \n-                if (party != null) {\n-                    for (MaplePartyCharacter partyMembers : getParty().getMembers()) {\n-                        partyMembers.getPlayer().removeDoor(this.getId());\n-                        partyMembers.removeDoor(this.getId());\n+                prtLock.lock();\n+                try {\n+                    if (party != null) {\n+                        for (MaplePartyCharacter partyMembers : party.getMembers()) {\n+                            partyMembers.getPlayer().removeDoor(this.getId());\n+                            partyMembers.removeDoor(this.getId());\n+                        }\n+                        silentPartyUpdateInternal();\n                     }\n-                    silentPartyUpdate();\n+                } finally {\n+                    prtLock.unlock();\n                 }\n             }\n         }\n@@ -3816,7 +3879,12 @@ public void resetPlayerAggro() {\n     \n     public int getDoorSlot() {\n         if(doorSlot == -1) {\n-            doorSlot = (party == null) ? 0 : party.getPartyDoor(this.getId());\n+            prtLock.lock();\n+            try {\n+                doorSlot = (party == null) ? 0 : party.getPartyDoor(this.getId());\n+            } finally {\n+                prtLock.unlock();\n+            }\n         }\n         \n         return doorSlot;\n@@ -3906,20 +3974,35 @@ public int getNumControlledMonsters() {\n     }\n \n     public MapleParty getParty() {\n-        return party;\n+        prtLock.lock();\n+        try {\n+            return party;\n+        } finally {\n+            prtLock.unlock();\n+        }\n     }\n \n     public int getPartyId() {\n-        return (party != null ? party.getId() : -1);\n+        prtLock.lock();\n+        try {\n+            return (party != null ? party.getId() : -1);\n+        } finally {\n+            prtLock.unlock();\n+        }\n     }\n     \n     public List<MapleCharacter> getPartyMembers() {\n         List<MapleCharacter> list = new LinkedList<>();\n         \n-        if(party != null) {\n-            for(MaplePartyCharacter partyMembers: party.getMembers()) {\n-                list.add(partyMembers.getPlayer());\n+        prtLock.lock();\n+        try {\n+            if(party != null) {\n+                for(MaplePartyCharacter partyMembers: party.getMembers()) {\n+                    list.add(partyMembers.getPlayer());\n+                }\n             }\n+        } finally {\n+            prtLock.unlock();\n         }\n         \n         return list;\n@@ -3929,10 +4012,15 @@ public int getPartyId() {\n         List<MapleCharacter> list = new LinkedList<>();\n         int thisMapHash = this.getMap().hashCode();\n         \n-        if(party != null) {\n-            for(MaplePartyCharacter partyMembers: party.getMembers()) {\n-                if(partyMembers.getPlayer().getMap().hashCode() == thisMapHash) list.add(partyMembers.getPlayer());\n+        prtLock.lock();\n+        try {\n+            if(party != null) {\n+                for(MaplePartyCharacter partyMembers: party.getMembers()) {\n+                    if(partyMembers.getPlayer().getMap().hashCode() == thisMapHash) list.add(partyMembers.getPlayer());\n+                }\n             }\n+        } finally {\n+            prtLock.unlock();\n         }\n         \n         return list;\n@@ -4593,7 +4681,12 @@ public boolean isMapObjectVisible(MapleMapObject mo) {\n     }\n \n     public boolean isPartyLeader() {\n-        return party.getLeaderId() == getId();\n+        prtLock.lock();\n+        try {\n+            return party.getLeaderId() == getId();\n+        } finally {\n+            prtLock.unlock();\n+        }\n     }\n     \n     public boolean isGuildLeader() {    // true on guild master or jr. master\n@@ -5545,8 +5638,10 @@ public void playerNPC(MapleCharacter v, int scriptId) {\n     private void playerDead() {\n         cancelAllBuffs(false);\n         dispelDebuffs();\n-        if (getEventInstance() != null) {\n-            getEventInstance().playerKilled(this);\n+        \n+        EventInstanceManager eim = getEventInstance();\n+        if (eim != null) {\n+            eim.playerKilled(this);\n         }\n         int[] charmID = {5130000, 4031283, 4140903};\n         int possesed = 0;\n@@ -5741,16 +5836,21 @@ private void recalcLocalStats() {\n     }\n \n     public void receivePartyMemberHP() {\n-        if (party != null) {\n-            int channel = client.getChannel();\n-            for (MaplePartyCharacter partychar : party.getMembers()) {\n-                if (partychar.getMapId() == getMapId() && partychar.getChannel() == channel) {\n-                    MapleCharacter other = Server.getInstance().getWorld(world).getChannel(channel).getPlayerStorage().getCharacterByName(partychar.getName());\n-                    if (other != null) {\n-                        client.announce(MaplePacketCreator.updatePartyMemberHP(other.getId(), other.getHp(), other.getCurrentMaxHp()));\n+        prtLock.lock();\n+        try {\n+            if (party != null) {\n+                int channel = client.getChannel();\n+                for (MaplePartyCharacter partychar : party.getMembers()) {\n+                    if (partychar.getMapId() == getMapId() && partychar.getChannel() == channel) {\n+                        MapleCharacter other = Server.getInstance().getWorld(world).getChannel(channel).getPlayerStorage().getCharacterByName(partychar.getName());\n+                        if (other != null) {\n+                            client.announce(MaplePacketCreator.updatePartyMemberHP(other.getId(), other.getHp(), other.getCurrentMaxHp()));\n+                        }\n                     }\n                 }\n             }\n+        } finally {\n+            prtLock.unlock();\n         }\n     }\n \n@@ -6128,11 +6228,18 @@ public synchronized void saveToDB(boolean notAutosave) {\n                     ps.setInt(24, 0);\n                 }\n             }\n-            if (party != null) {\n-                ps.setInt(25, party.getId());\n-            } else {\n-                ps.setInt(25, -1);\n+            \n+            prtLock.lock();\n+            try {\n+                if (party != null) {\n+                    ps.setInt(25, party.getId());\n+                } else {\n+                    ps.setInt(25, -1);\n+                }\n+            } finally {\n+                prtLock.unlock();\n             }\n+            \n             ps.setInt(26, buddylist.getCapacity());\n             if (messenger != null) {\n                 ps.setInt(27, messenger.getId());\n@@ -6782,15 +6889,20 @@ public void changeName(String name) {\n         }\n     }\n \n-    public void setParty(MapleParty party) {\n-        if (party == null) {\n-            this.mpc = null;\n-            doorSlot = -1;\n-            \n-            this.party = null;\n-            //cancelMagicDoor();  // cancel magic doors if kicked out / quitted from party.\n-        } else {\n-            this.party = party;\n+    public void setParty(MapleParty p) {\n+        prtLock.lock();\n+        try {\n+            if (p == null) {\n+                this.mpc = null;\n+                doorSlot = -1;\n+\n+                party = null;\n+                //cancelMagicDoor();  // cancel magic doors if kicked out / quitted from party.\n+            } else {\n+                party = p;\n+            }\n+        } finally {\n+            prtLock.unlock();\n         }\n     }\n \n@@ -6998,6 +7110,15 @@ public void silentGiveBuffs(List<Pair<Long, PlayerBuffValueHolder>> buffs) {\n     }\n \n     public void silentPartyUpdate() {\n+        prtLock.lock();\n+        try {\n+            silentPartyUpdateInternal();\n+        } finally {\n+            prtLock.unlock();\n+        }\n+    }\n+    \n+    private void silentPartyUpdateInternal() {\n         if (party != null) {\n             Server.getInstance().getWorld(world).updateParty(party.getId(), PartyOperation.SILENT_UPDATE, getMPC());\n         }\n@@ -7118,6 +7239,15 @@ public void updateMacros(int position, SkillMacro updateMacro) {\n     }\n \n     public void updatePartyMemberHP() {\n+        prtLock.lock();\n+        try {\n+            updatePartyMemberHPInternal();\n+        } finally {\n+            prtLock.unlock();\n+        }\n+    }\n+    \n+    private void updatePartyMemberHPInternal() {\n         if (party != null) {\n             int channel = client.getChannel();\n             for (MaplePartyCharacter partychar : party.getMembers()) {\n@@ -7628,8 +7758,10 @@ public final void empty(final boolean remove) {\n         }\n         \n         cancelBuffExpireTask();\n+        cancelDiseaseExpireTask();\n         cancelSkillCooldownTask();\n         cancelExpirationTask();\n+        \n         for (ScheduledFuture<?> sf : timers) {\n             sf.cancel(false);\n         }"}, {"sha": "d3a3e4ebd47b70c9958acc45f75f22df600319fa", "filename": "src/client/MapleClient.java", "status": "modified", "additions": 12, "deletions": 11, "changes": 23, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/client/MapleClient.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/client/MapleClient.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/MapleClient.java?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -88,7 +88,7 @@\n \tpublic static final String CLIENT_KEY = \"CLIENT\";\n \tprivate MapleAESOFB send;\n \tprivate MapleAESOFB receive;\n-\tprivate IoSession session;\n+\tprivate final IoSession session;\n \tprivate MapleCharacter player;\n \tprivate int channel = 1;\n \tprivate int accId = 1;\n@@ -123,15 +123,15 @@ public MapleClient(MapleAESOFB send, MapleAESOFB receive, IoSession session) {\n \t\tthis.session = session;\n \t}\n \n-\tpublic synchronized MapleAESOFB getReceiveCrypto() {\n+\tpublic MapleAESOFB getReceiveCrypto() {\n \t\treturn receive;\n \t}\n \n-\tpublic synchronized MapleAESOFB getSendCrypto() {\n+\tpublic MapleAESOFB getSendCrypto() {\n \t\treturn send;\n \t}\n \n-\tpublic synchronized IoSession getSession() {\n+\tpublic IoSession getSession() {\n \t\treturn session;\n \t}\n         \n@@ -459,7 +459,7 @@ public String getPin() {\n \tpublic boolean checkPin(String other) {\n \t\tpinattempt++;\n \t\tif (pinattempt > 5) {\n-\t\t\tgetSession().close(true);\n+\t\t\tsession.close(false);\n \t\t}\n \t\tif (pin.equals(other)) {\n \t\t\tpinattempt = 0;\n@@ -493,7 +493,7 @@ public boolean checkPic(String other) {\n             \n \t\tpicattempt++;\n \t\tif (picattempt > 5) {\n-\t\t\tgetSession().close(true);\n+\t\t\tsession.close(false);\n \t\t}\n \t\tif (pic.equals(other)) {\n \t\t\tpicattempt = 0;\n@@ -505,7 +505,7 @@ public boolean checkPic(String other) {\n \tpublic int login(String login, String pwd) {\n \t\tloginattempt++;\n \t\tif (loginattempt > 4) {\n-\t\t\tgetSession().close(true);\n+\t\t\tsession.close(false);\n \t\t}\n \t\tint loginok = 5;\n \t\tConnection con = null;\n@@ -934,12 +934,12 @@ public final synchronized void disconnect(boolean shutdown, boolean cashshop) {/\n \t\tif (!serverTransition && isLoggedIn()) {\n \t\t\tupdateLoginState(MapleClient.LOGIN_NOTLOGGEDIN);\n \t\t\tsession.removeAttribute(MapleClient.CLIENT_KEY); // prevents double dcing during login\n-\t\t\tsession.close();\n+\t\t\tsession.close(false);\n \t\t}\n \t\tengines.clear();\n \t}\n \n-\tprivate void clear() {\n+\tprivate void clear() {  //usable when defining client = null shortly after\n \t\tthis.accountName = null;\n \t\tthis.macs = null;\n \t\tthis.hwid = null;\n@@ -1013,8 +1013,8 @@ public void sendPing() {\n \t\t\tpublic void run() {\n \t\t\t\ttry {\n \t\t\t\t\tif (lastPong < then) {\n-\t\t\t\t\t\tif (getSession() != null && getSession().isConnected()) {\n-\t\t\t\t\t\t\tgetSession().close(true);\n+\t\t\t\t\t\tif (session != null && session.isConnected()) {\n+\t\t\t\t\t\t\tsession.close(false);\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t} catch (NullPointerException e) {\n@@ -1307,6 +1307,7 @@ public void changeChannel(int channel) {\n \t\tserver.getPlayerBuffStorage().addBuffsToStorage(player.getId(), player.getAllBuffs());\n \t\tplayer.cancelAllBuffs(true);\n                 player.cancelBuffExpireTask();\n+                player.cancelDiseaseExpireTask();\n                 player.cancelSkillCooldownTask();\n \t\t//Cancelling magicdoor? Nope\n \t\t//Cancelling mounts? Noty"}, {"sha": "76e119187e0445d132a4a4a3a9c42cb38cb8ef24", "filename": "src/client/command/Commands.java", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/client/command/Commands.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/client/command/Commands.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/command/Commands.java?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -1424,12 +1424,12 @@ public static boolean executeSolaxiaCommandLv3(Channel cserv, Server srv, MapleC\n                         \n                         String sendStr = \"\";\n                         if(sub[1].equalsIgnoreCase(\"on\")) {\n-                                sendStr += \"GM Fly feature enabled. With fly active, GM's cannot attack.\";\n+                                sendStr += \"Enabled Fly feature (F1). With fly active, you cannot attack.\";\n                                 if(!srv.canFly(accid)) sendStr += \" Re-login to take effect.\";\n                             \n                                 srv.changeFly(c.getAccID(), true);\n                         } else {\n-                                player.dropMessage(6, \"GM Fly feature disabled. GM's can now attack.\");\n+                                sendStr += \"Disabled Fly feature. You can now attack.\";\n                                 if(srv.canFly(accid)) sendStr += \" Re-login to take effect.\";\n                                 \n                                 srv.changeFly(c.getAccID(), false);"}, {"sha": "566fd6496c3924ebee9e7a3ff9b756d11a941890", "filename": "src/constants/ServerConstants.java", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/constants/ServerConstants.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/constants/ServerConstants.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/constants/ServerConstants.java?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -53,6 +53,7 @@\n     public static final boolean USE_ERASE_UNTRADEABLE_DROP = true;  //Forces flagged untradeable items to disappear when dropped.\n     public static final boolean USE_ERASE_PET_ON_EXPIRATION = false;//Forces pets to be removed from inventory when expire time comes, rather than converting it to a doll.\n     public static final boolean USE_BUFF_MOST_SIGNIFICANT = true;   //When applying buffs, the player will stick with the highest stat boost among the listed, rather than overwriting stats.\n+    public static final boolean USE_UNDERLEVELED_EXP_GAIN = false;  //Players below the threshold level will gain no experience from defeating higher leveled mobs.\n     \n     //Server Rates And Experience\n     public static final int EXP_RATE = 10;\n@@ -77,10 +78,12 @@\n     \n     //Some Gameplay Enhancing Configurations\n     //Scroll Configuration\n-    public static final boolean USE_PERFECT_GM_SCROLL = true;   //Scrolls from GMs never uses up slots nor fails.\n-    public static final boolean USE_PERFECT_SCROLLING = true;   //Scrolls doesn't use slots upon failure.\n-    public static final boolean USE_ENHANCED_CHSCROLL = true;   //Equips even more powerful with chaos upgrade.\n+    public static final boolean USE_PERFECT_GM_SCROLL = false;  //Scrolls from GMs never uses up slots nor fails.\n+    public static final boolean USE_PERFECT_SCROLLING = false;  //Scrolls doesn't use slots upon failure.\n+    public static final boolean USE_ENHANCED_CHSCROLL = false;  //Equips even more powerful with chaos upgrade.\n     public static final boolean USE_ENHANCED_CRAFTING = true;   //Applys chaos scroll on every equip crafted.\n+    public static final int SCROLL_CHANCE_RATE = 0;             //Number of rolls for success on a scroll, set 0 for default.\n+    public static final int CHSCROLL_STAT_RANGE = 6;            //Stat upgrade range (-N, N) on chaos scrolls.\n     \n     //Beginner Skills Configuration\n     public static final boolean USE_ULTRA_NIMBLE_FEET = true;   //Haste-like speed & jump upgrade.\n@@ -93,7 +96,6 @@\n     public static final boolean USE_STACK_COUPON_RATES = true;  //Multiple coupons effects builds up together.\n     public static final boolean USE_PERFECT_PITCH = true;\t//For lvl 30 or above, each lvlup grants player 1 perfect pitch.\n     public static final int FAME_GAIN_BY_QUEST = 4;             //Fame gain each N quest completes, set 0 to disable.\n-    public static final int SCROLL_CHANCE_RATE = 10;            //Number of rolls for success on a scroll, set 0 for default.\n     \n     //Equipment Configuration\n     public static final boolean USE_EQUIPMNT_LVLUP_SLOTS = true;//Equips can upgrade slots at level up."}, {"sha": "847c2d84e09e5733d2b6a683f313e1ba28d3552a", "filename": "src/net/mina/MaplePacketDecoder.java", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/net/mina/MaplePacketDecoder.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/net/mina/MaplePacketDecoder.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/mina/MaplePacketDecoder.java?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -38,14 +38,21 @@\n     @Override\n     protected boolean doDecode(IoSession session, IoBuffer in, ProtocolDecoderOutput out) throws Exception {\n         final MapleClient client = (MapleClient) session.getAttribute(MapleClient.CLIENT_KEY);\n+        if(client == null) {\n+            session.close(true);\n+            return false;\n+        }\n+        \n         DecoderState decoderState = (DecoderState) session.getAttribute(DECODER_STATE_KEY);\n         if (decoderState == null) {\n             decoderState = new DecoderState();\n             session.setAttribute(DECODER_STATE_KEY, decoderState);\n         }\n+        \n+        MapleAESOFB rcvdCrypto = client.getReceiveCrypto();\n         if (in.remaining() >= 4 && decoderState.packetlength == -1) {\n             int packetHeader = in.getInt();\n-            if (!client.getReceiveCrypto().checkPacket(packetHeader)) {\n+            if (!rcvdCrypto.checkPacket(packetHeader)) {\n                 session.close(true);\n                 return false;\n             }\n@@ -57,7 +64,7 @@ protected boolean doDecode(IoSession session, IoBuffer in, ProtocolDecoderOutput\n             byte decryptedPacket[] = new byte[decoderState.packetlength];\n             in.get(decryptedPacket, 0, decoderState.packetlength);\n             decoderState.packetlength = -1;\n-            client.getReceiveCrypto().crypt(decryptedPacket);\n+            rcvdCrypto.crypt(decryptedPacket);\n             MapleCustomEncryption.decryptData(decryptedPacket);\n             out.write(decryptedPacket);\n             return true;"}, {"sha": "c14106b10cfb48e76b0d5867af512e9063d2b479", "filename": "src/net/mina/MaplePacketEncoder.java", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/net/mina/MaplePacketEncoder.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/net/mina/MaplePacketEncoder.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/mina/MaplePacketEncoder.java?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -62,6 +62,5 @@ public void encode(final IoSession session, final Object message, final Protocol\n     }\n \n     @Override\n-    public void dispose(IoSession session) throws Exception {\n-    }\n+    public void dispose(IoSession session) throws Exception {}\n }\n\\ No newline at end of file"}, {"sha": "fac2f949c023edd4a8a3b2e906abcbddd4ceea45", "filename": "src/net/server/channel/handlers/EnterCashShopHandler.java", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/net/server/channel/handlers/EnterCashShopHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/net/server/channel/handlers/EnterCashShopHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/EnterCashShopHandler.java?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -52,6 +52,7 @@ public void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {\n             Server.getInstance().getPlayerBuffStorage().addBuffsToStorage(mc.getId(), mc.getAllBuffs());\n             mc.cancelAllBuffs(true);\n             mc.cancelBuffExpireTask();\n+            mc.cancelDiseaseExpireTask();\n             mc.cancelSkillCooldownTask();\n             mc.cancelExpirationTask();\n "}, {"sha": "ba448f60930fb0784e5325f7a740bf3d41f6869c", "filename": "src/net/server/channel/handlers/EnterMTSHandler.java", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/net/server/channel/handlers/EnterMTSHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/net/server/channel/handlers/EnterMTSHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/EnterMTSHandler.java?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -61,6 +61,7 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n         Server.getInstance().getPlayerBuffStorage().addBuffsToStorage(chr.getId(), chr.getAllBuffs());\n         chr.cancelAllBuffs(true);\n         chr.cancelBuffExpireTask();\n+        chr.cancelDiseaseExpireTask();\n         chr.cancelSkillCooldownTask();\n         chr.cancelExpirationTask();\n         chr.saveToDB();"}, {"sha": "2b4f72af563853bad857da4b6bd567e0dbabac8d", "filename": "src/net/server/channel/handlers/PartyOperationHandler.java", "status": "modified", "additions": 33, "deletions": 14, "changes": 47, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/net/server/channel/handlers/PartyOperationHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/net/server/channel/handlers/PartyOperationHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/PartyOperationHandler.java?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -30,6 +30,8 @@\n import tools.data.input.SeekableLittleEndianAccessor;\n import client.MapleCharacter;\n import client.MapleClient;\n+import scripting.event.EventInstanceManager;\n+import server.maps.MapleMap;\n \n public final class PartyOperationHandler extends AbstractMaplePacketHandler {\n \n@@ -50,6 +52,7 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                         party = world.createParty(partyplayer);\n                         player.setParty(party);\n                         player.setMPC(partyplayer);\n+                        player.getMap().addPartyMember(player);\n                         player.silentPartyUpdate();\n                         c.announce(MaplePacketCreator.partyCreated(partyplayer));\n                 } else {\n@@ -59,17 +62,22 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n             }\n             case 2: {\n                 if (party != null && partyplayer != null) {\n-                        if (partyplayer.equals(party.getLeader())) {\n-                            world.updateParty(party.getId(), PartyOperation.DISBAND, partyplayer);\n-                            if (player.getEventInstance() != null) {\n-                                player.getEventInstance().disbandParty();\n-                            }\n-                        } else {\n-                            world.updateParty(party.getId(), PartyOperation.LEAVE, partyplayer);\n-                            if (player.getEventInstance() != null) {\n-                                player.getEventInstance().leftParty(player);\n-                            }\n+                    if (partyplayer.getId() == party.getLeaderId()) {\n+                        c.getWorldServer().removeMapPartyMembers(party.getId());\n+\n+                        world.updateParty(party.getId(), PartyOperation.DISBAND, partyplayer);\n+                        if (player.getEventInstance() != null) {\n+                            player.getEventInstance().disbandParty();\n                         }\n+                    } else {\n+                        player.getMap().removePartyMember(player);\n+\n+                        world.updateParty(party.getId(), PartyOperation.LEAVE, partyplayer);\n+                        if (player.getEventInstance() != null) {\n+                            player.getEventInstance().leftParty(player);\n+                        }\n+                    }\n+                        \n                     player.setParty(null);\n                 }\n                 break;\n@@ -81,6 +89,8 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                         if (party != null) {\n                             if (party.getMembers().size() < 6) {\n                                 partyplayer = new MaplePartyCharacter(player);\n+                                player.getMap().addPartyMember(player);\n+                                \n                                 world.updateParty(party.getId(), PartyOperation.JOIN, partyplayer);\n                                 player.receivePartyMemberHP();\n                                 player.updatePartyMemberHP();\n@@ -109,6 +119,7 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                             party = world.createParty(partyplayer);\n                             player.setParty(party);\n                             player.setMPC(partyplayer);\n+                            player.getMap().addPartyMember(player);\n                             c.announce(MaplePacketCreator.partyCreated(partyplayer));\n                         }\n                         if (party.getMembers().size() < 6) {\n@@ -129,12 +140,20 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                 if (partyplayer.equals(party.getLeader())) {\n                     MaplePartyCharacter expelled = party.getMemberById(cid);\n                     if (expelled != null) {\n-                        world.updateParty(party.getId(), PartyOperation.EXPEL, expelled);\n-                        if (player.getEventInstance() != null) {\n-                            if (expelled.isOnline()) {\n-                                player.getEventInstance().disbandParty();\n+                        MapleCharacter emc = expelled.getPlayer();\n+                        if(emc != null) {\n+                            MapleMap map = emc.getMap();\n+                            if(map != null) map.removePartyMember(emc);\n+                            \n+                            EventInstanceManager eim = emc.getEventInstance();\n+                            if(eim != null) {\n+                                eim.leftParty(emc);\n                             }\n+                            \n+                            emc.setParty(null);\n                         }\n+                        \n+                        world.updateParty(party.getId(), PartyOperation.EXPEL, expelled);\n                     }\n                 }\n                 break;"}, {"sha": "40aac492754680f8e5287f988c1cf5724922e270", "filename": "src/net/server/channel/handlers/PlayerLoggedinHandler.java", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/net/server/channel/handlers/PlayerLoggedinHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/net/server/channel/handlers/PlayerLoggedinHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/PlayerLoggedinHandler.java?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -263,6 +263,7 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n         player.changeSkillLevel(SkillFactory.getSkill(10000000 * player.getJobType() + 12), (byte) (player.getLinkedLevel() / 10), 20, -1);\n         player.checkBerserk(player.isHidden());\n         player.buffExpireTask();\n+        player.diseaseExpireTask();\n         player.skillCooldownTask();\n         player.expirationTask();\n         if (GameConstants.hasSPTable(player.getJob()) && player.getJob().getId() != 2001) {"}, {"sha": "8eca3685ea9e3b31f210c3f123f415fc20e18cf6", "filename": "src/net/server/world/MapleParty.java", "status": "modified", "additions": 80, "deletions": 28, "changes": 108, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/net/server/world/MapleParty.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/net/server/world/MapleParty.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/world/MapleParty.java?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -29,67 +29,106 @@\n import java.util.Map.Entry;\n import java.util.Map;\n import java.util.Comparator;\n+import java.util.concurrent.locks.ReentrantLock;\n+import java.util.concurrent.locks.Lock;\n \n public class MapleParty {\n+    private int id;\n+    \n     private int leaderId;\n-    private List<MaplePartyCharacter> members = new LinkedList<MaplePartyCharacter>();\n+    private List<MaplePartyCharacter> members = new LinkedList<>();\n     private List<MaplePartyCharacter> pqMembers = null;\n     \n     private Map<Integer, Integer> histMembers = new HashMap<>();\n     private int nextEntry = 0;\n     \n-    private int id;\n-\n+    private Lock lock = new ReentrantLock();\n+    \n     public MapleParty(int id, MaplePartyCharacter chrfor) {\n         this.leaderId = chrfor.getId();\n         this.members.add(chrfor);\n         this.id = id;\n     }\n \n     public boolean containsMembers(MaplePartyCharacter member) {\n-        return members.contains(member);\n+        lock.lock();\n+        try {\n+            return members.contains(member);\n+        } finally {\n+            lock.unlock();\n+        }\n     }\n \n     public void addMember(MaplePartyCharacter member) {\n-        histMembers.put(member.getId(), nextEntry);\n-        nextEntry++;\n-        \n-        members.add(member);\n+        lock.lock();\n+        try {\n+            histMembers.put(member.getId(), nextEntry);\n+            nextEntry++;\n+\n+            members.add(member);\n+        } finally {\n+            lock.unlock();\n+        }\n     }\n \n     public void removeMember(MaplePartyCharacter member) {\n-        histMembers.remove(member.getId());\n-        \n-        members.remove(member);\n+        lock.lock();\n+        try {\n+            histMembers.remove(member.getId());\n+\n+            members.remove(member);\n+        } finally {\n+            lock.unlock();\n+        }\n     }\n \n     public void setLeader(MaplePartyCharacter victim) {\n         this.leaderId = victim.getId();\n     }\n \n     public void updateMember(MaplePartyCharacter member) {\n-        for (int i = 0; i < members.size(); i++) {\n-            if (members.get(i).getId() == member.getId()) {\n-                members.set(i, member);\n+        lock.lock();\n+        try {\n+            for (int i = 0; i < members.size(); i++) {\n+                if (members.get(i).getId() == member.getId()) {\n+                    members.set(i, member);\n+                }\n             }\n+        } finally {\n+            lock.unlock();\n         }\n     }\n     \n     public MaplePartyCharacter getMemberById(int id) {\n-        for (MaplePartyCharacter chr : members) {\n-            if (chr.getId() == id) {\n-                return chr;\n+        lock.lock();\n+        try {\n+            for (MaplePartyCharacter chr : members) {\n+                if (chr.getId() == id) {\n+                    return chr;\n+                }\n             }\n+            return null;\n+        } finally {\n+            lock.unlock();\n         }\n-        return null;\n     }\n \n     public Collection<MaplePartyCharacter> getMembers() {\n-        return Collections.unmodifiableList(members);\n+        lock.lock();\n+        try {\n+            return Collections.unmodifiableList(members);\n+        } finally {\n+            lock.unlock();\n+        }\n     }\n     \n     public List<MaplePartyCharacter> getPartyMembers() {\n-        return members;\n+        lock.lock();\n+        try {\n+            return Collections.unmodifiableList(members);\n+        } finally {\n+            lock.unlock();\n+        }\n     }\n     \n     // used whenever entering PQs: will draw every party member that can attempt a target PQ while ingnoring those unfit.\n@@ -114,17 +153,30 @@ public int getLeaderId() {\n     }\n \n     public MaplePartyCharacter getLeader() {\n-        for(MaplePartyCharacter mpc: members) {\n-            if(mpc.getId() == leaderId) {\n-                return mpc;\n+        lock.lock();\n+        try {\n+            for(MaplePartyCharacter mpc: members) {\n+                if(mpc.getId() == leaderId) {\n+                    return mpc;\n+                }\n             }\n+\n+            return null;\n+        } finally {\n+            lock.unlock();\n         }\n-        \n-        return null;\n     }\n     \n     public byte getPartyDoor(int cid) {\n-        List<Entry<Integer, Integer>> histList = new LinkedList<>(histMembers.entrySet());\n+        List<Entry<Integer, Integer>> histList;\n+        \n+        lock.lock();\n+        try {\n+            histList = new LinkedList<>(histMembers.entrySet());\n+        } finally {\n+            lock.unlock();\n+        }\n+        \n         Collections.sort(histList, new Comparator<Entry<Integer, Integer>>()\n             {\n                 @Override\n@@ -133,13 +185,13 @@ public int compare( Entry<Integer, Integer> o1, Entry<Integer, Integer> o2 )\n                     return ( o1.getValue() ).compareTo( o2.getValue() );\n                 }\n             });\n-        \n+\n         byte slot = 0;\n         for(Entry<Integer, Integer> e: histList) {\n             if(e.getKey() == cid) break;\n             slot++;\n         }\n-        \n+\n         return slot;\n     }\n     "}, {"sha": "1dc1e453892de27b318dedd9e050991642166180", "filename": "src/net/server/world/World.java", "status": "modified", "additions": 30, "deletions": 5, "changes": 35, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/net/server/world/World.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/net/server/world/World.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/world/World.java?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -45,8 +45,10 @@\n import java.util.HashSet;\n import java.util.concurrent.ScheduledFuture;\n \n+import scripting.event.EventInstanceManager;\n import server.TimerManager;\n import server.maps.MapleHiredMerchant;\n+import server.maps.MapleMap;\n import server.MaplePlayerShop;\n import net.server.worker.CharacterAutosaverWorker;\n import net.server.worker.MountTirednessWorker;\n@@ -357,16 +359,22 @@ public void removeGuildQueued(int guildId) {\n     public MapleParty createParty(MaplePartyCharacter chrfor) {\n         int partyid = runningPartyId.getAndIncrement();\n         MapleParty party = new MapleParty(partyid, chrfor);\n-        parties.put(party.getId(), party);\n+        synchronized(parties) {\n+            parties.put(party.getId(), party);\n+        }\n         return party;\n     }\n \n     public MapleParty getParty(int partyid) {\n-        return parties.get(partyid);\n+        synchronized(parties) {\n+            return parties.get(partyid);\n+        }\n     }\n \n     public MapleParty disbandParty(int partyid) {\n-        return parties.remove(partyid);\n+        synchronized(parties) {\n+            return parties.remove(partyid);\n+        }\n     }\n \n     public void updateParty(MapleParty party, PartyOperation operation, MaplePartyCharacter target) {\n@@ -419,8 +427,10 @@ public void updateParty(int partyid, PartyOperation operation, MaplePartyCharact\n                 break;\n             case CHANGE_LEADER:\n                 MapleCharacter mc = party.getLeader().getPlayer();\n-                if(mc.getEventInstance() != null && mc.getEventInstance().isEventLeader(mc)) {\n-                    mc.getEventInstance().changedLeader(target.getPlayer());\n+                EventInstanceManager eim = mc.getEventInstance();\n+                \n+                if(eim != null && eim.isEventLeader(mc)) {\n+                    eim.changedLeader(target.getPlayer());\n                 }\n                 party.setLeader(target);\n                 break;\n@@ -430,6 +440,21 @@ public void updateParty(int partyid, PartyOperation operation, MaplePartyCharact\n         updateParty(party, operation, target);\n     }\n \n+    public void removeMapPartyMembers(int partyid) {\n+        MapleParty party = getParty(partyid);\n+        if(party == null) return;\n+        \n+        for(MaplePartyCharacter mpc : party.getMembers()) {\n+            MapleCharacter mc = mpc.getPlayer();\n+            if(mc != null) {\n+                MapleMap map = mc.getMap();\n+                if(map != null) {\n+                    map.removeParty(partyid);\n+                }\n+            }\n+        }\n+    }\n+    \n     public int find(String name) {\n         int channel = -1;\n         MapleCharacter chr = getPlayerStorage().getCharacterByName(name);"}, {"sha": "4d09583236d93d68267b4534df939b735917ed0e", "filename": "src/scripting/AbstractPlayerInteraction.java", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/scripting/AbstractPlayerInteraction.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/scripting/AbstractPlayerInteraction.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/scripting/AbstractPlayerInteraction.java?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -449,10 +449,14 @@ public Item gainItem(int id, short quantity, boolean randomStats, boolean showMe\n                                 if(item != null) {\n                                     Equip it = (Equip)item;\n                                     if(isAccessory(item.getItemId()) && it.getUpgradeSlots() <= 0) it.setUpgradeSlots(3);\n-                                }\n                                 \n-                                if(ServerConstants.USE_ENHANCED_CRAFTING == true && c.getPlayer().getCS() == true)\n-                                    item = MapleItemInformationProvider.getInstance().scrollEquipWithId(item, 2049100, true, 0, c.getPlayer().isGM());\n+                                    if(ServerConstants.USE_ENHANCED_CRAFTING == true && c.getPlayer().getCS() == true) {\n+                                        Equip eqp = (Equip)item;\n+                                        eqp.setUpgradeSlots((byte)(eqp.getUpgradeSlots() + 1));\n+\n+                                        item = MapleItemInformationProvider.getInstance().scrollEquipWithId(item, 2049100, true, 0, c.getPlayer().isGM());\n+                                    }\n+                                }\n \t\t\t} else {\n \t\t\t\titem = new Item(id, (short) 0, quantity, petId);\n \t\t\t}"}, {"sha": "05e6b7a0c339fc9e439b3b842613d975620f7301", "filename": "src/server/MapleItemInformationProvider.java", "status": "modified", "additions": 221, "deletions": 253, "changes": 474, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/server/MapleItemInformationProvider.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/server/MapleItemInformationProvider.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/MapleItemInformationProvider.java?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -568,6 +568,223 @@ private static short getShortMaxIfOverflow(int value) {\n         return (short)Math.min(Short.MAX_VALUE, value);\n     }\n     \n+    private static short chscrollRandomizedStat() {\n+        return (short) Randomizer.rand(-ServerConstants.CHSCROLL_STAT_RANGE, ServerConstants.CHSCROLL_STAT_RANGE);\n+    }\n+    \n+    private void scrollEquipWithChaos(Equip nEquip) {\n+        if(ServerConstants.SCROLL_CHANCE_RATE > 0) {\n+            int temp;\n+            short curStr, curDex, curInt, curLuk, curWatk, curWdef, curMatk, curMdef, curAcc, curAvoid, curSpeed, curJump, curHp, curMp;\n+            \n+            if(ServerConstants.USE_ENHANCED_CHSCROLL) {\n+                curStr = nEquip.getStr();\n+                curDex = nEquip.getDex();\n+                curInt = nEquip.getInt();\n+                curLuk = nEquip.getLuk();\n+                curWatk = nEquip.getWatk();\n+                curWdef = nEquip.getWdef();\n+                curMatk = nEquip.getMatk();\n+                curMdef = nEquip.getMdef();\n+                curAcc = nEquip.getAcc();\n+                curAvoid = nEquip.getAvoid();\n+                curSpeed = nEquip.getSpeed();\n+                curJump = nEquip.getJump();\n+                curHp = nEquip.getHp();\n+                curMp = nEquip.getMp();\n+            } else {\n+                curStr = Short.MIN_VALUE;\n+                curDex = Short.MIN_VALUE;\n+                curInt = Short.MIN_VALUE;\n+                curLuk = Short.MIN_VALUE;\n+                curWatk = Short.MIN_VALUE;\n+                curWdef = Short.MIN_VALUE;\n+                curMatk = Short.MIN_VALUE;\n+                curMdef = Short.MIN_VALUE;\n+                curAcc = Short.MIN_VALUE;\n+                curAvoid = Short.MIN_VALUE;\n+                curSpeed = Short.MIN_VALUE;\n+                curJump = Short.MIN_VALUE;\n+                curHp = Short.MIN_VALUE;\n+                curMp = Short.MIN_VALUE;\n+            }\n+            \n+            for(int i = 0; i < ServerConstants.SCROLL_CHANCE_RATE; i++) {\n+                if (nEquip.getStr() > 0) {\n+                    if(ServerConstants.USE_ENHANCED_CHSCROLL) temp = curStr + chscrollRandomizedStat();\n+                    else temp = nEquip.getStr() + chscrollRandomizedStat();\n+                    \n+                    curStr = getMaximumShortMaxIfOverflow(temp, curStr);\n+                }\n+                \n+                if (nEquip.getDex() > 0) {\n+                    if(ServerConstants.USE_ENHANCED_CHSCROLL) temp = curDex + chscrollRandomizedStat();\n+                    else temp = nEquip.getDex() + chscrollRandomizedStat();\n+                    \n+                    curDex = getMaximumShortMaxIfOverflow(temp, curDex);\n+                }\n+                \n+                if (nEquip.getInt() > 0) {\n+                    if(ServerConstants.USE_ENHANCED_CHSCROLL) temp = curInt + chscrollRandomizedStat();\n+                    else temp = nEquip.getInt() + chscrollRandomizedStat();\n+                    \n+                    curInt = getMaximumShortMaxIfOverflow(temp, curInt);\n+                }\n+                \n+                if (nEquip.getLuk() > 0) {\n+                    if(ServerConstants.USE_ENHANCED_CHSCROLL) temp = curLuk + chscrollRandomizedStat();\n+                    else temp = nEquip.getLuk() + chscrollRandomizedStat();\n+                    \n+                    curLuk = getMaximumShortMaxIfOverflow(temp, curLuk);\n+                }\n+                \n+                if (nEquip.getWatk() > 0) {\n+                    if(ServerConstants.USE_ENHANCED_CHSCROLL) temp = curWatk + chscrollRandomizedStat();\n+                    else temp = nEquip.getWatk() + chscrollRandomizedStat();\n+                    \n+                    curWatk = getMaximumShortMaxIfOverflow(temp, curWatk);\n+                }\n+                \n+                if (nEquip.getWdef() > 0) {\n+                    if(ServerConstants.USE_ENHANCED_CHSCROLL) temp = curWdef + chscrollRandomizedStat();\n+                    else temp = nEquip.getWdef() + chscrollRandomizedStat();\n+                    \n+                    curWdef = getMaximumShortMaxIfOverflow(temp, curWdef);\n+                }\n+                \n+                if (nEquip.getMatk() > 0) {\n+                    if(ServerConstants.USE_ENHANCED_CHSCROLL) temp = curMatk + chscrollRandomizedStat();\n+                    else temp = nEquip.getMatk() + chscrollRandomizedStat();\n+                    \n+                    curMatk = getMaximumShortMaxIfOverflow(temp, curMatk);\n+                }\n+                \n+                if (nEquip.getMdef() > 0) {\n+                    if(ServerConstants.USE_ENHANCED_CHSCROLL) temp = curMdef + chscrollRandomizedStat();\n+                    else temp = nEquip.getMdef() + chscrollRandomizedStat();\n+                    \n+                    curMdef = getMaximumShortMaxIfOverflow(temp, curMdef);\n+                }\n+                \n+                if (nEquip.getAcc() > 0) {\n+                    if(ServerConstants.USE_ENHANCED_CHSCROLL) temp = curAcc + chscrollRandomizedStat();\n+                    else temp = nEquip.getAcc() + chscrollRandomizedStat();\n+                    \n+                    curAcc = getMaximumShortMaxIfOverflow(temp, curAcc);\n+                }\n+                \n+                if (nEquip.getAvoid() > 0) {\n+                    if(ServerConstants.USE_ENHANCED_CHSCROLL) temp = curAvoid + chscrollRandomizedStat();\n+                    else temp = nEquip.getAvoid() + chscrollRandomizedStat();\n+                    \n+                    curAvoid = getMaximumShortMaxIfOverflow(temp, curAvoid);\n+                }\n+                \n+                if (nEquip.getSpeed() > 0) {\n+                    if(ServerConstants.USE_ENHANCED_CHSCROLL) temp = curSpeed + chscrollRandomizedStat();\n+                    else temp = nEquip.getSpeed() + chscrollRandomizedStat();\n+                    \n+                    curSpeed = getMaximumShortMaxIfOverflow(temp, curSpeed);\n+                }\n+                \n+                if (nEquip.getJump() > 0) {\n+                    if(ServerConstants.USE_ENHANCED_CHSCROLL) temp = curJump + chscrollRandomizedStat();\n+                    else temp = nEquip.getJump() + chscrollRandomizedStat();\n+                    \n+                    curJump = getMaximumShortMaxIfOverflow(temp, curJump);\n+                }\n+                \n+                if (nEquip.getHp() > 0) {\n+                    if(ServerConstants.USE_ENHANCED_CHSCROLL) temp = curHp + chscrollRandomizedStat();\n+                    else temp = nEquip.getHp() + chscrollRandomizedStat();\n+                    \n+                    curHp = getMaximumShortMaxIfOverflow(temp, curHp);\n+                }\n+                \n+                if (nEquip.getMp() > 0) {\n+                    if(ServerConstants.USE_ENHANCED_CHSCROLL) temp = curMp + chscrollRandomizedStat();\n+                    else temp = nEquip.getMp() + chscrollRandomizedStat();\n+                    \n+                    curMp = getMaximumShortMaxIfOverflow(temp, curMp);\n+                }\n+            }\n+            \n+            nEquip.setStr((short) Math.max(0, curStr));\n+            nEquip.setDex((short) Math.max(0, curDex));\n+            nEquip.setInt((short) Math.max(0, curInt));\n+            nEquip.setLuk((short) Math.max(0, curLuk));\n+            nEquip.setWatk((short) Math.max(0, curWatk));\n+            nEquip.setWdef((short) Math.max(0, curWdef));\n+            nEquip.setMatk((short) Math.max(0, curMatk));\n+            nEquip.setMdef((short) Math.max(0, curMdef));\n+            nEquip.setAcc((short) Math.max(0, curAcc));\n+            nEquip.setAvoid((short) Math.max(0, curAvoid));\n+            nEquip.setSpeed((short) Math.max(0, curSpeed));\n+            nEquip.setJump((short) Math.max(0, curJump));\n+            nEquip.setHp((short) Math.max(0, curHp));\n+            nEquip.setMp((short) Math.max(0, curMp));\n+        }\n+\n+        else {\n+            if (nEquip.getStr() > 0) {\n+                if(ServerConstants.USE_ENHANCED_CHSCROLL) nEquip.setStr(getMaximumShortMaxIfOverflow(nEquip.getStr(), (nEquip.getStr() + chscrollRandomizedStat())));\n+                else nEquip.setStr(getMaximumShortMaxIfOverflow(0, (nEquip.getStr() + chscrollRandomizedStat())));\n+            }\n+            if (nEquip.getDex() > 0) {\n+                if(ServerConstants.USE_ENHANCED_CHSCROLL) nEquip.setDex(getMaximumShortMaxIfOverflow(nEquip.getDex(), (nEquip.getDex() + chscrollRandomizedStat())));\n+                else nEquip.setDex(getMaximumShortMaxIfOverflow(0, (nEquip.getDex() + chscrollRandomizedStat())));\n+            }\n+            if (nEquip.getInt() > 0) {\n+                if(ServerConstants.USE_ENHANCED_CHSCROLL) nEquip.setInt(getMaximumShortMaxIfOverflow(nEquip.getInt(), (nEquip.getInt() + chscrollRandomizedStat())));\n+                else nEquip.setInt(getMaximumShortMaxIfOverflow(0, (nEquip.getInt() + chscrollRandomizedStat())));\n+            }\n+            if (nEquip.getLuk() > 0) {\n+                if(ServerConstants.USE_ENHANCED_CHSCROLL) nEquip.setLuk(getMaximumShortMaxIfOverflow(nEquip.getLuk(), (nEquip.getLuk() + chscrollRandomizedStat())));\n+                else nEquip.setLuk(getMaximumShortMaxIfOverflow(0, (nEquip.getLuk() + chscrollRandomizedStat())));\n+            }\n+            if (nEquip.getWatk() > 0) {\n+                if(ServerConstants.USE_ENHANCED_CHSCROLL) nEquip.setWatk(getMaximumShortMaxIfOverflow(nEquip.getWatk(), (nEquip.getWatk() + chscrollRandomizedStat())));\n+                else nEquip.setWatk(getMaximumShortMaxIfOverflow(0, (nEquip.getWatk() + chscrollRandomizedStat())));\n+            }\n+            if (nEquip.getWdef() > 0) {\n+                if(ServerConstants.USE_ENHANCED_CHSCROLL) nEquip.setWdef(getMaximumShortMaxIfOverflow(nEquip.getWdef(), (nEquip.getWdef() + chscrollRandomizedStat())));\n+                else nEquip.setWdef(getMaximumShortMaxIfOverflow(0, (nEquip.getWdef() + chscrollRandomizedStat())));\n+            }\n+            if (nEquip.getMatk() > 0) {\n+                if(ServerConstants.USE_ENHANCED_CHSCROLL) nEquip.setMatk(getMaximumShortMaxIfOverflow(nEquip.getMatk(), (nEquip.getMatk() + chscrollRandomizedStat())));\n+                else nEquip.setMatk(getMaximumShortMaxIfOverflow(0, (nEquip.getMatk() + chscrollRandomizedStat())));\n+            }\n+            if (nEquip.getMdef() > 0) {\n+                if(ServerConstants.USE_ENHANCED_CHSCROLL) nEquip.setMdef(getMaximumShortMaxIfOverflow(nEquip.getMdef(), (nEquip.getMdef() + chscrollRandomizedStat())));\n+                else nEquip.setMdef(getMaximumShortMaxIfOverflow(0, (nEquip.getMdef() + chscrollRandomizedStat())));\n+            }\n+            if (nEquip.getAcc() > 0) {\n+                if(ServerConstants.USE_ENHANCED_CHSCROLL) nEquip.setAcc(getMaximumShortMaxIfOverflow(nEquip.getAcc(), (nEquip.getAcc() + chscrollRandomizedStat())));\n+                else nEquip.setAcc(getMaximumShortMaxIfOverflow(0, (nEquip.getAcc() + chscrollRandomizedStat())));\n+            }\n+            if (nEquip.getAvoid() > 0) {\n+                if(ServerConstants.USE_ENHANCED_CHSCROLL) nEquip.setAvoid(getMaximumShortMaxIfOverflow(nEquip.getAvoid(), (nEquip.getAvoid() + chscrollRandomizedStat())));\n+                else nEquip.setAvoid(getMaximumShortMaxIfOverflow(0, (nEquip.getAvoid() + chscrollRandomizedStat())));\n+            }\n+            if (nEquip.getSpeed() > 0) {\n+                if(ServerConstants.USE_ENHANCED_CHSCROLL) nEquip.setSpeed(getMaximumShortMaxIfOverflow(nEquip.getSpeed(), (nEquip.getSpeed() + chscrollRandomizedStat())));\n+                else nEquip.setSpeed(getMaximumShortMaxIfOverflow(0, (nEquip.getSpeed() + chscrollRandomizedStat())));\n+            }\n+            if (nEquip.getJump() > 0) {\n+                if(ServerConstants.USE_ENHANCED_CHSCROLL) nEquip.setJump(getMaximumShortMaxIfOverflow(nEquip.getJump(), (nEquip.getJump() + chscrollRandomizedStat())));\n+                else nEquip.setJump(getMaximumShortMaxIfOverflow(0, (nEquip.getJump() + chscrollRandomizedStat())));\n+            }\n+            if (nEquip.getHp() > 0) {\n+                if(ServerConstants.USE_ENHANCED_CHSCROLL) nEquip.setHp(getMaximumShortMaxIfOverflow(nEquip.getHp(), (nEquip.getHp() + chscrollRandomizedStat())));\n+                else nEquip.setHp(getMaximumShortMaxIfOverflow(0, (nEquip.getHp() + chscrollRandomizedStat())));\n+            }\n+            if (nEquip.getMp() > 0) {\n+                if(ServerConstants.USE_ENHANCED_CHSCROLL) nEquip.setMp(getMaximumShortMaxIfOverflow(nEquip.getMp(), (nEquip.getMp() + chscrollRandomizedStat())));\n+                else nEquip.setMp(getMaximumShortMaxIfOverflow(0, (nEquip.getMp() + chscrollRandomizedStat())));\n+            }\n+        }\n+    }\n+    \n     public Item scrollEquipWithId(Item equip, int scrollId, boolean usingWhiteScroll, int vegaItemId, boolean isGM) {\n         boolean assertGM = (isGM && ServerConstants.USE_PERFECT_GM_SCROLL);\n         \n@@ -607,256 +824,7 @@ public Item scrollEquipWithId(Item equip, int scrollId, boolean usingWhiteScroll\n                         case 2049100:\n                         case 2049101:\n                         case 2049102:\n-                            int inc, i;\n-                            \n-                            if(ServerConstants.SCROLL_CHANCE_RATE > 0) {\n-                                //int tempStr, tempDex, tempInt, tempLuk, tempWatk, tempWdef, tempMatk, tempMdef, tempAcc, tempAvoid, tempSpeed, tempJump, tempHp, tempMp;\n-                                int temp;\n-                                int mdStr = nEquip.getStr(), mdDex = nEquip.getDex(), mdInt = nEquip.getInt(), mdLuk = nEquip.getLuk(), mdWatk = nEquip.getWatk(), mdWdef = nEquip.getWdef(), mdMatk = nEquip.getMatk(), mdMdef = nEquip.getMdef(), mdAcc = nEquip.getAcc(), mdAvoid = nEquip.getAvoid(), mdSpeed = nEquip.getSpeed(), mdJump = nEquip.getJump(), mdHp = nEquip.getHp(), mdMp = nEquip.getMp();\n-                                \n-                                inc = 1;\n-                                if (Randomizer.nextInt(2) == 0) {\n-                                    inc = -1;\n-                                }\n-                                if(ServerConstants.USE_ENHANCED_CHSCROLL == true) inc = 1;\n-                                \n-                                for(i = 0; i < ServerConstants.SCROLL_CHANCE_RATE; i++) {\n-                                    if (nEquip.getStr() > 0) {\n-                                        temp = (nEquip.getStr() + Randomizer.nextInt(6) * inc);\n-                                        nEquip.setStr(getMaximumShortMaxIfOverflow(mdStr, temp));\n-                                        \n-                                        if(ServerConstants.USE_ENHANCED_CHSCROLL == true) {\n-                                            mdStr = nEquip.getStr();\n-                                        }\n-                                        else {\n-                                            temp = (mdStr + temp) / 2;\n-                                            if(temp > mdStr) mdStr = temp;\n-                                        }\n-                                    }\n-                                    if (nEquip.getDex() > 0) {\n-                                        temp = (nEquip.getDex() + Randomizer.nextInt(6) * inc);\n-                                        nEquip.setDex(getMaximumShortMaxIfOverflow(mdDex, temp));\n-                                        \n-                                        if(ServerConstants.USE_ENHANCED_CHSCROLL == true) {\n-                                            mdDex = nEquip.getDex();\n-                                        }\n-                                        else {\n-                                            temp = (mdDex + temp) / 2;\n-                                            if(temp > mdDex) mdDex = temp;\n-                                        }\n-                                    }\n-                                    if (nEquip.getInt() > 0) {\n-                                        temp = (nEquip.getInt() + Randomizer.nextInt(6) * inc);\n-                                        nEquip.setInt(getMaximumShortMaxIfOverflow(mdInt, temp));\n-                                        \n-                                        if(ServerConstants.USE_ENHANCED_CHSCROLL == true) {\n-                                            mdInt = nEquip.getInt();\n-                                        }\n-                                        else {\n-                                            temp = (mdInt + temp) / 2;\n-                                            if(temp > mdInt) mdInt = temp;\n-                                        }\n-                                    }\n-                                    if (nEquip.getLuk() > 0) {\n-                                        temp = (nEquip.getLuk() + Randomizer.nextInt(6) * inc);\n-                                        nEquip.setLuk(getMaximumShortMaxIfOverflow(mdLuk, temp));\n-                                        \n-                                        if(ServerConstants.USE_ENHANCED_CHSCROLL == true) {\n-                                            mdLuk = nEquip.getLuk();\n-                                        }\n-                                        else {\n-                                            temp = (mdLuk + temp) / 2;\n-                                            if(temp > mdLuk) mdLuk = temp;\n-                                        }\n-                                    }\n-                                    if (nEquip.getWatk() > 0) {\n-                                        temp = (nEquip.getWatk() + Randomizer.nextInt(6) * inc);\n-                                        nEquip.setWatk(getMaximumShortMaxIfOverflow(mdWatk, temp));\n-                                        \n-                                        if(ServerConstants.USE_ENHANCED_CHSCROLL == true) {\n-                                            mdWatk = nEquip.getWatk();\n-                                        }\n-                                        else {\n-                                            temp = (mdWatk + temp) / 2;\n-                                            if(temp > mdWatk) mdWatk = temp;\n-                                        }\n-                                    }\n-                                    if (nEquip.getWdef() > 0) {\n-                                        temp = (nEquip.getWdef() + Randomizer.nextInt(6) * inc);\n-                                        nEquip.setWdef(getMaximumShortMaxIfOverflow(mdWdef, temp));\n-                                        \n-                                        if(ServerConstants.USE_ENHANCED_CHSCROLL == true) {\n-                                            mdWdef = nEquip.getWdef();\n-                                        }\n-                                        else {\n-                                            temp = (mdWdef + temp) / 2;\n-                                            if(temp > mdWdef) mdWdef = temp;\n-                                        }\n-                                    }\n-                                    if (nEquip.getMatk() > 0) {\n-                                        temp = (nEquip.getMatk() + Randomizer.nextInt(6) * inc);\n-                                        nEquip.setMatk(getMaximumShortMaxIfOverflow(mdMatk, temp));\n-                                        \n-                                        if(ServerConstants.USE_ENHANCED_CHSCROLL == true) {\n-                                            mdMatk = nEquip.getMatk();\n-                                        }\n-                                        else {\n-                                            temp = (mdMatk + temp) / 2;\n-                                            if(temp > mdMatk) mdMatk = temp;\n-                                        }\n-                                    }\n-                                    if (nEquip.getMdef() > 0) {\n-                                        temp = (nEquip.getMdef() + Randomizer.nextInt(6) * inc);\n-                                        nEquip.setMdef(getMaximumShortMaxIfOverflow(mdMdef, temp));\n-                                        \n-                                        if(ServerConstants.USE_ENHANCED_CHSCROLL == true) {\n-                                            mdMdef = nEquip.getMdef();\n-                                        }\n-                                        else {\n-                                            temp = (mdMdef + temp) / 2;\n-                                            if(temp > mdMdef) mdMdef = temp;\n-                                        }\n-                                    }\n-                                    if (nEquip.getAcc() > 0) {\n-                                        temp = (nEquip.getAcc() + Randomizer.nextInt(6) * inc);\n-                                        nEquip.setAcc(getMaximumShortMaxIfOverflow(mdAcc, temp));\n-                                        \n-                                        if(ServerConstants.USE_ENHANCED_CHSCROLL == true) {\n-                                            mdAcc = nEquip.getAcc();\n-                                        }\n-                                        else {\n-                                            temp = (mdAcc + temp) / 2;\n-                                            if(temp > mdAcc) mdAcc = temp;\n-                                        }\n-                                    }\n-                                    if (nEquip.getAvoid() > 0) {\n-                                        temp = (nEquip.getAvoid() + Randomizer.nextInt(6) * inc);\n-                                        nEquip.setAvoid(getMaximumShortMaxIfOverflow(mdAvoid, temp));\n-                                        \n-                                        if(ServerConstants.USE_ENHANCED_CHSCROLL == true) {\n-                                            mdAvoid = nEquip.getAvoid();\n-                                        }\n-                                        else {\n-                                            temp = (mdAvoid + temp) / 2;\n-                                            if(temp > mdAvoid) mdAvoid = temp;\n-                                        }\n-                                    }\n-                                    if (nEquip.getSpeed() > 0) {\n-                                        temp = (nEquip.getSpeed() + Randomizer.nextInt(6) * inc);\n-                                        nEquip.setSpeed(getMaximumShortMaxIfOverflow(mdSpeed, temp));\n-                                        \n-                                        if(ServerConstants.USE_ENHANCED_CHSCROLL == true) {\n-                                            mdSpeed = nEquip.getSpeed();\n-                                        }\n-                                        else {\n-                                            temp = (mdSpeed + temp) / 2;\n-                                            if(temp > mdSpeed) mdSpeed = temp;\n-                                        }\n-                                    }\n-                                    if (nEquip.getJump() > 0) {\n-                                        temp = (nEquip.getJump() + Randomizer.nextInt(6) * inc);\n-                                        nEquip.setJump(getMaximumShortMaxIfOverflow(mdJump, temp));\n-                                        \n-                                        if(ServerConstants.USE_ENHANCED_CHSCROLL == true) {\n-                                            mdJump = nEquip.getJump();\n-                                        }\n-                                        else {\n-                                            temp = (mdJump + temp) / 2;\n-                                            if(temp > mdJump) mdJump = temp;\n-                                        }\n-                                    }\n-                                    if (nEquip.getHp() > 0) {\n-                                        temp = (nEquip.getHp() + Randomizer.nextInt(6) * inc);\n-                                        nEquip.setHp(getMaximumShortMaxIfOverflow(mdHp, temp));\n-                                        \n-                                        if(ServerConstants.USE_ENHANCED_CHSCROLL == true) {\n-                                            mdHp = nEquip.getHp();\n-                                        }\n-                                        else {\n-                                            temp = (mdHp + temp) / 2;\n-                                            if(temp > mdHp) mdHp = temp;\n-                                        }\n-                                    }\n-                                    if (nEquip.getMp() > 0) {\n-                                        temp = (nEquip.getMp() + Randomizer.nextInt(6) * inc);\n-                                        nEquip.setMp(getMaximumShortMaxIfOverflow(mdMp, temp));\n-                                        \n-                                        if(ServerConstants.USE_ENHANCED_CHSCROLL == true) {\n-                                            mdMp = nEquip.getMp();\n-                                        }\n-                                        else {\n-                                            temp = (mdMp + temp) / 2;\n-                                            if(temp > mdMp) mdMp = temp;\n-                                        }\n-                                    }\n-                                }\n-                            }\n-                            \n-                            else {\n-                                inc = 1;\n-\n-                                if (Randomizer.nextInt(2) == 0) {\n-                                    inc = -1;\n-                                }\n-                                if(ServerConstants.USE_ENHANCED_CHSCROLL == true) inc = 1;\n-                                \n-                                if (nEquip.getStr() > 0) {\n-                                    if(ServerConstants.USE_ENHANCED_CHSCROLL == true) nEquip.setStr(getMaximumShortMaxIfOverflow(nEquip.getStr(), (nEquip.getStr() + Randomizer.nextInt(6) * inc)));\n-                                    else nEquip.setStr(getMaximumShortMaxIfOverflow(0, (nEquip.getStr() + Randomizer.nextInt(6) * inc)));\n-                                }\n-                                if (nEquip.getDex() > 0) {\n-                                    if(ServerConstants.USE_ENHANCED_CHSCROLL == true) nEquip.setDex(getMaximumShortMaxIfOverflow(nEquip.getDex(), (nEquip.getDex() + Randomizer.nextInt(6) * inc)));\n-                                    else nEquip.setDex(getMaximumShortMaxIfOverflow(0, (nEquip.getDex() + Randomizer.nextInt(6) * inc)));\n-                                }\n-                                if (nEquip.getInt() > 0) {\n-                                    if(ServerConstants.USE_ENHANCED_CHSCROLL == true) nEquip.setInt(getMaximumShortMaxIfOverflow(nEquip.getInt(), (nEquip.getInt() + Randomizer.nextInt(6) * inc)));\n-                                    else nEquip.setInt(getMaximumShortMaxIfOverflow(0, (nEquip.getInt() + Randomizer.nextInt(6) * inc)));\n-                                }\n-                                if (nEquip.getLuk() > 0) {\n-                                    if(ServerConstants.USE_ENHANCED_CHSCROLL == true) nEquip.setLuk(getMaximumShortMaxIfOverflow(nEquip.getLuk(), (nEquip.getLuk() + Randomizer.nextInt(6) * inc)));\n-                                    else nEquip.setLuk(getMaximumShortMaxIfOverflow(0, (nEquip.getLuk() + Randomizer.nextInt(6) * inc)));\n-                                }\n-                                if (nEquip.getWatk() > 0) {\n-                                    if(ServerConstants.USE_ENHANCED_CHSCROLL == true) nEquip.setWatk(getMaximumShortMaxIfOverflow(nEquip.getWatk(), (nEquip.getWatk() + Randomizer.nextInt(6) * inc)));\n-                                    else nEquip.setWatk(getMaximumShortMaxIfOverflow(0, (nEquip.getWatk() + Randomizer.nextInt(6) * inc)));\n-                                }\n-                                if (nEquip.getWdef() > 0) {\n-                                    if(ServerConstants.USE_ENHANCED_CHSCROLL == true) nEquip.setWdef(getMaximumShortMaxIfOverflow(nEquip.getWdef(), (nEquip.getWdef() + Randomizer.nextInt(6) * inc)));\n-                                    else nEquip.setWdef(getMaximumShortMaxIfOverflow(0, (nEquip.getWdef() + Randomizer.nextInt(6) * inc)));\n-                                }\n-                                if (nEquip.getMatk() > 0) {\n-                                    if(ServerConstants.USE_ENHANCED_CHSCROLL == true) nEquip.setMatk(getMaximumShortMaxIfOverflow(nEquip.getMatk(), (nEquip.getMatk() + Randomizer.nextInt(6) * inc)));\n-                                    else nEquip.setMatk(getMaximumShortMaxIfOverflow(0, (nEquip.getMatk() + Randomizer.nextInt(6) * inc)));\n-                                }\n-                                if (nEquip.getMdef() > 0) {\n-                                    if(ServerConstants.USE_ENHANCED_CHSCROLL == true) nEquip.setMdef(getMaximumShortMaxIfOverflow(nEquip.getMdef(), (nEquip.getMdef() + Randomizer.nextInt(6) * inc)));\n-                                    else nEquip.setMdef(getMaximumShortMaxIfOverflow(0, (nEquip.getMdef() + Randomizer.nextInt(6) * inc)));\n-                                }\n-                                if (nEquip.getAcc() > 0) {\n-                                    if(ServerConstants.USE_ENHANCED_CHSCROLL == true) nEquip.setAcc(getMaximumShortMaxIfOverflow(nEquip.getAcc(), (nEquip.getAcc() + Randomizer.nextInt(6) * inc)));\n-                                    else nEquip.setAcc(getMaximumShortMaxIfOverflow(0, (nEquip.getAcc() + Randomizer.nextInt(6) * inc)));\n-                                }\n-                                if (nEquip.getAvoid() > 0) {\n-                                    if(ServerConstants.USE_ENHANCED_CHSCROLL == true) nEquip.setAvoid(getMaximumShortMaxIfOverflow(nEquip.getAvoid(), (nEquip.getAvoid() + Randomizer.nextInt(6) * inc)));\n-                                    else nEquip.setAvoid(getMaximumShortMaxIfOverflow(0, (nEquip.getAvoid() + Randomizer.nextInt(6) * inc)));\n-                                }\n-                                if (nEquip.getSpeed() > 0) {\n-                                    if(ServerConstants.USE_ENHANCED_CHSCROLL == true) nEquip.setSpeed(getMaximumShortMaxIfOverflow(nEquip.getSpeed(), (nEquip.getSpeed() + Randomizer.nextInt(6) * inc)));\n-                                    else nEquip.setSpeed(getMaximumShortMaxIfOverflow(0, (nEquip.getSpeed() + Randomizer.nextInt(6) * inc)));\n-                                }\n-                                if (nEquip.getJump() > 0) {\n-                                    if(ServerConstants.USE_ENHANCED_CHSCROLL == true) nEquip.setJump(getMaximumShortMaxIfOverflow(nEquip.getJump(), (nEquip.getJump() + Randomizer.nextInt(6) * inc)));\n-                                    else nEquip.setJump(getMaximumShortMaxIfOverflow(0, (nEquip.getJump() + Randomizer.nextInt(6) * inc)));\n-                                }\n-                                if (nEquip.getHp() > 0) {\n-                                    if(ServerConstants.USE_ENHANCED_CHSCROLL == true) nEquip.setHp(getMaximumShortMaxIfOverflow(nEquip.getHp(), (nEquip.getHp() + Randomizer.nextInt(6) * inc)));\n-                                    else nEquip.setHp(getMaximumShortMaxIfOverflow(0, (nEquip.getHp() + Randomizer.nextInt(6) * inc)));\n-                                }\n-                                if (nEquip.getMp() > 0) {\n-                                    if(ServerConstants.USE_ENHANCED_CHSCROLL == true) nEquip.setMp(getMaximumShortMaxIfOverflow(nEquip.getMp(), (nEquip.getMp() + Randomizer.nextInt(6) * inc)));\n-                                    else nEquip.setMp(getMaximumShortMaxIfOverflow(0, (nEquip.getMp() + Randomizer.nextInt(6) * inc)));\n-                                }\n-                            }\n+                            scrollEquipWithChaos(nEquip);\n                             break;\n                             \n                         default:\n@@ -911,13 +879,13 @@ public Item scrollEquipWithId(Item equip, int scrollId, boolean usingWhiteScroll\n                             break;\n                     }\n                     if (!ItemConstants.isCleanSlate(scrollId)) {\n-                        if (ServerConstants.USE_PERFECT_SCROLLING == true && !assertGM && !usingWhiteScroll) {\n+                        if (!assertGM && !usingWhiteScroll) {\n                             nEquip.setUpgradeSlots((byte) (nEquip.getUpgradeSlots() - 1));\n                         }\n                         nEquip.setLevel((byte) (nEquip.getLevel() + 1));\n                     }\n-                }  else {\n-                    if (ServerConstants.USE_PERFECT_SCROLLING == false && !usingWhiteScroll && !ItemConstants.isCleanSlate(scrollId) && !assertGM) {\n+                } else {\n+                    if (!ServerConstants.USE_PERFECT_SCROLLING && !usingWhiteScroll && !ItemConstants.isCleanSlate(scrollId) && !assertGM) {\n                         nEquip.setUpgradeSlots((byte) (nEquip.getUpgradeSlots() - 1));\n                     }\n                     if (Randomizer.nextInt(101) < stats.get(\"cursed\")) {"}, {"sha": "14429dcbf120f0a57aef61f7698664c005c1375d", "filename": "src/server/life/MapleMonster.java", "status": "modified", "additions": 37, "deletions": 24, "changes": 61, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/server/life/MapleMonster.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/server/life/MapleMonster.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/life/MapleMonster.java?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -48,6 +48,7 @@\n import java.util.List;\n import java.util.Map;\n import java.util.Map.Entry;\n+import java.util.Set;\n import java.util.concurrent.atomic.AtomicInteger;\n import java.util.concurrent.locks.ReentrantLock;\n import net.server.world.MapleParty;\n@@ -257,26 +258,33 @@ public boolean isAttackedBy(MapleCharacter chr) {\n     }\n \n     private void distributeExperienceToParty(int pid, int exp, int killer, Map<Integer, Integer> expDist) {\n-        LinkedList<MapleCharacter> members = new LinkedList<>();\n-        Collection<MapleCharacter> chrs = map.getCharacters();\n-        \n-        for (MapleCharacter mc : chrs) {\n-            if (mc.getPartyId() == pid) {\n-                members.add(mc);\n-            }\n+        List<MapleCharacter> members = new LinkedList<>();\n+        MapleCharacter pchar = getMap().getAnyCharacterFromParty(pid);\n+        if(pchar != null) {\n+           for(MapleCharacter chr : pchar.getPartyMembersOnSameMap()) {\n+               members.add(chr);\n+           }\n+        } else {\n+            MapleCharacter chr = getMap().getCharacterById(killer);\n+            if(chr == null) return;\n+            \n+            members.add(chr);\n         }\n-        \n+            \n         final int minLevel = getLevel() - 5;\n-\n         int partyLevel = 0;\n         int leechMinLevel = 0;\n \n-        for (MapleCharacter mc : members) {\n-            if (mc.getLevel() >= minLevel) {\n-                leechMinLevel = Math.min(mc.getLevel() - 5, minLevel);\n+        if(!ServerConstants.USE_UNDERLEVELED_EXP_GAIN) {   //NO EXP WILL BE GIVEN for those who are underleveled!\n+            leechMinLevel = minLevel;\n+            \n+            for (MapleCharacter mc : members) {\n+                if (mc.getLevel() >= minLevel) {\n+                    leechMinLevel = Math.min(mc.getLevel() - 5, leechMinLevel);\n+                }\n             }\n         }\n-\n+        \n         int leechCount = 0;\n         for (MapleCharacter mc : members) {\n             if (mc.getLevel() >= leechMinLevel) {\n@@ -290,13 +298,12 @@ private void distributeExperienceToParty(int pid, int exp, int killer, Map<Integ\n         for (MapleCharacter mc : members) {\n             int id = mc.getId();\n             int level = mc.getLevel();\n-            if (expDist.containsKey(id)\n-                    || level >= leechMinLevel) {\n+            if (expDist.containsKey(id) || level >= leechMinLevel) {\n                 boolean isKiller = killer == id;\n                 boolean mostDamage = mostDamageCid == id;\n-                int xp = (int) (exp * 0.80f * level / partyLevel);\n+                int xp = (int) ((0.80f * exp * level) / partyLevel);\n                 if (mostDamage) {\n-                    xp += (exp * 0.20f);\n+                    xp += (0.20f * exp);\n                 }\n                 giveExpToCharacter(mc, xp, isKiller, leechCount);\n             }\n@@ -311,26 +318,32 @@ public void distributeExperience(int killerId) {\n         int totalHealth = getMaxHp();\n         Map<Integer, Integer> expDist = new HashMap<>();\n         Map<Integer, Integer> partyExp = new HashMap<>();\n-        // 80% of pool is split amongst all the damagers\n+        \n+        float exp8 = (0.8f * exp); // 80% of pool is split amongst all the damagers\n+        float exp2 = (0.2f * exp); // 20% of pool goes to the killer or his/her party\n+        \n         for (Entry<Integer, AtomicInteger> damage : takenDamage.entrySet()) {\n-            expDist.put(damage.getKey(), (int) (0.80f * exp * damage.getValue().get() / totalHealth));\n+            expDist.put(damage.getKey(), (int) (Math.min((exp8 * damage.getValue().get()) / totalHealth, Integer.MAX_VALUE)));\n         }\n         \n         Collection<MapleCharacter> chrs = map.getCharacters();\n         for (MapleCharacter mc : chrs) {\n             if (expDist.containsKey(mc.getId())) {\n-                boolean isKiller = mc.getId() == killerId;\n+                boolean isKiller = (mc.getId() == killerId);\n                 int xp = expDist.get(mc.getId());\n                 if (isKiller) {\n-                    xp += exp / 5;\n+                    xp = (int)Math.min(exp2 + xp, Integer.MAX_VALUE);\n                 }\n                 MapleParty p = mc.getParty();\n                 if (p != null) {\n                     int pID = p.getId();\n-                    int pXP = xp + (partyExp.containsKey(pID) ? partyExp.get(pID) : 0);\n-                    partyExp.put(pID, pXP);\n+                    long pXP = (long)xp + (partyExp.containsKey(pID) ? partyExp.get(pID) : 0);\n+                    partyExp.put(pID, (int)Math.min(pXP, Integer.MAX_VALUE));\n                 } else {\n-                    giveExpToCharacter(mc, xp, isKiller, 1);\n+                    if(ServerConstants.USE_UNDERLEVELED_EXP_GAIN || mc.getLevel() >= this.getLevel() - 5) {\n+                        //NO EXP WILL BE GIVEN for those who are underleveled!\n+                        giveExpToCharacter(mc, xp, isKiller, 1);\n+                    }\n                 }\n             }\n         }"}, {"sha": "bc2c4704ddad9d766fe2cba3aecc317200cd4bdb", "filename": "src/server/maps/MapleMap.java", "status": "modified", "additions": 78, "deletions": 0, "changes": 78, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/server/maps/MapleMap.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/server/maps/MapleMap.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/maps/MapleMap.java?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -43,6 +43,7 @@\n import java.util.HashMap;\n import java.util.LinkedHashMap;\n import java.util.LinkedHashSet;\n+import java.util.Set;\n import java.util.LinkedList;\n import java.util.List;\n import java.util.Iterator;\n@@ -93,6 +94,7 @@\n     private AtomicInteger spawnedMonstersOnMap = new AtomicInteger(0);\n     private AtomicInteger droppedItemCount = new AtomicInteger(0);\n     private Collection<MapleCharacter> characters = new LinkedHashSet<>();\n+    private Map<Integer, Set<Integer>> mapParty = new LinkedHashMap<>();\n     private Map<Integer, MaplePortal> portals = new HashMap<>();\n     private Map<Integer, Integer> backgroundTypes = new HashMap<>();\n     private Map<String, Integer> environment = new LinkedHashMap<>();\n@@ -133,6 +135,7 @@\n     private short mobInterval = 5000;\n     private boolean allowSummons = true; // All maps should have this true at the beginning\n     private int lastDoorOwner = -1;\n+    \n     // HPQ\n     private int riceCakes = 0;\n     private int bunnyDamage = 0;\n@@ -1781,10 +1784,84 @@ public void run() {\n         }, time);\n     }\n     \n+    public MapleCharacter getAnyCharacterFromParty(int partyid) {\n+        chrRLock.lock();\n+        try {\n+            Set<Integer> list = mapParty.get(partyid);\n+            if(list == null) return null;\n+            \n+            for(Integer cid : list) {\n+                for (MapleCharacter c : this.characters) {\n+                    if (c.getId() == cid) {\n+                        return c;\n+                    }\n+                }\n+            }\n+            \n+            return null;\n+        } finally {\n+            chrRLock.unlock();\n+        }\n+    }\n+    \n+    private void addPartyMemberInternal(MapleCharacter chr) {\n+        int partyid = chr.getPartyId();\n+        if(partyid == -1) return;\n+        \n+        Set<Integer> partyEntry = mapParty.get(partyid);\n+        if(partyEntry == null) {\n+            partyEntry = new LinkedHashSet<>();\n+            partyEntry.add(chr.getId());\n+            \n+            mapParty.put(partyid, partyEntry);\n+        } else {\n+            partyEntry.add(chr.getId());\n+        }\n+    }\n+    \n+    private void removePartyMemberInternal(MapleCharacter chr) {\n+        int partyid = chr.getPartyId();\n+        if(partyid == -1) return;\n+        \n+        Set<Integer> partyEntry = mapParty.get(partyid);\n+        if(partyEntry != null) {\n+            if(partyEntry.size() > 1) partyEntry.remove(chr.getId());\n+            else mapParty.remove(partyid);\n+        }\n+    }\n+    \n+    public void addPartyMember(MapleCharacter chr) {\n+        chrWLock.lock();\n+        try {\n+            addPartyMemberInternal(chr);\n+        } finally {\n+            chrWLock.unlock();\n+        }\n+    }\n+            \n+    public void removePartyMember(MapleCharacter chr) {\n+        chrWLock.lock();\n+        try {\n+            removePartyMemberInternal(chr);\n+        } finally {\n+            chrWLock.unlock();\n+        }\n+    }\n+    \n+    public void removeParty(int partyid) {\n+        chrWLock.lock();\n+        try {\n+            mapParty.remove(partyid);\n+        } finally {\n+            chrWLock.unlock();\n+        }\n+    }\n+    \n     public void addPlayer(final MapleCharacter chr) {\n         chrWLock.lock();\n         try {\n             characters.add(chr);\n+            addPartyMemberInternal(chr);\n         } finally {\n             chrWLock.unlock();\n         }\n@@ -2047,6 +2124,7 @@ public MaplePortal findMarketPortal() {\n     public void removePlayer(MapleCharacter chr) {\n         chrWLock.lock();\n         try {\n+            removePartyMemberInternal(chr);\n             characters.remove(chr);\n         } finally {\n             chrWLock.unlock();"}, {"sha": "7f91cb9c8af954166cfb636357ee2fdd7dfd04b6", "filename": "src/tools/MaplePacketCreator.java", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/tools/MaplePacketCreator.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/src/tools/MaplePacketCreator.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/tools/MaplePacketCreator.java?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -2623,7 +2623,8 @@ private static void writeLongMaskD(final MaplePacketLittleEndianWriter mplew, Li\n                 mplew.writeShort(SendOpcode.GIVE_FOREIGN_BUFF.getValue());\n                 mplew.writeInt(cid);\n                 writeLongMaskD(mplew, statups);\n-                for (int i = 0; i < statups.size(); i++) {\n+                for (Pair<MapleDisease, Integer> statup : statups) {\n+                        mplew.writeShort(statup.getRight().shortValue());\n                         mplew.writeShort(skill.getSkillId());\n                         mplew.writeShort(skill.getSkillLevel());\n                 }"}, {"sha": "182d87d4ec23d9cdce6a5b2729cb65c69113924c", "filename": "wz/Quest.wz/Check.img.xml", "status": "modified", "additions": 1, "deletions": 7, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/wz/Quest.wz/Check.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/wz/Quest.wz/Check.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Quest.wz/Check.img.xml?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -25248,6 +25248,7 @@\n     </imgdir>\n     <imgdir name=\"1\">\n       <int name=\"npc\" value=\"1052120\"/>\n+      <string name=\"endscript\" value=\"q2293e\"/>\n     </imgdir>\n   </imgdir>\n   <imgdir name=\"2300\">\n@@ -25960,13 +25961,6 @@\n     <imgdir name=\"1\">\n       <int name=\"npc\" value=\"1300002\"/>\n       <string name=\"endscript\" value=\"q2332e\"/>\n-      <int name=\"infoNumber\" value=\"2332\"/>\n-      <imgdir name=\"infoex\">\n-        <imgdir name=\"0\">\n-          <string name=\"value\" value=\"1\"/>\n-          <int name=\"cond\" value=\"1\"/>\n-        </imgdir>\n-      </imgdir>\n     </imgdir>\n     <imgdir name=\"0\">\n       <int name=\"npc\" value=\"1300002\"/>"}, {"sha": "5cbe91b8a562996682139c2f0c991bfede9babf0", "filename": "wz/Quest.wz/Say.img.xml", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/wz/Quest.wz/Say.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/wz/Quest.wz/Say.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Quest.wz/Say.img.xml?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -12772,6 +12772,7 @@\n     <imgdir name=\"0\">\n     </imgdir>\n     <imgdir name=\"1\">\n+      <string name=\"0\" value=\"I am ready to leave! Thank you so much, I will never forget what you&apos;ve done for me!\"/>\n     </imgdir>\n   </imgdir>\n   <imgdir name=\"2334\">"}, {"sha": "ed8a2cdc376ee687cd1abefcc67f2de5a20c3d7a", "filename": "wz/Sound.wz/Field.img.xml", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/wz/Sound.wz/Field.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/3a882c7f31e6f7a03fcf12c151359d49dedaa6c8/wz/Sound.wz/Field.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Sound.wz/Field.img.xml?ref=3a882c7f31e6f7a03fcf12c151359d49dedaa6c8", "patch": "@@ -76,4 +76,7 @@\n     <sound name=\"8\"/>\n     <sound name=\"9\"/>\n   </imgdir>\n+  <imgdir name=\"quest2293\">\n+    <sound name=\"Die\"/>\n+  </imgdir>\n </imgdir>"}]}]},
