{"fetchDate": "2019-12-19", "content": [{"sha": "e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "node_id": "MDY6Q29tbWl0NDUwODIwMjM6ZTBhMjdlMDBhYjE2NWMxZjQ3OGFjYjBjYzExYjY3MzAxZWJjMmVjMg==", "commit": {"author": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2017-08-11T15:41:35Z"}, "committer": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2017-08-11T15:41:35Z"}, "message": "MagatiaPQ + several minor fixes\n\nAdded MagatiaPQ. Fixed a bug on Dojo where parties quitting the boss\nfight without completing until rest point couldn't not start Dojo again\nw/o reforming the party. Fixed issues with 2nd job NPC scripts. Reverted\ncommand layout to use \"!\" and \"@\" again.", "tree": {"sha": "ace413f49048a950d89c1fd1ee3b8d7597138959", "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/trees/ace413f49048a950d89c1fd1ee3b8d7597138959"}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/commits/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "html_url": "https://github.com/ronancpl/HeavenMS/commit/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "comments_url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/comments", "author": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f78defec1f8bd7318fc6db5d391c78654e83b704", "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/f78defec1f8bd7318fc6db5d391c78654e83b704", "html_url": "https://github.com/ronancpl/HeavenMS/commit/f78defec1f8bd7318fc6db5d391c78654e83b704"}], "stats": {"total": 3843, "additions": 3316, "deletions": 527}, "files": [{"sha": "7311569e8c66d7ff0f8424ebfc40b5ae30ff8e93", "filename": "build/built-jar.properties", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/built-jar.properties", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/built-jar.properties", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/built-jar.properties?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -1,4 +1,4 @@\n-#Sat, 05 Aug 2017 19:11:00 -0300\n+#Fri, 11 Aug 2017 12:31:17 -0300\n \n \n C\\:\\\\Nexon\\\\MapleSolaxia\\\\MapleSolaxiaV2="}, {"sha": "0b4f4b4d86ffd5bf51fa1cd0d10f25e4956c1e98", "filename": "build/classes/client/MapleCharacter.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/client/MapleCharacter.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/client/MapleCharacter.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "9a450a951f574a0500a23a10a38ea098057afa8a", "filename": "build/classes/client/command/Commands.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/client/command/Commands.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/client/command/Commands.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/command/Commands.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "85c952ec4def5ede5b30036cb2c03800a4282eed", "filename": "build/classes/constants/ServerConstants.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/constants/ServerConstants.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/constants/ServerConstants.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/constants/ServerConstants.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "d43b1c36262411e956c41739097ed1fbd2642a59", "filename": "build/classes/net/server/channel/Channel$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/net/server/channel/Channel$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/net/server/channel/Channel$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/Channel$1.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "d3e01a1a88d459b23f1bc3c9467dcd956e21f334", "filename": "build/classes/net/server/channel/Channel$respawnMaps.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/net/server/channel/Channel$respawnMaps.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/net/server/channel/Channel$respawnMaps.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/Channel$respawnMaps.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "9fa72803f6ce951b794169126ae9603f56e20605", "filename": "build/classes/net/server/channel/Channel.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/net/server/channel/Channel.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/net/server/channel/Channel.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/Channel.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "a029474f54a881a9639f69a5215aae14a2c4f93c", "filename": "build/classes/net/server/channel/handlers/GeneralChatHandler.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/net/server/channel/handlers/GeneralChatHandler.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/net/server/channel/handlers/GeneralChatHandler.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/handlers/GeneralChatHandler.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "fd8a775c4c87e83ecff9b99ea4a3f25ea0c8ca35", "filename": "build/classes/net/server/channel/handlers/MobDamageMobFriendlyHandler.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/net/server/channel/handlers/MobDamageMobFriendlyHandler.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/net/server/channel/handlers/MobDamageMobFriendlyHandler.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/handlers/MobDamageMobFriendlyHandler.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "a83baa56863361519fc58c964ba2a6c8e6e819d9", "filename": "build/classes/net/server/channel/handlers/NPCTalkHandler.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/net/server/channel/handlers/NPCTalkHandler.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/net/server/channel/handlers/NPCTalkHandler.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/handlers/NPCTalkHandler.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "008216a501ac971062b8c545a8a26c1c1d63c1d0", "filename": "build/classes/scripting/event/EventInstanceManager$3.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/scripting/event/EventInstanceManager$3.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/scripting/event/EventInstanceManager$3.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/scripting/event/EventInstanceManager$3.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "d3f5685bcf6ddcd3fd1b0017653f64eeec81d79f", "filename": "build/classes/scripting/event/EventInstanceManager.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/scripting/event/EventInstanceManager.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/scripting/event/EventInstanceManager.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/scripting/event/EventInstanceManager.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "7884f38938df1f907b8713d452e28bd64756db20", "filename": "build/classes/scripting/npc/NPCConversationManager.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/scripting/npc/NPCConversationManager.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/scripting/npc/NPCConversationManager.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/scripting/npc/NPCConversationManager.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "bfcd3fe98c5b355b389d8089a0b2df00b8f14386", "filename": "build/classes/scripting/npc/NPCScriptManager.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/scripting/npc/NPCScriptManager.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/scripting/npc/NPCScriptManager.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/scripting/npc/NPCScriptManager.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "f1ca3fb5a12a36131a5d3d023276ae84467d861d", "filename": "build/classes/server/MapleTrade.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/MapleTrade.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/MapleTrade.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/MapleTrade.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "7490d5a677e8acaed68d78956fa5a3a8a834ada3", "filename": "build/classes/server/life/MapleMonster$2.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/life/MapleMonster$2.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/life/MapleMonster$2.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/life/MapleMonster$2.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "7d4d94292ff98b158c3e2ae0b09609da782a8f09", "filename": "build/classes/server/life/MapleMonster$3.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/life/MapleMonster$3.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/life/MapleMonster$3.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/life/MapleMonster$3.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "0877f7700d349149bfd38e226960330e33b5e2b3", "filename": "build/classes/server/life/MapleMonster$4.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/life/MapleMonster$4.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/life/MapleMonster$4.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/life/MapleMonster$4.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "62f960585af0e5cba22a544875fce236c749c657", "filename": "build/classes/server/life/MapleMonster$5.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/life/MapleMonster$5.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/life/MapleMonster$5.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/life/MapleMonster$5.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "42c2817f649b498e39b16231c01dbab4420a89f8", "filename": "build/classes/server/life/MapleMonster$6.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/life/MapleMonster$6.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/life/MapleMonster$6.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/life/MapleMonster$6.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "8cb72a9590099175121749e8818425e3240ac4b6", "filename": "build/classes/server/life/MapleMonster$DamageTask.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/life/MapleMonster$DamageTask.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/life/MapleMonster$DamageTask.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/life/MapleMonster$DamageTask.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "d6326eaf440a4b1099d2cd2a0b3ff348f83e6273", "filename": "build/classes/server/life/MapleMonster.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/life/MapleMonster.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/life/MapleMonster.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/life/MapleMonster.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "37ded8a47ab3ff3440cfdfa692a13c7421d20e0f", "filename": "build/classes/server/maps/MapleMap$10.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$10.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$10.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$10.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "3922c9d10d7d34cb030b6857107e1cce48cac964", "filename": "build/classes/server/maps/MapleMap$11.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$11.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$11.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$11.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "32cb4069c9053dd6e7b7bc8d8fc1e90b56e0a0e4", "filename": "build/classes/server/maps/MapleMap$12.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$12.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$12.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$12.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "a8ab525771301d6ce6d996f6a2547e44b8a21589", "filename": "build/classes/server/maps/MapleMap$13.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$13.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$13.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$13.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "d221d204c707e368e8176057763dece27f2eb37d", "filename": "build/classes/server/maps/MapleMap$14.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$14.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$14.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$14.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "29d70c2e65b47f19199383ca4b0b0afa54699ddd", "filename": "build/classes/server/maps/MapleMap$15.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$15.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$15.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$15.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "a88fdd8db853e91cb5683d591377252c9457731f", "filename": "build/classes/server/maps/MapleMap$16.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$16.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$16.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$16.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "295148f4955090898783356ece773c584120095d", "filename": "build/classes/server/maps/MapleMap$17.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$17.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$17.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$17.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "3a9ddd605bc861ea153157d693c440534446627e", "filename": "build/classes/server/maps/MapleMap$18.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$18.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$18.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$18.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "c198c7f073d478644b2fc8c31ec6b4e001930701", "filename": "build/classes/server/maps/MapleMap$19.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$19.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$19.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$19.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "7757ed86a1aab381b2e4b2379649f01c4731955d", "filename": "build/classes/server/maps/MapleMap$20.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$20.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$20.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$20.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "907852ad1bfae8c3779b886ebb8030e2dc09d0ec", "filename": "build/classes/server/maps/MapleMap$21.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$21.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$21.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$21.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "0f08e82e8df6f1e40b5efd9347b804a5c58cdaa6", "filename": "build/classes/server/maps/MapleMap$22.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$22.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$22.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$22.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "c1eff523ed110d5cc086196596997ff47cb88aaf", "filename": "build/classes/server/maps/MapleMap$23.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$23.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$23.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$23.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "9d26c31856c2ccdd606b401a9d713c727854bb5a", "filename": "build/classes/server/maps/MapleMap$24.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$24.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$24.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$24.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "c8d83c67125ac8a48ce50624e1508cc1fc6be076", "filename": "build/classes/server/maps/MapleMap$25.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$25.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$25.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$25.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "cdbb750bceb36d387a1c28bca226c0775a32262a", "filename": "build/classes/server/maps/MapleMap$26.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$26.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$26.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$26.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "37f7141fbcad645ba6cc5395044755bd2e420109", "filename": "build/classes/server/maps/MapleMap$27.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$27.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$27.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$27.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "e2c284b3bdc66a93f4eda9327d09c1e9d5cf1941", "filename": "build/classes/server/maps/MapleMap$28.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$28.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$28.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$28.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "3c1bcd00e5878bcf929e9ee0d7544d6daf8b95d6", "filename": "build/classes/server/maps/MapleMap$29$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$29$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$29$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$29$1.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "a55f375b0fff0f243c67afda9c6537ff994636f8", "filename": "build/classes/server/maps/MapleMap$29.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$29.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$29.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$29.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "c063b72f3f4f2fbb7e74c362fc64f4a3d0f195a9", "filename": "build/classes/server/maps/MapleMap$30.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$30.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$30.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$30.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "2126da4576f8f08ea9fb9eef653b14f3083fda3e", "filename": "build/classes/server/maps/MapleMap$4.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$4.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$4.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$4.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "c419e7398f9e80bc321ac0e9be224dc93b3c32cd", "filename": "build/classes/server/maps/MapleMap$5.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$5.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$5.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$5.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "01bd01c2a9f081595b71adc2ea3fa9696f263fc4", "filename": "build/classes/server/maps/MapleMap$6.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$6.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$6.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$6.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "8f059461d83fded191184b5e58adb6830a0ced26", "filename": "build/classes/server/maps/MapleMap$7.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$7.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$7.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$7.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "bc66f24371155a03f59a74fb68b83fc3fd8e0b71", "filename": "build/classes/server/maps/MapleMap$8.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$8.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$8.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$8.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "282d3dc875a831790052f64e19666ec41691b06f", "filename": "build/classes/server/maps/MapleMap$9.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$9.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$9.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$9.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "144099d1e438d59a8478c08a78a0166277e079ee", "filename": "build/classes/server/maps/MapleMap$ActivateItemReactor$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$ActivateItemReactor$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$ActivateItemReactor$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$ActivateItemReactor$1.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "50fc48dcb7fe17926b319ed32806062cbe4060ff", "filename": "build/classes/server/maps/MapleMap$ActivateItemReactor.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$ActivateItemReactor.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$ActivateItemReactor.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$ActivateItemReactor.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "ecc495f17860e9e061d50aa9c28846df53e69cd1", "filename": "build/classes/server/maps/MapleMap$ExpireMapItemJob.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$ExpireMapItemJob.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap$ExpireMapItemJob.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$ExpireMapItemJob.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "19dd863c629c3fc0ea9fb211f12ca3e4f4b93702", "filename": "build/classes/server/maps/MapleMap.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMap.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "f0bf091a626fbe23826817402a559441496036f2", "filename": "build/classes/server/maps/MapleMapFactory.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMapFactory.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleMapFactory.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMapFactory.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "ed72afb82544372facba5b2f8081500c8c021477", "filename": "build/classes/server/maps/MapleReactor$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleReactor$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleReactor$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleReactor$1.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "5287e4d57ba93d915c11770b2e6343d8ca6de2d3", "filename": "build/classes/server/maps/MapleReactor$2.class", "status": "added", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleReactor$2.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleReactor$2.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleReactor$2.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "6e595bd703eaa1f44c0aaabef6cd01322d142a45", "filename": "build/classes/server/maps/MapleReactor.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleReactor.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleReactor.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleReactor.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "19cecffa63b7a7ac3f1d926fdfccce4435b91451", "filename": "build/classes/server/maps/MapleReactorFactory.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleReactorFactory.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleReactorFactory.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleReactorFactory.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "cc77888bd6d0bcc67d02a946db28d617bf6586c4", "filename": "build/classes/server/maps/MapleReactorStats$StateData.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleReactorStats$StateData.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleReactorStats$StateData.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleReactorStats$StateData.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "35153e14599d551f99d4ad6bc83cea70f690aef0", "filename": "build/classes/server/maps/MapleReactorStats.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleReactorStats.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/server/maps/MapleReactorStats.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleReactorStats.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "f15cf30954b79675132e802f9820fef143c78c49", "filename": "build/classes/tools/MaplePacketCreator.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/tools/MaplePacketCreator.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/build/classes/tools/MaplePacketCreator.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/tools/MaplePacketCreator.class?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "71dec0ee41f6810ea5c7b0c80662fd3abb309a80", "filename": "dist/MapleSolaxia.jar", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/dist/MapleSolaxia.jar", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/dist/MapleSolaxia.jar", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/dist/MapleSolaxia.jar?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2"}, {"sha": "7cc3325526798fec79d62f5f03ee2562c6a55e73", "filename": "docs/feature_list.txt", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/docs/feature_list.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/docs/feature_list.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/docs/feature_list.txt?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -3,12 +3,21 @@ Credits:\n Ronan - Freelance Developer\n Vcoc - Freelance Developer\n \n+---------------------------\n+DISCLAIMER:\n+---------------------------\n+This is NOT intended to be a PURE v83 MapleStory server emulator (acting\n+under the clean WZ files, provided by Nexon/Wizet). There has been provided\n+a whole array of edited WZ on the Drive to be used for this server. Although\n+normal WZs will load properly, there is no guarantee in-game bugs and issues\n+may arise because of some incompatibilities with the clean files.\n+\n ---------------------------\n Feature list:\n ---------------------------\n \n PQs:\n-* HPQ/KPQ/LPQ/LMPQ/OPQ/EllinPQ/PiratePQ/HorntailPQ 100%.\n+* HPQ/KPQ/LPQ/LMPQ/OPQ/EllinPQ/PiratePQ/MagatiaPQ/HorntailPQ 100%.\n * CWKPQ as Expedition-based event 100%.\n * Expeditions: Scarga/Horntail/Showa/Zakum/Pinkbean 100%.\n * GuildPQ 100% + Guild queue with multi-lobby systems available.\n@@ -63,6 +72,6 @@ Project:\n * Organized project code.\n * Highly configurable server (see all server flags at ServerConstants).\n * Fixed/added some missing packets for MoveEnvironment, summons and others.\n-* Reviewed some Java object aspects that needed concurrency protection.\n+* Reviewed many Java object aspects that needed concurrency protection.\n \n ---------------------------\n\\ No newline at end of file"}, {"sha": "3c33402331f4b13d44fcf72138a1fe04c57b2655", "filename": "docs/mychanges_ptbr.txt", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/docs/mychanges_ptbr.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/docs/mychanges_ptbr.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/docs/mychanges_ptbr.txt?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -433,4 +433,9 @@ Ap\n Novo scroll: antibanish. Retorna ao local de onde foi banido pela ultima vez.\n Resolvido alguns problemas de concorr\ufffdncia com MapleMapFactory.\n Removidos drops inexistentes da DB.\n-Resolvido problema com GMs de level alto recebendo bloqueio MWLB.\n\\ No newline at end of file\n+Resolvido problema com GMs de level alto recebendo bloqueio MWLB.\n+\n+07 - 10 Agosto 2017,\n+Adicionada Magatia PQ.\n+Resolvido bug no Dojo impedindo mesma party de tentar entrar de novo se saiu sem acab\ufffd-la.\n+Resolvido bugs nos scripts de 2nd job.\n\\ No newline at end of file"}, {"sha": "2aeac23582f0d44693d306f076c5128a4b9395b3", "filename": "nbproject/private/private.xml", "status": "modified", "additions": 1, "deletions": 9, "changes": 10, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/nbproject/private/private.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/nbproject/private/private.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/nbproject/private/private.xml?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -3,15 +3,7 @@\n     <editor-bookmarks xmlns=\"http://www.netbeans.org/ns/editor-bookmarks/2\" lastBookmarkId=\"1\"/>\n     <open-files xmlns=\"http://www.netbeans.org/ns/projectui-open-files/2\">\n         <group>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/server/TimerManager.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/command/Commands.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/server/maps/MapMonitor.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/server/maps/MapleMapItem.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/constants/ServerConstants.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/MapleCharacter.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/server/maps/MapleMap.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/net/server/channel/handlers/AbstractDealDamageHandler.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/net/server/channel/Channel.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/scripting/event/EventInstanceManager.java</file>\n         </group>\n     </open-files>\n </project-private>"}, {"sha": "893fe61d1ec5c896a28a8280f5780842a2a8e9c0", "filename": "scripts/NPC Base.js", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/NPC%20Base.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/NPC%20Base.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/NPC%20Base.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -32,10 +32,12 @@ function start() {\n }\n \n function action(mode, type, selection) {\n+        //print(\"mode\" + mode + \"type \" + type + \" selection\" + selection + \"\\n\");\n+        \n         if (mode == -1) {\n                 cm.dispose();\n         } else {\n-                if (mode == 0 && status == 0) {\n+                if (mode == 0 && type > 0) {    // hope types 2 & 3 works as well, as 1 and 4 END CHAT\n                         cm.dispose();\n                         return;\n                 }"}, {"sha": "71fc33601614d2d1fc5debcd43ca4336f16ce19e", "filename": "scripts/event/0_EXAMPLE.js", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/event/0_EXAMPLE.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/event/0_EXAMPLE.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/0_EXAMPLE.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -88,6 +88,10 @@ function timeOut(eim) {\n \n function monsterKilled(mob, eim) {}\n \n+function friendlyKilled(mob, eim) {\n+    // Happens when a friendly mob dies\n+}\n+\n function allMonstersDead(eim) {\n     // When invoking unregisterMonster(MapleMonster mob) OR killed\n     // Happens only when size = 0\n@@ -134,7 +138,7 @@ function disbandParty(eim, player) {\n }\n \n function removePlayer(eim, player) {\n-    // Happens when the funtion NPCConversationalManager.removePlayerFromInstance() is invoked\n+    // Happens when the funtion NPCConversationManager.removePlayerFromInstance() is invoked\n }\n \n function registerCarnivalParty(eim, carnivalparty) {"}, {"sha": "4b9b2f4b9d414b719f256b42d43a9916ef883b76", "filename": "scripts/event/MagatiaPQ_A.js", "status": "added", "additions": 395, "deletions": 0, "changes": 395, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/event/MagatiaPQ_A.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/event/MagatiaPQ_A.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/MagatiaPQ_A.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,395 @@\n+/**\n+ * @author: Ronan\n+ * @event: Magatia PQ (Alcadno)\n+*/\n+\n+importPackage(Packages.server.life);\n+\n+var isPq = true;\n+var minPlayers = 4, maxPlayers = 4;\n+var minLevel = 71, maxLevel = 85;\n+var entryMap = 926110000;\n+var exitMap = 926110700;\n+var recruitMap = 261000021;\n+var clearMap = 926110700;\n+\n+var minMapId = 926110000;\n+var maxMapId = 926110600;\n+\n+var eventTime = 45;     // 45 minutes\n+\n+var lobbyRange = [0, 0];\n+\n+function init() {\n+        setEventRequirements();\n+}\n+\n+function setLobbyRange() {\n+        return lobbyRange;\n+}\n+\n+function setEventRequirements() {\n+        var reqStr = \"\";\n+        \n+        reqStr += \"\\r\\n    Number of players: \";\n+        if(maxPlayers - minPlayers >= 1) reqStr += minPlayers + \" ~ \" + maxPlayers;\n+        else reqStr += minPlayers;\n+        \n+        reqStr += \"\\r\\n    Level range: \";\n+        if(maxLevel - minLevel >= 1) reqStr += minLevel + \" ~ \" + maxLevel;\n+        else reqStr += minLevel;\n+        \n+        reqStr += \"\\r\\n    Time limit: \";\n+        reqStr += eventTime + \" minutes\";\n+        \n+        em.setProperty(\"party\", reqStr);\n+}\n+\n+function setEventExclusives(eim) {\n+        var itemSet = [4001130, 4001131, 4001132, 4001133, 4001134, 4001135];\n+        eim.setExclusiveItems(itemSet);\n+}\n+\n+function setEventRewards(eim) {\n+        var itemSet, itemQty, evLevel, expStages;\n+\n+        evLevel = 1;    //Rewards at clear PQ\n+        itemSet = [2000003, 2000002, 2000004, 2000005, 2022003, 1032016, 1032015, 1032014, 2041212, 2041020, 2040502, 2041016, 2044701, 2040301, 2043201, 2040501, 2040704, 2044001, 2043701, 2040803, 1102026, 1102028, 1102029];\n+        itemQty = [100, 100, 20, 10, 50, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1];\n+        eim.setEventRewards(evLevel, itemSet, itemQty);\n+        \n+        expStages = [0, 10000, 20000, 0, 20000, 20000, 0, 0];    //bonus exp given on CLEAR stage signal\n+        eim.setEventClearStageExp(expStages);\n+}\n+\n+function getEligibleParty(party) {      //selects, from the given party, the team that is allowed to attempt this event\n+        var eligible = [];\n+        var hasLeader = false;\n+        \n+        if(party.size() > 0) {\n+                var partyList = party.toArray();\n+\n+                for(var i = 0; i < party.size(); i++) {\n+                        var ch = partyList[i];\n+\n+                        if(ch.getMapId() == recruitMap && ch.getLevel() >= minLevel && ch.getLevel() <= maxLevel) {\n+                                if(ch.isLeader()) hasLeader = true;\n+                                eligible.push(ch);\n+                        }\n+                }\n+        }\n+        \n+        if(!(hasLeader && eligible.length >= minPlayers && eligible.length <= maxPlayers)) eligible = [];\n+        return eligible;\n+}\n+\n+function setup(level, lobbyid) {\n+        var eim = em.newInstance(\"MagatiaA\" + lobbyid);\n+        eim.setProperty(\"level\", level);\n+        \n+        eim.setIntProperty(\"isAlcadno\", 1);\n+        \n+        eim.setIntProperty(\"escortFail\", 0);\n+        eim.setIntProperty(\"yuleteTimeout\", 0);\n+        eim.setIntProperty(\"yuleteTalked\", 0);\n+        eim.setIntProperty(\"yuletePassed\", 0);\n+        eim.setIntProperty(\"npcShocked\", 0);\n+        eim.setIntProperty(\"normalClear\", 0);\n+        \n+        eim.setIntProperty(\"statusStg1\", 0);\n+        eim.setIntProperty(\"statusStg2\", 0);\n+        eim.setIntProperty(\"statusStg3\", 0);\n+        eim.setIntProperty(\"statusStg4\", 0);\n+        eim.setIntProperty(\"statusStg5\", 0);\n+        eim.setIntProperty(\"statusStg6\", 0);\n+        eim.setIntProperty(\"statusStg7\", 0);\n+        \n+        eim.getInstanceMap(926110000).resetPQ(level);\n+        eim.getInstanceMap(926110001).resetPQ(level);\n+        eim.getInstanceMap(926110100).resetPQ(level);\n+        eim.getInstanceMap(926110200).resetPQ(level);\n+        eim.getInstanceMap(926110201).resetPQ(level);\n+        eim.getInstanceMap(926110202).resetPQ(level);\n+        eim.getInstanceMap(926110203).resetPQ(level);\n+        eim.getInstanceMap(926110300).resetPQ(level);\n+        eim.getInstanceMap(926110301).resetPQ(level);\n+        eim.getInstanceMap(926110302).resetPQ(level);\n+        eim.getInstanceMap(926110303).resetPQ(level);\n+        eim.getInstanceMap(926110304).resetPQ(level);\n+        eim.getInstanceMap(926110400).resetPQ(level);\n+        eim.getInstanceMap(926110401).resetPQ(level);\n+        eim.getInstanceMap(926110500).resetPQ(level);\n+        eim.getInstanceMap(926110600).resetPQ(level);\n+        eim.getInstanceMap(926110700).resetPQ(level);\n+        \n+        eim.getInstanceMap(926110201).shuffleReactors(2518000, 2612004);\n+        eim.getInstanceMap(926110202).shuffleReactors(2518000, 2612004);\n+        \n+        eim.spawnNpc(2112010, new java.awt.Point(252, 243), eim.getInstanceMap(926110203));\n+        eim.spawnNpc(2112010, new java.awt.Point(200, 100), eim.getInstanceMap(926110401));\n+        eim.spawnNpc(2112011, new java.awt.Point(200, 100), eim.getInstanceMap(926110500));\n+        eim.spawnNpc(2112018, new java.awt.Point(200, 100), eim.getInstanceMap(926110600));\n+        \n+        respawnStages(eim);\n+        eim.startEventTimer(eventTime * 60000);\n+        setEventRewards(eim);\n+        setEventExclusives(eim);\n+        return eim;\n+}\n+\n+function shuffle(array) {\n+    var currentIndex = array.length, temporaryValue, randomIndex;\n+\n+    // While there remain elements to shuffle...\n+    while (0 !== currentIndex) {\n+\n+        // Pick a remaining element...\n+        randomIndex = Math.floor(Math.random() * currentIndex);\n+        currentIndex -= 1;\n+\n+        // And swap it with the current element.\n+        temporaryValue = array[currentIndex];\n+        array[currentIndex] = array[randomIndex];\n+        array[randomIndex] = temporaryValue;\n+    }\n+\n+    return array;\n+}\n+\n+function afterSetup(eim) {\n+        eim.setIntProperty(\"escortFail\", 0);    // refresh friendly status\n+    \n+        var books = [-1, -1, -1, -1, -1, 0, 0, 0, 0, 0, 0, 0, -1, -1, -1, -1, -1, 1, 1, 1, 1, 1, 1, 1, 2, 3];\n+        shuffle(books);\n+    \n+        eim.setIntProperty(\"stg1_b0\",  books[0]);\n+        eim.setIntProperty(\"stg1_b1\",  books[1]);\n+        eim.setIntProperty(\"stg1_b2\",  books[2]);\n+        eim.setIntProperty(\"stg1_b3\",  books[3]);\n+        eim.setIntProperty(\"stg1_b4\",  books[4]);\n+        eim.setIntProperty(\"stg1_b5\",  books[5]);\n+        eim.setIntProperty(\"stg1_b6\",  books[6]);\n+        eim.setIntProperty(\"stg1_b7\",  books[7]);\n+        eim.setIntProperty(\"stg1_b8\",  books[8]);\n+        eim.setIntProperty(\"stg1_b9\",  books[9]);\n+        eim.setIntProperty(\"stg1_b10\", books[10]);\n+        eim.setIntProperty(\"stg1_b11\", books[11]);\n+        eim.setIntProperty(\"stg1_b12\", books[12]);\n+        eim.setIntProperty(\"stg1_b13\", books[13]);\n+        eim.setIntProperty(\"stg1_b14\", books[14]);\n+        eim.setIntProperty(\"stg1_b15\", books[15]);\n+        eim.setIntProperty(\"stg1_b16\", books[16]);\n+        eim.setIntProperty(\"stg1_b17\", books[17]);\n+        eim.setIntProperty(\"stg1_b18\", books[18]);\n+        eim.setIntProperty(\"stg1_b19\", books[19]);\n+        eim.setIntProperty(\"stg1_b20\", books[20]);\n+        eim.setIntProperty(\"stg1_b21\", books[21]);\n+        eim.setIntProperty(\"stg1_b22\", books[22]);\n+        eim.setIntProperty(\"stg1_b23\", books[23]);\n+        eim.setIntProperty(\"stg1_b24\", books[24]);\n+        eim.setIntProperty(\"stg1_b25\", books[25]);\n+}\n+\n+function respawnStages(eim) {    \n+        eim.getMapInstance(926110100).instanceMapRespawn();\n+        eim.getMapInstance(926110200).instanceMapRespawn();\n+        \n+        if(!eim.isEventCleared()) {\n+            var mapobj = eim.getMapInstance(926110401);\n+            var mobcount = mapobj.countMonster(9300150);\n+            var mobobj;\n+            if(mobcount == 0) {\n+                mobobj = MapleLifeFactory.getMonster(9300150);\n+                mapobj.spawnMonsterOnGroundBelow(mobobj, new Packages.java.awt.Point(-278, -126));\n+\n+                mobobj = MapleLifeFactory.getMonster(9300150);\n+                mapobj.spawnMonsterOnGroundBelow(mobobj, new Packages.java.awt.Point(-542, -126));\n+            } else if(mobcount == 1) {\n+                mobobj = MapleLifeFactory.getMonster(9300150);\n+                mapobj.spawnMonsterOnGroundBelow(mobobj, new Packages.java.awt.Point(-542, -126));\n+            }\n+        }\n+        \n+        eim.schedule(\"respawnStages\", 15 * 1000);\n+}\n+\n+function playerEntry(eim, player) {\n+        var map = eim.getMapInstance(entryMap);\n+        player.changeMap(map, map.getPortal(0));\n+}\n+\n+function scheduledTimeout(eim) {\n+        end(eim);\n+}\n+\n+function playerUnregistered(eim, player) {}\n+\n+function playerExit(eim, player) {\n+        eim.unregisterPlayer(player);\n+        player.changeMap(exitMap, 0);\n+}\n+\n+function changedMap(eim, player, mapid) {\n+        if (mapid < minMapId || mapid > maxMapId) {\n+                if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+                        eim.unregisterPlayer(player);\n+                        end(eim);\n+                }\n+                else\n+                        eim.unregisterPlayer(player);\n+                    \n+        } else if(mapid == 926110203 && eim.getIntProperty(\"yuleteTimeout\") == 0) {\n+                eim.setIntProperty(\"yuleteTimeout\", 1);\n+                eim.schedule(\"yuleteAction\", 10 * 1000);\n+        }\n+}\n+\n+function yuleteAction(eim) {\n+        if(eim.getIntProperty(\"yuleteTalked\") == 1) {\n+                eim.setIntProperty(\"yuletePassed\", 1);\n+                \n+                eim.dropMessage(5, \"Yulete: Ugh, you guys disgust me. All I desired was to make this nation the greatest alchemy powerhouse of the entire world. If they won't accept this, I will make it true by myself, at any costs!!!\");\n+        } else {\n+                eim.dropMessage(5, \"Yulete: Hahaha... Did you really think I was going to be so disprepared knowing that the Magatia societies' dogs would be coming in my pursuit after my actions? Fools!\");\n+        }\n+        eim.setIntProperty(\"yuleteTalked\", -1);\n+        \n+        var mapobj = eim.getMapInstance(926110203);\n+        var mob1 = 9300143, mob2 = 9300144;\n+        \n+        mapobj.destroyNPC(2112010);\n+        \n+        var mobobj1, mobobj2;\n+        for(var i = 0; i < 5; i++) {\n+                mobobj1 = MapleLifeFactory.getMonster(mob1);\n+                mobobj2 = MapleLifeFactory.getMonster(mob2);\n+            \n+                mapobj.spawnMonsterOnGroundBelow(mobobj1, new Packages.java.awt.Point(-455, 135));\n+                mapobj.spawnMonsterOnGroundBelow(mobobj2, new Packages.java.awt.Point(-455, 135));\n+        }\n+        \n+\n+        for(var i = 0; i < 5; i++) {\n+                mobobj1 = MapleLifeFactory.getMonster(mob1);\n+                mobobj2 = MapleLifeFactory.getMonster(mob2);\n+            \n+                mapobj.spawnMonsterOnGroundBelow(mobobj1, new Packages.java.awt.Point(0, 135));\n+                mapobj.spawnMonsterOnGroundBelow(mobobj2, new Packages.java.awt.Point(0, 135));\n+        }\n+        \n+        \n+        for(var i = 0; i < 5; i++) {\n+                mobobj1 = MapleLifeFactory.getMonster(mob1);\n+                mobobj2 = MapleLifeFactory.getMonster(mob2);\n+            \n+                mapobj.spawnMonsterOnGroundBelow(mobobj1, new Packages.java.awt.Point(360, 135));\n+                mapobj.spawnMonsterOnGroundBelow(mobobj2, new Packages.java.awt.Point(360, 135));\n+        }\n+}\n+\n+function changedLeader(eim, leader) {\n+        var mapid = leader.getMapId();\n+        if (!eim.isEventCleared() && (mapid < minMapId || mapid > maxMapId)) {\n+                end(eim);\n+        }\n+}\n+\n+function playerDead(eim, player) {}\n+\n+function playerRevive(eim, player) { // player presses ok on the death pop up.\n+        if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+                eim.unregisterPlayer(player);\n+                end(eim);\n+        }\n+        else\n+                eim.unregisterPlayer(player);\n+}\n+\n+function playerDisconnected(eim, player) {\n+        if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+                eim.unregisterPlayer(player);\n+                end(eim);\n+        }\n+        else\n+                eim.unregisterPlayer(player);\n+}\n+\n+function leftParty(eim, player) {\n+        if (eim.isEventTeamLackingNow(false, minPlayers, player)) {\n+                eim.unregisterPlayer(player);\n+                end(eim);\n+        }\n+        else\n+                eim.unregisterPlayer(player);\n+}\n+\n+function disbandParty(eim) {\n+        end(eim);\n+}\n+\n+function monsterValue(eim, mobId) {\n+        return 1;\n+}\n+\n+function end(eim) {\n+        var party = eim.getPlayers();\n+        for (var i = 0; i < party.size(); i++) {\n+                playerExit(eim, party.get(i));\n+        }\n+        eim.dispose();\n+}\n+\n+function giveRandomEventReward(eim, player) {\n+        eim.giveEventReward(player);\n+}\n+\n+function clearPQ(eim) {\n+        eim.stopEventTimer();\n+        eim.setEventCleared();\n+}\n+\n+function monsterKilled(mob, eim) {\n+        var map = mob.getMap();\n+    \n+        if(map.getId() == 926110001 && eim.getIntProperty(\"statusStg1\") == 1) {\n+                if(map.countMonsters() == 0) {\n+                        eim.showClearEffect();\n+                        eim.giveEventPlayersStageReward(2);\n+                        eim.setIntProperty(\"statusStg2\", 1);\n+                }\n+        }\n+        else if(map.getId() == 926110203 && eim.getIntProperty(\"statusStg1\") == 1) {\n+                if(map.countMonsters() == 0) {\n+                        eim.showClearEffect();\n+                        eim.giveEventPlayersStageReward(5);\n+                        \n+                        map.getReactorByName(\"jnr6_out\").forceHitReactor(1);\n+                }\n+        } else if(mob.getId() == 9300151 || mob.getId() == 9300152) {\n+                eim.showClearEffect();\n+                eim.giveEventPlayersStageReward(7);\n+\n+                eim.spawnNpc(2112005, new java.awt.Point(-370, -150), map);\n+\n+                var gain = (eim.getIntProperty(\"escortFail\") == 1) ? 90000 : ((mob.getId() == 9300139) ? 105000 : 140000);\n+                eim.giveEventPlayersExp(gain);\n+                \n+                map.killAllMonstersNotFriendly();\n+                \n+                if(mob.getId() == 9300139) {\n+                        eim.setIntProperty(\"normalClear\", 1);\n+                }\n+                \n+                eim.clearPQ();\n+        }\n+}\n+\n+function friendlyKilled(mob, eim) {\n+        eim.setIntProperty(\"escortFail\", 1);\n+}\n+\n+function allMonstersDead(eim) {}\n+\n+function cancelSchedule() {}\n+\n+function dispose(eim) {}"}, {"sha": "debc59855033a35a395b8db23b8b735b3765abb0", "filename": "scripts/event/MagatiaPQ_Z.js", "status": "added", "additions": 395, "deletions": 0, "changes": 395, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/event/MagatiaPQ_Z.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/event/MagatiaPQ_Z.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/MagatiaPQ_Z.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,395 @@\n+/**\n+ * @author: Ronan\n+ * @event: Magatia PQ (Zenumist)\n+*/\n+\n+importPackage(Packages.server.life);\n+\n+var isPq = true;\n+var minPlayers = 4, maxPlayers = 4;\n+var minLevel = 71, maxLevel = 85;\n+var entryMap = 926100000;\n+var exitMap = 926100700;\n+var recruitMap = 261000011;\n+var clearMap = 926100700;\n+\n+var minMapId = 926100000;\n+var maxMapId = 926100600;\n+\n+var eventTime = 45;     // 45 minutes\n+\n+var lobbyRange = [0, 0];\n+\n+function init() {\n+        setEventRequirements();\n+}\n+\n+function setLobbyRange() {\n+        return lobbyRange;\n+}\n+\n+function setEventRequirements() {\n+        var reqStr = \"\";\n+        \n+        reqStr += \"\\r\\n    Number of players: \";\n+        if(maxPlayers - minPlayers >= 1) reqStr += minPlayers + \" ~ \" + maxPlayers;\n+        else reqStr += minPlayers;\n+        \n+        reqStr += \"\\r\\n    Level range: \";\n+        if(maxLevel - minLevel >= 1) reqStr += minLevel + \" ~ \" + maxLevel;\n+        else reqStr += minLevel;\n+        \n+        reqStr += \"\\r\\n    Time limit: \";\n+        reqStr += eventTime + \" minutes\";\n+        \n+        em.setProperty(\"party\", reqStr);\n+}\n+\n+function setEventExclusives(eim) {\n+        var itemSet = [4001130, 4001131, 4001132, 4001133, 4001134, 4001135];\n+        eim.setExclusiveItems(itemSet);\n+}\n+\n+function setEventRewards(eim) {\n+        var itemSet, itemQty, evLevel, expStages;\n+\n+        evLevel = 1;    //Rewards at clear PQ\n+        itemSet = [2000003, 2000002, 2000004, 2000005, 2022003, 1032016, 1032015, 1032014, 2041212, 2041020, 2040502, 2041016, 2044701, 2040301, 2043201, 2040501, 2040704, 2044001, 2043701, 2040803, 1102026, 1102028, 1102029];\n+        itemQty = [100, 100, 20, 10, 50, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1];\n+        eim.setEventRewards(evLevel, itemSet, itemQty);\n+        \n+        expStages = [0, 10000, 20000, 0, 20000, 20000, 0, 0];    //bonus exp given on CLEAR stage signal\n+        eim.setEventClearStageExp(expStages);\n+}\n+\n+function getEligibleParty(party) {      //selects, from the given party, the team that is allowed to attempt this event\n+        var eligible = [];\n+        var hasLeader = false;\n+        \n+        if(party.size() > 0) {\n+                var partyList = party.toArray();\n+\n+                for(var i = 0; i < party.size(); i++) {\n+                        var ch = partyList[i];\n+\n+                        if(ch.getMapId() == recruitMap && ch.getLevel() >= minLevel && ch.getLevel() <= maxLevel) {\n+                                if(ch.isLeader()) hasLeader = true;\n+                                eligible.push(ch);\n+                        }\n+                }\n+        }\n+        \n+        if(!(hasLeader && eligible.length >= minPlayers && eligible.length <= maxPlayers)) eligible = [];\n+        return eligible;\n+}\n+\n+function setup(level, lobbyid) {\n+        var eim = em.newInstance(\"MagatiaZ\" + lobbyid);\n+        eim.setProperty(\"level\", level);\n+        \n+        eim.setIntProperty(\"isAlcadno\", 0);\n+        \n+        eim.setIntProperty(\"escortFail\", 0);\n+        eim.setIntProperty(\"yuleteTimeout\", 0);\n+        eim.setIntProperty(\"yuleteTalked\", 0);\n+        eim.setIntProperty(\"yuletePassed\", 0);\n+        eim.setIntProperty(\"npcShocked\", 0);\n+        eim.setIntProperty(\"normalClear\", 0);\n+        \n+        eim.setIntProperty(\"statusStg1\", 0);\n+        eim.setIntProperty(\"statusStg2\", 0);\n+        eim.setIntProperty(\"statusStg3\", 0);\n+        eim.setIntProperty(\"statusStg4\", 0);\n+        eim.setIntProperty(\"statusStg5\", 0);\n+        eim.setIntProperty(\"statusStg6\", 0);\n+        eim.setIntProperty(\"statusStg7\", 0);\n+        \n+        eim.getInstanceMap(926100000).resetPQ(level);\n+        eim.getInstanceMap(926100001).resetPQ(level);\n+        eim.getInstanceMap(926100100).resetPQ(level);\n+        eim.getInstanceMap(926100200).resetPQ(level);\n+        eim.getInstanceMap(926100201).resetPQ(level);\n+        eim.getInstanceMap(926100202).resetPQ(level);\n+        eim.getInstanceMap(926100203).resetPQ(level);\n+        eim.getInstanceMap(926100300).resetPQ(level);\n+        eim.getInstanceMap(926100301).resetPQ(level);\n+        eim.getInstanceMap(926100302).resetPQ(level);\n+        eim.getInstanceMap(926100303).resetPQ(level);\n+        eim.getInstanceMap(926100304).resetPQ(level);\n+        eim.getInstanceMap(926100400).resetPQ(level);\n+        eim.getInstanceMap(926100401).resetPQ(level);\n+        eim.getInstanceMap(926100500).resetPQ(level);\n+        eim.getInstanceMap(926100600).resetPQ(level);\n+        eim.getInstanceMap(926100700).resetPQ(level);\n+        \n+        eim.getInstanceMap(926100201).shuffleReactors(2518000, 2612004);\n+        eim.getInstanceMap(926100202).shuffleReactors(2518000, 2612004);\n+        \n+        eim.spawnNpc(2112000, new java.awt.Point(252, 243), eim.getInstanceMap(926100203));\n+        eim.spawnNpc(2112000, new java.awt.Point(200, 100), eim.getInstanceMap(926100401));\n+        eim.spawnNpc(2112001, new java.awt.Point(200, 100), eim.getInstanceMap(926100500));\n+        eim.spawnNpc(2112018, new java.awt.Point(200, 100), eim.getInstanceMap(926100600));\n+        \n+        respawnStages(eim);\n+        eim.startEventTimer(eventTime * 60000);\n+        setEventRewards(eim);\n+        setEventExclusives(eim);\n+        return eim;\n+}\n+\n+function shuffle(array) {\n+    var currentIndex = array.length, temporaryValue, randomIndex;\n+\n+    // While there remain elements to shuffle...\n+    while (0 !== currentIndex) {\n+\n+        // Pick a remaining element...\n+        randomIndex = Math.floor(Math.random() * currentIndex);\n+        currentIndex -= 1;\n+\n+        // And swap it with the current element.\n+        temporaryValue = array[currentIndex];\n+        array[currentIndex] = array[randomIndex];\n+        array[randomIndex] = temporaryValue;\n+    }\n+\n+    return array;\n+}\n+\n+function afterSetup(eim) {\n+        eim.setIntProperty(\"escortFail\", 0);    // refresh friendly status\n+    \n+        var books = [-1, -1, -1, -1, -1, 0, 0, 0, 0, 0, 0, 0, -1, -1, -1, -1, -1, 1, 1, 1, 1, 1, 1, 1, 2, 3];\n+        shuffle(books);\n+    \n+        eim.setIntProperty(\"stg1_b0\",  books[0]);\n+        eim.setIntProperty(\"stg1_b1\",  books[1]);\n+        eim.setIntProperty(\"stg1_b2\",  books[2]);\n+        eim.setIntProperty(\"stg1_b3\",  books[3]);\n+        eim.setIntProperty(\"stg1_b4\",  books[4]);\n+        eim.setIntProperty(\"stg1_b5\",  books[5]);\n+        eim.setIntProperty(\"stg1_b6\",  books[6]);\n+        eim.setIntProperty(\"stg1_b7\",  books[7]);\n+        eim.setIntProperty(\"stg1_b8\",  books[8]);\n+        eim.setIntProperty(\"stg1_b9\",  books[9]);\n+        eim.setIntProperty(\"stg1_b10\", books[10]);\n+        eim.setIntProperty(\"stg1_b11\", books[11]);\n+        eim.setIntProperty(\"stg1_b12\", books[12]);\n+        eim.setIntProperty(\"stg1_b13\", books[13]);\n+        eim.setIntProperty(\"stg1_b14\", books[14]);\n+        eim.setIntProperty(\"stg1_b15\", books[15]);\n+        eim.setIntProperty(\"stg1_b16\", books[16]);\n+        eim.setIntProperty(\"stg1_b17\", books[17]);\n+        eim.setIntProperty(\"stg1_b18\", books[18]);\n+        eim.setIntProperty(\"stg1_b19\", books[19]);\n+        eim.setIntProperty(\"stg1_b20\", books[20]);\n+        eim.setIntProperty(\"stg1_b21\", books[21]);\n+        eim.setIntProperty(\"stg1_b22\", books[22]);\n+        eim.setIntProperty(\"stg1_b23\", books[23]);\n+        eim.setIntProperty(\"stg1_b24\", books[24]);\n+        eim.setIntProperty(\"stg1_b25\", books[25]);\n+}\n+\n+function respawnStages(eim) {    \n+        eim.getMapInstance(926100100).instanceMapRespawn();\n+        eim.getMapInstance(926100200).instanceMapRespawn();\n+        \n+        if(!eim.isEventCleared()) {\n+            var mapobj = eim.getMapInstance(926100401);\n+            var mobcount = mapobj.countMonster(9300150);\n+            var mobobj;\n+            if(mobcount == 0) {\n+                mobobj = MapleLifeFactory.getMonster(9300150);\n+                mapobj.spawnMonsterOnGroundBelow(mobobj, new Packages.java.awt.Point(-278, -126));\n+\n+                mobobj = MapleLifeFactory.getMonster(9300150);\n+                mapobj.spawnMonsterOnGroundBelow(mobobj, new Packages.java.awt.Point(-542, -126));\n+            } else if(mobcount == 1) {\n+                mobobj = MapleLifeFactory.getMonster(9300150);\n+                mapobj.spawnMonsterOnGroundBelow(mobobj, new Packages.java.awt.Point(-542, -126));\n+            }\n+        }\n+        \n+        eim.schedule(\"respawnStages\", 15 * 1000);\n+}\n+\n+function playerEntry(eim, player) {\n+        var map = eim.getMapInstance(entryMap);\n+        player.changeMap(map, map.getPortal(0));\n+}\n+\n+function scheduledTimeout(eim) {\n+        end(eim);\n+}\n+\n+function playerUnregistered(eim, player) {}\n+\n+function playerExit(eim, player) {\n+        eim.unregisterPlayer(player);\n+        player.changeMap(exitMap, 0);\n+}\n+\n+function changedMap(eim, player, mapid) {\n+        if (mapid < minMapId || mapid > maxMapId) {\n+                if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+                        eim.unregisterPlayer(player);\n+                        end(eim);\n+                }\n+                else\n+                        eim.unregisterPlayer(player);\n+                    \n+        } else if(mapid == 926100203 && eim.getIntProperty(\"yuleteTimeout\") == 0) {\n+                eim.setIntProperty(\"yuleteTimeout\", 1);\n+                eim.schedule(\"yuleteAction\", 10 * 1000);\n+        }\n+}\n+\n+function yuleteAction(eim) {\n+        if(eim.getIntProperty(\"yuleteTalked\") == 1) {\n+                eim.setIntProperty(\"yuletePassed\", 1);\n+                \n+                eim.dropMessage(5, \"Yulete: Ugh, you guys disgust me. All I desired was to make this nation the greatest alchemy powerhouse of the entire world. If they won't accept this, I will make it true by myself, at any costs!!!\");\n+        } else {\n+                eim.dropMessage(5, \"Yulete: Hahaha... Did you really think I was going to be so disprepared knowing that the Magatia societies' dogs would be coming in my pursuit after my actions? Fools!\");\n+        }\n+        eim.setIntProperty(\"yuleteTalked\", -1);\n+        \n+        var mapobj = eim.getMapInstance(926100203);\n+        var mob1 = 9300143, mob2 = 9300144;\n+        \n+        mapobj.destroyNPC(2112000);\n+        \n+        var mobobj1, mobobj2;\n+        for(var i = 0; i < 5; i++) {\n+                mobobj1 = MapleLifeFactory.getMonster(mob1);\n+                mobobj2 = MapleLifeFactory.getMonster(mob2);\n+            \n+                mapobj.spawnMonsterOnGroundBelow(mobobj1, new Packages.java.awt.Point(-455, 135));\n+                mapobj.spawnMonsterOnGroundBelow(mobobj2, new Packages.java.awt.Point(-455, 135));\n+        }\n+        \n+\n+        for(var i = 0; i < 5; i++) {\n+                mobobj1 = MapleLifeFactory.getMonster(mob1);\n+                mobobj2 = MapleLifeFactory.getMonster(mob2);\n+            \n+                mapobj.spawnMonsterOnGroundBelow(mobobj1, new Packages.java.awt.Point(0, 135));\n+                mapobj.spawnMonsterOnGroundBelow(mobobj2, new Packages.java.awt.Point(0, 135));\n+        }\n+        \n+        \n+        for(var i = 0; i < 5; i++) {\n+                mobobj1 = MapleLifeFactory.getMonster(mob1);\n+                mobobj2 = MapleLifeFactory.getMonster(mob2);\n+            \n+                mapobj.spawnMonsterOnGroundBelow(mobobj1, new Packages.java.awt.Point(360, 135));\n+                mapobj.spawnMonsterOnGroundBelow(mobobj2, new Packages.java.awt.Point(360, 135));\n+        }\n+}\n+\n+function changedLeader(eim, leader) {\n+        var mapid = leader.getMapId();\n+        if (!eim.isEventCleared() && (mapid < minMapId || mapid > maxMapId)) {\n+                end(eim);\n+        }\n+}\n+\n+function playerDead(eim, player) {}\n+\n+function playerRevive(eim, player) { // player presses ok on the death pop up.\n+        if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+                eim.unregisterPlayer(player);\n+                end(eim);\n+        }\n+        else\n+                eim.unregisterPlayer(player);\n+}\n+\n+function playerDisconnected(eim, player) {\n+        if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+                eim.unregisterPlayer(player);\n+                end(eim);\n+        }\n+        else\n+                eim.unregisterPlayer(player);\n+}\n+\n+function leftParty(eim, player) {\n+        if (eim.isEventTeamLackingNow(false, minPlayers, player)) {\n+                eim.unregisterPlayer(player);\n+                end(eim);\n+        }\n+        else\n+                eim.unregisterPlayer(player);\n+}\n+\n+function disbandParty(eim) {\n+        end(eim);\n+}\n+\n+function monsterValue(eim, mobId) {\n+        return 1;\n+}\n+\n+function end(eim) {\n+        var party = eim.getPlayers();\n+        for (var i = 0; i < party.size(); i++) {\n+                playerExit(eim, party.get(i));\n+        }\n+        eim.dispose();\n+}\n+\n+function giveRandomEventReward(eim, player) {\n+        eim.giveEventReward(player);\n+}\n+\n+function clearPQ(eim) {\n+        eim.stopEventTimer();\n+        eim.setEventCleared();\n+}\n+\n+function monsterKilled(mob, eim) {\n+        var map = mob.getMap();\n+    \n+        if(map.getId() == 926100001 && eim.getIntProperty(\"statusStg1\") == 1) {\n+                if(map.countMonsters() == 0) {\n+                        eim.showClearEffect();\n+                        eim.giveEventPlayersStageReward(2);\n+                        eim.setIntProperty(\"statusStg2\", 1);\n+                }\n+        }\n+        else if(map.getId() == 926100203 && eim.getIntProperty(\"statusStg1\") == 1) {\n+                if(map.countMonsters() == 0) {\n+                        eim.showClearEffect();\n+                        eim.giveEventPlayersStageReward(5);\n+                        \n+                        map.getReactorByName(\"rnj6_out\").forceHitReactor(1);\n+                }\n+        } else if(mob.getId() == 9300139 || mob.getId() == 9300140) {\n+                eim.showClearEffect();\n+                eim.giveEventPlayersStageReward(7);\n+\n+                eim.spawnNpc(2112006, new java.awt.Point(-370, -150), map);\n+\n+                var gain = (eim.getIntProperty(\"escortFail\") == 1) ? 90000 : ((mob.getId() == 9300139) ? 105000 : 140000);\n+                eim.giveEventPlayersExp(gain);\n+                \n+                map.killAllMonstersNotFriendly();\n+                \n+                if(mob.getId() == 9300139) {\n+                        eim.setIntProperty(\"normalClear\", 1);\n+                }\n+                \n+                eim.clearPQ();\n+        }\n+}\n+\n+function friendlyKilled(mob, eim) {\n+        eim.setIntProperty(\"escortFail\", 1);\n+}\n+\n+function allMonstersDead(eim) {}\n+\n+function cancelSchedule() {}\n+\n+function dispose(eim) {}"}, {"sha": "0ae7906cceac36bc9fe5b9b12e3507bee2a58604", "filename": "scripts/event/PinkBeanBattle.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/event/PinkBeanBattle.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/event/PinkBeanBattle.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/PinkBeanBattle.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -216,7 +216,7 @@ function monsterKilled(mob, eim) {\n     if(isPinkBean(mob)) {\n         eim.setIntProperty(\"defeatedBoss\", 1);\n         eim.showClearEffect(mob.getMap().getId());\n-        mob.getMap().killAllMonstersNotFriendly();\n+        mob.getMap().killAllMonsters();\n         eim.clearPQ();\n         \n         var ch = eim.getIntProperty(\"channel\");"}, {"sha": "e46fc64ddf6ca25c68e5892b6f35ab81a7e90596", "filename": "scripts/event/ShowaBattle.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/event/ShowaBattle.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/event/ShowaBattle.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/ShowaBattle.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -166,7 +166,7 @@ function giveRandomEventReward(eim, player) {\n }\n \n function clearPQ(eim) {\n-    eim.getInstanceMap(801040100).killAllMonstersNotFriendly();\n+    eim.getInstanceMap(801040100).killAllMonsters();\n     \n     eim.stopEventTimer();\n     eim.setEventCleared();"}, {"sha": "339269740433ed6b5aee4b87a3d514d9629e772d", "filename": "scripts/map/onFirstUserEnter/dojang_Eff.js", "status": "modified", "additions": 13, "deletions": 11, "changes": 24, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/map/onFirstUserEnter/dojang_Eff.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/map/onFirstUserEnter/dojang_Eff.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/map/onFirstUserEnter/dojang_Eff.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -20,29 +20,31 @@\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n /*\n- *@Author:     Moogra, Traitor\n+ *@Author:     Moogra, Traitor, Ronan\n  *@Map(s):     All Dojo fighting maps\n  *@Function:   Spawns dojo monsters and handles time\n */\n \n \n function start(ms) {\n     ms.getPlayer().resetEnteredScript();\n-    var stage = (ms.getPlayer().getMap().getId() / 100) % 100;\n-    if (stage % 6 == 1)\n-        ms.getPlayer().setDojoStart();\n-    if (ms.getPlayer().getMap().getCharacters().size() == 1)\n-        ms.getPlayer().showDojoClock();\n+    var stage = Math.floor(ms.getMapId() / 100) % 100;\n+    var callBoss = false;\n+    \n+    if (stage % 6 == 1) {\n+        ms.getClient().getChannelServer().startDojoSchedule(ms.getMapId());\n+    } else if(stage % 6 == 0) {\n+        ms.getClient().getChannelServer().dismissDojoSchedule(ms.getMapId(), ms.getParty());\n+    }\n+        \n+    callBoss = ms.getClient().getChannelServer().setDojoProgress(ms.getMapId());\n+    \n     if (stage % 6 > 0) {\n         var realstage = stage - ((stage / 6) | 0);\n-        ms.dojoEnergy();\n         var mob = ms.getMonsterLifeFactory(9300183 + realstage);\n-        if (mob != null && ms.getPlayer().getMap().getMonsterById(9300183 + realstage) == null && ms.getPlayer().getMap().getMonsterById(9300216) == null) {\n+        if (callBoss && mob != null && ms.getPlayer().getMap().getMonsterById(9300216) == null) {\n             mob.setBoss(false);\n             ms.getPlayer().getMap().spawnDojoMonster(mob);\n-            ms.playSound(\"Dojang/start\");\n-            ms.showEffect(\"dojang/start/stage\");\n-            ms.showEffect(\"dojang/start/number/\" + realstage);\n         }\n     }\n }\n\\ No newline at end of file"}, {"sha": "93379e2bca4ab3cd31a20fd1fdcf1bf9f0b9be37", "filename": "scripts/map/onUserEnter/101000301.js", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/map/onUserEnter/101000301.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/map/onUserEnter/101000301.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/map/onUserEnter/101000301.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -1,5 +1,3 @@\n-importPackage(Packages.tools);\n-\n var eventName = \"Boats\";\n var toMap = 200090010;\n "}, {"sha": "b1bbdabe142aa7b51778f8fc6f1e7d5e0f2bf19f", "filename": "scripts/map/onUserEnter/200000112.js", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/map/onUserEnter/200000112.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/map/onUserEnter/200000112.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/map/onUserEnter/200000112.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -1,5 +1,3 @@\n-importPackage(Packages.tools);\n-\n var eventName = \"Boats\";\n var toMap = 200090000;\n "}, {"sha": "9bafa6c98abe01c27d2617cc6d022c0e68ea84e9", "filename": "scripts/map/onUserEnter/200000122.js", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/map/onUserEnter/200000122.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/map/onUserEnter/200000122.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/map/onUserEnter/200000122.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -1,5 +1,3 @@\n-importPackage(Packages.tools);\n-\n var eventName = \"Trains\";\n var toMap = 200090100;\n "}, {"sha": "c57f3a831c19dcdd51c818e3a15e0f29e17c74db", "filename": "scripts/map/onUserEnter/200000132.js", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/map/onUserEnter/200000132.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/map/onUserEnter/200000132.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/map/onUserEnter/200000132.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -1,5 +1,3 @@\n-importPackage(Packages.tools);\n-\n var eventName = \"Cabin\";\n var toMap = 200090200;\n "}, {"sha": "670f477205d164b350b04a70ccd9da1753f283a7", "filename": "scripts/map/onUserEnter/200000152.js", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/map/onUserEnter/200000152.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/map/onUserEnter/200000152.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/map/onUserEnter/200000152.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -1,5 +1,3 @@\n-importPackage(Packages.tools);\n-\n var eventName = \"Genie\";\n var toMap = 200090400;\n "}, {"sha": "5fe014fafb5181e78882a528d7cd17bda446bb65", "filename": "scripts/map/onUserEnter/220000111.js", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/map/onUserEnter/220000111.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/map/onUserEnter/220000111.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/map/onUserEnter/220000111.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -1,5 +1,3 @@\n-importPackage(Packages.tools);\n-\n var eventName = \"Trains\";\n var toMap = 200090110;\n "}, {"sha": "1e4453738966fc025c9a9449de3944c2f1446ba1", "filename": "scripts/map/onUserEnter/240000111.js", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/map/onUserEnter/240000111.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/map/onUserEnter/240000111.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/map/onUserEnter/240000111.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -1,5 +1,3 @@\n-importPackage(Packages.tools);\n-\n var eventName = \"Cabin\";\n var toMap = 200090210;\n "}, {"sha": "ee9df7e08338f008eddca46afe2380fd3f33cdc5", "filename": "scripts/map/onUserEnter/260000110.js", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/map/onUserEnter/260000110.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/map/onUserEnter/260000110.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/map/onUserEnter/260000110.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -1,5 +1,3 @@\n-importPackage(Packages.tools);\n-\n var eventName = \"Genie\";\n var toMap = 200090410;\n "}, {"sha": "295800eef632fd99ea3b04771746c87edb25f9a8", "filename": "scripts/map/onUserEnter/540010001.js", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/map/onUserEnter/540010001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/map/onUserEnter/540010001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/map/onUserEnter/540010001.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -1,5 +1,3 @@\n-importPackage(Packages.tools);\n-\n var eventName = \"AirPlane\";\n var toMap = 540010002;\n "}, {"sha": "2652a1770f2007e3a030c88de33f56072cbd9c2d", "filename": "scripts/map/onUserEnter/540010100.js", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/map/onUserEnter/540010100.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/map/onUserEnter/540010100.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/map/onUserEnter/540010100.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -1,5 +1,3 @@\n-importPackage(Packages.tools);\n-\n var eventName = \"AirPlane\";\n var toMap = 540010101;\n "}, {"sha": "752b57743f8e0db0b81c9682c8c1583ff47516a9", "filename": "scripts/map/onUserEnter/600010002.js", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/map/onUserEnter/600010002.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/map/onUserEnter/600010002.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/map/onUserEnter/600010002.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -1,5 +1,3 @@\n-importPackage(Packages.tools);\n-\n var eventName = \"Subway\";\n var toMap = 600010003;\n "}, {"sha": "c33a3cfcad64a77b467ef8448a24465ac18ec6da", "filename": "scripts/map/onUserEnter/600010004.js", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/map/onUserEnter/600010004.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/map/onUserEnter/600010004.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/map/onUserEnter/600010004.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -1,5 +1,3 @@\n-importPackage(Packages.tools);\n-\n var eventName = \"Subway\";\n var toMap = 600010005;\n "}, {"sha": "8fc8cbd0ab9732981024cd2e959cdf62a5a43926", "filename": "scripts/map/onUserEnter/dojang_1st.js", "status": "modified", "additions": 18, "deletions": 3, "changes": 21, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/map/onUserEnter/dojang_1st.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/map/onUserEnter/dojang_1st.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/map/onUserEnter/dojang_1st.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -20,8 +20,23 @@\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n /*\n- * @author Traitor\n- */\n-function start(ms) {\n+ *@Author:     Moogra, Traitor, Ronan\n+ *@Map(s):     All Dojo fighting maps\n+ *@Function:   Displays info for the player when entering a dojo map\n+*/\n \n+\n+function start(ms) {\n+    ms.getPlayer().resetEnteredScript();\n+    var stage = Math.floor(ms.getPlayer().getMap().getId() / 100) % 100;\n+    \n+    ms.getPlayer().showDojoClock();\n+    if (stage % 6 > 0) {\n+        var realstage = stage - ((stage / 6) | 0);\n+        ms.dojoEnergy();\n+        \n+        ms.playSound(\"Dojang/start\");\n+        ms.showEffect(\"dojang/start/stage\");\n+        ms.showEffect(\"dojang/start/number/\" + realstage);\n+    }\n }\n\\ No newline at end of file"}, {"sha": "54966d66151d9152626f7fee8e0ae4b6ff9740d4", "filename": "scripts/npc/1072000.js", "status": "modified", "additions": 50, "deletions": 40, "changes": 90, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/1072000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/1072000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1072000.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -24,47 +24,57 @@\n \tVictoria Road : West Rocky Mountain IV (102020300)\n */\n \n-var status = 0;\n-\n+var status;\n+ \n function start() {\n-    if (cm.isQuestCompleted(100004)) {\n-        cm.sendOk(\"You're truly a hero!\");\n-        cm.dispose();\n-    } else if (cm.isQuestStarted(100003)) {\n-        cm.completeQuest(100003);\n-\tcm.sendNext(\"Hmmm...it is definitely the letter from #bDances with Balrog#k...so you came all the way here to take the test and make the 2nd job advancement as the warrior. Alright, I'll explain the test to you. Don't sweat it too much, it's not that complicated.\");\n-    } else {\n-        cm.sendOk(\"I can show you the way once your ready for it.\");\n-        cm.dispose();\n-    }\n+        status = -1;\n+        action(1, 0, 0);\n }\n \n function action(mode, type, selection) {\n-    if (mode == -1)\n-        cm.dispose();\n-    else {\n-        if (mode == 1)\n-            status++;\n-        else\n-            status--;\n-        if (status == 0 && cm.isQuestStarted(100003))\n-            status = 5;\n-\telse if (status == 1)\n-\t\tcm.sendNextPrev(\"I'll send you to a hidden map. You'll see monsters you don't normally see. They look the same like the regular ones, but with a totally different attitude. They neither boost your experience level nor provide you with item.\");\n-\telse if (status == 2)\n-\t\tcm.sendNextPrev(\"You'll be able to acquire a marble called #b#t4031013##k while knocking down those monsters. It is a special marble made out of their sinister, evil minds. Collect 30 of those, and then go talk to a colleague of mine in there. That's how you pass the test.\");\n-\telse if (status == 3)\n-\t\tcm.sendYesNo(\"Once you go inside, you can't leave until you take care of your mission. If you die, your experience level will decrease..so you better really buckle up and get ready...well, do you want to go for it now?\");\n-\telse if (status == 4) {\n-\t\tcm.sendNext(\"Alright I'll let you in! Defeat the monsters inside, collect 30 Dark Marbles, then strike up a conversation with a colleague of mine inside. He'll give you #bThe Proof of a Hero#k, the proof that you've passed the test. Best of luck to you.\");\n-        \tcm.startQuest(100004);\n-\t\tcm.gainItem(4031008, -1);\n-\t}\n-\telse if (status == 5) {\n-\t\tcm.warp(108000300, 0);\n-\t\tcm.dispose();\n-\t} else {\n-\t    cm.dispose();\n-\t}\n-    }\n-}\n\\ No newline at end of file\n+        if (mode == -1) {\n+                cm.dispose();\n+        } else {\n+                if (mode == 0 && type > 0) {\n+                        cm.dispose();\n+                        return;\n+                }\n+                if (mode == 1)\n+                        status++;\n+                else\n+                        status--;\n+    \n+                if(status == 0) {\n+                        if (cm.isQuestCompleted(100004)) {\n+                            cm.sendOk(\"You're truly a hero!\");\n+                            cm.dispose();\n+                        } else if(cm.isQuestCompleted(100003)) {\n+                            cm.sendNext(\"Alright I'll let you in! Defeat the monsters inside, collect 30 Dark Marbles, then strike up a conversation with a colleague of mine inside. He'll give you #bThe Proof of a Hero#k, the proof that you've passed the test. Best of luck to you.\");\n+                            status = 4;\n+                        } else if (cm.isQuestStarted(100003)) {\n+                            cm.sendNext(\"Hmmm...it is definitely the letter from #bDances with Balrog#k...so you came all the way here to take the test and make the 2nd job advancement as the warrior. Alright, I'll explain the test to you. Don't sweat it too much, it's not that complicated.\");\n+                        } else {\n+                            cm.sendOk(\"I can show you the way once your ready for it.\");\n+                            cm.dispose();\n+                        }\n+                }\n+                else if (status == 1)\n+                        cm.sendNextPrev(\"I'll send you to a hidden map. You'll see monsters you don't normally see. They look the same like the regular ones, but with a totally different attitude. They neither boost your experience level nor provide you with item.\");\n+                else if (status == 2)\n+                        cm.sendNextPrev(\"You'll be able to acquire a marble called #b#t4031013##k while knocking down those monsters. It is a special marble made out of their sinister, evil minds. Collect 30 of those, and then go talk to a colleague of mine in there. That's how you pass the test.\");\n+                else if (status == 3)\n+                        cm.sendYesNo(\"Once you go inside, you can't leave until you take care of your mission. If you die, your experience level will decrease..so you better really buckle up and get ready...well, do you want to go for it now?\");\n+                else if (status == 4) {\n+                        cm.sendNext(\"Alright I'll let you in! Defeat the monsters inside, collect 30 Dark Marbles, then strike up a conversation with a colleague of mine inside. He'll give you #bThe Proof of a Hero#k, the proof that you've passed the test. Best of luck to you.\");\n+                        cm.completeQuest(100003);\n+                        cm.startQuest(100004);\n+                        cm.gainItem(4031008, -1);\n+                }\n+                else if (status == 5) {\n+                        cm.warp(108000300, 0);\n+                        cm.dispose();\n+                } else {\n+                    cm.dispose();\n+                }\n+        }\n+}"}, {"sha": "71c638904eb088ddaa299a66bf9bc2f0a6f040a9", "filename": "scripts/npc/1072001.js", "status": "modified", "additions": 49, "deletions": 39, "changes": 88, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/1072001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/1072001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1072001.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -24,46 +24,56 @@\n \tVictoria Road : The Forest North of Ellinia (101020000)\n */\n \n-var status = 0;\n-\n+var status;\n+ \n function start() {\n-    if (cm.isQuestCompleted(100007)) {\n-        cm.sendOk(\"You're truly a hero!\");\n-        cm.dispose();\n-    } else if (cm.isQuestStarted(100006)) {\n-        cm.completeQuest(100006);\n-\tcm.sendNext(\"Hmmm...it is definitely the letter from #bGrendell the Really Old#k...so you came all the way here to take the test and make the 2nd job advancement as a magician. Alright, I'll explain the test to you. Don't sweat it too much, it's not that complicated.\")\n-    } else {\n-        cm.sendOk(\"I can show you the way once your ready for it.\");\n-        cm.dispose();\n-    }\n+        status = -1;\n+        action(1, 0, 0);\n }\n \n function action(mode, type, selection) {\n-    if (mode == -1)\n-        cm.dispose();\n-    else {\n-        if (mode == 1)\n-            status++;\n-        else\n-            status--;\n-        if (status == 0 && cm.isQuestStarted(100007))\n-            status = 5;\n-\telse if (status == 1)\n-\t\tcm.sendNextPrev(\"I'll send you to a hidden map. You'll see monsters you don't normally see. They look the same like the regular ones, but with a totally different attitude. They neither boost your experience level nor provide you with item.\");\n-\telse if (status == 2)\n-\t\tcm.sendNextPrev(\"You'll be able to acquire a marble called #b#t4031013##k while knocking down those monsters. It is a special marble made out of their sinister, evil minds. Collect 30 of those, and then go talk to a colleague of mine in there. That's how you pass the test.\");\n-\telse if (status == 3)\n-\t\tcm.sendYesNo(\"Once you go inside, you can't leave until you take care of your mission. If you die, your experience level will decrease.. So you better really buckle up and get ready...well, do you want to go for it now?\");\n-\telse if (status == 4) {\n-\t\tcm.sendNext(\"Alright I'll let you in! Defeat the monsters inside, collect 30 Dark Marbles, then strike up a conversation with a colleague of mine inside. He'll give you #bThe Proof of a Hero#k, the proof that you've passed the test. Best of luck to you.\");\n-\t        cm.startQuest(100007);\n-\t\tcm.gainItem(4031009, -1);\n-\t}\n-\telse if (status == 5) {\n-\t\tcm.warp(108000200, 0);\n-\t\tcm.dispose();\n-\t}\n-        else cm.dispose();\n-    }\n-}\n\\ No newline at end of file\n+        if (mode == -1) {\n+                cm.dispose();\n+        } else {\n+                if (mode == 0 && type > 0) {\n+                        cm.dispose();\n+                        return;\n+                }\n+                if (mode == 1)\n+                        status++;\n+                else\n+                        status--;\n+    \n+                if(status == 0) {\n+                        if (cm.isQuestCompleted(100007)) {\n+                            cm.sendOk(\"You're truly a hero!\");\n+                            cm.dispose();\n+                        } else if(cm.isQuestCompleted(100006)) {\n+                            cm.sendNext(\"Alright I'll let you in! Defeat the monsters inside, collect 30 Dark Marbles, then strike up a conversation with a colleague of mine inside. He'll give you #bThe Proof of a Hero#k, the proof that you've passed the test. Best of luck to you.\");\n+                            status = 4;\n+                        } else if (cm.isQuestStarted(100006)) {\n+                            cm.sendNext(\"Hmmm...it is definitely the letter from #bGrendell the Really Old#k...so you came all the way here to take the test and make the 2nd job advancement as a magician. Alright, I'll explain the test to you. Don't sweat it too much, it's not that complicated.\");\n+                        } else {\n+                            cm.sendOk(\"I can show you the way once your ready for it.\");\n+                            cm.dispose();\n+                        }\n+                }\n+                else if(status == 1)\n+                        cm.sendNextPrev(\"I'll send you to a hidden map. You'll see monsters you don't normally see. They look the same like the regular ones, but with a totally different attitude. They neither boost your experience level nor provide you with item.\");\n+                else if (status == 2)\n+                        cm.sendNextPrev(\"You'll be able to acquire a marble called #b#t4031013##k while knocking down those monsters. It is a special marble made out of their sinister, evil minds. Collect 30 of those, and then go talk to a colleague of mine in there. That's how you pass the test.\");\n+                else if (status == 3)\n+                        cm.sendYesNo(\"Once you go inside, you can't leave until you take care of your mission. If you die, your experience level will decrease.. So you better really buckle up and get ready...well, do you want to go for it now?\");\n+                else if (status == 4) {\n+                        cm.sendNext(\"Alright I'll let you in! Defeat the monsters inside, collect 30 Dark Marbles, then strike up a conversation with a colleague of mine inside. He'll give you #bThe Proof of a Hero#k, the proof that you've passed the test. Best of luck to you.\");\n+                        cm.completeQuest(100006);            \n+                        cm.startQuest(100007);\n+                        cm.gainItem(4031009, -1);\n+                }\n+                else if (status == 5) {\n+                        cm.warp(108000200, 0);\n+                        cm.dispose();\n+                }\n+                else cm.dispose();\n+        }\n+}"}, {"sha": "dad871dbfa40416224abef18ea43ec5b9677d4ca", "filename": "scripts/npc/1072002.js", "status": "modified", "additions": 47, "deletions": 36, "changes": 83, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/1072002.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/1072002.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1072002.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -24,45 +24,56 @@ Hunter Job Advancement\n Warning Street : The Road to the Dungeon (106010000)\n */\n \n-var status = 0;\n-\n+var status;\n+ \n function start() {\n-    if (cm.isQuestCompleted(100001)) {\n-        cm.sendOk(\"You're truly a hero!\");\n-        cm.dispose();\n-    } else if (cm.isQuestStarted(100000)) {\n-        cm.completeQuest(100000);\n-        cm.sendNext(\"Oh, isn't this a letter from #bAthena#k?\");\n-    } else {\n-        cm.sendOk(\"I can show you the way once your ready for it.\");\n-        cm.dispose();\n-    }\n+        status = -1;\n+        action(1, 0, 0);\n }\n \n function action(mode, type, selection) {\n-    if (mode == -1)\n-        cm.dispose();\n-    else {\n-        if (mode == 1)\n-            status++;\n-        else\n-            status--;\n-        if (status == 0 && cm.isQuestStarted(100001))\n-            status = 4;\n-        if (status == 1)\n-            cm.sendNextPrev(\"So you want to prove your skills? Very well...\")\n-        else if (status == 2)\n-            cm.sendAcceptDecline(\"I will give you a chance if you're ready.\");\n-        else if (status == 3) {\n-            cm.startQuest(100001);\n-\t    cm.gainItem(4031010, -1);\n-            cm.sendOk(\"You will have to collect me #b30 #t4031013##k. Good luck.\")\n-        } else if (status == 4) {\n-            cm.warp(108000100);\n-            cm.dispose();\n+        if (mode == -1) {\n+                cm.dispose();\n+        } else {\n+                if (mode == 0 && type > 0) {\n+                        cm.dispose();\n+                        return;\n+                }\n+                if (mode == 1)\n+                        status++;\n+                else\n+                        status--;\n+    \n+                if (status == 0) {\n+                        if (cm.isQuestCompleted(100001)) {\n+                            cm.sendOk(\"You're truly a hero!\");\n+                            cm.dispose();\n+                        } else if(cm.isQuestCompleted(100000)) {\n+                            cm.sendNext(\"Alright I'll let you in! Defeat the monsters inside, collect 30 Dark Marbles, then strike up a conversation with a colleague of mine inside. He'll give you #bThe Proof of a Hero#k, the proof that you've passed the test. Best of luck to you.\");\n+                            status = 3;\n+                        } else if (cm.isQuestStarted(100000)) {\n+                            cm.sendNext(\"Oh, isn't this a letter from #bAthena#k?\");\n+                        } else {\n+                            cm.sendOk(\"I can show you the way once your ready for it.\");\n+                            cm.dispose();\n+                        }\n+                }\n+                \n+                else if (status == 1)\n+                    cm.sendNextPrev(\"So you want to prove your skills? Very well...\");\n+                else if (status == 2)\n+                    cm.sendAcceptDecline(\"I will give you a chance if you're ready.\");\n+                else if (status == 3) {\n+                    cm.completeQuest(100000);\n+                    cm.startQuest(100001);\n+                    cm.gainItem(4031010, -1);\n+                    cm.sendOk(\"You will have to collect me #b30 #t4031013##k. Good luck.\")\n+                } else if (status == 4) {\n+                    cm.warp(108000100);\n+                    cm.dispose();\n+                }\n+                else {\n+                    cm.dispose();\n+                }\n         }\n-\telse {\n-\t    cm.dispose();\n-\t}\n-    }\n }\n\\ No newline at end of file"}, {"sha": "a23fcbf7b04b5a640f21f2dbed0e36c9f9511150", "filename": "scripts/npc/1072003.js", "status": "modified", "additions": 48, "deletions": 37, "changes": 85, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/1072003.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/1072003.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1072003.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -24,45 +24,56 @@\n \tVictoria Road : Construction Site North of Kerning City (102040000)\n */\n \n-var status = 0;\n-\n+var status;\n+ \n function start() {\n-    if (cm.isQuestCompleted(100010)) {\n-        cm.sendOk(\"You're truly a hero!\");\n-        cm.dispose();\n-    } else if (cm.isQuestStarted(100009)) {\n-        cm.completeQuest(100009);\n-        cm.sendNext(\"Oh, isn't this a letter from the #bDark Lord#k?\");\n-    } else {\n-        cm.sendOk(\"I can show you the way once your ready for it.\");\n-        cm.dispose();\n-    }\n+        status = -1;\n+        action(1, 0, 0);\n }\n \n function action(mode, type, selection) {\n-    if (mode == -1)\n-        cm.dispose();\n-    else {\n-        if (mode == 1)\n-            status++;\n-        else\n-            status--;\n-        if (status == 0 && cm.isQuestStarted(100010))\n-            status = 4;\n-        if (status == 1)\n-            cm.sendNextPrev(\"So you want to prove your skills? Very well...\")\n-        else if (status == 2)\n-            cm.sendAcceptDecline(\"I will give you a chance if you're ready.\");\n-        else if (status == 3) {\n-            cm.sendOk(\"You will have to collect me #b30 #t4031013##k. Good luck.\")\n-            cm.startQuest(100010);\n-\t    cm.gainItem(4031011, -1);\n-        } else if (status == 4) {\n-            cm.warp(108000400, 0);\n-            cm.dispose();\n+        if (mode == -1) {\n+                cm.dispose();\n+        } else {\n+                if (mode == 0 && type > 0) {\n+                        cm.dispose();\n+                        return;\n+                }\n+                if (mode == 1)\n+                        status++;\n+                else\n+                        status--;\n+    \n+                if(status == 0) {\n+                        if (cm.isQuestCompleted(100010)) {\n+                            cm.sendOk(\"You're truly a hero!\");\n+                            cm.dispose();\n+                        } else if(cm.isQuestCompleted(100009)) {\n+                            cm.sendNext(\"Alright I'll let you in! Defeat the monsters inside, collect 30 Dark Marbles, then strike up a conversation with a colleague of mine inside. He'll give you #bThe Proof of a Hero#k, the proof that you've passed the test. Best of luck to you.\");\n+                            status = 3;\n+                        } else if (cm.isQuestStarted(100009)) {\n+                            cm.sendNext(\"Oh, isn't this a letter from the #bDark Lord#k?\");\n+                        } else {\n+                            cm.sendOk(\"I can show you the way once your ready for it.\");\n+                            cm.dispose();\n+                        }\n+                }\n+                \n+                else if(status == 1)\n+                    cm.sendNextPrev(\"So you want to prove your skills? Very well...\");\n+                else if (status == 2)\n+                    cm.sendAcceptDecline(\"I will give you a chance if you're ready.\");\n+                else if (status == 3) {\n+                    cm.sendOk(\"You will have to collect me #b30 #t4031013##k. Good luck.\");\n+                    cm.completeQuest(100009);\n+                    cm.startQuest(100010);\n+                    cm.gainItem(4031011, -1);\n+                } else if (status == 4) {\n+                    cm.warp(108000400, 0);\n+                    cm.dispose();\n+                }\n+                else {\n+                    cm.dispose();\n+                }\n         }\n-\telse {\n-\t    cm.dispose();\n-\t}\n-    }\n-}\n\\ No newline at end of file\n+}"}, {"sha": "b5971abba99a36291de345636c95358fc732b09e", "filename": "scripts/npc/1072004.js", "status": "modified", "additions": 38, "deletions": 14, "changes": 52, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/1072004.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/1072004.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1072004.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -19,21 +19,45 @@\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n \n+var status;\n+var completed;\n+ \n function start() {\n-    if (cm.haveItem(4031013,30)) {\n-\tcm.removeAll(4031013);\n-        cm.completeQuest(100004);\n-        cm.startQuest(100005);\n-        cm.gainItem(4031012);\n-        cm.sendNext(\"Ohhhhh.. you collected all 30 Dark Marbles!! It should have been difficult... just incredible! Alright. You've passed the test and for that, I'll reward you #bThe Proof of a Hero#k. Take that and go back to Perion.\");\n-    } else {\n-        cm.sendSimple(\"You will have to collect me #b30 #t4031013##k. Good luck. \\r\\n#b#L1#I would like to leave#l\");\n-        cm.dispose();\n-    }\n+        status = -1;\n+        action(1, 0, 0);\n }\n \n function action(mode, type, selection) {\n-    if (mode > 0)\n-        cm.warp(102020300, 0);\n-    cm.dispose();\n-}\n\\ No newline at end of file\n+        if (mode == -1) {\n+                cm.dispose();\n+        } else {\n+                if (mode == 0 && type > 0) {\n+                        cm.dispose();\n+                        return;\n+                }\n+                if (mode == 1)\n+                        status++;\n+                else\n+                        status--;\n+    \n+                if(status == 0) {\n+                        if (cm.haveItem(4031013,30)) {\n+                            completed = true;\n+                            cm.sendNext(\"Ohhhhh.. you collected all 30 Dark Marbles!! It should have been difficult... just incredible! Alright. You've passed the test and for that, I'll reward you #bThe Proof of a Hero#k. Take that and go back to Perion.\");\n+                        } else {\n+                            completed = false;\n+                            cm.sendSimple(\"You will have to collect me #b30 #t4031013##k. Good luck. \\r\\n#b#L1#I would like to leave#l\");\n+                        }\n+                } else if(status == 1) {\n+                    if(completed) {\n+                        cm.removeAll(4031013);\n+                        cm.completeQuest(100004);\n+                        cm.startQuest(100005);\n+                        cm.gainItem(4031012);\n+                    }\n+                    \n+                    cm.warp(102020300, 2);\n+                    cm.dispose();\n+                }\n+        }\n+}"}, {"sha": "c645a0bf372e1f8641af0db66ba8c5e2bd664302", "filename": "scripts/npc/1072005.js", "status": "modified", "additions": 38, "deletions": 14, "changes": 52, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/1072005.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/1072005.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1072005.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -19,21 +19,45 @@\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n \n+var status;\n+var completed;\n+ \n function start() {\n-    if (cm.haveItem(4031013,30)) {\n-\tcm.removeAll(4031013);\n-        cm.completeQuest(100007);\n-        cm.startQuest(100008);\n-        cm.gainItem(4031012);\n-        cm.sendNext(\"Ohhhhh.. you collected all 30 Dark Marbles!! It should have been difficult.. just incredible! Alright. You've passed the test and for that, I'll reward you #bThe Proof of a Hero#k. Take that and go back to Ellinia.\");\n-    } else {\n-        cm.sendSimple(\"You will have to collect me #b30 #t4031013##k. Good luck. \\r\\n#b#L1#I would like to leave#l\");\n-        cm.dispose();\n-    }\n+        status = -1;\n+        action(1, 0, 0);\n }\n \n function action(mode, type, selection) {\n-    if (mode > 0)\n-        cm.warp(101020000, 1);\n-    cm.dispose();\n-}\n\\ No newline at end of file\n+        if (mode == -1) {\n+                cm.dispose();\n+        } else {\n+                if (mode == 0 && type > 0) {\n+                        cm.dispose();\n+                        return;\n+                }\n+                if (mode == 1)\n+                        status++;\n+                else\n+                        status--;\n+    \n+                if(status == 0) {\n+                    if (cm.haveItem(4031013,30)) {\n+                        completed = true;\n+                        cm.sendNext(\"Ohhhhh.. you collected all 30 Dark Marbles!! It should have been difficult.. just incredible! Alright. You've passed the test and for that, I'll reward you #bThe Proof of a Hero#k. Take that and go back to Ellinia.\");\n+                    } else {\n+                        completed = false;\n+                        cm.sendSimple(\"You will have to collect me #b30 #t4031013##k. Good luck. \\r\\n#b#L1#I would like to leave#l\");\n+                    }\n+                } else if(status == 1) {\n+                    if(completed) {\n+                        cm.removeAll(4031013);\n+                        cm.completeQuest(100007);\n+                        cm.startQuest(100008);\n+                        cm.gainItem(4031012);\n+                    }\n+                    \n+                    cm.warp(101020000, 1);\n+                    cm.dispose();\n+                }\n+        }\n+}"}, {"sha": "9f9f4b35a1da5d67a5e5602892325708634741e4", "filename": "scripts/npc/1072006.js", "status": "modified", "additions": 38, "deletions": 14, "changes": 52, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/1072006.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/1072006.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1072006.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -31,21 +31,45 @@\n ---------------------------------------------------------------------------------------------------\n **/\n \n+var status;\n+var completed;\n+ \n function start() {\n-    if (cm.haveItem(4031013,30)) {\n-        cm.removeAll(4031013);\n-        cm.completeQuest(100001);\n-        cm.startQuest(100002);\n-        cm.gainItem(4031012);\n-        cm.sendOk(\"You're a true hero! Take this and Athena will acknowledge you.\");\n-    } else {\n-        cm.sendSimple(\"You will have to collect me #b30 #t4031013##k. Good luck. \\r\\n#b#L1#I would like to leave#l\")\n-        cm.dispose();\n-    }\n+        status = -1;\n+        action(1, 0, 0);\n }\n \n function action(mode, type, selection) {\n-    if (mode > 0)\n-        cm.warp(106010000, 1);\n-    cm.dispose();\n-}\n\\ No newline at end of file\n+        if (mode == -1) {\n+                cm.dispose();\n+        } else {\n+                if (mode == 0 && type > 0) {\n+                        cm.dispose();\n+                        return;\n+                }\n+                if (mode == 1)\n+                        status++;\n+                else\n+                        status--;\n+    \n+                if(status == 0) {\n+                    if (cm.haveItem(4031013,30)) {\n+                        completed = true;\n+                        cm.sendOk(\"You're a true hero! Take this and Athena will acknowledge you.\");\n+                    } else {\n+                        completed = false;\n+                        cm.sendSimple(\"You will have to collect me #b30 #t4031013##k. Good luck. \\r\\n#b#L1#I would like to leave#l\");\n+                    }\n+                } else if(status == 1) {\n+                    if(completed) {\n+                        cm.removeAll(4031013);\n+                        cm.completeQuest(100001);\n+                        cm.startQuest(100002);\n+                        cm.gainItem(4031012);\n+                    }\n+                    \n+                    cm.warp(106010000, 9);\n+                    cm.dispose();\n+                }\n+        }\n+}"}, {"sha": "c894121c4b600983587d1d085693150bb9b3d949", "filename": "scripts/npc/1072007.js", "status": "modified", "additions": 39, "deletions": 14, "changes": 53, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/1072007.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/1072007.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1072007.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -29,21 +29,46 @@\n \t1.0 - First Version by Unknown\n ---------------------------------------------------------------------------------------------------\n */\n+\n+var status;\n+var completed;\n+ \n function start() {\n-    if (cm.haveItem(4031013,30)) {\n-        cm.removeAll(4031013);\n-        cm.completeQuest(100010);\n-        cm.startQuest(100011);\n-        cm.gainItem(4031012);\n-        cm.sendOk(\"You're a true hero! Take this and the Dark Lord will acknowledge you.\");\n-    } else {\n-        cm.sendSimple(\"You will have to collect me #b30 #t4031013##k. Good luck. \\r\\n#b#L1#I would like to leave#l\")\n-        cm.dispose();\n-    }\n+        status = -1;\n+        action(1, 0, 0);\n }\n \n function action(mode, type, selection) {\n-    if (mode == 1)\n-        cm.warp(102040000, 0);\n-    cm.dispose();\n-}\n\\ No newline at end of file\n+        if (mode == -1) {\n+                cm.dispose();\n+        } else {\n+                if (mode == 0 && type > 0) {\n+                        cm.dispose();\n+                        return;\n+                }\n+                if (mode == 1)\n+                        status++;\n+                else\n+                        status--;\n+    \n+                if(status == 0) {\n+                        if (cm.haveItem(4031013,30)) {\n+                            completed = true;\n+                            cm.sendOk(\"You're a true hero! Take this and the Dark Lord will acknowledge you.\");\n+                        } else {\n+                            completed = false;\n+                            cm.sendSimple(\"You will have to collect me #b30 #t4031013##k. Good luck. \\r\\n#b#L1#I would like to leave#l\");\n+                        }\n+                } else if(status == 1) {\n+                        if(completed) {\n+                            cm.removeAll(4031013);\n+                            cm.completeQuest(100010);\n+                            cm.startQuest(100011);\n+                            cm.gainItem(4031012);\n+                        }\n+                        \n+                        cm.warp(102040000, 9);\n+                        cm.dispose();\n+                }\n+        }\n+}"}, {"sha": "5cba2151d1a48d4707d5341389bfdecbd5c0989d", "filename": "scripts/npc/2091005.js", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/2091005.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/2091005.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2091005.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -97,7 +97,7 @@ function action(mode, type, selection) {\n \n                                     if(avDojo < 0) {\n                                         if(avDojo == -1) cm.sendOk(\"All Dojo's are being used already. Wait for awhile before trying again.\");\n-                                        else cm.sendOk(\"Your party already is using the dojo. Wait for them to finish to enter.\");\n+                                        else cm.sendOk(\"Your party is already using the dojo. Wait for them to finish to enter.\");\n                                     }\n                                     else {\n                                         cm.getClient().getChannelServer().getMapFactory().getMap(925020010 + avDojo).resetMapObjects();\n@@ -119,7 +119,7 @@ function action(mode, type, selection) {\n \n                                 if(avDojo < 0) {\n                                     if(avDojo == -1) cm.sendOk(\"All Dojo's are being used already. Wait for awhile before trying again.\");\n-                                    else cm.sendOk(\"Your party already is using the dojo. Wait for them to finish to enter.\");\n+                                    else cm.sendOk(\"Your party is already using the dojo. Wait for them to finish to enter.\");\n                                     cm.getPlayer().setDojoStage(dojoWarp);\n                                 }\n                                 else {\n@@ -136,7 +136,7 @@ function action(mode, type, selection) {\n \n                             if(avDojo < 0) {\n                                 if(avDojo == -1) cm.sendOk(\"All Dojo's are being used already. Wait for awhile before trying again.\");\n-                                else cm.sendOk(\"Your party already is using the dojo. Wait for them to finish to enter.\");\n+                                else cm.sendOk(\"Your party is already using the dojo. Wait for them to finish to enter.\");\n                             }\n                             else {\n                                 cm.getClient().getChannelServer().resetDojoMap(925020100 + avDojo);\n@@ -174,7 +174,7 @@ function action(mode, type, selection) {\n \n                             if(avDojo < 0) {\n                                 if(avDojo == -1) cm.sendOk(\"All Dojo's are being used already. Wait for awhile before trying again.\");\n-                                else cm.sendOk(\"Your party already is using the dojo. Wait for them to finish to enter.\");\n+                                else cm.sendOk(\"Your party is already using the dojo. Wait for them to finish to enter.\");\n                             }\n                             else {\n                                 cm.getClient().getChannelServer().resetDojoMap(925030100 + avDojo);\n@@ -302,7 +302,7 @@ function action(mode, type, selection) {\n \n                     if(avDojo < 0) {\n                         if(avDojo == -1) cm.sendOk(\"All Dojo's are being used already. Wait for awhile before trying again.\");\n-                        else cm.sendOk(\"Your party already is using the dojo. Wait for them to finish to enter.\");\n+                        else cm.sendOk(\"Your party already registered for the dojo. Wait for the end of the registration time to enter again.\");\n                     }\n                     else {\n                         var baseStg = hasParty ? 925030000 : 925020000;"}, {"sha": "02760b8b28419c890994da3884c603c037cc7dcf", "filename": "scripts/npc/2112000.js", "status": "added", "additions": 120, "deletions": 0, "changes": 120, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/2112000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/2112000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2112000.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,120 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/* Yulete\n+\tYulete's Office (926100203)\n+\tMagatia NPC\n+ */\n+\n+var status;\n+ \n+importPackage(Packages.server.life);\n+ \n+function start() {\n+        status = -1;\n+        action(1, 0, 0);\n+}\n+\n+function playersTooClose() {\n+        var npcpos = cm.getMap().getMapObject(cm.getNpcObjectId()).getPosition();\n+        var listchr = cm.getMap().getPlayers();\n+        \n+        for (var iterator = listchr.iterator(); iterator.hasNext();) {\n+            var chr = iterator.next();\n+            \n+            var chrpos = chr.getPosition();\n+            if(Math.sqrt( Math.pow((npcpos.getX() - chrpos.getX()), 2) + Math.pow((npcpos.getY() - chrpos.getY()), 2) ) < 310) return true;\n+        }\n+        \n+        return false;\n+}\n+\n+function action(mode, type, selection) {\n+        if (mode == -1) {\n+                cm.dispose();\n+        } else {\n+                if (mode == 0 && status == 0) {\n+                        cm.dispose();\n+                        return;\n+                }\n+                if (mode == 1)\n+                        status++;\n+                else\n+                        status--;\n+    \n+                var eim = cm.getEventInstance();\n+                \n+                if(cm.getMapId() == 926100203) {\n+                        if(status == 0) {\n+                                var state = eim.getIntProperty(\"yuleteTalked\");\n+\n+                                if(state == -1) {\n+                                    cm.sendOk(\"Heh, it seems you guys have company. Have fun with them, as I politely request my leave.\");\n+\n+                                } else if (playersTooClose() || eim.getIntProperty(\"npcShocked\") == 0) {\n+                                    cm.sendOk(\"Oh, hello there. I have been #bmonitoring your moves#k since you guys entered this perimeter. Quite the feat reaching here, I commend all of you. Now, now, look at the time, I've got an appointment right now, I'm afraid I will need to request my leave. But worry not, my #raccessors#k will deal with all of you. Now, if you permit me, I'm leaving now.\");\n+\n+                                    eim.setIntProperty(\"yuleteTalked\", -1);\n+                                } else {\n+                                    cm.sendOk(\"... Hah! What, wh-- How did you get here?! I though I had sealed all paths here! No matter, this situation will be resolved soon. Guys: DEPLOY the #rmaster weapon#k!! You! Yes, you. Don't you think this ends here, look back at your companions, they need some help! I'll be retreating for now.\");\n+\n+                                    eim.setIntProperty(\"yuleteTalked\", 1);\n+                                }\n+                        }\n+                        \n+                        cm.dispose();\n+                } else {\n+                        if(status == 0) {\n+                                if(eim.isEventCleared()) {\n+                                        cm.sendOk(\"Nooooo... I have been beated? But how? Everything I did was for the sake of the development of a greater alchemy! You can't jail me, I did what everybody standing in a place like mine would do! But no, they simply decided to damp up the progress of the science JUST BECAUSE it was deemed dangerous??? Oh, come on!\");\n+                                } else {\n+                                        var state = eim.getIntProperty(\"yuletePassed\");\n+\n+                                        if(state == -1) {\n+                                                cm.sendOk(\"Behold! The pinnacle of Magatia's alchemy studies! Hahahahahahaha...\");\n+                                        } else if(state == 0) {\n+                                                cm.sendOk(\"You guys are such a pain, geez. Very well, I present you my newest weapon, brought by the finest alchemy, #rFrankenroid#k.\");\n+                                                eim.dropMessage(5, \"Yulete: I present you my newest weapon, brought by the finest alchemy, Frankenroid!\");\n+\n+                                                var mapobj = eim.getMapInstance(926100401);\n+                                                var bossobj = MapleLifeFactory.getMonster(9300139);\n+                                                mapobj.spawnMonsterOnGroundBelow(bossobj, new Packages.java.awt.Point(250, 100));\n+\n+                                                eim.setIntProperty(\"statusStg7\", 1);\n+                                                eim.setIntProperty(\"yuletePassed\", -1);\n+                                        } else {\n+                                                cm.sendOk(\"You guys are such a pain, geez. Very well, I present you my newest weapon, brought by the finest combined alchemy of Alcadno's and Zenumist's, those that the boring people of Magatia societies have banned to bring along, the #rmighty Frankenroid#k!\");\n+                                                eim.dropMessage(5, \"Yulete: I present you my newest weapon, brought by the finest combined alchemy of Alcadno's and Zenumist's, those that the boring people of Magatia societies have banned to bring along, the mighty Frankenroid!!\");\n+\n+                                                var mapobj = eim.getMapInstance(926100401);\n+                                                var bossobj = MapleLifeFactory.getMonster(9300140);\n+                                                mapobj.spawnMonsterOnGroundBelow(bossobj, new Packages.java.awt.Point(250, 100));\n+\n+                                                eim.setIntProperty(\"statusStg7\", 2);\n+                                                eim.setIntProperty(\"yuletePassed\", -1);\n+                                        }\n+                                }\n+                        }\n+                        \n+                        cm.dispose();\n+                }\n+        }\n+}\n\\ No newline at end of file"}, {"sha": "2c3d10e5ba9df04c6bc8cd3127bd29f66f705b23", "filename": "scripts/npc/2112001.js", "status": "added", "additions": 58, "deletions": 0, "changes": 58, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/2112001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/2112001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2112001.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,58 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/* Yulete\n+\tTraces of Yulete (926100500)\n+\tTalking\n+ */\n+\n+var status;\n+ \n+function start() {\n+        status = -1;\n+        action(1, 0, 0);\n+}\n+\n+function action(mode, type, selection) {\n+        if (mode == -1) {\n+                cm.dispose();\n+        } else {\n+                if (mode == 0 && status == 0) {\n+                        cm.dispose();\n+                        return;\n+                }\n+                if (mode == 1)\n+                        status++;\n+                else\n+                        status--;\n+    \n+                if (status == 0) {\n+                        cm.sendSimple(\"Defeated... So, that's how Yulete's legacy will reach it's end, oh how woe is this... Hope you guys are happy now, as I will pass my days rotting in a dark cellar. Everything I've done was for the sake of Magatia!! (sob)\\r\\n #Ll# Hey man, come now, cheer up! There were not many damages that couldn't be resolved here. Magatia created these forbidding laws to protect it's people from the undoings a greater power like this would do if it reaches wrong hands. That's not the end for you, accept rehabilitation from the Societies and everything will work out!#l\");\n+                } else if (status == 1){\n+                        cm.sendNext(\"... Are you guys forgiving me after all that I've done? Well, I guess I was blinded by the great source of power that could be discovered that way, maybe they're right saying a human can't simply fathom on the usage of those powers without corrupting theirselves along the way... I am profoundly sorry, and to make myself up with everyone I'm willing to help the Societies again wherever I can on the progress of alchemy. Thank you.\");\n+                } else {\n+                        if(!cm.isQuestCompleted(7770)) cm.completeQuest(7770);\n+                        \n+                        cm.warp(926100600);\n+                        cm.dispose();\n+                }\n+        }\n+}\n\\ No newline at end of file"}, {"sha": "93f7658615f0df930c0bd54cbec3de3377ff5639", "filename": "scripts/npc/2112003.js", "status": "added", "additions": 77, "deletions": 0, "changes": 77, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/2112003.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/2112003.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2112003.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,77 @@\n+/**\n+ * @author: Ronan\n+ * @npc: Juliet\n+ * @map: Magatia - Alcadno - Hidden Room (261000021)\n+ * @func: Magatia PQ (Alcadno)\n+*/\n+\n+var status = 0;\n+var em = null;\n+\n+function start() {\n+\tstatus = -1;\n+        action(1, 0, 0);\n+}\n+\n+function action(mode, type, selection) {\n+        if (mode == -1) {\n+                cm.dispose();\n+        } else {\n+                if (mode == 0 && status == 0) {\n+                        cm.dispose();\n+                        return;\n+                }\n+                if (mode == 1)\n+                        status++;\n+                else\n+                        status--;\n+                    \n+                if(cm.getMapId() != 261000021) {\n+                        if(status == 0) {\n+                                cm.sendYesNo(\"We must keep fighting to save Romeo, please keep your pace. If you are not feeling so well to continue, your companions and I will understand... So, are you going to retreat?\");\n+                        } else if(status == 1) {\n+                                cm.warp(926110700);\n+                                cm.dispose();\n+                        }\n+                } else {\n+                        if (status == 0) {\n+                                em = cm.getEventManager(\"MagatiaPQ_A\");\n+                                if(em == null) {\n+                                        cm.sendOk(\"The Magatia PQ (Alcadno) has encountered an error.\");\n+                                        cm.dispose();\n+                                        return;\n+                                }\n+\n+                                cm.sendSimple(\"#e#b<Party Quest: Romeo and Juliet>\\r\\n#k#n\" + em.getProperty(\"party\") + \"\\r\\n\\r\\nMy beloved Romeo has been kidnapped! Although he is Zenumist's, I can't stand by and just see him suffer just because of this foolish clash. I need you and your colleagues help to save him! Please, help us!! Please have your #bparty leader#k talk to me.#b\\r\\n#L0#I want to participate in the party quest.\\r\\n#L1#I want to find party members.\\r\\n#L2#I would like to hear more details.\");\n+                        } else if (status == 1) {\n+                                if (selection == 0) {\n+                                        if (cm.getParty() == null) {\n+                                                cm.sendOk(\"You can participate in the party quest only if you are in a party.\");\n+                                                cm.dispose();\n+                                        } else if(!cm.isLeader()) {\n+                                                cm.sendOk(\"Your party leader must talk to me to start this party quest.\");\n+                                                cm.dispose();\n+                                        } else {\n+                                                var eli = em.getEligibleParty(cm.getParty());\n+                                                if(eli.size() > 0) {\n+                                                        if(!em.startInstance(cm.getParty(), cm.getPlayer().getMap(), 1)) {\n+                                                                cm.sendOk(\"Another party has already entered the #rParty Quest#k in this channel. Please try another channel, or wait for the current party to finish.\");\n+                                                        }\n+                                                }\n+                                                else {\n+                                                        cm.sendOk(\"You cannot start this party quest yet, because either your party is not in the range size, some of your party members are not eligible to attempt it or they are not in this map. If you're having trouble finding party members, try Party Search.\");\n+                                                }\n+\n+                                                cm.dispose();\n+                                        }\n+                                } else if (selection == 1) {\n+                                        cm.sendOk(\"Try using a Super Megaphone or asking your buddies or guild to join!\");\n+                                        cm.dispose();\n+                                } else {\n+                                        cm.sendOk(\"#e#b<Party Quest: Romeo and Juliet>#k#n\\r\\nNot long ago, a scientist named Yulete has been banished from this town because of his researches of combined alchemies of Alcadno's and Zenumist's. Because of the immensurable amount of power coming from this combination, it is forbidden by law to study both. Yet, he ignored this law and got hands in both researches. As a result, he has been exiled.\\r\\nHe is now retaliating, already took my beloved one and his next target is me, as we are big pictures of Magatia, successors of both societies. But I'm not afraid. We must recover him at all costs!\\r\\n\");\n+                                        cm.dispose();\n+                                }\n+                        }\n+                }\n+        }\n+}\n\\ No newline at end of file"}, {"sha": "dca6b73e390fc04175e4c90067ba45faab68ea7b", "filename": "scripts/npc/2112004.js", "status": "added", "additions": 77, "deletions": 0, "changes": 77, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/2112004.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/2112004.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2112004.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,77 @@\n+/**\n+ * @author: Ronan\n+ * @npc: Romeo\n+ * @map: Magatia - Zenumist - Hidden Room (261000011)\n+ * @func: Magatia PQ (Zenumist)\n+*/\n+\n+var status = 0;\n+var em = null;\n+\n+function start() {\n+\tstatus = -1;\n+        action(1, 0, 0);\n+}\n+\n+function action(mode, type, selection) {\n+        if (mode == -1) {\n+                cm.dispose();\n+        } else {\n+                if (mode == 0 && status == 0) {\n+                        cm.dispose();\n+                        return;\n+                }\n+                if (mode == 1)\n+                        status++;\n+                else\n+                        status--;\n+                    \n+                if(cm.getMapId() != 261000011) {\n+                        if(status == 0) {\n+                                cm.sendYesNo(\"We must keep fighting to save Juliet, please keep your pace. If you are not feeling so well to continue, your companions and I will understand... So, are you going to retreat?\");\n+                        } else if(status == 1) {\n+                                cm.warp(926100700);\n+                                cm.dispose();\n+                        }\n+                } else {\n+                        if (status == 0) {\n+                                em = cm.getEventManager(\"MagatiaPQ_Z\");\n+                                if(em == null) {\n+                                        cm.sendOk(\"The Magatia PQ (Zenumist) has encountered an error.\");\n+                                        cm.dispose();\n+                                        return;\n+                                }\n+\n+                                cm.sendSimple(\"#e#b<Party Quest: Romeo and Juliet>\\r\\n#k#n\" + em.getProperty(\"party\") + \"\\r\\n\\r\\nMy beloved Juliet has been kidnapped! Although she is Alcadno's, I can't stand by and just see her suffer just because of this foolish clash. I need you and your colleagues help to save her! Please, help us!! Please have your #bparty leader#k talk to me.#b\\r\\n#L0#I want to participate in the party quest.\\r\\n#L1#I want to find party members.\\r\\n#L2#I would like to hear more details.\");\n+                        } else if (status == 1) {\n+                                if (selection == 0) {\n+                                        if (cm.getParty() == null) {\n+                                                cm.sendOk(\"You can participate in the party quest only if you are in a party.\");\n+                                                cm.dispose();\n+                                        } else if(!cm.isLeader()) {\n+                                                cm.sendOk(\"Your party leader must talk to me to start this party quest.\");\n+                                                cm.dispose();\n+                                        } else {\n+                                                var eli = em.getEligibleParty(cm.getParty());\n+                                                if(eli.size() > 0) {\n+                                                        if(!em.startInstance(cm.getParty(), cm.getPlayer().getMap(), 1)) {\n+                                                                cm.sendOk(\"Another party has already entered the #rParty Quest#k in this channel. Please try another channel, or wait for the current party to finish.\");\n+                                                        }\n+                                                }\n+                                                else {\n+                                                        cm.sendOk(\"You cannot start this party quest yet, because either your party is not in the range size, some of your party members are not eligible to attempt it or they are not in this map. If you're having trouble finding party members, try Party Search.\");\n+                                                }\n+\n+                                                cm.dispose();\n+                                        }\n+                                } else if (selection == 1) {\n+                                        cm.sendOk(\"Try using a Super Megaphone or asking your buddies or guild to join!\");\n+                                        cm.dispose();\n+                                } else {\n+                                        cm.sendOk(\"#e#b<Party Quest: Romeo and Juliet>#k#n\\r\\nNot long ago, a scientist named Yulete has been banished from this town because of his researches of combined alchemies of Alcadno's and Zenumist's. Because of the immensurable amount of power coming from this combination, it is forbidden by law to study both. Yet, he ignored this law and got hands in both researches. As a result, he has been exiled.\\r\\nHe is now retaliating, already took my beloved one and his next target is me, as we are big pictures of Magatia, successors of both societies. But I'm not afraid. We must recover her at all costs!\\r\\n\");\n+                                        cm.dispose();\n+                                }\n+                        }\n+                }\n+        }\n+}\n\\ No newline at end of file"}, {"sha": "29860dce6b1b97d6d887e293e97027cb8788a47d", "filename": "scripts/npc/2112005.js", "status": "added", "additions": 127, "deletions": 0, "changes": 127, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/2112005.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/2112005.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2112005.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,127 @@\n+/* \n+    This file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+               Matthias Butz <matze@odinms.de>\n+               Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+/**\n+ * @author: Ronan\n+ * @npc: Juliet\n+ * @func: MagatiaPQ area NPC\n+*/\n+\n+var status;\n+ \n+function start() {\n+        status = -1;\n+        action(1, 0, 0);\n+}\n+\n+function action(mode, type, selection) {\n+        if (mode == -1) {\n+                cm.dispose();\n+        } else {\n+                if (mode == 0 && status == 0) {\n+                        cm.dispose();\n+                        return;\n+                }\n+                if (mode == 1)\n+                        status++;\n+                else\n+                        status--;\n+                    \n+                var eim = cm.getEventInstance();\n+                \n+                if(!eim.isEventCleared()) {\n+                        if(status == 0) {\n+                                if(eim.getIntProperty(\"npcShocked\") == 0 && cm.haveItem(4001130, 1)) {\n+                                        cm.gainItem(4001130, -1);\n+                                        eim.setIntProperty(\"npcShocked\", 1);\n+                                        \n+                                        cm.sendNext(\"Oh? You got a letter for me? On times like this, what should it be... Gasp! Something big is going on, guys. Rally yourselves, from now on things will be harder than ever!\");\n+                                        eim.dropMessage(6, \"Juliet seemed very much in shock after reading Romeo's Letter.\");\n+                                        \n+                                        cm.dispose();\n+                                        return;\n+                                } else if (eim.getIntProperty(\"statusStg4\") == 1) {\n+                                        var door = cm.getMap().getReactorByName(\"jnr3_out3\");\n+                                    \n+                                        if(door.getState() == 0) {\n+                                                cm.sendNext(\"Let me open the door for you.\");\n+                                                door.hitReactor(cm.getClient());\n+                                        } else {\n+                                                cm.sendNext(\"Please hurry, Romeo is in trouble.\");\n+                                        }\n+                                        \n+                                        cm.dispose();\n+                                        return;\n+                                } else if (cm.haveItem(4001134, 1) && cm.haveItem(4001135, 1)) {\n+                                        if (cm.isEventLeader()) {\n+                                                cm.gainItem(4001134, -1);\n+                                                cm.gainItem(4001135, -1);\n+                                                cm.sendNext(\"Great! You got both Alcadno and Zenumist files at hand. Now we can proceed.\");\n+\n+                                                eim.showClearEffect();\n+                                                eim.giveEventPlayersStageReward(4);\n+                                                eim.setIntProperty(\"statusStg4\", 1);\n+                                                \n+                                                cm.getMap().killAllMonsters();\n+                                                cm.getMap().getReactorByName(\"jnr3_out3\").hitReactor(cm.getClient());\n+                                        } else {\n+                                                cm.sendOk(\"Please let your leader pass the files to me.\");\n+                                        }\n+\n+                                        cm.dispose();\n+                                        return;\n+                                } else {\n+                                        cm.sendYesNo(\"We must keep fighting to save Romeo, please keep your pace. If you are not feeling so well to continue, your companions and I will understand... So, are you going to retreat?\");\n+                                }\n+                        } else {\n+                                cm.warp(926110700);\n+                                cm.dispose();\n+                        }\n+                } else {\n+                        if(status == 0) {\n+                                if(eim.getIntProperty(\"escortFail\") == 0) {\n+                                        cm.sendNext(\"Finally, Romeo is safe! Thanks to your efforts, we could save him from the clutches of Yulete, who will now be judged for his rebellion against Magatia. From now on, as he will start rehabilitation, we will keep an eye on his endeavours, making sure he will cause no more troubles on the future.\");\n+                                }\n+                                else {\n+                                        cm.sendNext(\"Romeo is safe now, although the battle took it's toll on him... Thanks to your efforts, we could save him from the clutches of Yulete, who will now be judged for his rebellion against Magatia. Thank you.\");\n+                                        status = 2;\n+                                }\n+                        } else if(status == 1) {\n+                                cm.sendNext(\"Now, please receive this gift as an act of acceptation for our gratitude.\");\n+                        } else if(status == 2) {\n+                                if(cm.canHold(4001160)) {\n+                                        cm.gainItem(4001160, 1);\n+                                        \n+                                        if(eim.getIntProperty(\"normalClear\") == 1) cm.warp(926110600);\n+                                        else cm.warp(926110500);\n+                                } else {\n+                                        cm.sendOk(\"Make sure you have a space on your ETC inventory.\");\n+                                }\n+                                \n+                                cm.dispose();\n+                        } else {\n+                                cm.warp(926110600);\n+                                cm.dispose();\n+                        }\n+                }\n+        }\n+}\n\\ No newline at end of file"}, {"sha": "3ab1911949f8da505a55c44b01aaf717ba167e7b", "filename": "scripts/npc/2112006.js", "status": "added", "additions": 127, "deletions": 0, "changes": 127, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/2112006.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/2112006.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2112006.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,127 @@\n+/* \n+    This file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+               Matthias Butz <matze@odinms.de>\n+               Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+/**\n+ * @author: Ronan\n+ * @npc: Romeo\n+ * @func: MagatiaPQ area NPC\n+*/\n+\n+var status;\n+ \n+function start() {\n+        status = -1;\n+        action(1, 0, 0);\n+}\n+\n+function action(mode, type, selection) {\n+        if (mode == -1) {\n+                cm.dispose();\n+        } else {\n+                if (mode == 0 && status == 0) {\n+                        cm.dispose();\n+                        return;\n+                }\n+                if (mode == 1)\n+                        status++;\n+                else\n+                        status--;\n+                    \n+                var eim = cm.getEventInstance();\n+                \n+                if(!eim.isEventCleared()) {\n+                        if(status == 0) {\n+                                if(eim.getIntProperty(\"npcShocked\") == 0 && cm.haveItem(4001131, 1)) {\n+                                        cm.gainItem(4001131, -1);\n+                                        eim.setIntProperty(\"npcShocked\", 1);\n+                                        \n+                                        cm.sendNext(\"Oh? You got a letter for me? On times like this, what should it be... Gasp! Something big is going on, guys. Rally yourselves, from now on things will be harder than ever!\");\n+                                        eim.dropMessage(6, \"Romeo seemed very much in shock after reading Juliet's Letter.\");\n+                                        \n+                                        cm.dispose();\n+                                        return;\n+                                } else if (eim.getIntProperty(\"statusStg4\") == 1) {\n+                                        var door = cm.getMap().getReactorByName(\"rnj3_out3\");\n+                                    \n+                                        if(door.getState() == 0) {\n+                                                cm.sendNext(\"Let me open the door for you.\");\n+                                                door.hitReactor(cm.getClient());\n+                                        } else {\n+                                                cm.sendNext(\"Please hurry, Juliet is in trouble.\");\n+                                        }\n+                                        \n+                                        cm.dispose();\n+                                        return;\n+                                } else if (cm.haveItem(4001134, 1) && cm.haveItem(4001135, 1)) {\n+                                        if (cm.isEventLeader()) {\n+                                                cm.gainItem(4001134, -1);\n+                                                cm.gainItem(4001135, -1);\n+                                                cm.sendNext(\"Great! You got both Alcadno and Zenumist files at hand. Now we can proceed.\");\n+\n+                                                eim.showClearEffect();\n+                                                eim.giveEventPlayersStageReward(4);\n+                                                eim.setIntProperty(\"statusStg4\", 1);\n+                                                \n+                                                cm.getMap().killAllMonsters();\n+                                                cm.getMap().getReactorByName(\"rnj3_out3\").hitReactor(cm.getClient());\n+                                        } else {\n+                                                cm.sendOk(\"Please let your leader pass the files to me.\");\n+                                        }\n+\n+                                        cm.dispose();\n+                                        return;\n+                                } else {\n+                                        cm.sendYesNo(\"We must keep fighting to save Juliet, please keep your pace. If you are not feeling so well to continue, your companions and I will understand... So, are you going to retreat?\");\n+                                }\n+                        } else {\n+                                cm.warp(926100700);\n+                                cm.dispose();\n+                        }\n+                } else {\n+                        if(status == 0) {\n+                                if(eim.getIntProperty(\"escortFail\") == 0) {\n+                                        cm.sendNext(\"Finally, Juliet is safe! Thanks to your efforts, we could save her from the clutches of Yulete, who will now be judged for his rebellion against Magatia. From now on, as he will start rehabilitation, we will keep an eye on his endeavours, making sure he will cause no more troubles on the future.\");\n+                                }\n+                                else {\n+                                        cm.sendNext(\"Juliet is safe now, although the battle took it's toll on her... Thanks to your efforts, we could save her from the clutches of Yulete, who will now be judged for his rebellion against Magatia. Thank you.\");\n+                                        status = 2;\n+                                }\n+                        } else if(status == 1) {\n+                                cm.sendNext(\"Now, please receive this gift as an act of acceptation for our gratitude.\");\n+                        } else if(status == 2) {\n+                                if(cm.canHold(4001159)) {\n+                                        cm.gainItem(4001159, 1);\n+                                        \n+                                        if(eim.getIntProperty(\"normalClear\") == 1) cm.warp(926100600);\n+                                        else cm.warp(926100500);\n+                                } else {\n+                                        cm.sendOk(\"Make sure you have a space on your ETC inventory.\");\n+                                }\n+                                \n+                                cm.dispose();\n+                        } else {\n+                                cm.warp(926100600);\n+                                cm.dispose();\n+                        }\n+                }\n+        }\n+}\n\\ No newline at end of file"}, {"sha": "22a717fb496bde818f544039624b7dec477bfc74", "filename": "scripts/npc/2112007.js", "status": "added", "additions": 70, "deletions": 0, "changes": 70, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/2112007.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/2112007.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2112007.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,70 @@\n+/* \n+    This file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+               Matthias Butz <matze@odinms.de>\n+               Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+/**\n+ * @author: Ronan\n+ * @npc: Investigation Result\n+ * @func: Gives MagatiaPQ stg1 item\n+*/\n+\n+function start() {\n+    var eim = cm.getEventInstance();\n+    var book = \"stg1_b\" + (cm.getNpcObjectId() % 26);\n+    \n+    var res = eim.getIntProperty(book);\n+    if(res > -1) {\n+        eim.setIntProperty(book, -1);\n+        \n+        if(res == 0) {  // mesos\n+            var mgain = 500 * cm.getPlayer().getMesoRate();\n+            cm.sendNext(\"Earned \" + mgain + \" mesos!\");\n+            cm.gainMeso(mgain);\n+        } else if(res == 1) {  // exp\n+            var egain = 500 * cm.getPlayer().getExpRate();\n+            cm.sendNext(\"Earned \" + egain + \" exp!\");\n+            cm.gainExp(egain);\n+        } else if(res == 2) {  // letter\n+            var letter = 4001131;\n+            if(!cm.canHold(letter)) {\n+                cm.sendOk(\"You got a letter, however it didn't fit on your inventory, so you put it back.\");\n+                cm.dispose();\n+                return;\n+            }\n+            \n+            cm.gainItem(letter, 1);\n+            cm.sendNext(\"You found a letter, strategically placed here as it seems.\");\n+        } else if(res == 3) {  // pass\n+            cm.sendNext(\"You found the trigger to the next stage.\");\n+            \n+            var eim = cm.getEventInstance();\n+            eim.showClearEffect();\n+            eim.giveEventPlayersStageReward(1);\n+            eim.setIntProperty(\"statusStg1\", 1);\n+            \n+            cm.getMap().getReactorByName(\"d00\").hitReactor(cm.getClient());\n+        }\n+    } else {\n+        cm.sendNext(\"There is nothing here.\");\n+    }\n+    \n+    cm.dispose();\n+}"}, {"sha": "ea52077fb4fa6bfbfd8fba0a1a61eb884e5d64d7", "filename": "scripts/npc/2112010.js", "status": "added", "additions": 120, "deletions": 0, "changes": 120, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/2112010.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/2112010.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2112010.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,120 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/* Yulete\n+\tYulete's Office (926110203)\n+\tMagatia NPC\n+ */\n+\n+var status;\n+ \n+importPackage(Packages.server.life);\n+ \n+function start() {\n+        status = -1;\n+        action(1, 0, 0);\n+}\n+\n+function playersTooClose() {\n+        var npcpos = cm.getMap().getMapObject(cm.getNpcObjectId()).getPosition();\n+        var listchr = cm.getMap().getPlayers();\n+        \n+        for (var iterator = listchr.iterator(); iterator.hasNext();) {\n+            var chr = iterator.next();\n+            \n+            var chrpos = chr.getPosition();\n+            if(Math.sqrt( Math.pow((npcpos.getX() - chrpos.getX()), 2) + Math.pow((npcpos.getY() - chrpos.getY()), 2) ) < 310) return true;\n+        }\n+        \n+        return false;\n+}\n+\n+function action(mode, type, selection) {\n+        if (mode == -1) {\n+                cm.dispose();\n+        } else {\n+                if (mode == 0 && status == 0) {\n+                        cm.dispose();\n+                        return;\n+                }\n+                if (mode == 1)\n+                        status++;\n+                else\n+                        status--;\n+    \n+                var eim = cm.getEventInstance();\n+                \n+                if(cm.getMapId() == 926110203) {\n+                        if(status == 0) {\n+                                var state = eim.getIntProperty(\"yuleteTalked\");\n+\n+                                if(state == -1) {\n+                                    cm.sendOk(\"Heh, it seems you guys have company. Have fun with them, as I politely request my leave.\");\n+\n+                                } else if (playersTooClose() || eim.getIntProperty(\"npcShocked\") == 0) {\n+                                    cm.sendOk(\"Oh, hello there. I have been #bmonitoring your moves#k since you guys entered this perimeter. Quite the feat reaching here, I commend all of you. Now, now, look at the time, I've got an appointment right now, I'm afraid I will need to request my leave. But worry not, my #raccessors#k will deal with all of you. Now, if you permit me, I'm leaving now.\");\n+\n+                                    eim.setIntProperty(\"yuleteTalked\", -1);\n+                                } else {\n+                                    cm.sendOk(\"... Hah! What, wh-- How did you get here?! I though I had sealed all paths here! No matter, this situation will be resolved soon. Guys: DEPLOY the #rmaster weapon#k!! You! Yes, you. Don't you think this ends here, look back at your companions, they need some help! I'll be retreating for now.\");\n+\n+                                    eim.setIntProperty(\"yuleteTalked\", 1);\n+                                }\n+                        }\n+                        \n+                        cm.dispose();\n+                } else {\n+                        if(status == 0) {\n+                                if(eim.isEventCleared()) {\n+                                        cm.sendOk(\"Nooooo... I have been beated? But how? Everything I did was for the sake of the development of a greater alchemy! You can't jail me, I did what everybody standing in a place like mine would do! But no, they simply decided to damp up the progress of the science JUST BECAUSE it was deemed dangerous??? Oh, come on!\");\n+                                } else {\n+                                        var state = eim.getIntProperty(\"yuletePassed\");\n+\n+                                        if(state == -1) {\n+                                                cm.sendOk(\"Behold! The pinnacle of Magatia's alchemy studies! Hahahahahahaha...\");\n+                                        } else if(state == 0) {\n+                                                cm.sendOk(\"You guys are such a pain, geez. Very well, I present you my newest weapon, brought by the finest alchemy, #rFrankenroid#k.\");\n+                                                eim.dropMessage(5, \"Yulete: I present you my newest weapon, brought by the finest alchemy, Frankenroid!\");\n+\n+                                                var mapobj = eim.getMapInstance(926110401);\n+                                                var bossobj = MapleLifeFactory.getMonster(9300151);\n+                                                mapobj.spawnMonsterOnGroundBelow(bossobj, new Packages.java.awt.Point(250, 100));\n+\n+                                                eim.setIntProperty(\"statusStg7\", 1);\n+                                                eim.setIntProperty(\"yuletePassed\", -1);\n+                                        } else {\n+                                                cm.sendOk(\"You guys are such a pain, geez. Very well, I present you my newest weapon, brought by the finest combined alchemy of Alcadno's and Zenumist's, those that the boring people of Magatia societies have banned to bring along, the #rmighty Frankenroid#k!\");\n+                                                eim.dropMessage(5, \"Yulete: I present you my newest weapon, brought by the finest combined alchemy of Alcadno's and Zenumist's, those that the boring people of Magatia societies have banned to bring along, the mighty Frankenroid!!\");\n+\n+                                                var mapobj = eim.getMapInstance(926110401);\n+                                                var bossobj = MapleLifeFactory.getMonster(9300152);\n+                                                mapobj.spawnMonsterOnGroundBelow(bossobj, new Packages.java.awt.Point(250, 100));\n+\n+                                                eim.setIntProperty(\"statusStg7\", 2);\n+                                                eim.setIntProperty(\"yuletePassed\", -1);\n+                                        }\n+                                }\n+                        }\n+                        \n+                        cm.dispose();\n+                }\n+        }\n+}\n\\ No newline at end of file"}, {"sha": "4e3b223f7df284560380448ebc7727bf13340e90", "filename": "scripts/npc/2112011.js", "status": "added", "additions": 58, "deletions": 0, "changes": 58, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/2112011.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/2112011.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2112011.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,58 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/* Yulete\n+\tTraces of Yulete (926110500)\n+\tTalking\n+ */\n+\n+var status;\n+ \n+function start() {\n+        status = -1;\n+        action(1, 0, 0);\n+}\n+\n+function action(mode, type, selection) {\n+        if (mode == -1) {\n+                cm.dispose();\n+        } else {\n+                if (mode == 0 && status == 0) {\n+                        cm.dispose();\n+                        return;\n+                }\n+                if (mode == 1)\n+                        status++;\n+                else\n+                        status--;\n+    \n+                if (status == 0) {\n+                        cm.sendSimple(\"Defeated... So, that's how Yulete's legacy will reach it's end, oh how woe is this... Hope you guys are happy now, as I will pass my days rotting in a dark cellar. Everything I've done was for the sake of Magatia!! (sob)\\r\\n #Ll# Hey man, come now, cheer up! There were not many damages that couldn't be resolved here. Magatia created these forbidding laws to protect it's people from the undoings a greater power like this would do if it reaches wrong hands. That's not the end for you, accept rehabilitation from the Societies and everything will work out!#l\");\n+                } else if (status == 1){\n+                        cm.sendNext(\"... Are you guys forgiving me after all that I've done? Well, I guess I was blinded by the great source of power that could be discovered that way, maybe they're right saying a human can't simply fathom on the usage of those powers without corrupting theirselves along the way... I am profoundly sorry, and to make myself up with everyone I'm willing to help the Societies again wherever I can on the progress of alchemy. Thank you.\");\n+                } else {\n+                        if(!cm.isQuestCompleted(7770)) cm.completeQuest(7770);\n+                        \n+                        cm.warp(926110600);\n+                        cm.dispose();\n+                }\n+        }\n+}\n\\ No newline at end of file"}, {"sha": "887f0372f1cd233ca33ab64eb4adccb99bc2cce6", "filename": "scripts/npc/2112013.js", "status": "added", "additions": 70, "deletions": 0, "changes": 70, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/2112013.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/2112013.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2112013.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,70 @@\n+/* \n+    This file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+               Matthias Butz <matze@odinms.de>\n+               Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+/**\n+ * @author: Ronan\n+ * @npc: Investigation Result\n+ * @func: Gives MagatiaPQ stg1 item\n+*/\n+\n+function start() {\n+    var eim = cm.getEventInstance();\n+    var book = \"stg1_b\" + (cm.getNpcObjectId() % 26);\n+    \n+    var res = eim.getIntProperty(book);\n+    if(res > -1) {\n+        eim.setIntProperty(book, -1);\n+        \n+        if(res == 0) {  // mesos\n+            var mgain = 500 * cm.getPlayer().getMesoRate();\n+            cm.sendNext(\"Earned \" + mgain + \" mesos!\");\n+            cm.gainMeso(mgain);\n+        } else if(res == 1) {  // exp\n+            var egain = 500 * cm.getPlayer().getExpRate();\n+            cm.sendNext(\"Earned \" + egain + \" exp!\");\n+            cm.gainExp(egain);\n+        } else if(res == 2) {  // letter\n+            var letter = 4001130;\n+            if(!cm.canHold(letter)) {\n+                cm.sendOk(\"You got a letter, however it didn't fit on your inventory, so you put it back.\");\n+                cm.dispose();\n+                return;\n+            }\n+            \n+            cm.gainItem(letter, 1);\n+            cm.sendNext(\"You found a letter, strategically placed here as it seems.\");\n+        } else if(res == 3) {  // pass\n+            cm.sendNext(\"You found the trigger to the next stage.\");\n+            \n+            var eim = cm.getEventInstance();\n+            eim.showClearEffect();\n+            eim.giveEventPlayersStageReward(1);\n+            eim.setIntProperty(\"statusStg1\", 1);\n+            \n+            cm.getMap().getReactorByName(\"d00\").hitReactor(cm.getClient());\n+        }\n+    } else {\n+        cm.sendNext(\"There is nothing here.\");\n+    }\n+    \n+    cm.dispose();\n+}"}, {"sha": "749ba9b36a6e19827274ea6ee10d23c6ee9feffd", "filename": "scripts/npc/2112018.js", "status": "added", "additions": 67, "deletions": 0, "changes": 67, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/2112018.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/2112018.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2112018.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,67 @@\n+/* \n+    This file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+               Matthias Butz <matze@odinms.de>\n+               Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+/**\n+ * @author: Ronan\n+ * @npc: Romeo & Juliet\n+ * @func: MagatiaPQ exit\n+*/\n+\n+var status;\n+ \n+function start() {\n+        status = -1;\n+        action(1, 0, 0);\n+}\n+\n+function action(mode, type, selection) {\n+        if (mode == -1) {\n+                cm.dispose();\n+        } else {\n+                if (mode == 0 && status == 0) {\n+                        cm.dispose();\n+                        return;\n+                }\n+                if (mode == 1)\n+                        status++;\n+                else\n+                        status--;\n+    \n+                var eim = cm.getEventInstance();\n+                \n+                if(status == 0) {\n+                        if(eim.getIntProperty(\"escortFail\") == 1) {\n+                                cm.sendNext(\"Thanks to you, we were capable of reunion once again. Yulete will now be forwarded to jail for attempt against the Law of Magatia. Once again, thank you.\");\n+                        } else {\n+                                cm.sendNext(\"Thanks to you, we were capable of reunion once again. Yulete will now pass through rehabilitation, as his studies are invaluable for the growth of our town, and all his doings were being made because he was blinded by the greed for power, although it was for the sake of Magatia. Once again, thank you.\");\n+                        }\n+                } else {\n+                        if(eim.giveEventReward(cm.getPlayer())) {\n+                                cm.warp((eim.getIntProperty(\"isAlcadno\") == 0) ? 261000011 : 261000021);\n+                        } else {\n+                                cm.sendOk(\"Please free a slot on one of your inventories before receiving your reward.\");\n+                        }\n+                        \n+                        cm.dispose();\n+                }\n+        }\n+}\n\\ No newline at end of file"}, {"sha": "1d3e62670f2983e792da7a3c87bc3133599acee5", "filename": "scripts/npc/9000038.js", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/9000038.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/npc/9000038.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9000038.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -83,6 +83,8 @@ function action(mode, type, selection) {\n                         }\n                         \n                         cm.sendPrev(sendStr);\n+                } else if(status == 2) {\n+                        cm.dispose();\n                 }\n         }\n }"}, {"sha": "bab10acb72deff03a20288a658c98c1a7cbe8640", "filename": "scripts/portal/jnr12_in.js", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/jnr12_in.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/jnr12_in.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/jnr12_in.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,4 @@\n+function enter(pi) {\n+    pi.warp(926110401, 0); //next\n+    return(true);\n+}\n\\ No newline at end of file"}, {"sha": "3a8eb921ae9eedaee741b67c38e8a5173f4c43df", "filename": "scripts/portal/jnr1_out.js", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/jnr1_out.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/jnr1_out.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/jnr1_out.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,9 @@\n+function enter(pi) {\n+    if (pi.getEventInstance().getIntProperty(\"statusStg2\") == 1) {\n+\tpi.warp(926110100, 0); //next\n+        return(true);\n+    } else {\n+\tpi.playerMessage(5, \"The portal is not opened yet.\");\n+        return(false);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "15f9455afe42fc4d43d61175f5ddb25dfecd2dff", "filename": "scripts/portal/jnr1_pt00.js", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/jnr1_pt00.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/jnr1_pt00.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/jnr1_pt00.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,9 @@\n+function enter(pi) {\n+    if (pi.getEventInstance().getIntProperty(\"statusStg1\") == 1) {\n+\tpi.warp(926110001, 0); //next\n+        return(true);\n+    } else {\n+\tpi.playerMessage(5, \"The portal is not opened yet.\");\n+        return(false);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "46c8b654a2eb2deb6c6ccebe1a48087314c9f889", "filename": "scripts/portal/jnr2_out.js", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/jnr2_out.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/jnr2_out.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/jnr2_out.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,9 @@\n+function enter(pi) {\n+    if (pi.getEventInstance().getIntProperty(\"statusStg3\") == 3) {\n+\tpi.warp(926110200, 0); //next\n+        return(true);\n+    } else {\n+\tpi.playerMessage(5, \"The portal is not opened yet.\");\n+        return(false);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "7e915d75076b9c5b93022c49873f6737912632d0", "filename": "scripts/portal/jnr3_in0.js", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/jnr3_in0.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/jnr3_in0.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/jnr3_in0.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,9 @@\n+function enter(pi) {\n+    if (pi.getMap().getReactorByName(\"jnr3_out1\").getState() == 1) {\n+\tpi.warp(926110201, 0);\n+        return(true);\n+    } else {\n+\tpi.playerMessage(5, \"The door is not opened yet.\");\n+        return(false);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "a7002274b87e645131722dfbe3b7928724ab80c8", "filename": "scripts/portal/jnr3_in1.js", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/jnr3_in1.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/jnr3_in1.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/jnr3_in1.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,9 @@\n+function enter(pi) {\n+    if (pi.getMap().getReactorByName(\"jnr3_out2\").getState() == 1) {\n+\tpi.warp(926110202, 0);\n+        return(true);\n+    } else {\n+\tpi.playerMessage(5, \"The door is not opened yet.\");\n+        return(false);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "421be861e21516b81ef97b0a6b9b2d752d93702d", "filename": "scripts/portal/jnr3_out.js", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/jnr3_out.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/jnr3_out.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/jnr3_out.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,9 @@\n+function enter(pi) {\n+    if (pi.getMap().getReactorByName(\"jnr3_out3\").getState() == 1) {\n+\tpi.warp(926110203, 0); //next\n+        return(true);\n+    } else {\n+\tpi.playerMessage(5, \"The door is not opened yet.\");\n+        return(false);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "d16c47fcc8a44716921786871a527800cc603f90", "filename": "scripts/portal/jnr4_r1.js", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/jnr4_r1.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/jnr4_r1.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/jnr4_r1.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,16 @@\n+function enter(pi) {\n+    var eim = pi.getEventInstance();\n+    var area = eim.getIntProperty(\"statusStg5\");\n+    var reg = 0;\n+    \n+    if((area >> reg) % 2 == 0) {\n+        area |= (1 << reg);\n+        eim.setIntProperty(\"statusStg5\", area);\n+        \n+\tpi.warp(926110301 + reg, 0); //next\n+        return(true);\n+    } else {\n+\tpi.playerMessage(5, \"This room is already being explored.\");\n+        return(false);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "f94adce20a19cf21d31a7c1645c9347b7427296d", "filename": "scripts/portal/jnr4_r2.js", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/jnr4_r2.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/jnr4_r2.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/jnr4_r2.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,16 @@\n+function enter(pi) {\n+    var eim = pi.getEventInstance();\n+    var area = eim.getIntProperty(\"statusStg5\");\n+    var reg = 1;\n+    \n+    if((area >> reg) % 2 == 0) {\n+        area |= (1 << reg);\n+        eim.setIntProperty(\"statusStg5\", area);\n+        \n+\tpi.warp(926110301 + reg, 0); //next\n+        return(true);\n+    } else {\n+\tpi.playerMessage(5, \"This room is already being explored.\");\n+        return(false);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "fbd0375c265d2355314e1bb744e82de73d111e15", "filename": "scripts/portal/jnr4_r3.js", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/jnr4_r3.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/jnr4_r3.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/jnr4_r3.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,16 @@\n+function enter(pi) {\n+    var eim = pi.getEventInstance();\n+    var area = eim.getIntProperty(\"statusStg5\");\n+    var reg = 2;\n+    \n+    if((area >> reg) % 2 == 0) {\n+        area |= (1 << reg);\n+        eim.setIntProperty(\"statusStg5\", area);\n+        \n+\tpi.warp(926110301 + reg, 0); //next\n+        return(true);\n+    } else {\n+\tpi.playerMessage(5, \"This room is already being explored.\");\n+        return(false);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "ad3fa0ba5940f45b1d57823432aa60f00bee4c31", "filename": "scripts/portal/jnr4_r4.js", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/jnr4_r4.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/jnr4_r4.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/jnr4_r4.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,16 @@\n+function enter(pi) {\n+    var eim = pi.getEventInstance();\n+    var area = eim.getIntProperty(\"statusStg5\");\n+    var reg = 3;\n+    \n+    if((area >> reg) % 2 == 0) {\n+        area |= (1 << reg);\n+        eim.setIntProperty(\"statusStg5\", area);\n+        \n+\tpi.warp(926110301 + reg, 0); //next\n+        return(true);\n+    } else {\n+\tpi.playerMessage(5, \"This room is already being explored.\");\n+        return(false);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "45d9e98dae142c754be32893e3f31f6505c0efef", "filename": "scripts/portal/jnr5_rp.js", "status": "added", "additions": 65, "deletions": 0, "changes": 65, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/jnr5_rp.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/jnr5_rp.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/jnr5_rp.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,65 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/**\n+ *@author Ronan\n+ *jnr5_rp\n+ */\n+\n+function enter(pi) {\n+    var mapplayer = \"stage6_comb\" + (pi.getMapId() % 10);\n+    var eim = pi.getEventInstance();\n+    \n+    if(eim.getProperty(mapplayer) == null) {\n+        var comb = \"\";\n+\n+        for(var i = 0; i < 10; i++) {\n+            var r = Math.floor((Math.random() * 4));\n+            comb += r.toString();\n+        }\n+\n+        eim.setProperty(mapplayer, comb);\n+    }\n+\n+    var comb = eim.getProperty(mapplayer);\n+    \n+    var name = pi.getPortal().getName().substring(2, 4);\n+    var portalId = parseInt(name, 10);\n+    \n+    \n+    var pRow = Math.floor(portalId / 10);\n+    var pCol = (portalId % 10);\n+    \n+    if (pCol == parseInt(comb.substring(pRow, pRow + 1), 10)) {    //climb\n+        if(pRow < 9) {\n+            pi.warp(pi.getMapId(), pi.getPortal().getId() + 4);\n+        } else {\n+            if(eim.getIntProperty(\"statusStg6\") == 0) {\n+                eim.setIntProperty(\"statusStg6\", 1);\n+                eim.giveEventPlayersStageReward(6);\n+            }\n+            \n+            pi.warp(pi.getMapId(), 1);\n+        }\n+        \n+    } else {    //fail\n+        pi.warp(pi.getMapId(), 2);\n+    }\n+    \n+    return false;\n+}\n\\ No newline at end of file"}, {"sha": "11ebdecc5451572e96e657aab8fb97de0ecb9756", "filename": "scripts/portal/jnr6_out.js", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/jnr6_out.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/jnr6_out.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/jnr6_out.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,9 @@\n+function enter(pi) {\n+    if (pi.getMap().getReactorByName(\"jnr6_out\").getState() == 1) {\n+\tpi.warp(926110300);\n+        return(true);\n+    } else {\n+\tpi.playerMessage(5, \"The portal is not opened yet.\");\n+        return(false);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "fdfb44e1eee32ae888904ff5a914d1cd91bae647", "filename": "scripts/portal/jnr_201_0.js", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/jnr_201_0.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/jnr_201_0.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/jnr_201_0.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,9 @@\n+function enter(pi) {\n+    if (pi.getMap().getReactorByName(\"jnr31_out\").getState() == 1) {\n+\tpi.warp(926110200, 1);\n+        return(true);\n+    } else {\n+\tpi.playerMessage(5, \"The door is not opened yet.\");\n+        return(false);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "4fbc753bec7dc84bb1ab0434dac344de491f6186", "filename": "scripts/portal/jnr_202.js", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/jnr_202.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/jnr_202.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/jnr_202.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,9 @@\n+function enter(pi) {\n+    if (pi.getMap().getReactorByName(\"jnr32_out\").getState() == 1) {\n+\tpi.warp(926110200, 2);\n+        return(true);\n+    } else {\n+\tpi.playerMessage(5, \"The door is not opened yet.\");\n+        return(false);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "c747666774e2f57970662030e4dd18734583a293", "filename": "scripts/portal/jnr_exit.js", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/jnr_exit.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/jnr_exit.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/jnr_exit.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,4 @@\n+function enter(pi) {\n+    pi.warp(261000021, 0);\n+    return(true);\n+}\n\\ No newline at end of file"}, {"sha": "417bae34c24d8ab0f8b7caee3de35400a4f1d3c6", "filename": "scripts/portal/magatia_dark0.js", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/magatia_dark0.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/magatia_dark0.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/magatia_dark0.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,30 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+function enter(pi) {\n+    if(pi.isQuestCompleted(7770)) {\n+        pi.warp(926130000, \"out00\");\n+        return true;\n+    } else {\n+        pi.playerMessage(5, \"This pipe seems too dark to venture inside.\");\n+        return false;\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "83ebc23db3e47011070b1bbd97e89f5848c6ec95", "filename": "scripts/portal/rnj12_in.js", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/rnj12_in.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/rnj12_in.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/rnj12_in.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,4 @@\n+function enter(pi) {\n+    pi.warp(926100401, 0); //next\n+    return(true);\n+}\n\\ No newline at end of file"}, {"sha": "263f2393ec27905582246931715a9ba9aaab93f6", "filename": "scripts/portal/rnj1_out.js", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/rnj1_out.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/rnj1_out.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/rnj1_out.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,9 @@\n+function enter(pi) {\n+    if (pi.getEventInstance().getIntProperty(\"statusStg2\") == 1) {\n+\tpi.warp(926100100, 0); //next\n+        return(true);\n+    } else {\n+\tpi.playerMessage(5, \"The portal is not opened yet.\");\n+        return(false);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "479377ee57ba7373061419f39f4bbc792d0c1ff8", "filename": "scripts/portal/rnj1_pt00.js", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/rnj1_pt00.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/rnj1_pt00.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/rnj1_pt00.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,9 @@\n+function enter(pi) {\n+    if (pi.getEventInstance().getIntProperty(\"statusStg1\") == 1) {\n+\tpi.warp(926100001, 0); //next\n+        return(true);\n+    } else {\n+\tpi.playerMessage(5, \"The portal is not opened yet.\");\n+        return(false);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "8b9e5719c20638de3ce8fc406256fec4f9dbffd0", "filename": "scripts/portal/rnj2_out.js", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/rnj2_out.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/rnj2_out.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/rnj2_out.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,9 @@\n+function enter(pi) {\n+    if (pi.getEventInstance().getIntProperty(\"statusStg3\") == 3) {\n+\tpi.warp(926100200, 0); //next\n+        return(true);\n+    } else {\n+\tpi.playerMessage(5, \"The portal is not opened yet.\");\n+        return(false);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "d50833005b3881e5a1ab715b6922b675bd89c1a2", "filename": "scripts/portal/rnj3_in0.js", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/rnj3_in0.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/rnj3_in0.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/rnj3_in0.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,9 @@\n+function enter(pi) {\n+    if (pi.getMap().getReactorByName(\"rnj3_out1\").getState() == 1) {\n+\tpi.warp(926100201, 0);\n+        return(true);\n+    } else {\n+\tpi.playerMessage(5, \"The door is not opened yet.\");\n+        return(false);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "e1ab91efd3b12f6e8d78fdd920362edc8fdaab22", "filename": "scripts/portal/rnj3_in1.js", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/rnj3_in1.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/rnj3_in1.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/rnj3_in1.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,9 @@\n+function enter(pi) {\n+    if (pi.getMap().getReactorByName(\"rnj3_out2\").getState() == 1) {\n+\tpi.warp(926100202, 0);\n+        return(true);\n+    } else {\n+\tpi.playerMessage(5, \"The door is not opened yet.\");\n+        return(false);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "a8ece2a34de5155a1b234f0aae083cce20f4c9c2", "filename": "scripts/portal/rnj3_out.js", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/rnj3_out.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/rnj3_out.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/rnj3_out.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,9 @@\n+function enter(pi) {\n+    if (pi.getMap().getReactorByName(\"rnj3_out3\").getState() == 1) {\n+\tpi.warp(926100203, 0); //next\n+        return(true);\n+    } else {\n+\tpi.playerMessage(5, \"The door is not opened yet.\");\n+        return(false);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "4da9412cf4da0e40456c3ca939a572ea4bf162af", "filename": "scripts/portal/rnj4_r1.js", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/rnj4_r1.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/rnj4_r1.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/rnj4_r1.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,16 @@\n+function enter(pi) {\n+    var eim = pi.getEventInstance();\n+    var area = eim.getIntProperty(\"statusStg5\");\n+    var reg = 0;\n+    \n+    if((area >> reg) % 2 == 0) {\n+        area |= (1 << reg);\n+        eim.setIntProperty(\"statusStg5\", area);\n+        \n+\tpi.warp(926100301 + reg, 0); //next\n+        return(true);\n+    } else {\n+\tpi.playerMessage(5, \"This room is already being explored.\");\n+        return(false);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "fd926cdfc55db02f8154f41891610276efa53a1a", "filename": "scripts/portal/rnj4_r2.js", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/rnj4_r2.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/rnj4_r2.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/rnj4_r2.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,16 @@\n+function enter(pi) {\n+    var eim = pi.getEventInstance();\n+    var area = eim.getIntProperty(\"statusStg5\");\n+    var reg = 1;\n+    \n+    if((area >> reg) % 2 == 0) {\n+        area |= (1 << reg);\n+        eim.setIntProperty(\"statusStg5\", area);\n+        \n+\tpi.warp(926100301 + reg, 0); //next\n+        return(true);\n+    } else {\n+\tpi.playerMessage(5, \"This room is already being explored.\");\n+        return(false);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "70d274334416c535f8ef661b772b1000935a4e38", "filename": "scripts/portal/rnj4_r3.js", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/rnj4_r3.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/rnj4_r3.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/rnj4_r3.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,16 @@\n+function enter(pi) {\n+    var eim = pi.getEventInstance();\n+    var area = eim.getIntProperty(\"statusStg5\");\n+    var reg = 2;\n+    \n+    if((area >> reg) % 2 == 0) {\n+        area |= (1 << reg);\n+        eim.setIntProperty(\"statusStg5\", area);\n+        \n+\tpi.warp(926100301 + reg, 0); //next\n+        return(true);\n+    } else {\n+\tpi.playerMessage(5, \"This room is already being explored.\");\n+        return(false);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "a0915e97784a7dcd58e6511e7d9a6e0e6134c2e4", "filename": "scripts/portal/rnj4_r4.js", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/rnj4_r4.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/rnj4_r4.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/rnj4_r4.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,16 @@\n+function enter(pi) {\n+    var eim = pi.getEventInstance();\n+    var area = eim.getIntProperty(\"statusStg5\");\n+    var reg = 3;\n+    \n+    if((area >> reg) % 2 == 0) {\n+        area |= (1 << reg);\n+        eim.setIntProperty(\"statusStg5\", area);\n+        \n+\tpi.warp(926100301 + reg, 0); //next\n+        return(true);\n+    } else {\n+\tpi.playerMessage(5, \"This room is already being explored.\");\n+        return(false);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "f29bd7f477b9c8413ae52c370a4dca7d39263baf", "filename": "scripts/portal/rnj5_rp.js", "status": "added", "additions": 65, "deletions": 0, "changes": 65, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/rnj5_rp.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/rnj5_rp.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/rnj5_rp.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,65 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/**\n+ *@author Ronan\n+ *rnj5_rp\n+ */\n+\n+function enter(pi) {\n+    var mapplayer = \"stage6_comb\" + (pi.getMapId() % 10);\n+    var eim = pi.getEventInstance();\n+    \n+    if(eim.getProperty(mapplayer) == null) {\n+        var comb = \"\";\n+\n+        for(var i = 0; i < 10; i++) {\n+            var r = Math.floor((Math.random() * 4));\n+            comb += r.toString();\n+        }\n+        \n+        eim.setProperty(mapplayer, comb);\n+    }\n+\n+    var comb = eim.getProperty(mapplayer);\n+    \n+    var name = pi.getPortal().getName().substring(2, 4);\n+    var portalId = parseInt(name, 10);\n+    \n+    \n+    var pRow = Math.floor(portalId / 10);\n+    var pCol = (portalId % 10);\n+    \n+    if (pCol == parseInt(comb.substring(pRow, pRow + 1), 10)) {    //climb\n+        if(pRow < 9) {\n+            pi.warp(pi.getMapId(), pi.getPortal().getId() + 4);\n+        } else {\n+            if(eim.getIntProperty(\"statusStg6\") == 0) {\n+                eim.setIntProperty(\"statusStg6\", 1);\n+                eim.giveEventPlayersStageReward(6);\n+            }\n+            \n+            pi.warp(pi.getMapId(), 1);\n+        }\n+        \n+    } else {    //fail\n+        pi.warp(pi.getMapId(), 2);\n+    }\n+    \n+    return false;\n+}\n\\ No newline at end of file"}, {"sha": "10b982076e1610acde443b0bb370d4fe42daefa8", "filename": "scripts/portal/rnj6_out.js", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/rnj6_out.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/rnj6_out.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/rnj6_out.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,9 @@\n+function enter(pi) {\n+    if (pi.getMap().getReactorByName(\"rnj6_out\").getState() == 1) {\n+\tpi.warp(926100300);\n+        return(true);\n+    } else {\n+\tpi.playerMessage(5, \"The portal is not opened yet.\");\n+        return(false);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "79829843580bc2d8c7f5ee5b1a9e7e34cce5b71d", "filename": "scripts/portal/rnj_201_0.js", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/rnj_201_0.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/rnj_201_0.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/rnj_201_0.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,9 @@\n+function enter(pi) {\n+    if (pi.getMap().getReactorByName(\"rnj31_out\").getState() == 1) {\n+\tpi.warp(926100200, 1);\n+        return(true);\n+    } else {\n+\tpi.playerMessage(5, \"The door is not opened yet.\");\n+        return(false);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "9cd0e7268f68e8c749e3f190fca9cd40f8ac2d52", "filename": "scripts/portal/rnj_202.js", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/rnj_202.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/rnj_202.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/rnj_202.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,9 @@\n+function enter(pi) {\n+    if (pi.getMap().getReactorByName(\"rnj32_out\").getState() == 1) {\n+\tpi.warp(926100200, 2);\n+        return(true);\n+    } else {\n+\tpi.playerMessage(5, \"The door is not opened yet.\");\n+        return(false);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "867996c9aab466340aec4edb40c940001f8e4b45", "filename": "scripts/portal/rnj_exit.js", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/rnj_exit.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/portal/rnj_exit.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/rnj_exit.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,4 @@\n+function enter(pi) {\n+    pi.warp(261000011, 0);\n+    return(true);\n+}\n\\ No newline at end of file"}, {"sha": "eff38df0b5e257057afbe1d8efb9eecf3f25e5c8", "filename": "scripts/reactor/2001016.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/reactor/2001016.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/reactor/2001016.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2001016.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -24,7 +24,7 @@\n  */\n  \n function act() {\n-    rm.getMap().killAllMonstersNotFriendly();\n+    rm.getMap().killAllMonsters();\n     rm.getMap().allowSummonState(false);\n     rm.spawnMonster(9300039, 260, 490);\n     rm.mapMessage(5, \"As the air on the tower outskirts starts to become more dense, Papa Pixie appears.\");"}, {"sha": "96993bcae60a360b6f568057597724b5f4c03564", "filename": "scripts/reactor/2612000.js", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/reactor/2612000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/reactor/2612000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2612000.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,28 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/*2612000.js - MagatiaPQ Box\n+ *@author Ronan\n+ */\n+ \n+function act() {\n+\trm.dropItems();\n+}\n\\ No newline at end of file"}, {"sha": "ff26a29e6511e22796b42c4904dda0ef9c52069d", "filename": "scripts/reactor/2612001.js", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/reactor/2612001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/reactor/2612001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2612001.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,28 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/*2612001.js - MagatiaPQ Box\n+ *@author Ronan\n+ */\n+ \n+function act() {\n+\trm.dropItems();\n+}\n\\ No newline at end of file"}, {"sha": "fb5c188441839f1d375890a66de3941f8e468156", "filename": "scripts/reactor/2612002.js", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/reactor/2612002.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/reactor/2612002.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2612002.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,28 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/*2612002.js - MagatiaPQ Box\n+ *@author Ronan\n+ */\n+ \n+function act() {\n+\trm.dropItems();\n+}\n\\ No newline at end of file"}, {"sha": "9b55286f5eb3c4e8627cc4e2ac4ab203cbc0a85d", "filename": "scripts/reactor/2612003.js", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/reactor/2612003.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/reactor/2612003.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2612003.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,28 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/*2612003.js - MagatiaPQ Box\n+ *@author Ronan\n+ */\n+ \n+function act() {\n+\trm.dropItems();\n+}\n\\ No newline at end of file"}, {"sha": "3abc42141d5029e40011213f078e132060d8bdc0", "filename": "scripts/reactor/2612004.js", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/reactor/2612004.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/reactor/2612004.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2612004.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,28 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/*2612004.js - MagatiaPQ Box\n+ *@author Ronan\n+ */\n+ \n+function act() {\n+\trm.dropItems();\n+}\n\\ No newline at end of file"}, {"sha": "195228dcfe8f8cf79a731e6d00057ddf3471d727", "filename": "scripts/reactor/2618000.js", "status": "added", "additions": 42, "deletions": 0, "changes": 42, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/reactor/2618000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/reactor/2618000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2618000.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,42 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/*2618000.js - MagatiaPQ Beaker\n+ *@author Ronan\n+ */\n+ \n+function hit() {\n+\tif(rm.getReactor().getState() == 6) {\n+                var eim = rm.getEventInstance();\n+\n+                var done = eim.getIntProperty(\"statusStg3\") + 1;\n+                eim.setIntProperty(\"statusStg3\", done);\n+                \n+                if(done == 3) {\n+                        eim.showClearEffect();\n+                        eim.giveEventPlayersStageReward(3);\n+                        rm.getMap().killAllMonsters();\n+                        \n+                        var reactname = (eim.getIntProperty(\"isAlcadno\") == 0) ? \"rnj2_door\" : \"jnr2_door\";\n+                        rm.getMap().getReactorByName(reactname).hitReactor(rm.getClient());\n+                }\n+        }\n+}\n\\ No newline at end of file"}, {"sha": "dee592be34b081d143a8830e1f8053094b48e5ef", "filename": "scripts/reactor/2618001.js", "status": "added", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/reactor/2618001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/reactor/2618001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2618001.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,34 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/*2618000.js - MagatiaPQ Beaker\n+ *@author Ronan\n+ */\n+ \n+function hit() {\n+\tvar eim = rm.getEventInstance();\n+        \n+        var isAlcadno = eim.getIntProperty(\"isAlcadno\");\n+        var reactname = (isAlcadno == 0) ? \"rnj32_out\" : \"jnr32_out\";\n+        var reactmap = (isAlcadno == 0) ? 926100202 : 926110202;\n+        \n+        eim.getMapInstance(reactmap).getReactorByName(reactname).hitReactor(rm.getClient());\n+}\n\\ No newline at end of file"}, {"sha": "7aac2f5fc3b75fdac5941978a0b244e73fd1ab32", "filename": "scripts/reactor/2618002.js", "status": "added", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/reactor/2618002.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/scripts/reactor/2618002.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2618002.js?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -0,0 +1,34 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/*2618000.js - MagatiaPQ Beaker\n+ *@author Ronan\n+ */\n+ \n+function hit() {\n+        var eim = rm.getEventInstance();\n+        \n+        var isAlcadno = eim.getIntProperty(\"isAlcadno\");\n+        var reactname = (isAlcadno == 0) ? \"rnj31_out\" : \"jnr31_out\";\n+        var reactmap = (isAlcadno == 0) ? 926100201 : 926110201;\n+        \n+\teim.getMapInstance(reactmap).getReactorByName(reactname).hitReactor(rm.getClient());\n+}\n\\ No newline at end of file"}, {"sha": "1c49aee28e8bd2cc3962521a528ce4186f127c8b", "filename": "sql/db_drops.sql", "status": "modified", "additions": 103, "deletions": 4, "changes": 107, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/sql/db_drops.sql", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/sql/db_drops.sql", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/sql/db_drops.sql?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -19338,13 +19338,14 @@ USE `maplesolaxia`;\n   DELETE FROM drop_data WHERE dropperid >= 9300081 AND dropperid <= 9300083;\n \n   # remove items being dropped from summoned mobs in PQs\n-\n   DELETE FROM drop_data WHERE dropperid >= 9300015 AND dropperid <= 9300017;\n   DELETE FROM drop_data WHERE dropperid >= 9300054 AND dropperid <= 9300056;\n   DELETE FROM drop_data WHERE dropperid >= 9300143 AND dropperid <= 9300144;\n   DELETE FROM drop_data WHERE dropperid >= 8810019 AND dropperid <= 8810023;\n   DELETE FROM drop_data WHERE dropperid = 9500100;\n \n+  DELETE FROM drop_data where dropperid >= 9300141 AND dropperid <= 9300154 AND (itemid < 4001130 OR itemid >= 4001136);\n+\n   # remove key of dimension dropping outside PQ\n   DELETE FROM drop_data WHERE itemid=4001023 AND dropperid!=9300012;\n \n@@ -19863,7 +19864,11 @@ USE `maplesolaxia`;\n (9300270, 2022431, 1, 1, 0, 200000),\n (9300270, 2022432, 1, 1, 0, 200000),\n (9300270, 2022433, 1, 1, 0, 200000),\n-(6090002, 4000414, 1, 1, 0, 400000);\n+(6090002, 4000414, 1, 1, 0, 400000),\n+\n+(9300147, 4001132, 1, 1, 0, 400000),\n+(9300148, 4001133, 1, 1, 0, 100000);\n+\n \n   # update quest reactor items\n   UPDATE reactordrops SET questid=2086 WHERE itemid=4031165;\n@@ -20041,7 +20046,62 @@ USE `maplesolaxia`;\n     (6102002, 2022277, 5, -1),\n     (6102003, 2022277, 5, -1),\n     (6102004, 2022277, 5, -1),\n-    (6102005, 2022277, 5, -1);\n+    (6102005, 2022277, 5, -1),\n+    (2612000, 2020000, 2, -1),\n+    (2612000, 2020001, 2, -1),\n+    (2612000, 2020002, 2, -1),\n+    (2612000, 2020003, 2, -1),\n+    (2612000, 2020004, 2, -1),\n+    (2612000, 2020005, 2, -1),\n+    (2612000, 2020006, 2, -1),\n+    (2612000, 2020007, 3, -1),\n+    (2612000, 2020008, 3, -1),\n+    (2612000, 2020009, 3, -1),\n+    (2612000, 2020010, 3, -1),\n+    (2612001, 2020000, 2, -1),\n+    (2612001, 2020001, 2, -1),\n+    (2612001, 2020002, 2, -1),\n+    (2612001, 2020003, 2, -1),\n+    (2612001, 2020004, 2, -1),\n+    (2612001, 2020005, 2, -1),\n+    (2612001, 2020006, 2, -1),\n+    (2612001, 2020007, 3, -1),\n+    (2612001, 2020008, 3, -1),\n+    (2612001, 2020009, 3, -1),\n+    (2612001, 2020010, 3, -1),\n+    (2612002, 2020000, 2, -1),\n+    (2612002, 2020001, 2, -1),\n+    (2612002, 2020002, 2, -1),\n+    (2612002, 2020003, 2, -1),\n+    (2612002, 2020004, 2, -1),\n+    (2612002, 2020005, 2, -1),\n+    (2612002, 2020006, 2, -1),\n+    (2612002, 2020007, 3, -1),\n+    (2612002, 2020008, 3, -1),\n+    (2612002, 2020009, 3, -1),\n+    (2612002, 2020010, 3, -1),\n+    (2612003, 2020000, 2, -1),\n+    (2612003, 2020001, 2, -1),\n+    (2612003, 2020002, 2, -1),\n+    (2612003, 2020003, 2, -1),\n+    (2612003, 2020004, 2, -1),\n+    (2612003, 2020005, 2, -1),\n+    (2612003, 2020006, 2, -1),\n+    (2612003, 2020007, 3, -1),\n+    (2612003, 2020008, 3, -1),\n+    (2612003, 2020009, 3, -1),\n+    (2612003, 2020010, 3, -1),\n+    (2612004, 2020000, 2, -1),\n+    (2612004, 2020001, 2, -1),\n+    (2612004, 2020002, 2, -1),\n+    (2612004, 2020003, 2, -1),\n+    (2612004, 2020004, 2, -1),\n+    (2612004, 2020005, 2, -1),\n+    (2612004, 2020006, 2, -1),\n+    (2612004, 2020007, 3, -1),\n+    (2612004, 2020008, 3, -1),\n+    (2612004, 2020009, 3, -1),\n+    (2612004, 2020010, 3, -1);\n \n   # updates info for all cards on monster book\n   DROP TABLE `monstercarddata`;\n@@ -20098,4 +20158,43 @@ USE `maplesolaxia`;\n   DELETE FROM `drop_data` WHERE itemid=4000434;\n   DELETE FROM `drop_data` WHERE itemid=4000435;\n   DELETE FROM `drop_data` WHERE itemid=4032192;\n-  DELETE FROM `drop_data` WHERE itemid=8143000;\n\\ No newline at end of file\n+  DELETE FROM `drop_data` WHERE itemid=8143000;\n+\n+  # delete all unused content on reactor drop data\n+  DELETE FROM `reactordrops` WHERE itemid=1102260;\n+  DELETE FROM `reactordrops` WHERE itemid=1342019;\n+  DELETE FROM `reactordrops` WHERE itemid=1342020;\n+  DELETE FROM `reactordrops` WHERE itemid=1532022;\n+  DELETE FROM `reactordrops` WHERE itemid=1532023;\n+  DELETE FROM `reactordrops` WHERE itemid=2022712;\n+  DELETE FROM `reactordrops` WHERE itemid=3010126;\n+  DELETE FROM `reactordrops` WHERE itemid=3012000;\n+  DELETE FROM `reactordrops` WHERE itemid=4010008;\n+  DELETE FROM `reactordrops` WHERE itemid=4010010;\n+  DELETE FROM `reactordrops` WHERE itemid=4022000;\n+  DELETE FROM `reactordrops` WHERE itemid=4022001;\n+  DELETE FROM `reactordrops` WHERE itemid=4022002;\n+  DELETE FROM `reactordrops` WHERE itemid=4022003;\n+  DELETE FROM `reactordrops` WHERE itemid=4022004;\n+  DELETE FROM `reactordrops` WHERE itemid=4022005;\n+  DELETE FROM `reactordrops` WHERE itemid=4022006;\n+  DELETE FROM `reactordrops` WHERE itemid=4022007;\n+  DELETE FROM `reactordrops` WHERE itemid=4022008;\n+  DELETE FROM `reactordrops` WHERE itemid=4022009;\n+  DELETE FROM `reactordrops` WHERE itemid=4022010;\n+  DELETE FROM `reactordrops` WHERE itemid=4022011;\n+  DELETE FROM `reactordrops` WHERE itemid=4022012;\n+  DELETE FROM `reactordrops` WHERE itemid=4022013;\n+  DELETE FROM `reactordrops` WHERE itemid=4022014;\n+  DELETE FROM `reactordrops` WHERE itemid=4022015;\n+  DELETE FROM `reactordrops` WHERE itemid=4022016;\n+  DELETE FROM `reactordrops` WHERE itemid=4022017;\n+  DELETE FROM `reactordrops` WHERE itemid=4022018;\n+  DELETE FROM `reactordrops` WHERE itemid=4022019;\n+  DELETE FROM `reactordrops` WHERE itemid=4022020;\n+  DELETE FROM `reactordrops` WHERE itemid=4022021;\n+  DELETE FROM `reactordrops` WHERE itemid=4022022;\n+  DELETE FROM `reactordrops` WHERE itemid=4022023;\n+  DELETE FROM `reactordrops` WHERE itemid=4032362;\n+  DELETE FROM `reactordrops` WHERE itemid=4032363;\n+  DELETE FROM `reactordrops` WHERE itemid=4032980;\n\\ No newline at end of file"}, {"sha": "899a844d44630eb50c963c931442228c9d59cb03", "filename": "src/client/MapleCharacter.java", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/client/MapleCharacter.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/client/MapleCharacter.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/MapleCharacter.java?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -1227,7 +1227,7 @@ public void changeMapBanish(int mapid, String portal, String msg) {\n         long banTime = System.currentTimeMillis();\n         \n         dropMessage(5, msg);\n-        MapleMap map_ = client.getChannelServer().getMapFactory().getMap(mapid);\n+        MapleMap map_ = getWarpMap(mapid);\n         changeMap(map_, map_.getPortal(portal));\n         \n         setBanishPlayerData(banMap, banSp, banTime);"}, {"sha": "63da3ac9a886a070e8449f099ae573ba1f1bcf69", "filename": "src/client/command/Commands.java", "status": "modified", "additions": 59, "deletions": 59, "changes": 118, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/client/command/Commands.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/client/command/Commands.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/command/Commands.java?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -108,9 +108,9 @@\n         private static HashMap<String, Integer> gotomaps = new HashMap<String, Integer>();\n \n \tprivate static String[] tips = {\n-\t\t\"Please only use /gm in emergencies or to report somebody.\",\n+\t\t\"Please only use @gm in emergencies or to report somebody.\",\n \t\t\"To report a bug or make a suggestion, use the forum.\",\n-\t\t\"Please do not use /gm to ask if a GM is online.\",\n+\t\t\"Please do not use @gm to ask if a GM is online.\",\n \t\t\"Do not ask if you can receive help, just state your issue.\",\n \t\t\"Do not say 'I have a bug to report', just state it.\",\n \t};\n@@ -387,7 +387,7 @@ public static boolean executeSolaxiaCommandLv0(Channel cserv, Server srv, MapleC\n \t\t\t\t}\n \t\t\t}\n \t\t\tif (gacha == null){\n-\t\t\t\tplayer.yellowMessage(\"Please use /gacha <name> where name corresponds to one of the below:\");\n+\t\t\t\tplayer.yellowMessage(\"Please use @gacha <name> where name corresponds to one of the below:\");\n \t\t\t\tfor (String name : names){\n \t\t\t\t\tplayer.yellowMessage(name);\n \t\t\t\t}\n@@ -405,7 +405,7 @@ public static boolean executeSolaxiaCommandLv0(Channel cserv, Server srv, MapleC\n                     \n \t\tcase \"whatdropsfrom\":\n \t\t\tif (sub.length < 2) {\n-\t\t\t\tplayer.dropMessage(5, \"Please do /whatdropsfrom <monster name>\");\n+\t\t\t\tplayer.dropMessage(5, \"Please do @whatdropsfrom <monster name>\");\n                         break;\n \t\t\t}\n \t\t\tString monsterName = joinStringFrom(sub, 1);\n@@ -439,7 +439,7 @@ public static boolean executeSolaxiaCommandLv0(Channel cserv, Server srv, MapleC\n                     \n \t\tcase \"whodrops\":\n \t\t\tif (sub.length < 2) {\n-\t\t\t\tplayer.dropMessage(5, \"Please do /whodrops <item name>\");\n+\t\t\t\tplayer.dropMessage(5, \"Please do @whodrops <item name>\");\n                         break;\n \t\t\t}\n \t\t\tString searchString = joinStringFrom(sub, 1);\n@@ -551,7 +551,7 @@ public static boolean executeSolaxiaCommandLv0(Channel cserv, Server srv, MapleC\n \t\tcase \"bug\":\n                     \n \t\t\tif (sub.length < 2) {\n-\t\t\t\tplayer.dropMessage(5, \"Message too short and not sent. Please do /bug <bug>\");\n+\t\t\t\tplayer.dropMessage(5, \"Message too short and not sent. Please do @bug <bug>\");\n \t\t\t\tbreak;\n \t\t\t}\n \t\t\tmessage = joinStringFrom(sub, 1);\n@@ -691,7 +691,7 @@ public static boolean executeSolaxiaCommandLv1(Channel cserv, Server srv, MapleC\n                         \n                 case \"goto\":\n                         if (sub.length < 2){\n-\t\t\t\tplayer.yellowMessage(\"Syntax: /goto <map name>\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: @goto <map name>\");\n \t\t\t\tbreak;\n \t\t\t}\n                     \n@@ -738,7 +738,7 @@ public static boolean executeSolaxiaCommandLv1(Channel cserv, Server srv, MapleC\n \t\t\tfor (MapleMapObject npcs : player.getMap().getMapObjects()) {\n \t\t\t\tif (npcs instanceof MapleNPC) {\n \t\t\t\t\tMapleNPC npc = (MapleNPC) npcs;\n-\t\t\t\t\tplayer.dropMessage(5, \">> \" + npc.getName() + \" - \" + npc.getId());\n+\t\t\t\t\tplayer.dropMessage(5, \">> \" + npc.getName() + \" - \" + npc.getId() + \" - Oid: \" + npc.getObjectId());\n \t\t\t\t}\n \t\t\t}\n \t\t\tplayer.yellowMessage(\"Monsters on this map:\");\n@@ -775,7 +775,7 @@ public static boolean executeSolaxiaCommandLv2(Channel cserv, Server srv, MapleC\n                         \n                 case \"sp\":\n                         if (sub.length < 2){\n-\t\t\t\tplayer.yellowMessage(\"Syntax: /sp [<playername>] <newsp>\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: !sp [<playername>] <newsp>\");\n \t\t\t\tbreak;\n \t\t\t}\n                         \n@@ -791,7 +791,7 @@ public static boolean executeSolaxiaCommandLv2(Channel cserv, Server srv, MapleC\n                     \n                 case \"ap\":\n                         if (sub.length < 2){\n-\t\t\t\tplayer.yellowMessage(\"Syntax: /ap [<playername>] <newap>\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: !ap [<playername>] <newap>\");\n \t\t\t\tbreak;\n \t\t\t}\n                     \n@@ -822,7 +822,7 @@ public static boolean executeSolaxiaCommandLv2(Channel cserv, Server srv, MapleC\n                     \n                 case \"buff\":\n                         if (sub.length < 2){\n-                                player.yellowMessage(\"Syntax: /buff <buffid>\");\n+                                player.yellowMessage(\"Syntax: !buff <buffid>\");\n                                 break;\n \t\t\t}\n                         int skillid=Integer.parseInt(sub[1]);\n@@ -835,15 +835,15 @@ public static boolean executeSolaxiaCommandLv2(Channel cserv, Server srv, MapleC\n \t\t\tif (sub.length > 1){\n \t\t\t\tvictim = c.getWorldServer().getPlayerStorage().getCharacterByName(sub[1]);\n \t\t\t\tvictim.getMap().spawnMonsterOnGroundBelow(MapleLifeFactory.getMonster(9300166), victim.getPosition());\n-\t\t\t\tServer.getInstance().broadcastGMMessage(MaplePacketCreator.serverNotice(5, player.getName() + \" used /bomb on \" + victim.getName()));\n+\t\t\t\tServer.getInstance().broadcastGMMessage(MaplePacketCreator.serverNotice(5, player.getName() + \" used !bomb on \" + victim.getName()));\n \t\t\t} else {\n \t\t\t\tplayer.getMap().spawnMonsterOnGroundBelow(MapleLifeFactory.getMonster(9300166), player.getPosition());\n \t\t\t}\n                     break;\n                     \n                 case \"dc\":\n                         if (sub.length < 2){\n-\t\t\t\tplayer.yellowMessage(\"Syntax: /dc <playername>\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: !dc <playername>\");\n \t\t\t\tbreak;\n \t\t\t}\n                     \n@@ -876,7 +876,7 @@ public static boolean executeSolaxiaCommandLv2(Channel cserv, Server srv, MapleC\n                     \n                 case \"clearslot\":\n                         if (sub.length < 2) {\n-                                player.yellowMessage(\"Syntax: /clearslot <all, equip, use, setup, etc or cash.>\");\n+                                player.yellowMessage(\"Syntax: !clearslot <all, equip, use, setup, etc or cash.>\");\n                                 break;\n                         }\n                         String type = sub[1];\n@@ -963,7 +963,7 @@ else if (type.equals(\"cash\")) {\n                     \n                 case \"warp\":\n                         if (sub.length < 2){\n-\t\t\t\tplayer.yellowMessage(\"Syntax: /warp <mapid>\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: !warp <mapid>\");\n \t\t\t\tbreak;\n \t\t\t}\n                     \n@@ -985,7 +985,7 @@ else if (type.equals(\"cash\")) {\n                     \n                 case \"warpto\":\n                         if (sub.length < 3){\n-\t\t\t\tplayer.yellowMessage(\"Syntax: /warpto <playername> <mapid>\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: !warpto <playername> <mapid>\");\n \t\t\t\tbreak;\n \t\t\t}\n                     \n@@ -1026,7 +1026,7 @@ else if (type.equals(\"cash\")) {\n                 case \"warphere\":\n                 case \"summon\":\n                         if (sub.length < 2){\n-\t\t\t\tplayer.yellowMessage(\"Syntax: /warphere <playername>\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: !warphere <playername>\");\n \t\t\t\tbreak;\n \t\t\t}\n                     \n@@ -1081,7 +1081,7 @@ else if (type.equals(\"cash\")) {\n                 case \"item\":\n                 case \"drop\":\n                         if (sub.length < 2){\n-\t\t\t\tplayer.yellowMessage(\"Syntax: /item <itemid> <quantity>\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: !item <itemid> <quantity>\");\n \t\t\t\tbreak;\n \t\t\t}\n                         \n@@ -1109,7 +1109,7 @@ else if (type.equals(\"cash\")) {\n                     \n                 case \"level\":\n                         if (sub.length < 2){\n-\t\t\t\tplayer.yellowMessage(\"Syntax: /level <newlevel>\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: !level <newlevel>\");\n \t\t\t\tbreak;\n \t\t\t}\n                     \n@@ -1124,7 +1124,7 @@ else if (type.equals(\"cash\")) {\n                     \n \t\tcase \"levelpro\":\n                         if (sub.length < 2){\n-\t\t\t\tplayer.yellowMessage(\"Syntax: /levelpro <newlevel>\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: !levelpro <newlevel>\");\n \t\t\t\tbreak;\n \t\t\t}\n                     \n@@ -1146,7 +1146,7 @@ else if (type.equals(\"cash\")) {\n                     break;\n                     \n                 case \"maxstat\":\n-\t\t\tfinal String[] s = {\"setall\", String.valueOf(Short.MAX_VALUE)};\n+\t\t\tfinal String[] s = {\"setstat\", String.valueOf(Short.MAX_VALUE)};\n \t\t\texecuteSolaxiaCommandLv2(cserv, srv, c, s);\n                         player.loseExp(player.getExp(), false, false);\n                         player.revertPlayerRates();\n@@ -1187,7 +1187,7 @@ else if (type.equals(\"cash\")) {\n                     \n                 case \"search\":\n                         if (sub.length < 3){\n-\t\t\t\tplayer.yellowMessage(\"Syntax: /search <type> <name>\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: !search <type> <name>\");\n \t\t\t\tbreak;\n \t\t\t}\n                     \n@@ -1205,9 +1205,9 @@ else if (type.equals(\"cash\")) {\n                                 } else if (sub[1].equalsIgnoreCase(\"SKILL\")) {\n                                         data = dataProvider.getData(\"Skill.img\");\n                                 } else if (sub[1].equalsIgnoreCase(\"MAP\")) {\n-                                        sb.append(\"#bUse the '/m' command to find a map. If it finds a map with the same name, it will warp you to it.\");\n+                                        sb.append(\"#bUse the '!m' command to find a map. If it finds a map with the same name, it will warp you to it.\");\n                                 } else {\n-                                        sb.append(\"#bInvalid search.\\r\\nSyntax: '/search [type] [name]', where [type] is NPC, ITEM, MOB, or SKILL.\");\n+                                        sb.append(\"#bInvalid search.\\r\\nSyntax: '!search [type] [name]', where [type] is NPC, ITEM, MOB, or SKILL.\");\n                                 }\n                                 if (data != null) {\n                                         String name;\n@@ -1241,15 +1241,15 @@ else if (type.equals(\"cash\")) {\n                     \n                 case \"jail\":\n                         if (sub.length < 2) {\n-\t\t\t\tplayer.yellowMessage(\"Syntax: /jail <playername> [<minutes>]\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: !jail <playername> [<minutes>]\");\n \t\t\t\tbreak;\n \t\t\t}\n                         \n                         int minutesJailed = 5;\n                         if(sub.length >= 3) {\n                                 minutesJailed = Integer.valueOf(sub[2]);\n                                 if(minutesJailed <= 0) {\n-                                        player.yellowMessage(\"Syntax: /jail <playername> [<minutes>]\");\n+                                        player.yellowMessage(\"Syntax: !jail <playername> [<minutes>]\");\n                                         break;\n                                 }\n                         }\n@@ -1277,7 +1277,7 @@ else if (type.equals(\"cash\")) {\n                     \n                 case \"unjail\":\n                         if (sub.length < 2) {\n-\t\t\t\tplayer.yellowMessage(\"Syntax: /unjail <playername>\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: !unjail <playername>\");\n \t\t\t\tbreak;\n \t\t\t}\n                         \n@@ -1313,7 +1313,7 @@ public static boolean executeSolaxiaCommandLv3(Channel cserv, Server srv, MapleC\n                 switch(sub[0]) {    \n \t\tcase \"spawn\":\n                         if (sub.length < 2) {\n-\t\t\t\tplayer.yellowMessage(\"Syntax: /spawn <mobid>\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: !spawn <mobid>\");\n \t\t\t\tbreak;\n \t\t\t}\n                     \n@@ -1400,7 +1400,7 @@ public static boolean executeSolaxiaCommandLv3(Channel cserv, Server srv, MapleC\n                         } else if(sub.length == 2) {\n                                 statUpdate = Integer.valueOf(sub[1]);\n                         } else {\n-\t\t\t\tplayer.yellowMessage(\"Syntax: /sethpmp [<playername>] <value>\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: !sethpmp [<playername>] <value>\");\n                         }\n                     \n                         victim.setHp(statUpdate);\n@@ -1411,7 +1411,7 @@ public static boolean executeSolaxiaCommandLv3(Channel cserv, Server srv, MapleC\n                    \n \t\tcase \"music\":\n \t\t\tif (sub.length < 2) {\n-\t\t\t\tplayer.yellowMessage(\"Syntax: /music <song>\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: !music <song>\");\n \t\t\t\tfor (String s : songs){\n \t\t\t\t\tplayer.yellowMessage(s);\n \t\t\t\t}\n@@ -1433,7 +1433,7 @@ public static boolean executeSolaxiaCommandLv3(Channel cserv, Server srv, MapleC\n                     \n \t\tcase \"monitor\":\n \t\t\tif (sub.length < 1){\n-\t\t\t\tplayer.yellowMessage(\"Syntax: /monitor <ign>\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: !monitor <ign>\");\n \t\t\t\tbreak;\n \t\t\t}\n \t\t\tvictim = c.getWorldServer().getPlayerStorage().getCharacterByName(sub[1]);\n@@ -1460,7 +1460,7 @@ public static boolean executeSolaxiaCommandLv3(Channel cserv, Server srv, MapleC\n                     \n \t\tcase \"ignore\":\n \t\t\tif (sub.length < 1){\n-\t\t\t\tplayer.yellowMessage(\"Syntax: /ignore <ign>\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: !ignore <ign>\");\n \t\t\t\tbreak;\n \t\t\t}\n \t\t\tvictim = c.getWorldServer().getPlayerStorage().getCharacterByName(sub[1]);\n@@ -1495,7 +1495,7 @@ public static boolean executeSolaxiaCommandLv3(Channel cserv, Server srv, MapleC\n         \n                 case \"togglecoupon\":\n                         if (sub.length < 2){\n-\t\t\t\tplayer.yellowMessage(\"Syntax: /togglecoupon <itemid>\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: !togglecoupon <itemid>\");\n \t\t\t\tbreak;\n \t\t\t}\n                         Server.getInstance().toggleCoupon(Integer.parseInt(sub[1]));\n@@ -1508,7 +1508,7 @@ public static boolean executeSolaxiaCommandLv3(Channel cserv, Server srv, MapleC\n              \n \t\tcase \"fame\":\n                         if (sub.length < 3){\n-\t\t\t\tplayer.yellowMessage(\"Syntax: /fame <playername> <gainfame>\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: !fame <playername> <gainfame>\");\n \t\t\t\tbreak;\n \t\t\t}\n                         \n@@ -1519,7 +1519,7 @@ public static boolean executeSolaxiaCommandLv3(Channel cserv, Server srv, MapleC\n                     \n \t\tcase \"giftnx\":\n                         if (sub.length < 3){\n-\t\t\t\tplayer.yellowMessage(\"Syntax: /giftnx <playername> <gainnx>\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: !giftnx <playername> <gainnx>\");\n \t\t\t\tbreak;\n \t\t\t}\n \t\t\tcserv.getPlayerStorage().getCharacterByName(sub[1]).getCashShop().gainCash(1, Integer.parseInt(sub[2]));\n@@ -1528,15 +1528,15 @@ public static boolean executeSolaxiaCommandLv3(Channel cserv, Server srv, MapleC\n       \n \t\tcase \"vp\":\n                         if (sub.length < 2){\n-\t\t\t\tplayer.yellowMessage(\"Syntax: /vp <gainvotepoint>\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: !vp <gainvotepoint>\");\n \t\t\t\tbreak;\n \t\t\t}\n \t\t\tc.addVotePoints(Integer.parseInt(sub[1]));\n                     break;\n                     \n \t\tcase \"id\":\n                         if (sub.length < 2){\n-\t\t\t\tplayer.yellowMessage(\"Syntax: /id <id>\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: !id <id>\");\n \t\t\t\tbreak;\n \t\t\t}\n \t\t\ttry {\n@@ -1580,13 +1580,13 @@ public static boolean executeSolaxiaCommandLv3(Channel cserv, Server srv, MapleC\n                     \n \t\tcase \"kill\":\n                         if (sub.length < 2){\n-\t\t\t\tplayer.yellowMessage(\"Syntax: /kill <playername>\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: !kill <playername>\");\n \t\t\t\tbreak;\n \t\t\t}\n \t\t\t\n                         victim = cserv.getPlayerStorage().getCharacterByName(sub[1]);\n                         victim.setHpMp(0);\n-                        Server.getInstance().broadcastGMMessage(MaplePacketCreator.serverNotice(5, player.getName() + \" used /kill on \" + victim.getName()));\n+                        Server.getInstance().broadcastGMMessage(MaplePacketCreator.serverNotice(5, player.getName() + \" used !kill on \" + victim.getName()));\n                     break;\n                     \n \t\tcase \"seed\":\n@@ -1630,15 +1630,15 @@ public static boolean executeSolaxiaCommandLv3(Channel cserv, Server srv, MapleC\n                     \n \t\tcase \"openportal\":\n                         if (sub.length < 2){\n-                            player.yellowMessage(\"Syntax: /openportal <portalid>\");\n+                            player.yellowMessage(\"Syntax: !openportal <portalid>\");\n                             break;\n \t\t\t}\n \t\t\tplayer.getMap().getPortal(sub[1]).setPortalState(true);\n                     break;\n                     \n                 case \"closeportals\":\n                         if (sub.length < 2){\n-                            player.yellowMessage(\"Syntax: /closeportal <portalid>\");\n+                            player.yellowMessage(\"Syntax: !closeportal <portalid>\");\n                             break;\n \t\t\t}\n \t\t\tplayer.getMap().getPortal(sub[1]).setPortalState(false);\n@@ -1712,7 +1712,7 @@ public static boolean executeSolaxiaCommandLv3(Channel cserv, Server srv, MapleC\n                     \n \t\tcase \"ban\":\n \t\t\tif (sub.length < 3) {\n-\t\t\t\tplayer.yellowMessage(\"Syntax: /ban <IGN> <Reason> (Please be descriptive)\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: !ban <IGN> <Reason> (Please be descriptive)\");\n \t\t\t\tbreak;\n \t\t\t}\n \t\t\tString ign = sub[1];\n@@ -1762,7 +1762,7 @@ public void run() {\n                     \n                 case \"unban\":\n                         if (sub.length < 2){\n-\t\t\t\tplayer.yellowMessage(\"Syntax: /unban <playername>\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: !unban <playername>\");\n \t\t\t\tbreak;\n \t\t\t}\n                     \n@@ -1842,7 +1842,7 @@ public static boolean executeSolaxiaCommandLv4(Channel cserv, Server srv, MapleC\n                     \n                     case \"proitem\":\n                         if (sub.length < 3) {\n-                                player.yellowMessage(\"Syntax: /proitem <itemid> <statvalue>\");\n+                                player.yellowMessage(\"Syntax: !proitem <itemid> <statvalue>\");\n                                 break;\n                         }\n                         \n@@ -1866,7 +1866,7 @@ public static boolean executeSolaxiaCommandLv4(Channel cserv, Server srv, MapleC\n                     \n                     case \"seteqstat\":\n                         if (sub.length < 2) {\n-                                player.yellowMessage(\"Syntax: /seteqstat <statvalue>\");\n+                                player.yellowMessage(\"Syntax: !seteqstat <statvalue>\");\n                                 break;\n                         }\n                         \n@@ -1907,30 +1907,30 @@ public static boolean executeSolaxiaCommandLv4(Channel cserv, Server srv, MapleC\n                     \n                     case \"exprate\":\n                             if (sub.length < 2){\n-\t\t\t\tplayer.yellowMessage(\"Syntax: /exprate <newrate>\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: !exprate <newrate>\");\n \t\t\t\tbreak;\n                         }\n                             c.getWorldServer().setExpRate(Integer.parseInt(sub[1]));\n                                 break;\n                     case \"mesorate\":\n                             if (sub.length < 2){\n-                                player.yellowMessage(\"Syntax: /mesorate <newrate>\");\n+                                player.yellowMessage(\"Syntax: !mesorate <newrate>\");\n                                 break;\n                         }\n                             c.getWorldServer().setMesoRate(Integer.parseInt(sub[1]));\n                         break;\n                     \n                     case \"droprate\":\n                             if (sub.length < 2){\n-                                player.yellowMessage(\"Syntax: /droprate <newrate>\");\n+                                player.yellowMessage(\"Syntax: !droprate <newrate>\");\n                                 break;\n                         }\t\t\n                             c.getWorldServer().setDropRate(Integer.parseInt(sub[1]));\n                         break;\n                     \n                     case \"bossdroprate\":\n                             if (sub.length < 2){\n-                                player.yellowMessage(\"Syntax: /bossdroprate <newrate>\");\n+                                player.yellowMessage(\"Syntax: !bossdroprate <newrate>\");\n                                 break;\n                         }\n                             c.getWorldServer().setBossDropRate(Integer.parseInt(sub[1]));\n@@ -1994,15 +1994,15 @@ public static boolean executeSolaxiaCommandLv4(Channel cserv, Server srv, MapleC\n                             \n                     case \"playernpc\":\n                             if (sub.length < 3){\n-                            player.yellowMessage(\"Syntax: /playernpc <playername> <npcid>\");\n+                            player.yellowMessage(\"Syntax: !playernpc <playername> <npcid>\");\n                             break;\n                         }\n                             player.playerNPC(c.getChannelServer().getPlayerStorage().getCharacterByName(sub[1]), Integer.parseInt(sub[2]));\n \t\t\tbreak;\n                         \n                     case \"face\":\n                         if (sub.length < 2){\n-\t\t\t\tplayer.yellowMessage(\"Syntax: /face [<playername>] <faceid>\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: !face [<playername>] <faceid>\");\n \t\t\t\tbreak;\n \t\t\t}\n                     \n@@ -2022,7 +2022,7 @@ public static boolean executeSolaxiaCommandLv4(Channel cserv, Server srv, MapleC\n                     \n                     case \"hair\":\n                         if (sub.length < 2){\n-\t\t\t\tplayer.yellowMessage(\"Syntax: /hair [<playername>] <hairid>\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: !hair [<playername>] <hairid>\");\n \t\t\t\tbreak;\n \t\t\t}\n                     \n@@ -2159,7 +2159,7 @@ public static boolean executeSolaxiaCommandLv6(Channel cserv, Server srv, MapleC\n                 switch(sub[0]) {\n \t\tcase \"warpworld\":\n                         if (sub.length < 2){\n-\t\t\t\tplayer.yellowMessage(\"Syntax: /warpworld <worldid>\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: !warpworld <worldid>\");\n \t\t\t\tbreak;\n \t\t\t}\n                     \n@@ -2190,7 +2190,7 @@ public static boolean executeSolaxiaCommandLv6(Channel cserv, Server srv, MapleC\n \t\t\t\t\tchr.saveToDB();\n \t\t\t\t}\n \t\t\t}\n-\t\t\tString message = player.getName() + \" used /saveall.\";\n+\t\t\tString message = player.getName() + \" used !saveall.\";\n \t\t\tServer.getInstance().broadcastGMMessage(MaplePacketCreator.serverNotice(5, message));\n \t\t\tplayer.message(\"All players saved successfully.\");\n \t\t\tbreak;\n@@ -2225,7 +2225,7 @@ public static boolean executeSolaxiaCommandLv6(Channel cserv, Server srv, MapleC\n                     \n \t\tcase \"getacc\":\n \t\t\tif (sub.length < 2){\n-\t\t\t\tplayer.yellowMessage(\"Syntax: /getacc <playername>\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: !getacc <playername>\");\n \t\t\t\tbreak;\n \t\t\t}\n \t\t\tvictim = c.getChannelServer().getPlayerStorage().getCharacterByName(sub[1]);\n@@ -2234,7 +2234,7 @@ public static boolean executeSolaxiaCommandLv6(Channel cserv, Server srv, MapleC\n                     \n \t\tcase \"npc\":\n \t\t\tif (sub.length < 2){\n-\t\t\t\tplayer.yellowMessage(\"Syntax: /npc <npcid>\");\n+\t\t\t\tplayer.yellowMessage(\"Syntax: !npc <npcid>\");\n \t\t\t\tbreak;\n \t\t\t}\n \t\t\tMapleNPC npc = MapleLifeFactory.getNPC(Integer.parseInt(sub[1]));\n@@ -2258,7 +2258,7 @@ public static boolean executeSolaxiaCommandLv6(Channel cserv, Server srv, MapleC\n \t\t\t\tvictim.changeJob(MapleJob.getById(Integer.parseInt(sub[2])));\n \t\t\t\tplayer.equipChanged();\n \t\t\t} else {\n-\t\t\t\tplayer.message(\"Syntax: /job <job id> <opt: IGN of another person>\");\n+\t\t\t\tplayer.message(\"Syntax: !job <job id> <opt: IGN of another person>\");\n \t\t\t}\n \t\t\tbreak;\n \n@@ -2317,10 +2317,10 @@ public static boolean executeSolaxiaCommandLv6(Channel cserv, Server srv, MapleC\n         \n         public static boolean executeSolaxiaCommand(Channel cserv, Server srv, MapleClient c, String[] sub, int gmLevel) {\n                 if(gmLevel == -1) {\n-                        c.getPlayer().yellowMessage(\"Command '\" + sub[0] + \"' is not available. See /commands for a list of available commands.\");\n+                        c.getPlayer().yellowMessage(\"Command '\" + sub[0] + \"' is not available. See @commands for a list of available commands.\");\n                         return false;\n                 }\n-            \n+                \n                 boolean executedCommand;\n                 switch(gmLevel) {\n                 case 0: //Player"}, {"sha": "a81754ab336f7b9b63a16d42946cdbac7895ebdb", "filename": "src/constants/ServerConstants.java", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/constants/ServerConstants.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/constants/ServerConstants.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/constants/ServerConstants.java?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -34,7 +34,7 @@\n     public static final boolean USE_CUSTOM_KEYSET = true;           //Enables auto-setup of the MapleSolaxiaV2's custom keybindings when creating characters.\n     public static final boolean USE_MAXRANGE_ECHO_OF_HERO = true;\n     public static final boolean USE_MAXRANGE = true;                //Will send and receive packets from all events of a map, rather than those of only view range.\n-    public static final boolean USE_DEBUG = false;                  //Will enable some text prints on the client, oriented for debugging purposes.\n+    public static final boolean USE_DEBUG = true;                  //Will enable some text prints on the client, oriented for debugging purposes.\n     public static final boolean USE_DEBUG_SHOW_RCVD_PACKET = false; //Prints on the cmd all received packet ids.\n     public static final boolean USE_DEBUG_SHOW_INFO_EQPEXP = false; //Prints on the cmd all equip exp gain info.\n     public static final boolean USE_MTS = false;"}, {"sha": "302015b3db4f55aab9537f3b2a5f22cfd3cad692", "filename": "src/net/server/channel/Channel.java", "status": "modified", "additions": 12, "deletions": 1, "changes": 13, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/net/server/channel/Channel.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/net/server/channel/Channel.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/Channel.java?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -30,6 +30,7 @@\n import java.util.Collections;\n import java.util.Map;\n import java.util.Map.Entry;\n+import java.util.Set;\n import java.util.concurrent.ScheduledFuture;\n import java.util.concurrent.locks.ReentrantReadWriteLock;\n import java.util.concurrent.locks.ReentrantReadWriteLock.ReadLock;\n@@ -374,6 +375,16 @@ private void freeDojoSlot(int slot, MapleParty party) {\n         \n         usedDojo &= mask;\n         if(party != null) dojoParty.remove(party.hashCode());\n+        else if(dojoParty.containsValue(slot)) {    // they left the dojo before completing it, no party there!\n+            Set<Entry<Integer, Integer>> es = Collections.unmodifiableSet(dojoParty.entrySet());\n+            \n+            for(Entry<Integer, Integer> e: es) {\n+                if(e.getValue() == slot) {\n+                    dojoParty.remove(e.getKey());\n+                    break;\n+                }\n+            }\n+        }\n     }\n     \n     private int getDojoSlot(int dojoMapId) {\n@@ -405,7 +416,7 @@ public void startDojoSchedule(final int dojoMapId) {\n         final int stage = (dojoMapId / 100) % 100;\n         if(stage <= dojoStage[slot]) return;\n         \n-        long clockTime = (stage > 36 ? 15 : stage / 6 + 5) * 60000;\n+        long clockTime = (stage > 36 ? 15 : (stage / 6) + 5) * 60000;\n         this.dojoTask[slot] = TimerManager.getInstance().schedule(new Runnable() {\n             @Override\n             public void run() {"}, {"sha": "cc3bcb5f9d84121f5d20efc9b0aa5903b7e9a989", "filename": "src/net/server/channel/handlers/AbstractDealDamageHandler.java", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/net/server/channel/handlers/AbstractDealDamageHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/net/server/channel/handlers/AbstractDealDamageHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/AbstractDealDamageHandler.java?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -787,14 +787,14 @@ else if(orbs >= 5)\n \t\t\t\t\thitDmgMax = 200000;\n \t\t\t\t}\n \t\t\t\t\n-                int maxWithCrit = hitDmgMax;\n+                                int maxWithCrit = hitDmgMax;\n \t\t\t\tif(canCrit) // They can crit, so up the max.\n \t\t\t\t\tmaxWithCrit *= 2;\n \t\t\t\t\n \t\t\t\t// Warn if the damage is over 1.5x what we calculated above.\n-                if(damage > maxWithCrit * 1.5) {\n-                    AutobanFactory.DAMAGE_HACK.alert(chr, \"DMG: \" + damage + \" MaxDMG: \" + maxWithCrit + \" SID: \" + ret.skill + \" MobID: \" + (monster != null ? monster.getId() : \"null\") + \" Map: \" + chr.getMap().getMapName() + \" (\" + chr.getMapId() + \")\");\n-                }\n+                                if(damage > maxWithCrit * 1.5) {\n+                                    AutobanFactory.DAMAGE_HACK.alert(chr, \"DMG: \" + damage + \" MaxDMG: \" + maxWithCrit + \" SID: \" + ret.skill + \" MobID: \" + (monster != null ? monster.getId() : \"null\") + \" Map: \" + chr.getMap().getMapName() + \" (\" + chr.getMapId() + \")\");\n+                                }\n \t\t\t\t\n \t\t\t\t// Add a ab point if its over 5x what we calculated.\n \t\t\t\tif(damage > maxWithCrit  * 5) {"}, {"sha": "584447a0615d5a8fb4369d27b92da922340547e3", "filename": "src/net/server/channel/handlers/GeneralChatHandler.java", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/net/server/channel/handlers/GeneralChatHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/net/server/channel/handlers/GeneralChatHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/GeneralChatHandler.java?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -47,7 +47,7 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                         return;\n                 }\n                 char heading = s.charAt(0);\n-                if (heading == '/') {\n+                if (heading == '!' || heading == '@') {     // client seems to not send command with '/' heading to the server, if not a GM account\n                         String[] sp = s.split(\" \");\n                         sp[0] = sp[0].toLowerCase().substring(1);\n "}, {"sha": "b7e96996b96f7f0b0fa80e6db5ec00daacad292c", "filename": "src/net/server/channel/handlers/MobDamageMobFriendlyHandler.java", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/net/server/channel/handlers/MobDamageMobFriendlyHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/net/server/channel/handlers/MobDamageMobFriendlyHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/MobDamageMobFriendlyHandler.java?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -58,6 +58,12 @@ else if (monster.getId() == 9300061) {  //moon bunny\n                         else if(monster.getId() == 9300093) {   //tylus\n                                 monster.getMap().broadcastMessage(MaplePacketCreator.serverNotice(6, \"Tylus has fallen by the overwhelming forces of this ambush.\"));\n                         }\n+                        else if(monster.getId() == 9300137) {   //juliet\n+                                monster.getMap().broadcastMessage(MaplePacketCreator.serverNotice(6, \"Juliet has fainted on the middle of the combat.\"));\n+                        }\n+                        else if(monster.getId() == 9300138) {   //romeo\n+                                monster.getMap().broadcastMessage(MaplePacketCreator.serverNotice(6, \"Romeo has fainted on the middle of the combat.\"));\n+                        }\n                         \n                         c.getPlayer().getMap().killFriendlies(monster);\n                 }"}, {"sha": "09e6441aa171e5bb4546e626f9252a8ca89e92eb", "filename": "src/net/server/channel/handlers/NPCTalkHandler.java", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/net/server/channel/handlers/NPCTalkHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/net/server/channel/handlers/NPCTalkHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/NPCTalkHandler.java?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -62,7 +62,7 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                     // Custom handling for gachapon scripts to reduce the amount of scripts needed.\n                     NPCScriptManager.getInstance().start(c, npc.getId(), \"gachapon\", null);\n                 } else {\n-                    boolean hasNpcScript = NPCScriptManager.getInstance().start(c, npc.getId(), null);\n+                    boolean hasNpcScript = NPCScriptManager.getInstance().start(c, npc.getId(), oid, null);\n                     if (!hasNpcScript) {\n                         if (!npc.hasShop()) {\n                             FilePrinter.printError(FilePrinter.NPC_UNCODED, \"NPC \" + npc.getName() + \"(\" + npc.getId() + \") is not coded.\\r\\n\");"}, {"sha": "fadeb89107c45ee8c9d0ccecfd022e2f06d6f791", "filename": "src/scripting/event/EventInstanceManager.java", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/scripting/event/EventInstanceManager.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/scripting/event/EventInstanceManager.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/scripting/event/EventInstanceManager.java?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -447,6 +447,14 @@ public void monsterKilled(MapleMonster mob) {\n \t\t\t}\n \t\t}\n \t}\n+        \n+        public void friendlyKilled(MapleMonster mob) {\n+\t\ttry {\n+                        em.getIv().invokeFunction(\"friendlyKilled\", mob, this);\n+                } catch (ScriptException | NoSuchMethodException ex) {\n+                        //optional\n+                }\n+\t}\n \n \tpublic void playerKilled(MapleCharacter chr) {\n \t\ttry {"}, {"sha": "09b8407d98b56c10f0793e0f9a7c34386e7165e4", "filename": "src/scripting/npc/NPCConversationManager.java", "status": "modified", "additions": 12, "deletions": 8, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/scripting/npc/NPCConversationManager.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/scripting/npc/NPCConversationManager.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/scripting/npc/NPCConversationManager.java?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -44,7 +44,6 @@\n import server.partyquest.Pyramid.PyramidMode;\n import server.quest.MapleQuest;\n import tools.LogHelper;\n-import tools.FilePrinter;\n import tools.MaplePacketCreator;\n import client.MapleCharacter;\n import client.MapleClient;\n@@ -56,27 +55,35 @@\n import client.inventory.Item;\n import client.inventory.ItemFactory;\n import client.inventory.MaplePet;\n-import constants.ServerConstants;\n \n /**\n  *\n  * @author Matze\n  */\n public class NPCConversationManager extends AbstractPlayerInteraction {\n-\n \tprivate int npc;\n+        private int npcOid;\n \tprivate String scriptName;\n \tprivate String getText;\n-\n-\tpublic NPCConversationManager(MapleClient c, int npc, String scriptName) {\n+        \n+        public NPCConversationManager(MapleClient c, int npc, String scriptName) {\n+               this(c, npc, -1, scriptName);\n+        }\n+        \n+\tpublic NPCConversationManager(MapleClient c, int npc, int oid, String scriptName) {\n \t\tsuper(c);\n \t\tthis.npc = npc;\n+                this.npcOid = oid;\n \t\tthis.scriptName = scriptName;\n \t}\n \n \tpublic int getNpc() {\n \t\treturn npc;\n \t}\n+        \n+        public int getNpcObjectId() {\n+\t\treturn npcOid;\n+\t}\n \n \tpublic String getScriptName() {\n \t\treturn scriptName;\n@@ -220,9 +227,6 @@ public int getMeso() {\n \t}\n \n \tpublic void gainMeso(int gain) {\n-\t\tif (gain > 0 && ServerConstants.USE_AUTOBAN == true) {\n-\t\t\tFilePrinter.printError(FilePrinter.EXPLOITS + c.getPlayer().getName() + \".txt\", c.getPlayer().getName() + \" gained \" + gain + \" mesos from NPC \" + npc + \"\\r\\n\");\n-\t\t}\n \t\tgetPlayer().gainMeso(gain);\n \t}\n "}, {"sha": "084109a2fb8a0ad6148237e44d6722c4f4417e67", "filename": "src/scripting/npc/NPCScriptManager.java", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/scripting/npc/NPCScriptManager.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/scripting/npc/NPCScriptManager.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/scripting/npc/NPCScriptManager.java?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -32,7 +32,6 @@\n import javax.script.ScriptException;\n \n import scripting.AbstractScriptManager;\n-import server.life.MapleLifeFactory;\n import tools.FilePrinter;\n import tools.MaplePacketCreator;\n \n@@ -53,10 +52,18 @@ public synchronized static NPCScriptManager getInstance() {\n     public boolean start(MapleClient c, int npc, MapleCharacter chr) {\n         return start(c, npc, null, chr);\n     }\n-\n+    \n+    public boolean start(MapleClient c, int npc, int oid, MapleCharacter chr) {\n+        return start(c, npc, oid, null, chr);\n+    }\n+    \n     public boolean start(MapleClient c, int npc, String fileName, MapleCharacter chr) {\n+        return start(c, npc, -1, fileName, chr);\n+    }\n+\n+    public boolean start(MapleClient c, int npc, int oid, String fileName, MapleCharacter chr) {\n         try {\n-            NPCConversationManager cm = new NPCConversationManager(c, npc, fileName);\n+            NPCConversationManager cm = new NPCConversationManager(c, npc, oid, fileName);\n             if (cms.containsKey(c)) {\n                 dispose(c);\n             }"}, {"sha": "fe860389a0bd05ddd83b21bac39f0d2f67dc885c", "filename": "src/server/life/MapleMonster.java", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/server/life/MapleMonster.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/server/life/MapleMonster.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/life/MapleMonster.java?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -445,6 +445,8 @@ public void dispatchMonsterKilled() {\n         if (getMap().getEventInstance() != null) {\n             if (!this.getStats().isFriendly()) {\n                 getMap().getEventInstance().monsterKilled(this);\n+            } else {\n+                getMap().getEventInstance().friendlyKilled(this);\n             }\n         }\n         "}, {"sha": "155f9199344209befe48426252d6e3a48ec6479b", "filename": "src/server/maps/MapleMap.java", "status": "modified", "additions": 17, "deletions": 15, "changes": 32, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/server/maps/MapleMap.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/server/maps/MapleMap.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/maps/MapleMap.java?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -246,12 +246,12 @@ public void setReactorState() {\n                         mr.lockReactor();\n                         try {\n                             mr.setState((byte) 1);\n-                            mr.setShouldCollect(true);\n+                            mr.resetReactorActions();\n+                            \n+                            broadcastMessage(MaplePacketCreator.triggerReactor((MapleReactor) o, 1));\n                         } finally {\n                             mr.unlockReactor();\n                         }\n-                        \n-                        broadcastMessage(MaplePacketCreator.triggerReactor((MapleReactor) o, 1));\n                     }\n                 }\n             }\n@@ -1076,6 +1076,7 @@ public void destroyReactor(int oid) {\n         final MapleReactor reactor = getReactorByOid(oid);\n         TimerManager tMan = TimerManager.getInstance();\n         broadcastMessage(MaplePacketCreator.destroyReactor(reactor));\n+        reactor.cancelReactorTimeout();\n         reactor.setAlive(false);\n         removeMapObject(reactor);\n         \n@@ -1099,12 +1100,12 @@ public void resetReactors() {\n                     r.lockReactor();\n                     try {\n                         r.setState((byte) 0);\n-                        r.setShouldCollect(true);\n+                        r.resetReactorActions();\n+                        \n+                        broadcastMessage(MaplePacketCreator.triggerReactor(r, 0));\n                     } finally {\n                         r.unlockReactor();\n                     }\n-                    \n-                    broadcastMessage(MaplePacketCreator.triggerReactor(r, 0));\n                 }\n             }\n         } finally {\n@@ -1547,8 +1548,8 @@ public void sendPackets(MapleClient c) {\n     private void respawnReactor(final MapleReactor reactor) {\n         reactor.lockReactor();\n         try {\n-            reactor.setShouldCollect(true);\n             reactor.setState((byte) 0);\n+            reactor.resetReactorActions();\n             reactor.setAlive(true);\n         } finally {\n             reactor.unlockReactor();\n@@ -1979,7 +1980,7 @@ public void run() {\n     public MaplePortal getRandomPlayerSpawnpoint() {\n         List<MaplePortal> spawnPoints = new ArrayList<>();\n         for (MaplePortal portal : portals.values()) {\n-            if (portal.getType() >= 0 && portal.getType() <= 1) {\n+            if (portal.getType() >= 0 && portal.getType() <= 1 && portal.getTargetMapId() == 999999999) {\n                 spawnPoints.add(portal);\n             }\n         }\n@@ -2608,13 +2609,14 @@ public void run() {\n                                 @Override\n                                 public void run() {\n                                     reactor.lockReactor();\n-                                        try {\n-                                            reactor.setState((byte) 0);\n-                                            reactor.setShouldCollect(true);\n-                                        } finally {\n-                                            reactor.unlockReactor();\n-                                        }\n-                                    broadcastMessage(MaplePacketCreator.triggerReactor(reactor, 0));\n+                                    try {\n+                                        reactor.setState((byte) 0);\n+                                        reactor.resetReactorActions();\n+\n+                                        broadcastMessage(MaplePacketCreator.triggerReactor(reactor, 0));\n+                                    } finally {\n+                                        reactor.unlockReactor();\n+                                    }\n                                 }\n                             }, reactor.getDelay());\n                         }"}, {"sha": "ca1ab719f0c64131606170ea21b70eb8b83aa0cf", "filename": "src/server/maps/MapleMapFactory.java", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/server/maps/MapleMapFactory.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/server/maps/MapleMapFactory.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/maps/MapleMapFactory.java?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -293,11 +293,12 @@ private MapleReactor loadReactor(MapleData reactor, String id) {\n         MapleReactor myReactor = new MapleReactor(MapleReactorFactory.getReactor(Integer.parseInt(id)), Integer.parseInt(id));\n         int x = MapleDataTool.getInt(reactor.getChildByPath(\"x\"));\n         int y = MapleDataTool.getInt(reactor.getChildByPath(\"y\"));\n+        myReactor.setName(MapleDataTool.getString(reactor.getChildByPath(\"name\"), \"\"));\n         myReactor.setPosition(new Point(x, y));\n         myReactor.setDelay(MapleDataTool.getInt(reactor.getChildByPath(\"reactorTime\")) * 1000);\n         myReactor.setState((byte) 0);\n-        myReactor.setShouldCollect(true);\n-        myReactor.setName(MapleDataTool.getString(reactor.getChildByPath(\"name\"), \"\"));\n+        \n+        myReactor.resetReactorActions();\n         return myReactor;\n     }\n "}, {"sha": "dbd7aa5d2757b6440b52a3632ae8682dd18f5b76", "filename": "src/server/maps/MapleReactor.java", "status": "modified", "additions": 90, "deletions": 37, "changes": 127, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/server/maps/MapleReactor.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/server/maps/MapleReactor.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/maps/MapleReactor.java?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -27,6 +27,7 @@\n import java.awt.Rectangle;\n import java.util.List;\n \n+import java.util.concurrent.ScheduledFuture;\n import java.util.concurrent.locks.Lock;\n import java.util.concurrent.locks.ReentrantLock;\n \n@@ -38,6 +39,7 @@\n /**\n  *\n  * @author Lerk\n+ * @author Ronan\n  */\n public class MapleReactor extends AbstractMapleMapObject {\n     private int rid;\n@@ -50,6 +52,7 @@\n     private boolean alive;\n     private boolean shouldCollect;\n     private boolean attackHit;\n+    private ScheduledFuture<?> timeoutTask = null;\n     private Lock reactorLock = new ReentrantLock(true);\n \n     public MapleReactor(MapleReactorStats stats, int rid) {\n@@ -158,16 +161,57 @@ public void sendSpawnData(MapleClient client) {\n         return MaplePacketCreator.spawnReactor(this);\n     }\n \n+    public void resetReactorActions() {\n+        cancelReactorTimeout();\n+        setShouldCollect(true);\n+        refreshReactorTimeout();\n+    }\n+    \n     public void forceHitReactor(final byte newState) {\n         this.lockReactor();\n         try {\n             setState((byte) newState);\n-            this.setShouldCollect(true);\n+            this.resetReactorActions();\n+            \n+            map.broadcastMessage(MaplePacketCreator.triggerReactor(this, (short) 0));\n         } finally {\n             this.unlockReactor();\n         }\n+    }\n+    \n+    private void tryForceHitReactor(final byte newState) {  // weak hit state signal, if already changed reactor state before timeout then drop this\n+        if(!this.reactorLock.tryLock()) return;\n         \n-        map.broadcastMessage(MaplePacketCreator.triggerReactor(this, (short) 0));\n+        try {\n+            setState((byte) newState);\n+            this.resetReactorActions();\n+            \n+            map.broadcastMessage(MaplePacketCreator.triggerReactor(this, (short) 0));\n+        } finally {\n+            this.unlockReactor();\n+        }\n+    }\n+    \n+    public void cancelReactorTimeout() {\n+        if (timeoutTask != null) {\n+            timeoutTask.cancel(false);\n+            timeoutTask = null;\n+        }\n+    }\n+    \n+    private void refreshReactorTimeout() {\n+        int timeOut = stats.getTimeout(state);\n+        if(timeOut > -1) {\n+            final byte nextState = stats.getTimeoutState(state);\n+            \n+            timeoutTask = TimerManager.getInstance().schedule(new Runnable() {\n+                @Override\n+                public void run() {\n+                    timeoutTask = null;\n+                    tryForceHitReactor(nextState);\n+                }\n+            }, timeOut);\n+        }\n     }\n     \n     public void delayedHitReactor(final MapleClient c, long delay) {\n@@ -189,48 +233,57 @@ public synchronized void hitReactor(boolean wHit, int charPos, short stance, int\n                 return;\n             }\n             \n-            attackHit = wHit;\n-            \n-            if(ServerConstants.USE_DEBUG == true) c.getPlayer().dropMessage(5, \"Hitted REACTOR \" + this.getId() + \" with POS \" + charPos + \" , STANCE \" + stance + \" , SkillID \" + skillid + \" , STATE \" + stats.getType(state) + \" STATESIZE \" + stats.getStateSize(state));\n-            ReactorScriptManager.getInstance().onHit(c, this);\n-            \n-            int reactorType = stats.getType(state);\n-            if (reactorType < 999 && reactorType != -1) {//type 2 = only hit from right (kerning swamp plants), 00 is air left 02 is ground left\n-                if (!(reactorType == 2 && (stance == 0 || stance == 2))) { //get next state\n-                    for (byte b = 0; b < stats.getStateSize(state); b++) {//YAY?\n-                        List<Integer> activeSkills = stats.getActiveSkills(state, b);\n-                        if (activeSkills != null) {\n-                            if (!activeSkills.contains(skillid)) continue;\n-                        }\n-                        state = stats.getNextState(state, b);\n-                        if (stats.getNextState(state, b) == -1) {//end of reactor\n-                            if (reactorType < 100) {//reactor broken\n-                                if (delay > 0) {\n-                                    map.destroyReactor(getObjectId());\n-                                } else {//trigger as normal\n+            this.lockReactor();\n+            try {\n+                cancelReactorTimeout();\n+                attackHit = wHit;\n+\n+                if(ServerConstants.USE_DEBUG == true) c.getPlayer().dropMessage(5, \"Hitted REACTOR \" + this.getId() + \" with POS \" + charPos + \" , STANCE \" + stance + \" , SkillID \" + skillid + \" , STATE \" + stats.getType(state) + \" STATESIZE \" + stats.getStateSize(state));\n+                ReactorScriptManager.getInstance().onHit(c, this);\n+\n+                int reactorType = stats.getType(state);\n+                if (reactorType < 999 && reactorType != -1) {//type 2 = only hit from right (kerning swamp plants), 00 is air left 02 is ground left\n+                    if (!(reactorType == 2 && (stance == 0 || stance == 2))) { //get next state\n+                        for (byte b = 0; b < stats.getStateSize(state); b++) {//YAY?\n+                            List<Integer> activeSkills = stats.getActiveSkills(state, b);\n+                            if (activeSkills != null) {\n+                                if (!activeSkills.contains(skillid)) continue;\n+                            }\n+                            state = stats.getNextState(state, b);\n+                            if (stats.getNextState(state, b) == -1) {//end of reactor\n+                                if (reactorType < 100) {//reactor broken\n+                                    if (delay > 0) {\n+                                        map.destroyReactor(getObjectId());\n+                                    } else {//trigger as normal\n+                                        map.broadcastMessage(MaplePacketCreator.triggerReactor(this, stance));\n+                                    }\n+                                } else {//item-triggered on final step\n                                     map.broadcastMessage(MaplePacketCreator.triggerReactor(this, stance));\n                                 }\n-                            } else {//item-triggered on final step\n-                                map.broadcastMessage(MaplePacketCreator.triggerReactor(this, stance));\n-                            }\n-                            \n-                            ReactorScriptManager.getInstance().act(c, this);\n-                        } else { //reactor not broken yet\n-                            map.broadcastMessage(MaplePacketCreator.triggerReactor(this, stance));\n-                            if (state == stats.getNextState(state, b)) {//current state = next state, looping reactor\n+\n                                 ReactorScriptManager.getInstance().act(c, this);\n+                            } else { //reactor not broken yet\n+                                map.broadcastMessage(MaplePacketCreator.triggerReactor(this, stance));\n+                                if (state == stats.getNextState(state, b)) {//current state = next state, looping reactor\n+                                    ReactorScriptManager.getInstance().act(c, this);\n+                                }\n+\n+                                setShouldCollect(true);     // refresh collectability on item drop-based reactors\n+                                refreshReactorTimeout();\n                             }\n-                            \n-                            setShouldCollect(true);     // refresh collectability on item drop-based reactors\n+                            break;\n                         }\n-                        break;\n                     }\n+                } else {\n+                    state++;\n+                    map.broadcastMessage(MaplePacketCreator.triggerReactor(this, stance));\n+                    ReactorScriptManager.getInstance().act(c, this);\n+\n+                    setShouldCollect(true);\n+                    refreshReactorTimeout();\n                 }\n-            } else {\n-                state++;\n-                map.broadcastMessage(MaplePacketCreator.triggerReactor(this, stance));\n-                ReactorScriptManager.getInstance().act(c, this);\n-                setShouldCollect(true);\n+            } finally {\n+                this.unlockReactor();\n             }\n         } catch(Exception e) {\n             e.printStackTrace();"}, {"sha": "55e72fd3054e70aabb4b20ade8bfe71f773a9710", "filename": "src/server/maps/MapleReactorFactory.java", "status": "modified", "additions": 27, "deletions": 22, "changes": 49, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/server/maps/MapleReactorFactory.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/server/maps/MapleReactorFactory.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/maps/MapleReactorFactory.java?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -57,46 +57,51 @@ public static MapleReactorStats getReactor(int rid) {\n                 reactorData = data.getData(StringUtil.getLeftPaddedStr(Integer.toString(infoId) + \".img\", '0', 11));\n                 MapleData reactorInfoData = reactorData.getChildByPath(\"0\");\n                 stats = new MapleReactorStats();\n-                List<StateData> statedatas = new ArrayList<StateData>();\n+                List<StateData> statedatas = new ArrayList<>();\n                 if (reactorInfoData != null) {\n                     boolean areaSet = false;\n                     byte i = 0;\n                     while (reactorInfoData != null) {\n                         MapleData eventData = reactorInfoData.getChildByPath(\"event\");\n                         if (eventData != null) {\n+                            int timeOut = -1;\n+                            \n                             for (MapleData fknexon : eventData.getChildren()) {\n-                                if (fknexon.getName().equals(\"timeOut\")) continue;\n-                                Pair<Integer, Integer> reactItem = null;\n-                                int type = MapleDataTool.getIntConvert(\"type\", fknexon);\n-                                if (type == 100) { //reactor waits for item\n-                                    reactItem = new Pair<Integer, Integer>(MapleDataTool.getIntConvert(\"0\", fknexon), MapleDataTool.getIntConvert(\"1\", fknexon));\n-                                    if (!areaSet || loadArea) { //only set area of effect for item-triggered reactors once\n-                                        stats.setTL(MapleDataTool.getPoint(\"lt\", fknexon));\n-                                        stats.setBR(MapleDataTool.getPoint(\"rb\", fknexon));\n-                                        areaSet = true;\n+                                if (fknexon.getName().equals(\"timeOut\")) {\n+                                    timeOut = MapleDataTool.getInt(fknexon);\n+                                } else {\n+                                    Pair<Integer, Integer> reactItem = null;\n+                                    int type = MapleDataTool.getIntConvert(\"type\", fknexon);\n+                                    if (type == 100) { //reactor waits for item\n+                                        reactItem = new Pair<Integer, Integer>(MapleDataTool.getIntConvert(\"0\", fknexon), MapleDataTool.getIntConvert(\"1\", fknexon));\n+                                        if (!areaSet || loadArea) { //only set area of effect for item-triggered reactors once\n+                                            stats.setTL(MapleDataTool.getPoint(\"lt\", fknexon));\n+                                            stats.setBR(MapleDataTool.getPoint(\"rb\", fknexon));\n+                                            areaSet = true;\n+                                        }\n                                     }\n-                                }\n-                                MapleData activeSkillID = fknexon.getChildByPath(\"activeSkillID\");\n-                                List<Integer> skillids = null;\n-                                if (activeSkillID != null) {\n-                                    skillids = new ArrayList<Integer>();\n-                                    for (MapleData skill : activeSkillID.getChildren()) {\n-                                        skillids.add(MapleDataTool.getInt(skill));\n+                                    MapleData activeSkillID = fknexon.getChildByPath(\"activeSkillID\");\n+                                    List<Integer> skillids = null;\n+                                    if (activeSkillID != null) {\n+                                        skillids = new ArrayList<Integer>();\n+                                        for (MapleData skill : activeSkillID.getChildren()) {\n+                                            skillids.add(MapleDataTool.getInt(skill));\n+                                        }\n                                     }\n+                                    byte nextState = (byte) MapleDataTool.getIntConvert(\"state\", fknexon);\n+                                    statedatas.add(new StateData(type, reactItem, skillids, nextState));\n                                 }\n-                                byte nextState = (byte) MapleDataTool.getIntConvert(\"state\", fknexon);\n-                                statedatas.add(new StateData(type, reactItem, skillids, nextState));\n                             }\n-                            stats.addState(i, statedatas);\n+                            stats.addState(i, statedatas, timeOut);\n                         }\n                         i++;\n                         reactorInfoData = reactorData.getChildByPath(Byte.toString(i));\n-                        statedatas = new ArrayList<StateData>();\n+                        statedatas = new ArrayList<>();\n                     }\n                 } else //sit there and look pretty; likely a reactor such as Zakum/Papulatus doors that shows if player can enter\n                 {\n                     statedatas.add(new StateData(999, null, null, (byte) 0));\n-                    stats.addState((byte) 0, statedatas);\n+                    stats.addState((byte) 0, statedatas, -1);\n                 }\n                 reactorStats.put(Integer.valueOf(infoId), stats);\n                 if (rid != infoId) {"}, {"sha": "88507a4277dcdf049828a6c9a4ad4b54193de6df", "filename": "src/server/maps/MapleReactorStats.java", "status": "modified", "additions": 14, "deletions": 2, "changes": 16, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/server/maps/MapleReactorStats.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/server/maps/MapleReactorStats.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/maps/MapleReactorStats.java?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -29,11 +29,13 @@\n \n /**\n  * @author Lerk\n+ * @author Ronan\n  */\n public class MapleReactorStats {\n     private Point tl;\n     private Point br;\n-    private Map<Byte, List<StateData>> stateInfo = new HashMap<Byte, List<StateData>>();\n+    private Map<Byte, List<StateData>> stateInfo = new HashMap<>();\n+    private Map<Byte, Integer> timeoutInfo = new HashMap<>();\n \n     public void setTL(Point tl) {\n         this.tl = tl;\n@@ -51,8 +53,18 @@ public Point getBR() {\n         return br;\n     }\n \n-    public void addState(byte state, List<StateData> data) {\n+    public void addState(byte state, List<StateData> data, int timeOut) {\n         stateInfo.put(state, data);\n+        if(timeOut > -1) timeoutInfo.put(state, timeOut);\n+    }\n+    \n+    public int getTimeout(byte state) {\n+        Integer i = timeoutInfo.get(state);\n+        return (i == null) ? -1 : i;\n+    }\n+    \n+    public byte getTimeoutState(byte state) {\n+        return stateInfo.get(state).get(stateInfo.get(state).size() - 1).getNextState();\n     }\n \n     public byte getStateSize(byte state) {"}, {"sha": "bcb4d7716bf248e453ed742393a9203bcf4d7e15", "filename": "src/tools/MaplePacketCreator.java", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/tools/MaplePacketCreator.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/src/tools/MaplePacketCreator.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/tools/MaplePacketCreator.java?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -3701,6 +3701,7 @@ private static void writeIntMask(final MaplePacketLittleEndianWriter mplew, Map<\n                 return mplew.getPacket();\n         }\n \n+        // is there a way to trigger reactors without performing the hit animation?\n         public static byte[] triggerReactor(MapleReactor reactor, int stance) {\n                 final MaplePacketLittleEndianWriter mplew = new MaplePacketLittleEndianWriter();\n                 Point pos = reactor.getPosition();"}, {"sha": "01a92c5875bffad7d7d70581a6abf1b7700cc908", "filename": "wz/Map.wz/Map/Map2/261000000.img.xml", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/Map.wz/Map/Map2/261000000.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/Map.wz/Map/Map2/261000000.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Map.wz/Map/Map2/261000000.img.xml?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -15429,9 +15429,9 @@\n       <int name=\"pt\" value=\"8\"/>\n       <int name=\"x\" value=\"-350\"/>\n       <int name=\"y\" value=\"347\"/>\n-      <int name=\"tm\" value=\"926130000\"/>\n-      <string name=\"tn\" value=\"out00\"/>\n-      <string name=\"script\" value=\"\"/>\n+      <int name=\"tm\" value=\"999999999\"/>\n+      <string name=\"tn\" value=\"\"/>\n+      <string name=\"script\" value=\"magatia_dark0\"/>\n     </imgdir>\n     <imgdir name=\"30\">\n       <string name=\"pn\" value=\"ev00\"/>"}, {"sha": "744a495bb1f068278fdb0234f725228789e969af", "filename": "wz/Map.wz/Map/Map9/926100201.img.xml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/Map.wz/Map/Map9/926100201.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/Map.wz/Map/Map9/926100201.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Map.wz/Map/Map9/926100201.img.xml?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -13,7 +13,7 @@\n     <int name=\"hideMinimap\" value=\"1\"/>\n     <int name=\"fieldLimit\" value=\"271096\"/>\n     <int name=\"fieldType\" value=\"9\"/>\n-    <int name=\"decHP\" value=\"100\"/>\n+    <int name=\"decHP\" value=\"300\"/>\n     <int name=\"reactorShuffle\" value=\"1\"/>\n     <string name=\"reactorShuffleName\" value=\"box\"/>\n   </imgdir>"}, {"sha": "61b5fdd6836fabe7df4a0221d3f0ba96de7deb5f", "filename": "wz/Map.wz/Map/Map9/926100202.img.xml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/Map.wz/Map/Map9/926100202.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/Map.wz/Map/Map9/926100202.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Map.wz/Map/Map9/926100202.img.xml?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -19,7 +19,7 @@\n     <int name=\"reactorShuffle\" value=\"1\"/>\n     <string name=\"reactorShuffleName\" value=\"box\"/>\n     <int name=\"fieldType\" value=\"9\"/>\n-    <int name=\"decHP\" value=\"100\"/>\n+    <int name=\"decHP\" value=\"300\"/>\n   </imgdir>\n   <imgdir name=\"back\">\n     <imgdir name=\"0\">"}, {"sha": "819cd42a0e7a5e7ebf120da9b76ee8fdade6325b", "filename": "wz/Map.wz/Map/Map9/926100203.img.xml", "status": "modified", "additions": 0, "deletions": 65, "changes": 65, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/Map.wz/Map/Map9/926100203.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/Map.wz/Map/Map9/926100203.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Map.wz/Map/Map9/926100203.img.xml?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -80,71 +80,6 @@\n     </imgdir>\n   </imgdir>\n   <imgdir name=\"life\">\n-    <imgdir name=\"0\">\n-      <string name=\"type\" value=\"n\"/>\n-      <string name=\"id\" value=\"2112007\"/>\n-      <int name=\"x\" value=\"200\"/>\n-      <int name=\"y\" value=\"184\"/>\n-      <int name=\"mobTime\" value=\"0\"/>\n-      <int name=\"f\" value=\"0\"/>\n-      <int name=\"hide\" value=\"1\"/>\n-      <int name=\"fh\" value=\"1\"/>\n-      <int name=\"cy\" value=\"188\"/>\n-      <int name=\"rx0\" value=\"150\"/>\n-      <int name=\"rx1\" value=\"250\"/>\n-    </imgdir>\n-    <imgdir name=\"1\">\n-      <string name=\"type\" value=\"n\"/>\n-      <string name=\"id\" value=\"2112007\"/>\n-      <int name=\"x\" value=\"96\"/>\n-      <int name=\"y\" value=\"236\"/>\n-      <int name=\"mobTime\" value=\"0\"/>\n-      <int name=\"f\" value=\"0\"/>\n-      <int name=\"hide\" value=\"1\"/>\n-      <int name=\"fh\" value=\"8\"/>\n-      <int name=\"cy\" value=\"243\"/>\n-      <int name=\"rx0\" value=\"46\"/>\n-      <int name=\"rx1\" value=\"104\"/>\n-    </imgdir>\n-    <imgdir name=\"2\">\n-      <string name=\"type\" value=\"n\"/>\n-      <string name=\"id\" value=\"2112007\"/>\n-      <int name=\"x\" value=\"448\"/>\n-      <int name=\"y\" value=\"234\"/>\n-      <int name=\"mobTime\" value=\"0\"/>\n-      <int name=\"f\" value=\"0\"/>\n-      <int name=\"hide\" value=\"1\"/>\n-      <int name=\"fh\" value=\"7\"/>\n-      <int name=\"cy\" value=\"243\"/>\n-      <int name=\"rx0\" value=\"398\"/>\n-      <int name=\"rx1\" value=\"498\"/>\n-    </imgdir>\n-    <imgdir name=\"3\">\n-      <string name=\"type\" value=\"n\"/>\n-      <string name=\"id\" value=\"2112007\"/>\n-      <int name=\"x\" value=\"472\"/>\n-      <int name=\"y\" value=\"200\"/>\n-      <int name=\"mobTime\" value=\"0\"/>\n-      <int name=\"f\" value=\"0\"/>\n-      <int name=\"hide\" value=\"1\"/>\n-      <int name=\"fh\" value=\"2\"/>\n-      <int name=\"cy\" value=\"208\"/>\n-      <int name=\"rx0\" value=\"422\"/>\n-      <int name=\"rx1\" value=\"522\"/>\n-    </imgdir>\n-    <imgdir name=\"4\">\n-      <string name=\"type\" value=\"n\"/>\n-      <string name=\"id\" value=\"2112007\"/>\n-      <int name=\"x\" value=\"518\"/>\n-      <int name=\"y\" value=\"236\"/>\n-      <int name=\"mobTime\" value=\"0\"/>\n-      <int name=\"f\" value=\"0\"/>\n-      <int name=\"hide\" value=\"1\"/>\n-      <int name=\"fh\" value=\"7\"/>\n-      <int name=\"cy\" value=\"243\"/>\n-      <int name=\"rx0\" value=\"468\"/>\n-      <int name=\"rx1\" value=\"560\"/>\n-    </imgdir>\n   </imgdir>\n   <imgdir name=\"reactor\">\n     <imgdir name=\"0\">"}, {"sha": "769b8c32a9f4719aa660bbedfb172331cb50d937", "filename": "wz/Map.wz/Map/Map9/926100401.img.xml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/Map.wz/Map/Map9/926100401.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/Map.wz/Map/Map9/926100401.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Map.wz/Map/Map9/926100401.img.xml?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -70,7 +70,7 @@\n       <string name=\"id\" value=\"9300150\"/>\n       <int name=\"x\" value=\"-278\"/>\n       <int name=\"y\" value=\"-126\"/>\n-      <int name=\"mobTime\" value=\"3\"/>\n+      <int name=\"mobTime\" value=\"0\"/>\n       <int name=\"f\" value=\"0\"/>\n       <int name=\"hide\" value=\"0\"/>\n       <int name=\"fh\" value=\"8\"/>\n@@ -96,7 +96,7 @@\n       <string name=\"id\" value=\"9300150\"/>\n       <int name=\"x\" value=\"-542\"/>\n       <int name=\"y\" value=\"-124\"/>\n-      <int name=\"mobTime\" value=\"3\"/>\n+      <int name=\"mobTime\" value=\"0\"/>\n       <int name=\"f\" value=\"0\"/>\n       <int name=\"hide\" value=\"0\"/>\n       <int name=\"fh\" value=\"6\"/>"}, {"sha": "b13afe89c674f4355ee2edd602368cec71c24f03", "filename": "wz/Map.wz/Map/Map9/926110201.img.xml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/Map.wz/Map/Map9/926110201.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/Map.wz/Map/Map9/926110201.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Map.wz/Map/Map9/926110201.img.xml?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -13,7 +13,7 @@\n     <int name=\"hideMinimap\" value=\"1\"/>\n     <int name=\"fieldLimit\" value=\"271096\"/>\n     <int name=\"fieldType\" value=\"9\"/>\n-    <int name=\"decHP\" value=\"100\"/>\n+    <int name=\"decHP\" value=\"300\"/>\n     <int name=\"reactorShuffle\" value=\"1\"/>\n     <string name=\"reactorShuffleName\" value=\"box\"/>\n   </imgdir>"}, {"sha": "358c66eaf9ce3c12198240f7c2f8caa104bef20b", "filename": "wz/Map.wz/Map/Map9/926110202.img.xml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/Map.wz/Map/Map9/926110202.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/Map.wz/Map/Map9/926110202.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Map.wz/Map/Map9/926110202.img.xml?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -19,7 +19,7 @@\n     <int name=\"reactorShuffle\" value=\"1\"/>\n     <string name=\"reactorShuffleName\" value=\"box\"/>\n     <int name=\"fieldType\" value=\"9\"/>\n-    <int name=\"decHP\" value=\"100\"/>\n+    <int name=\"decHP\" value=\"300\"/>\n   </imgdir>\n   <imgdir name=\"back\">\n     <imgdir name=\"0\">"}, {"sha": "db83463d679e47c42b835eef85dfdd4a6b9874a1", "filename": "wz/Map.wz/Map/Map9/926110401.img.xml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/Map.wz/Map/Map9/926110401.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/Map.wz/Map/Map9/926110401.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Map.wz/Map/Map9/926110401.img.xml?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -70,7 +70,7 @@\n       <string name=\"id\" value=\"9300150\"/>\n       <int name=\"x\" value=\"-276\"/>\n       <int name=\"y\" value=\"-138\"/>\n-      <int name=\"mobTime\" value=\"3\"/>\n+      <int name=\"mobTime\" value=\"0\"/>\n       <int name=\"f\" value=\"0\"/>\n       <int name=\"hide\" value=\"0\"/>\n       <int name=\"fh\" value=\"8\"/>\n@@ -83,7 +83,7 @@\n       <string name=\"id\" value=\"9300150\"/>\n       <int name=\"x\" value=\"-540\"/>\n       <int name=\"y\" value=\"-136\"/>\n-      <int name=\"mobTime\" value=\"3\"/>\n+      <int name=\"mobTime\" value=\"0\"/>\n       <int name=\"f\" value=\"0\"/>\n       <int name=\"hide\" value=\"0\"/>\n       <int name=\"fh\" value=\"6\"/>"}, {"sha": "b6ff2b252050836a7bcedc6134731cb4d0b8af47", "filename": "wz/Map.wz/Map/Map9/926110700.img.xml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/Map.wz/Map/Map9/926110700.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/Map.wz/Map/Map9/926110700.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Map.wz/Map/Map9/926110700.img.xml?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -253,7 +253,7 @@\n       <int name=\"y\" value=\"120\"/>\n       <int name=\"tm\" value=\"999999999\"/>\n       <string name=\"tn\" value=\"\"/>\n-      <string name=\"script\" value=\"rnj_exit\"/>\n+      <string name=\"script\" value=\"jnr_exit\"/>\n     </imgdir>\n   </imgdir>\n </imgdir>"}, {"sha": "0bfc996a6f98a405b86be4bccb1eafca3287dd74", "filename": "wz/Npc.wz/2112018.img.xml", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/Npc.wz/2112018.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/Npc.wz/2112018.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Npc.wz/2112018.img.xml?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -1,11 +1,16 @@\n <?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\n <imgdir name=\"2112018.img\">\n-  <imgdir name=\"info\">\n-  </imgdir>\n   <imgdir name=\"stand\">\n     <canvas name=\"0\" width=\"85\" height=\"79\">\n       <vector name=\"origin\" x=\"44\" y=\"78\"/>\n       <int name=\"delay\" value=\"5000\"/>\n     </canvas>\n   </imgdir>\n+  <imgdir name=\"info\">\n+    <imgdir name=\"script\">\n+      <imgdir name=\"0\">\n+        <string name=\"script\" value=\"rnj_start\"/>\n+      </imgdir>\n+    </imgdir>\n+  </imgdir>\n </imgdir>"}, {"sha": "3bad1081df27542f3579bc050353307576fee63e", "filename": "wz/Reactor.wz/2618000.img.xml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/Reactor.wz/2618000.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/Reactor.wz/2618000.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Reactor.wz/2618000.img.xml?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -255,7 +255,7 @@\n     </canvas>\n     <imgdir name=\"event\">\n       <imgdir name=\"0\">\n-        <int name=\"type\" value=\"100\"/>\n+        <int name=\"type\" value=\"101\"/>\n         <int name=\"state\" value=\"0\"/>\n         <int name=\"0\" value=\"1002140\"/>\n         <vector name=\"lt\" x=\"-26\" y=\"-24\"/>"}, {"sha": "9f59bc776a197bca4887874dc396d0601471360a", "filename": "wz/Reactor.wz/2618003.img.xml", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/Reactor.wz/2618003.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/Reactor.wz/2618003.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Reactor.wz/2618003.img.xml?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -45,6 +45,12 @@\n         <int name=\"z\" value=\"0\"/>\n       </canvas>\n     </imgdir>\n+    <imgdir name=\"event\">\n+      <imgdir name=\"0\">\n+        <int name=\"type\" value=\"101\"/>\n+        <int name=\"state\" value=\"1\"/>\n+      </imgdir>\n+    </imgdir>\n   </imgdir>\n   <imgdir name=\"1\">\n     <canvas name=\"0\" width=\"83\" height=\"143\">"}, {"sha": "ceb1fe0363d0c6106a7b4dc1d033755deafa5a8e", "filename": "wz/Reactor.wz/2618004.img.xml", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/Reactor.wz/2618004.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/Reactor.wz/2618004.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Reactor.wz/2618004.img.xml?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -45,6 +45,12 @@\n         <int name=\"z\" value=\"0\"/>\n       </canvas>\n     </imgdir>\n+    <imgdir name=\"event\">\n+      <imgdir name=\"0\">\n+        <int name=\"type\" value=\"101\"/>\n+        <int name=\"state\" value=\"1\"/>\n+      </imgdir>\n+    </imgdir>\n   </imgdir>\n   <imgdir name=\"1\">\n     <canvas name=\"0\" width=\"83\" height=\"143\">"}, {"sha": "2f86fadafefb487e40efc4ee46a9632d020a8caa", "filename": "wz/Reactor.wz/2618005.img.xml", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/Reactor.wz/2618005.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/Reactor.wz/2618005.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Reactor.wz/2618005.img.xml?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -177,6 +177,12 @@\n         <int name=\"delay\" value=\"100\"/>\n       </canvas>\n     </imgdir>\n+    <imgdir name=\"event\">\n+      <imgdir name=\"0\">\n+        <int name=\"type\" value=\"7\"/>\n+        <int name=\"state\" value=\"1\"/>\n+      </imgdir>\n+    </imgdir>\n   </imgdir>\n   <imgdir name=\"1\">\n     <canvas name=\"0\" width=\"196\" height=\"216\">"}, {"sha": "7e7d56b3c375ad2a72df9d115558ab72362ef610", "filename": "wz/Reactor.wz/2618006.img.xml", "status": "modified", "additions": 7, "deletions": 16, "changes": 23, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/Reactor.wz/2618006.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/Reactor.wz/2618006.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Reactor.wz/2618006.img.xml?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -4,21 +4,6 @@\n     <string name=\"info\" value=\"\uba54\uc774\ud50c\uc544\uc77c\ub79c\ub4dc \ubc94\uc6a9\ub9ac\uc5d1\ud130\"/>\n   </imgdir>\n   <imgdir name=\"0\">\n-    <canvas name=\"0\" width=\"1\" height=\"1\">\n-      <vector name=\"origin\" x=\"0\" y=\"0\"/>\n-      <int name=\"z\" value=\"0\"/>\n-      <int name=\"delay\" value=\"120\"/>\n-      <int name=\"a0\" value=\"0\"/>\n-    </canvas>\n-  </imgdir>\n-  <imgdir name=\"1\">\n-    <canvas name=\"0\" width=\"1\" height=\"1\">\n-      <vector name=\"origin\" x=\"0\" y=\"0\"/>\n-      <int name=\"z\" value=\"0\"/>\n-      <int name=\"delay\" value=\"120\"/>\n-    </canvas>\n-  </imgdir>\n-  <imgdir name=\"2\">\n     <canvas name=\"0\" width=\"1\" height=\"1\">\n       <vector name=\"origin\" x=\"0\" y=\"0\"/>\n       <int name=\"z\" value=\"0\"/>\n@@ -191,8 +176,14 @@\n         <int name=\"delay\" value=\"100\"/>\n       </canvas>\n     </imgdir>\n+    <imgdir name=\"event\">\n+      <imgdir name=\"0\">\n+        <int name=\"type\" value=\"101\"/>\n+        <int name=\"state\" value=\"1\"/>\n+      </imgdir>\n+    </imgdir>\n   </imgdir>\n-  <imgdir name=\"3\">\n+  <imgdir name=\"1\">\n     <canvas name=\"0\" width=\"196\" height=\"216\">\n       <vector name=\"origin\" x=\"100\" y=\"216\"/>\n       <int name=\"z\" value=\"0\"/>"}, {"sha": "451e0df1889bd089b40c8e3e1bc8e5be1b960651", "filename": "wz/Reactor.wz/2618007.img.xml", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/Reactor.wz/2618007.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/Reactor.wz/2618007.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Reactor.wz/2618007.img.xml?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -45,6 +45,12 @@\n         <int name=\"z\" value=\"0\"/>\n       </canvas>\n     </imgdir>\n+    <imgdir name=\"event\">\n+      <imgdir name=\"0\">\n+        <int name=\"type\" value=\"101\"/>\n+        <int name=\"state\" value=\"1\"/>\n+      </imgdir>\n+    </imgdir>\n   </imgdir>\n   <imgdir name=\"1\">\n     <canvas name=\"0\" width=\"83\" height=\"143\">"}, {"sha": "2bc83b385f5a5460f976feae89ad50f6645b1ac1", "filename": "wz/String.wz/Npc.img.xml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/String.wz/Npc.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e0a27e00ab165c1f478acb0cc11b67301ebc2ec2/wz/String.wz/Npc.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/String.wz/Npc.img.xml?ref=e0a27e00ab165c1f478acb0cc11b67301ebc2ec2", "patch": "@@ -4175,7 +4175,7 @@\n   <imgdir name=\"2112004\">\n     <string name=\"name\" value=\"Romeo\"/>\n     <string name=\"s0\" value=\"Juliet...Please God keep her safe.\"/>\n-    <string name=\"s1\" value=\"Alcando and Zenumist...i didn&apos;t know how big the wall between them is...\"/>\n+    <string name=\"s1\" value=\"Alcadno and Zenumist...i didn&apos;t know how big the wall between them is...\"/>\n   </imgdir>\n   <imgdir name=\"2112005\">\n     <string name=\"name\" value=\"Juliet\"/>"}]}]},
