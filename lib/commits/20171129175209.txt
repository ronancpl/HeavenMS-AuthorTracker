{"fetchDate": "2019-12-19", "content": [{"sha": "e9ff338fe714d4e4c5b9dd12cbceac57442402f8", "node_id": "MDY6Q29tbWl0NDUwODIwMjM6ZTlmZjMzOGZlNzE0ZDRlNGM1YjlkZDEyY2JjZWFjNTc0NDI0MDJmOA==", "commit": {"author": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2017-11-29T17:52:09Z"}, "committer": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2017-11-29T17:52:09Z"}, "message": "Adding proper credits system\n\nAdded a script for visually improving credit view.\nTracked back the server sources before with respective owners. It possibly still needs to be updated.", "tree": {"sha": "31fe1bc703914d90bd8cfccda6c611bf8e53039f", "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/trees/31fe1bc703914d90bd8cfccda6c611bf8e53039f"}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/commits/e9ff338fe714d4e4c5b9dd12cbceac57442402f8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/e9ff338fe714d4e4c5b9dd12cbceac57442402f8", "html_url": "https://github.com/ronancpl/HeavenMS/commit/e9ff338fe714d4e4c5b9dd12cbceac57442402f8", "comments_url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/e9ff338fe714d4e4c5b9dd12cbceac57442402f8/comments", "author": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b9b0015e0003eaeb8b08d942b142ac137817403e", "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/b9b0015e0003eaeb8b08d942b142ac137817403e", "html_url": "https://github.com/ronancpl/HeavenMS/commit/b9b0015e0003eaeb8b08d942b142ac137817403e"}], "stats": {"total": 164, "additions": 145, "deletions": 19}, "files": [{"sha": "41b0f2ec40c5860ecd25bb98269e737506c2ab79", "filename": "scripts/npc/commands.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e9ff338fe714d4e4c5b9dd12cbceac57442402f8/scripts/npc/commands.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e9ff338fe714d4e4c5b9dd12cbceac57442402f8/scripts/npc/commands.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/commands.js?ref=e9ff338fe714d4e4c5b9dd12cbceac57442402f8", "patch": "@@ -198,7 +198,7 @@ function writeSolaxiaCommandsLv0() {    //Common\n \n         addCommand(\"commands\", \"\");\n         addCommand(\"time\", \"\");\n-        addCommand(\"staff\", \"\");\n+        addCommand(\"credits\", \"\");\n         addCommand(\"uptime\", \"\");\n         addCommand(\"gacha\", \"\");\n         addCommand(\"whatdropsfrom\", \"\");"}, {"sha": "8412c3ad532bc1702053631cb6fd27c0aeb6de68", "filename": "scripts/npc/credits.js", "status": "added", "additions": 138, "deletions": 0, "changes": 138, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e9ff338fe714d4e4c5b9dd12cbceac57442402f8/scripts/npc/credits.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e9ff338fe714d4e4c5b9dd12cbceac57442402f8/scripts/npc/credits.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/credits.js?ref=e9ff338fe714d4e4c5b9dd12cbceac57442402f8", "patch": "@@ -0,0 +1,138 @@\n+/* @Author Ronan\n+        Name: Heracle\n+        Map(s): Guild Headquarters\n+        Info: Hall of Fame\n+        Script: credits.js\n+*/\n+\n+var status;\n+\n+var name_tree = [];\n+var role_tree = [];\n+var name_cursor, role_cursor;\n+\n+var servers = [\"HeavenMS\", \"MapleSolaxia\", \"MoopleDEV\", \"MetroMS\", \"BubblesDEV\", \"ThePackII\", \"OdinMS\"];\n+var servers_history = [];\n+\n+function addPerson(name, role) {\n+        name_cursor.push(name);\n+        role_cursor.push(role);\n+}\n+\n+function setHistory(from, to) {\n+        servers_history.push([from, to]);\n+}\n+\n+function writeServerStaff_HeavenMS() {\n+        addPerson(\"Ronan\", \"Developer\");\n+        addPerson(\"Vcoc\", \"Freelance Developer\");\n+        \n+        setHistory(2015, 2017);\n+}\n+\n+function writeServerStaff_MapleSolaxia() {\n+        addPerson(\"Aria\", \"Administrator\");\n+        addPerson(\"Twdtwd\", \"Administrator\");\n+        addPerson(\"Exorcist\", \"Developer\");\n+        addPerson(\"SharpAceX\", \"Developer\");\n+        addPerson(\"Zygon\", \"Freelance Developer\");\n+        addPerson(\"SourMjolk\", \"Game Master\");\n+        addPerson(\"Kanade\", \"Game Master\");\n+        addPerson(\"Kitsune\", \"Game Master\");\n+        \n+        setHistory(2014, 2015);\n+}\n+\n+function writeServerStaff_MoopleDEV() {\n+        addPerson(\"kevintjuh93\", \"Developer\");\n+        setHistory(2010, 2010);\n+}\n+\n+function writeServerStaff_MetroMS() {\n+        addPerson(\"Moongra\", \"Developer\");\n+        setHistory(2009, 2010);\n+}\n+\n+function writeServerStaff_BubblesDEV() {\n+        addPerson(\"Deagan\", \"Developer\");\n+        setHistory(2009, 2009);\n+}\n+\n+function writeServerStaff_ThePackII() {\n+        addPerson(\"Hofer\", \"Developer\");\n+        setHistory(2008, 2009);\n+}\n+\n+function writeServerStaff_OdinMS() {\n+        addPerson(\"Serpendiem\", \"Developer\");\n+        setHistory(2007, 2008);\n+}\n+\n+function writeAllServerStaffs() {\n+        for(var i = 0; i < servers.length; i++) {\n+                name_cursor = [];\n+                role_cursor = [];\n+\n+                var srvName = servers[i];\n+                eval(\"writeServerStaff_\" + srvName)();  // make sure the server names are lexicograffically EQUALS to the correspondent function.\n+        \n+                name_tree.push(name_cursor);\n+                role_tree.push(role_cursor);\n+        }\n+}\n+\n+function start() {\n+        status = -1;\n+        writeAllServerStaffs();\n+        action(1, 0, 0);\n+}\n+\n+function action(mode, type, selection) {\n+        if (mode == -1) {\n+                cm.dispose();\n+        } else {\n+                if (mode == 0 && type > 0) {\n+                        cm.dispose();\n+                        return;\n+                }\n+                if (mode == 1)\n+                        status++;\n+                else\n+                        status--;\n+\n+                if (status == 0) {\n+                        var sendStr = \"There is the history tree of all participating parties on the build of this server:\\r\\n\\r\\n\";\n+                        for(var i = 0; i < servers.length; i++) {\n+                            var hist = servers_history[i];\n+                            \n+                            if(hist.length > 0) {\n+                                sendStr += \"#L\" + i + \"##b\" + servers[i] + \"#k  --  \" + ((hist[0] != hist[1]) ? hist[0] + \" ~ \" + hist[1] : hist[0]) + \"#l\\r\\n\";\n+                            } else {\n+                                sendStr += \"#L\" + i + \"#\" + servers[i] + \"#l\\r\\n\";\n+                            }\n+                        }\n+\n+                        cm.sendSimple(sendStr);\n+                } else if(status == 1) {\n+                        var lvName, lvRole;\n+\n+                        for(var i = 0; i < servers.length; i++) {\n+                            if(selection == i) {\n+                                lvName = name_tree[i];\n+                                lvRole = role_tree[i];\n+                                break;\n+                            }\n+                        }\n+\n+                        var sendStr = \"The staff of #b\" + servers[selection] + \"#k:\\r\\n\\r\\n\";\n+                        for(var i = 0; i < lvName.length; i++) {\n+                            sendStr += \"  #L\" + i + \"# \" + lvName[i] + \" - \" + lvRole[i];\n+                            sendStr += \"#l\\r\\n\";\n+                        }\n+\n+                        cm.sendPrev(sendStr);\n+                } else {\n+                        cm.dispose();\n+                }\n+        }\n+}"}, {"sha": "eacf7525891dca4232ecf150080446dbb50092b0", "filename": "src/client/MapleClient.java", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e9ff338fe714d4e4c5b9dd12cbceac57442402f8/src/client/MapleClient.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e9ff338fe714d4e4c5b9dd12cbceac57442402f8/src/client/MapleClient.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/MapleClient.java?ref=e9ff338fe714d4e4c5b9dd12cbceac57442402f8", "patch": "@@ -532,7 +532,7 @@ public int login(String login, String pwd) {\n \t\t\t\tif (getLoginState() > LOGIN_NOTLOGGEDIN) { // already loggedin\n \t\t\t\t\tloggedIn = false;\n \t\t\t\t\tloginok = 7;\n-\t\t\t\t} else if (pwd.charAt(0) == '$' && pwd.charAt(1) == '2' && BCrypt.checkpw(pwd, passhash)) {\n+\t\t\t\t} else if (passhash.charAt(0) == '$' && passhash.charAt(1) == '2' && BCrypt.checkpw(pwd, passhash)) {\n \t\t\t\t\tloginok = (tos == 0) ? 23 : 0;\n \t\t\t\t} else if (pwd.equals(passhash) || checkHash(passhash, \"SHA-1\", pwd) || checkHash(passhash, \"SHA-512\", pwd + salt)) {\n \t\t\t\t\tloginok = (tos == 0) ? -23 : -10; // migrate to bcrypt"}, {"sha": "d159f4e7315b97e2c594c138a8e2478b36238561", "filename": "src/client/command/Commands.java", "status": "modified", "additions": 3, "deletions": 14, "changes": 17, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e9ff338fe714d4e4c5b9dd12cbceac57442402f8/src/client/command/Commands.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e9ff338fe714d4e4c5b9dd12cbceac57442402f8/src/client/command/Commands.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/command/Commands.java?ref=e9ff338fe714d4e4c5b9dd12cbceac57442402f8", "patch": "@@ -355,21 +355,10 @@ public static boolean executeSolaxiaCommandLv0(Channel cserv, Server srv, MapleC\n \t\t\tdateFormat.setTimeZone(TimeZone.getTimeZone(ServerConstants.TIMEZONE));\n \t\t\tplayer.yellowMessage(\"Solaxia Server Time: \" + dateFormat.format(new Date()));\n \t\t\tbreak;\n-                    \n+                \n+                case \"credits\":\n \t\tcase \"staff\":\n-                        player.yellowMessage(\"HeavenMS (MapleSolaxiaV2) Staff\");\n-                        player.yellowMessage(\"Ronan - Developer\");\n-                        player.yellowMessage(\"Vcoc - Freelance Developer\");\n-                        player.yellowMessage(\"\");\n-\t\t\tplayer.yellowMessage(\"MapleSolaxia Staff\");\n-\t\t\tplayer.yellowMessage(\"Aria - Administrator\");\n-\t\t\tplayer.yellowMessage(\"Twdtwd - Administrator\");\n-\t\t\tplayer.yellowMessage(\"Exorcist - Developer\");\n-\t\t\tplayer.yellowMessage(\"SharpAceX - Developer\");\n-\t\t\tplayer.yellowMessage(\"Zygon - Freelance Developer\");\n-\t\t\tplayer.yellowMessage(\"SourMjolk - Game Master\");\n-\t\t\tplayer.yellowMessage(\"Kanade - Game Master\");\n-\t\t\tplayer.yellowMessage(\"Kitsune - Game Master\");\n+                        c.getAbstractPlayerInteraction().openNpc(2010007, \"credits\");\n \t\t\tbreak;\n                     \n \t\tcase \"lastrestart\":"}, {"sha": "9447960ad5c7caded04ec821376850ccbc2435cb", "filename": "src/net/server/handlers/login/LoginPasswordHandler.java", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/e9ff338fe714d4e4c5b9dd12cbceac57442402f8/src/net/server/handlers/login/LoginPasswordHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/e9ff338fe714d4e4c5b9dd12cbceac57442402f8/src/net/server/handlers/login/LoginPasswordHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/handlers/login/LoginPasswordHandler.java?ref=e9ff338fe714d4e4c5b9dd12cbceac57442402f8", "patch": "@@ -48,7 +48,6 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n \n         String login = slea.readMapleAsciiString();\n         String pwd = slea.readMapleAsciiString();\n-        String bcryptedpass = BCrypt.hashpw(pwd, BCrypt.gensalt(12));\n         c.setAccountName(login);\n \n         int loginok = c.login(login, pwd);\n@@ -61,7 +60,7 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                 con = DatabaseConnection.getConnection();\n                 ps = con.prepareStatement(\"INSERT INTO accounts (name, password) VALUES (?, ?);\");\n                 ps.setString(1, login);\n-                ps.setString(2, bcryptedpass);\n+                ps.setString(2, BCrypt.hashpw(pwd, BCrypt.gensalt(12)));\n                 ps.executeUpdate();\n             } catch (SQLException e) {\n                 e.printStackTrace();\n@@ -75,7 +74,7 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n             try {\n                 con = DatabaseConnection.getConnection();\n                 ps = con.prepareStatement(\"UPDATE accounts SET password = ? WHERE name = ?;\");\n-                ps.setString(1, bcryptedpass);\n+                ps.setString(1, BCrypt.hashpw(pwd, BCrypt.gensalt(12)));\n                 ps.setString(2, login);\n                 ps.executeUpdate();\n             } catch (SQLException e) {"}]}]},
