{"fetchDate": "2019-12-19", "content": [{"sha": "61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "node_id": "MDY6Q29tbWl0NDUwODIwMjM6NjEyOTJmNWM5YjZiZjAzZjBjZDJkNDViNjMyNGUzZDJjMDI2ODU0OA==", "commit": {"author": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2018-04-27T14:14:45Z"}, "committer": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2018-04-27T14:14:45Z"}, "message": "Medal quest system tweak + Proximity check on quests + DB leak fix\n\nRebalanced the EXTREMELY low level section of the equipment level up system.\nAdded support code for quests on Kerning Square and Mushroom Castle.\nAdded quest scripts for many missing scripted quests.\nRefactored medal quests, now using a default script system for uncoded medal questid's.\nFixed a DB leak regarding quest status and medal maps tables.\nAdded proximity check for NPCs to start/complete quests that doesn't use the lightbulb system.\nAdded \"debuff\" command, that debuffs people nearby.", "tree": {"sha": "051ca142cb385f428b2d2de93a5c8847b8fed219", "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/trees/051ca142cb385f428b2d2de93a5c8847b8fed219"}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/commits/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "html_url": "https://github.com/ronancpl/HeavenMS/commit/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "comments_url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/comments", "author": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7d448cce4f9360ed92decc4f5de78b7372f86bfb", "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/7d448cce4f9360ed92decc4f5de78b7372f86bfb", "html_url": "https://github.com/ronancpl/HeavenMS/commit/7d448cce4f9360ed92decc4f5de78b7372f86bfb"}], "stats": {"total": 1946, "additions": 965, "deletions": 981}, "files": [{"sha": "7c03a05e2a4a8266f248e7366e2b698ff9efbcc0", "filename": "docs/mychanges_ptbr.txt", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/docs/mychanges_ptbr.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/docs/mychanges_ptbr.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/docs/mychanges_ptbr.txt?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -885,4 +885,13 @@ Modificado sistema do chaos scroll, agora utilizando uma flag nova ao inv\u00e9s de\n Otimizado PlayerStorage, agora utilizando um mapa pr\u00f3prio de nomes, ao inv\u00e9s de realizar busca exaustiva no mapa de inteiros.\n Corrigido alguns aspectos do BalrogPQ, tais como a cabe\u00e7a sendo ating\u00edvel antes das m\u00e3os serem derrotadas e contador de kills do boss n\u00e3o subindo ao derrotr o chefe.\n Corrigido barras da tela de sele\u00e7\u00e3o de canais na etapa de login n\u00e3o atuando corretamente.\n-Adicionado checks de world server lotado de diversos pontos das etapas de login.\n\\ No newline at end of file\n+Adicionado checks de world server lotado de diversos pontos das etapas de login.\n+\n+26 Mar\u00e7o 2018,\n+Corrigido sistema de levelup ainda desbalanceado para o cen\u00e1rio EXTREMAMENTE low-level.\n+Adicionado suporte para quests de Kerning Square e Mushroom Castle.\n+Adicionado script para v\u00e1rias quests ainda n\u00e3o-scriptadas.\n+Refatorado medal quests, agora adotando um sistema de script default para aquelas n\u00e3o-scriptadas.\n+Adicionado comando \"debuff\", debuffando em \u00e1rea pr\u00f3ximo ao character que ativou o comando.\n+Corrigido vazamento de dados na DB referente \u00e0s informa\u00e7\u00f5es de quest status e medal maps dos jogadores.\n+Adicionado checagem de proximidade aos NPCs para come\u00e7ar e terminar quests sem lightbulb.\n\\ No newline at end of file"}, {"sha": "0430301e761f2daeab4df7412aac9cbc92c3885c", "filename": "docs/todo.txt", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/docs/todo.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/docs/todo.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/docs/todo.txt?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -41,6 +41,7 @@ ToDo / Missing features list:\n \n ---------------------------\n ** Skills **\n+Check autoban system\n ---------------------------\n \n "}, {"sha": "b92a1c10d3f6d519b8959a040f99a9fc549d00d1", "filename": "scripts/QUEST Base.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/QUEST%20Base.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/QUEST%20Base.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/QUEST%20Base.js?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -40,8 +40,8 @@ function start(mode, type, selection) {\n         \n         if (status == 0) {\n             qm.sendNext(\"Sample Text.\");\n+        } else if (status == 1) {\n             qm.forceStartQuest();\n-            \n             qm.dispose();\n         }\n     }\n@@ -63,8 +63,8 @@ function end(mode, type, selection) {\n         \n         if (status == 0) {\n             qm.sendNext(\"Sample Text.\");\n+        } else if (status == 1) {\n             qm.forceCompleteQuest();\n-            \n             qm.dispose();\n         }\n     }"}, {"sha": "e6636ee87ca9ddf3b1b8cd892417dabd2b19cc88", "filename": "scripts/event/RockSpiritVIP.js", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/event/RockSpiritVIP.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/event/RockSpiritVIP.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/RockSpiritVIP.js?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -35,7 +35,7 @@ function init() {\n }\n \n function setup() {\n-    var eim = em.newInstance(\"VIPRockSpirit_\" + em.getProperty(\"player\"));\n+    var eim = em.newInstance(\"RockSpiritVIP_\" + em.getProperty(\"player\"));\n     respawn(eim);\n     eim.startEventTimer(timer);    \n \treturn eim;", "previous_filename": "scripts/event/VIPRockSpirit.js"}, {"sha": "edd17e6b74e05dad9887f5231c1b9380bd6d19ea", "filename": "scripts/npc/1052125.js", "status": "modified", "additions": 6, "deletions": 7, "changes": 13, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/npc/1052125.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/npc/1052125.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1052125.js?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -57,13 +57,12 @@ function action(mode, type, selection) {\n     \t\t\tcm.sendOk(\"I did not hear anything from Blake that you are assisting him.\");  \n        \t\t}\n     \t} else {\n-    \t\tif (cm.isQuestCompleted(2291)) {\n-        \t\tvar rock = cm.getEventManager(\"VIPRockSpirit\");\n-        \t\trock.newInstance(\"VIPRockSpirit\");\n-        \t\trock.setProperty(\"player\", cm.getPlayer().getName());\n-        \t\trock.startInstance(cm.getPlayer());\n-    \t\t\tcm.dispose();\n-    \t\t\treturn;\n+    \t\tif (cm.isQuestCompleted(2290)) {\n+                        if(cm.getPlayer().getLevel() > 50) {\n+                                cm.sendOk(\"The VIP area is available only for players #rlevel 50 or below#k.\");\n+                        } else {\n+                                cm.sendOk(\"The VIP area is available via completing the #r'Admission to the VIP Zone'#k quest.\");\n+                        }\n                 } else {\n                         cm.sendOk(\"#rVIP#k? Yeah that is funny #rMr. VIP#k, now get lost before I call security.\"); \n                 }"}, {"sha": "31459e9c9440b59efd533d8b18692075d47efbac", "filename": "scripts/npc/commands.js", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/npc/commands.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/npc/commands.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/commands.js?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -102,6 +102,7 @@ function writeSolaxiaCommandsLv3() {    //GM\n         comm_cursor = comm_lv3;\n         desc_cursor = desc_lv3;\n \n+        addCommand(\"debuff\", \"\");\n         addCommand(\"fly\", \"\");\n         addCommand(\"spawn\", \"\");\n         addCommand(\"mutemap\", \"\");"}, {"sha": "001f9994b04cbf1a3bde5fb7bb63dab172e3916c", "filename": "scripts/npc/credits.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/npc/credits.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/npc/credits.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/credits.js?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -27,7 +27,7 @@ function writeServerStaff_HeavenMS() {\n         addPerson(\"Ronan\", \"Developer\");\n         addPerson(\"Vcoc\", \"Freelance Developer\");\n         \n-        setHistory(2015, 2017);\n+        setHistory(2015, 2018);\n }\n \n function writeServerStaff_MapleSolaxia() {"}, {"sha": "c663d154213f52d0567c739f899933dbc9466047", "filename": "scripts/portal/TD_MC_first.js", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/portal/TD_MC_first.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/portal/TD_MC_first.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/TD_MC_first.js?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -1,5 +1,6 @@\n function enter(pi) {\n-\tif (pi.isQuestStarted(2300) || pi.isQuestCompleted(2300) ||\n+\tif (pi.isQuestCompleted(2260) ||\n+                        pi.isQuestStarted(2300) || pi.isQuestCompleted(2300) ||\n                         pi.isQuestStarted(2301) || pi.isQuestCompleted(2301) || \n \t\t\tpi.isQuestStarted(2302) || pi.isQuestCompleted(2302) || \n \t\t\tpi.isQuestStarted(2303) || pi.isQuestCompleted(2303) ||"}, {"sha": "9db67dba5ddcf89333542e30770ec9b69fdb016b", "filename": "scripts/portal/curseforest.js", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/portal/curseforest.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/portal/curseforest.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/curseforest.js?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -1,5 +1,3 @@\n-importPackage(java.util);\n-\n function enter(pi) {\n     if(pi.isQuestStarted(2224) || pi.isQuestStarted(2226) || pi.isQuestCompleted(2227)) {\n         var hourDay = pi.getHourOfDay();"}, {"sha": "98c0285d211b1e495608207b44790c2cd1c6e4d2", "filename": "scripts/portal/dragonNest.js", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/portal/dragonNest.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/portal/dragonNest.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/dragonNest.js?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -20,6 +20,11 @@\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n function enter(pi) {\n-\tpi.playPortalSound(); pi.warp(240040611, \"out00\");\n+        if(!pi.isQuestCompleted(3706)) {\n+            pi.playPortalSound(); pi.warp(240040611, \"out00\");\n+        } else {\n+            pi.playPortalSound(); pi.warp(240040612, \"out00\");\n+        }\n+    \n \treturn true;\n }\n\\ No newline at end of file"}, {"sha": "2d5d1836eb2df8454f7cfbcb16f79c9390e90d6b", "filename": "scripts/portal/tristanEnter.js", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/portal/tristanEnter.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/portal/tristanEnter.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/tristanEnter.js?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -1,4 +1,9 @@\n function enter(pi) {\n-    pi.playPortalSound(); pi.warp(105100101, \"in00\");\n-    return true;\n+    if(pi.isQuestCompleted(2238)) {\n+        pi.playPortalSound(); pi.warp(105100101, \"in00\");\n+        return true;\n+    } else {\n+        pi.message(\"A mysterious force won't let you in.\");\n+        return false;\n+    }\n }\n\\ No newline at end of file"}, {"sha": "c0e328a180862032061ac19c589c5870def08ded", "filename": "scripts/quest/2238.js", "status": "modified", "additions": 2, "deletions": 19, "changes": 21, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/quest/2238.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/quest/2238.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2238.js?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -35,25 +35,8 @@ function start(mode, type, selection) {\n             status--;\n         \n         if (status == 0) {\n-            em = qm.getEventManager(\"BalrogQuest\");\n-            if (em == null) {\n-                qm.sendOk(\"Sorry, but the BalrogQuest is closed.\");\n-                qm.dispose();\n-                return;\n-            }\n-            \n-            if (em.getProperty(\"noEntry\") == \"false\") {\n-                var eim = em.newInstance(\"BalrogQuest\");\n-                eim.registerPlayer(qm.getPlayer());\n-                eim.startEvent();\n-\n-                qm.forceStartQuest();\n-                qm.dispose();\n-            }\n-            else {\n-                qm.sendOk(\"There is currently someone in this map, come back later.\");\n-                qm.dispose();\n-            }\n+            qm.forceStartQuest();\n+            qm.dispose();\n         }\n     }\n }"}, {"sha": "a84500cf391f9ba080240fbd7f431613e3a037a8", "filename": "scripts/quest/2245.js", "status": "added", "additions": 58, "deletions": 0, "changes": 58, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/quest/2245.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/quest/2245.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2245.js?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -0,0 +1,58 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+var status = -1;\n+\n+function start(mode, type, selection) {\n+    if (mode == -1) {\n+        qm.dispose();\n+    } else {\n+        if(mode == 0 && type > 0) {\n+            qm.dispose();\n+            return;\n+        }\n+        \n+        if (mode == 1)\n+            status++;\n+        else\n+            status--;\n+        \n+        if (status == 0) {\n+            em = qm.getEventManager(\"BalrogQuest\");\n+            if (em == null) {\n+                qm.sendOk(\"Sorry, but the BalrogQuest is closed.\");\n+                qm.dispose();\n+                return;\n+            }\n+            \n+            if (em.getProperty(\"noEntry\") == \"false\") {\n+                var eim = em.newInstance(\"BalrogQuest\");\n+                eim.registerPlayer(qm.getPlayer());\n+                eim.startEvent();\n+\n+                qm.dispose();\n+            }\n+            else {\n+                qm.sendOk(\"There is currently someone in this map, come back later.\");\n+                qm.dispose();\n+            }\n+        }\n+    }\n+}"}, {"sha": "4fd5bc1ae86d88dacbca25ea68ca95183749ab67", "filename": "scripts/quest/2257.js", "status": "renamed", "additions": 22, "deletions": 17, "changes": 39, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/quest/2257.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/quest/2257.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2257.js?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -1,8 +1,6 @@\n /*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n-\t\t       Matthias Butz <matze@odinms.de>\n-\t\t       Jan Christian Meyer <vimes@odinms.de>\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as\n@@ -19,21 +17,28 @@\n     You should have received a copy of the GNU Affero General Public License\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n-/*\t\n-\tAuthor : \t\tRonan Lana\n-\tDescription: \t\tWildcard medals\n-\tQuest ID : \t\t-----\n-*/\n \n var status = -1;\n \n-function start(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n-\n-\n function end(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n+    if (mode == -1) {\n+        qm.dispose();\n+    } else {\n+        if(mode == 0 && type > 0) {\n+            qm.dispose();\n+            return;\n+        }\n+        \n+        if (mode == 1)\n+            status++;\n+        else\n+            status--;\n+        \n+        if (status == 0) {\n+            qm.sendNext(\"Hey there, do you want a ride to #r#m261000000##k? Oh a request from #b#p2101013##k?\");\n+        } else {\n+            qm.forceCompleteQuest();\n+            qm.dispose();\n+        }\n+    }\n }\n\\ No newline at end of file", "previous_filename": "scripts/quest/29911.js"}, {"sha": "976533567203169e3ef23d393e5a8d465af7783c", "filename": "scripts/quest/2258.js", "status": "added", "additions": 69, "deletions": 0, "changes": 69, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/quest/2258.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/quest/2258.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2258.js?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -0,0 +1,69 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+var status = -1;\n+\n+function start(mode, type, selection) {\n+    if (mode == -1) {\n+        qm.dispose();\n+    } else {\n+        if(mode == 0 && type > 0) {\n+            qm.dispose();\n+            return;\n+        }\n+        \n+        if (mode == 1)\n+            status++;\n+        else\n+            status--;\n+        \n+        if (status == 0) {\n+            qm.sendAcceptDecline(\"Meerkats spreads rumors like wildfire... By blackmailing me and my cab service, they are taking costumers away from me day after day... Hey, tell no one about this, if you clean some #rMeerkats#k from my way, I'll tell you an info about the #rMushroom Castle#k. What do you say?\");\n+        } else if (status == 1) {\n+            qm.sendNext(\"Great, they you have #r5 minutes#k to kill #b40 Meerkats#k within this time. Good luck!\");\n+        } else {\n+            qm.forceStartQuest();\n+            qm.dispose();\n+        }\n+    }\n+}\n+\n+function end(mode, type, selection) {\n+    if (mode == -1) {\n+        qm.dispose();\n+    } else {\n+        if(mode == 0 && type > 0) {\n+            qm.dispose();\n+            return;\n+        }\n+        \n+        if (mode == 1)\n+            status++;\n+        else\n+            status--;\n+        \n+        if (status == 0) {\n+            qm.sendNext(\"You did it! ... Hey, #rMeerkats#k around here may listen to our conversation. I'm not going to talk about THAT right now.\");\n+        } else {\n+            qm.forceCompleteQuest();\n+            qm.dispose();\n+        }\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "a3bba3acbf0c49241f27e7c4f03f7aed2139e925", "filename": "scripts/quest/2259.js", "status": "added", "additions": 73, "deletions": 0, "changes": 73, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/quest/2259.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/quest/2259.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2259.js?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -0,0 +1,73 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+var status = -1;\n+\n+function start(mode, type, selection) {\n+    if (mode == -1) {\n+        qm.dispose();\n+    } else {\n+        if(mode == 0 && type > 0) {\n+            qm.dispose();\n+            return;\n+        }\n+        \n+        if (mode == 1)\n+            status++;\n+        else\n+            status--;\n+        \n+        if (status == 0) {\n+            qm.sendNext(\"Ok, meet me at #b#m260020700##k for your information. To reach there, follow #reast#k from here until you reach #rMagatia#k, I will be there. Now go.\");\n+        } else {\n+            qm.forceStartQuest();\n+            qm.dispose();\n+        }\n+    }\n+}\n+\n+function end(mode, type, selection) {\n+    if (mode == -1) {\n+        qm.dispose();\n+    } else {\n+        if(mode == 0 && type > 0) {\n+            qm.dispose();\n+            return;\n+        }\n+        \n+        if (mode == 1)\n+            status++;\n+        else\n+            status--;\n+        \n+        if (status == 0) {\n+            if(qm.getMapId() == 260020000) {\n+                qm.sendNext(\"Eh you're still here? To reach #b#m260020700##k, follow #reast#k from here until you reach #rMagatia#k, I will be there. Now go.\");\n+                qm.dispose();\n+                return;\n+            }\n+            \n+            qm.sendNext(\"Oh there you are. There're no Meerkat's nearby, so there probably is no eavesdropping around here. Very well, you must be fit to go to the #rMushroom Castle#k. Talk to me once you've got #blevel 30#k.\");\n+        } else {\n+            qm.forceCompleteQuest();\n+            qm.dispose();\n+        }\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "0b6ad48d924fb085319ef6e5c6191eb7f1739ce0", "filename": "scripts/quest/2260.js", "status": "added", "additions": 75, "deletions": 0, "changes": 75, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/quest/2260.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/quest/2260.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2260.js?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -0,0 +1,75 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+importPackage(Packages.constants);\n+\n+var status = -1;\n+\n+function start(mode, type, selection) {\n+    if (mode == -1) {\n+        qm.dispose();\n+    } else {\n+        if(mode == 0 && type > 0) {\n+            qm.dispose();\n+            return;\n+        }\n+        \n+        if (mode == 1)\n+            status++;\n+        else\n+            status--;\n+        \n+        if (status == 0) {\n+            qm.sendNext(\"Once you've got #b2nd job advancement#k, I'll tell you about the #bMushroom Castle#k.\");\n+        } else {\n+            qm.forceStartQuest();\n+            qm.dispose();\n+        }\n+    }\n+}\n+\n+function end(mode, type, selection) {\n+    if (mode == -1) {\n+        qm.dispose();\n+    } else {\n+        if(mode == 0 && type > 0) {\n+            qm.dispose();\n+            return;\n+        }\n+        \n+        if (mode == 1)\n+            status++;\n+        else\n+            status--;\n+        \n+        if (status == 0) {\n+            if(GameConstants.getJobBranch(qm.getPlayer().getJob()) == 1) {\n+                qm.sendNext(\"Eh, didn't you get the #r2nd job advancement#k yet?\");\n+                qm.dispose();\n+                return;\n+            }\n+            \n+            qm.sendNext(\"Okay you seem ready to go to the #bMushroom Castle#k. In #rHenesys#k, climb at the tree fort at #bwest#k then enter a portal over there. On the other area, #rgo west#k. From there, a portal will be readily available to access the #bMushroom Castle#k area.\");\n+        } else {\n+            qm.forceCompleteQuest();\n+            qm.dispose();\n+        }\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "33c5d4f35668570d67142385214153cfe9c594ef", "filename": "scripts/quest/2291.js", "status": "added", "additions": 57, "deletions": 0, "changes": 57, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/quest/2291.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/quest/2291.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2291.js?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -0,0 +1,57 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+var status = -1;\n+\n+function end(mode, type, selection) {\n+    if (mode == -1) {\n+        qm.dispose();\n+    } else {\n+        if(mode == 0 && type > 0) {\n+            qm.dispose();\n+            return;\n+        }\n+        \n+        if (mode == 1)\n+            status++;\n+        else\n+            status--;\n+        \n+        if (status == 0) {\n+            if(!qm.haveItem(4032521, 10)) {\n+                qm.sendNext(\"Hey, you didn't get #b10 #t4032521##k yet, did you?\");\n+                qm.dispose();\n+                return;\n+            }\n+            \n+            qm.sendNext(\"You got the #b#i4032521##k with you, great. Let me show you the way.\");\n+        } else if (status == 1) {\n+            qm.gainItem(4032521, -10);\n+            \n+            var rock = qm.getEventManager(\"RockSpiritVIP\");\n+            rock.newInstance(\"RockSpiritVIP\");\n+            rock.setProperty(\"player\", qm.getPlayer().getName());\n+            rock.startInstance(qm.getPlayer());\n+            \n+            qm.forceCompleteQuest();\n+            qm.dispose();\n+        }\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "e267b20ff7264a3309a5cfa1fc2c97c7245dc047", "filename": "scripts/quest/2338.js", "status": "added", "additions": 56, "deletions": 0, "changes": 56, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/quest/2338.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/quest/2338.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2338.js?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -0,0 +1,56 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+var status = -1;\n+\n+function start(mode, type, selection) {\n+    if (mode == -1) {\n+        qm.dispose();\n+    } else {\n+        if(mode == 0 && type > 0) {\n+            qm.dispose();\n+            return;\n+        }\n+        \n+        if (mode == 1)\n+            status++;\n+        else\n+            status--;\n+        \n+        if (status == 0) {\n+            if(qm.haveItem(2430014, 1)) {\n+                qm.sendNext(\"It looks like you already have one #b#t2430014##k on your inventory.\");\n+                qm.dispose();\n+                return;\n+            }\n+            \n+            qm.sendNext(\"You've used the #b#t2430014##k? Oh well, good thing I have a spare one right here.\");\n+        } else if (status == 1) {\n+            if(!qm.canHold(2430014, 1)) {\n+                qm.sendNext(\"Please make a USE slot available to get it, alright?\");\n+            } else {\n+                qm.gainItem(2430014, 1);\n+                qm.forceCompleteQuest();\n+            }\n+            \n+            qm.dispose();\n+        }\n+    }\n+}"}, {"sha": "76e264cd8fbf3f755df2fd360f152e69b8f16ff2", "filename": "scripts/quest/29905.js", "status": "removed", "additions": 0, "deletions": 39, "changes": 39, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29905.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29905.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/29905.js?ref=7d448cce4f9360ed92decc4f5de78b7372f86bfb", "patch": "@@ -1,39 +0,0 @@\n-/*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n-\t\t       Matthias Butz <matze@odinms.de>\n-\t\t       Jan Christian Meyer <vimes@odinms.de>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License as\n-    published by the Free Software Foundation version 3 as published by\n-    the Free Software Foundation. You may not use, modify or distribute\n-    this program under any other version of the GNU Affero General Public\n-    License.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU Affero General Public License for more details.\n-\n-    You should have received a copy of the GNU Affero General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-*/\n-/*\t\n-\tAuthor : \t\tRonan Lana\n-\tDescription: \t\tWildcard medals\n-\tQuest ID : \t\t-----\n-*/\n-\n-var status = -1;\n-\n-function start(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n-\n-\n-function end(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n\\ No newline at end of file"}, {"sha": "76e264cd8fbf3f755df2fd360f152e69b8f16ff2", "filename": "scripts/quest/29910.js", "status": "removed", "additions": 0, "deletions": 39, "changes": 39, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29910.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29910.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/29910.js?ref=7d448cce4f9360ed92decc4f5de78b7372f86bfb", "patch": "@@ -1,39 +0,0 @@\n-/*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n-\t\t       Matthias Butz <matze@odinms.de>\n-\t\t       Jan Christian Meyer <vimes@odinms.de>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License as\n-    published by the Free Software Foundation version 3 as published by\n-    the Free Software Foundation. You may not use, modify or distribute\n-    this program under any other version of the GNU Affero General Public\n-    License.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU Affero General Public License for more details.\n-\n-    You should have received a copy of the GNU Affero General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-*/\n-/*\t\n-\tAuthor : \t\tRonan Lana\n-\tDescription: \t\tWildcard medals\n-\tQuest ID : \t\t-----\n-*/\n-\n-var status = -1;\n-\n-function start(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n-\n-\n-function end(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n\\ No newline at end of file"}, {"sha": "76e264cd8fbf3f755df2fd360f152e69b8f16ff2", "filename": "scripts/quest/29912.js", "status": "removed", "additions": 0, "deletions": 39, "changes": 39, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29912.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29912.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/29912.js?ref=7d448cce4f9360ed92decc4f5de78b7372f86bfb", "patch": "@@ -1,39 +0,0 @@\n-/*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n-\t\t       Matthias Butz <matze@odinms.de>\n-\t\t       Jan Christian Meyer <vimes@odinms.de>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License as\n-    published by the Free Software Foundation version 3 as published by\n-    the Free Software Foundation. You may not use, modify or distribute\n-    this program under any other version of the GNU Affero General Public\n-    License.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU Affero General Public License for more details.\n-\n-    You should have received a copy of the GNU Affero General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-*/\n-/*\t\n-\tAuthor : \t\tRonan Lana\n-\tDescription: \t\tWildcard medals\n-\tQuest ID : \t\t-----\n-*/\n-\n-var status = -1;\n-\n-function start(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n-\n-\n-function end(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n\\ No newline at end of file"}, {"sha": "76e264cd8fbf3f755df2fd360f152e69b8f16ff2", "filename": "scripts/quest/29913.js", "status": "removed", "additions": 0, "deletions": 39, "changes": 39, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29913.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29913.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/29913.js?ref=7d448cce4f9360ed92decc4f5de78b7372f86bfb", "patch": "@@ -1,39 +0,0 @@\n-/*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n-\t\t       Matthias Butz <matze@odinms.de>\n-\t\t       Jan Christian Meyer <vimes@odinms.de>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License as\n-    published by the Free Software Foundation version 3 as published by\n-    the Free Software Foundation. You may not use, modify or distribute\n-    this program under any other version of the GNU Affero General Public\n-    License.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU Affero General Public License for more details.\n-\n-    You should have received a copy of the GNU Affero General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-*/\n-/*\t\n-\tAuthor : \t\tRonan Lana\n-\tDescription: \t\tWildcard medals\n-\tQuest ID : \t\t-----\n-*/\n-\n-var status = -1;\n-\n-function start(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n-\n-\n-function end(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n\\ No newline at end of file"}, {"sha": "76e264cd8fbf3f755df2fd360f152e69b8f16ff2", "filename": "scripts/quest/29914.js", "status": "removed", "additions": 0, "deletions": 39, "changes": 39, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29914.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29914.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/29914.js?ref=7d448cce4f9360ed92decc4f5de78b7372f86bfb", "patch": "@@ -1,39 +0,0 @@\n-/*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n-\t\t       Matthias Butz <matze@odinms.de>\n-\t\t       Jan Christian Meyer <vimes@odinms.de>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License as\n-    published by the Free Software Foundation version 3 as published by\n-    the Free Software Foundation. You may not use, modify or distribute\n-    this program under any other version of the GNU Affero General Public\n-    License.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU Affero General Public License for more details.\n-\n-    You should have received a copy of the GNU Affero General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-*/\n-/*\t\n-\tAuthor : \t\tRonan Lana\n-\tDescription: \t\tWildcard medals\n-\tQuest ID : \t\t-----\n-*/\n-\n-var status = -1;\n-\n-function start(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n-\n-\n-function end(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n\\ No newline at end of file"}, {"sha": "76e264cd8fbf3f755df2fd360f152e69b8f16ff2", "filename": "scripts/quest/29915.js", "status": "removed", "additions": 0, "deletions": 39, "changes": 39, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29915.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29915.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/29915.js?ref=7d448cce4f9360ed92decc4f5de78b7372f86bfb", "patch": "@@ -1,39 +0,0 @@\n-/*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n-\t\t       Matthias Butz <matze@odinms.de>\n-\t\t       Jan Christian Meyer <vimes@odinms.de>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License as\n-    published by the Free Software Foundation version 3 as published by\n-    the Free Software Foundation. You may not use, modify or distribute\n-    this program under any other version of the GNU Affero General Public\n-    License.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU Affero General Public License for more details.\n-\n-    You should have received a copy of the GNU Affero General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-*/\n-/*\t\n-\tAuthor : \t\tRonan Lana\n-\tDescription: \t\tWildcard medals\n-\tQuest ID : \t\t-----\n-*/\n-\n-var status = -1;\n-\n-function start(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n-\n-\n-function end(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n\\ No newline at end of file"}, {"sha": "76e264cd8fbf3f755df2fd360f152e69b8f16ff2", "filename": "scripts/quest/29916.js", "status": "removed", "additions": 0, "deletions": 39, "changes": 39, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29916.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29916.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/29916.js?ref=7d448cce4f9360ed92decc4f5de78b7372f86bfb", "patch": "@@ -1,39 +0,0 @@\n-/*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n-\t\t       Matthias Butz <matze@odinms.de>\n-\t\t       Jan Christian Meyer <vimes@odinms.de>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License as\n-    published by the Free Software Foundation version 3 as published by\n-    the Free Software Foundation. You may not use, modify or distribute\n-    this program under any other version of the GNU Affero General Public\n-    License.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU Affero General Public License for more details.\n-\n-    You should have received a copy of the GNU Affero General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-*/\n-/*\t\n-\tAuthor : \t\tRonan Lana\n-\tDescription: \t\tWildcard medals\n-\tQuest ID : \t\t-----\n-*/\n-\n-var status = -1;\n-\n-function start(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n-\n-\n-function end(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n\\ No newline at end of file"}, {"sha": "76e264cd8fbf3f755df2fd360f152e69b8f16ff2", "filename": "scripts/quest/29917.js", "status": "removed", "additions": 0, "deletions": 39, "changes": 39, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29917.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29917.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/29917.js?ref=7d448cce4f9360ed92decc4f5de78b7372f86bfb", "patch": "@@ -1,39 +0,0 @@\n-/*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n-\t\t       Matthias Butz <matze@odinms.de>\n-\t\t       Jan Christian Meyer <vimes@odinms.de>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License as\n-    published by the Free Software Foundation version 3 as published by\n-    the Free Software Foundation. You may not use, modify or distribute\n-    this program under any other version of the GNU Affero General Public\n-    License.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU Affero General Public License for more details.\n-\n-    You should have received a copy of the GNU Affero General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-*/\n-/*\t\n-\tAuthor : \t\tRonan Lana\n-\tDescription: \t\tWildcard medals\n-\tQuest ID : \t\t-----\n-*/\n-\n-var status = -1;\n-\n-function start(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n-\n-\n-function end(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n\\ No newline at end of file"}, {"sha": "76e264cd8fbf3f755df2fd360f152e69b8f16ff2", "filename": "scripts/quest/29918.js", "status": "removed", "additions": 0, "deletions": 39, "changes": 39, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29918.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29918.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/29918.js?ref=7d448cce4f9360ed92decc4f5de78b7372f86bfb", "patch": "@@ -1,39 +0,0 @@\n-/*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n-\t\t       Matthias Butz <matze@odinms.de>\n-\t\t       Jan Christian Meyer <vimes@odinms.de>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License as\n-    published by the Free Software Foundation version 3 as published by\n-    the Free Software Foundation. You may not use, modify or distribute\n-    this program under any other version of the GNU Affero General Public\n-    License.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU Affero General Public License for more details.\n-\n-    You should have received a copy of the GNU Affero General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-*/\n-/*\t\n-\tAuthor : \t\tRonan Lana\n-\tDescription: \t\tWildcard medals\n-\tQuest ID : \t\t-----\n-*/\n-\n-var status = -1;\n-\n-function start(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n-\n-\n-function end(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n\\ No newline at end of file"}, {"sha": "76e264cd8fbf3f755df2fd360f152e69b8f16ff2", "filename": "scripts/quest/29919.js", "status": "removed", "additions": 0, "deletions": 39, "changes": 39, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29919.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29919.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/29919.js?ref=7d448cce4f9360ed92decc4f5de78b7372f86bfb", "patch": "@@ -1,39 +0,0 @@\n-/*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n-\t\t       Matthias Butz <matze@odinms.de>\n-\t\t       Jan Christian Meyer <vimes@odinms.de>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License as\n-    published by the Free Software Foundation version 3 as published by\n-    the Free Software Foundation. You may not use, modify or distribute\n-    this program under any other version of the GNU Affero General Public\n-    License.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU Affero General Public License for more details.\n-\n-    You should have received a copy of the GNU Affero General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-*/\n-/*\t\n-\tAuthor : \t\tRonan Lana\n-\tDescription: \t\tWildcard medals\n-\tQuest ID : \t\t-----\n-*/\n-\n-var status = -1;\n-\n-function start(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n-\n-\n-function end(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n\\ No newline at end of file"}, {"sha": "76e264cd8fbf3f755df2fd360f152e69b8f16ff2", "filename": "scripts/quest/29920.js", "status": "removed", "additions": 0, "deletions": 39, "changes": 39, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29920.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29920.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/29920.js?ref=7d448cce4f9360ed92decc4f5de78b7372f86bfb", "patch": "@@ -1,39 +0,0 @@\n-/*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n-\t\t       Matthias Butz <matze@odinms.de>\n-\t\t       Jan Christian Meyer <vimes@odinms.de>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License as\n-    published by the Free Software Foundation version 3 as published by\n-    the Free Software Foundation. You may not use, modify or distribute\n-    this program under any other version of the GNU Affero General Public\n-    License.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU Affero General Public License for more details.\n-\n-    You should have received a copy of the GNU Affero General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-*/\n-/*\t\n-\tAuthor : \t\tRonan Lana\n-\tDescription: \t\tWildcard medals\n-\tQuest ID : \t\t-----\n-*/\n-\n-var status = -1;\n-\n-function start(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n-\n-\n-function end(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n\\ No newline at end of file"}, {"sha": "76e264cd8fbf3f755df2fd360f152e69b8f16ff2", "filename": "scripts/quest/29921.js", "status": "removed", "additions": 0, "deletions": 39, "changes": 39, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29921.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29921.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/29921.js?ref=7d448cce4f9360ed92decc4f5de78b7372f86bfb", "patch": "@@ -1,39 +0,0 @@\n-/*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n-\t\t       Matthias Butz <matze@odinms.de>\n-\t\t       Jan Christian Meyer <vimes@odinms.de>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License as\n-    published by the Free Software Foundation version 3 as published by\n-    the Free Software Foundation. You may not use, modify or distribute\n-    this program under any other version of the GNU Affero General Public\n-    License.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU Affero General Public License for more details.\n-\n-    You should have received a copy of the GNU Affero General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-*/\n-/*\t\n-\tAuthor : \t\tRonan Lana\n-\tDescription: \t\tWildcard medals\n-\tQuest ID : \t\t-----\n-*/\n-\n-var status = -1;\n-\n-function start(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n-\n-\n-function end(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n\\ No newline at end of file"}, {"sha": "76e264cd8fbf3f755df2fd360f152e69b8f16ff2", "filename": "scripts/quest/29922.js", "status": "removed", "additions": 0, "deletions": 39, "changes": 39, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29922.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29922.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/29922.js?ref=7d448cce4f9360ed92decc4f5de78b7372f86bfb", "patch": "@@ -1,39 +0,0 @@\n-/*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n-\t\t       Matthias Butz <matze@odinms.de>\n-\t\t       Jan Christian Meyer <vimes@odinms.de>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License as\n-    published by the Free Software Foundation version 3 as published by\n-    the Free Software Foundation. You may not use, modify or distribute\n-    this program under any other version of the GNU Affero General Public\n-    License.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU Affero General Public License for more details.\n-\n-    You should have received a copy of the GNU Affero General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-*/\n-/*\t\n-\tAuthor : \t\tRonan Lana\n-\tDescription: \t\tWildcard medals\n-\tQuest ID : \t\t-----\n-*/\n-\n-var status = -1;\n-\n-function start(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n-\n-\n-function end(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n\\ No newline at end of file"}, {"sha": "76e264cd8fbf3f755df2fd360f152e69b8f16ff2", "filename": "scripts/quest/29923.js", "status": "removed", "additions": 0, "deletions": 39, "changes": 39, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29923.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29923.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/29923.js?ref=7d448cce4f9360ed92decc4f5de78b7372f86bfb", "patch": "@@ -1,39 +0,0 @@\n-/*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n-\t\t       Matthias Butz <matze@odinms.de>\n-\t\t       Jan Christian Meyer <vimes@odinms.de>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License as\n-    published by the Free Software Foundation version 3 as published by\n-    the Free Software Foundation. You may not use, modify or distribute\n-    this program under any other version of the GNU Affero General Public\n-    License.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU Affero General Public License for more details.\n-\n-    You should have received a copy of the GNU Affero General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-*/\n-/*\t\n-\tAuthor : \t\tRonan Lana\n-\tDescription: \t\tWildcard medals\n-\tQuest ID : \t\t-----\n-*/\n-\n-var status = -1;\n-\n-function start(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n-\n-\n-function end(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n\\ No newline at end of file"}, {"sha": "76e264cd8fbf3f755df2fd360f152e69b8f16ff2", "filename": "scripts/quest/29927.js", "status": "removed", "additions": 0, "deletions": 39, "changes": 39, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29927.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29927.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/29927.js?ref=7d448cce4f9360ed92decc4f5de78b7372f86bfb", "patch": "@@ -1,39 +0,0 @@\n-/*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n-\t\t       Matthias Butz <matze@odinms.de>\n-\t\t       Jan Christian Meyer <vimes@odinms.de>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License as\n-    published by the Free Software Foundation version 3 as published by\n-    the Free Software Foundation. You may not use, modify or distribute\n-    this program under any other version of the GNU Affero General Public\n-    License.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU Affero General Public License for more details.\n-\n-    You should have received a copy of the GNU Affero General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-*/\n-/*\t\n-\tAuthor : \t\tRonan Lana\n-\tDescription: \t\tWildcard medals\n-\tQuest ID : \t\t-----\n-*/\n-\n-var status = -1;\n-\n-function start(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n-\n-\n-function end(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n\\ No newline at end of file"}, {"sha": "76e264cd8fbf3f755df2fd360f152e69b8f16ff2", "filename": "scripts/quest/29929.js", "status": "removed", "additions": 0, "deletions": 39, "changes": 39, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29929.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29929.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/29929.js?ref=7d448cce4f9360ed92decc4f5de78b7372f86bfb", "patch": "@@ -1,39 +0,0 @@\n-/*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n-\t\t       Matthias Butz <matze@odinms.de>\n-\t\t       Jan Christian Meyer <vimes@odinms.de>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License as\n-    published by the Free Software Foundation version 3 as published by\n-    the Free Software Foundation. You may not use, modify or distribute\n-    this program under any other version of the GNU Affero General Public\n-    License.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU Affero General Public License for more details.\n-\n-    You should have received a copy of the GNU Affero General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-*/\n-/*\t\n-\tAuthor : \t\tRonan Lana\n-\tDescription: \t\tWildcard medals\n-\tQuest ID : \t\t-----\n-*/\n-\n-var status = -1;\n-\n-function start(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n-\n-\n-function end(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n\\ No newline at end of file"}, {"sha": "76e264cd8fbf3f755df2fd360f152e69b8f16ff2", "filename": "scripts/quest/29930.js", "status": "removed", "additions": 0, "deletions": 39, "changes": 39, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29930.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29930.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/29930.js?ref=7d448cce4f9360ed92decc4f5de78b7372f86bfb", "patch": "@@ -1,39 +0,0 @@\n-/*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n-\t\t       Matthias Butz <matze@odinms.de>\n-\t\t       Jan Christian Meyer <vimes@odinms.de>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License as\n-    published by the Free Software Foundation version 3 as published by\n-    the Free Software Foundation. You may not use, modify or distribute\n-    this program under any other version of the GNU Affero General Public\n-    License.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU Affero General Public License for more details.\n-\n-    You should have received a copy of the GNU Affero General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-*/\n-/*\t\n-\tAuthor : \t\tRonan Lana\n-\tDescription: \t\tWildcard medals\n-\tQuest ID : \t\t-----\n-*/\n-\n-var status = -1;\n-\n-function start(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n-\n-\n-function end(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n\\ No newline at end of file"}, {"sha": "76e264cd8fbf3f755df2fd360f152e69b8f16ff2", "filename": "scripts/quest/29931.js", "status": "removed", "additions": 0, "deletions": 39, "changes": 39, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29931.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29931.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/29931.js?ref=7d448cce4f9360ed92decc4f5de78b7372f86bfb", "patch": "@@ -1,39 +0,0 @@\n-/*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n-\t\t       Matthias Butz <matze@odinms.de>\n-\t\t       Jan Christian Meyer <vimes@odinms.de>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License as\n-    published by the Free Software Foundation version 3 as published by\n-    the Free Software Foundation. You may not use, modify or distribute\n-    this program under any other version of the GNU Affero General Public\n-    License.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU Affero General Public License for more details.\n-\n-    You should have received a copy of the GNU Affero General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-*/\n-/*\t\n-\tAuthor : \t\tRonan Lana\n-\tDescription: \t\tWildcard medals\n-\tQuest ID : \t\t-----\n-*/\n-\n-var status = -1;\n-\n-function start(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n-\n-\n-function end(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n\\ No newline at end of file"}, {"sha": "76e264cd8fbf3f755df2fd360f152e69b8f16ff2", "filename": "scripts/quest/29932.js", "status": "removed", "additions": 0, "deletions": 39, "changes": 39, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29932.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29932.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/29932.js?ref=7d448cce4f9360ed92decc4f5de78b7372f86bfb", "patch": "@@ -1,39 +0,0 @@\n-/*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n-\t\t       Matthias Butz <matze@odinms.de>\n-\t\t       Jan Christian Meyer <vimes@odinms.de>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License as\n-    published by the Free Software Foundation version 3 as published by\n-    the Free Software Foundation. You may not use, modify or distribute\n-    this program under any other version of the GNU Affero General Public\n-    License.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU Affero General Public License for more details.\n-\n-    You should have received a copy of the GNU Affero General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-*/\n-/*\t\n-\tAuthor : \t\tRonan Lana\n-\tDescription: \t\tWildcard medals\n-\tQuest ID : \t\t-----\n-*/\n-\n-var status = -1;\n-\n-function start(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n-\n-\n-function end(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n\\ No newline at end of file"}, {"sha": "76e264cd8fbf3f755df2fd360f152e69b8f16ff2", "filename": "scripts/quest/29933.js", "status": "removed", "additions": 0, "deletions": 39, "changes": 39, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29933.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/7d448cce4f9360ed92decc4f5de78b7372f86bfb/scripts/quest/29933.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/29933.js?ref=7d448cce4f9360ed92decc4f5de78b7372f86bfb", "patch": "@@ -1,39 +0,0 @@\n-/*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n-\t\t       Matthias Butz <matze@odinms.de>\n-\t\t       Jan Christian Meyer <vimes@odinms.de>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License as\n-    published by the Free Software Foundation version 3 as published by\n-    the Free Software Foundation. You may not use, modify or distribute\n-    this program under any other version of the GNU Affero General Public\n-    License.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU Affero General Public License for more details.\n-\n-    You should have received a copy of the GNU Affero General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-*/\n-/*\t\n-\tAuthor : \t\tRonan Lana\n-\tDescription: \t\tWildcard medals\n-\tQuest ID : \t\t-----\n-*/\n-\n-var status = -1;\n-\n-function start(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n-\n-\n-function end(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n\\ No newline at end of file"}, {"sha": "41dab043ebc09286a3528ab594d93447d0f58035", "filename": "scripts/quest/3507.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/quest/3507.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/quest/3507.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/3507.js?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -1,5 +1,5 @@\n function end(mode, type, selection) {\n-        if(qm.isQuestCompleted(3523) || qm.isQuestCompleted(3524) || qm.isQuestCompleted(3525) || qm.isQuestCompleted(3526) || qm.isQuestCompleted(3527) || qm.isQuestCompleted(3539)) {\n+        if(qm.isQuestCompleted(3523) || qm.isQuestCompleted(3524) || qm.isQuestCompleted(3525) || qm.isQuestCompleted(3526) || qm.isQuestCompleted(3527) || qm.isQuestCompleted(3529) || qm.isQuestCompleted(3539)) {\n             qm.completeQuest();\n             qm.sendOk(\"You are now filled with all of your memories again.. You are now allowed to go to #m270020000#.\");\n         } else {"}, {"sha": "ab1d00ab590f10589006b6e0166128bd716465fc", "filename": "scripts/quest/3529.js", "status": "renamed", "additions": 22, "deletions": 17, "changes": 39, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/quest/3529.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/quest/3529.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/3529.js?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -1,8 +1,6 @@\n /*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n-\t\t       Matthias Butz <matze@odinms.de>\n-\t\t       Jan Christian Meyer <vimes@odinms.de>\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as\n@@ -19,21 +17,28 @@\n     You should have received a copy of the GNU Affero General Public License\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n-/*\t\n-\tAuthor : \t\tRonan Lana\n-\tDescription: \t\tWildcard medals\n-\tQuest ID : \t\t-----\n-*/\n \n var status = -1;\n \n function start(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n-}\n-\n-\n-function end(mode, type, selection) {\n-\tqm.forceCompleteQuest();\n-\tqm.dispose();\n+    if (mode == -1) {\n+        qm.dispose();\n+    } else {\n+        if(mode == 0 && type > 0) {\n+            qm.dispose();\n+            return;\n+        }\n+        \n+        if (mode == 1)\n+            status++;\n+        else\n+            status--;\n+        \n+        if (status == 0) {\n+            qm.sendOk(\"You have regained your memories, talk to #b#p2140001##k to get the pass.\");\n+        } else if (status == 1) {\n+            qm.forceCompleteQuest();\n+            qm.dispose();\n+        }\n+    }\n }\n\\ No newline at end of file", "previous_filename": "scripts/quest/29904.js"}, {"sha": "c0fb077e5813f4e66cfcc94257f0c5e405551ab1", "filename": "scripts/quest/3714.js", "status": "added", "additions": 53, "deletions": 0, "changes": 53, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/quest/3714.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/quest/3714.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/3714.js?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -0,0 +1,53 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+var status = -1;\n+\n+function start(mode, type, selection) {\n+    if (mode == -1) {\n+        qm.dispose();\n+    } else {\n+        if(mode == 0 && type > 0) {\n+            qm.dispose();\n+            return;\n+        }\n+        \n+        if (mode == 1)\n+            status++;\n+        else\n+            status--;\n+        \n+        if (status == 0) {\n+            if(!qm.haveItem(4001094, 1)) {\n+                qm.sendNext(\"You don't have a #b#t4001094##k...\");\n+                qm.dispose();\n+                return;\n+            }\n+            \n+            qm.sendNext(\"You have brought a #b#t4001094##k, thank you for the effort!\");\n+        } else if (status == 1) {\n+            qm.gainItem(4001094, -1);\n+            qm.gainExp(42000 * qm.getPlayer().getExpRate());\n+            \n+            qm.forceCompleteQuest();\n+            qm.dispose();\n+        }\n+    }\n+}"}, {"sha": "9c696935ee7ecd78310bf3f02bb2db92d5163aed", "filename": "scripts/quest/medalQuest.js", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/quest/medalQuest.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/scripts/quest/medalQuest.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/medalQuest.js?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -0,0 +1,23 @@\n+/**\n+ *\n+ * @author Arnah, Ronan\n+ */\n+\n+function start(mode, type, selection) {\n+    qm.forceStartQuest();\n+    qm.forceCompleteQuest();\n+\n+    var medalname = qm.getMedalName();\n+    qm.message(\"<\" + medalname + \"> has been awarded.\");\n+    qm.earnTitle(\"<\" + medalname + \"> has been awarded.\");\n+    qm.dispose();\n+}\n+\n+function complete(mode, type, selection) {\n+    qm.forceCompleteQuest();\n+\n+    var medalname = qm.getMedalName();\n+    qm.message(\"<\" + medalname + \"> has been awarded.\");\n+    qm.earnTitle(\"<\" + medalname + \"> has been awarded.\");\n+    qm.dispose();\n+}\n\\ No newline at end of file"}, {"sha": "1f99e07864b628bfce36b09d8f6861a1d6934d54", "filename": "sql/db_drops.sql", "status": "modified", "additions": 23, "deletions": 3, "changes": 26, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/sql/db_drops.sql", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/sql/db_drops.sql", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/sql/db_drops.sql?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -19100,7 +19100,7 @@ USE `heavenms`;\n (4300011,4000536,1,1,0,600000),\n (4300011,4004000,1,1,0,10000),\n (4300011,4020008,1,1,0,9000),\n-(4300011,4032509,1,1,2286,999999),\n+(4300011,4032509,1,1,2286,70000),\n (4300012,1302009,1,1,0,700),\n (4300012,1312007,1,1,0,700),\n (4300012,1322016,1,1,0,700),\n@@ -19176,7 +19176,7 @@ USE `heavenms`;\n (4300013,2049207,1,1,0,3000),\n (4300013,4004000,1,1,0,100000),\n (4300013,4020008,1,1,0,90000),\n-(4300015,4032509,1,1,2286,999999),\n+(4300015,4032509,1,1,2286,70000),\n (4300016,4000537,1,1,0,400000),\n (3400000,0,50,90,0,400000),\n (3400001,0,60,90,0,400000),\n@@ -20188,7 +20188,27 @@ USE `heavenms`;\n (2230131, 4032321, 1, 1, 21727, 20000),\n (5250002, 4032326, 1, 1, 21752, 100000),\n (2110301, 4032401, 1, 1, 2261, 100000),\n-(2110300, 4032402, 1, 1, 2263, 100000);\n+(2110300, 4032402, 1, 1, 2263, 100000),\n+(3400000, 4032521, 1, 1, 2291, 120000),\n+(3400001, 4032521, 1, 1, 2291, 120000),\n+(3400002, 4032521, 1, 1, 2291, 120000),\n+(3400003, 4032521, 1, 1, 2291, 120000),\n+(3400004, 4032521, 1, 1, 2291, 120000),\n+(3400005, 4032521, 1, 1, 2291, 120000),\n+(3400006, 4032521, 1, 1, 2291, 120000),\n+(3400007, 4032521, 1, 1, 2291, 120000),\n+(3400008, 4032521, 1, 1, 2291, 120000),\n+(4300000, 4032521, 1, 1, 2291, 120000),\n+(4300001, 4032521, 1, 1, 2291, 120000),\n+(4300002, 4032521, 1, 1, 2291, 120000),\n+(4300003, 4032521, 1, 1, 2291, 120000),\n+(4300004, 4032521, 1, 1, 2291, 120000),\n+(4300005, 4032521, 1, 1, 2291, 120000),\n+(4300006, 4032521, 1, 1, 2291, 120000),\n+(4300007, 4032521, 1, 1, 2291, 120000),\n+(4300008, 4032521, 1, 1, 2291, 120000),\n+(4300009, 4032521, 1, 1, 2291, 120000),\n+(4300010, 4032521, 1, 1, 2291, 120000);\n \n # (dropperid, itemid, minqty, maxqty, questid, chance)\n "}, {"sha": "180c1cf764e24a5fa7cd4496a5ebc66a141f63ae", "filename": "src/client/DiseaseValueHolder.java", "status": "removed", "additions": 0, "deletions": 34, "changes": 34, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/7d448cce4f9360ed92decc4f5de78b7372f86bfb/src/client/DiseaseValueHolder.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/7d448cce4f9360ed92decc4f5de78b7372f86bfb/src/client/DiseaseValueHolder.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/DiseaseValueHolder.java?ref=7d448cce4f9360ed92decc4f5de78b7372f86bfb", "patch": "@@ -1,34 +0,0 @@\n-/*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 ~ 2010 Patrick Huy <patrick.huy@frz.cc> \n-                       Matthias Butz <matze@odinms.de>\n-                       Jan Christian Meyer <vimes@odinms.de>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License version 3\n-    as published by the Free Software Foundation. You may not use, modify\n-    or distribute this program under any other version of the\n-    GNU Affero General Public License.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU Affero General Public License for more details.\n-\n-    You should have received a copy of the GNU Affero General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-*/\n-package client;\n-\n-/**\n- *\n- * @author anybody can do this\n- */\n-public class DiseaseValueHolder {\n-    public long startTime, length;\n-    \n-    public DiseaseValueHolder(long start, long length) {\n-        this.startTime = start;\n-        this.length = length;\n-    }\n-}"}, {"sha": "6d240f7d86904d975b56b45919be616afc709599", "filename": "src/client/MapleCharacter.java", "status": "modified", "additions": 38, "deletions": 22, "changes": 60, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/src/client/MapleCharacter.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/src/client/MapleCharacter.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/MapleCharacter.java?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -1850,25 +1850,7 @@ public static boolean deleteCharFromDB(MapleCharacter player, int senderAccId) {\n                             }\n                     }\n                     \n-                    try (PreparedStatement ps = con.prepareStatement(\"SELECT queststatusid FROM queststatus WHERE characterid = ?\")) {\n-                            ps.setInt(1, cid);\n-                            \n-                            try (ResultSet rs = ps.executeQuery()) {\n-                                    while (rs.next()) {\n-                                            int queststatusid = rs.getInt(\"queststatusid\");\n-                                        \n-                                            try (PreparedStatement ps2 = con.prepareStatement(\"DELETE FROM medalmaps WHERE queststatusid = ?\")) {\n-                                                    ps2.setInt(1, queststatusid);\n-                                                    ps2.executeUpdate();\n-                                            }\n-                                            \n-                                            try (PreparedStatement ps2 = con.prepareStatement(\"DELETE FROM questprogress WHERE queststatusid = ?\")) {\n-                                                    ps2.setInt(1, queststatusid);\n-                                                    ps2.executeUpdate();\n-                                            }\n-                                    }\n-                            }\n-                    }\n+                    deleteQuestProgressWhereCharacterId(con, cid);\n                     \n                     try (PreparedStatement ps = con.prepareStatement(\"SELECT id FROM mts_cart WHERE cid = ?\")) {\n                             ps.setInt(1, cid);\n@@ -1902,6 +1884,28 @@ public static boolean deleteCharFromDB(MapleCharacter player, int senderAccId) {\n                     return false;\n             }\n     }\n+    \n+    private static void deleteQuestProgressWhereCharacterId(Connection con, int cid) throws SQLException {\n+        try (PreparedStatement ps = con.prepareStatement(\"SELECT queststatusid FROM queststatus WHERE characterid = ?\")) {\n+            ps.setInt(1, cid);\n+\n+            try (ResultSet rs = ps.executeQuery()) {\n+                while (rs.next()) {\n+                    int queststatusid = rs.getInt(\"queststatusid\");\n+\n+                    try (PreparedStatement ps2 = con.prepareStatement(\"DELETE FROM medalmaps WHERE queststatusid = ?\")) {\n+                        ps2.setInt(1, queststatusid);\n+                        ps2.executeUpdate();\n+                    }\n+\n+                    try (PreparedStatement ps2 = con.prepareStatement(\"DELETE FROM questprogress WHERE queststatusid = ?\")) {\n+                        ps2.setInt(1, queststatusid);\n+                        ps2.executeUpdate();\n+                    }\n+                }\n+            }\n+        }\n+    }\n \n     private void deleteWhereCharacterId(Connection con, String sql) throws SQLException {\n         try (PreparedStatement ps = con.prepareStatement(sql)) {\n@@ -2744,6 +2748,17 @@ public MapleStatEffect getBuffEffect(MapleBuffStat stat) {\n         }\n     }\n     \n+    public boolean hasBuffFromSourceid(int sourceid) {\n+        effLock.lock();\n+        chrLock.lock();\n+        try {\n+            return buffEffects.containsKey(sourceid);\n+        } finally {\n+            chrLock.unlock();\n+            effLock.unlock();\n+        }\n+    }\n+    \n     private List<Pair<MapleBuffStat, Integer>> getActiveStatupsFromSourceid(int sourceid) { // already under effLock & chrLock\n         List<Pair<MapleBuffStat, Integer>> ret = new ArrayList<>();\n         \n@@ -5084,7 +5099,7 @@ private void levelUpMessages() {\n         } else if (level == 25) {\n             yellowMessage(\"You seem to be improving, but you are still not ready to move on to the next step.\");\n         } else if (level == 30) {\n-            yellowMessage(\"You have finally reached level 30! Try job advancing, after that try the Mushroom Kingdom!\");\n+            yellowMessage(\"You have finally reached level 30! Try job advancing, after that try the Mushroom Castle!\");\n         } else if (level == 35) {\n             yellowMessage(\"Hey did you hear about this mall that opened in Kerning? Try visiting the Kerning Mall.\");\n         } else if (level == 40) {\n@@ -6644,7 +6659,8 @@ public synchronized void saveToDB(boolean notAutosave) {\n             }\n             ps.executeBatch();\n             deleteWhereCharacterId(con, \"DELETE FROM eventstats WHERE characterid = ?\");\n-            deleteWhereCharacterId(con, \"DELETE FROM queststatus WHERE characterid = ?\");\n+            \n+            deleteQuestProgressWhereCharacterId(con, id);\n             ps = con.prepareStatement(\"INSERT INTO queststatus (`queststatusid`, `characterid`, `quest`, `status`, `time`, `expires`, `forfeited`) VALUES (DEFAULT, ?, ?, ?, ?, ?, ?)\", Statement.RETURN_GENERATED_KEYS);\n             PreparedStatement psf;\n             try (PreparedStatement pse = con.prepareStatement(\"INSERT INTO questprogress VALUES (DEFAULT, ?, ?, ?)\")) {\n@@ -7556,7 +7572,7 @@ public void updateQuest(MapleQuestStatus quest) {\n             announce(MaplePacketCreator.updateQuestInfo((short) quest.getQuest().getId(), quest.getNpc()));\n         } else if (quest.getStatus().equals(MapleQuestStatus.Status.COMPLETED)) {\n             short questid = quest.getQuest().getId();\n-            if(questid != 3637) {\n+            if(!MapleQuest.isExploitableQuest(questid)) {\n                 quest_fame += 1;\n                 if(ServerConstants.FAME_GAIN_BY_QUEST > 0)\n                     fameGainByQuest();"}, {"sha": "5ffa6687d4112c3304096b274578afd218329acd", "filename": "src/client/command/Commands.java", "status": "modified", "additions": 79, "deletions": 6, "changes": 85, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/src/client/command/Commands.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/src/client/command/Commands.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/command/Commands.java?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -68,6 +68,8 @@\n import server.life.MapleMonster;\n import server.life.MapleMonsterInformationProvider;\n import server.life.MapleNPC;\n+import server.life.MobSkill;\n+import server.life.MobSkillFactory;\n import server.life.MonsterDropEntry;\n import server.maps.MapleMap;\n import server.maps.MapleMapItem;\n@@ -89,6 +91,7 @@\n import client.MapleBuffStat;\n import client.MapleCharacter;\n import client.MapleClient;\n+import client.MapleDisease;\n import client.MapleJob;\n import client.MapleStat;\n import client.Skill;\n@@ -743,14 +746,9 @@ public static boolean executeHeavenMsCommandLv1(Channel cserv, Server srv, Maple\n                         break;\n \t\t\t}\n \t\t\tc.announce(MaplePacketCreator.getNPCTalk(9010000, (byte) 0, output, \"00 00\", (byte) 0));\n-\t\t\tbreak;\n+                                break;\n                     \n                 case \"buffme\":\n-                        if(!player.isGM()) {\n-                                player.dropMessage(5, \"You are already dead.\");\n-\t\t\t\tbreak;\n-                        }\n-                    \n                         //GM Skills : Haste(Super) - Holy Symbol - Bless - Hyper Body - Echo of Hero\n                         SkillFactory.getSkill(4101004).getEffect(SkillFactory.getSkill(4101004).getMaxLevel()).applyTo(player);\n                         SkillFactory.getSkill(2311003).getEffect(SkillFactory.getSkill(2311003).getMaxLevel()).applyTo(player);\n@@ -1572,6 +1570,81 @@ public static boolean executeHeavenMsCommandLv3(Channel cserv, Server srv, Maple\n                 MapleCharacter victim;\n             \n                 switch(sub[0]) {\n+                case \"debuff\":\n+                        if (sub.length < 2) {\n+\t\t\t\tplayer.yellowMessage(\"Syntax: !debuff SLOW|SEDUCE|ZOMBIFY|CONFUSE|STUN|POISON|SEAL|DARKNESS|WEAKEN|CURSE\");\n+\t\t\t\tbreak;\n+\t\t\t}\n+                    \n+                        MapleDisease disease = null;\n+                        MobSkill skill = null;\n+                        \n+                        switch(sub[1].toUpperCase()) {\n+                                case \"SLOW\":\n+                                        disease = MapleDisease.SLOW;\n+                                        skill = MobSkillFactory.getMobSkill(126, 7);\n+                                        break;\n+                                    \n+                                case \"SEDUCE\":\n+                                        disease = MapleDisease.SEDUCE;\n+                                        skill = MobSkillFactory.getMobSkill(128, 7);\n+                                        break;\n+                                    \n+                                case \"ZOMBIFY\":\n+                                        disease = MapleDisease.ZOMBIFY;\n+                                        skill = MobSkillFactory.getMobSkill(133, 1);\n+                                        break;\n+                                        \n+                                case \"CONFUSE\":\n+                                        disease = MapleDisease.CONFUSE;\n+                                        skill = MobSkillFactory.getMobSkill(132, 2);\n+                                        break;\n+                                            \n+                                case \"STUN\":\n+                                        disease = MapleDisease.STUN;\n+                                        skill = MobSkillFactory.getMobSkill(123, 7);\n+                                        break;\n+                                                \n+                                case \"POISON\":\n+                                        disease = MapleDisease.POISON;\n+                                        skill = MobSkillFactory.getMobSkill(125, 5);\n+                                        break;\n+                                                    \n+                                case \"SEAL\":\n+                                        disease = MapleDisease.SEAL;\n+                                        skill = MobSkillFactory.getMobSkill(120, 1);\n+                                        break;\n+                                                        \n+                                case \"DARKNESS\":\n+                                        disease = MapleDisease.DARKNESS;\n+                                        skill = MobSkillFactory.getMobSkill(121, 1);\n+                                        break;\n+                                                            \n+                                case \"WEAKEN\":\n+                                        disease = MapleDisease.WEAKEN;\n+                                        skill = MobSkillFactory.getMobSkill(122, 1);\n+                                        break;\n+                                \n+                                case \"CURSE\":\n+                                        disease = MapleDisease.CURSE;\n+                                        skill = MobSkillFactory.getMobSkill(124, 1);\n+                                        break;\n+                        }\n+                        \n+                        if(disease == null) {\n+                                player.yellowMessage(\"Syntax: !debuff SLOW|SEDUCE|ZOMBIFY|CONFUSE|STUN|POISON|SEAL|DARKNESS|WEAKEN|CURSE\");\n+\t\t\t\tbreak;\n+                        }\n+                    \n+                        for (MapleMapObject mmo : player.getMap().getMapObjectsInRange(player.getPosition(), 1000.0, Arrays.asList(MapleMapObjectType.PLAYER))) {\n+                                MapleCharacter chr = (MapleCharacter) mmo;\n+                                \n+                                if(chr.getId() != player.getId()) {\n+                                        chr.giveDebuff(disease, skill);\n+                                }\n+                        }\n+                break;\n+                    \n                 case \"fly\":\n                         if (sub.length < 2) {\n \t\t\t\tplayer.yellowMessage(\"Syntax: !fly <on/off>\");"}, {"sha": "0e90836fe863375a29af371910c7204292de196e", "filename": "src/client/inventory/Equip.java", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/src/client/inventory/Equip.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/src/client/inventory/Equip.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/inventory/Equip.java?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -486,7 +486,9 @@ private static double normalizedMasteryExp(int reqLevel) {\n         // Conversion factor between mob exp and equip exp gain. Through many calculations, the expected for equipment levelup\n         // from level 1 to 2 is killing about 100~200 mobs of the same level range, on a 1x EXP rate scenario.\n         \n-        if(reqLevel >= 78) {\n+        if(reqLevel < 5) {\n+            return 42;\n+        } else if(reqLevel >= 78) {\n             return Math.max((10413.648 * Math.exp(reqLevel * 0.03275)), 15);\n         } else if(reqLevel >= 38) {\n             return Math.max(( 4985.818 * Math.exp(reqLevel * 0.02007)), 15);"}, {"sha": "fcb394d776f66272c426c57e3324c4ab4929f4aa", "filename": "src/constants/GameConstants.java", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/src/constants/GameConstants.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/src/constants/GameConstants.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/constants/GameConstants.java?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -210,6 +210,10 @@ public static boolean isFinisherSkill(int skillId) {\n         return skillId > 1111002 && skillId < 1111007 || skillId == 11111002 || skillId == 11111003;\n     }\n     \n+    public static boolean isMedalQuest(short questid) {\n+        return questid / 100 == 299;\n+    }\n+    \n     public static boolean hasSPTable(MapleJob job) {\n         switch (job) {\n             case EVAN:"}, {"sha": "6a00281f3301a50b15a1661abd42e30d33e30a69", "filename": "src/net/server/channel/handlers/QuestActionHandler.java", "status": "modified", "additions": 39, "deletions": 6, "changes": 45, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/src/net/server/channel/handlers/QuestActionHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/src/net/server/channel/handlers/QuestActionHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/QuestActionHandler.java?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -21,18 +21,45 @@\n */\n package net.server.channel.handlers;\n \n+import java.awt.Point;\n import client.MapleCharacter;\n import client.MapleClient;\n import net.AbstractMaplePacketHandler;\n import scripting.quest.QuestScriptManager;\n import server.quest.MapleQuest;\n+import server.life.MapleNPC;\n import tools.data.input.SeekableLittleEndianAccessor;\n \n /**\n  *\n  * @author Matze\n  */\n public final class QuestActionHandler extends AbstractMaplePacketHandler {\n+    \n+    // credits to gabriel.sin\n+    private static boolean isNpcNearby(SeekableLittleEndianAccessor slea, MapleCharacter player, MapleQuest quest, int npcId) {\n+        Point playerP = null;\n+        \n+        if(slea.available() >= 4) {\n+            playerP = new Point(slea.readShort(), slea.readShort());\n+        }\n+        \n+        if (playerP != null && !quest.isAutoStart() && !quest.isAutoComplete()) {\n+            MapleNPC npc = player.getMap().getNPCById(npcId);\n+            if(npc == null) {\n+                return false;\n+            }\n+            \n+            Point npcP = npc.getPosition();\n+            if (Math.abs(npcP.getX() - playerP.getX()) > 1200 || Math.abs(npcP.getY() - playerP.getY()) > 800) {\n+                player.dropMessage(5, \"Approach the NPC to fulfill this quest operation.\");\n+                return false;\n+            }\n+        }\n+        \n+        return true;\n+    }\n+    \n     @Override\n     public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {\n         byte action = slea.readByte();\n@@ -41,16 +68,18 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n         MapleQuest quest = MapleQuest.getInstance(questid);\n         if (action == 1) { //Start Quest\n             int npc = slea.readInt();\n-            if (slea.available() >= 4) {\n-                slea.readInt();\n+            if(!isNpcNearby(slea, player, quest, npc)) {\n+                return;\n             }\n             \n             if(quest.canStart(player, npc)) {\n                 quest.start(player, npc);\n             }\n         } else if (action == 2) { // Complete Quest\n             int npc = slea.readInt();\n-            slea.readInt();\n+            if(!isNpcNearby(slea, player, quest, npc)) {\n+                return;\n+            }\n             \n             if(quest.canComplete(player, npc)) {\n                 if (slea.available() >= 2) {\n@@ -64,14 +93,18 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n             quest.forfeit(player);\n         } else if (action == 4) { // scripted start quest\n             int npc = slea.readInt();\n-            slea.readInt();\n+            if(!isNpcNearby(slea, player, quest, npc)) {\n+                return;\n+            }\n+            \n             if(quest.canStart(player, npc)) {\n                 QuestScriptManager.getInstance().start(c, questid, npc);\n             }\n         } else if (action == 5) { // scripted end quests\n-            //System.out.println(slea.toString());\n             int npc = slea.readInt();\n-            slea.readInt();\n+            if(!isNpcNearby(slea, player, quest, npc)) {\n+                return;\n+            }\n             \n             if(quest.canComplete(player, npc)) {\n                 QuestScriptManager.getInstance().end(c, questid, npc);"}, {"sha": "9c8001f8bafb96fab913bcda31061d157e1f18ea", "filename": "src/scripting/quest/QuestActionManager.java", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/src/scripting/quest/QuestActionManager.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/src/scripting/quest/QuestActionManager.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/scripting/quest/QuestActionManager.java?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -23,6 +23,7 @@\n \n import client.MapleClient;\n import scripting.npc.NPCConversationManager;\n+import server.MapleItemInformationProvider;\n import server.quest.MapleQuest;\n \n /**\n@@ -69,4 +70,9 @@ public void startQuest() {\n     public void completeQuest() {\n         forceCompleteQuest();\n     }\n+    \n+    public String getMedalName() {  // usable only for medal quests (id 299XX)\n+        MapleQuest q = MapleQuest.getInstance(quest);\n+        return MapleItemInformationProvider.getInstance().getName(q.getMedalRequirement());\n+    }\n }"}, {"sha": "2bd0a22fb4ad5eb7ba0357d43457df3e00ef87ba", "filename": "src/scripting/quest/QuestScriptManager.java", "status": "modified", "additions": 46, "deletions": 37, "changes": 83, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/src/scripting/quest/QuestScriptManager.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/src/scripting/quest/QuestScriptManager.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/scripting/quest/QuestScriptManager.java?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -30,6 +30,7 @@\n import scripting.AbstractScriptManager;\n import server.quest.MapleQuest;\n import tools.FilePrinter;\n+import constants.GameConstants;\n import client.MapleClient;\n import client.MapleQuestStatus;\n \n@@ -45,40 +46,44 @@\n \tpublic synchronized static QuestScriptManager getInstance() {\n \t\treturn instance;\n \t}\n-\n+        \n \tpublic void start(MapleClient c, short questid, int npc) {\n-\t\tMapleQuest quest = MapleQuest.getInstance(questid);\n-\t\tif (!c.getPlayer().getQuest(quest).getStatus().equals(MapleQuestStatus.Status.NOT_STARTED)) {\n-\t\t\tdispose(c);\n-\t\t\treturn;\n-\t\t}\n-\t\ttry {\n-\t\t\tQuestActionManager qm = new QuestActionManager(c, questid, npc, true);\n-\t\t\tif (qms.containsKey(c)) {\n-\t\t\t\treturn;\n-\t\t\t}\n-\t\t\tif(c.canClickNPC()) {\n-\t\t\t\tqms.put(c, qm);\n-\t\t\t\tInvocable iv = getInvocable(\"quest/\" + questid + \".js\", c);\n-\t\t\t\tif (iv == null) {\n-\t\t\t\t\tFilePrinter.printError(FilePrinter.QUEST_UNCODED, \"START Quest \" + questid + \" is uncoded.\\r\\n\");\n-\t\t\t\t}\n-\t\t\t\tif (iv == null || QuestScriptManager.getInstance() == null) {\n-\t\t\t\t\tqm.dispose();\n-\t\t\t\t\treturn;\n-\t\t\t\t}\n-\t\t\t\tengine.put(\"qm\", qm);\n-\t\t\t\tscripts.put(c, iv);\n-\t\t\t\tc.setClickedNPC();\n-\t\t\t\tiv.invokeFunction(\"start\", (byte) 1, (byte) 0, 0);\n-\t\t\t}\n-\t\t} catch (final UndeclaredThrowableException ute) {\n-\t\t\tFilePrinter.printError(FilePrinter.QUEST + questid + \".txt\", ute);\n-\t\t\tdispose(c);\n-\t\t} catch (final Throwable t) {\n-\t\t\tFilePrinter.printError(FilePrinter.QUEST + getQM(c).getQuest() + \".txt\", t);\n-\t\t\tdispose(c);\n-\t\t}\n+                MapleQuest quest = MapleQuest.getInstance(questid);\n+                if (!quest.canStartWithoutRequirements(c.getPlayer())) {\n+                        dispose(c);\n+                        return;\n+                }\n+                try {\n+                        QuestActionManager qm = new QuestActionManager(c, questid, npc, true);\n+                        if (qms.containsKey(c)) {\n+                                return;\n+                        }\n+                        if(c.canClickNPC()) {\n+                                qms.put(c, qm);\n+                                Invocable iv = getInvocable(\"quest/\" + questid + \".js\", c);\n+                                if (iv == null) {\n+                                        if(GameConstants.isMedalQuest(questid)) {   // start generic medal quest\n+                                                iv = getInvocable(\"quest/medalQuest.js\", c);\n+                                        } else {\n+                                                FilePrinter.printError(FilePrinter.QUEST_UNCODED, \"START Quest \" + questid + \" is uncoded.\\r\\n\");\n+                                        }\n+                                }\n+                                if (iv == null || QuestScriptManager.getInstance() == null) {\n+                                        qm.dispose();\n+                                        return;\n+                                }\n+                                engine.put(\"qm\", qm);\n+                                scripts.put(c, iv);\n+                                c.setClickedNPC();\n+                                iv.invokeFunction(\"start\", (byte) 1, (byte) 0, 0);\n+                        }\n+                } catch (final UndeclaredThrowableException ute) {\n+                        FilePrinter.printError(FilePrinter.QUEST + questid + \".txt\", ute);\n+                        dispose(c);\n+                } catch (final Throwable t) {\n+                        FilePrinter.printError(FilePrinter.QUEST + getQM(c).getQuest() + \".txt\", t);\n+                        dispose(c);\n+                }\n \t}\n \n \tpublic void start(MapleClient c, byte mode, byte type, int selection) {\n@@ -96,7 +101,7 @@ public void start(MapleClient c, byte mode, byte type, int selection) {\n \t\t\t}\n \t\t}\n \t}\n-\n+        \n \tpublic void end(MapleClient c, short questid, int npc) {\n \t\tMapleQuest quest = MapleQuest.getInstance(questid);\n \t\tif (!c.getPlayer().getQuest(quest).getStatus().equals(MapleQuestStatus.Status.STARTED) || !c.getPlayer().getMap().containsNPC(npc)) {\n@@ -112,9 +117,13 @@ public void end(MapleClient c, short questid, int npc) {\n \t\t\t\tqms.put(c, qm);\n \t\t\t\tInvocable iv = getInvocable(\"quest/\" + questid + \".js\", c);\n \t\t\t\tif (iv == null) {\n-                                        FilePrinter.printError(FilePrinter.QUEST_UNCODED, \"END Quest \" + questid + \" is uncoded.\\r\\n\");\n-\t\t\t\t\tqm.dispose();\n-\t\t\t\t\treturn;\n+                                        if(GameConstants.isMedalQuest(questid)) {   // start generic medal quest\n+                                                iv = getInvocable(\"quest/medalQuest.js\", c);\n+                                        } else {\n+                                                FilePrinter.printError(FilePrinter.QUEST_UNCODED, \"END Quest \" + questid + \" is uncoded.\\r\\n\");\n+                                                qm.dispose();\n+                                                return;\n+                                        }\n \t\t\t\t}\n \t\t\t\tengine.put(\"qm\", qm);\n \t\t\t\tscripts.put(c, iv);"}, {"sha": "01d03be4c3d0c79a149584238e5367b26af30e7c", "filename": "src/server/MapleStatEffect.java", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/src/server/MapleStatEffect.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/src/server/MapleStatEffect.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/MapleStatEffect.java?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -955,14 +955,14 @@ private void applyMonsterBuff(MapleCharacter applyfrom) {\n             MapleMonster monster = (MapleMonster) mo;\n             if (isDispel()) { \n         \t\tmonster.debuffMob(skill_.getId());\n-        \t} else {\n-        \t\tif (makeChanceResult()) {\n-        \t\t\tmonster.applyStatus(applyfrom, new MonsterStatusEffect(getMonsterStati(), skill_, null, false), isPoison(), getDuration());\n-        \t\t\tif (isCrash()) {\n-        \t\t\t\tmonster.debuffMob(skill_.getId());\n-        \t\t\t}\n-        \t\t}\n-        \t}\n+            } else {\n+                    if (makeChanceResult()) {\n+                            monster.applyStatus(applyfrom, new MonsterStatusEffect(getMonsterStati(), skill_, null, false), isPoison(), getDuration());\n+                            if (isCrash()) {\n+                                    monster.debuffMob(skill_.getId());\n+                            }\n+                    }\n+            }\n             i++;\n             if (i >= mobCount) {\n                 break;"}, {"sha": "d8a39292f8c83d46f8765780e6c6d9e2296d2924", "filename": "src/server/maps/MapleMap.java", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/src/server/maps/MapleMap.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/src/server/maps/MapleMap.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/maps/MapleMap.java?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -1446,6 +1446,19 @@ public void updateMonsterController(MapleMonster monster) {\n         }\n     }\n \n+    public MapleNPC getNPCById(int id) {\n+        for (MapleMapObject obj : getMapObjects()) {\n+            if (obj.getType() == MapleMapObjectType.NPC) {\n+                MapleNPC npc = (MapleNPC) obj;\n+                if (npc.getId() == id) {\n+                    return npc;\n+                }\n+            }\n+        }\n+        \n+        return null;\n+    }\n+    \n     public boolean containsNPC(int npcid) {\n         if (npcid == 9000066) {\n             return true;"}, {"sha": "c5ce034b367a8658f33c2d08c9725d56c382f4b1", "filename": "src/server/quest/MapleQuest.java", "status": "modified", "additions": 44, "deletions": 6, "changes": 50, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/src/server/quest/MapleQuest.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/src/server/quest/MapleQuest.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/quest/MapleQuest.java?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -23,13 +23,15 @@\n \n import java.io.File;\n import java.util.HashMap;\n+import java.util.HashSet;\n import java.util.LinkedList;\n import java.util.List;\n import java.util.Map;\n import client.MapleCharacter;\n import client.MapleQuestStatus;\n import client.MapleQuestStatus.Status;\n import java.util.EnumMap;\n+import java.util.Set;\n import provider.MapleData;\n import provider.MapleDataProvider;\n import provider.MapleDataProviderFactory;\n@@ -41,10 +43,21 @@\n /**\n  *\n  * @author Matze\n+ * @author Ronan (support for medal quests)\n  */\n public class MapleQuest {\n \n     private static Map<Integer, MapleQuest> quests = new HashMap<>();\n+    private static Map<Short, Integer> medals = new HashMap<>();\n+    \n+    private static final Set<Short> exploitableQuests = new HashSet<>();\n+    static {\n+        exploitableQuests.add((short) 2338);\n+        exploitableQuests.add((short) 3637);\n+        exploitableQuests.add((short) 3714);\n+        exploitableQuests.add((short) 21752);\n+    }\n+    \n     protected short infoNumber, id;\n     protected int timeLimit, timeLimit2;\n     protected String infoex;\n@@ -77,6 +90,9 @@ private MapleQuest(int id) {\n                 autoStart = MapleDataTool.getInt(\"autoStart\", reqInfo, 0) == 1;\n                 autoPreComplete = MapleDataTool.getInt(\"autoPreComplete\", reqInfo, 0) == 1;\n                 autoComplete = MapleDataTool.getInt(\"autoComplete\", reqInfo, 0) == 1;\n+                \n+                int medalid = MapleDataTool.getInt(\"viewMedalItem\", reqInfo, 0);\n+                if(medalid != 0) medals.put(this.id, medalid);\n             } else {\n                 System.out.println(\"no data \" + id);\n             }\n@@ -209,8 +225,13 @@ private String getIntervalTimeLeft(MapleCharacter c, IntervalRequirement r) {\n         return str.toString();\n     }\n \n+    public boolean canStartWithoutRequirements(MapleCharacter c) {\n+        MapleQuestStatus mqs = c.getQuest(this);\n+        return !(mqs.getStatus() != Status.NOT_STARTED && !(mqs.getStatus() == Status.COMPLETED && repeatable));\n+    }\n+    \n     public boolean canStart(MapleCharacter c, int npcid) {\n-        if (c.getQuest(this).getStatus() != Status.NOT_STARTED && !(c.getQuest(this).getStatus() == Status.COMPLETED && repeatable)) {\n+        if (!canStartWithoutRequirements(c)) {\n             return false;\n         }\n         for (MapleQuestRequirement r : startReqs.values()) {\n@@ -229,7 +250,9 @@ public boolean canComplete(MapleCharacter c, Integer npcid) {\n             return false;\n         }\n         for (MapleQuestRequirement r : completeReqs.values()) {\n-            if (r == null || !r.check(c, npcid)) {\n+            if (r == null) {\n+                return false;\n+            } else if(!r.check(c, npcid)) {\n                 if(r.getType() == MapleQuestRequirementType.MESO) { // TODO: find a way to tell the client about the new MESO requirement type.\n                     c.dropMessage(5, \"You don't have enough mesos to complete this quest.\");\n                 }\n@@ -263,10 +286,6 @@ public void complete(MapleCharacter c, int npc, Integer selection) {\n                 }\n             }\n \n-            if (timeLimit > 0) {\n-                c.announce(MaplePacketCreator.removeQuestTimeLimit(id));\n-            }\n-            \n             forceComplete(c, npc);\n             for (MapleQuestAction a : completeActs.values()) {\n                 a.run(c, selection);\n@@ -308,6 +327,10 @@ public boolean forceStart(MapleCharacter c, int npc) {\n     }\n \n     public boolean forceComplete(MapleCharacter c, int npc) {\n+        if (timeLimit > 0) {\n+            c.announce(MaplePacketCreator.removeQuestTimeLimit(id));\n+        }\n+        \n         MapleQuestStatus newStatus = new MapleQuestStatus(this, MapleQuestStatus.Status.COMPLETED, npc);\n         newStatus.setForfeited(c.getQuest(this).getForfeited());\n         newStatus.setCompletionTime(System.currentTimeMillis());\n@@ -431,6 +454,12 @@ private MapleQuestRequirement getRequirement(MapleQuestRequirementType type, Map\n \t\t\tcase PET:\n \t\t\t\tret = new PetRequirement(this, data);\n \t\t\t\tbreak;\n+                        case BUFF:\n+\t\t\t\tret = new BuffRequirement(this, data);\n+\t\t\t\tbreak;\n+                        case EXCEPT_BUFF:\n+\t\t\t\tret = new BuffExceptRequirement(this, data);\n+\t\t\t\tbreak;\n \t\t\tcase SCRIPT:\n \t\t\tcase NORMAL_AUTO_START:\n \t\t\tcase START:\n@@ -480,7 +509,16 @@ private MapleQuestAction getAction(MapleQuestActionType type, MapleData data) {\n \t\t}\n \t\treturn ret;\n \t}\n+        \n+        public static boolean isExploitableQuest(short questid) {\n+                return exploitableQuests.contains(questid);\n+        }\n \t\n+        public int getMedalRequirement() {\n+                Integer medalid = medals.get(id);\n+                return medalid != null ? medalid : -1;\n+        }\n+        \n \tpublic static void loadAllQuest() {\n \t\tquestInfo = questData.getData(\"QuestInfo.img\");\n \t\tquestReq = questData.getData(\"Check.img\");"}, {"sha": "f96991773c090d608010af9e9af395e53f7e2762", "filename": "src/server/quest/MapleQuestRequirementType.java", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/src/server/quest/MapleQuestRequirementType.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/src/server/quest/MapleQuestRequirementType.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/quest/MapleQuestRequirementType.java?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -26,7 +26,7 @@\n  * @author Matze\n  */\n public enum MapleQuestRequirementType {\n-    UNDEFINED(-1), JOB(0), ITEM(1), QUEST(2), MIN_LEVEL(3), MAX_LEVEL(4), END_DATE(5), MOB(6), NPC(7), FIELD_ENTER(8), INTERVAL(9), SCRIPT(10), PET(11), MIN_PET_TAMENESS(12), MONSTER_BOOK(13), NORMAL_AUTO_START(14), INFO_NUMBER(15), INFO_EX(16), COMPLETED_QUEST(17), START(18), END(19), DAY_BY_DAY(20), MESO(21);\n+    UNDEFINED(-1), JOB(0), ITEM(1), QUEST(2), MIN_LEVEL(3), MAX_LEVEL(4), END_DATE(5), MOB(6), NPC(7), FIELD_ENTER(8), INTERVAL(9), SCRIPT(10), PET(11), MIN_PET_TAMENESS(12), MONSTER_BOOK(13), NORMAL_AUTO_START(14), INFO_NUMBER(15), INFO_EX(16), COMPLETED_QUEST(17), START(18), END(19), DAY_BY_DAY(20), MESO(21), BUFF(22), EXCEPT_BUFF(23);\n     final byte type;\n \n     private MapleQuestRequirementType(int type) {\n@@ -77,13 +77,17 @@ public static MapleQuestRequirementType getByWZName(String name) {\n         } else if (name.equals(\"questComplete\")) {\n             return COMPLETED_QUEST;\n \t} else if(name.equals(\"start\")) {\n-\t\treturn START;\n+            return START;\n \t} else if(name.equals(\"end\")) {\n-\t\treturn END;\n+            return END;\n \t} else if(name.equals(\"daybyday\")) {\n-\t\treturn DAY_BY_DAY;\n+            return DAY_BY_DAY;\n         } else if (name.equals(\"money\")) {\n             return MESO;\n+        } else if (name.equals(\"buff\")) {\n+            return BUFF;\n+        } else if (name.equals(\"exceptbuff\")) {\n+            return EXCEPT_BUFF;\n         } else {\n             return UNDEFINED;\n         }"}, {"sha": "8ac57eef23b962c5e79a3d31c606e6d0e2251a58", "filename": "src/server/quest/actions/BuffAction.java", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/src/server/quest/actions/BuffAction.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/src/server/quest/actions/BuffAction.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/quest/actions/BuffAction.java?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -39,7 +39,11 @@ public BuffAction(MapleQuest quest, MapleData data) {\n \t\tsuper(MapleQuestActionType.BUFF, quest);\n \t\tprocessData(data);\n \t}\n-\t\n+        \n+        @Override\n+\tpublic boolean check(MapleCharacter chr, Integer extSelection) {\n+\t\treturn true;\n+\t}\n \t\n \t@Override\n \tpublic void processData(MapleData data) {"}, {"sha": "081ca720911d67a0e5a7bd4a6e0a53ddd493be9b", "filename": "src/server/quest/requirements/BuffExceptRequirement.java", "status": "added", "additions": 50, "deletions": 0, "changes": 50, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/src/server/quest/requirements/BuffExceptRequirement.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/src/server/quest/requirements/BuffExceptRequirement.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/quest/requirements/BuffExceptRequirement.java?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -0,0 +1,50 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+package server.quest.requirements;\n+    \n+import client.MapleCharacter;\n+import provider.MapleData;\n+import provider.MapleDataTool;\n+import server.quest.MapleQuest;\n+import server.quest.MapleQuestRequirementType;\n+\n+/**\n+ *\n+ * @author Ronan\n+ */\n+public class BuffExceptRequirement extends MapleQuestRequirement {\n+        private int buffId = -1;\n+        \n+\tpublic BuffExceptRequirement(MapleQuest quest, MapleData data) {\n+\t\tsuper(MapleQuestRequirementType.BUFF);\n+\t\tprocessData(data);\n+\t}\n+\t\n+\t@Override\n+\tpublic void processData(MapleData data) {\n+                // item buffs are negative\n+\t\tbuffId = -1 * Integer.valueOf(MapleDataTool.getString(data));\n+\t}\n+\t\n+\t@Override\n+\tpublic boolean check(MapleCharacter chr, Integer npcid) {\n+                return !chr.hasBuffFromSourceid(buffId);\n+\t}\n+}"}, {"sha": "a0708fb95ad20b1fb16d07162b00712500700b88", "filename": "src/server/quest/requirements/BuffRequirement.java", "status": "added", "additions": 50, "deletions": 0, "changes": 50, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/src/server/quest/requirements/BuffRequirement.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/src/server/quest/requirements/BuffRequirement.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/quest/requirements/BuffRequirement.java?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -0,0 +1,50 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+package server.quest.requirements;\n+\n+import client.MapleCharacter;\n+import provider.MapleData;\n+import provider.MapleDataTool;\n+import server.quest.MapleQuest;\n+import server.quest.MapleQuestRequirementType;\n+\n+/**\n+ *\n+ * @author Ronan\n+ */\n+public class BuffRequirement extends MapleQuestRequirement {\n+        private int buffId = 1;\n+        \n+\tpublic BuffRequirement(MapleQuest quest, MapleData data) {\n+\t\tsuper(MapleQuestRequirementType.BUFF);\n+\t\tprocessData(data);\n+\t}\n+\t\n+\t@Override\n+\tpublic void processData(MapleData data) {\n+                // item buffs are negative\n+\t\tbuffId = -1 * Integer.valueOf(MapleDataTool.getString(data));\n+\t}\n+\t\n+\t@Override\n+\tpublic boolean check(MapleCharacter chr, Integer npcid) {\n+                return chr.hasBuffFromSourceid(buffId);\n+\t}\n+}"}, {"sha": "d47a5c521a15e927c08abefeaae951ab8a45c52d", "filename": "src/tools/MaplePacketCreator.java", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/src/tools/MaplePacketCreator.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/61292f5c9b6bf03f0cd2d45b6324e3d2c0268548/src/tools/MaplePacketCreator.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/tools/MaplePacketCreator.java?ref=61292f5c9b6bf03f0cd2d45b6324e3d2c0268548", "patch": "@@ -1458,7 +1458,7 @@ private static void encodeParentlessMobSpawnEffect(MaplePacketLittleEndianWriter\n         \t\t * 14: Angry ^\n         \t\t * 15: Orb animation thing, ??\n         \t\t * 16: ??\n-        \t\t * 19: Mushroom kingdom boss thing\n+        \t\t * 19: Mushroom castle boss thing\n         \t\t */\n                 \n                 if (life.getParentMobOid() != 0) {"}]}]},
