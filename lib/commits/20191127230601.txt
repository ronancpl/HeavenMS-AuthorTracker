{"fetchDate": "2019-12-19", "content": [{"sha": "06b43d9e078bbba38f95e67db160dc79b18669b0", "node_id": "MDY6Q29tbWl0NDUwODIwMjM6MDZiNDNkOWUwNzhiYmJhMzhmOTVlNjdkYjE2MGRjNzliMTg2NjliMA==", "commit": {"author": {"name": "DevilTea", "email": "ch870814@gmail.com", "date": "2019-11-27T23:06:01Z"}, "committer": {"name": "Ronan Lana", "email": "rcpl2010@gmail.com", "date": "2019-11-27T23:06:01Z"}, "message": "Add docker-compose support (#545)", "tree": {"sha": "96d9073b0e383f0f465bcbf2c138da062d298acb", "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/trees/96d9073b0e383f0f465bcbf2c138da062d298acb"}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/commits/06b43d9e078bbba38f95e67db160dc79b18669b0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/06b43d9e078bbba38f95e67db160dc79b18669b0", "html_url": "https://github.com/ronancpl/HeavenMS/commit/06b43d9e078bbba38f95e67db160dc79b18669b0", "comments_url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/06b43d9e078bbba38f95e67db160dc79b18669b0/comments", "author": {"login": "DevilTea", "id": 16652879, "node_id": "MDQ6VXNlcjE2NjUyODc5", "avatar_url": "https://avatars3.githubusercontent.com/u/16652879?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DevilTea", "html_url": "https://github.com/DevilTea", "followers_url": "https://api.github.com/users/DevilTea/followers", "following_url": "https://api.github.com/users/DevilTea/following{/other_user}", "gists_url": "https://api.github.com/users/DevilTea/gists{/gist_id}", "starred_url": "https://api.github.com/users/DevilTea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DevilTea/subscriptions", "organizations_url": "https://api.github.com/users/DevilTea/orgs", "repos_url": "https://api.github.com/users/DevilTea/repos", "events_url": "https://api.github.com/users/DevilTea/events{/privacy}", "received_events_url": "https://api.github.com/users/DevilTea/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bb586a7c0b9862fbe689c257c48e626ade3881d0", "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/bb586a7c0b9862fbe689c257c48e626ade3881d0", "html_url": "https://github.com/ronancpl/HeavenMS/commit/bb586a7c0b9862fbe689c257c48e626ade3881d0"}], "stats": {"total": 28, "additions": 26, "deletions": 2}, "files": [{"sha": "d37cf08b8e3fe9dcc97704acf0eccc7a24382e8d", "filename": "Dockerfile", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/06b43d9e078bbba38f95e67db160dc79b18669b0/Dockerfile", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/06b43d9e078bbba38f95e67db160dc79b18669b0/Dockerfile", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/Dockerfile?ref=06b43d9e078bbba38f95e67db160dc79b18669b0", "patch": "@@ -1,9 +1,13 @@\n # Docker support, thanks to xinyifly\n \n-FROM openjdk:7-alpine\n+FROM openjdk:8u171-jdk-alpine\n RUN apk -U add tini\n WORKDIR /mnt\n COPY ./ ./\n RUN sh ./posix-compile.sh\n+ADD https://github.com/ufoscout/docker-compose-wait/releases/download/2.6.0/wait /wait\n+RUN chmod +x /wait\n+\n EXPOSE 8484 7575 7576 7577\n-CMD exec tini -- sh ./posix-launch.sh\n\\ No newline at end of file\n+ENTRYPOINT [\"tini\", \"--\"]\n+CMD /wait && sh ./posix-launch.sh"}, {"sha": "6e514c1e42f613c389d3a7191f11fa1bae01b47c", "filename": "docker-compose.yml", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/06b43d9e078bbba38f95e67db160dc79b18669b0/docker-compose.yml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/06b43d9e078bbba38f95e67db160dc79b18669b0/docker-compose.yml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/docker-compose.yml?ref=06b43d9e078bbba38f95e67db160dc79b18669b0", "patch": "@@ -0,0 +1,20 @@\n+version: '3'\n+services:\n+  maplestory:\n+    network_mode: \"host\"\n+    build: .\n+    depends_on:\n+      - db\n+    environment:\n+      WAIT_HOSTS: localhost:3306\n+    \n+  db:\n+    network_mode: \"host\"\n+    image: mysql:5.6\n+    environment:\n+      MYSQL_ALLOW_EMPTY_PASSWORD: \"yes\"\n+      MYSQL_DATABASE: \"heavenms\"\n+      MYSQL_USER: \"root\"\n+      MYSQL_PASSWORD: \"\"\n+    volumes:\n+      - ./sql:/docker-entrypoint-initdb.d"}]}]},
