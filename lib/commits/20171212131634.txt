{"fetchDate": "2019-12-19", "content": [{"sha": "b141efdbf21adfcd0a7ec88652409705821be260", "node_id": "MDY6Q29tbWl0NDUwODIwMjM6YjE0MWVmZGJmMjFhZGZjZDBhN2VjODg2NTI0MDk3MDU4MjFiZTI2MA==", "commit": {"author": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2017-12-12T13:16:34Z"}, "committer": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2017-12-12T13:16:34Z"}, "message": "Fixed drop count on maps\n\nFixed an issue with map drop count displaying errouneous info after items are \"picked-up\" by reactors or commands like cleardrops.", "tree": {"sha": "ceba299c92376cc7f98136fbe132f07405de2f96", "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/trees/ceba299c92376cc7f98136fbe132f07405de2f96"}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/commits/b141efdbf21adfcd0a7ec88652409705821be260", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/b141efdbf21adfcd0a7ec88652409705821be260", "html_url": "https://github.com/ronancpl/HeavenMS/commit/b141efdbf21adfcd0a7ec88652409705821be260", "comments_url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/b141efdbf21adfcd0a7ec88652409705821be260/comments", "author": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "138689118299a7e696026d0a64f26ea346d12cdc", "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/138689118299a7e696026d0a64f26ea346d12cdc", "html_url": "https://github.com/ronancpl/HeavenMS/commit/138689118299a7e696026d0a64f26ea346d12cdc"}], "stats": {"total": 49, "additions": 28, "deletions": 21}, "files": [{"sha": "e3fa0db2444b86823471256fddf91a372d4817ea", "filename": "docs/mychanges_ptbr.txt", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/b141efdbf21adfcd0a7ec88652409705821be260/docs/mychanges_ptbr.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/b141efdbf21adfcd0a7ec88652409705821be260/docs/mychanges_ptbr.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/docs/mychanges_ptbr.txt?ref=b141efdbf21adfcd0a7ec88652409705821be260", "patch": "@@ -718,4 +718,7 @@ Corrigido 3o job de Cygnus.\n \n 08 - 09 Dezembro 2017,\n Removido UI que aponta erroneamente \"Stat Upgrade\" nos n\ufffdveis 15, 20, 25 e 30.\n-Adicionado comando \"droplimit\", cuja funcionalidade \ufffd informar ao jogador a quantidade de drops no mapa em contraste com o limite permitido.\n\\ No newline at end of file\n+Adicionado comando \"droplimit\", cuja funcionalidade \ufffd informar ao jogador a quantidade de drops no mapa em contraste com o limite permitido.\n+\n+11 Dezembro 2017,\n+Resolvido bug onde contador do drops do mapa n\ufffdo atualizaria seu valor em casos onde reatores consomem itens ou ao se aplicar comandos como \"cleardrops\".\n\\ No newline at end of file"}, {"sha": "a5e933e90f219f188228dca642fae0aed2aff6d8", "filename": "scripts/quest/20101.js", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/b141efdbf21adfcd0a7ec88652409705821be260/scripts/quest/20101.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/b141efdbf21adfcd0a7ec88652409705821be260/scripts/quest/20101.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/20101.js?ref=b141efdbf21adfcd0a7ec88652409705821be260", "patch": "@@ -1,5 +1,5 @@\n /* \n- * Cygnus 1st Job advancement - Soul \n+ * Cygnus 1st Job advancement - Dawn Warrior\n  */\n \n importPackage(Packages.client);\n@@ -18,9 +18,9 @@ function end(mode, type, selection) {\n     \tstatus++;\n     }\n     if (status == 0) {\n-    \tqm.sendYesNo(\"Have you made your decision? The decision will be final, so think carefully before deciding what to do. Are you sure you want to become a Soul Master?\");\n+    \tqm.sendYesNo(\"Have you made your decision? The decision will be final, so think carefully before deciding what to do. Are you sure you want to become a Dawn Warrior?\");\n     } else if (status == 1) {\n-    \tqm.sendNext(\"I have just molded your body to make it perfect for a Soul Master. If you wish to become more powerful, use Stat Window (S) to raise the appropriate stats. If you aren't sure what to raise, just click on #bAuto#k.\");\n+    \tqm.sendNext(\"I have just molded your body to make it perfect for a Dawn Warrior. If you wish to become more powerful, use Stat Window (S) to raise the appropriate stats. If you aren't sure what to raise, just click on #bAuto#k.\");\n \tif (qm.getPlayer().getJob().getId() != 1100) {\n \t    qm.gainItem(1302077, 1);\n \t    qm.gainItem(1142066, 1);\n@@ -33,7 +33,7 @@ function end(mode, type, selection) {\n     } else if (status == 3) {\n     \tqm.sendNextPrev(\"I have also given you a hint of #bSP#k, so open the #bSkill Menu#k to acquire new skills. Of course, you can't raise them at all once, and there are some skills out there where you won't be able to acquire them unless you master the basic skills first.\");\n     } else if (status == 4) {\n-    \tqm.sendNextPrev(\"Unlike your time as a Nobless, once you become the Soul Master, you will lost a portion of your EXP when you run out of HP, okay?\");\n+    \tqm.sendNextPrev(\"Unlike your time as a Nobless, once you become the Dawn Warrior, you will lost a portion of your EXP when you run out of HP, okay?\");\n     } else if (status == 5) {\n     \tqm.sendNextPrev(\"Now... I want you to go out there and show the world how the Knights of Cygnus operate.\");\n     \tqm.dispose();"}, {"sha": "b744f39d81345fe6a6aa7d6fd8f62a4ee53797e3", "filename": "scripts/quest/20102.js", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/b141efdbf21adfcd0a7ec88652409705821be260/scripts/quest/20102.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/b141efdbf21adfcd0a7ec88652409705821be260/scripts/quest/20102.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/20102.js?ref=b141efdbf21adfcd0a7ec88652409705821be260", "patch": "@@ -1,5 +1,5 @@\n /*\n- * Cygnus 1st Job advancement - Flame Wizard\n+ * Cygnus 1st Job advancement - Blaze Wizard\n  */\n \n importPackage(Packages.client);\n@@ -18,9 +18,9 @@ function end(mode, type, selection) {\n     \tstatus++;\n     }\n     if (status == 0) {\n-    \tqm.sendYesNo(\"Have you made your decision? The decision will be final, so think carefully before deciding what to do. Are you sure you want to become a Flame Wizard?\");\n+    \tqm.sendYesNo(\"Have you made your decision? The decision will be final, so think carefully before deciding what to do. Are you sure you want to become a Blaze Wizard?\");\n     } else if (status == 1) {\n-    \tqm.sendNext(\"I have just molded your body to make it perfect for a Flame Wizard. If you wish to become more powerful, use Stat Window (S) to raise the appropriate stats. If you aren't sure what to raise, just click on #bAuto#k.\");\n+    \tqm.sendNext(\"I have just molded your body to make it perfect for a Blaze Wizard. If you wish to become more powerful, use Stat Window (S) to raise the appropriate stats. If you aren't sure what to raise, just click on #bAuto#k.\");\n \tif (qm.getPlayer().getJob().getId() != 1200) {\n \t    qm.gainItem(1372043, 1);\n \t    qm.gainItem(1142066, 1);\n@@ -33,7 +33,7 @@ function end(mode, type, selection) {\n     } else if (status == 3) {\n     \tqm.sendNextPrev(\"I have also given you a hint of #bSP#k, so open the #bSkill Menu#k to acquire new skills. Of course, you can't raise them at all once, and there are some skills out there where you won't be able to acquire them unless you master the basic skills first.\");\n     } else if (status == 4) {\n-    \tqm.sendNextPrev(\"Unlike your time as a Nobless, once you become the Flame Wizard, you will lost a portion of your EXP when you run out of HP, okay?\");\n+    \tqm.sendNextPrev(\"Unlike your time as a Nobless, once you become the Blaze Wizard, you will lost a portion of your EXP when you run out of HP, okay?\");\n     } else if (status == 5) {\n     \tqm.sendNextPrev(\"Now... I want you to go out there and show the world how the Knights of Cygnus operate.\");\n     \tqm.dispose();"}, {"sha": "c50653c82e8108c0f8c686312f09c0ecbfca2efc", "filename": "scripts/quest/20103.js", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/b141efdbf21adfcd0a7ec88652409705821be260/scripts/quest/20103.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/b141efdbf21adfcd0a7ec88652409705821be260/scripts/quest/20103.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/20103.js?ref=b141efdbf21adfcd0a7ec88652409705821be260", "patch": "@@ -1,5 +1,5 @@\n /*\n- * Cygnus 1st Job advancement - Wind Breaker\n+ * Cygnus 1st Job advancement - Wind Archer\n  */\n importPackage(Packages.client);\n \n@@ -17,9 +17,9 @@ function end(mode, type, selection) {\n     \tstatus++;\n     }\n     if (status == 0) {\n-    \tqm.sendYesNo(\"Have you made your decision? The decision will be final, so think carefully before deciding what to do. Are you sure you want to become a Wind Breaker?\");\n+    \tqm.sendYesNo(\"Have you made your decision? The decision will be final, so think carefully before deciding what to do. Are you sure you want to become a Wind Archer?\");\n     } else if (status == 1) {\n-    \tqm.sendNext(\"I have just molded your body to make it perfect for a Wind Breaker. If you wish to become more powerful, use Stat Window (S) to raise the appropriate stats. If you aren't sure what to raise, just click on #bAuto#k.\");\n+    \tqm.sendNext(\"I have just molded your body to make it perfect for a Wind Archer. If you wish to become more powerful, use Stat Window (S) to raise the appropriate stats. If you aren't sure what to raise, just click on #bAuto#k.\");\n \tif (qm.getPlayer().getJob().getId() != 1300) {\n \t    qm.gainItem(2060000, 2000);\n \t    qm.gainItem(1452051, 1);\n@@ -33,7 +33,7 @@ function end(mode, type, selection) {\n     } else if (status == 3) {\n     \tqm.sendNextPrev(\"I have also given you a hint of #bSP#k, so open the #bSkill Menu#k to acquire new skills. Of course, you can't raise them at all once, and there are some skills out there where you won't be able to acquire them unless you master the basic skills first.\");\n     } else if (status == 4) {\n-    \tqm.sendNextPrev(\"Unlike your time as a Nobless, once you become the Wind Breaker, you will lost a portion of your EXP when you run out of HP, okay?\");\n+    \tqm.sendNextPrev(\"Unlike your time as a Nobless, once you become the Wind Archer, you will lost a portion of your EXP when you run out of HP, okay?\");\n     } else if (status == 5) {\n     \tqm.sendNextPrev(\"Now... I want you to go out there and show the world how the Knights of Cygnus operate.\");\n     \tqm.dispose();"}, {"sha": "b102c52d9dd57ab02ac4cda77fe403ecc28f4073", "filename": "scripts/quest/20105.js", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/b141efdbf21adfcd0a7ec88652409705821be260/scripts/quest/20105.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/b141efdbf21adfcd0a7ec88652409705821be260/scripts/quest/20105.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/20105.js?ref=b141efdbf21adfcd0a7ec88652409705821be260", "patch": "@@ -1,5 +1,5 @@\n /*\n- * Cygnus 1st Job advancement - Striker\n+ * Cygnus 1st Job advancement - Thunder Breaker\n  */\n importPackage(Packages.client);\n \n@@ -18,9 +18,9 @@ function end(mode, type, selection) {\n     \tstatus++;\n     }\n     if (status == 0) {\n-    \tqm.sendYesNo(\"Have you made your decision? The decision will be final, so think carefully before deciding what to do. Are you sure you want to become a Striker?\");\n+    \tqm.sendYesNo(\"Have you made your decision? The decision will be final, so think carefully before deciding what to do. Are you sure you want to become a Thunder Breaker?\");\n     } else if (status == 1) {\n-    \tqm.sendNext(\"I have just molded your body to make it perfect for a Striker. If you wish to become more powerful, use Stat Window (S) to raise the appropriate stats. If you aren't sure what to raise, just click on #bAuto#k.\");\n+    \tqm.sendNext(\"I have just molded your body to make it perfect for a Thunder Breaker. If you wish to become more powerful, use Stat Window (S) to raise the appropriate stats. If you aren't sure what to raise, just click on #bAuto#k.\");\n \tif (qm.getPlayer().getJob().getId() != 1500) {\n \t    qm.gainItem(1482014, 1);\n \t    qm.gainItem(1142066, 1);\n@@ -33,7 +33,7 @@ function end(mode, type, selection) {\n     } else if (status == 3) {\n     \tqm.sendNextPrev(\"I have also given you a hint of #bSP#k, so open the #bSkill Menu#k to acquire new skills. Of course, you can't raise them at all once, and there are some skills out there where you won't be able to acquire them unless you master the basic skills first.\");\n     } else if (status == 4) {\n-    \tqm.sendNextPrev(\"Unlike your time as a Nobless, once you become the Striker, you will lost a portion of your EXP when you run out of HP, okay?\");\n+    \tqm.sendNextPrev(\"Unlike your time as a Nobless, once you become the Thunder Breaker, you will lost a portion of your EXP when you run out of HP, okay?\");\n     } else if (status == 5) {\n     \tqm.sendNextPrev(\"Now... I want you to go out there and show the world how the Knights of Cygnus operate.\");\n     \tqm.dispose();"}, {"sha": "69cda11d49d8839500504fa31a22b02789886948", "filename": "src/net/server/channel/handlers/CancelBuffHandler.java", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/b141efdbf21adfcd0a7ec88652409705821be260/src/net/server/channel/handlers/CancelBuffHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/b141efdbf21adfcd0a7ec88652409705821be260/src/net/server/channel/handlers/CancelBuffHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/CancelBuffHandler.java?ref=b141efdbf21adfcd0a7ec88652409705821be260", "patch": "@@ -21,7 +21,6 @@\n */\n package net.server.channel.handlers;\n \n-import client.MapleBuffStat;\n import client.MapleClient;\n import client.SkillFactory;\n import constants.skills.Bishop;\n@@ -32,7 +31,6 @@\n import constants.skills.ILArchMage;\n import constants.skills.Marksman;\n import constants.skills.WindArcher;\n-import constants.skills.NightWalker;\n import net.AbstractMaplePacketHandler;\n import net.MaplePacketHandler;\n import tools.MaplePacketCreator;"}, {"sha": "d0d367948583a6f99f21df8be11afe07842af63a", "filename": "src/net/server/channel/handlers/SkillEffectHandler.java", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/b141efdbf21adfcd0a7ec88652409705821be260/src/net/server/channel/handlers/SkillEffectHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/b141efdbf21adfcd0a7ec88652409705821be260/src/net/server/channel/handlers/SkillEffectHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/SkillEffectHandler.java?ref=b141efdbf21adfcd0a7ec88652409705821be260", "patch": "@@ -44,6 +44,7 @@\n import tools.data.input.SeekableLittleEndianAccessor;\n \n public final class SkillEffectHandler extends AbstractMaplePacketHandler {\n+    @Override\n     public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {\n         int skillId = slea.readInt();\n         int level = slea.readByte();\n@@ -57,7 +58,7 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n             case Bishop.BIG_BANG:\n             case Bowmaster.HURRICANE:\n             case Marksman.PIERCING_ARROW:\n-\t\t\tcase ChiefBandit.CHAKRA:\n+            case ChiefBandit.CHAKRA:\n             case Brawler.CORKSCREW_BLOW:\n             case Gunslinger.GRENADE:\n             case Corsair.RAPID_FIRE:"}, {"sha": "58897f6401329266df6c78164507ddd44b6c7ceb", "filename": "src/server/maps/MapleMap.java", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/b141efdbf21adfcd0a7ec88652409705821be260/src/server/maps/MapleMap.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/b141efdbf21adfcd0a7ec88652409705821be260/src/server/maps/MapleMap.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/maps/MapleMap.java?ref=b141efdbf21adfcd0a7ec88652409705821be260", "patch": "@@ -764,9 +764,9 @@ private void makeDisappearExpiredItemDrops() {\n     public void pickItemDrop(byte[] pickupPacket, MapleMapItem mdrop) {\n         broadcastMessage(pickupPacket, mdrop.getPosition());\n         \n+        droppedItemCount.decrementAndGet();\n         this.removeMapObject(mdrop);\n         mdrop.setPickedUp(true);\n-        droppedItemCount.decrementAndGet();\n     }\n     \n     private void spawnDrop(final Item idrop, final Point dropPos, final MapleMapObject dropper, final MapleCharacter chr, final byte droptype, final short questid) {\n@@ -2853,7 +2853,10 @@ public void run() {\n \n                             reactor.setShouldCollect(false);\n                             MapleMap.this.broadcastMessage(MaplePacketCreator.removeItemFromMap(mapitem.getObjectId(), 0, 0), mapitem.getPosition());\n+                            \n+                            droppedItemCount.decrementAndGet();\n                             MapleMap.this.removeMapObject(mapitem);\n+                            \n                             reactor.hitReactor(c);\n \n                             if (reactor.getDelay() > 0) {\n@@ -3164,13 +3167,15 @@ public void setFieldType(int fieldType) {\n     public void clearDrops(MapleCharacter player) {\n         List<MapleMapObject> items = player.getMap().getMapObjectsInRange(player.getPosition(), Double.POSITIVE_INFINITY, Arrays.asList(MapleMapObjectType.ITEM));\n         for (MapleMapObject i : items) {\n+            droppedItemCount.decrementAndGet();\n             player.getMap().removeMapObject(i);\n             player.getMap().broadcastMessage(MaplePacketCreator.removeItemFromMap(i.getObjectId(), 0, player.getId()));\n         }\n     }\n \n     public void clearDrops() {\n         for (MapleMapObject i : getMapObjectsInRange(new Point(0, 0), Double.POSITIVE_INFINITY, Arrays.asList(MapleMapObjectType.ITEM))) {\n+            droppedItemCount.decrementAndGet();\n             removeMapObject(i);\n             this.broadcastMessage(MaplePacketCreator.removeItemFromMap(i.getObjectId(), 0, 0));\n         }"}]}]},
