{"fetchDate": "2019-12-19", "content": [{"sha": "00675ab95d0c95a880a8829ea17b977291e2b1d6", "node_id": "MDY6Q29tbWl0NDUwODIwMjM6MDA2NzVhYjk1ZDBjOTVhODgwYTg4MjllYTE3Yjk3NzI5MWUyYjFkNg==", "commit": {"author": {"name": "Alan Morel", "email": "AlanMorel@users.noreply.github.com", "date": "2018-11-04T00:52:51Z"}, "committer": {"name": "Ronan Lana", "email": "rcpl2010@gmail.com", "date": "2018-11-04T00:52:51Z"}, "message": "It's never too late to fix old code boys! (#268)\n\n* It's never too late to fix old code boys!\r\n\r\nCache items so the array isn't returned multiple times and cache Gachapon.values() for maximum performance and stability\r\n\r\n* Java 7 memes", "tree": {"sha": "cbbb9edea381704d25cc032d320e2fea5f3f588f", "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/trees/cbbb9edea381704d25cc032d320e2fea5f3f588f"}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/commits/00675ab95d0c95a880a8829ea17b977291e2b1d6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/00675ab95d0c95a880a8829ea17b977291e2b1d6", "html_url": "https://github.com/ronancpl/HeavenMS/commit/00675ab95d0c95a880a8829ea17b977291e2b1d6", "comments_url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/00675ab95d0c95a880a8829ea17b977291e2b1d6/comments", "author": {"login": "AlanMorel", "id": 8239700, "node_id": "MDQ6VXNlcjgyMzk3MDA=", "avatar_url": "https://avatars3.githubusercontent.com/u/8239700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlanMorel", "html_url": "https://github.com/AlanMorel", "followers_url": "https://api.github.com/users/AlanMorel/followers", "following_url": "https://api.github.com/users/AlanMorel/following{/other_user}", "gists_url": "https://api.github.com/users/AlanMorel/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlanMorel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlanMorel/subscriptions", "organizations_url": "https://api.github.com/users/AlanMorel/orgs", "repos_url": "https://api.github.com/users/AlanMorel/repos", "events_url": "https://api.github.com/users/AlanMorel/events{/privacy}", "received_events_url": "https://api.github.com/users/AlanMorel/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9c7763be8c306cadc86c1efe0c5ae543e2c8d8de", "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/9c7763be8c306cadc86c1efe0c5ae543e2c8d8de", "html_url": "https://github.com/ronancpl/HeavenMS/commit/9c7763be8c306cadc86c1efe0c5ae543e2c8d8de"}], "stats": {"total": 38, "additions": 25, "deletions": 13}, "files": [{"sha": "febe23839ca1f5a754ac196e906093b52261bc44", "filename": "src/server/gachapon/GachaponItems.java", "status": "modified", "additions": 17, "deletions": 7, "changes": 24, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/00675ab95d0c95a880a8829ea17b977291e2b1d6/src/server/gachapon/GachaponItems.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/00675ab95d0c95a880a8829ea17b977291e2b1d6/src/server/gachapon/GachaponItems.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/gachapon/GachaponItems.java?ref=00675ab95d0c95a880a8829ea17b977291e2b1d6", "patch": "@@ -33,13 +33,23 @@\n \tpublic abstract int [] getUncommonItems();\n \tpublic abstract int [] getRareItems();\n \t\n-\tpublic int[] getItems(int tier) {\n-\t\tif (tier == 0){\n-\t\t\treturn getCommonItems();\n-\t\t} else if (tier == 1){\n-\t\t\treturn getUncommonItems();\n-\t\t} else if (tier == 2){\n-\t\t\treturn getRareItems();\n+\tprivate final int [] commonItems;\n+\tprivate final int [] uncommonItems;\n+\tprivate final int [] rareItems;\n+\t\n+\tpublic GachaponItems() {\n+\t\tthis.commonItems = getCommonItems();\n+\t\tthis.uncommonItems = getUncommonItems();\n+\t\tthis.rareItems = getRareItems();\n+\t}\n+\n+\tpublic final int[] getItems(int tier) {\n+\t\tif (tier == 0) {\n+\t\t\treturn commonItems;\n+\t\t} else if (tier == 1) {\n+\t\t\treturn uncommonItems;\n+\t\t} else if (tier == 2) {\n+\t\t\treturn rareItems;\n \t\t}\n \t\treturn null;\n \t}"}, {"sha": "49dcf4dc095bcf4dc782866ffcc9e0ce7d80b0fb", "filename": "src/server/gachapon/MapleGachapon.java", "status": "modified", "additions": 8, "deletions": 6, "changes": 14, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/00675ab95d0c95a880a8829ea17b977291e2b1d6/src/server/gachapon/MapleGachapon.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/00675ab95d0c95a880a8829ea17b977291e2b1d6/src/server/gachapon/MapleGachapon.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/gachapon/MapleGachapon.java?ref=00675ab95d0c95a880a8829ea17b977291e2b1d6", "patch": "@@ -49,18 +49,20 @@ public static MapleGachapon getInstance() {\n \t\tNEW_LEAF_CITY(9100109, 90, 8, 2, new NewLeafCity()),\n \t\tNAUTILUS_HARBOR(9100117, 90, 8, 2, new NautilusHarbor());\n \n+\t\tprivate static final Gachapon[] values = Gachapon.values();\n+\n \t\tprivate GachaponItems gachapon;\n \t\tprivate int npcId;\n \t\tprivate int common;\n \t\tprivate int uncommon;\n \t\tprivate int rare;\n \n \t\tprivate Gachapon(int npcid, int c, int u, int r, GachaponItems g) {\n-\t\t\tnpcId = npcid;\n-\t\t\tgachapon = g;\n-\t\t\tcommon = c;\n-\t\t\tuncommon = u;\n-\t\t\trare = r;\n+\t\t\tthis.npcId = npcid;\n+\t\t\tthis.gachapon = g;\n+\t\t\tthis.common = c;\n+\t\t\tthis.uncommon = u;\n+\t\t\tthis.rare = r;\n \t\t}\n \n \t\tprivate int getTier() {\n@@ -85,7 +87,7 @@ public int getItem(int tier) {\n \t\t}\n \n \t\tpublic static Gachapon getByNpcId(int npcId) {\n-\t\t\tfor (Gachapon gacha : Gachapon.values()) {\n+\t\t\tfor (Gachapon gacha : values) {\n \t\t\t\tif (npcId == gacha.npcId) {\n \t\t\t\t\treturn gacha;\n \t\t\t\t}"}]}]},
