{"fetchDate": "2019-12-19", "content": [{"sha": "ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "node_id": "MDY6Q29tbWl0NDUwODIwMjM6ZWQ2MTIxZGQ1ZmQ0ZjE3ZWYyYWU4MGQxYjEwNGZiYmY1Yzg1YjBjZg==", "commit": {"author": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2017-05-10T13:47:05Z"}, "committer": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2017-05-10T13:47:05Z"}, "message": "NPCs Taxis and Crafters now checks properly\n\nFixed taxis that wouldn't check for mesos upon travel. Fixed crafters\nthat wouldn't check for inventory slots available before crafting items.", "tree": {"sha": "1b39363fd19e1b26c500d15f36b8f9ae02676806", "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/trees/1b39363fd19e1b26c500d15f36b8f9ae02676806"}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/commits/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "html_url": "https://github.com/ronancpl/HeavenMS/commit/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "comments_url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/comments", "author": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ab31f3d48765015bbae32d75ad501a0a10475aa7", "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/ab31f3d48765015bbae32d75ad501a0a10475aa7", "html_url": "https://github.com/ronancpl/HeavenMS/commit/ab31f3d48765015bbae32d75ad501a0a10475aa7"}], "stats": {"total": 1104, "additions": 363, "deletions": 741}, "files": [{"sha": "64127f06331f5b4dcf39e9a850c924982c46fb4a", "filename": "9270017.js", "status": "removed", "additions": 0, "deletions": 53, "changes": 53, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ab31f3d48765015bbae32d75ad501a0a10475aa7/9270017.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ab31f3d48765015bbae32d75ad501a0a10475aa7/9270017.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/9270017.js?ref=ab31f3d48765015bbae32d75ad501a0a10475aa7", "patch": "@@ -1,53 +0,0 @@\n-/*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc> \n-                       Matthias Butz <matze@odinms.de>\n-                       Jan Christian Meyer <vimes@odinms.de>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License version 3\n-    as published by the Free Software Foundation. You may not use, modify\n-    or distribute this program under any other version of the\n-    GNU Affero General Public License.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU Affero General Public License for more details.\n-\n-    You should have received a copy of the GNU Affero General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-*/\n-\n-/**\n--- Odin JavaScript --------------------------------------------------------------------------------\n-\tXinga - Pilot\n--- By ---------------------------------------------------------------------------------------------\n-\tInformation\n--- Version Info -----------------------------------------------------------------------------------\n-\t1.0 - First Version by Information\n-\t2.0 - Second Version by Jayd\n----------------------------------------------------------------------------------------------------\n-**/\n-\n-var status = 0;\n-\n-function start() {\n-    cm.sendYesNo(\"The plane will be taking off soon, will you leave now? You will have to buy the plane ticket again to come in here.\");\n-}\n-\n-function action(mode, type, selection) {\n-    if (mode != 1) {\n-        if (mode == 0)\n-            cm.sendOk(\"Please hold on for a sec, and plane will be taking off. Thanks for your patience.\");\n-        cm.dispose();\n-        return;\n-    }\n-    status++;\n-    if (status == 1) {\n-        cm.sendNext(\"The ticket is not refundable, hope to see you again!\");\n-    } else if(status == 2){\n-\t\tcm.warp(103000000);\n-\t\tcm.dispose();\n-    }\n-}\n\\ No newline at end of file"}, {"sha": "f655803d27d12a672b5e4485dcd77c48abb41014", "filename": "9270018.js", "status": "removed", "additions": 0, "deletions": 86, "changes": 86, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ab31f3d48765015bbae32d75ad501a0a10475aa7/9270018.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ab31f3d48765015bbae32d75ad501a0a10475aa7/9270018.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/9270018.js?ref=ab31f3d48765015bbae32d75ad501a0a10475aa7", "patch": "@@ -1,86 +0,0 @@\n-/*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc> \n-                       Matthias Butz <matze@odinms.de>\n-                       Jan Christian Meyer <vimes@odinms.de>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License version 3\n-    as published by the Free Software Foundation. You may not use, modify\n-    or distribute this program under any other version of the\n-    GNU Affero General Public License.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU Affero General Public License for more details.\n-\n-    You should have received a copy of the GNU Affero General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-*/\n-\n-/**\n--- Odin JavaScript --------------------------------------------------------------------------------\n-\tKerny - Pilot\n--- By ---------------------------------------------------------------------------------------------\n-\tInformation\n--- Version Info -----------------------------------------------------------------------------------\n-\t1.0 - First Version by Information\n-\t2.0 - Second Version by Jayd\n----------------------------------------------------------------------------------------------------\n-**/\n-var k2s;\n-var airport;\n-var s2k;\n-\n-function start() {\n-\tstatus = -1;\n-\taction(1, 0, 0);\n-}\n-\n-function action(mode, type, selection) {\n-\tif(mode == -1) {\n-\t\tcm.dispose();\n-\t\treturn;\n-\t}\n-\tif(mode == 1) {\n-\t\tstatus++;\n-\t}\n-\tif(mode == 0) {\n-\t\tif (cm.getMapId() == 540010101) {\n-\t\t\tcm.sendOk(\"Please hold on for a sec, and we're reaching Singapore! Thanks for your patience.\");\n-\t\t\tcm.dispose();\n-\t\t\treturn;\n-\t\t} else {\n-\t\t\tcm.sendOk(\"Please hold on for a sec, and we're reaching Kerning City! Thanks for your patience.\");\n-\t\t\tcm.dispose();\n-\t\t\treturn;\n-\t\t}\n-\t}\n-\tif(status == 0) {\n-\t\tif (cm.getMapId() == 540010001) {\n-\t\t\tcm.sendYesNo(\"The plane is taking off soon, are you sure you want to leave now? The ticket is not refundable.\");\n-\t\t\tairport = 1;\n-\t\t} else if (cm.getMapId() == 540010002) {\n-\t\t\tcm.sendYesNo(\"We're reaching Kerning City in a minute, are you sure you want to leave now? The ticket is not refundable.\");\n-\t\t\ts2k = 1;\n-\t\t} else if (cm.getMapId() == 540010101) {\n-\t\t\tcm.sendYesNo(\"We're reaching Singapore in a minute, are you sure you want to leave now? The ticket is not refundable.\");\n-\t\t\tk2s = 1;\n-\t\t}\n-\t} else if(status == 1) {\n-\t\tif (k2s == 1) {\n-\t\t\tcm.warp(103000000);\n-\t\t\tcm.sendOk(\"Hope to see you again soon!\");\n-\t\t\tcm.dispose();\n-\t\t} else if (airport == 1) {\n-\t\t\tcm.warp(540010000);\n-\t\t\tcm.sendOk(\"Hope to see you again soon!\");\n-\t\t\tcm.dispose();\n-\t\t} else if (s2k == 1) {\n-\t\t\tcm.warp(540010000);\n-\t\t\tcm.sendOk(\"Hope to see you again soon!\");\n-\t\t\tcm.dispose();\n-\t\t}\n-\t}\n-}\n\\ No newline at end of file"}, {"sha": "cacc6d4481cf8751c91981dfd1d1fb300cb09083", "filename": "9270038.js", "status": "removed", "additions": 0, "deletions": 80, "changes": 80, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ab31f3d48765015bbae32d75ad501a0a10475aa7/9270038.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ab31f3d48765015bbae32d75ad501a0a10475aa7/9270038.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/9270038.js?ref=ab31f3d48765015bbae32d75ad501a0a10475aa7", "patch": "@@ -1,80 +0,0 @@\n-/*\r\n-\tThis file is part of the OdinMS Maple Story Server\r\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc> \r\n-                       Matthias Butz <matze@odinms.de>\r\n-                       Jan Christian Meyer <vimes@odinms.de>\r\n-\r\n-    This program is free software: you can redistribute it and/or modify\r\n-    it under the terms of the GNU Affero General Public License version 3\r\n-    as published by the Free Software Foundation. You may not use, modify\r\n-    or distribute this program under any other version of the\r\n-    GNU Affero General Public License.\r\n-\r\n-    This program is distributed in the hope that it will be useful,\r\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n-    GNU Affero General Public License for more details.\r\n-\r\n-    You should have received a copy of the GNU Affero General Public License\r\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n-*/\r\n-\r\n-/**\r\n--- Odin JavaScript --------------------------------------------------------------------------------\r\n-\tShalon - Ticketing Usher\r\n--- By ---------------------------------------------------------------------------------------------\r\n-\tWhoever written this script\r\n--- Version Info -----------------------------------------------------------------------------------\r\n-\t1.0 - First Version by whoever written this script\r\n-\t2.0 - Second Version by Jayd\r\n----------------------------------------------------------------------------------------------------\r\n-**/\r\n-\r\n-status = -1;\r\n-oldSelection = -1;\r\n-\r\n-function start() {\r\n-    cm.sendSimple(\"Hello, I am Shalon from Singapore Airport. I can assist you in getting you to Kerning City in no time. Do you want to go to Kerning City?\\r\\n#b#L0#I would like to buy a plane ticket to Kerning City\\r\\n#b#L1#Let me go in to the departure point.\");\r\n-}\r\n-\r\n-function action(mode, type, selection) {\r\n-\tstatus++;\r\n-    if (mode <= 0){\r\n-\t\toldSelection = -1;\r\n-\t\tcm.dispose();\r\n-\t}\r\n-\t\r\n-\tif(status == 0){\r\n-\t\tif(selection == 0){\r\n-\t\t\tcm.sendYesNo(\"The ticket will cost you 5,000 mesos. Will you purchase the ticket?\");\r\n-\t\t}else if(selection == 1){\r\n-\t\t\tcm.sendYesNo(\"Would you like to go in now? You will lose your ticket once you go in! Thank you for choosing Wizet Airline.\");\r\n-\t\t}\r\n-\t\toldSelection = selection;\r\n-\t}else if(status == 1){\r\n-\t\tif(oldSelection == 0){\r\n-\t\t\tif (cm.getPlayer().getMeso() > 4999 && cm.getPlayer().haveItem(4031732) == false) {\r\n-\t\t\t\tcm.gainMeso(-5000);\r\n-\t\t\t\tcm.gainItem(4031732);\r\n-\t\t\t\tcm.sendOk(\"Thank you for choosing Wizet Airline! Enjoy your flight!\");\r\n-\t\t\t\tcm.dispose();\r\n-\t\t\t} else if (cm.getPlayer().getMeso() < 4999 || cm.getPlayer().haveItem(4031732)) {\r\n-\t\t\t\tcm.sendOk(\"You do not have enough mesos or you've already purchased a ticket.\");\r\n-\t\t\t\tcm.dispose();\r\n-\t\t\t}\r\n-\t\t}else if(oldSelection == 1){\r\n-\t\t\tif(cm.itemQuantity(4031732) > 0){\r\n-\t\t\t\tvar em = cm.getEventManager(\"AirPlane\");\r\n-\t\t\t\tif(em.getProperty(\"entry\") == \"true\"){\r\n-\t\t\t\t\tcm.warp(540010001);\r\n-\t\t\t\t\tcm.gainItem(4031732, -1);\r\n-\t\t\t\t}else{\r\n-\t\t\t\t\tcm.sendOk(\"Sorry the plane has taken off, please wait a few minutes.\");\r\n-\t\t\t\t}\r\n-\t\t\t}else{\r\n-\t\t\t\tcm.sendOk(\"You need a #b#t4031732##k to get on the plane!\");\r\n-\t\t\t}\r\n-\t\t}\r\n-\t\tcm.dispose();\r\n-\t}\r\n-}\n\\ No newline at end of file"}, {"sha": "bb846d3b6106795e038b9f64e0cb307b40f9fa4b", "filename": "9270041.js", "status": "removed", "additions": 0, "deletions": 80, "changes": 80, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ab31f3d48765015bbae32d75ad501a0a10475aa7/9270041.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ab31f3d48765015bbae32d75ad501a0a10475aa7/9270041.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/9270041.js?ref=ab31f3d48765015bbae32d75ad501a0a10475aa7", "patch": "@@ -1,80 +0,0 @@\n-/*\r\n-\tThis file is part of the OdinMS Maple Story Server\r\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc> \r\n-                       Matthias Butz <matze@odinms.de>\r\n-                       Jan Christian Meyer <vimes@odinms.de>\r\n-\r\n-    This program is free software: you can redistribute it and/or modify\r\n-    it under the terms of the GNU Affero General Public License version 3\r\n-    as published by the Free Software Foundation. You may not use, modify\r\n-    or distribute this program under any other version of the\r\n-    GNU Affero General Public License.\r\n-\r\n-    This program is distributed in the hope that it will be useful,\r\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n-    GNU Affero General Public License for more details.\r\n-\r\n-    You should have received a copy of the GNU Affero General Public License\r\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n-*/\r\n-\r\n-/**\r\n--- Odin JavaScript --------------------------------------------------------------------------------\r\n-\tIrene - Ticketing Usher\r\n--- By ---------------------------------------------------------------------------------------------\r\n-\tWhoever written this script\r\n--- Version Info -----------------------------------------------------------------------------------\r\n-\t1.0 - First Version by whoever written this script\r\n-\t2.0 - Second Version by Jayd\r\n----------------------------------------------------------------------------------------------------\r\n-**/\r\n-\r\n-status = -1;\r\n-oldSelection = -1;\r\n-\r\n-function start() {\r\n-    cm.sendSimple(\"Hello, I am Irene from Singapore Airport. I can assist you in getting you to Singapore in no time. Do you want to go to Singapore?\\r\\n#b#L0#I would like to buy a plane ticket to Singapore\\r\\n#b#L1#Let me go in to the departure point.\");\r\n-}\r\n-\r\n-function action(mode, type, selection) {\r\n-\tstatus++;\r\n-    if (mode <= 0){\r\n-\t\toldSelection = -1;\r\n-\t\tcm.dispose();\r\n-\t}\r\n-\t\r\n-\tif(status == 0){\r\n-\t\tif(selection == 0){\r\n-\t\t\tcm.sendYesNo(\"The ticket will cost you 5,000 mesos. Will you purchase the ticket?\");\r\n-\t\t}else if(selection == 1){\r\n-\t\t\tcm.sendYesNo(\"Would you like to go in now? You will lose your ticket once you go in! Thank you for choosing Wizet Airline.\");\r\n-\t\t}\r\n-\t\toldSelection = selection;\r\n-\t}else if(status == 1){\r\n-\t\tif(oldSelection == 0){\r\n-\t\t\tif (cm.getPlayer().getMeso() > 4999 && cm.getPlayer().haveItem(4031731) == false) {\r\n-\t\t\t\tcm.gainMeso(-5000);\r\n-\t\t\t\tcm.gainItem(4031731);\r\n-\t\t\t\tcm.sendOk(\"Thank you for choosing Wizet Airline! Enjoy your flight!\");\r\n-\t\t\t\tcm.dispose();\r\n-\t\t\t} else if (cm.getPlayer().getMeso() < 4999 || cm.getPlayer().haveItem(4031731)) {\r\n-\t\t\t\tcm.sendOk(\"You do not have enough mesos or you've already purchased a ticket.\");\r\n-\t\t\t\tcm.dispose();\r\n-\t\t\t}\r\n-\t\t}else if(oldSelection == 1){\r\n-\t\t\tif(cm.itemQuantity(4031731) > 0){\r\n-\t\t\t\tvar em = cm.getEventManager(\"AirPlane\");\r\n-\t\t\t\tif(em.getProperty(\"entry\") == \"true\"){\r\n-\t\t\t\t\tcm.warp(540010100);\r\n-\t\t\t\t\tcm.gainItem(4031731, -1);\r\n-\t\t\t\t}else{\r\n-\t\t\t\t\tcm.sendOk(\"Sorry the plane has taken off, please wait a few minutes.\");\r\n-\t\t\t\t}\r\n-\t\t\t}else{\r\n-\t\t\t\tcm.sendOk(\"You need a #b#t4031731##k to get on the plane!\");\r\n-\t\t\t}\r\n-\t\t}\r\n-\t\tcm.dispose();\r\n-\t}\r\n-}\n\\ No newline at end of file"}, {"sha": "6807a2ba1902a255b464065dd83188d73fbe6d01", "filename": "nbproject/private/private.xml", "status": "modified", "additions": 1, "deletions": 11, "changes": 12, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/nbproject/private/private.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/nbproject/private/private.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/nbproject/private/private.xml?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -2,16 +2,6 @@\n <project-private xmlns=\"http://www.netbeans.org/ns/project-private/1\">\n     <editor-bookmarks xmlns=\"http://www.netbeans.org/ns/editor-bookmarks/2\" lastBookmarkId=\"0\"/>\n     <open-files xmlns=\"http://www.netbeans.org/ns/projectui-open-files/2\">\n-        <group>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/event/Ellin.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/world0/2094000.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/event/BossRushPQ.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/scripting/event/EventInstanceManager.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/event/KerningPQ.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/world0/9000037.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/world0/9020000.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/event/PiratePQ.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/world0/2133000.js</file>\n-        </group>\n+        <group/>\n     </open-files>\n </project-private>"}, {"sha": "e7652daba4303eadbaddbe78f2c26ee72b237f5a", "filename": "scripts/npc/world0/1002004.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/1002004.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/1002004.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/1002004.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -46,7 +46,7 @@ function action(mode, type, selection) {\n     }\n     if (status == 1) {\n         cm.sendYesNo(cm.getJobId() == 0 ? \"We have a special 90% discount for beginners. The Ant Tunnel is located deep inside in the dungeon that's placed at the center of the Victoria Island, where the 24 Hr Mobile Store is. Would you like to go there for #b1,000 mesos#k?\" : \"The regular fee applies for all non-beginners. The Ant Tunnel is located deep inside in the dungeon that's placed at the center of the Victoria Island, where 24 Hr Mobile Store is. Would you like to go there for #b10,000 mesos#k?\");\n-        cost *= cm.getJobId() == 0 ? 10 : 1;\n+        cost /= ((cm.getJobId() == 0) ? 10 : 1);\n     } else if (status == 2) {\n         if (cm.getMeso() < cost)\n             cm.sendNext(\"It looks like you don't have enough mesos. Sorry but you won't be able to use this without it.\")"}, {"sha": "ddf662c0fbc4b25a789334289833640c7c690f42", "filename": "scripts/npc/world0/1002007.js", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/1002007.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/1002007.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/1002007.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -46,17 +46,19 @@ function action(mode, type, selection) {\n             cm.sendYesNo(\"You don't have anything else to do here, huh? Do you really want to go to #b#m\" + maps[selection] + \"##k? It'll cost you #b\"+ (cm.getJobId() == 0 ? cost[selection] / 10 : cost[selection]) + \" mesos#k.\");\n             selectedMap = selection;\n         } else if (status == 3) {\n-            if (cm.getMeso() < (cm.getJobId() == 0 ? cost[selection] / 10 : cost[selection])) {\n+            if (cm.getJobId() == 0) {\n+            \tmesos = cost[selectedMap] / 10;\n+            } else {\n+            \tmesos = cost[selectedMap];\n+            }\n+            \n+            if (cm.getMeso() < mesos) {\n                 cm.sendNext(\"You don't have enough mesos. Sorry to say this, but without them, you won't be able to ride the cab.\");\n                 cm.dispose();\n                 return;\n             }\n-            if (cm.getJobId() == 0) {\n-            \tmesos = -cost[selectedMap] / 10;\n-            } else {\n-            \tmesos = -cost[selectedMap];\n-            }\n-            cm.gainMeso(mesos);            \n+            \n+            cm.gainMeso(-mesos);\n             cm.warp(maps[selectedMap], 0);\n             cm.dispose();\n         }"}, {"sha": "9cd96cd7c939b2d097f3f0fac5440ff9d0705ad4", "filename": "scripts/npc/world0/1012000.js", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/1012000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/1012000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/1012000.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -36,17 +36,19 @@ function action(mode, type, selection) {\n             cm.sendYesNo(\"You don't have anything else to do here, huh? Do you really want to go to #b#m\" + maps[selection] + \"##k? It'll cost you #b\"+ (cm.getJobId() == 0 ? cost[selection] / 10 : cost[selection]) + \" mesos#k.\");\n             selectedMap = selection;\n         } else if (status == 3) {\n-            if (cm.getMeso() < (cm.getJobId() == 0 ? cost[selection] / 10 : cost[selection])) {\n+            if (cm.getJobId() == 0) {\n+            \tmesos = cost[selectedMap] / 10;\n+            } else {\n+            \tmesos = cost[selectedMap];\n+            }\n+            \n+            if (cm.getMeso() < mesos) {\n                 cm.sendNext(\"You don't have enough mesos. Sorry to say this, but without them, you won't be able to ride the cab.\");\n                 cm.dispose();\n                 return;\n             }\n-            if (cm.getJobId() == 0) {\n-            \tmesos = -cost[selectedMap] / 10;\n-            } else {\n-            \tmesos = -cost[selectedMap];\n-            }\n-            cm.gainMeso(mesos);\n+            \n+            cm.gainMeso(-mesos);\n             cm.warp(maps[selectedMap], 0);\n             cm.dispose();\n         }"}, {"sha": "fd2dc3035868b26a75c3295d98e90be9e068b619", "filename": "scripts/npc/world0/1012002.js", "status": "modified", "additions": 14, "deletions": 9, "changes": 23, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/1012002.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/1012002.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/1012002.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -167,21 +167,26 @@ function action(mode, type, selection) {\n         if (!complete)\n             cm.sendOk(\"Surely you, of all people, would understand the value of having quality items? I can't do that without the items I require.\");\n         else {\n-            if (cm.canHold(item)) {\n+            var recvItem = item, recvQty;\n+            \n+            if (item >= 2060000 && item <= 2060002) //bow arrows\n+                recvQty = 1000 - (item - 2060000) * 100;\n+            else if (item >= 2061000 && item <= 2061002) //xbow arrows\n+                recvQty = 1000 - (item - 2061000) * 100;\n+            else if (item == 4003000)//screws\n+                recvQty = 15 * qty;\n+            else\n+                recvQty = qty;\n+            \n+            if (cm.canHold(recvItem, recvQty)) {\n                 if (mats instanceof Array) {\n                     for (var i = 0; i < mats.length; i++)\n                         cm.gainItem(mats[i], -(matQty[i] * qty));\n                 }else\n                     cm.gainItem(mats, -(matQty * qty));\n                 cm.gainMeso(-(cost * qty));\n-                if (item >= 2060000 && item <= 2060002) //bow arrows\n-                    cm.gainItem(item, 1000 - (item - 2060000) * 100);\n-                else if (item >= 2061000 && item <= 2061002) //xbow arrows\n-                    cm.gainItem(item, 1000 - (item - 2061000) * 100);\n-                else if (item == 4003000)//screws\n-                    cm.gainItem(4003000, 15 * qty);\n-                else\n-                    cm.gainItem(item, qty);\n+                \n+                cm.gainItem(recvItem, recvQty);\n                 cm.sendOk(\"A perfect item, as usual. Come and see me if you need anything else.\");\n             }else {\n                 cm.sendOk(\"Please make sure you have room in your inventory, and talk to me again.\");"}, {"sha": "e7c5b53f3dfc2e70c44a325237432804596e132b", "filename": "scripts/npc/world0/1022001.js", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/1022001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/1022001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/1022001.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -36,17 +36,19 @@ function action(mode, type, selection) {\n             cm.sendYesNo(\"You don't have anything else to do here, huh? Do you really want to go to #b#m\" + maps[selection] + \"##k? It'll cost you #b\"+ (cm.getJobId() == 0 ? cost[selection] / 10 : cost[selection]) + \" mesos#k.\");\n             selectedMap = selection;\n         } else if (status == 3) {\n-            if (cm.getMeso() < (cm.getJobId() == 0 ? cost[selection] / 10 : cost[selection])) {\n+            if (cm.getJobId() == 0) {\n+            \tmesos = cost[selectedMap] / 10;\n+            } else {\n+            \tmesos = cost[selectedMap];\n+            }\n+            \n+            if (cm.getMeso() < mesos) {\n                 cm.sendNext(\"You don't have enough mesos. Sorry to say this, but without them, you won't be able to ride the cab.\");\n                 cm.dispose();\n                 return;\n             }\n-            if (cm.getJobId() == 0) {\n-            \tmesos = -cost[selectedMap] / 10;\n-            } else {\n-            \tmesos = -cost[selectedMap];\n-            }\n-            cm.gainMeso(mesos);\n+            \n+            cm.gainMeso(-mesos);\n             cm.warp(maps[selectedMap], 0);\n             cm.dispose();\n         }"}, {"sha": "90f0cb61c5db450e42c2ba2c310674bf2df62090", "filename": "scripts/npc/world0/1022003.js", "status": "modified", "additions": 1, "deletions": 21, "changes": 22, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/1022003.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/1022003.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/1022003.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -180,7 +180,7 @@ function action(mode, type, selection) {\n     else if (status == 4 && mode == 1) {\n         var complete = true;\n         \n-        if(!cm.canHold(item)) {\n+        if(!cm.canHold(item, qty)) {\n             cm.sendOk(\"Check your inventory for a free slot first.\");\n             cm.dispose();\n             return;\n@@ -200,26 +200,6 @@ function action(mode, type, selection) {\n             }\n             else if (!cm.haveItem(mats, matQty))\n                 complete = false;\n-            \n-            /* if (mats instanceof Array) {\n-                for(var i = 0; complete && i < mats.length; i++)\n-                {\n-                    if (matQty[i] * qty == 1)   {\n-                        if (!cm.haveItem(mats[i]))\n-                        {\n-                            complete = false;\n-                        }\n-                    }\n-                    else {\n-                        if (!cm.haveItem(mats[i],matQty[i] * selection)) complete=false;\n-\n-                    }\n-                }\n-            }\n-            else {\n-                if (!cm.haveItem(mats,matQty * selection)) complete=false;\n-\n-            } */\n         }       \n         if (!complete)\n             cm.sendOk(\"I'm afraid you're missing something for the item you want. See you another time, yes?\");"}, {"sha": "5017dc450af9a4ac47ea66db712b0d15e9289792", "filename": "scripts/npc/world0/1022004.js", "status": "modified", "additions": 8, "deletions": 26, "changes": 34, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/1022004.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/1022004.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/1022004.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -165,8 +165,14 @@ function action(mode, type, selection) {\n     }\n     else if (status == 4 && mode == 1) {\n         var complete = true;\n+        var recvItem = item, recvQty;\n+        \n+        if (item == 4003000)//screws\n+            recvQty = 15 * qty;\n+        else\n+            recvQty = qty;\n \t\t\n-        if(!cm.canHold(item)) {\n+        if(!cm.canHold(recvItem, recvQty)) {\n             cm.sendOk(\"Check your inventory for a free slot first.\");\n             cm.dispose();\n             return;\n@@ -186,27 +192,6 @@ function action(mode, type, selection) {\n             }\n             else if (!cm.haveItem(mats, matQty))\n                 complete = false;\n-            \n-            /*\n-            if (mats instanceof Array) {\n-                for(var i = 0; complete && i < mats.length; i++)\n-                {\n-                    if (matQty[i] * qty == 1)\t{\n-                        if (!cm.haveItem(mats[i]))\n-                        {\n-                            complete = false;\n-                        }\n-                    }\n-                    else {\n-\n-                        if (!cm.haveItem(mats[i],matQty[i]*qty)) complete=false;\n-                    }\n-                }\n-            }\n-            else {\n-                if (!cm.haveItem(mats,matQty)) complete=false;\n-            }\n-            */\n         }\n \t\t\t\n         if (!complete)\n@@ -223,10 +208,7 @@ function action(mode, type, selection) {\n             if (cost > 0)\n                 cm.gainMeso(-cost * qty);\n \t\t\t\t\n-            if (item == 4003000)//screws\n-                cm.gainItem(4003000, 15 * qty);\n-            else\n-                cm.gainItem(item, qty);\n+            cm.gainItem(recvItem, recvQty);\n             cm.sendOk(\"Did that come out right? Come by me again if you have anything for me to practice on.\");\n         }\n         cm.dispose();"}, {"sha": "985f1b719111218c68f7e4daff4efe22b81070f5", "filename": "scripts/npc/world0/1032000.js", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/1032000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/1032000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/1032000.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -36,17 +36,19 @@ function action(mode, type, selection) {\n             cm.sendYesNo(\"You don't have anything else to do here, huh? Do you really want to go to #b#m\" + maps[selection] + \"##k? It'll cost you #b\"+ (cm.getJobId() == 0 ? cost[selection] / 10 : cost[selection]) + \" mesos#k.\");\n             selectedMap = selection;\n         } else if (status == 3) {\n-            if (cm.getMeso() < (cm.getJobId() == 0 ? cost[selection] / 10 : cost[selection])) {\n+            if (cm.getJobId() == 0) {\n+            \tmesos = cost[selectedMap] / 10;\n+            } else {\n+            \tmesos = cost[selectedMap];\n+            }\n+            \n+            if (cm.getMeso() < mesos) {\n                 cm.sendNext(\"You don't have enough mesos. Sorry to say this, but without them, you won't be able to ride the cab.\");\n                 cm.dispose();\n                 return;\n             }\n-            if (cm.getJobId() == 0) {\n-            \tmesos = -cost[selectedMap] / 10;\n-            } else {\n-            \tmesos = -cost[selectedMap];\n-            }\n-            cm.gainMeso(mesos);\n+            \n+            cm.gainMeso(-mesos);\n             cm.warp(maps[selectedMap], 0);\n             cm.dispose();\n         }"}, {"sha": "942de6f639ab7203bf2e42bda27dd8a7946724c8", "filename": "scripts/npc/world0/1032002.js", "status": "modified", "additions": 1, "deletions": 21, "changes": 22, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/1032002.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/1032002.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/1032002.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -185,7 +185,7 @@ function action(mode, type, selection) {\n     else if (status == 3 && mode == 1) {\n         var complete = true;\n         \n-        if(!cm.canHold(item)) {\n+        if(!cm.canHold(item, 1)) {\n             cm.sendOk(\"Check your inventory for a free slot first.\");\n             cm.dispose();\n             return;\n@@ -205,26 +205,6 @@ function action(mode, type, selection) {\n             }\n             else if (!cm.haveItem(mats, matQty))\n                 complete = false;\n-            \n-            /*if (mats instanceof Array) {\n-                for(var i = 0; complete && i < mats.length; i++)\n-                {\n-                    if (matQty[i] == 1)\t{\n-                        if (!cm.haveItem(mats[i]))\n-                        {\n-                            complete = false;\n-                        }\n-                    }\n-                    else {\n-\n-                        if (!cm.haveItem(mats[i],matQty[i])) complete=false;\n-                    }\n-                }\n-            }\n-            else {\n-\n-                if (!cm.haveItem(mats,matQty)) complete=false;\n-            }*/\n         }\n \t\t\t\n         if (!complete)"}, {"sha": "e03312c65f9d1f9df948f167104f83c6db03c3c5", "filename": "scripts/npc/world0/1032005.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/1032005.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/1032005.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/1032005.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -46,7 +46,7 @@ function action(mode, type, selection) {\n     }\n     if (status == 1) {\n         cm.sendYesNo(cm.getJobId() == 0 ? \"We have a special 90% discount for beginners. The Ant Tunnel is located deep inside in the dungeon that's placed at the center of the Victoria Island, where the 24 Hr Mobile Store is. Would you like to go there for #b1,000 mesos#k?\" : \"The regular fee applies for all non-beginners. The Ant Tunnel is located deep inside in the dungeon that's placed at the center of the Victoria Island, where 24 Hr Mobile Store is. Would you like to go there for #b10,000 mesos#k?\");\n-        cost *= cm.getJobId() == 0 ? 10 : 1;\n+        cost /= ((cm.getJobId() == 0) ? 10 : 1);\n     } else if (status == 2) {\n         if (cm.getMeso() < cost)\n             cm.sendNext(\"It looks like you don't have enough mesos. Sorry but you won't be able to use this without it.\")"}, {"sha": "8f4377a871693611c382f14ee368386c090921ca", "filename": "scripts/npc/world0/1052002.js", "status": "modified", "additions": 9, "deletions": 19, "changes": 28, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/1052002.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/1052002.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/1052002.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -205,8 +205,14 @@ function action(mode, type, selection) {\n     }\n     else if (status == 4 && mode == 1) {\n         var complete = true;\n+        var recvItem = item, recvQty;\n         \n-        if(!cm.canHold(item)) {\n+        if (item == 4003000)//screws\n+            recvQty = 15 * qty;\n+        else\n+            recvQty = qty;\n+        \n+        if(!cm.canHold(recvItem, recvQty)) {\n             cm.sendOk(\"Check your inventory for a free slot first.\");\n             cm.dispose();\n             return;\n@@ -226,20 +232,6 @@ function action(mode, type, selection) {\n             }\n             else if (!cm.haveItem(mats, matQty))\n                 complete = false;\n-            /*\n-            if (mats instanceof Array) {\n-                for(var i = 0; complete && i < mats.length; i++)\n-                {\n-                    if (matQty[i] * qty == 1)   \n-                        if (!cm.haveItem(mats[i]))\n-                            complete = false;\n-                    else\n-                        if (!cm.haveItem(mats[i],matQty[i])) complete=false;\n-                }\n-            }\n-            else \n-            \tif (!cm.haveItem(mats,matQty)) complete=false;\n-                */\n         }\n                         \n         if (!complete)\n@@ -254,10 +246,8 @@ function action(mode, type, selection) {\n                 cm.gainItem(mats, -matQty * qty);\n             if (cost > 0)\n                 cm.gainMeso(-cost * qty);\n-            if (item == 4003000)//screws\n-                cm.gainItem(4003000, 15 * qty);\n-            else\n-                cm.gainItem(item, qty);\n+            \n+            cm.gainItem(recvItem, recvQty);\n             cm.sendOk(\"All done. If you need anything else... Well, I'm not going anywhere.\");\n         }\n         cm.dispose();"}, {"sha": "c69bc259fd1e3631da0266ed87e84928f1de2c79", "filename": "scripts/npc/world0/1052003.js", "status": "modified", "additions": 1, "deletions": 13, "changes": 14, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/1052003.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/1052003.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/1052003.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -161,7 +161,7 @@ function action(mode, type, selection) {\n     } else if (status == 4) {\n         var complete = true;\n         \n-        if(!cm.canHold(item)) {\n+        if(!cm.canHold(item, qty)) {\n             cm.sendOk(\"Check your inventory for a free slot first.\");\n             cm.dispose();\n             return;\n@@ -178,18 +178,6 @@ function action(mode, type, selection) {\n             }\n             else if (!cm.haveItem(mats, matQty))\n                 complete = false;\n-            \n-            /*if (mats instanceof Array) {\n-                for (var i = 0; complete && i < mats.length; i++) {\n-                    if (matQty[i] * qty == 1) {\n-                        complete = cm.haveItem(mats[i]);\n-                    } else {\n-                        complete = cm.haveItem(mats[i], matQty[i] * qty);\n-                    }\n-                }\n-            } else {\n-                complete = cm.haveItem(mats, matQty * qty);\n-            }*/\n         }\n                 \n         if (!complete)"}, {"sha": "7e757d92b5f7301795c64ba75432d3f004581e8a", "filename": "scripts/npc/world0/1052016.js", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/1052016.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/1052016.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/1052016.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -36,17 +36,19 @@ function action(mode, type, selection) {\n             cm.sendYesNo(\"You don't have anything else to do here, huh? Do you really want to go to #b#m\" + maps[selection] + \"##k? It'll cost you #b\"+ (cm.getJobId() == 0 ? cost[selection] / 10 : cost[selection]) + \" mesos#k.\");\n             selectedMap = selection;\n         } else if (status == 3) {\n-            if (cm.getMeso() < (cm.getJobId() == 0 ? cost[selection] / 10 : cost[selection])) {\n+            if (cm.getJobId() == 0) {\n+            \tmesos = cost[selectedMap] / 10;\n+            } else {\n+            \tmesos = cost[selectedMap];\n+            }\n+            \n+            if (cm.getMeso() < mesos) {\n                 cm.sendNext(\"You don't have enough mesos. Sorry to say this, but without them, you won't be able to ride the cab.\");\n                 cm.dispose();\n                 return;\n             }\n-            if (cm.getJobId() == 0) {\n-            \tmesos = -cost[selectedMap] / 10;\n-            } else {\n-            \tmesos = -cost[selectedMap];\n-            }\n-            cm.gainMeso(mesos);\n+            \n+            cm.gainMeso(-mesos);\n             cm.warp(maps[selectedMap], 0);\n             cm.dispose();\n         }"}, {"sha": "d8be4a8f0fe2568c66d5f841e6ba1a7ab62b0bbf", "filename": "scripts/npc/world0/1061000.js", "status": "modified", "additions": 1, "deletions": 19, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/1061000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/1061000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/1061000.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -165,7 +165,7 @@ function action(mode, type, selection) {\n     else if (status == 3 && mode == 1) {\n         var complete = true;\n         \n-        if(!cm.canHold(item)) {\n+        if(!cm.canHold(item, 1)) {\n             cm.sendOk(\"Check your inventory for a free slot first.\");\n             cm.dispose();\n             return;\n@@ -184,24 +184,6 @@ function action(mode, type, selection) {\n             }\n             else if (!cm.haveItem(mats, matQty))\n                 complete = false;\n-            \n-            /*\n-            if (mats instanceof Array) {\n-                for(var i = 0; complete && i < mats.length; i++) {\n-                    if (matQty[i] == 1)\t{\n-                        if (!cm.haveItem(mats[i]))\n-                            complete = false;\n-                    }\n-                    else {\n-                        if (!cm.haveItem(mats[i],matQty[i] * selection)) complete=false;\n-\n-                    }\n-                }\n-            }\n-            else {\n-                if (!cm.haveItem(mats,matQty * selection)) complete=false;\n-\n-            }*/\n         }\n         if (!complete)\n             cm.sendOk(\"Sorry, but I have to have those items to get this exactly right. Perhaps next time.\");"}, {"sha": "d4fbf2dd3b2f76302bd27bf778fea7b2bf8bf94d", "filename": "scripts/npc/world0/1092014.js", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/1092014.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/1092014.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/1092014.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -35,17 +35,19 @@ function action(mode, type, selection) {\n             cm.sendYesNo(\"You don't have anything else to do here, huh? Do you really want to go to #b#m\" + maps[selection] + \"##k? It'll cost you #b\"+ (cm.getJobId() == 0 ? cost[selection] / 10 : cost[selection]) + \" mesos#k.\");\n             selectedMap = selection;\n         } else if (status == 3) {\n-            if (cm.getMeso() < (cm.getJobId() == 0 ? cost[selection] / 10 : cost[selection])) {\n+            if (cm.getJobId() == 0) {\n+            \tmesos = cost[selectedMap] / 10;\n+            } else {\n+            \tmesos = cost[selectedMap];\n+            }\n+            \n+            if (cm.getMeso() < mesos) {\n                 cm.sendNext(\"You don't have enough mesos. Sorry to say this, but without them, you won't be able to ride the cab.\");\n                 cm.dispose();\n                 return;\n             }\n-            if (cm.getJobId() == 0) {\n-            \tmesos = -cost[selectedMap] / 10;\n-            } else {\n-            \tmesos = -cost[selectedMap];\n-            }\n-            cm.gainMeso(mesos);\n+            \n+            cm.gainMeso(-mesos);\n             cm.warp(maps[selectedMap], 0);\n             cm.dispose();\n         }"}, {"sha": "1c8c356be4fb3898059a95a13abd3f0aa5648f47", "filename": "scripts/npc/world0/2010003.js", "status": "modified", "additions": 1, "deletions": 19, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/2010003.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/2010003.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/2010003.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -157,7 +157,7 @@ function action(mode, type, selection) {\n     else if (status == 3 && mode == 1) {\n         var complete = true;\n \t\t\n-        if(!cm.canHold(item)) {\n+        if(!cm.canHold(item, 1)) {\n             cm.sendOk(\"Check your inventory for a free slot first.\");\n             cm.dispose();\n             return;\n@@ -177,24 +177,6 @@ function action(mode, type, selection) {\n             }\n             else if (!cm.haveItem(mats, matQty))\n                 complete = false;\n-            /*\n-            if (mats instanceof Array) {\n-                for(var i = 0; complete && i < mats.length; i++)\n-                {\n-                    if (matQty[i] == 1)\t{\n-                        if (!cm.haveItem(mats[i]))\n-                        {\n-                            complete = false;\n-                        }\n-                    }\n-                    else {\n-                        if (!cm.haveItem(mats[i],matQty[i])) complete=false;\n-                    }\n-                }\n-            }\n-            else {\n-                if (!cm.haveItem(mats,matQty)) complete=false;\n-            }*/\n         }\n \t\t\t\n         if (!complete)"}, {"sha": "909e9c6cd70d6b7cedf9f99c0012336d2b759284", "filename": "scripts/npc/world0/2020000.js", "status": "modified", "additions": 46, "deletions": 47, "changes": 93, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/2020000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/2020000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/2020000.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -86,6 +86,7 @@ function action(mode, type, selection) {\n             for (var i = 0; i < items.length; i++){\n                 selStr += \"\\r\\n#L\" + i + \"# \" + items[i] + \"#l\";\n             }\n+            equip = false;\n             cm.sendSimple(selStr);\n         }\n         else if (selectedType == 3){ //crystal refine\n@@ -176,8 +177,7 @@ function action(mode, type, selection) {\n         cm.sendGetNumber(prompt,1,1,100)\n     }\n     else if (status == 3 && mode == 1) {\n-        if (equip)\n-        {\n+        if (equip) {\n             selectedItem = selection;\n             qty = 1;\n         }\n@@ -187,7 +187,7 @@ function action(mode, type, selection) {\n         if (selectedType == 5){ //arrow refine\n             var itemSet = new Array(2060000,2061000,2060001,2061001,2060002,2061002);\n             var matSet = new Array(new Array (4003001,4003004),new Array (4003001,4003004),new Array (4011000,4003001,4003004),new Array (4011000,4003001,4003004),\n-                new Array (4011001,4003001,4003005),new Array (4011001,4003001,4003005));\n+            new Array (4011001,4003001,4003005),new Array (4011001,4003001,4003005));\n             var matQtySet = new Array (new Array (1,1),new Array (1,1),new Array (1,3,10),new Array (1,3,10),new Array (1,5,15),new Array (1,5,15));\n             var costSet = new Array (0,0,0,0,0,0);\n             item = itemSet[selectedItem];\n@@ -219,59 +219,58 @@ function action(mode, type, selection) {\n         cm.sendYesNo(prompt);\n     }\n     else if (status == 4 && mode == 1) {\n-        var complete = true;\n-\t\t\n-        if (cm.getMeso() < cost * qty)\n-        {\n-            cm.sendOk(\"I'm afraid you cannot afford my services.\")\n+        var recvItem = item, recvQty;\n+                \n+        if (item >= 2060000 && item <= 2060002) {//bow arrows\n+            recvQty  = 1000 - (item - 2060000) * 100;\n+        }\n+        else if (item >= 2061000 && item <= 2061002) {//xbow arrows\n+            recvQty  = 1000 - (item - 2061000) * 100;\n+        }\n+        else if (item == 4003000) {//screws\n+            recvQty  = 15 * qty;\n+        }\n+        else {\n+            recvQty  = qty;\n         }\n-        else\n-        {\n-            if (mats instanceof Array) {\n-                for(var i = 0; complete && i < mats.length; i++)\n-                {\n-                    if (matQty[i] * qty == 1)\t{\n-                        if (!cm.haveItem(mats[i]))\n-                        {\n-                            complete = false;\n-                        }\n-                    }\n-                    else {\n-                        if (cm.haveItem(matQty[i]*qty))complete=false;\n \n-                    }\n+        if(!cm.canHold(recvItem, recvQty)) {\n+            cm.sendOk(\"I'm afraid you don't have a slot available for the item in your inventory.\");\n+        } else if (cm.getMeso() < cost * qty) {\n+            cm.sendOk(\"I'm afraid you cannot afford my services.\");\n+        } else {\n+            var complete = true;\n+            \n+            if (mats instanceof Array) {\n+                for(var i = 0; complete && i < mats.length; i++) {\n+                    if (!cm.haveItem(mats[i], matQty[i] * qty))\n+                        complete = false;\n                 }\n             }\n             else {\n-                if (cm.haveItem(matQty*qty))complete=false;\n-\n+                if (!cm.haveItem(mats, matQty * qty))\n+                    complete = false;\n             }\n-        }\n-\t\t\t\n-        if (!complete)\n-            cm.sendOk(\"I can't refine anything for you without the proper items.\");\n-        else {\n-            if (mats instanceof Array) {\n-                for (var i = 0; i < mats.length; i++){\n-                    cm.gainItem(mats[i], -matQty[i] * qty);\n+            \n+            if (!complete)\n+                cm.sendOk(\"I can't refine anything for you without the proper items.\");\n+            else {\n+                if (mats instanceof Array) {\n+                    for (var i = 0; i < mats.length; i++){\n+                        cm.gainItem(mats[i], -matQty[i] * qty);\n+                    }\n                 }\n+                else\n+                    cm.gainItem(mats, -matQty * qty);\n+\n+                if (cost > 0)\n+                    cm.gainMeso(-cost * qty);\n+\n+                cm.gainItem(recvItem, recvQty);\n+                cm.sendOk(\"All done. If you need anything else, just ask.\");\n             }\n-            else\n-                cm.gainItem(mats, -matQty * qty);\n-\t\t\t\t\t\n-            if (cost > 0)\n-                cm.gainMeso(-cost * qty);\n-\t\t\t\t\n-            if (item >= 2060000 && item <= 2060002) //bow arrows\n-                cm.gainItem(item, 1000 - (item - 2060000) * 100);\n-            else if (item >= 2061000 && item <= 2061002) //xbow arrows\n-                cm.gainItem(item, 1000 - (item - 2061000) * 100);\n-            else if (item == 4003000)//screws\n-                cm.gainItem(4003000, 15 * qty);\n-            else\n-                cm.gainItem(item, qty);\n-            cm.sendOk(\"All done. If you need anything else, just ask.\");\n         }\n+        \n         cm.dispose();\n     }\n }\n\\ No newline at end of file"}, {"sha": "e083d02e90521c668e5e392d3d279f130db30788", "filename": "scripts/npc/world0/2020002.js", "status": "modified", "additions": 1, "deletions": 16, "changes": 17, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/2020002.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/2020002.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/2020002.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -158,7 +158,7 @@ function action(mode, type, selection) {\n     else if (status == 3 && mode == 1) {\n         var complete = true;\n         \n-        if(!cm.canHold(item)) {\n+        if(!cm.canHold(item, 1)) {\n             cm.sendOk(\"Check your inventory for a free slot first.\");\n             cm.dispose();\n             return;\n@@ -176,21 +176,6 @@ function action(mode, type, selection) {\n             }\n             else if (!cm.haveItem(mats, matQty))\n                 complete = false;\n-            \n-            /*if (mats instanceof Array) {\n-                for(var i = 0; complete && i < mats.length; i++){\n-                    if (matQty[i] == 1){\n-                        if (!cm.haveItem(mats[i]))\n-                            complete = false;\n-                    }\n-                    else if (!cm.haveItem(mats[i],matQty[i]))\n-                        complete=false;\n-                }\n-            }\n-            \n-            else if (!cm.haveItem(mats,matQty))\n-                complete=false;\n-                */\n         }\n         if (!complete)\n             cm.sendOk(\"I only make quality goods, which I cannot do without the proper materials.\");"}, {"sha": "9327427cf58afc0295cfd12608f70bfb0e11d293", "filename": "scripts/npc/world0/2032001.js", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/2032001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/2032001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/2032001.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -47,12 +47,18 @@ function action(mode, type, selection) {\n         cm.sendGetNumber(\"Okay, so how many do you want me to make?\", 1, 1, 100);\n     else if (status == 2) {\n         var complete = true;\n+        \n         if (cm.getMeso() < 500000 * selection){\n             cm.sendOk(\"I'm sorry, but I am NOT doing this for free.\");\n             cm.dispose();\n             return;\n-        } else if (!cm.haveItem(4004004, 10 * selection))\n+        } else if (!cm.haveItem(4004004, 10 * selection)) {\n             complete = false;\n+        } else if(!cm.canHold(4005004, selection)) {\n+            cm.sendOk(\"Are you having trouble with no empty slots on your inventory? Sort that out first!\");\n+            cm.dispose();\n+            return;\n+        }\n         if (!complete)\n             cm.sendOk(\"I need that ore to refine the Crystal. No exceptions..\");\n         else {"}, {"sha": "536b6ae27f741885bc0b5be6fc899419ce09ad79", "filename": "scripts/npc/world0/2040016.js", "status": "modified", "additions": 17, "deletions": 11, "changes": 28, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/2040016.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/2040016.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/2040016.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -222,10 +222,23 @@ function action(mode, type, selection) {\n     }\n     else if (status == 4 && mode == 1) {\n         var complete = true;\n-\t\t\t\t\n-        if (cm.getMeso() < cost * qty)\n+        var recvItem = item, recvQty;\n+        \n+        if (item >= 2060000 && item <= 2060002) //bow arrows\n+            recvQty = 1000 - (item - 2060000) * 100;\n+        else if (item >= 2061000 && item <= 2061002) //xbow arrows\n+            recvQty = 1000 - (item - 2061000) * 100;\n+        else if (item == 4003000)//screws\n+            recvQty = 15 * qty;\n+        else\n+            recvQty = qty;\n+        \n+        if(!cm.canHold(recvItem, recvQty)) {\n+            cm.sendOk(\"I'm afraid you have no slots available for this transaction.\");\n+        }\n+        else if (cm.getMeso() < cost * qty)\n         {\n-            cm.sendOk(\"I'm afraid you cannot afford my services.\")\n+            cm.sendOk(\"I'm afraid you cannot afford my services.\");\n         }\n         else\n         {\n@@ -262,14 +275,7 @@ function action(mode, type, selection) {\n             if (cost > 0)\n                 cm.gainMeso(-cost * qty);\n \t\t\t\t\n-            if (item >= 2060000 && item <= 2060002) //bow arrows\n-                cm.gainItem(item, 1000 - (item - 2060000) * 100);\n-            else if (item >= 2061000 && item <= 2061002) //xbow arrows\n-                cm.gainItem(item, 1000 - (item - 2061000) * 100);\n-            else if (item == 4003000)//screws\n-                cm.gainItem(4003000, 15 * qty);\n-            else\n-                cm.gainItem(item, qty);\n+            cm.gainItem(recvItem, recvQty);\n             cm.sendOk(\"All done. If you need anything else, you know where to find me.\");\n         }\n         cm.dispose();"}, {"sha": "7a9d92d2559d3a0f631c5d67dd6acfc90c74931a", "filename": "scripts/npc/world0/2040020.js", "status": "modified", "additions": 1, "deletions": 18, "changes": 19, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/2040020.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/2040020.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/2040020.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -220,7 +220,7 @@ function action(mode, type, selection) {\n     } else if (status == 3) {\n         var complete = true;\n         \n-        if(!cm.canHold(item)) {\n+        if(!cm.canHold(item, 1)) {\n             cm.sendOk(\"Check your inventory for a free slot first.\");\n             cm.dispose();\n             return;\n@@ -238,23 +238,6 @@ function action(mode, type, selection) {\n             }\n             else if (!cm.haveItem(mats, matQty))\n                 complete = false;\n-            \n-            /*\n-            if (mats instanceof Array) {\n-                for(var i = 0; complete && i < mats.length; i++) {\n-                    if (matQty[i] == 1)\t{\n-                        if (!cm.haveItem(mats[i])) {\n-                            complete = false;\n-                        }\n-                    } else {\n-                        if (!cm.haveItem(mats[i],matQty[i] * selection))\n-                            complete=false;\n-                    }\n-                }\n-            } else {\n-                if (!cm.haveItem(mats,matQty * selection))\n-                    complete=false;\n-            }*/\n         }\n         if (stimulator){ //check for stimulator\n             if (!cm.haveItem(stimID)) {"}, {"sha": "5f52af4613ed52f60e643d125cc9f41bafda164f", "filename": "scripts/npc/world0/2040021.js", "status": "modified", "additions": 3, "deletions": 19, "changes": 22, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/2040021.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/2040021.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/2040021.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -159,12 +159,12 @@ function action(mode, type, selection) {\n     } else if (status == 3) {\n         var complete = true;\t\t\t\n         \n-        if(!cm.canHold(item)) {\n+        if(!cm.canHold(item, 1)) {\n             cm.sendOk(\"Check your inventory for a free slot first.\");\n             cm.dispose();\n             return;\n         }\n-        else if (cm.getMeso() < (cost)){\n+        else if (cm.getMeso() < cost){\n             cm.sendOk(\"Sorry, we only accept meso.\");\n             cm.dispose();\n             return;\n@@ -177,22 +177,6 @@ function action(mode, type, selection) {\n             }\n             else if (!cm.haveItem(mats, matQty))\n                 complete = false;\n-           \n-           /*\n-            if (mats instanceof Array) {\n-                for (var i = 0; complete && i < mats.length; i++) {\n-                    if (matQty[i] == 1){\n-                        if (!cm.haveItem(mats[i]))\n-                            complete = false;\n-                    } else {\n-                        if (!cm.haveItem(mats[i],matQty[i]))\n-                            complete=false;\n-                    }\n-                }\n-            } else {\n-                if (!cm.haveItem(mats,matQty))\n-                    complete=false;\n-            }*/\n         }\t\t\n         if (stimulator){ //check for stimulator\n             if (!cm.haveItem(stimID)) {\n@@ -213,7 +197,7 @@ function action(mode, type, selection) {\n                 cm.gainItem(stimID, -1);\n                 var deleted = Math.floor(Math.random() * 10);\n                 if (deleted != 0) {\n-                    addRandomItem(item);\n+                    cm.gainItem(item, 1, true, true);\n                     cm.sendOk(\"There, the shoes are ready. Be careful, they're still hot.\");\n                 } else {\n                     cm.sendOk(\"Eek! I think I accidently added too much stimulator and, well, the whole thing is unusable now... Sorry, but I can't offer a refund.\");"}, {"sha": "edba4b857b6dbf7f42dcf77fa0b5b2cdf1cf662c", "filename": "scripts/npc/world0/2040022.js", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/2040022.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/2040022.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/2040022.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -197,10 +197,13 @@ function action(mode, type, selection) {\n     }\n     else if (status == 3 && mode == 1) {\n         var complete = true;\n-\t\t\n-        if (cm.getMeso() < cost)\n+\t\t    \n+        if(!cm.canHold(item, 1)) {\n+            cm.sendOk(\"Verify for a slot in your inventory first.\");\n+        }\n+        else if (cm.getMeso() < cost)\n         {\n-            cm.sendOk(\"I'm afraid my fees are non-negotiable.\")\n+            cm.sendOk(\"I'm afraid my fees are non-negotiable.\");\n         }\n         else\n         {\n@@ -247,7 +250,7 @@ function action(mode, type, selection) {\n                 var deleted = Math.floor(Math.random() * 10);\n                 if (deleted != 0)\n                 {\n-                    addRandomItem(item);\n+                    cm.gainItem(item, 1, true, true);\n                     cm.sendOk(\"Heeere you go! What do you think? Marvellous, isn't it?\");\n                 }\n                 else"}, {"sha": "f2128e4ac378ae2da56ed3dd3985619d56eb7082", "filename": "scripts/npc/world0/2080000.js", "status": "modified", "additions": 1, "deletions": 18, "changes": 19, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/2080000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/2080000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/2080000.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -182,7 +182,7 @@ function action(mode, type, selection) {\n     } else if (status == 3) {\n         var complete = true;\n         \n-        if(!cm.canHold(item)) {\n+        if(!cm.canHold(item, 1)) {\n             cm.sendOk(\"Check your inventory for a free slot first.\");\n             cm.dispose();\n             return;\n@@ -199,23 +199,6 @@ function action(mode, type, selection) {\n             }\n             else if (!cm.haveItem(mats, matQty))\n                 complete = false;\n-            \n-            /* if (mats instanceof Array) {\n-                for(var i = 0; complete && i < mats.length; i++) {\n-                    if (matQty[i] == 1)\t{\n-                        if (!cm.haveItem(mats[i])) {\n-                            complete = false;\n-                        }\n-                    } else {\n-                        if (!cm.haveItem(mats[i], matQty[i]))\n-                            complete=false;\n-                    }\n-                }\n-            } else {\n-                if (!cm.haveItem(mats,matQty))\n-                    complete=false;\n-            }\n-            */\n         }\n         if (stimulator){ //check for stimulator\n             if (!cm.haveItem(stimID)) {"}, {"sha": "3836f4e4a4d6ef4e830f86f096871eb64509924d", "filename": "scripts/npc/world0/2090004.js", "status": "modified", "additions": 3, "deletions": 36, "changes": 39, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/2090004.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/2090004.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/2090004.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -210,41 +210,17 @@ function action(mode, type, selection) {\n \t\t\t\tfor(var i = 0; i < mats.length; i++) {\n                                         if(!cm.haveItem(mats[i], matQty[i]))\n                                                 complete = false;\n-                                    \n-\t\t\t\t\t/* if (matQty[i] == 1) {\n-\t\t\t\t\t\tif (!cm.haveItem(mats[i])) {\n-\t\t\t\t\t\t\tcomplete = false;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t\telse {\n-\t\t\t\t\t\tvar count = 0;\n-\t\t\t\t\t\tvar iter = cm.getInventory(4).listById(mats[i]).iterator();\n-\t\t\t\t\t\twhile (iter.hasNext()) {\n-\t\t\t\t\t\t\tcount += iter.next().getQuantity();\n-\t\t\t\t\t\t}\n-\t\t\t\t\t\tif (count < matQty[i])\n-\t\t\t\t\t\t\tcomplete = false;\n-\t\t\t\t\t} */\t\t\t\t\t\n \t\t\t\t}\n \t\t\t}\n \t\t\telse {\n                                 if(!cm.haveItem(mats, matQty))\n                                         complete = false;\n-                            \n-\t\t\t\t/* var count = 0;\n-\t\t\t\tvar iter = cm.getInventory(4).listById(mats).iterator();\n-\t\t\t\twhile (iter.hasNext()) {\n-\t\t\t\t\tcount += iter.next().getQuantity();\n-\t\t\t\t}\n-\t\t\t\tif (count < matQty)\n-\t\t\t\t\tcomplete = false;\n-                                */\n \t\t\t}\n                         \n                         if(java.lang.Math.random() >= 0.9) //A lucky find! Scroll 60%\n                             item += 1;\n \n-\t\t\tif (!complete || !cm.canHold(item))\n+\t\t\tif (!complete || !cm.canHold(item, 1))\n \t\t\t\tcm.sendOk(\"Please make sure you are neither lacking ingredients or lacking space in your use inventory.\");\n \t\t\telse {\n \t\t\t\tif (mats instanceof Array) {\n@@ -255,7 +231,7 @@ function action(mode, type, selection) {\n \t\t\t\telse\n \t\t\t\t\tcm.gainItem(mats, -matQty);\n \n-\t\t\t\tcm.gainItem(item);\n+\t\t\t\tcm.gainItem(item, 1);\n \t\t\t}\n \n \t\t\tcm.dispose();\n@@ -265,16 +241,7 @@ function action(mode, type, selection) {\n                         \n                         if(!cm.haveItem(item, 100))\n                                 complete = false;\n-\t\t\t\n-\t\t\t/* var count = 0;\n-\t\t\tvar iter = cm.getInventory(4).listById(item).iterator();\n-\t\t\twhile (iter.hasNext()) {\n-\t\t\t\tcount += iter.next().getQuantity();\n-\t\t\t}\n-\t\t\tif (count < 100)\n-\t\t\t\tcomplete = false;\n-                        */\n-                            \n+\t\t\t    \n                         if(!complete) {\n                                 cm.sendOk(\"Please make sure you are neither lacking ingredients or lacking space in your etc inventory.\");\n                                 cm.dispose();"}, {"sha": "740cf3ff55139625717da485358960ae9baf0f02", "filename": "scripts/npc/world0/2100001.js", "status": "modified", "additions": 16, "deletions": 10, "changes": 26, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/2100001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/2100001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/2100001.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -146,10 +146,23 @@ function action(mode, type, selection) {\n         }\n         else if (status == 5 && mode == 1) {\n             var complete = true;\n+            var recvItem = item, recvQty;\n+            \n+            if (item >= 2060000 && item <= 2060002) //bow arrows\n+                recvQty = 1000 - (item - 2060000) * 100;\n+            else if (item >= 2061000 && item <= 2061002) //xbow arrows\n+                recvQty = 1000 - (item - 2061000) * 100;\n+            else if (item == 4003000)//screws\n+                recvQty = 15 * qty;\n+            else\n+                recvQty = qty;\n \n-            if (cm.getMeso() < cost * qty)\n+            if(!cm.canHold(recvItem, recvQty)) {\n+                cm.sendOk(\"I'm afraid you are short in inventory slots for this.\");\n+            }\n+            else if (cm.getMeso() < cost * qty)\n             {\n-                cm.sendOk(\"I'm afraid you cannot afford my services.\")\n+                cm.sendOk(\"I'm afraid you cannot afford my services.\");\n             }\n             else\n             {\n@@ -188,14 +201,7 @@ function action(mode, type, selection) {\n                 if (cost > 0)\n                     cm.gainMeso(-cost * qty);\n \n-                if (item >= 2060000 && item <= 2060002) //bow arrows\n-                    cm.gainItem(item, 1000 - (item - 2060000) * 100);\n-                else if (item >= 2061000 && item <= 2061002) //xbow arrows\n-                    cm.gainItem(item, 1000 - (item - 2061000) * 100);\n-                else if (item == 4003000)//screws\n-                    cm.gainItem(4003000, 15 * qty);\n-                else\n-                    cm.gainItem(item, qty);\n+                cm.gainItem(recvItem, recvQty);\n                 cm.sendOk(\"There, finished. What do you think, a piece of art, isn't it? Well, if you need anything else, you know where to find me.\");\n             }\n             cm.dispose();"}, {"sha": "6263cedf804a22b38e9036e72101fbb88551bf67", "filename": "scripts/npc/world0/2110005.js", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/2110005.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/2110005.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/2110005.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -41,6 +41,7 @@ function action(mode, type, selection) {\n     if (mode == 1) {\n         if (cm.getMeso() < 1500) {\n             cm.sendNext(\"I am sorry, but I think you are short on mesos. I am afraid I can't let you ride this if you do not have enough money to do so. Please come back when you have enough money to use this.\");\n+            cm.dispose();\n        } else {\n             cm.warp(cm.getPlayer().getMapId() == 260020000 ? 261000000 : 260000000, 0);\n \t    cm.gainMeso(-1500);"}, {"sha": "d2189b9bbe75d7293d26d19df782638b0ac00b1b", "filename": "scripts/npc/world0/9000017.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/9000017.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/9000017.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/9000017.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -89,7 +89,7 @@ function action(mode, type, selection) {\n         if (cm.getMeso() < cost * qty) {\n             cm.sendOk(\"Come on! We're not here doing you a favor! We all need money to live properly, so bring the cash so we make deal and start the synthesis.\");\n         }\n-        else if(!cm.canHold(item)) {\n+        else if(!cm.canHold(item, qty)) {\n             cm.sendOk(\"You didn't check if you got a slot to spare on your inventory before our business, no?\");\n         }\n         else {"}, {"sha": "d560bbd6f7fb1bd0e0cf578aaa389498e5963f84", "filename": "scripts/npc/world0/9000036.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/9000036.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/9000036.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/9000036.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -177,11 +177,11 @@ function action(mode, type, selection) {\n         if (!complete)\n             cm.sendOk(\"Are you sure you got all the items required? Double check it!\");\n         else {\n-            if (cm.canHold(item)) {\n+            if (cm.canHold(item, qty)) {\n                 if (mats instanceof Array) {\n                     for (var i = 0; i < mats.length; i++)\n                         cm.gainItem(mats[i], -(matQty[i] * qty));\n-                }else\n+                } else\n                     cm.gainItem(mats, -(matQty * qty));\n                 cm.gainMeso(-(cost * qty));\n                 "}, {"sha": "64127f06331f5b4dcf39e9a850c924982c46fb4a", "filename": "scripts/npc/world0/9270017.js", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/9270017.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/9270017.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/9270017.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -26,13 +26,14 @@\n \tInformation\n -- Version Info -----------------------------------------------------------------------------------\n \t1.0 - First Version by Information\n+\t2.0 - Second Version by Jayd\n ---------------------------------------------------------------------------------------------------\n **/\n \n var status = 0;\n \n function start() {\n-    cm.sendYesNo(\"The plane will be taking off soon, Will you leave now? You will have buy the plane ticket again to come in here.\");\n+    cm.sendYesNo(\"The plane will be taking off soon, will you leave now? You will have to buy the plane ticket again to come in here.\");\n }\n \n function action(mode, type, selection) {\n@@ -44,9 +45,9 @@ function action(mode, type, selection) {\n     }\n     status++;\n     if (status == 1) {\n-        cm.sendNext(\"I have already told you the ticket is not refunable~ hope to see you again~\");\n+        cm.sendNext(\"The ticket is not refundable, hope to see you again!\");\n     } else if(status == 2){\n-\tcm.warp(103000000);\n-\tcm.dispose();\n+\t\tcm.warp(103000000);\n+\t\tcm.dispose();\n     }\n }\n\\ No newline at end of file"}, {"sha": "f655803d27d12a672b5e4485dcd77c48abb41014", "filename": "scripts/npc/world0/9270018.js", "status": "modified", "additions": 36, "deletions": 8, "changes": 44, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/9270018.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/9270018.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/9270018.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -26,8 +26,12 @@\n \tInformation\n -- Version Info -----------------------------------------------------------------------------------\n \t1.0 - First Version by Information\n+\t2.0 - Second Version by Jayd\n ---------------------------------------------------------------------------------------------------\n **/\n+var k2s;\n+var airport;\n+var s2k;\n \n function start() {\n \tstatus = -1;\n@@ -43,16 +47,40 @@ function action(mode, type, selection) {\n \t\tstatus++;\n \t}\n \tif(mode == 0) {\n-\t\tcm.sendOk(\"Please hold on for a sec, and plane will be taking off. Thanks for your patience.\");\n-\t\tcm.dispose();\n-\t\treturn;\n+\t\tif (cm.getMapId() == 540010101) {\n+\t\t\tcm.sendOk(\"Please hold on for a sec, and we're reaching Singapore! Thanks for your patience.\");\n+\t\t\tcm.dispose();\n+\t\t\treturn;\n+\t\t} else {\n+\t\t\tcm.sendOk(\"Please hold on for a sec, and we're reaching Kerning City! Thanks for your patience.\");\n+\t\t\tcm.dispose();\n+\t\t\treturn;\n+\t\t}\n \t}\n \tif(status == 0) {\n-\t\tcm.sendYesNo(\"The plane will be taking off soon, Will you leave now? You will have buy the plane ticket again to come in here.\");\n+\t\tif (cm.getMapId() == 540010001) {\n+\t\t\tcm.sendYesNo(\"The plane is taking off soon, are you sure you want to leave now? The ticket is not refundable.\");\n+\t\t\tairport = 1;\n+\t\t} else if (cm.getMapId() == 540010002) {\n+\t\t\tcm.sendYesNo(\"We're reaching Kerning City in a minute, are you sure you want to leave now? The ticket is not refundable.\");\n+\t\t\ts2k = 1;\n+\t\t} else if (cm.getMapId() == 540010101) {\n+\t\t\tcm.sendYesNo(\"We're reaching Singapore in a minute, are you sure you want to leave now? The ticket is not refundable.\");\n+\t\t\tk2s = 1;\n+\t\t}\n \t} else if(status == 1) {\n-\t\tcm.sendNext(\"I have already told you the ticket is not refunable~ hope to see you again~\");\n-\t} else if(status == 2) {\n-\t\tcm.warp(540010000);\n-\t\tcm.dispose();\n+\t\tif (k2s == 1) {\n+\t\t\tcm.warp(103000000);\n+\t\t\tcm.sendOk(\"Hope to see you again soon!\");\n+\t\t\tcm.dispose();\n+\t\t} else if (airport == 1) {\n+\t\t\tcm.warp(540010000);\n+\t\t\tcm.sendOk(\"Hope to see you again soon!\");\n+\t\t\tcm.dispose();\n+\t\t} else if (s2k == 1) {\n+\t\t\tcm.warp(540010000);\n+\t\t\tcm.sendOk(\"Hope to see you again soon!\");\n+\t\t\tcm.dispose();\n+\t\t}\n \t}\n }\n\\ No newline at end of file"}, {"sha": "2264221458e4805115326042e87d410523575c9b", "filename": "scripts/npc/world0/9270038.js", "status": "modified", "additions": 42, "deletions": 3, "changes": 45, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/9270038.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/9270038.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/9270038.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -1,8 +1,40 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc> \n+                       Matthias Butz <matze@odinms.de>\n+                       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License version 3\n+    as published by the Free Software Foundation. You may not use, modify\n+    or distribute this program under any other version of the\n+    GNU Affero General Public License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+/**\n+-- Odin JavaScript --------------------------------------------------------------------------------\n+\tShalon - Ticketing Usher\n+-- By ---------------------------------------------------------------------------------------------\n+\tWhoever written this script\n+-- Version Info -----------------------------------------------------------------------------------\n+\t1.0 - First Version by whoever written this script\n+\t2.0 - Second Version by Jayd\n+---------------------------------------------------------------------------------------------------\n+**/\n+\n status = -1;\n oldSelection = -1;\n \n function start() {\n-    cm.sendSimple(\"Hello, I am Shalon from Singapore Airport. I can assist you in getting you to Singapore in no time. Do you want to go to Singapore?\\r\\n#b#L0#I would like to buy a plane ticket to Kerning City\\r\\n#b#L1#Let me go in to the departure point.\");\n+    cm.sendSimple(\"Hello, I am Shalon from Singapore Airport. I can assist you in getting you to Kerning City in no time. Do you want to go to Kerning City?\\r\\n#b#L0#I would like to buy a plane ticket to Kerning City\\r\\n#b#L1#Let me go in to the departure point.\");\n }\n \n function action(mode, type, selection) {\n@@ -21,8 +53,15 @@ function action(mode, type, selection) {\n \t\toldSelection = selection;\n \t}else if(status == 1){\n \t\tif(oldSelection == 0){\n-\t\t\tcm.gainMeso(-5000);\n-\t\t\tcm.gainItem(4031732);\n+\t\t\tif (cm.getPlayer().getMeso() > 4999 && cm.getPlayer().haveItem(4031732) == false) {\n+\t\t\t\tcm.gainMeso(-5000);\n+\t\t\t\tcm.gainItem(4031732);\n+\t\t\t\tcm.sendOk(\"Thank you for choosing Wizet Airline! Enjoy your flight!\");\n+\t\t\t\tcm.dispose();\n+\t\t\t} else {\n+\t\t\t\tcm.sendOk(\"You do not have enough mesos or you've already purchased a ticket.\");\n+\t\t\t\tcm.dispose();\n+\t\t\t}\n \t\t}else if(oldSelection == 1){\n \t\t\tif(cm.itemQuantity(4031732) > 0){\n \t\t\t\tvar em = cm.getEventManager(\"AirPlane\");"}, {"sha": "5edb71938e90c2b33b3803d1a342943301838dfa", "filename": "scripts/npc/world0/9270041.js", "status": "modified", "additions": 41, "deletions": 2, "changes": 43, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/9270041.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/npc/world0/9270041.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/9270041.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -1,3 +1,35 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc> \n+                       Matthias Butz <matze@odinms.de>\n+                       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License version 3\n+    as published by the Free Software Foundation. You may not use, modify\n+    or distribute this program under any other version of the\n+    GNU Affero General Public License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+/**\n+-- Odin JavaScript --------------------------------------------------------------------------------\n+\tIrene - Ticketing Usher\n+-- By ---------------------------------------------------------------------------------------------\n+\tWhoever written this script\n+-- Version Info -----------------------------------------------------------------------------------\n+\t1.0 - First Version by whoever written this script\n+\t2.0 - Second Version by Jayd\n+---------------------------------------------------------------------------------------------------\n+**/\n+\n status = -1;\n oldSelection = -1;\n \n@@ -21,8 +53,15 @@ function action(mode, type, selection) {\n \t\toldSelection = selection;\n \t}else if(status == 1){\n \t\tif(oldSelection == 0){\n-\t\t\tcm.gainMeso(-5000);\n-\t\t\tcm.gainItem(4031731);\n+\t\t\tif (cm.getPlayer().getMeso() > 4999 && cm.getPlayer().haveItem(4031731) == false) {\n+\t\t\t\tcm.gainMeso(-5000);\n+\t\t\t\tcm.gainItem(4031731);\n+\t\t\t\tcm.sendOk(\"Thank you for choosing Wizet Airline! Enjoy your flight!\");\n+\t\t\t\tcm.dispose();\n+\t\t\t} else {\n+\t\t\t\tcm.sendOk(\"You do not have enough mesos or you've already purchased a ticket.\");\n+\t\t\t\tcm.dispose();\n+\t\t\t}\n \t\t}else if(oldSelection == 1){\n \t\t\tif(cm.itemQuantity(4031731) > 0){\n \t\t\t\tvar em = cm.getEventManager(\"AirPlane\");"}, {"sha": "929e839b74ee742f5c431d5e27be8c965f8a5b7b", "filename": "scripts/portal/ariant_castle.js", "status": "renamed", "additions": 40, "deletions": 40, "changes": 80, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/portal/ariant_castle.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf/scripts/portal/ariant_castle.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/ariant_castle.js?ref=ed6121dd5fd4f17ef2ae80d1b104fbbf5c85b0cf", "patch": "@@ -1,41 +1,41 @@\n-/*\r\n-\tThis file is part of the OdinMS Maple Story Server\r\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc> \r\n-                       Matthias Butz <matze@odinms.de>\r\n-                       Jan Christian Meyer <vimes@odinms.de>\r\n-\r\n-    This program is free software: you can redistribute it and/or modify\r\n-    it under the terms of the GNU Affero General Public License version 3\r\n-    as published by the Free Software Foundation. You may not use, modify\r\n-    or distribute this program under any other version of the\r\n-    GNU Affero General Public License.\r\n-\r\n-    This program is distributed in the hope that it will be useful,\r\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n-    GNU Affero General Public License for more details.\r\n-\r\n-    You should have received a copy of the GNU Affero General Public License\r\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n-*/\r\n-\r\n-/**\r\n--- Odin JavaScript --------------------------------------------------------------------------------\r\n-\tPortal - To get into Ariant Castle\r\n--- By ---------------------------------------------------------------------------------------------\r\n-\tJayd\r\n--- Version Info -----------------------------------------------------------------------------------\r\n-\t1.0 - First Version by Jayd\r\n----------------------------------------------------------------------------------------------------\r\n-**/\r\n-\r\n-function enter(pi) {\r\n-\tif (pi.getPlayer().haveItem(4031582) == true) {\r\n-\t\tpi.playPortalSound();\r\n-\t\tpi.warp(260000301);\r\n-\t\treturn true;\r\n-\t} else {\r\n-\t\tpi.playerMessage(5, \"You can enter only if you have a Entry Pass to the Palace.\");\r\n-\t\treturn false;\r\n-\t}\r\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc> \n+                       Matthias Butz <matze@odinms.de>\n+                       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License version 3\n+    as published by the Free Software Foundation. You may not use, modify\n+    or distribute this program under any other version of the\n+    GNU Affero General Public License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+/**\n+-- Odin JavaScript --------------------------------------------------------------------------------\n+\tPortal - To get into Ariant Castle\n+-- By ---------------------------------------------------------------------------------------------\n+\tJayd\n+-- Version Info -----------------------------------------------------------------------------------\n+\t1.0 - First Version by Jayd\n+---------------------------------------------------------------------------------------------------\n+**/\n+\n+function enter(pi) {\n+\tif (pi.getPlayer().haveItem(4031582) == true) {\n+\t\tpi.playPortalSound();\n+\t\tpi.warp(260000301);\n+\t\treturn true;\n+\t} else {\n+\t\tpi.playerMessage(5, \"You can enter only if you have a Entry Pass to the Palace.\");\n+\t\treturn false;\n+\t}\n }\n\\ No newline at end of file", "previous_filename": "ariant_castle.js"}]}]},
