{"fetchDate": "2019-12-19", "content": [{"sha": "809d90564cf2d521d451634e58d9ffc73821512b", "node_id": "MDY6Q29tbWl0NDUwODIwMjM6ODA5ZDkwNTY0Y2YyZDUyMWQ0NTE2MzRlNThkOWZmYzczODIxNTEyYg==", "commit": {"author": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2017-06-03T23:02:19Z"}, "committer": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2017-06-03T23:02:19Z"}, "message": "PIN system + player ranking fix + rebalanced equip EXP calculations\n\nAdded the PIN feature. Fixed ranking now calculating ranks now\nworld-based instead of overall. Rebalanced equip exp gain and made\ncosmetic equipments no more leveling up (cosmetics leveling up are\nuseless).", "tree": {"sha": "f153da9eb77124f3fbfbfa540885cf32a2856335", "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/trees/f153da9eb77124f3fbfbfa540885cf32a2856335"}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/commits/809d90564cf2d521d451634e58d9ffc73821512b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/809d90564cf2d521d451634e58d9ffc73821512b", "html_url": "https://github.com/ronancpl/HeavenMS/commit/809d90564cf2d521d451634e58d9ffc73821512b", "comments_url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/809d90564cf2d521d451634e58d9ffc73821512b/comments", "author": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "02cc9efb00f12ca12cc31fca697f0fc1a528bf93", "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/02cc9efb00f12ca12cc31fca697f0fc1a528bf93", "html_url": "https://github.com/ronancpl/HeavenMS/commit/02cc9efb00f12ca12cc31fca697f0fc1a528bf93"}], "stats": {"total": 267, "additions": 191, "deletions": 76}, "files": [{"sha": "d3af0b8646adc109fd053b5d245e13f811218de4", "filename": "build/built-jar.properties", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/build/built-jar.properties", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/build/built-jar.properties", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/built-jar.properties?ref=809d90564cf2d521d451634e58d9ffc73821512b", "patch": "@@ -1,4 +1,4 @@\n-#Fri, 02 Jun 2017 18:46:19 -0300\n+#Sat, 03 Jun 2017 19:45:04 -0300\n \n \n C\\:\\\\Nexon\\\\MapleSolaxia\\\\MapleSolaxiaV2="}, {"sha": "d50d166b5079ca12beb6979c7a4507e403886ab4", "filename": "build/classes/client/MapleCharacter.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/client/MapleCharacter.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/client/MapleCharacter.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter.class?ref=809d90564cf2d521d451634e58d9ffc73821512b"}, {"sha": "81861f65ccb441219f99fa2128cf94b18e56bca5", "filename": "build/classes/client/MapleClient.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/client/MapleClient.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/client/MapleClient.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleClient.class?ref=809d90564cf2d521d451634e58d9ffc73821512b"}, {"sha": "d48a6db498b4debac9ceed8d8ce1f62893b7d67e", "filename": "build/classes/client/command/Commands$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/client/command/Commands$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/client/command/Commands$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/command/Commands$1.class?ref=809d90564cf2d521d451634e58d9ffc73821512b"}, {"sha": "aea16cfa9f96458c15c9031eecf0f2518b5da787", "filename": "build/classes/client/command/Commands.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/client/command/Commands.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/client/command/Commands.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/command/Commands.class?ref=809d90564cf2d521d451634e58d9ffc73821512b"}, {"sha": "d74d98a0c09096df783693e69a1702cc5b156592", "filename": "build/classes/client/inventory/Equip$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/client/inventory/Equip$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/client/inventory/Equip$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/inventory/Equip$1.class?ref=809d90564cf2d521d451634e58d9ffc73821512b"}, {"sha": "4fdb1d4946bd32ac375165fc8f558c4d92b702f2", "filename": "build/classes/client/inventory/Equip$StatUpgrade.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/client/inventory/Equip$StatUpgrade.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/client/inventory/Equip$StatUpgrade.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/inventory/Equip$StatUpgrade.class?ref=809d90564cf2d521d451634e58d9ffc73821512b"}, {"sha": "41496acdde2f6041ca13fd284a6a1c4cea5934f5", "filename": "build/classes/client/inventory/Equip.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/client/inventory/Equip.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/client/inventory/Equip.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/inventory/Equip.class?ref=809d90564cf2d521d451634e58d9ffc73821512b"}, {"sha": "315365e9b5f1c95678a11a7f0c170cac8d1b2cbe", "filename": "build/classes/constants/ServerConstants.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/constants/ServerConstants.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/constants/ServerConstants.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/constants/ServerConstants.class?ref=809d90564cf2d521d451634e58d9ffc73821512b"}, {"sha": "4f6f35c99d03c6c95d7eab697cf4c8479e4e65e5", "filename": "build/classes/net/server/RankingWorker.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/net/server/RankingWorker.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/net/server/RankingWorker.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/RankingWorker.class?ref=809d90564cf2d521d451634e58d9ffc73821512b"}, {"sha": "0f85761d1ccf536d14b49e607f7ede5070d1bba7", "filename": "build/classes/net/server/channel/handlers/AbstractDealDamageHandler.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/net/server/channel/handlers/AbstractDealDamageHandler.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/net/server/channel/handlers/AbstractDealDamageHandler.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/handlers/AbstractDealDamageHandler.class?ref=809d90564cf2d521d451634e58d9ffc73821512b"}, {"sha": "50d05b0ea08814121e3423d22ea6e3b3ac8b0eb3", "filename": "build/classes/net/server/channel/handlers/CloseRangeDamageHandler.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/net/server/channel/handlers/CloseRangeDamageHandler.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/net/server/channel/handlers/CloseRangeDamageHandler.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/handlers/CloseRangeDamageHandler.class?ref=809d90564cf2d521d451634e58d9ffc73821512b"}, {"sha": "0e82988f17b13a1964608fd26bb00fc99305ebe2", "filename": "build/classes/net/server/handlers/login/AfterLoginHandler.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/net/server/handlers/login/AfterLoginHandler.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/net/server/handlers/login/AfterLoginHandler.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/handlers/login/AfterLoginHandler.class?ref=809d90564cf2d521d451634e58d9ffc73821512b"}, {"sha": "cc7d6d36decf4eab9d893a0fcfec5ba44f319e01", "filename": "build/classes/server/MapleItemInformationProvider$RewardItem.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/server/MapleItemInformationProvider$RewardItem.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/server/MapleItemInformationProvider$RewardItem.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/MapleItemInformationProvider$RewardItem.class?ref=809d90564cf2d521d451634e58d9ffc73821512b"}, {"sha": "8215b2c515d234d57d05aaab83a7be7b916d7026", "filename": "build/classes/server/MapleItemInformationProvider$scriptedItem.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/server/MapleItemInformationProvider$scriptedItem.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/server/MapleItemInformationProvider$scriptedItem.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/MapleItemInformationProvider$scriptedItem.class?ref=809d90564cf2d521d451634e58d9ffc73821512b"}, {"sha": "2f20343a9ccab4518ea3cb6407168feb90c2717f", "filename": "build/classes/server/MapleItemInformationProvider.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/server/MapleItemInformationProvider.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/server/MapleItemInformationProvider.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/MapleItemInformationProvider.class?ref=809d90564cf2d521d451634e58d9ffc73821512b"}, {"sha": "dfa68103cec47bb53d2d386261bd434bf53c130f", "filename": "build/classes/server/MapleStatEffect$CancelEffectAction.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/server/MapleStatEffect$CancelEffectAction.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/server/MapleStatEffect$CancelEffectAction.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/MapleStatEffect$CancelEffectAction.class?ref=809d90564cf2d521d451634e58d9ffc73821512b"}, {"sha": "42a7243786f5424c2752e1d6d3692ea2d842350f", "filename": "build/classes/server/MapleStatEffect.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/server/MapleStatEffect.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/server/MapleStatEffect.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/MapleStatEffect.class?ref=809d90564cf2d521d451634e58d9ffc73821512b"}, {"sha": "7e042e1514163c5a2f0536bef60a7979aaa4de79", "filename": "build/classes/server/events/BalrogPQ$2.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/server/events/BalrogPQ$2.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/server/events/BalrogPQ$2.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/events/BalrogPQ$2.class?ref=809d90564cf2d521d451634e58d9ffc73821512b"}, {"sha": "a421a4f62272010fbcb6f17c8860a94846a6d5f4", "filename": "build/classes/tools/MaplePacketCreator$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/tools/MaplePacketCreator$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/tools/MaplePacketCreator$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/tools/MaplePacketCreator$1.class?ref=809d90564cf2d521d451634e58d9ffc73821512b"}, {"sha": "eab52314d50797d14789a300046157fd3639ebce", "filename": "build/classes/tools/MaplePacketCreator$2.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/tools/MaplePacketCreator$2.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/tools/MaplePacketCreator$2.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/tools/MaplePacketCreator$2.class?ref=809d90564cf2d521d451634e58d9ffc73821512b"}, {"sha": "d66d8edeff6b8900fc0832133033271f398faaaf", "filename": "build/classes/tools/MaplePacketCreator.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/tools/MaplePacketCreator.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/build/classes/tools/MaplePacketCreator.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/tools/MaplePacketCreator.class?ref=809d90564cf2d521d451634e58d9ffc73821512b"}, {"sha": "e683c8df2449895e71a86b87bf3d737ca2e19251", "filename": "dist/MapleSolaxia.jar", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/dist/MapleSolaxia.jar", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/dist/MapleSolaxia.jar", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/dist/MapleSolaxia.jar?ref=809d90564cf2d521d451634e58d9ffc73821512b"}, {"sha": "a6dab82f79b7ecb838e54951394ba1fda1a4d04f", "filename": "feature_list.txt", "status": "added", "additions": 42, "deletions": 0, "changes": 42, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/feature_list.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/feature_list.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/feature_list.txt?ref=809d90564cf2d521d451634e58d9ffc73821512b", "patch": "@@ -0,0 +1,42 @@\n+========== MapleSolaxiaV2 ==========\n+Credits:\n+Ronan - Freelance Developer\n+Vcoc - Freelance Developer\n+\n+---------------------------\n+Working features:\n+---------------------------\n+\n+PQs/Quests:\n+* HPQ/KPQ/LPQ/LMPQ/EllinPQ/PiratePQ 100%\n+* BalrogPQ semi-functional\n+* Brand-new PQ: Boss Rush PQ 100%\n+* Doll house quest 100%\n+* Loads of quests have been patched.\n+\n+Player Social Network:\n+* Guild and Alliance system.\n+* Lobby system - Limited multiple PQ instances on same channel.\n+\n+Cash:\n+* EXP/DROP/Cosmetic Coupons 100%\n+\n+Server potentials:\n+* Multi-worlds 100%\n+* Adventurer Mount quests 100%\n+* All Equipment levels up.\n+* Player level rates.\n+* Gain fame by quests.\n+* Every monsterbook card is now droppable by overworld mobs.\n+* Added Boss HP Bar for dozens of bosses (needs provided custom wz)\n+* Custom jail system (needs provided custom wz)\n+* Delete Character 100% (requires ENABLE_PIC activated)\n+\n+Admin/GM commands:\n+* New commands\n+* Zakum/Horntail/Pinkbean 100%\n+\n+Project:\n+* Organized project code\n+* Highly configurable server (see server flags at ServerConstants)\n+---------------------------\n\\ No newline at end of file"}, {"sha": "e7af5d528a827ca0e3446c66a6923ef746754881", "filename": "mychanges_ptbr.txt", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/mychanges_ptbr.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/mychanges_ptbr.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/mychanges_ptbr.txt?ref=809d90564cf2d521d451634e58d9ffc73821512b", "patch": "@@ -278,4 +278,10 @@ Consertadas mec\n \n 02 Junho 2017,\n Otimizado e corrigido problemas de queda de desempenho ao atribuir lvups a itens com stats muito elevados, que ocasionavam crashs no servidor.\n-Adicionado funcionalidade USE_ULTRA_THREE_SNAILS. Valor mostrado n\ufffdo \ufffd condizente com o dano contabilizado (motivo: client edit).\n\\ No newline at end of file\n+Adicionado funcionalidade USE_ULTRA_THREE_SNAILS. Valor mostrado n\ufffdo \ufffd condizente com o dano contabilizado (motivo: client edit).\n+\n+03 Junho 2017,\n+Sistema de PIN agora completamente funcional.\n+Corrigido sistema de ranking para agora mostrar player rankings de acordo com o mundo que ele se encontra.\n+Adicionado barra de HP para o boss da BalrogPQ.\n+Equips apenas cosm\ufffdticos (sem stats e/ou possibilidade de melhorar) n\ufffdo mais ganham EXP e, consequentemente, nivelam.\n\\ No newline at end of file"}, {"sha": "0fba7312d9d1abf6311433728f0d06bf486682db", "filename": "nbproject/private/private.xml", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/nbproject/private/private.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/nbproject/private/private.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/nbproject/private/private.xml?ref=809d90564cf2d521d451634e58d9ffc73821512b", "patch": "@@ -5,21 +5,23 @@\n             <url>src/tools/MaplePacketCreator.java</url>\n             <bookmark id=\"1\">\n                 <name/>\n-                <line>5941</line>\n+                <line>5939</line>\n                 <key/>\n             </bookmark>\n         </file>\n     </editor-bookmarks>\n     <open-files xmlns=\"http://www.netbeans.org/ns/projectui-open-files/2\">\n         <group>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/2010007.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/net/server/channel/handlers/GuildOperationHandler.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/net/server/guild/MapleGuild.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/net/server/guild/MapleAlliance.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/net/server/channel/handlers/ItemIdSortHandler.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/inventory/Equip.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/MapleStat.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/net/MapleServerHandler.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/command/Commands.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/inventory/Item.java</file>\n             <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/constants/ServerConstants.java</file>\n             <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/MapleCharacter.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/MapleClient.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/tools/MaplePacketCreator.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/server/maps/MapleMap.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/server/MapleItemInformationProvider.java</file>\n         </group>\n     </open-files>\n </project-private>"}, {"sha": "dcac42e942229aad93450dcd102fc0bb800ca09a", "filename": "scripts/npc/1061018.js", "status": "modified", "additions": 8, "deletions": 17, "changes": 25, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/scripts/npc/1061018.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/scripts/npc/1061018.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1061018.js?ref=809d90564cf2d521d451634e58d9ffc73821512b", "patch": "@@ -9,31 +9,22 @@ function start(){\n \n function action(mode, type, selection){\n     if(mode <= 0){\n-        if(!cm.getPlayer().getMap().getAllmonsters().size() == 2){\n-        cm.sendOk(\"Alrighty. We have high hopes for you so make us mercenaries proud!\");\n         cm.dispose();\n-        } else {\n-        cm.getPlayer().getMap().killAllMonsters();\n-        BalrogPQ.partyLeader = \"undefined\";\n-        BalrogPQ.balrogSpawned = false;\n-        BalrogPQ.close();\n-            cm.warp(105100100);\n-            cm.dispose();\n-        }\n+        return;\n     } else if(status == 0){\n-        if(cm.getPlayer().getMap().getCharacters().size() > 1){\n+        if(cm.getPlayer().getMap().getMonsters().size() == 0){\n+            cm.sendOk(\"Wow! You defeated the balrog.\");\n+            dispose = true;\n+            cm.getPlayer().getClient().getChannelServer().broadcastPacket(Packages.tools.MaplePacketCreator.serverNotice(0, BalrogPQ.partyLeader + \"'s party has successfully defeated the Balrog! Praise to them, they finished with \" + cm.getPlayer().getMap().getCharacters().size() + \" players.\"));\n+            status++;\n+        } else if(cm.getPlayer().getMap().getCharacters().size() > 1){\n             cm.sendYesNo(\"Are you really going to leave this battle and leave your fellow travelers to die?\");\n             dispose = false;\n             status++;\n-        } else if(cm.getPlayer().getMap().getCharacters().size() <= 1 && cm.getPlayer().getMap().getAllmonsters().size() != 2){\n+        } else if(cm.getPlayer().getMap().getCharacters().size() <= 1){\n             cm.sendYesNo(\"If you're a coward, you will leave.\");\n             dispose = true;\n             status++;\n-        } else if(cm.getPlayer().getMap().getAllmonsters().size() == 0){\n-            cm.sendOk(\"Wow! You defeated the balrog.\");\n-            dispose = true;\n-            cm.getPlayer().getClient().getChannelServer().broadcastPacket(Packages.tools.MaplePacketCreator.serverNotice(0, BalrogPQ.partyLeader + \"'s party has successfully defeated the Balrog! Praise to them, they finished with \" + cm.getPlayer().getMap().getCharacters().size() + \" players.\"));\n-            status++;\n         } else {\n             cm.sendYesNo(\"So you are really going to leave?\");\n             status++;"}, {"sha": "f9a34a638d52f9933c0a4981429d6c48dda08766", "filename": "sql/db_drops.sql", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/sql/db_drops.sql", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/sql/db_drops.sql", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/sql/db_drops.sql?ref=809d90564cf2d521d451634e58d9ffc73821512b", "patch": "@@ -19022,7 +19022,11 @@\n (9300206, 2388032, 1, 1, 0, 8000),\n (9300207, 2388054, 1, 1, 0, 8000),\n (9300209, 2388053, 1, 1, 0, 8000),\n-(9300215, 2388046, 1, 1, 0, 8000);\n+(9300215, 2388046, 1, 1, 0, 8000),\n+(5110300, 2383016, 1, 1, 0, 8000),\n+(5110301, 2383028, 1, 1, 0, 8000),\n+(8143000, 2386010, 1, 1, 0, 8000),\n+(2220000, 2388000, 1, 1, 0, 8000);\n \n # (dropperid, itemid, minqty, maxqty, questid, chance)\n "}, {"sha": "8b124f3847a732036e1a6d4944d9558c4a1802b8", "filename": "src/client/MapleCharacter.java", "status": "modified", "additions": 15, "deletions": 1, "changes": 16, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/src/client/MapleCharacter.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/src/client/MapleCharacter.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/MapleCharacter.java?ref=809d90564cf2d521d451634e58d9ffc73821512b", "patch": "@@ -3454,7 +3454,7 @@ public void levelUp(boolean takeexp) {\n         if (this.guildid > 0) {\n             getGuild().broadcast(MaplePacketCreator.levelUpMessage(2, level, name), this.getId());\n         }\n-        if (ServerConstants.PERFECT_PITCH && level >= 30) {\n+        if (ServerConstants.USE_PERFECT_PITCH && level >= 30) {\n             //milestones?\n             if (MapleInventoryManipulator.checkSpace(client, 4310000, (short) 1, \"\")) {\n                 MapleInventoryManipulator.addById(client, 4310000, (short) 1);\n@@ -6183,6 +6183,20 @@ public void increaseEquipExp(int expGain) {\n             }\n         }\n     }\n+    \n+    public void showAllEquipFeatures() {\n+        MapleItemInformationProvider mii = MapleItemInformationProvider.getInstance();\n+        \n+        for (Item item : getInventory(MapleInventoryType.EQUIPPED).list()) {\n+            Equip nEquip = (Equip) item;\n+            String itemName = mii.getName(nEquip.getItemId());\n+            if (itemName == null) {\n+                continue;\n+            }\n+            \n+            nEquip.showEquipFeatures(client);\n+        }\n+    }\n \n     public Map<String, MapleEvents> getEvents() {\n         return events;"}, {"sha": "f3643f4b929303f27e916e0c443ce8bbc909445d", "filename": "src/client/command/Commands.java", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/src/client/command/Commands.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/src/client/command/Commands.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/command/Commands.java?ref=809d90564cf2d521d451634e58d9ffc73821512b", "patch": "@@ -310,14 +310,12 @@\n \tpublic static boolean executePlayerCommand(MapleClient c, String[] sub, char heading) {\n \t\tMapleCharacter player = c.getPlayer();\n \t\tif (heading == '!' && player.gmLevel() == 0) {\n-\t\t\tplayer.yellowMessage(\"You may not use !\" + sub[0] + \", please try /\" + sub[0]);\n+\t\t\tplayer.yellowMessage(\"You may not use !\" + sub[0] + \", please try @\" + sub[0] + \". For a full list of commands, try @help.\");\n \t\t\treturn false;\n \t\t}\n \t\tswitch (sub[0]) {\n                 case \"help\":\n \t\tcase \"commands\":\n-                    \n-                                    \n                 case \"playercommands\": \n                        player.message(\"============================================================\");\n                        player.message(\"MapleSolaxiaV2 Player Commands\");\n@@ -337,6 +335,7 @@ public static boolean executePlayerCommand(MapleClient c, String[] sub, char hea\n \t\t\tplayer.message(\"@whodrops <item name>: Displays monsters that drop an item given an item name.\");\n \t\t\tplayer.message(\"@uptime: Shows how long Solaxia has been online.\");\n \t\t\tplayer.message(\"@bosshp: Displays the remaining HP of the bosses on your map.\");\n+                        player.message(\"@equiplv: Displays relations of level and experience of every item you have equipped.\");\n                         if(ServerConstants.USE_DEBUG) {\n                                 player.message(\"@debugpos: Displays the coordinates on the map the player is currently located.\");\n                                 player.message(\"@debugmap: Displays info about the current map the player is located.\");\n@@ -478,6 +477,11 @@ public static boolean executePlayerCommand(MapleClient c, String[] sub, char hea\n \t\t\tc.removeClickedNPC();\n \t\t\tplayer.message(\"You've been disposed.\");\n \t\t\tbreak;\n+                    \n+                case \"equiplv\":\n+                        player.showAllEquipFeatures();\n+                        break;\n+                    \n \t\tcase \"rates\":\n \t\t\t//c.resetVoteTime();\n \t\t\tplayer.yellowMessage(\"BOSSDROP RATE\");"}, {"sha": "4118a2bce53d267e23560ab233de4c95dd80588f", "filename": "src/client/inventory/Equip.java", "status": "modified", "additions": 29, "deletions": 9, "changes": 38, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/src/client/inventory/Equip.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/src/client/inventory/Equip.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/inventory/Equip.java?ref=809d90564cf2d521d451634e58d9ffc73821512b", "patch": "@@ -60,10 +60,6 @@ public int getValue() {\n         private StatUpgrade(int value) {\n             this.value = value;\n         }\n-\n-        private int getValue() {\n-            return value;\n-        }\n     }\n     \n     private byte upgradeSlots;\n@@ -475,13 +471,14 @@ public int getItemExp() {\n     }\n     \n     private double normalizedMasteryExp(int reqLevel) {\n-        return Math.max((2622.71 * Math.exp(reqLevel * 0.0533649)) - 6000.0, 15);\n+        return Math.max((2622.71 * Math.exp(reqLevel * 0.0733649)) - 6000.0, 15);\n     }\n     \n     public void gainItemExp(MapleClient c, int gain) {  // Ronan's Equip Exp gain method\n-        if(itemLevel >= 30) return;\n+        MapleItemInformationProvider ii = MapleItemInformationProvider.getInstance();\n+        if(!ii.isUpgradeable(this.getItemId()) || itemLevel >= 30) return;\n         \n-        int reqLevel = MapleItemInformationProvider.getInstance().getEquipStats(this.getItemId()).get(\"reqLevel\");\n+        int reqLevel = ii.getEquipStats(this.getItemId()).get(\"reqLevel\");\n         \n         float masteryModifier = (float)ExpTable.getExpNeededForLevel(1) / (float)normalizedMasteryExp(reqLevel);\n         float elementModifier = (isElemental) ? 0.85f : 0.6f;\n@@ -491,7 +488,7 @@ public void gainItemExp(MapleClient c, int gain) {  // Ronan's Equip Exp gain me\n         itemExp += baseExpGain;\n         int expNeeded = ExpTable.getEquipExpNeededForLevel(itemLevel);\n         \n-        //System.out.println(\"'\" + MapleItemInformationProvider.getInstance().getName(this.getItemId()) + \"' -> EXP Gain: \" + gain + \" Mastery: \" + masteryModifier + \"Base gain: \" + baseExpGain + \" exp: \" + itemExp + \" / \" + expNeeded);\n+        if(ServerConstants.USE_DEBUG_SHOW_INFO_EQPEXP) System.out.println(\"'\" + ii.getName(this.getItemId()) + \"' -> EXP Gain: \" + gain + \" Mastery: \" + masteryModifier + \" Base gain: \" + baseExpGain + \" exp: \" + itemExp + \" / \" + expNeeded);\n         \n         if (itemExp >= expNeeded) {\n             while(itemExp >= expNeeded) {\n@@ -507,9 +504,32 @@ public void gainItemExp(MapleClient c, int gain) {  // Ronan's Equip Exp gain me\n             }\n         } else {\n             c.getPlayer().forceUpdateItem(this);\n-            //if(ServerConstants.USE_DEBUG) c.getPlayer().dropMessage(\"'\" + MapleItemInformationProvider.getInstance().getName(this.getItemId()) + \"': \" + itemExp + \" / \" + expNeeded);\n+            //if(ServerConstants.USE_DEBUG) c.getPlayer().dropMessage(\"'\" + ii.getName(this.getItemId()) + \"': \" + itemExp + \" / \" + expNeeded);\n         }\n     }\n+    \n+    private boolean reachedMaxLevel(String eqpName) {\n+        if(isElemental) {\n+            if(eqpName.contains(\"Timeless\")) {\n+                if(itemLevel < 6) return false;\n+            } else {\n+                if(itemLevel < 4) return false;\n+            }\n+        }\n+        \n+        if(itemLevel < ServerConstants.USE_EQUIPMNT_LVLUP) return false;\n+        return true;\n+    }\n+    \n+    public void showEquipFeatures(MapleClient c) {\n+        MapleItemInformationProvider ii = MapleItemInformationProvider.getInstance();\n+        if(!ii.isUpgradeable(this.getItemId())) return;\n+        \n+        String eqpName = ii.getName(getItemId());\n+        String eqpInfo = reachedMaxLevel(eqpName) ? \" - MAX LEVEL\" : (\" EXP: \" + itemExp + \" / \" + ExpTable.getEquipExpNeededForLevel(itemLevel));\n+        \n+        c.getPlayer().dropMessage(5, \"'\" + eqpName + \"' -> Level: \" + itemLevel + eqpInfo);\n+    }\n \n     public void setItemExp(int exp) {\n         this.itemExp = exp;"}, {"sha": "617b15c8cc3ac61ccc160cf4fc6278bec931f436", "filename": "src/constants/ServerConstants.java", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/src/constants/ServerConstants.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/src/constants/ServerConstants.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/constants/ServerConstants.java?ref=809d90564cf2d521d451634e58d9ffc73821512b", "patch": "@@ -15,7 +15,8 @@\n     public static final long PURGING_INTERVAL = 5 * 60 * 1000;\n     public static final long RANKING_INTERVAL = 60 * 60 * 1000;\t//60 minutes, 3600000.\n     public static final long COUPON_INTERVAL = 60 * 60 * 1000;\t//60 minutes, 3600000.\n-    public static final boolean ENABLE_PIC = true;             //Pick true/false to enable or disable Pic.\n+    public static final boolean ENABLE_PIC = false;             //Pick true/false to enable or disable Pic. Delete character needs this feature ENABLED.\n+    public static final boolean ENABLE_PIN = false;             //Pick true/false to enable or disable Pin.\n \t\t\n     //Ip Configuration\n     public static String HOST;\n@@ -33,7 +34,8 @@\n     public static final boolean USE_CUSTOM_KEYSET = true;\n     public static final boolean USE_MAXRANGE = true;        \t//Will send and receive packets from all events of a map, rather than those of only view range.\n     public static final boolean USE_DEBUG = true;           \t//Will enable some text prints and new commands in the client oriented for debugging.\n-    public static final boolean USE_DEBUG_SHOW_RCVD_PACKETS = false;\n+    public static final boolean USE_DEBUG_SHOW_RCVD_PACKET = false;     //Prints on the cmd all received packet ids.\n+    public static final boolean USE_DEBUG_SHOW_INFO_EQPEXP = false;     //Prints on the cmd all equip exp gain info.\n     public static final boolean USE_MTS = false;\n     public static final boolean USE_FAMILY_SYSTEM = false;\n     public static final boolean USE_DUEY = true;\n@@ -47,7 +49,7 @@\n     public static final int MAX_EVENT_LEVELS = 8;               //Event has different levels of rewarding system.\n     public static final long BLOCK_DUEY_RACE_COND = (long)(0.5 * 1000);\n     public static final long PET_LOOT_UPON_ATTACK = (long)(0.7 * 1000); //Time the pet must wait before trying to pick items up.\n-    public static final boolean PERFECT_PITCH = true;\t        //For lvl 30 or above, each lvlup player gains 1 perfect pitch.\n+    public static final boolean USE_PERFECT_PITCH = true;\t        //For lvl 30 or above, each lvlup player gains 1 perfect pitch.\n     \n     //Some Gameplay Enhancing Configuration\n     public static final boolean USE_PERFECT_SCROLLING = true;   //Scrolls doesn't use slots upon failure.\n@@ -61,8 +63,8 @@\n     public static final boolean USE_STACK_COUPON_RATES = true;  //Multiple coupons effects builds up together.\n     public static final boolean USE_EQUIPMNT_LVLUP_SLOTS = true;//Equips can upgrade slots at level up.\n     public static final boolean USE_EQUIPMNT_LVLUP_POWER = true;//Enable more powerful stats upgrades at equip level up.\n-    public static final int MAX_EQUIPMNT_LVLUP_STAT_GAIN = 120; //Max stat upgrade an equipment can have on a levelup.\n-    public static final int USE_EQUIPMNT_LVLUP = 7;             //All equips lvlup at max level of N, set 0 to disable.\n+    public static final int MAX_EQUIPMNT_LVLUP_STAT_GAIN = 10000; //Max stat upgrade an equipment can have on a levelup.\n+    public static final int USE_EQUIPMNT_LVLUP = 7;             //All equips lvlup at max level of N, set 1 to disable.\n     public static final int FAME_GAIN_BY_QUEST = 4;             //Fame gain each N quest completes, set 0 to disable.\n     public static final int SCROLL_CHANCE_RATE = 10;            //Number of tries for success on a scroll, set 0 for default.\n     "}, {"sha": "211792d8a72cd7d0cb4b424d35697be51aaf1b6b", "filename": "src/net/MapleServerHandler.java", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/src/net/MapleServerHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/src/net/MapleServerHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/MapleServerHandler.java?ref=809d90564cf2d521d451634e58d9ffc73821512b", "patch": "@@ -131,7 +131,7 @@ public void messageReceived(IoSession session, Object message) {\n         short packetId = slea.readShort();\n         MapleClient client = (MapleClient) session.getAttribute(MapleClient.CLIENT_KEY);\n         \n-        if(ServerConstants.USE_DEBUG_SHOW_RCVD_PACKETS) System.out.println(\"Received packet id \" + packetId);\n+        if(ServerConstants.USE_DEBUG_SHOW_RCVD_PACKET) System.out.println(\"Received packet id \" + packetId);\n         final MaplePacketHandler packetHandler = processor.getHandler(packetId);\n         if (packetHandler != null && packetHandler.validateState(client)) {\n             try {"}, {"sha": "5f01b252742420f37d5ed7bd589a2d234a1062cb", "filename": "src/net/server/RankingWorker.java", "status": "modified", "additions": 13, "deletions": 9, "changes": 22, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/src/net/server/RankingWorker.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/src/net/server/RankingWorker.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/RankingWorker.java?ref=809d90564cf2d521d451634e58d9ffc73821512b", "patch": "@@ -32,6 +32,7 @@\n /**\n  * @author Matze\n  * @author Quit\n+ * @author Ronan\n  */\n public class RankingWorker implements Runnable {\n     private Connection con;\n@@ -43,16 +44,17 @@ private void resetMoveRank(boolean job) throws SQLException {\n         reset.executeUpdate();\n     }\n \n-    private void updateRanking(int job) throws SQLException {\n-        String sqlCharSelect = \"SELECT c.id, \" + (job != -1 ? \"c.jobRank, c.jobRankMove\" : \"c.rank, c.rankMove\") + \", a.lastlogin AS lastlogin, a.loggedin FROM characters AS c LEFT JOIN accounts AS a ON c.accountid = a.id \";\n+    private void updateRanking(int job, int world) throws SQLException {\n+        String sqlCharSelect = \"SELECT c.id, \" + (job != -1 ? \"c.jobRank, c.jobRankMove\" : \"c.rank, c.rankMove\") + \", a.lastlogin AS lastlogin, a.loggedin FROM characters AS c LEFT JOIN accounts AS a ON c.accountid = a.id WHERE c.world = ? \";\n         if (job != -1) {\n-            sqlCharSelect += \"WHERE c.job DIV 100 = ? \";\n+            sqlCharSelect += \"AND c.job DIV 100 = ? \";\n         }\n         sqlCharSelect += \"ORDER BY c.level DESC , c.exp DESC , c.fame DESC , c.meso DESC\";\n-        PreparedStatement charSelect = con.prepareStatement(sqlCharSelect);\n         \n+        PreparedStatement charSelect = con.prepareStatement(sqlCharSelect);\n+        charSelect.setInt(1, world);\n         if (job != -1) {\n-            charSelect.setInt(1, job);\n+            charSelect.setInt(2, job);\n         }\n         ResultSet rs = charSelect.executeQuery();\n         PreparedStatement ps = con.prepareStatement(\"UPDATE characters SET \" + (job != -1 ? \"jobRank = ?, jobRankMove = ? \" : \"rank = ?, rankMove = ? \") + \"WHERE id = ?\");\n@@ -87,12 +89,14 @@ public void run() {\n                 resetMoveRank(false);\n             }\n             \n-            updateRanking(-1);    //overall ranking\n-            for (int i = 0; i <= MapleJob.getMax(); i++) {\n-                updateRanking(i);\n+            for(int j = 0; j < Server.getInstance().getWorlds().size(); j++) {\n+                updateRanking(-1, j);    //overall ranking\n+                for (int i = 0; i <= MapleJob.getMax(); i++) {\n+                    updateRanking(i, j);\n+                }\n+                con.commit();\n             }\n             \n-            con.commit();\n             con.setAutoCommit(true);\n             lastUpdate = System.currentTimeMillis();\n         } catch (SQLException ex) {"}, {"sha": "c7ab44236ad11cff62d77df8c14133ee1425ea3e", "filename": "src/net/server/channel/handlers/AbstractDealDamageHandler.java", "status": "modified", "additions": 14, "deletions": 11, "changes": 25, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/src/net/server/channel/handlers/AbstractDealDamageHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/src/net/server/channel/handlers/AbstractDealDamageHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/AbstractDealDamageHandler.java?ref=809d90564cf2d521d451634e58d9ffc73821512b", "patch": "@@ -601,7 +601,7 @@ protected AttackInfo parseDamage(LittleEndianAccessor lea, MapleCharacter chr, b\n             MapleStatEffect effect = skill.getEffect(ret.skilllevel);\n \n             if (magic) {\n-\t\t\t\t// Since the skill is magic based, use the magic formula\n+                // Since the skill is magic based, use the magic formula\n                 if(chr.getJob() == MapleJob.IL_ARCHMAGE || chr.getJob() == MapleJob.IL_MAGE) {\n                     int skillLvl = chr.getSkillLevel(ILMage.ELEMENT_AMPLIFICATION);\n                     if(skillLvl > 0)\n@@ -611,7 +611,7 @@ protected AttackInfo parseDamage(LittleEndianAccessor lea, MapleCharacter chr, b\n                     if(skillLvl > 0)\n                         calcDmgMax = calcDmgMax * SkillFactory.getSkill(FPMage.ELEMENT_AMPLIFICATION).getEffect(skillLvl).getY() / 100;\n                 } else if(chr.getJob() == MapleJob.BLAZEWIZARD3 || chr.getJob() == MapleJob.BLAZEWIZARD4) {\n-\t\t\t\t\tint skillLvl = chr.getSkillLevel(BlazeWizard.ELEMENT_AMPLIFICATION);\n+                    int skillLvl = chr.getSkillLevel(BlazeWizard.ELEMENT_AMPLIFICATION);\n                     if(skillLvl > 0)\n                         calcDmgMax = calcDmgMax * SkillFactory.getSkill(BlazeWizard.ELEMENT_AMPLIFICATION).getEffect(skillLvl).getY() / 100;\n                 } else if(chr.getJob() == MapleJob.EVAN7 || chr.getJob() == MapleJob.EVAN8 || chr.getJob() == MapleJob.EVAN9 || chr.getJob() == MapleJob.EVAN10) {\n@@ -622,16 +622,16 @@ protected AttackInfo parseDamage(LittleEndianAccessor lea, MapleCharacter chr, b\n                 \n                 calcDmgMax *= effect.getMatk();\n                 if(ret.skill == Cleric.HEAL) {\n-\t\t\t\t\t// This formula is still a bit wonky, but it is fairly accurate.\n+                    // This formula is still a bit wonky, but it is fairly accurate.\n                     calcDmgMax = (int) Math.round((chr.getTotalInt() * 4.8 + chr.getTotalLuk() * 4) * chr.getTotalMagic() / 1000);\n                     calcDmgMax = calcDmgMax * effect.getHp() / 100; \n                 }\n-\t\t\t} else if(ret.skill == Hermit.SHADOW_MESO) {\n-\t\t\t\t// Shadow Meso also has its own formula\n-\t\t\t\tcalcDmgMax = effect.getMoneyCon() * 10;\n-\t\t\t\tcalcDmgMax = (int) Math.floor(calcDmgMax * 1.5);\n+                } else if(ret.skill == Hermit.SHADOW_MESO) {\n+                    // Shadow Meso also has its own formula\n+                    calcDmgMax = effect.getMoneyCon() * 10;\n+                    calcDmgMax = (int) Math.floor(calcDmgMax * 1.5);\n             } else {\n-\t\t\t\t// Normal damage formula for skills\n+                // Normal damage formula for skills\n                 calcDmgMax = calcDmgMax * effect.getDamage() / 100;\n             }\n         }\n@@ -646,9 +646,12 @@ protected AttackInfo parseDamage(LittleEndianAccessor lea, MapleCharacter chr, b\n                 MapleStatEffect ceffect = SkillFactory.getSkill(advcomboid).getEffect(chr.getSkillLevel(advcomboid));\n                 calcDmgMax = (int) Math.floor(calcDmgMax * (ceffect.getDamage() + 50) / 100 + 0.20 + (comboBuff - 5) * 0.04);\n             } else {\n-\t\t\t\t// Normal Combo\n-                MapleStatEffect ceffect = SkillFactory.getSkill(oid).getEffect(chr.getSkillLevel(oid));\n-                calcDmgMax = (int) Math.floor(calcDmgMax * (ceffect.getDamage() + 50) / 100 + Math.floor((comboBuff - 1) * (chr.getSkillLevel(oid) / 6)) / 100);\n+                // Normal Combo\n+                int skillLv = chr.getSkillLevel(oid);\n+                if(skillLv <= 0) skillLv = SkillFactory.getSkill(oid).getMaxLevel();\n+                \n+                MapleStatEffect ceffect = SkillFactory.getSkill(oid).getEffect(skillLv);\n+                calcDmgMax = (int) Math.floor(calcDmgMax * (ceffect.getDamage() + 50) / 100 + Math.floor((comboBuff - 1) * (skillLv / 6)) / 100);\n             }\n             \n             if(GameConstants.isFinisherSkill(ret.skill)) {"}, {"sha": "c18c57026b3091b7b92285fe724ae8e634df1ed5", "filename": "src/net/server/channel/handlers/CloseRangeDamageHandler.java", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/src/net/server/channel/handlers/CloseRangeDamageHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/src/net/server/channel/handlers/CloseRangeDamageHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/CloseRangeDamageHandler.java?ref=809d90564cf2d521d451634e58d9ffc73821512b", "patch": "@@ -87,7 +87,9 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                 if (advComboSkillLevel > 0) {\n                     ceffect = advcombo.getEffect(advComboSkillLevel);\n                 } else {\n-                    ceffect = combo.getEffect(player.getSkillLevel(combo));\n+                    int comboLv = player.getSkillLevel(combo);\n+                    if(comboLv <= 0) comboLv = SkillFactory.getSkill(oid).getMaxLevel();\n+                    ceffect = combo.getEffect(comboLv);\n                 }\n                 if (orbcount < ceffect.getX() + 1) {\n                     int neworbcount = orbcount + 1;\n@@ -96,7 +98,10 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                             neworbcount++;\n                         }\n                     }\n-                    int duration = combo.getEffect(player.getSkillLevel(oid)).getDuration();\n+                    \n+                    int olv = player.getSkillLevel(oid);\n+                    if(olv <= 0) olv = SkillFactory.getSkill(oid).getMaxLevel();\n+                    int duration = combo.getEffect(olv).getDuration();\n                     List<Pair<MapleBuffStat, Integer>> stat = Collections.singletonList(new Pair<>(MapleBuffStat.COMBO, neworbcount));\n                     player.setBuffedValue(MapleBuffStat.COMBO, neworbcount);                 \n                     duration -= (int) (System.currentTimeMillis() - player.getBuffedStarttime(MapleBuffStat.COMBO));"}, {"sha": "420635b48564e5e682ff57dc831e11856bdcd931", "filename": "src/net/server/handlers/login/AfterLoginHandler.java", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/src/net/server/handlers/login/AfterLoginHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/src/net/server/handlers/login/AfterLoginHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/handlers/login/AfterLoginHandler.java?ref=809d90564cf2d521d451634e58d9ffc73821512b", "patch": "@@ -30,7 +30,6 @@\n \n     @Override\n     public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {\n-        System.out.println(\"after login\");\n         \n         byte c2 = slea.readByte();\n         byte c3 = 5;"}, {"sha": "0c3011820a18624e96179bceb3d61befa7d3a3e0", "filename": "src/net/server/handlers/login/LoginPasswordHandler.java", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/src/net/server/handlers/login/LoginPasswordHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/src/net/server/handlers/login/LoginPasswordHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/handlers/login/LoginPasswordHandler.java?ref=809d90564cf2d521d451634e58d9ffc73821512b", "patch": "@@ -65,7 +65,7 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n             return;\n         }\n         if (c.finishLogin() == 0) {\n-        \tlogin(c);\n+            login(c);\n         } else {\n             c.announce(MaplePacketCreator.getLoginFailed(7));\n         }"}, {"sha": "cc940b631951668767f5d48ac2f485f59cf276f3", "filename": "src/server/MapleItemInformationProvider.java", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/src/server/MapleItemInformationProvider.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/src/server/MapleItemInformationProvider.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/MapleItemInformationProvider.java?ref=809d90564cf2d521d451634e58d9ffc73821512b", "patch": "@@ -1295,6 +1295,16 @@ public boolean isCash(int itemId) {\n         return itemId / 1000000 == 5 || getEquipStats(itemId).get(\"cash\") == 1;\n     }\n     \n+    public boolean isUpgradeable(int itemId) {\n+        Item it = this.getEquipById(itemId);\n+        Equip eq = (Equip)it;\n+        \n+        return (eq.getUpgradeSlots() > 0 || eq.getStr() > 0 || eq.getDex() > 0 || eq.getInt() > 0 || eq.getLuk() > 0 ||\n+                eq.getWatk() > 0 || eq.getMatk() > 0 || eq.getWdef() > 0 || eq.getMdef() > 0 || eq.getAcc() > 0 ||\n+                eq.getAvoid() > 0 || eq.getSpeed() > 0 || eq.getJump() > 0 || eq.getHp() > 0 || eq.getMp() > 0);\n+    }\n+    \n+    \n     public boolean isRateCoupon(int itemId) {\n         int itemType = itemId / 1000;\n         return itemType == 5211 || itemType == 5360;"}, {"sha": "529a0c5254530e73dc1d2832d0fb2f81f27f0c70", "filename": "src/server/MapleStatEffect.java", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/src/server/MapleStatEffect.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/src/server/MapleStatEffect.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/MapleStatEffect.java?ref=809d90564cf2d521d451634e58d9ffc73821512b", "patch": "@@ -677,6 +677,10 @@ private boolean applyTo(MapleCharacter applyfrom, MapleCharacter applyto, boolea\n         \n         if (primary) {\n             if (itemConNo != 0) {\n+                if(!applyto.getClient().getAbstractPlayerInteraction().hasItem(itemCon, itemConNo)) {\n+                    applyto.getClient().announce(MaplePacketCreator.enableActions());\n+                    return false;\n+                }\n                 MapleInventoryManipulator.removeById(applyto.getClient(), MapleItemInformationProvider.getInstance().getInventoryType(itemCon), itemCon, itemConNo, false, true);\n             }\n         }"}, {"sha": "731e3da95863efe676c86b1274d07ea80697f7b6", "filename": "src/server/events/BalrogPQ.java", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/src/server/events/BalrogPQ.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/src/server/events/BalrogPQ.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/events/BalrogPQ.java?ref=809d90564cf2d521d451634e58d9ffc73821512b", "patch": "@@ -62,10 +62,10 @@ public void run(){\n         public void run(){\n                 if(fmap.getCharacters().size() <= 3){\n                     if(fmap.getCharacters().size() > 0){\n-                    for(MapleCharacter chrs : fmap.getCharacters()){\n-                        chrs.message(\"[The Order]: What? You're down to that many mercenaries? I need you get you out of there.\");\n-                        chrs.changeMap(105100100);\n-                    }\n+                        for(MapleCharacter chrs : fmap.getCharacters()){\n+                            chrs.message(\"[The Order]: What? You're down to that many mercenaries? I need to get you out of there.\");\n+                            chrs.changeMap(105100100);\n+                        }\n                     }\n                     fmap.killAllMonsters();\n                     close();"}, {"sha": "20865227d50ba17ba6832970c7bc8b82ab3a67b2", "filename": "src/tools/MaplePacketCreator.java", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/src/tools/MaplePacketCreator.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/src/tools/MaplePacketCreator.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/tools/MaplePacketCreator.java?ref=809d90564cf2d521d451634e58d9ffc73821512b", "patch": "@@ -694,8 +694,10 @@ private static void addMonsterBookInfo(final MaplePacketLittleEndianWriter mplew\n                 mplew.writeLong(0);//isquietban time\n                 mplew.writeLong(c.getSessionId()); //creation time\n                 mplew.writeInt(0);\n-                mplew.writeShort(2);//PIN\n-\n+                \n+                if (ServerConstants.ENABLE_PIN) mplew.writeShort(0);\n+                else mplew.writeShort(2);\n+                \n                 return mplew.getPacket();\n         }\n "}, {"sha": "99fe061d41ec3bc12373c6111efe724fe905873a", "filename": "wz/Mob.wz/8830000.img.xml", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/809d90564cf2d521d451634e58d9ffc73821512b/wz/Mob.wz/8830000.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/809d90564cf2d521d451634e58d9ffc73821512b/wz/Mob.wz/8830000.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Mob.wz/8830000.img.xml?ref=809d90564cf2d521d451634e58d9ffc73821512b", "patch": "@@ -48,6 +48,9 @@\n     <imgdir name=\"speak\">\n       <int name=\"chatBalloon\" value=\"1\"/>\n     </imgdir>\n+    <int name=\"hpTagColor\" value=\"1\"/>\n+    <int name=\"hpTagBgcolor\" value=\"5\"/>\n+    <int name=\"HPgaugeHide\" value=\"1\"/>\n   </imgdir>\n   <imgdir name=\"stand\">\n     <canvas name=\"0\" width=\"827\" height=\"561\">"}]}]},
