{"fetchDate": "2019-12-19", "content": [{"sha": "6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "node_id": "MDY6Q29tbWl0NDUwODIwMjM6NmE2M2Y5ZDk1ZTY4ZjU0YTMwMTQ0YWNiMmU5OTkyNGRjM2YyY2UyNA==", "commit": {"author": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2018-04-14T16:38:14Z"}, "committer": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2018-04-14T16:38:14Z"}, "message": "Quest & Command tweak + MapleCashDropFetcher + Cash drop tidyup\n\nSolved a possible exploit on starting/completing non-scripted quests.\nAdded missing drop data for Aran's puppeteer questline.\nMoved GM tier level of some commands.\nApplied proper synchronization for BuddyList modules.\nIssued commands now requires \"@\" heading for normal players and donators (GM level < 2) and \"!\" for Jr. GM and above (GM level >= 2).\nAdded custom feature: a message will be sent to acquaintances of a player (friends, family, guild, spouse) when they change/upgrade jobs.\nRemoved cash drop entries from the DB.\nNew tool: MapleCashDropFetcher. Reports on a text file all cash-type drop data on DB.", "tree": {"sha": "9c6e69b4c3127d4a8720430f7cc0cce88a814936", "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/trees/9c6e69b4c3127d4a8720430f7cc0cce88a814936"}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/commits/6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "html_url": "https://github.com/ronancpl/HeavenMS/commit/6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "comments_url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/comments", "author": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6d91c79f28258be7d329c2c8ac781b4d8e0fd075", "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/6d91c79f28258be7d329c2c8ac781b4d8e0fd075", "html_url": "https://github.com/ronancpl/HeavenMS/commit/6d91c79f28258be7d329c2c8ac781b4d8e0fd075"}], "stats": {"total": 10255, "additions": 6335, "deletions": 3920}, "files": [{"sha": "232f549d1eee9f16f7cb0112ba298cea3936c226", "filename": ".gitignore", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/.gitignore", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/.gitignore", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/.gitignore?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -15,6 +15,10 @@\n /tools/MapleBossHpBarFetcher/build/\n /tools/MapleBossHpBarFetcher/dist/\n \n+/tools/MapleCashDropFetcher/nbproject/private/\n+/tools/MapleCashDropFetcher/build/\n+/tools/MapleCashDropFetcher/dist/\n+\n /tools/MapleCouponInstaller/build/\n /tools/MapleCouponInstaller/dist/\n /tools/MapleCouponInstaller/nbproject/private/"}, {"sha": "7e3b4d68adf543f072cba136c2b7577fbca47a9b", "filename": "README.md", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/README.md", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/README.md", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/README.md?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -20,9 +20,15 @@ Server files: https://github.com/ronancpl/HeavenMS\n \n Client files & general tools: https://drive.google.com/drive/folders/0BzDsHSr-0V4MYVJ0TWIxd05hYUk\n \n-Recommended localhost: https://hostr.co/r5QDmhlxpp8M\n+Recommended localhost: https://hostr.co/fuzm4X9j7TWh\n \n-* MapleSilver's starting on window-mode, with some string fixes. This is a variation of Fraysa's https://hostr.co/gJbLZITRVHmv\n+* Current revision: 'n' problem fixed and removed caps for WATK, WDEF, MDEF, ACC, AVOID.\n+\n+  * 'n' problem fixed https://hostr.co/r5QDmhlxpp8M\n+\n+  * Fraysa's https://hostr.co/gJbLZITRVHmv\n+\n+  * MapleSilver's starting on window-mode\n \n ---\n ### Support us"}, {"sha": "39984d3ac4e8cd7fb5e45a51699f57f3e8bb1d0a", "filename": "docs/feature_list.md", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/docs/feature_list.md", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/docs/feature_list.md", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/docs/feature_list.md?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -118,6 +118,7 @@ External tools:\n \n * MapleArrowFetcher - Updates min/max quantity dropped on all arrows drop data, calculations based on mob level and whether it's a boss or not.\n * MapleBossHpBarFetcher - Searches the quest WZ files and reports in all relevant data regarding mobs that has a boss HP bar whilst not having a proper \"boss\" label.\n+* MapleCashDropFetcher - Searches the DB for any CASH drop data entry and lists them on a report file.\n * MapleCouponInstaller - Retrieves coupon info from the WZ and makes a SQL table with it. The server will use that table to gather info regarding rates and intervals.\n * MapleIdRetriever - Two behaviors: generates a SQL table with relation (id, name) of the handbook given as input. Given a file with names, outputs a file with ids.\n * MapleInvalidItemIdFetcher - Generates a file listing all inexistent itemid's currently laying on the DB.\n@@ -140,4 +141,9 @@ Project:\n * Heavily reviewed future task management inside the project. Way less trivial schedules are spawned now, relieving task overload on the TimerManager.\n * ThreadTracker: embedded auditing tool for run-time deadlock scanning throughout the server source (relies heavily on memory usage, designed only for debugging purposes).\n \n+Localhost:\n+\n+* Removed the 'n' problem within NPC dialog.\n+* Removed caps for MATK, WDEF, MDEF, ACC and AVOID.\n+\n ---------------------------\n\\ No newline at end of file"}, {"sha": "82be83273986a44cfa5572504815d90004127ead", "filename": "docs/mychanges_ptbr.txt", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/docs/mychanges_ptbr.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/docs/mychanges_ptbr.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/docs/mychanges_ptbr.txt?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -859,4 +859,11 @@ Corrigido NPC de guild tirando mesos do jogador sem efetuar a a\u00e7\u00e3o alguma caso\n 11 - 12 Mar\u00e7o 2018,\n Localhost melhorado: retirado caps de Matk, Mdef, Wdef, Acc e Avoid.\n Balanceado Ninja Ambush, agora dando uma quantidade de dano justific\u00e1vel.\n-Implementado questline do Dyle.\n\\ No newline at end of file\n+Implementado questline do Dyle.\n+Corrigido poss\u00edvel exploit com sistema de quests, onde jogador podia come\u00e7ar e completar quaisquer quests livremente.\n+Nova ferramenta: MapleCashDropFetcher. Aplica\u00e7\u00e3o busca por drop data de cash na DB e reporta.\n+\n+13 Mer\u00e7o 2018,\n+Adicionado feature de an\u00fancio de mudan\u00e7a de classe.\n+Adicionado drops faltando da questline Puppeteer de Aran.\n+Movimenta\u00e7\u00e3o de GM rank para alguns comandos.\n\\ No newline at end of file"}, {"sha": "462f8157fb92132ed0fff3d18b57c2ae41187095", "filename": "scripts/npc/PupeteerPassword.js", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/scripts/npc/PupeteerPassword.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/scripts/npc/PupeteerPassword.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/PupeteerPassword.js?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -18,10 +18,17 @@ function action(mode, type, selection){\n \n \n \tif(status == 0){\n+                if(cm.isQuestStarted(21728)) {\n+                        cm.sendOk(\"You search for any hints of the Puppeteer, but it seems a powerful force blocks the path... Better return to #b#p1061019##k.\");\n+                        cm.setQuestProgress(21728, 0, 1);\n+                        cm.dispose();\n+                        return;\n+                }\n+            \n \t\tcm.sendGetText(\"A suspicious voice pierces through the silence. #bPassword#k!\");\n \t}\n \telse if(status == 1){\n-\t\tif(cm.getText() == \"Francis is a genius Puppeteer!\"){\n+                if(cm.getText() == \"Francis is a genius Puppeteer!\"){\n \t\t\tif(cm.isQuestStarted(20730) && cm.getQuestProgress(20730, 9300285) == 0)\n \t\t\t\tcm.warp(910510001, 1);\n                         else if(cm.isQuestStarted(21731) && cm.getQuestProgress(21731, 9300346) == 0)"}, {"sha": "a355847ffb7b65b437bc47bb922de27d3dbd315c", "filename": "scripts/npc/commands.js", "status": "modified", "additions": 10, "deletions": 6, "changes": 16, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/scripts/npc/commands.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/scripts/npc/commands.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/commands.js?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -152,6 +152,7 @@ function writeSolaxiaCommandsLv2() {    //JrGM\n         comm_cursor = comm_lv2;\n         desc_cursor = desc_lv2;\n \n+        addCommand(\"whereami\", \"\");\n         addCommand(\"hide\", \"\");\n         addCommand(\"unhide\", \"\");\n         addCommand(\"sp\", \"\");\n@@ -188,10 +189,13 @@ function writeSolaxiaCommandsLv1() {    //Donator\n         comm_cursor = comm_lv1;\n         desc_cursor = desc_lv1;\n \n+        addCommand(\"bosshp\", \"\");\n+        addCommand(\"mobhp\", \"\");\n+        addCommand(\"whatdropsfrom\", \"\");\n+        addCommand(\"whodrops\", \"\");\n         addCommand(\"buffme\", \"\");\n         addCommand(\"goto\", \"\");\n         addCommand(\"recharge\", \"\");\n-        addCommand(\"whereami\", \"\");\n }\n \n function writeSolaxiaCommandsLv0() {    //Common\n@@ -204,21 +208,21 @@ function writeSolaxiaCommandsLv0() {    //Common\n         addCommand(\"credits\", \"\");\n         addCommand(\"uptime\", \"\");\n         addCommand(\"gacha\", \"\");\n-        addCommand(\"whatdropsfrom\", \"\");\n-        addCommand(\"whodrops\", \"\");\n         addCommand(\"dispose\", \"\");\n         addCommand(\"equiplv\", \"\");\n         addCommand(\"showrates\", \"\");\n         addCommand(\"rates\", \"\");\n         addCommand(\"online\", \"\");\n         addCommand(\"gm\", \"\");\n-        addCommand(\"bug\", \"\");\n+        addCommand(\"reportbug\", \"\");\n \t//addCommand(\"points\", \"\");\n         addCommand(\"joinevent\", \"\");\n         addCommand(\"leaveevent\", \"\");\n-        addCommand(\"bosshp\", \"\");\n-        addCommand(\"mobhp\", \"\");\n         addCommand(\"ranks\", \"\");\n+        addCommand(\"str\", \"\");\n+        addCommand(\"int\", \"\");\n+        addCommand(\"luk\", \"\");\n+        addCommand(\"dex\", \"\");\n }\n \n function writeSolaxiaCommands() {"}, {"sha": "88bb7ba1fe31b0aeec8f193215aefb2462c74420", "filename": "scripts/quest/21728.js", "status": "added", "additions": 49, "deletions": 0, "changes": 49, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/scripts/quest/21728.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/scripts/quest/21728.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21728.js?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -0,0 +1,49 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+var status = -1;\n+\n+function end(mode, type, selection) {\n+    if (mode == -1) {\n+        qm.dispose();\n+    } else {\n+        if(mode == 0 && type > 0) {\n+            qm.dispose();\n+            return;\n+        }\n+        \n+        if (mode == 1)\n+            status++;\n+        else\n+            status--;\n+        \n+        if (status == 0) {\n+            if(qm.getQuestProgress(21728, 0) == 0) {\n+                qm.sendNext(\"You haven't found the #rPuppeteer's cave#k yet, did you?\");\n+            } else {\n+                qm.sendNext(\"Hm, so the entrance is blocked by a powerful force? I see, gimme a time to think now...\");\n+                qm.gainExp(200 * qm.getPlayer().getExpRate());\n+                qm.forceCompleteQuest();\n+            }\n+            \n+            qm.dispose();\n+        }\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "f56e2b7172e363b368a86556760c5fa0049a7e6c", "filename": "scripts/quest/21729.js", "status": "added", "additions": 44, "deletions": 0, "changes": 44, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/scripts/quest/21729.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/scripts/quest/21729.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21729.js?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -0,0 +1,44 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+var status = -1;\n+\n+function start(mode, type, selection) {\n+    if (mode == -1) {\n+        qm.dispose();\n+    } else {\n+        if(mode == 0 && type > 0) {\n+            qm.dispose();\n+            return;\n+        }\n+        \n+        if (mode == 1)\n+            status++;\n+        else\n+            status--;\n+        \n+        if (status == 0) {\n+            qm.sendNext(\"Okay, you should not return to #bTru#k for further details on your next steps. ... Oh wait!! I remembered something. See the #rMysterious Statue#k over there? That statue has it's origins unknwown, and there's something scribbled onto it that resembles something big, it probably is the password for the cave? #rGet the password there#k, it may help you on your journey.\");\n+            qm.forceStartQuest();\n+            \n+            qm.dispose();\n+        }\n+    }\n+}"}, {"sha": "10ade811f90ebad2e9f7eac48c1fe8cb92b6f6d6", "filename": "scripts/quest/2214.js", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/scripts/quest/2214.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/scripts/quest/2214.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2214.js?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -25,6 +25,8 @@\n \tQuest ID: \t\t2214\n */\n \n+importPackage(java.util);\n+\n var status = -1;\n \n function end(mode, type, selection) {\n@@ -42,6 +44,13 @@ function end(mode, type, selection) {\n             status--;\n         \n         if (status == 0) {\n+            var hourDay = Calendar.getInstance().get(Calendar.HOUR_OF_DAY);\n+            if(!(hourDay >= 17 && hourDay < 20)) {\n+                qm.sendNext(\"(Hmm, I'm searching the trash can but can't find the #t4031894# JM was talking about, maybe it's not time yet...)\");\n+                qm.dispose();\n+                return;\n+            }\n+            \n             if(!qm.canHold(4031894, 1)) {\n                 qm.sendNext(\"(Eh, I can't hold the #t4031894# right now, I need an ETC slot available.)\");\n                 qm.dispose();"}, {"sha": "bea586d10e869e36c4b1c5b2b9ee16a3ebf6c5b6", "filename": "scripts/quest/2215.js", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/scripts/quest/2215.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/scripts/quest/2215.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2215.js?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -25,6 +25,8 @@\n \tQuest ID: \t\t2215\n */\n \n+importPackage(java.util);\n+\n var status = -1;\n \n function end(mode, type, selection) {\n@@ -42,6 +44,13 @@ function end(mode, type, selection) {\n             status--;\n         \n         if (status == 0) {\n+            var hourDay = Calendar.getInstance().get(Calendar.HOUR_OF_DAY);\n+            if(!(hourDay >= 17 && hourDay < 20)) {\n+                qm.sendNext(\"(Hmm, I'm searching the trash can but can't find the #t4031894# JM was talking about, maybe it's not time yet...)\");\n+                qm.dispose();\n+                return;\n+            }\n+            \n             if(qm.getMeso() < 2000) {\n                 qm.sendNext(\"(Oh, I don't have the combined fee amount yet.)\");\n                 qm.dispose();"}, {"sha": "b4775a491bed9f31e7322eb985e92c0c517a85f5", "filename": "sql/db_database.sql", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/sql/db_database.sql", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/sql/db_database.sql", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/sql/db_database.sql?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -10830,9 +10830,6 @@ INSERT IGNORE INTO `temp_data` (`id`, `dropperid`, `itemid`, `minimum_quantity`,\n (10608, 9302010, 2022524, 1, 1, 0, 100000),\n (10609, 9400256, 4032192, 1, 1, 0, 50000),\n (10610, 9400257, 4032192, 1, 1, 0, 50000),\n-(10611, 9410066, 5490001, 1, 1, 0, 700000),\n-(10612, 9410066, 5490001, 1, 1, 0, 700000),\n-(10613, 9410066, 5490000, 1, 1, 0, 300000),\n (10614, 9410066, 4000306, 1, 1, 0, 700000),\n (10615, 9410066, 4000306, 1, 1, 0, 700000),\n (10616, 9410066, 4000306, 1, 1, 0, 700000),"}, {"sha": "2a830615914715ccf6ed21965346c626734ea43b", "filename": "sql/db_drops.sql", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/sql/db_drops.sql", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/sql/db_drops.sql", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/sql/db_drops.sql?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -1107,7 +1107,6 @@ USE `heavenms`;\n (9300063, 1052101, 1, 1, 0, 700), \n (9300082, 1052101, 1, 1, 0, 700), \n (9400503, 1052101, 1, 1, 0, 40000), \n-(2100100, 5240005, 1, 1, 0, 7000),\n (2100100, 4003004, 1, 1, 0, 7000), \n (2100100, 2000001, 1, 1, 0, 40000), \n (2100100, 2000003, 1, 1, 0, 40000), \n@@ -10022,7 +10021,6 @@ USE `heavenms`;\n (9500326, 1372000, 1, 1, 0, 40000), \n (9500345, 1372000, 1, 1, 0, 40000), \n (9303004, 1372000, 1, 1, 0, 700), \n-(6130103, 1702131, 1, 1, 0, 700), \n (6130103, 2000006, 1, 1, 0, 40000), \n (6130103, 2000004, 1, 1, 0, 40000),\n (6130103, 2040401, 1, 1, 0, 750), \n@@ -20183,7 +20181,11 @@ USE `heavenms`;\n (9400114, 2022063, 10, 30, 0, 200000),\n (9400114, 2022064, 10, 30, 0, 200000),\n (9400120, 4000094, 1, 1, 0, 400000),\n-(9400122, 4000094, 1, 1, 0, 400000);\n+(9400122, 4000094, 1, 1, 0, 400000),\n+(1110130, 4032317, 1, 1, 21717, 40000),\n+(1110130, 4032318, 1, 1, 21718, 40000),\n+(1140130, 4032319, 1, 1, 21723, 100000),\n+(2230131, 4032321, 1, 1, 21727, 20000);\n \n # (dropperid, itemid, minqty, maxqty, questid, chance)\n "}, {"sha": "1a5d77b626c909448cf9a826151335fbf5e10d9a", "filename": "src/client/BuddyList.java", "status": "modified", "additions": 45, "deletions": 13, "changes": 58, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/src/client/BuddyList.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/src/client/BuddyList.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/BuddyList.java?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -26,10 +26,12 @@\n import java.sql.Connection;\n import java.sql.SQLException;\n import java.util.Collection;\n+import java.util.Collections;\n import java.util.Deque;\n import java.util.LinkedHashMap;\n import java.util.LinkedList;\n import java.util.Map;\n+import net.server.PlayerStorage;\n import tools.DatabaseConnection;\n import tools.MaplePacketCreator;\n \n@@ -50,15 +52,22 @@ public BuddyList(int capacity) {\n     }\n \n     public boolean contains(int characterId) {\n-        return buddies.containsKey(Integer.valueOf(characterId));\n+        synchronized(buddies) {\n+            return buddies.containsKey(Integer.valueOf(characterId));\n+        }\n     }\n \n     public boolean containsVisible(int characterId) {\n-        BuddylistEntry ble = buddies.get(characterId);\n+        BuddylistEntry ble;\n+        synchronized(buddies) {\n+            ble = buddies.get(characterId);\n+        }\n+        \n         if (ble == null) {\n             return false;\n         }\n         return ble.isVisible();\n+        \n     }\n \n     public int getCapacity() {\n@@ -70,42 +79,65 @@ public void setCapacity(int capacity) {\n     }\n \n     public BuddylistEntry get(int characterId) {\n-        return buddies.get(Integer.valueOf(characterId));\n+        synchronized(buddies) {\n+            return buddies.get(Integer.valueOf(characterId));\n+        }\n     }\n \n     public BuddylistEntry get(String characterName) {\n         String lowerCaseName = characterName.toLowerCase();\n-        for (BuddylistEntry ble : buddies.values()) {\n+        for (BuddylistEntry ble : getBuddies()) {\n             if (ble.getName().toLowerCase().equals(lowerCaseName)) {\n                 return ble;\n             }\n         }\n+        \n         return null;\n     }\n \n     public void put(BuddylistEntry entry) {\n-        buddies.put(Integer.valueOf(entry.getCharacterId()), entry);\n+        synchronized(buddies) {\n+            buddies.put(Integer.valueOf(entry.getCharacterId()), entry);\n+        }\n     }\n \n     public void remove(int characterId) {\n-        buddies.remove(Integer.valueOf(characterId));\n+        synchronized(buddies) {\n+            buddies.remove(Integer.valueOf(characterId));\n+        }\n     }\n \n     public Collection<BuddylistEntry> getBuddies() {\n-        return buddies.values();\n+        synchronized(buddies) {\n+            return Collections.unmodifiableCollection(buddies.values());\n+        }\n     }\n \n     public boolean isFull() {\n-        return buddies.size() >= capacity;\n+        synchronized(buddies) {\n+            return buddies.size() >= capacity;\n+        }\n     }\n \n     public int[] getBuddyIds() {\n-        int buddyIds[] = new int[buddies.size()];\n-        int i = 0;\n-        for (BuddylistEntry ble : buddies.values()) {\n-            buddyIds[i++] = ble.getCharacterId();\n+        synchronized(buddies) {\n+            int buddyIds[] = new int[buddies.size()];\n+            int i = 0;\n+            for (BuddylistEntry ble : buddies.values()) {\n+                buddyIds[i++] = ble.getCharacterId();\n+            }\n+            return buddyIds;\n+        }\n+    }\n+    \n+    public void broadcast(byte[] packet, PlayerStorage pstorage) {\n+        for(int bid : getBuddyIds()) {\n+            MapleCharacter chr = pstorage.getCharacterById(bid);\n+            \n+            if(chr != null && chr.isLoggedin() && !chr.isAwayFromWorld()) {\n+                chr.announce(packet);\n+            }\n         }\n-        return buddyIds;\n     }\n \n     public void loadFromDb(int characterId) {"}, {"sha": "1904fc7e834e19f368e1d5038a534af117337cb6", "filename": "src/client/MapleCharacter.java", "status": "modified", "additions": 30, "deletions": 5, "changes": 35, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/src/client/MapleCharacter.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/src/client/MapleCharacter.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/MapleCharacter.java?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -199,7 +199,6 @@\n     private int expRate = 1, mesoRate = 1, dropRate = 1, expCoupon = 1, mesoCoupon = 1, dropCoupon = 1;\n     private int omokwins, omokties, omoklosses, matchcardwins, matchcardties, matchcardlosses;\n     private int owlSearch;\n-    private int married;\n     private long lastfametime, lastUsedCashItem, lastHealed, lastMesoDrop = -1, jailExpiration = -1;\n     private transient int localmaxhp, localmaxmp, localstr, localdex, localluk, localint_, magic, watk;\n     private boolean hidden, canDoor = true, berserk, hasMerchant, whiteChat = false;\n@@ -1093,6 +1092,36 @@ public void changeJob(MapleJob newJob) {\n             }\n             createDragon();\n         }\n+        \n+        if(ServerConstants.USE_ANNOUNCE_CHANGEJOB) {\n+            if(gmLevel > 1) {\n+                broadcastAcquaintances(6, \"[\" + GameConstants.ordinal(GameConstants.getJobBranch(newJob)) + \" Job] \" + name + \" has just become a \" + newJob.name() + \".\");\n+            }\n+        }\n+    }\n+    \n+    public void broadcastAcquaintances(int type, String message) {\n+        broadcastAcquaintances(MaplePacketCreator.serverNotice(type, message));\n+    }\n+    \n+    public void broadcastAcquaintances(byte[] packet) {\n+        buddylist.broadcast(packet, client.getWorldServer().getPlayerStorage());\n+        \n+        if(family != null) {\n+            //family.broadcast(packet, id); not yet implemented\n+        }\n+        \n+        MapleGuild guild = getGuild();\n+        if(guild != null) {\n+            guild.broadcast(packet, id);\n+        }\n+        \n+        /*\n+        if(partnerid > 0) {\n+            partner.announce(packet); not yet implemented\n+        }\n+        */\n+        announce(packet);\n     }\n \n     public void changeKeybinding(int key, MapleKeyBinding keybinding) {\n@@ -3955,10 +3984,6 @@ public MapleRing getMarriageRing() {\n         return marriageRing;\n     }\n \n-    public int getMarried() {\n-        return married;\n-    }\n-\n     public int getMasterLevel(Skill skill) {\n         if (skills.get(skill) == null) {\n             return 0;"}, {"sha": "ed77335191060d0f34b4c812f55e23dca3718b61", "filename": "src/client/command/Commands.java", "status": "modified", "additions": 169, "deletions": 123, "changes": 292, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/src/client/command/Commands.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/src/client/command/Commands.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/command/Commands.java?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -351,7 +351,7 @@ public static boolean executeHeavenMsCommandLv0(Channel cserv, Server srv, Maple\n                 case \"playercommands\":\n                         c.getAbstractPlayerInteraction().openNpc(9201143, \"commands\");\n                         break;\n-                    \n+                \n                 case \"droplimit\":\n                         int dropCount = c.getPlayer().getMap().getDroppedItemCount();\n                         if(((float) dropCount) / ServerConstants.ITEM_LIMIT_ON_MAP < 0.75f) {\n@@ -402,90 +402,14 @@ public static boolean executeHeavenMsCommandLv0(Channel cserv, Server srv, Maple\n \t\t\t\t}\n                         break;\n \t\t\t}\n-\t\t\tString output = \"The #b\" + gachaName + \"#k Gachapon contains the following items.\\r\\n\\r\\n\";\n+\t\t\tString talkStr = \"The #b\" + gachaName + \"#k Gachapon contains the following items.\\r\\n\\r\\n\";\n \t\t\tfor (int i = 0; i < 2; i++){\n \t\t\t\tfor (int id : gacha.getItems(i)){\n-\t\t\t\t\toutput += \"-\" + MapleItemInformationProvider.getInstance().getName(id) + \"\\r\\n\";\n-\t\t\t\t}\n-\t\t\t}\n-\t\t\toutput += \"\\r\\nPlease keep in mind that there are items that are in all gachapons and are not listed here.\";\n-\t\t\tc.announce(MaplePacketCreator.getNPCTalk(9010000, (byte) 0, output, \"00 00\", (byte) 0));\n-\t\t\tbreak;\n-                    \n-\t\tcase \"whatdropsfrom\":\n-\t\t\tif (sub.length < 2) {\n-\t\t\t\tplayer.dropMessage(5, \"Please do @whatdropsfrom <monster name>\");\n-                        break;\n-\t\t\t}\n-\t\t\tString monsterName = joinStringFrom(sub, 1);\n-\t\t\toutput = \"\";\n-\t\t\tint limit = 3;\n-\t\t\tIterator<Pair<Integer, String>> listIterator = MapleMonsterInformationProvider.getMobsIDsFromName(monsterName).iterator();\n-\t\t\tfor (int i = 0; i < limit; i++) {\n-\t\t\t\tif(listIterator.hasNext()) {\n-\t\t\t\t\tPair<Integer, String> data = listIterator.next();\n-\t\t\t\t\tint mobId = data.getLeft();\n-\t\t\t\t\tString mobName = data.getRight();\n-\t\t\t\t\toutput += mobName + \" drops the following items:\\r\\n\\r\\n\";\n-\t\t\t\t\tfor (MonsterDropEntry drop : MapleMonsterInformationProvider.getInstance().retrieveDrop(mobId)){\n-\t\t\t\t\t\ttry {\n-\t\t\t\t\t\t\tString name = MapleItemInformationProvider.getInstance().getName(drop.itemId);\n-\t\t\t\t\t\t\tif (name.equals(\"null\") || drop.chance == 0){\n-\t\t\t\t\t\t\t\tcontinue;\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\tfloat chance = 1000000 / drop.chance / player.getDropRate();\n-\t\t\t\t\t\t\toutput += \"- \" + name + \" (1/\" + (int) chance + \")\\r\\n\";\n-\t\t\t\t\t\t} catch (Exception ex){\n-                                                        ex.printStackTrace();\n-\t\t\t\t\t\t\tcontinue;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t\toutput += \"\\r\\n\";\n-\t\t\t\t}\n-\t\t\t}\n-\t\t\tc.announce(MaplePacketCreator.getNPCTalk(9010000, (byte) 0, output, \"00 00\", (byte) 0));\n-\t\t\tbreak;\n-                    \n-\t\tcase \"whodrops\":\n-\t\t\tif (sub.length < 2) {\n-\t\t\t\tplayer.dropMessage(5, \"Please do @whodrops <item name>\");\n-                        break;\n-\t\t\t}\n-\t\t\tString searchString = joinStringFrom(sub, 1);\n-\t\t\toutput = \"\";\n-\t\t\tlistIterator = MapleItemInformationProvider.getInstance().getItemDataByName(searchString).iterator();\n-\t\t\tif(listIterator.hasNext()) {\n-\t\t\t\tint count = 1;\n-\t\t\t\twhile(listIterator.hasNext() && count <= 3) {\n-\t\t\t\t\tPair<Integer, String> data = listIterator.next();\n-\t\t\t\t\toutput += \"#b\" + data.getRight() + \"#k is dropped by:\\r\\n\";\n-\t\t\t\t\ttry {\n-                                                Connection con = DatabaseConnection.getConnection();\n-\t\t\t\t\t\tPreparedStatement ps = con.prepareStatement(\"SELECT dropperid FROM drop_data WHERE itemid = ? LIMIT 50\");\n-\t\t\t\t\t\tps.setInt(1, data.getLeft());\n-\t\t\t\t\t\tResultSet rs = ps.executeQuery();\n-\t\t\t\t\t\twhile(rs.next()) {\n-\t\t\t\t\t\t\tString resultName = MapleMonsterInformationProvider.getMobNameFromID(rs.getInt(\"dropperid\"));\n-\t\t\t\t\t\t\tif (resultName != null) {\n-\t\t\t\t\t\t\t\toutput += resultName + \", \";\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t}\n-\t\t\t\t\t\trs.close();\n-\t\t\t\t\t\tps.close();\n-                                                con.close();\n-\t\t\t\t\t} catch (Exception e) {\n-\t\t\t\t\t\tplayer.dropMessage(6, \"There was a problem retrieving the required data. Please try again.\");\n-\t\t\t\t\t\te.printStackTrace();\n-\t\t\t\t\t\tbreak;\n-\t\t\t\t\t}\n-\t\t\t\t\toutput += \"\\r\\n\\r\\n\";\n-\t\t\t\t\tcount++;\n+\t\t\t\t\ttalkStr += \"-\" + MapleItemInformationProvider.getInstance().getName(id) + \"\\r\\n\";\n \t\t\t\t}\n-\t\t\t} else {\n-\t\t\t\tplayer.dropMessage(5, \"The item you searched for doesn't exist.\");\n-                        break;\n \t\t\t}\n-\t\t\tc.announce(MaplePacketCreator.getNPCTalk(9010000, (byte) 0, output, \"00 00\", (byte) 0));\n+\t\t\ttalkStr += \"\\r\\nPlease keep in mind that there are items that are in all gachapons and are not listed here.\";\n+\t\t\tc.announce(MaplePacketCreator.getNPCTalk(9010000, (byte) 0, talkStr, \"00 00\", (byte) 0));\n \t\t\tbreak;\n                     \n \t\tcase \"dispose\":\n@@ -560,7 +484,7 @@ public static boolean executeHeavenMsCommandLv0(Channel cserv, Server srv, Maple\n \t\t\tplayer.dropMessage(5, tips[Randomizer.nextInt(tips.length)]);\n \t\t\tbreak;\n                     \n-\t\tcase \"bug\":\n+\t\tcase \"reportbug\":\n                     \n \t\t\tif (sub.length < 2) {\n \t\t\t\tplayer.dropMessage(5, \"Message too short and not sent. Please do @bug <bug>\");\n@@ -636,30 +560,6 @@ public static boolean executeHeavenMsCommandLv0(Channel cserv, Server srv, Maple\n \t\t\t}\n \t\t\tbreak;\n                     \n-\t\tcase \"bosshp\":\n-\t\t\tfor(MapleMonster monster : player.getMap().getMonsters()) {\n-\t\t\t\tif(monster != null && monster.isBoss() && monster.getHp() > 0) {\n-\t\t\t\t\tlong percent = monster.getHp() * 100L / monster.getMaxHp();\n-\t\t\t\t\tString bar = \"[\";\n-\t\t\t\t\tfor (int i = 0; i < 100; i++){\n-\t\t\t\t\t\tbar += i < percent ? \"|\" : \".\";\n-\t\t\t\t\t}\n-\t\t\t\t\tbar += \"]\";\n-\t\t\t\t\tplayer.yellowMessage(monster.getName() + \" (\" + monster.getId() + \") has \" + percent + \"% HP left.\");\n-\t\t\t\t\tplayer.yellowMessage(\"HP: \" + bar);\n-\t\t\t\t}\n-\t\t\t} \n-\t\t\tbreak;\n-                    \n-                case \"mobhp\":\n-\t\t\tfor(MapleMonster monster : player.getMap().getMonsters()) {\n-\t\t\t\tif(monster != null && monster.getHp() > 0) {\n-\t\t\t\t\tplayer.yellowMessage(monster.getName() + \" (\" + monster.getId() + \") has \" + monster.getHp() + \" / \" + monster.getMaxHp() + \" HP.\");\n-\t\t\t\t\t\n-\t\t\t\t}\n-\t\t\t} \n-\t\t\tbreak;\n-                    \n \t\tcase \"ranks\":\n \t\t\tPreparedStatement ps = null;\n \t\t\tResultSet rs = null;\n@@ -691,6 +591,47 @@ public static boolean executeHeavenMsCommandLv0(Channel cserv, Server srv, Maple\n \t\t\t\t}\n \t\t\t}\n \t\t\tbreak;\n+                    \n+                // stat autoassigning command credited to HeliosMS dev team\n+                case \"str\":\n+                case \"int\":\n+                case \"luk\":\n+                case \"dex\":\n+                        int amount = (sub.length > 1) ? Integer.parseInt(sub[1]) : player.getRemainingAp();\n+                        boolean str = sub[0].equalsIgnoreCase(\"str\");\n+                        boolean Int = sub[0].equalsIgnoreCase(\"int\");\n+                        boolean luk = sub[0].equalsIgnoreCase(\"luk\");\n+                        boolean dex = sub[0].equalsIgnoreCase(\"dex\");\n+\n+                        if (amount > 0 && amount <= player.getRemainingAp() && amount <= 32763 || amount < 0 && amount >= -32763 && Math.abs(amount) + player.getRemainingAp() <= 32767) {\n+                            if (str && amount + player.getStr() <= 32767 && amount + player.getStr() >= 4) {\n+                                player.setStr(player.getStr() + amount);\n+                                player.updateSingleStat(MapleStat.STR, player.getStr());\n+                                player.setRemainingAp(player.getRemainingAp() - amount);\n+                                player.updateSingleStat(MapleStat.AVAILABLEAP, player.getRemainingAp());\n+                            } else if (Int && amount + player.getInt() <= 32767 && amount + player.getInt() >= 4) {\n+                                player.setInt(player.getInt() + amount);\n+                                player.updateSingleStat(MapleStat.INT, player.getInt());\n+                                player.setRemainingAp(player.getRemainingAp() - amount);\n+                                player.updateSingleStat(MapleStat.AVAILABLEAP, player.getRemainingAp());\n+                            } else if (luk && amount + player.getLuk() <= 32767 && amount + player.getLuk() >= 4) {\n+                                player.setLuk(player.getLuk() + amount);\n+                                player.updateSingleStat(MapleStat.LUK, player.getLuk());\n+                                player.setRemainingAp(player.getRemainingAp() - amount);\n+                                player.updateSingleStat(MapleStat.AVAILABLEAP, player.getRemainingAp());\n+                            } else if (dex && amount + player.getDex() <= 32767 && amount + player.getDex() >= 4) {\n+                                player.setDex(player.getDex() + amount);\n+                                player.updateSingleStat(MapleStat.DEX, player.getDex());\n+                                player.setRemainingAp(player.getRemainingAp() - amount);\n+                                player.updateSingleStat(MapleStat.AVAILABLEAP, player.getRemainingAp());\n+                            } else {\n+                                player.dropMessage(\"Please make sure the stat you are trying to raise is not over 32,767 or under 4.\");\n+                            }\n+                        } else {\n+                            player.dropMessage(\"Please make sure your AP is not over 32,767 and you have enough to distribute.\");\n+                        }\n+                    \n+                        break;\n                             \n                 default:\n                         return false;\n@@ -702,8 +643,113 @@ public static boolean executeHeavenMsCommandLv0(Channel cserv, Server srv, Maple\n         public static boolean executeHeavenMsCommandLv1(Channel cserv, Server srv, MapleClient c, String[] sub) { //Donator\n                 MapleCharacter player = c.getPlayer();\n             \n-                switch(sub[0]) {                \n+                switch(sub[0]) {\n+                case \"bosshp\":\n+\t\t\tfor(MapleMonster monster : player.getMap().getMonsters()) {\n+\t\t\t\tif(monster != null && monster.isBoss() && monster.getHp() > 0) {\n+\t\t\t\t\tlong percent = monster.getHp() * 100L / monster.getMaxHp();\n+\t\t\t\t\tString bar = \"[\";\n+\t\t\t\t\tfor (int i = 0; i < 100; i++){\n+\t\t\t\t\t\tbar += i < percent ? \"|\" : \".\";\n+\t\t\t\t\t}\n+\t\t\t\t\tbar += \"]\";\n+\t\t\t\t\tplayer.yellowMessage(monster.getName() + \" (\" + monster.getId() + \") has \" + percent + \"% HP left.\");\n+\t\t\t\t\tplayer.yellowMessage(\"HP: \" + bar);\n+\t\t\t\t}\n+\t\t\t} \n+\t\t\tbreak;\n+                    \n+                case \"mobhp\":\n+\t\t\tfor(MapleMonster monster : player.getMap().getMonsters()) {\n+\t\t\t\tif(monster != null && monster.getHp() > 0) {\n+\t\t\t\t\tplayer.yellowMessage(monster.getName() + \" (\" + monster.getId() + \") has \" + monster.getHp() + \" / \" + monster.getMaxHp() + \" HP.\");\n+\t\t\t\t\t\n+\t\t\t\t}\n+\t\t\t} \n+\t\t\tbreak;\n+                    \n+                case \"whatdropsfrom\":\n+\t\t\tif (sub.length < 2) {\n+\t\t\t\tplayer.dropMessage(5, \"Please do @whatdropsfrom <monster name>\");\n+                        break;\n+\t\t\t}\n+\t\t\tString monsterName = joinStringFrom(sub, 1);\n+\t\t\tString output = \"\";\n+\t\t\tint limit = 3;\n+\t\t\tIterator<Pair<Integer, String>> listIterator = MapleMonsterInformationProvider.getMobsIDsFromName(monsterName).iterator();\n+\t\t\tfor (int i = 0; i < limit; i++) {\n+\t\t\t\tif(listIterator.hasNext()) {\n+\t\t\t\t\tPair<Integer, String> data = listIterator.next();\n+\t\t\t\t\tint mobId = data.getLeft();\n+\t\t\t\t\tString mobName = data.getRight();\n+\t\t\t\t\toutput += mobName + \" drops the following items:\\r\\n\\r\\n\";\n+\t\t\t\t\tfor (MonsterDropEntry drop : MapleMonsterInformationProvider.getInstance().retrieveDrop(mobId)){\n+\t\t\t\t\t\ttry {\n+\t\t\t\t\t\t\tString name = MapleItemInformationProvider.getInstance().getName(drop.itemId);\n+\t\t\t\t\t\t\tif (name.equals(\"null\") || drop.chance == 0){\n+\t\t\t\t\t\t\t\tcontinue;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tfloat chance = 1000000 / drop.chance / player.getDropRate();\n+\t\t\t\t\t\t\toutput += \"- \" + name + \" (1/\" + (int) chance + \")\\r\\n\";\n+\t\t\t\t\t\t} catch (Exception ex){\n+                                                        ex.printStackTrace();\n+\t\t\t\t\t\t\tcontinue;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t\toutput += \"\\r\\n\";\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\tc.announce(MaplePacketCreator.getNPCTalk(9010000, (byte) 0, output, \"00 00\", (byte) 0));\n+\t\t\tbreak;\n+                    \n+\t\tcase \"whodrops\":\n+\t\t\tif (sub.length < 2) {\n+\t\t\t\tplayer.dropMessage(5, \"Please do @whodrops <item name>\");\n+                        break;\n+\t\t\t}\n+\t\t\tString searchString = joinStringFrom(sub, 1);\n+\t\t\toutput = \"\";\n+\t\t\tlistIterator = MapleItemInformationProvider.getInstance().getItemDataByName(searchString).iterator();\n+\t\t\tif(listIterator.hasNext()) {\n+\t\t\t\tint count = 1;\n+\t\t\t\twhile(listIterator.hasNext() && count <= 3) {\n+\t\t\t\t\tPair<Integer, String> data = listIterator.next();\n+\t\t\t\t\toutput += \"#b\" + data.getRight() + \"#k is dropped by:\\r\\n\";\n+\t\t\t\t\ttry {\n+                                                Connection con = DatabaseConnection.getConnection();\n+\t\t\t\t\t\tPreparedStatement ps = con.prepareStatement(\"SELECT dropperid FROM drop_data WHERE itemid = ? LIMIT 50\");\n+\t\t\t\t\t\tps.setInt(1, data.getLeft());\n+\t\t\t\t\t\tResultSet rs = ps.executeQuery();\n+\t\t\t\t\t\twhile(rs.next()) {\n+\t\t\t\t\t\t\tString resultName = MapleMonsterInformationProvider.getMobNameFromID(rs.getInt(\"dropperid\"));\n+\t\t\t\t\t\t\tif (resultName != null) {\n+\t\t\t\t\t\t\t\toutput += resultName + \", \";\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\trs.close();\n+\t\t\t\t\t\tps.close();\n+                                                con.close();\n+\t\t\t\t\t} catch (Exception e) {\n+\t\t\t\t\t\tplayer.dropMessage(6, \"There was a problem retrieving the required data. Please try again.\");\n+\t\t\t\t\t\te.printStackTrace();\n+\t\t\t\t\t\tbreak;\n+\t\t\t\t\t}\n+\t\t\t\t\toutput += \"\\r\\n\\r\\n\";\n+\t\t\t\t\tcount++;\n+\t\t\t\t}\n+\t\t\t} else {\n+\t\t\t\tplayer.dropMessage(5, \"The item you searched for doesn't exist.\");\n+                        break;\n+\t\t\t}\n+\t\t\tc.announce(MaplePacketCreator.getNPCTalk(9010000, (byte) 0, output, \"00 00\", (byte) 0));\n+\t\t\tbreak;\n+                    \n                 case \"buffme\":\n+                        if(!player.isGM()) {\n+                                player.dropMessage(5, \"You are already dead.\");\n+\t\t\t\tbreak;\n+                        }\n+                    \n                         //GM Skills : Haste(Super) - Holy Symbol - Bless - Hyper Body - Echo of Hero\n                         SkillFactory.getSkill(4101004).getEffect(SkillFactory.getSkill(4101004).getMaxLevel()).applyTo(player);\n                         SkillFactory.getSkill(2311003).getEffect(SkillFactory.getSkill(2311003).getMaxLevel()).applyTo(player);\n@@ -753,7 +799,20 @@ public static boolean executeHeavenMsCommandLv1(Channel cserv, Server srv, Maple\n                         }\n                         player.dropMessage(5, \"USE Recharged.\");\n                                 break;\n-\t\t\t\t\t\t\t\t\n+\t\t            \n+                default:\n+                        return false;\n+                }\n+                \n+                return true;\n+        }\n+        \n+        public static boolean executeHeavenMsCommandLv2(Channel cserv, Server srv, MapleClient c, String[] sub) { //JrGM\n+                MapleCharacter player = c.getPlayer();\n+                MapleCharacter victim;\n+                Skill skill;\n+            \n+                switch(sub[0]) {\n                 case \"whereami\":\n \t\t\tplayer.yellowMessage(\"Map ID: \" + player.getMap().getId());\n \t\t\tplayer.yellowMessage(\"Players on this map:\");\n@@ -777,21 +836,8 @@ public static boolean executeHeavenMsCommandLv1(Channel cserv, Server srv, Maple\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n-                                break;\n-                            \n-                default:\n-                        return false;\n-                }\n-                \n-                return true;\n-        }\n-        \n-        public static boolean executeHeavenMsCommandLv2(Channel cserv, Server srv, MapleClient c, String[] sub) { //JrGM\n-                MapleCharacter player = c.getPlayer();\n-                MapleCharacter victim;\n-                Skill skill;\n-            \n-                switch(sub[0]) {\n+                    break;\n+                    \n                 case \"hide\":\n                         SkillFactory.getSkill(9101004).getEffect(SkillFactory.getSkill(9101004).getMaxLevel()).applyTo(player);\n                     break;"}, {"sha": "5899106a36cee51c168ba0a22222706e5f62e390", "filename": "src/constants/GameConstants.java", "status": "modified", "additions": 42, "deletions": 19, "changes": 61, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/src/constants/GameConstants.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/src/constants/GameConstants.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/constants/GameConstants.java?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -62,26 +62,36 @@ public static int getPlayerBonusExpRate(int slot) {\n         330000, 340000, 350000, 360000, 370000, 380000, 390000, 400000, 410000, 420000, 430000, 440000, 450000, 460000, 470000, 480000, 490000, 500000, 510000, 520000,\n         530000, 550000, 570000, 590000, 610000, 630000, 650000, 670000, 690000, 710000, 730000, 750000, 770000, 790000, 810000, 830000, 850000, 870000, 890000, 910000};\n     \n-    public static int getJobMaxLevel(MapleJob job) {\n-        if(job.getId() % 1000 == 0) {   // beginner\n-            return 10;\n-            \n-        } else if(job.getId() % 100 == 0) {   // 1st job\n-            return 30;\n-            \n+    public static int getJobBranch(MapleJob job) {\n+        int jobid = job.getId();\n+        \n+        if(jobid % 1000 == 0) {\n+            return 0;\n+        } else if(jobid % 100 == 0) {\n+            return 1;\n         } else {\n-            int jobBranch = job.getId() % 10;\n-            \n-            switch(jobBranch) {\n-                case 0:\n-                    return 70;   // 2nd job\n-                    \n-                case 1:\n-                    return 120;   // 3rd job\n-                    \n-                default:\n-                    return (job.getId() / 1000 == 1) ? 120 : 200;   // 4th job: cygnus is 120, rest is 200\n-            }\n+            return 2 + (jobid % 10);\n+        }\n+    }\n+    \n+    public static int getJobMaxLevel(MapleJob job) {\n+        int jobBranch = getJobBranch(job);\n+        \n+        switch(jobBranch) {\n+            case 0:\n+                return 10;   // beginner\n+                \n+            case 1:\n+                return 30;   // 1st job\n+                \n+            case 2:\n+                return 70;   // 2nd job\n+                \n+            case 3:\n+                return 120;   // 3rd job\n+                \n+            default:\n+                return (job.getId() / 1000 == 1) ? 120 : 200;   // 4th job: cygnus is 120, rest is 200\n         }\n     }\n     \n@@ -225,4 +235,17 @@ public static int getMonsterHP(final int level) {\n         }\n         return mobHpVal[level];\n     }\n+    \n+    public static String ordinal(int i) {\n+        String[] sufixes = new String[] { \"th\", \"st\", \"nd\", \"rd\", \"th\", \"th\", \"th\", \"th\", \"th\", \"th\" };\n+        switch (i % 100) {\n+            case 11:\n+            case 12:\n+            case 13:\n+                return i + \"th\";\n+                \n+            default:\n+                return i + sufixes[i % 10];\n+        }\n+    }\n }"}, {"sha": "8e466a79c50dbc13aaceac9c75b64f44de39aa10", "filename": "src/constants/ServerConstants.java", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/src/constants/ServerConstants.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/src/constants/ServerConstants.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/constants/ServerConstants.java?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -73,6 +73,10 @@\n     public static final boolean USE_QUEST_RATE = false;             //Exp/Meso gained by quests uses fixed server exp/meso rate times quest rate as multiplier, instead of player rates.\n     public static final boolean USE_MULTIPLE_SAME_EQUIP_DROP = true;//Enables multiple drops by mobs of the same equipment, number of possible drops based on the quantities provided at the drop data.\n     \n+    \n+    //Announcement Configuration\n+    public static final boolean USE_ANNOUNCE_CHANGEJOB = true;     //Automatic message sent to acquantainces when changing jobs.\n+    \n     //Server Rates And Experience\n     public static final int EXP_RATE = 10;\n     public static final int MESO_RATE = 10;\n@@ -158,7 +162,7 @@\n     public static final boolean USE_DEADLY_DOJO = false;        //Should bosses really use 1HP,1MP attacks in dojo?\n     public static final int DOJO_ENERGY_ATK = 100;              //Dojo energy gain when deal attack\n     public static final int DOJO_ENERGY_DMG =  20;              //Dojo energy gain when recv attack\n-\t\n+    \n     //Event End Timestamp\n     public static final long EVENT_END_TIMESTAMP = 1428897600000L;\n \t"}, {"sha": "8583404248b91e1d8b3c575f1a2353e7da79d729", "filename": "src/net/server/channel/handlers/GeneralChatHandler.java", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/src/net/server/channel/handlers/GeneralChatHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/src/net/server/channel/handlers/GeneralChatHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/GeneralChatHandler.java?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -32,6 +32,14 @@\n import java.util.Calendar;\n \n public final class GeneralChatHandler extends net.AbstractMaplePacketHandler {\n+        private static boolean isCommandIssue(char heading, MapleCharacter chr) {\n+                if(chr.gmLevel() > 1 && heading == '!') {\n+                        return true;\n+                } else {\n+                        return heading == '@';\n+                }\n+        }\n+    \n \t@Override\n         public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {\n                 String s = slea.readMapleAsciiString();\n@@ -47,7 +55,7 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                         return;\n                 }\n                 char heading = s.charAt(0);\n-                if (heading == '!' || heading == '@') {\n+                if (isCommandIssue(heading, chr)) {\n                         String[] sp = s.split(\" \");\n                         sp[0] = sp[0].toLowerCase().substring(1);\n "}, {"sha": "f57490edbaf2504b4111e3ea1808a09377381df4", "filename": "src/net/server/channel/handlers/QuestActionHandler.java", "status": "modified", "additions": 12, "deletions": 6, "changes": 18, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/src/net/server/channel/handlers/QuestActionHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/src/net/server/channel/handlers/QuestActionHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/QuestActionHandler.java?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -44,15 +44,21 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n             if (slea.available() >= 4) {\n                 slea.readInt();\n             }\n-            quest.start(player, npc);\n+            \n+            if(quest.canStart(player, npc)) {\n+                quest.start(player, npc);\n+            }\n         } else if (action == 2) { // Complete Quest\n             int npc = slea.readInt();\n             slea.readInt();\n-            if (slea.available() >= 2) {\n-                int selection = slea.readShort();\n-                quest.complete(player, npc, selection);\n-            } else {\n-                quest.complete(player, npc);\n+            \n+            if(quest.canComplete(player, npc)) {\n+                if (slea.available() >= 2) {\n+                    int selection = slea.readShort();\n+                    quest.complete(player, npc, selection);\n+                } else {\n+                    quest.complete(player, npc);\n+                }\n             }\n         } else if (action == 3) {// forfeit quest\n             quest.forfeit(player);"}, {"sha": "def406db73df3c4a3834dcaf7445466497ea5b68", "filename": "src/scripting/event/EventManager.java", "status": "modified", "additions": 2, "deletions": 14, "changes": 16, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/src/scripting/event/EventManager.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/src/scripting/event/EventManager.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/scripting/event/EventManager.java?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -34,6 +34,7 @@\n import javax.script.ScriptException;\n \n import constants.ServerConstants;\n+import constants.GameConstants;\n import client.MapleCharacter;\n import net.server.Server;\n import net.server.world.World;\n@@ -499,19 +500,6 @@ public MapleMonster getMonster(int mid) {\n         return(MapleLifeFactory.getMonster(mid));\n     }\n     \n-    private static String ordinal(int i) {\n-        String[] sufixes = new String[] { \"th\", \"st\", \"nd\", \"rd\", \"th\", \"th\", \"th\", \"th\", \"th\", \"th\" };\n-        switch (i % 100) {\n-            case 11:\n-            case 12:\n-            case 13:\n-                return i + \"th\";\n-                \n-            default:\n-                return i + sufixes[i % 10];\n-        }\n-    }\n-    \n     private void exportReadyGuild(Integer guildId) {\n         MapleGuild mg = server.getGuild(guildId);\n         String callout = \"[Guild Quest] Your guild has been registered to attend to the Sharenian Guild Quest at channel \" + this.getChannelServer().getId() \n@@ -524,7 +512,7 @@ private void exportReadyGuild(Integer guildId) {\n     private void exportMovedQueueToGuild(Integer guildId, int place) {\n         MapleGuild mg = server.getGuild(guildId);\n         String callout = \"[Guild Quest] Your guild has been registered to attend to the Sharenian Guild Quest at channel \" + this.getChannelServer().getId() \n-                       + \" and is currently on the \" + ordinal(place) + \" place on the waiting queue.\";\n+                       + \" and is currently on the \" + GameConstants.ordinal(place) + \" place on the waiting queue.\";\n         \n         mg.dropMessage(6, callout);\n     }"}, {"sha": "5f647213c5496880e9fc7cb3e238aecdd785720f", "filename": "src/scripting/quest/QuestScriptManager.java", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/src/scripting/quest/QuestScriptManager.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/src/scripting/quest/QuestScriptManager.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/scripting/quest/QuestScriptManager.java?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -61,7 +61,7 @@ public void start(MapleClient c, short questid, int npc) {\n \t\t\t\tqms.put(c, qm);\n \t\t\t\tInvocable iv = getInvocable(\"quest/\" + questid + \".js\", c);\n \t\t\t\tif (iv == null) {\n-\t\t\t\t\tFilePrinter.printError(FilePrinter.QUEST_UNCODED, \"Quest \" + questid + \" is uncoded.\\r\\n\");\n+\t\t\t\t\tFilePrinter.printError(FilePrinter.QUEST_UNCODED, \"START Quest \" + questid + \" is uncoded.\\r\\n\");\n \t\t\t\t}\n \t\t\t\tif (iv == null || QuestScriptManager.getInstance() == null) {\n \t\t\t\t\tqm.dispose();\n@@ -112,6 +112,7 @@ public void end(MapleClient c, short questid, int npc) {\n \t\t\t\tqms.put(c, qm);\n \t\t\t\tInvocable iv = getInvocable(\"quest/\" + questid + \".js\", c);\n \t\t\t\tif (iv == null) {\n+                                        FilePrinter.printError(FilePrinter.QUEST_UNCODED, \"END Quest \" + questid + \" is uncoded.\\r\\n\");\n \t\t\t\t\tqm.dispose();\n \t\t\t\t\treturn;\n \t\t\t\t}"}, {"sha": "15d67082eb84f63fd88357fb0b40337855795226", "filename": "src/server/life/MapleMonster.java", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/src/server/life/MapleMonster.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/src/server/life/MapleMonster.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/life/MapleMonster.java?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -535,8 +535,7 @@ public void run() {\n                     }\n                 }, getAnimationTime(\"die1\"));\n             }\n-        }\n-        else {  // is this even necessary?\n+        } else {  // is this even necessary?\n             System.out.println(\"[CRITICAL LOSS] toSpawn is null for \" + this.getName());\n         }\n         "}, {"sha": "a34b8b10a778d594be9a721821d54a7c2ddc1ac7", "filename": "tools/MapleCashDropFetcher/build.xml", "status": "added", "additions": 73, "deletions": 0, "changes": 73, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/tools/MapleCashDropFetcher/build.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/tools/MapleCashDropFetcher/build.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/tools/MapleCashDropFetcher/build.xml?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -0,0 +1,73 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!-- You may freely edit this file. See commented blocks below for -->\n+<!-- some examples of how to customize the build. -->\n+<!-- (If you delete it and reopen the project it will be recreated.) -->\n+<!-- By default, only the Clean and Build commands use this build script. -->\n+<!-- Commands such as Run, Debug, and Test only use this build script if -->\n+<!-- the Compile on Save feature is turned off for the project. -->\n+<!-- You can turn off the Compile on Save (or Deploy on Save) setting -->\n+<!-- in the project's Project Properties dialog box.-->\n+<project name=\"MapleCashDropFetcher\" default=\"default\" basedir=\".\">\n+    <description>Builds, tests, and runs the project MapleCashDropFetcher.</description>\n+    <import file=\"nbproject/build-impl.xml\"/>\n+    <!--\n+\n+    There exist several targets which are by default empty and which can be \n+    used for execution of your tasks. These targets are usually executed \n+    before and after some main targets. They are: \n+\n+      -pre-init:                 called before initialization of project properties\n+      -post-init:                called after initialization of project properties\n+      -pre-compile:              called before javac compilation\n+      -post-compile:             called after javac compilation\n+      -pre-compile-single:       called before javac compilation of single file\n+      -post-compile-single:      called after javac compilation of single file\n+      -pre-compile-test:         called before javac compilation of JUnit tests\n+      -post-compile-test:        called after javac compilation of JUnit tests\n+      -pre-compile-test-single:  called before javac compilation of single JUnit test\n+      -post-compile-test-single: called after javac compilation of single JUunit test\n+      -pre-jar:                  called before JAR building\n+      -post-jar:                 called after JAR building\n+      -post-clean:               called after cleaning build products\n+\n+    (Targets beginning with '-' are not intended to be called on their own.)\n+\n+    Example of inserting an obfuscator after compilation could look like this:\n+\n+        <target name=\"-post-compile\">\n+            <obfuscate>\n+                <fileset dir=\"${build.classes.dir}\"/>\n+            </obfuscate>\n+        </target>\n+\n+    For list of available properties check the imported \n+    nbproject/build-impl.xml file. \n+\n+\n+    Another way to customize the build is by overriding existing main targets.\n+    The targets of interest are: \n+\n+      -init-macrodef-javac:     defines macro for javac compilation\n+      -init-macrodef-junit:     defines macro for junit execution\n+      -init-macrodef-debug:     defines macro for class debugging\n+      -init-macrodef-java:      defines macro for class execution\n+      -do-jar:                  JAR building\n+      run:                      execution of project \n+      -javadoc-build:           Javadoc generation\n+      test-report:              JUnit report generation\n+\n+    An example of overriding the target for project execution could look like this:\n+\n+        <target name=\"run\" depends=\"MapleCashDropFetcher-impl.jar\">\n+            <exec dir=\"bin\" executable=\"launcher.exe\">\n+                <arg file=\"${dist.jar}\"/>\n+            </exec>\n+        </target>\n+\n+    Notice that the overridden target depends on the jar target and not only on \n+    the compile target as the regular run target does. Again, for a list of available \n+    properties which you can use, check the target you are overriding in the\n+    nbproject/build-impl.xml file. \n+\n+    -->\n+</project>"}, {"sha": "b60c81772272183b181e280b38945b326ec0eb80", "filename": "tools/MapleCashDropFetcher/lib/CashDropReport.txt", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/tools/MapleCashDropFetcher/lib/CashDropReport.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/tools/MapleCashDropFetcher/lib/CashDropReport.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/tools/MapleCashDropFetcher/lib/CashDropReport.txt?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -0,0 +1,11 @@\n+ # Report File autogenerated from the MapleCashDropFetcher feature by Ronan Lana.\n+ # Generated data takes into account several data info from the underlying DB and the server-side WZ.xmls.\n+\n+NX DROPS ON drop_data\n+5240005 : 2100100\n+5490000 : 9410066\n+5490001 : 9410066\n+\n+\n+\n+"}, {"sha": "328e8e5bc3b7f1f7bad2bc0751a933e00c801983", "filename": "tools/MapleCashDropFetcher/manifest.mf", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/tools/MapleCashDropFetcher/manifest.mf", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/tools/MapleCashDropFetcher/manifest.mf", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/tools/MapleCashDropFetcher/manifest.mf?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -0,0 +1,3 @@\n+Manifest-Version: 1.0\n+X-COMMENT: Main-Class will be added automatically by build\n+"}, {"sha": "a6ae1f89644ec32190cd5f1433234a28d5d6fdce", "filename": "tools/MapleCashDropFetcher/nbproject/build-impl.xml", "status": "added", "additions": 1448, "deletions": 0, "changes": 1448, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/tools/MapleCashDropFetcher/nbproject/build-impl.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/tools/MapleCashDropFetcher/nbproject/build-impl.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/tools/MapleCashDropFetcher/nbproject/build-impl.xml?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -0,0 +1,1448 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+*** GENERATED FROM project.xml - DO NOT EDIT  ***\n+***         EDIT ../build.xml INSTEAD         ***\n+\n+For the purpose of easier reading the script\n+is divided into following sections:\n+\n+  - initialization\n+  - compilation\n+  - jar\n+  - execution\n+  - debugging\n+  - javadoc\n+  - test compilation\n+  - test execution\n+  - test debugging\n+  - applet\n+  - cleanup\n+\n+        -->\n+<project xmlns:j2seproject1=\"http://www.netbeans.org/ns/j2se-project/1\" xmlns:j2seproject3=\"http://www.netbeans.org/ns/j2se-project/3\" xmlns:jaxrpc=\"http://www.netbeans.org/ns/j2se-project/jax-rpc\" basedir=\"..\" default=\"default\" name=\"MapleCashDropFetcher-impl\">\n+    <fail message=\"Please build using Ant 1.8.0 or higher.\">\n+        <condition>\n+            <not>\n+                <antversion atleast=\"1.8.0\"/>\n+            </not>\n+        </condition>\n+    </fail>\n+    <target depends=\"test,jar,javadoc\" description=\"Build and test whole project.\" name=\"default\"/>\n+    <!-- \n+                ======================\n+                INITIALIZATION SECTION \n+                ======================\n+            -->\n+    <target name=\"-pre-init\">\n+        <!-- Empty placeholder for easier customization. -->\n+        <!-- You can override this target in the ../build.xml file. -->\n+    </target>\n+    <target depends=\"-pre-init\" name=\"-init-private\">\n+        <property file=\"nbproject/private/config.properties\"/>\n+        <property file=\"nbproject/private/configs/${config}.properties\"/>\n+        <property file=\"nbproject/private/private.properties\"/>\n+    </target>\n+    <target depends=\"-pre-init,-init-private\" name=\"-init-user\">\n+        <property file=\"${user.properties.file}\"/>\n+        <!-- The two properties below are usually overridden -->\n+        <!-- by the active platform. Just a fallback. -->\n+        <property name=\"default.javac.source\" value=\"1.4\"/>\n+        <property name=\"default.javac.target\" value=\"1.4\"/>\n+    </target>\n+    <target depends=\"-pre-init,-init-private,-init-user\" name=\"-init-project\">\n+        <property file=\"nbproject/configs/${config}.properties\"/>\n+        <property file=\"nbproject/project.properties\"/>\n+    </target>\n+    <target depends=\"-pre-init,-init-private,-init-user,-init-project,-init-macrodef-property\" name=\"-do-init\">\n+        <j2seproject1:property name=\"platform.home\" value=\"platforms.${platform.active}.home\"/>\n+        <j2seproject1:property name=\"platform.bootcp\" value=\"platforms.${platform.active}.bootclasspath\"/>\n+        <j2seproject1:property name=\"platform.compiler\" value=\"platforms.${platform.active}.compile\"/>\n+        <j2seproject1:property name=\"platform.javac.tmp\" value=\"platforms.${platform.active}.javac\"/>\n+        <condition property=\"platform.javac\" value=\"${platform.home}/bin/javac\">\n+            <equals arg1=\"${platform.javac.tmp}\" arg2=\"$${platforms.${platform.active}.javac}\"/>\n+        </condition>\n+        <property name=\"platform.javac\" value=\"${platform.javac.tmp}\"/>\n+        <j2seproject1:property name=\"platform.java.tmp\" value=\"platforms.${platform.active}.java\"/>\n+        <condition property=\"platform.java\" value=\"${platform.home}/bin/java\">\n+            <equals arg1=\"${platform.java.tmp}\" arg2=\"$${platforms.${platform.active}.java}\"/>\n+        </condition>\n+        <property name=\"platform.java\" value=\"${platform.java.tmp}\"/>\n+        <j2seproject1:property name=\"platform.javadoc.tmp\" value=\"platforms.${platform.active}.javadoc\"/>\n+        <condition property=\"platform.javadoc\" value=\"${platform.home}/bin/javadoc\">\n+            <equals arg1=\"${platform.javadoc.tmp}\" arg2=\"$${platforms.${platform.active}.javadoc}\"/>\n+        </condition>\n+        <property name=\"platform.javadoc\" value=\"${platform.javadoc.tmp}\"/>\n+        <condition property=\"platform.invalid\" value=\"true\">\n+            <or>\n+                <contains string=\"${platform.javac}\" substring=\"$${platforms.\"/>\n+                <contains string=\"${platform.java}\" substring=\"$${platforms.\"/>\n+                <contains string=\"${platform.javadoc}\" substring=\"$${platforms.\"/>\n+            </or>\n+        </condition>\n+        <fail unless=\"platform.home\">Must set platform.home</fail>\n+        <fail unless=\"platform.bootcp\">Must set platform.bootcp</fail>\n+        <fail unless=\"platform.java\">Must set platform.java</fail>\n+        <fail unless=\"platform.javac\">Must set platform.javac</fail>\n+        <fail if=\"platform.invalid\">\n+ The J2SE Platform is not correctly set up.\n+ Your active platform is: ${platform.active}, but the corresponding property \"platforms.${platform.active}.home\" is not found in the project's properties files. \n+ Either open the project in the IDE and setup the Platform with the same name or add it manually.\n+ For example like this:\n+     ant -Duser.properties.file=&lt;path_to_property_file&gt; jar (where you put the property \"platforms.${platform.active}.home\" in a .properties file)\n+  or ant -Dplatforms.${platform.active}.home=&lt;path_to_JDK_home&gt; jar (where no properties file is used) \n+  </fail>\n+        <available file=\"${manifest.file}\" property=\"manifest.available\"/>\n+        <condition property=\"splashscreen.available\">\n+            <and>\n+                <not>\n+                    <equals arg1=\"${application.splash}\" arg2=\"\" trim=\"true\"/>\n+                </not>\n+                <available file=\"${application.splash}\"/>\n+            </and>\n+        </condition>\n+        <condition property=\"main.class.available\">\n+            <and>\n+                <isset property=\"main.class\"/>\n+                <not>\n+                    <equals arg1=\"${main.class}\" arg2=\"\" trim=\"true\"/>\n+                </not>\n+            </and>\n+        </condition>\n+        <condition property=\"profile.available\">\n+            <and>\n+                <isset property=\"javac.profile\"/>\n+                <length length=\"0\" string=\"${javac.profile}\" when=\"greater\"/>\n+                <matches pattern=\"1\\.[89](\\..*)?\" string=\"${javac.source}\"/>\n+            </and>\n+        </condition>\n+        <condition property=\"do.archive\">\n+            <or>\n+                <not>\n+                    <istrue value=\"${jar.archive.disabled}\"/>\n+                </not>\n+                <istrue value=\"${not.archive.disabled}\"/>\n+            </or>\n+        </condition>\n+        <condition property=\"do.mkdist\">\n+            <and>\n+                <isset property=\"do.archive\"/>\n+                <isset property=\"libs.CopyLibs.classpath\"/>\n+                <not>\n+                    <istrue value=\"${mkdist.disabled}\"/>\n+                </not>\n+            </and>\n+        </condition>\n+        <condition property=\"do.archive+manifest.available\">\n+            <and>\n+                <isset property=\"manifest.available\"/>\n+                <istrue value=\"${do.archive}\"/>\n+            </and>\n+        </condition>\n+        <condition property=\"do.archive+main.class.available\">\n+            <and>\n+                <isset property=\"main.class.available\"/>\n+                <istrue value=\"${do.archive}\"/>\n+            </and>\n+        </condition>\n+        <condition property=\"do.archive+splashscreen.available\">\n+            <and>\n+                <isset property=\"splashscreen.available\"/>\n+                <istrue value=\"${do.archive}\"/>\n+            </and>\n+        </condition>\n+        <condition property=\"do.archive+profile.available\">\n+            <and>\n+                <isset property=\"profile.available\"/>\n+                <istrue value=\"${do.archive}\"/>\n+            </and>\n+        </condition>\n+        <condition property=\"have.tests\">\n+            <or>\n+                <available file=\"${test.src.dir}\"/>\n+            </or>\n+        </condition>\n+        <condition property=\"have.sources\">\n+            <or>\n+                <available file=\"${src.dir}\"/>\n+            </or>\n+        </condition>\n+        <condition property=\"netbeans.home+have.tests\">\n+            <and>\n+                <isset property=\"netbeans.home\"/>\n+                <isset property=\"have.tests\"/>\n+            </and>\n+        </condition>\n+        <condition property=\"no.javadoc.preview\">\n+            <and>\n+                <isset property=\"javadoc.preview\"/>\n+                <isfalse value=\"${javadoc.preview}\"/>\n+            </and>\n+        </condition>\n+        <property name=\"run.jvmargs\" value=\"\"/>\n+        <property name=\"run.jvmargs.ide\" value=\"\"/>\n+        <property name=\"javac.compilerargs\" value=\"\"/>\n+        <property name=\"work.dir\" value=\"${basedir}\"/>\n+        <condition property=\"no.deps\">\n+            <and>\n+                <istrue value=\"${no.dependencies}\"/>\n+            </and>\n+        </condition>\n+        <property name=\"javac.debug\" value=\"true\"/>\n+        <property name=\"javadoc.preview\" value=\"true\"/>\n+        <property name=\"application.args\" value=\"\"/>\n+        <property name=\"source.encoding\" value=\"${file.encoding}\"/>\n+        <property name=\"runtime.encoding\" value=\"${source.encoding}\"/>\n+        <condition property=\"javadoc.encoding.used\" value=\"${javadoc.encoding}\">\n+            <and>\n+                <isset property=\"javadoc.encoding\"/>\n+                <not>\n+                    <equals arg1=\"${javadoc.encoding}\" arg2=\"\"/>\n+                </not>\n+            </and>\n+        </condition>\n+        <property name=\"javadoc.encoding.used\" value=\"${source.encoding}\"/>\n+        <property name=\"includes\" value=\"**\"/>\n+        <property name=\"excludes\" value=\"\"/>\n+        <property name=\"do.depend\" value=\"false\"/>\n+        <condition property=\"do.depend.true\">\n+            <istrue value=\"${do.depend}\"/>\n+        </condition>\n+        <path id=\"endorsed.classpath.path\" path=\"${endorsed.classpath}\"/>\n+        <condition else=\"\" property=\"endorsed.classpath.cmd.line.arg\" value=\"-Xbootclasspath/p:'${toString:endorsed.classpath.path}'\">\n+            <and>\n+                <isset property=\"endorsed.classpath\"/>\n+                <not>\n+                    <equals arg1=\"${endorsed.classpath}\" arg2=\"\" trim=\"true\"/>\n+                </not>\n+            </and>\n+        </condition>\n+        <condition else=\"\" property=\"javac.profile.cmd.line.arg\" value=\"-profile ${javac.profile}\">\n+            <isset property=\"profile.available\"/>\n+        </condition>\n+        <property name=\"jar.index\" value=\"false\"/>\n+        <property name=\"jar.index.metainf\" value=\"${jar.index}\"/>\n+        <property name=\"copylibs.rebase\" value=\"true\"/>\n+        <available file=\"${meta.inf.dir}/persistence.xml\" property=\"has.persistence.xml\"/>\n+        <condition property=\"junit.available\">\n+            <or>\n+                <available classname=\"org.junit.Test\" classpath=\"${run.test.classpath}\"/>\n+                <available classname=\"junit.framework.Test\" classpath=\"${run.test.classpath}\"/>\n+            </or>\n+        </condition>\n+        <condition property=\"testng.available\">\n+            <available classname=\"org.testng.annotations.Test\" classpath=\"${run.test.classpath}\"/>\n+        </condition>\n+        <condition property=\"junit+testng.available\">\n+            <and>\n+                <istrue value=\"${junit.available}\"/>\n+                <istrue value=\"${testng.available}\"/>\n+            </and>\n+        </condition>\n+        <condition else=\"testng\" property=\"testng.mode\" value=\"mixed\">\n+            <istrue value=\"${junit+testng.available}\"/>\n+        </condition>\n+        <condition else=\"\" property=\"testng.debug.mode\" value=\"-mixed\">\n+            <istrue value=\"${junit+testng.available}\"/>\n+        </condition>\n+    </target>\n+    <target name=\"-post-init\">\n+        <!-- Empty placeholder for easier customization. -->\n+        <!-- You can override this target in the ../build.xml file. -->\n+    </target>\n+    <target depends=\"-pre-init,-init-private,-init-user,-init-project,-do-init\" name=\"-init-check\">\n+        <fail unless=\"src.dir\">Must set src.dir</fail>\n+        <fail unless=\"test.src.dir\">Must set test.src.dir</fail>\n+        <fail unless=\"build.dir\">Must set build.dir</fail>\n+        <fail unless=\"dist.dir\">Must set dist.dir</fail>\n+        <fail unless=\"build.classes.dir\">Must set build.classes.dir</fail>\n+        <fail unless=\"dist.javadoc.dir\">Must set dist.javadoc.dir</fail>\n+        <fail unless=\"build.test.classes.dir\">Must set build.test.classes.dir</fail>\n+        <fail unless=\"build.test.results.dir\">Must set build.test.results.dir</fail>\n+        <fail unless=\"build.classes.excludes\">Must set build.classes.excludes</fail>\n+        <fail unless=\"dist.jar\">Must set dist.jar</fail>\n+    </target>\n+    <target name=\"-init-macrodef-property\">\n+        <macrodef name=\"property\" uri=\"http://www.netbeans.org/ns/j2se-project/1\">\n+            <attribute name=\"name\"/>\n+            <attribute name=\"value\"/>\n+            <sequential>\n+                <property name=\"@{name}\" value=\"${@{value}}\"/>\n+            </sequential>\n+        </macrodef>\n+    </target>\n+    <target depends=\"-init-ap-cmdline-properties\" if=\"ap.supported.internal\" name=\"-init-macrodef-javac-with-processors\">\n+        <macrodef name=\"javac\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\n+            <attribute default=\"${src.dir}\" name=\"srcdir\"/>\n+            <attribute default=\"${build.classes.dir}\" name=\"destdir\"/>\n+            <attribute default=\"${javac.classpath}\" name=\"classpath\"/>\n+            <attribute default=\"${javac.processorpath}\" name=\"processorpath\"/>\n+            <attribute default=\"${build.generated.sources.dir}/ap-source-output\" name=\"apgeneratedsrcdir\"/>\n+            <attribute default=\"${includes}\" name=\"includes\"/>\n+            <attribute default=\"${excludes}\" name=\"excludes\"/>\n+            <attribute default=\"${javac.debug}\" name=\"debug\"/>\n+            <attribute default=\"${empty.dir}\" name=\"sourcepath\"/>\n+            <attribute default=\"${empty.dir}\" name=\"gensrcdir\"/>\n+            <element name=\"customize\" optional=\"true\"/>\n+            <sequential>\n+                <property location=\"${build.dir}/empty\" name=\"empty.dir\"/>\n+                <mkdir dir=\"${empty.dir}\"/>\n+                <mkdir dir=\"@{apgeneratedsrcdir}\"/>\n+                <javac debug=\"@{debug}\" deprecation=\"${javac.deprecation}\" destdir=\"@{destdir}\" encoding=\"${source.encoding}\" excludes=\"@{excludes}\" executable=\"${platform.javac}\" fork=\"yes\" includeantruntime=\"false\" includes=\"@{includes}\" source=\"${javac.source}\" sourcepath=\"@{sourcepath}\" srcdir=\"@{srcdir}\" target=\"${javac.target}\" tempdir=\"${java.io.tmpdir}\">\n+                    <src>\n+                        <dirset dir=\"@{gensrcdir}\" erroronmissingdir=\"false\">\n+                            <include name=\"*\"/>\n+                        </dirset>\n+                    </src>\n+                    <classpath>\n+                        <path path=\"@{classpath}\"/>\n+                    </classpath>\n+                    <compilerarg line=\"${endorsed.classpath.cmd.line.arg}\"/>\n+                    <compilerarg line=\"${javac.profile.cmd.line.arg}\"/>\n+                    <compilerarg line=\"${javac.compilerargs}\"/>\n+                    <compilerarg value=\"-processorpath\"/>\n+                    <compilerarg path=\"@{processorpath}:${empty.dir}\"/>\n+                    <compilerarg line=\"${ap.processors.internal}\"/>\n+                    <compilerarg line=\"${annotation.processing.processor.options}\"/>\n+                    <compilerarg value=\"-s\"/>\n+                    <compilerarg path=\"@{apgeneratedsrcdir}\"/>\n+                    <compilerarg line=\"${ap.proc.none.internal}\"/>\n+                    <customize/>\n+                </javac>\n+            </sequential>\n+        </macrodef>\n+    </target>\n+    <target depends=\"-init-ap-cmdline-properties\" name=\"-init-macrodef-javac-without-processors\" unless=\"ap.supported.internal\">\n+        <macrodef name=\"javac\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\n+            <attribute default=\"${src.dir}\" name=\"srcdir\"/>\n+            <attribute default=\"${build.classes.dir}\" name=\"destdir\"/>\n+            <attribute default=\"${javac.classpath}\" name=\"classpath\"/>\n+            <attribute default=\"${javac.processorpath}\" name=\"processorpath\"/>\n+            <attribute default=\"${build.generated.sources.dir}/ap-source-output\" name=\"apgeneratedsrcdir\"/>\n+            <attribute default=\"${includes}\" name=\"includes\"/>\n+            <attribute default=\"${excludes}\" name=\"excludes\"/>\n+            <attribute default=\"${javac.debug}\" name=\"debug\"/>\n+            <attribute default=\"${empty.dir}\" name=\"sourcepath\"/>\n+            <attribute default=\"${empty.dir}\" name=\"gensrcdir\"/>\n+            <element name=\"customize\" optional=\"true\"/>\n+            <sequential>\n+                <property location=\"${build.dir}/empty\" name=\"empty.dir\"/>\n+                <mkdir dir=\"${empty.dir}\"/>\n+                <javac debug=\"@{debug}\" deprecation=\"${javac.deprecation}\" destdir=\"@{destdir}\" encoding=\"${source.encoding}\" excludes=\"@{excludes}\" executable=\"${platform.javac}\" fork=\"yes\" includeantruntime=\"false\" includes=\"@{includes}\" source=\"${javac.source}\" sourcepath=\"@{sourcepath}\" srcdir=\"@{srcdir}\" target=\"${javac.target}\" tempdir=\"${java.io.tmpdir}\">\n+                    <src>\n+                        <dirset dir=\"@{gensrcdir}\" erroronmissingdir=\"false\">\n+                            <include name=\"*\"/>\n+                        </dirset>\n+                    </src>\n+                    <classpath>\n+                        <path path=\"@{classpath}\"/>\n+                    </classpath>\n+                    <compilerarg line=\"${endorsed.classpath.cmd.line.arg}\"/>\n+                    <compilerarg line=\"${javac.profile.cmd.line.arg}\"/>\n+                    <compilerarg line=\"${javac.compilerargs}\"/>\n+                    <customize/>\n+                </javac>\n+            </sequential>\n+        </macrodef>\n+    </target>\n+    <target depends=\"-init-macrodef-javac-with-processors,-init-macrodef-javac-without-processors\" name=\"-init-macrodef-javac\">\n+        <macrodef name=\"depend\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\n+            <attribute default=\"${src.dir}\" name=\"srcdir\"/>\n+            <attribute default=\"${build.classes.dir}\" name=\"destdir\"/>\n+            <attribute default=\"${javac.classpath}\" name=\"classpath\"/>\n+            <sequential>\n+                <depend cache=\"${build.dir}/depcache\" destdir=\"@{destdir}\" excludes=\"${excludes}\" includes=\"${includes}\" srcdir=\"@{srcdir}\">\n+                    <classpath>\n+                        <path path=\"@{classpath}\"/>\n+                    </classpath>\n+                </depend>\n+            </sequential>\n+        </macrodef>\n+        <macrodef name=\"force-recompile\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\n+            <attribute default=\"${build.classes.dir}\" name=\"destdir\"/>\n+            <sequential>\n+                <fail unless=\"javac.includes\">Must set javac.includes</fail>\n+                <pathconvert pathsep=\"${line.separator}\" property=\"javac.includes.binary\">\n+                    <path>\n+                        <filelist dir=\"@{destdir}\" files=\"${javac.includes}\"/>\n+                    </path>\n+                    <globmapper from=\"*.java\" to=\"*.class\"/>\n+                </pathconvert>\n+                <tempfile deleteonexit=\"true\" property=\"javac.includesfile.binary\"/>\n+                <echo file=\"${javac.includesfile.binary}\" message=\"${javac.includes.binary}\"/>\n+                <delete>\n+                    <files includesfile=\"${javac.includesfile.binary}\"/>\n+                </delete>\n+                <delete>\n+                    <fileset file=\"${javac.includesfile.binary}\"/>\n+                </delete>\n+            </sequential>\n+        </macrodef>\n+    </target>\n+    <target if=\"${junit.available}\" name=\"-init-macrodef-junit-init\">\n+        <condition else=\"false\" property=\"nb.junit.batch\" value=\"true\">\n+            <and>\n+                <istrue value=\"${junit.available}\"/>\n+                <not>\n+                    <isset property=\"test.method\"/>\n+                </not>\n+            </and>\n+        </condition>\n+        <condition else=\"false\" property=\"nb.junit.single\" value=\"true\">\n+            <and>\n+                <istrue value=\"${junit.available}\"/>\n+                <isset property=\"test.method\"/>\n+            </and>\n+        </condition>\n+    </target>\n+    <target name=\"-init-test-properties\">\n+        <property name=\"test.binaryincludes\" value=\"&lt;nothing&gt;\"/>\n+        <property name=\"test.binarytestincludes\" value=\"\"/>\n+        <property name=\"test.binaryexcludes\" value=\"\"/>\n+    </target>\n+    <target if=\"${nb.junit.single}\" name=\"-init-macrodef-junit-single\" unless=\"${nb.junit.batch}\">\n+        <macrodef name=\"junit\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\n+            <attribute default=\"${includes}\" name=\"includes\"/>\n+            <attribute default=\"${excludes}\" name=\"excludes\"/>\n+            <attribute default=\"**\" name=\"testincludes\"/>\n+            <attribute default=\"\" name=\"testmethods\"/>\n+            <element name=\"customize\" optional=\"true\"/>\n+            <sequential>\n+                <property name=\"junit.forkmode\" value=\"perTest\"/>\n+                <junit dir=\"${work.dir}\" errorproperty=\"tests.failed\" failureproperty=\"tests.failed\" fork=\"true\" forkmode=\"${junit.forkmode}\" jvm=\"${platform.java}\" showoutput=\"true\" tempdir=\"${build.dir}\">\n+                    <test methods=\"@{testmethods}\" name=\"@{testincludes}\" todir=\"${build.test.results.dir}\"/>\n+                    <syspropertyset>\n+                        <propertyref prefix=\"test-sys-prop.\"/>\n+                        <mapper from=\"test-sys-prop.*\" to=\"*\" type=\"glob\"/>\n+                    </syspropertyset>\n+                    <formatter type=\"brief\" usefile=\"false\"/>\n+                    <formatter type=\"xml\"/>\n+                    <jvmarg value=\"-ea\"/>\n+                    <customize/>\n+                </junit>\n+            </sequential>\n+        </macrodef>\n+    </target>\n+    <target depends=\"-init-test-properties\" if=\"${nb.junit.batch}\" name=\"-init-macrodef-junit-batch\" unless=\"${nb.junit.single}\">\n+        <macrodef name=\"junit\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\n+            <attribute default=\"${includes}\" name=\"includes\"/>\n+            <attribute default=\"${excludes}\" name=\"excludes\"/>\n+            <attribute default=\"**\" name=\"testincludes\"/>\n+            <attribute default=\"\" name=\"testmethods\"/>\n+            <element name=\"customize\" optional=\"true\"/>\n+            <sequential>\n+                <property name=\"junit.forkmode\" value=\"perTest\"/>\n+                <junit dir=\"${work.dir}\" errorproperty=\"tests.failed\" failureproperty=\"tests.failed\" fork=\"true\" forkmode=\"${junit.forkmode}\" jvm=\"${platform.java}\" showoutput=\"true\" tempdir=\"${build.dir}\">\n+                    <batchtest todir=\"${build.test.results.dir}\">\n+                        <fileset dir=\"${test.src.dir}\" excludes=\"@{excludes},${excludes}\" includes=\"@{includes}\">\n+                            <filename name=\"@{testincludes}\"/>\n+                        </fileset>\n+                        <fileset dir=\"${build.test.classes.dir}\" excludes=\"@{excludes},${excludes},${test.binaryexcludes}\" includes=\"${test.binaryincludes}\">\n+                            <filename name=\"${test.binarytestincludes}\"/>\n+                        </fileset>\n+                    </batchtest>\n+                    <syspropertyset>\n+                        <propertyref prefix=\"test-sys-prop.\"/>\n+                        <mapper from=\"test-sys-prop.*\" to=\"*\" type=\"glob\"/>\n+                    </syspropertyset>\n+                    <formatter type=\"brief\" usefile=\"false\"/>\n+                    <formatter type=\"xml\"/>\n+                    <jvmarg value=\"-ea\"/>\n+                    <customize/>\n+                </junit>\n+            </sequential>\n+        </macrodef>\n+    </target>\n+    <target depends=\"-init-macrodef-junit-init,-init-macrodef-junit-single, -init-macrodef-junit-batch\" if=\"${junit.available}\" name=\"-init-macrodef-junit\"/>\n+    <target if=\"${testng.available}\" name=\"-init-macrodef-testng\">\n+        <macrodef name=\"testng\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\n+            <attribute default=\"${includes}\" name=\"includes\"/>\n+            <attribute default=\"${excludes}\" name=\"excludes\"/>\n+            <attribute default=\"**\" name=\"testincludes\"/>\n+            <attribute default=\"\" name=\"testmethods\"/>\n+            <element name=\"customize\" optional=\"true\"/>\n+            <sequential>\n+                <condition else=\"\" property=\"testng.methods.arg\" value=\"@{testincludes}.@{testmethods}\">\n+                    <isset property=\"test.method\"/>\n+                </condition>\n+                <union id=\"test.set\">\n+                    <fileset dir=\"${test.src.dir}\" excludes=\"@{excludes},**/*.xml,${excludes}\" includes=\"@{includes}\">\n+                        <filename name=\"@{testincludes}\"/>\n+                    </fileset>\n+                </union>\n+                <taskdef classname=\"org.testng.TestNGAntTask\" classpath=\"${run.test.classpath}\" name=\"testng\"/>\n+                <testng classfilesetref=\"test.set\" failureProperty=\"tests.failed\" jvm=\"${platform.java}\" listeners=\"org.testng.reporters.VerboseReporter\" methods=\"${testng.methods.arg}\" mode=\"${testng.mode}\" outputdir=\"${build.test.results.dir}\" suitename=\"MapleCashDropFetcher\" testname=\"TestNG tests\" workingDir=\"${work.dir}\">\n+                    <xmlfileset dir=\"${build.test.classes.dir}\" includes=\"@{testincludes}\"/>\n+                    <propertyset>\n+                        <propertyref prefix=\"test-sys-prop.\"/>\n+                        <mapper from=\"test-sys-prop.*\" to=\"*\" type=\"glob\"/>\n+                    </propertyset>\n+                    <customize/>\n+                </testng>\n+            </sequential>\n+        </macrodef>\n+    </target>\n+    <target name=\"-init-macrodef-test-impl\">\n+        <macrodef name=\"test-impl\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\n+            <attribute default=\"${includes}\" name=\"includes\"/>\n+            <attribute default=\"${excludes}\" name=\"excludes\"/>\n+            <attribute default=\"**\" name=\"testincludes\"/>\n+            <attribute default=\"\" name=\"testmethods\"/>\n+            <element implicit=\"true\" name=\"customize\" optional=\"true\"/>\n+            <sequential>\n+                <echo>No tests executed.</echo>\n+            </sequential>\n+        </macrodef>\n+    </target>\n+    <target depends=\"-init-macrodef-junit\" if=\"${junit.available}\" name=\"-init-macrodef-junit-impl\">\n+        <macrodef name=\"test-impl\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\n+            <attribute default=\"${includes}\" name=\"includes\"/>\n+            <attribute default=\"${excludes}\" name=\"excludes\"/>\n+            <attribute default=\"**\" name=\"testincludes\"/>\n+            <attribute default=\"\" name=\"testmethods\"/>\n+            <element implicit=\"true\" name=\"customize\" optional=\"true\"/>\n+            <sequential>\n+                <j2seproject3:junit excludes=\"@{excludes}\" includes=\"@{includes}\" testincludes=\"@{testincludes}\" testmethods=\"@{testmethods}\">\n+                    <customize/>\n+                </j2seproject3:junit>\n+            </sequential>\n+        </macrodef>\n+    </target>\n+    <target depends=\"-init-macrodef-testng\" if=\"${testng.available}\" name=\"-init-macrodef-testng-impl\">\n+        <macrodef name=\"test-impl\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\n+            <attribute default=\"${includes}\" name=\"includes\"/>\n+            <attribute default=\"${excludes}\" name=\"excludes\"/>\n+            <attribute default=\"**\" name=\"testincludes\"/>\n+            <attribute default=\"\" name=\"testmethods\"/>\n+            <element implicit=\"true\" name=\"customize\" optional=\"true\"/>\n+            <sequential>\n+                <j2seproject3:testng excludes=\"@{excludes}\" includes=\"@{includes}\" testincludes=\"@{testincludes}\" testmethods=\"@{testmethods}\">\n+                    <customize/>\n+                </j2seproject3:testng>\n+            </sequential>\n+        </macrodef>\n+    </target>\n+    <target depends=\"-init-macrodef-test-impl,-init-macrodef-junit-impl,-init-macrodef-testng-impl\" name=\"-init-macrodef-test\">\n+        <macrodef name=\"test\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\n+            <attribute default=\"${includes}\" name=\"includes\"/>\n+            <attribute default=\"${excludes}\" name=\"excludes\"/>\n+            <attribute default=\"**\" name=\"testincludes\"/>\n+            <attribute default=\"\" name=\"testmethods\"/>\n+            <sequential>\n+                <j2seproject3:test-impl excludes=\"@{excludes}\" includes=\"@{includes}\" testincludes=\"@{testincludes}\" testmethods=\"@{testmethods}\">\n+                    <customize>\n+                        <classpath>\n+                            <path path=\"${run.test.classpath}\"/>\n+                        </classpath>\n+                        <jvmarg line=\"${endorsed.classpath.cmd.line.arg}\"/>\n+                        <jvmarg line=\"${run.jvmargs}\"/>\n+                        <jvmarg line=\"${run.jvmargs.ide}\"/>\n+                    </customize>\n+                </j2seproject3:test-impl>\n+            </sequential>\n+        </macrodef>\n+    </target>\n+    <target if=\"${junit.available}\" name=\"-init-macrodef-junit-debug\" unless=\"${nb.junit.batch}\">\n+        <macrodef name=\"junit-debug\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\n+            <attribute default=\"${includes}\" name=\"includes\"/>\n+            <attribute default=\"${excludes}\" name=\"excludes\"/>\n+            <attribute default=\"**\" name=\"testincludes\"/>\n+            <attribute default=\"\" name=\"testmethods\"/>\n+            <element name=\"customize\" optional=\"true\"/>\n+            <sequential>\n+                <property name=\"junit.forkmode\" value=\"perTest\"/>\n+                <junit dir=\"${work.dir}\" errorproperty=\"tests.failed\" failureproperty=\"tests.failed\" fork=\"true\" forkmode=\"${junit.forkmode}\" jvm=\"${platform.java}\" showoutput=\"true\" tempdir=\"${build.dir}\">\n+                    <test methods=\"@{testmethods}\" name=\"@{testincludes}\" todir=\"${build.test.results.dir}\"/>\n+                    <syspropertyset>\n+                        <propertyref prefix=\"test-sys-prop.\"/>\n+                        <mapper from=\"test-sys-prop.*\" to=\"*\" type=\"glob\"/>\n+                    </syspropertyset>\n+                    <formatter type=\"brief\" usefile=\"false\"/>\n+                    <formatter type=\"xml\"/>\n+                    <jvmarg value=\"-ea\"/>\n+                    <jvmarg line=\"${debug-args-line}\"/>\n+                    <jvmarg value=\"-Xrunjdwp:transport=${debug-transport},address=${jpda.address}\"/>\n+                    <customize/>\n+                </junit>\n+            </sequential>\n+        </macrodef>\n+    </target>\n+    <target depends=\"-init-test-properties\" if=\"${nb.junit.batch}\" name=\"-init-macrodef-junit-debug-batch\">\n+        <macrodef name=\"junit-debug\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\n+            <attribute default=\"${includes}\" name=\"includes\"/>\n+            <attribute default=\"${excludes}\" name=\"excludes\"/>\n+            <attribute default=\"**\" name=\"testincludes\"/>\n+            <attribute default=\"\" name=\"testmethods\"/>\n+            <element name=\"customize\" optional=\"true\"/>\n+            <sequential>\n+                <property name=\"junit.forkmode\" value=\"perTest\"/>\n+                <junit dir=\"${work.dir}\" errorproperty=\"tests.failed\" failureproperty=\"tests.failed\" fork=\"true\" forkmode=\"${junit.forkmode}\" jvm=\"${platform.java}\" showoutput=\"true\" tempdir=\"${build.dir}\">\n+                    <batchtest todir=\"${build.test.results.dir}\">\n+                        <fileset dir=\"${test.src.dir}\" excludes=\"@{excludes},${excludes}\" includes=\"@{includes}\">\n+                            <filename name=\"@{testincludes}\"/>\n+                        </fileset>\n+                        <fileset dir=\"${build.test.classes.dir}\" excludes=\"@{excludes},${excludes},${test.binaryexcludes}\" includes=\"${test.binaryincludes}\">\n+                            <filename name=\"${test.binarytestincludes}\"/>\n+                        </fileset>\n+                    </batchtest>\n+                    <syspropertyset>\n+                        <propertyref prefix=\"test-sys-prop.\"/>\n+                        <mapper from=\"test-sys-prop.*\" to=\"*\" type=\"glob\"/>\n+                    </syspropertyset>\n+                    <formatter type=\"brief\" usefile=\"false\"/>\n+                    <formatter type=\"xml\"/>\n+                    <jvmarg value=\"-ea\"/>\n+                    <jvmarg line=\"${debug-args-line}\"/>\n+                    <jvmarg value=\"-Xrunjdwp:transport=${debug-transport},address=${jpda.address}\"/>\n+                    <customize/>\n+                </junit>\n+            </sequential>\n+        </macrodef>\n+    </target>\n+    <target depends=\"-init-macrodef-junit-debug,-init-macrodef-junit-debug-batch\" if=\"${junit.available}\" name=\"-init-macrodef-junit-debug-impl\">\n+        <macrodef name=\"test-debug-impl\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\n+            <attribute default=\"${includes}\" name=\"includes\"/>\n+            <attribute default=\"${excludes}\" name=\"excludes\"/>\n+            <attribute default=\"**\" name=\"testincludes\"/>\n+            <attribute default=\"\" name=\"testmethods\"/>\n+            <element implicit=\"true\" name=\"customize\" optional=\"true\"/>\n+            <sequential>\n+                <j2seproject3:junit-debug excludes=\"@{excludes}\" includes=\"@{includes}\" testincludes=\"@{testincludes}\" testmethods=\"@{testmethods}\">\n+                    <customize/>\n+                </j2seproject3:junit-debug>\n+            </sequential>\n+        </macrodef>\n+    </target>\n+    <target if=\"${testng.available}\" name=\"-init-macrodef-testng-debug\">\n+        <macrodef name=\"testng-debug\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\n+            <attribute default=\"${main.class}\" name=\"testClass\"/>\n+            <attribute default=\"\" name=\"testMethod\"/>\n+            <element name=\"customize2\" optional=\"true\"/>\n+            <sequential>\n+                <condition else=\"-testclass @{testClass}\" property=\"test.class.or.method\" value=\"-methods @{testClass}.@{testMethod}\">\n+                    <isset property=\"test.method\"/>\n+                </condition>\n+                <condition else=\"-suitename MapleCashDropFetcher -testname @{testClass} ${test.class.or.method}\" property=\"testng.cmd.args\" value=\"@{testClass}\">\n+                    <matches pattern=\".*\\.xml\" string=\"@{testClass}\"/>\n+                </condition>\n+                <delete dir=\"${build.test.results.dir}\" quiet=\"true\"/>\n+                <mkdir dir=\"${build.test.results.dir}\"/>\n+                <j2seproject3:debug classname=\"org.testng.TestNG\" classpath=\"${debug.test.classpath}\">\n+                    <customize>\n+                        <customize2/>\n+                        <jvmarg value=\"-ea\"/>\n+                        <arg line=\"${testng.debug.mode}\"/>\n+                        <arg line=\"-d ${build.test.results.dir}\"/>\n+                        <arg line=\"-listener org.testng.reporters.VerboseReporter\"/>\n+                        <arg line=\"${testng.cmd.args}\"/>\n+                    </customize>\n+                </j2seproject3:debug>\n+            </sequential>\n+        </macrodef>\n+    </target>\n+    <target depends=\"-init-macrodef-testng-debug\" if=\"${testng.available}\" name=\"-init-macrodef-testng-debug-impl\">\n+        <macrodef name=\"testng-debug-impl\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\n+            <attribute default=\"${main.class}\" name=\"testClass\"/>\n+            <attribute default=\"\" name=\"testMethod\"/>\n+            <element implicit=\"true\" name=\"customize2\" optional=\"true\"/>\n+            <sequential>\n+                <j2seproject3:testng-debug testClass=\"@{testClass}\" testMethod=\"@{testMethod}\">\n+                    <customize2/>\n+                </j2seproject3:testng-debug>\n+            </sequential>\n+        </macrodef>\n+    </target>\n+    <target depends=\"-init-macrodef-junit-debug-impl\" if=\"${junit.available}\" name=\"-init-macrodef-test-debug-junit\">\n+        <macrodef name=\"test-debug\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\n+            <attribute default=\"${includes}\" name=\"includes\"/>\n+            <attribute default=\"${excludes}\" name=\"excludes\"/>\n+            <attribute default=\"**\" name=\"testincludes\"/>\n+            <attribute default=\"\" name=\"testmethods\"/>\n+            <attribute default=\"${main.class}\" name=\"testClass\"/>\n+            <attribute default=\"\" name=\"testMethod\"/>\n+            <sequential>\n+                <j2seproject3:test-debug-impl excludes=\"@{excludes}\" includes=\"@{includes}\" testincludes=\"@{testincludes}\" testmethods=\"@{testmethods}\">\n+                    <customize>\n+                        <classpath>\n+                            <path path=\"${run.test.classpath}\"/>\n+                        </classpath>\n+                        <jvmarg line=\"${endorsed.classpath.cmd.line.arg}\"/>\n+                        <jvmarg line=\"${run.jvmargs}\"/>\n+                        <jvmarg line=\"${run.jvmargs.ide}\"/>\n+                    </customize>\n+                </j2seproject3:test-debug-impl>\n+            </sequential>\n+        </macrodef>\n+    </target>\n+    <target depends=\"-init-macrodef-testng-debug-impl\" if=\"${testng.available}\" name=\"-init-macrodef-test-debug-testng\">\n+        <macrodef name=\"test-debug\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\n+            <attribute default=\"${includes}\" name=\"includes\"/>\n+            <attribute default=\"${excludes}\" name=\"excludes\"/>\n+            <attribute default=\"**\" name=\"testincludes\"/>\n+            <attribute default=\"\" name=\"testmethods\"/>\n+            <attribute default=\"${main.class}\" name=\"testClass\"/>\n+            <attribute default=\"\" name=\"testMethod\"/>\n+            <sequential>\n+                <j2seproject3:testng-debug-impl testClass=\"@{testClass}\" testMethod=\"@{testMethod}\">\n+                    <customize2>\n+                        <syspropertyset>\n+                            <propertyref prefix=\"test-sys-prop.\"/>\n+                            <mapper from=\"test-sys-prop.*\" to=\"*\" type=\"glob\"/>\n+                        </syspropertyset>\n+                    </customize2>\n+                </j2seproject3:testng-debug-impl>\n+            </sequential>\n+        </macrodef>\n+    </target>\n+    <target depends=\"-init-macrodef-test-debug-junit,-init-macrodef-test-debug-testng\" name=\"-init-macrodef-test-debug\"/>\n+    <!--\n+                pre NB7.2 profiling section; consider it deprecated\n+            -->\n+    <target depends=\"-profile-pre-init, init, -profile-post-init, -profile-init-macrodef-profile, -profile-init-check\" if=\"profiler.info.jvmargs.agent\" name=\"profile-init\"/>\n+    <target if=\"profiler.info.jvmargs.agent\" name=\"-profile-pre-init\">\n+        <!-- Empty placeholder for easier customization. -->\n+        <!-- You can override this target in the ../build.xml file. -->\n+    </target>\n+    <target if=\"profiler.info.jvmargs.agent\" name=\"-profile-post-init\">\n+        <!-- Empty placeholder for easier customization. -->\n+        <!-- You can override this target in the ../build.xml file. -->\n+    </target>\n+    <target if=\"profiler.info.jvmargs.agent\" name=\"-profile-init-macrodef-profile\">\n+        <macrodef name=\"resolve\">\n+            <attribute name=\"name\"/>\n+            <attribute name=\"value\"/>\n+            <sequential>\n+                <property name=\"@{name}\" value=\"${env.@{value}}\"/>\n+            </sequential>\n+        </macrodef>\n+        <macrodef name=\"profile\">\n+            <attribute default=\"${main.class}\" name=\"classname\"/>\n+            <element name=\"customize\" optional=\"true\"/>\n+            <sequential>\n+                <property environment=\"env\"/>\n+                <resolve name=\"profiler.current.path\" value=\"${profiler.info.pathvar}\"/>\n+                <java classname=\"@{classname}\" dir=\"${profiler.info.dir}\" fork=\"true\" jvm=\"${profiler.info.jvm}\">\n+                    <jvmarg line=\"${endorsed.classpath.cmd.line.arg}\"/>\n+                    <jvmarg value=\"${profiler.info.jvmargs.agent}\"/>\n+                    <jvmarg line=\"${profiler.info.jvmargs}\"/>\n+                    <env key=\"${profiler.info.pathvar}\" path=\"${profiler.info.agentpath}:${profiler.current.path}\"/>\n+                    <arg line=\"${application.args}\"/>\n+                    <classpath>\n+                        <path path=\"${run.classpath}\"/>\n+                    </classpath>\n+                    <syspropertyset>\n+                        <propertyref prefix=\"run-sys-prop.\"/>\n+                        <mapper from=\"run-sys-prop.*\" to=\"*\" type=\"glob\"/>\n+                    </syspropertyset>\n+                    <customize/>\n+                </java>\n+            </sequential>\n+        </macrodef>\n+    </target>\n+    <target depends=\"-profile-pre-init, init, -profile-post-init, -profile-init-macrodef-profile\" if=\"profiler.info.jvmargs.agent\" name=\"-profile-init-check\">\n+        <fail unless=\"profiler.info.jvm\">Must set JVM to use for profiling in profiler.info.jvm</fail>\n+        <fail unless=\"profiler.info.jvmargs.agent\">Must set profiler agent JVM arguments in profiler.info.jvmargs.agent</fail>\n+    </target>\n+    <!--\n+                end of pre NB7.2 profiling section\n+            -->\n+    <target depends=\"-init-debug-args\" name=\"-init-macrodef-nbjpda\">\n+        <macrodef name=\"nbjpdastart\" uri=\"http://www.netbeans.org/ns/j2se-project/1\">\n+            <attribute default=\"${main.class}\" name=\"name\"/>\n+            <attribute default=\"${debug.classpath}\" name=\"classpath\"/>\n+            <attribute default=\"\" name=\"stopclassname\"/>\n+            <sequential>\n+                <nbjpdastart addressproperty=\"jpda.address\" name=\"@{name}\" stopclassname=\"@{stopclassname}\" transport=\"${debug-transport}\">\n+                    <classpath>\n+                        <path path=\"@{classpath}\"/>\n+                    </classpath>\n+                    <bootclasspath>\n+                        <path path=\"${platform.bootcp}\"/>\n+                    </bootclasspath>\n+                </nbjpdastart>\n+            </sequential>\n+        </macrodef>\n+        <macrodef name=\"nbjpdareload\" uri=\"http://www.netbeans.org/ns/j2se-project/1\">\n+            <attribute default=\"${build.classes.dir}\" name=\"dir\"/>\n+            <sequential>\n+                <nbjpdareload>\n+                    <fileset dir=\"@{dir}\" includes=\"${fix.classes}\">\n+                        <include name=\"${fix.includes}*.class\"/>\n+                    </fileset>\n+                </nbjpdareload>\n+            </sequential>\n+        </macrodef>\n+    </target>\n+    <target name=\"-init-debug-args\">\n+        <exec executable=\"${platform.java}\" outputproperty=\"version-output\">\n+            <arg value=\"-version\"/>\n+        </exec>\n+        <condition property=\"have-jdk-older-than-1.4\">\n+            <or>\n+                <contains string=\"${version-output}\" substring=\"java version &quot;1.0\"/>\n+                <contains string=\"${version-output}\" substring=\"java version &quot;1.1\"/>\n+                <contains string=\"${version-output}\" substring=\"java version &quot;1.2\"/>\n+                <contains string=\"${version-output}\" substring=\"java version &quot;1.3\"/>\n+            </or>\n+        </condition>\n+        <condition else=\"-Xdebug\" property=\"debug-args-line\" value=\"-Xdebug -Xnoagent -Djava.compiler=none\">\n+            <istrue value=\"${have-jdk-older-than-1.4}\"/>\n+        </condition>\n+        <condition else=\"dt_socket\" property=\"debug-transport-by-os\" value=\"dt_shmem\">\n+            <os family=\"windows\"/>\n+        </condition>\n+        <condition else=\"${debug-transport-by-os}\" property=\"debug-transport\" value=\"${debug.transport}\">\n+            <isset property=\"debug.transport\"/>\n+        </condition>\n+    </target>\n+    <target depends=\"-init-debug-args\" name=\"-init-macrodef-debug\">\n+        <macrodef name=\"debug\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\n+            <attribute default=\"${main.class}\" name=\"classname\"/>\n+            <attribute default=\"${debug.classpath}\" name=\"classpath\"/>\n+            <element name=\"customize\" optional=\"true\"/>\n+            <sequential>\n+                <java classname=\"@{classname}\" dir=\"${work.dir}\" fork=\"true\" jvm=\"${platform.java}\">\n+                    <jvmarg line=\"${endorsed.classpath.cmd.line.arg}\"/>\n+                    <jvmarg line=\"${debug-args-line}\"/>\n+                    <jvmarg value=\"-Xrunjdwp:transport=${debug-transport},address=${jpda.address}\"/>\n+                    <jvmarg value=\"-Dfile.encoding=${runtime.encoding}\"/>\n+                    <redirector errorencoding=\"${runtime.encoding}\" inputencoding=\"${runtime.encoding}\" outputencoding=\"${runtime.encoding}\"/>\n+                    <jvmarg line=\"${run.jvmargs}\"/>\n+                    <jvmarg line=\"${run.jvmargs.ide}\"/>\n+                    <classpath>\n+                        <path path=\"@{classpath}\"/>\n+                    </classpath>\n+                    <syspropertyset>\n+                        <propertyref prefix=\"run-sys-prop.\"/>\n+                        <mapper from=\"run-sys-prop.*\" to=\"*\" type=\"glob\"/>\n+                    </syspropertyset>\n+                    <customize/>\n+                </java>\n+            </sequential>\n+        </macrodef>\n+    </target>\n+    <target name=\"-init-macrodef-java\">\n+        <macrodef name=\"java\" uri=\"http://www.netbeans.org/ns/j2se-project/1\">\n+            <attribute default=\"${main.class}\" name=\"classname\"/>\n+            <attribute default=\"${run.classpath}\" name=\"classpath\"/>\n+            <attribute default=\"jvm\" name=\"jvm\"/>\n+            <element name=\"customize\" optional=\"true\"/>\n+            <sequential>\n+                <java classname=\"@{classname}\" dir=\"${work.dir}\" fork=\"true\" jvm=\"${platform.java}\">\n+                    <jvmarg line=\"${endorsed.classpath.cmd.line.arg}\"/>\n+                    <jvmarg value=\"-Dfile.encoding=${runtime.encoding}\"/>\n+                    <redirector errorencoding=\"${runtime.encoding}\" inputencoding=\"${runtime.encoding}\" outputencoding=\"${runtime.encoding}\"/>\n+                    <jvmarg line=\"${run.jvmargs}\"/>\n+                    <jvmarg line=\"${run.jvmargs.ide}\"/>\n+                    <classpath>\n+                        <path path=\"@{classpath}\"/>\n+                    </classpath>\n+                    <syspropertyset>\n+                        <propertyref prefix=\"run-sys-prop.\"/>\n+                        <mapper from=\"run-sys-prop.*\" to=\"*\" type=\"glob\"/>\n+                    </syspropertyset>\n+                    <customize/>\n+                </java>\n+            </sequential>\n+        </macrodef>\n+    </target>\n+    <target name=\"-init-macrodef-copylibs\">\n+        <macrodef name=\"copylibs\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\n+            <attribute default=\"${manifest.file}\" name=\"manifest\"/>\n+            <element name=\"customize\" optional=\"true\"/>\n+            <sequential>\n+                <property location=\"${build.classes.dir}\" name=\"build.classes.dir.resolved\"/>\n+                <pathconvert property=\"run.classpath.without.build.classes.dir\">\n+                    <path path=\"${run.classpath}\"/>\n+                    <map from=\"${build.classes.dir.resolved}\" to=\"\"/>\n+                </pathconvert>\n+                <pathconvert pathsep=\" \" property=\"jar.classpath\">\n+                    <path path=\"${run.classpath.without.build.classes.dir}\"/>\n+                    <chainedmapper>\n+                        <flattenmapper/>\n+                        <filtermapper>\n+                            <replacestring from=\" \" to=\"%20\"/>\n+                        </filtermapper>\n+                        <globmapper from=\"*\" to=\"lib/*\"/>\n+                    </chainedmapper>\n+                </pathconvert>\n+                <taskdef classname=\"org.netbeans.modules.java.j2seproject.copylibstask.CopyLibs\" classpath=\"${libs.CopyLibs.classpath}\" name=\"copylibs\"/>\n+                <copylibs compress=\"${jar.compress}\" excludeFromCopy=\"${copylibs.excludes}\" index=\"${jar.index}\" indexMetaInf=\"${jar.index.metainf}\" jarfile=\"${dist.jar}\" manifest=\"@{manifest}\" rebase=\"${copylibs.rebase}\" runtimeclasspath=\"${run.classpath.without.build.classes.dir}\">\n+                    <fileset dir=\"${build.classes.dir}\" excludes=\"${dist.archive.excludes}\"/>\n+                    <manifest>\n+                        <attribute name=\"Class-Path\" value=\"${jar.classpath}\"/>\n+                        <customize/>\n+                    </manifest>\n+                </copylibs>\n+            </sequential>\n+        </macrodef>\n+    </target>\n+    <target name=\"-init-presetdef-jar\">\n+        <presetdef name=\"jar\" uri=\"http://www.netbeans.org/ns/j2se-project/1\">\n+            <jar compress=\"${jar.compress}\" index=\"${jar.index}\" jarfile=\"${dist.jar}\">\n+                <j2seproject1:fileset dir=\"${build.classes.dir}\" excludes=\"${dist.archive.excludes}\"/>\n+            </jar>\n+        </presetdef>\n+    </target>\n+    <target name=\"-init-ap-cmdline-properties\">\n+        <property name=\"annotation.processing.enabled\" value=\"true\"/>\n+        <property name=\"annotation.processing.processors.list\" value=\"\"/>\n+        <property name=\"annotation.processing.processor.options\" value=\"\"/>\n+        <property name=\"annotation.processing.run.all.processors\" value=\"true\"/>\n+        <property name=\"javac.processorpath\" value=\"${javac.classpath}\"/>\n+        <property name=\"javac.test.processorpath\" value=\"${javac.test.classpath}\"/>\n+        <condition property=\"ap.supported.internal\" value=\"true\">\n+            <not>\n+                <matches pattern=\"1\\.[0-5](\\..*)?\" string=\"${javac.source}\"/>\n+            </not>\n+        </condition>\n+    </target>\n+    <target depends=\"-init-ap-cmdline-properties\" if=\"ap.supported.internal\" name=\"-init-ap-cmdline-supported\">\n+        <condition else=\"\" property=\"ap.processors.internal\" value=\"-processor ${annotation.processing.processors.list}\">\n+            <isfalse value=\"${annotation.processing.run.all.processors}\"/>\n+        </condition>\n+        <condition else=\"\" property=\"ap.proc.none.internal\" value=\"-proc:none\">\n+            <isfalse value=\"${annotation.processing.enabled}\"/>\n+        </condition>\n+    </target>\n+    <target depends=\"-init-ap-cmdline-properties,-init-ap-cmdline-supported\" name=\"-init-ap-cmdline\">\n+        <property name=\"ap.cmd.line.internal\" value=\"\"/>\n+    </target>\n+    <target depends=\"-pre-init,-init-private,-init-user,-init-project,-do-init,-post-init,-init-check,-init-macrodef-property,-init-macrodef-javac,-init-macrodef-test,-init-macrodef-test-debug,-init-macrodef-nbjpda,-init-macrodef-debug,-init-macrodef-java,-init-presetdef-jar,-init-ap-cmdline\" name=\"init\"/>\n+    <!--\n+                ===================\n+                COMPILATION SECTION\n+                ===================\n+            -->\n+    <target name=\"-deps-jar-init\" unless=\"built-jar.properties\">\n+        <property location=\"${build.dir}/built-jar.properties\" name=\"built-jar.properties\"/>\n+        <delete file=\"${built-jar.properties}\" quiet=\"true\"/>\n+    </target>\n+    <target if=\"already.built.jar.${basedir}\" name=\"-warn-already-built-jar\">\n+        <echo level=\"warn\" message=\"Cycle detected: MapleCashDropFetcher was already built\"/>\n+    </target>\n+    <target depends=\"init,-deps-jar-init\" name=\"deps-jar\" unless=\"no.deps\">\n+        <mkdir dir=\"${build.dir}\"/>\n+        <touch file=\"${built-jar.properties}\" verbose=\"false\"/>\n+        <property file=\"${built-jar.properties}\" prefix=\"already.built.jar.\"/>\n+        <antcall target=\"-warn-already-built-jar\"/>\n+        <propertyfile file=\"${built-jar.properties}\">\n+            <entry key=\"${basedir}\" value=\"\"/>\n+        </propertyfile>\n+    </target>\n+    <target depends=\"init,-check-automatic-build,-clean-after-automatic-build\" name=\"-verify-automatic-build\"/>\n+    <target depends=\"init\" name=\"-check-automatic-build\">\n+        <available file=\"${build.classes.dir}/.netbeans_automatic_build\" property=\"netbeans.automatic.build\"/>\n+    </target>\n+    <target depends=\"init\" if=\"netbeans.automatic.build\" name=\"-clean-after-automatic-build\">\n+        <antcall target=\"clean\"/>\n+    </target>\n+    <target depends=\"init,deps-jar\" name=\"-pre-pre-compile\">\n+        <mkdir dir=\"${build.classes.dir}\"/>\n+    </target>\n+    <target name=\"-pre-compile\">\n+        <!-- Empty placeholder for easier customization. -->\n+        <!-- You can override this target in the ../build.xml file. -->\n+    </target>\n+    <target if=\"do.depend.true\" name=\"-compile-depend\">\n+        <pathconvert property=\"build.generated.subdirs\">\n+            <dirset dir=\"${build.generated.sources.dir}\" erroronmissingdir=\"false\">\n+                <include name=\"*\"/>\n+            </dirset>\n+        </pathconvert>\n+        <j2seproject3:depend srcdir=\"${src.dir}:${build.generated.subdirs}\"/>\n+    </target>\n+    <target depends=\"init,deps-jar,-pre-pre-compile,-pre-compile, -copy-persistence-xml,-compile-depend\" if=\"have.sources\" name=\"-do-compile\">\n+        <j2seproject3:javac gensrcdir=\"${build.generated.sources.dir}\"/>\n+        <copy todir=\"${build.classes.dir}\">\n+            <fileset dir=\"${src.dir}\" excludes=\"${build.classes.excludes},${excludes}\" includes=\"${includes}\"/>\n+        </copy>\n+    </target>\n+    <target if=\"has.persistence.xml\" name=\"-copy-persistence-xml\">\n+        <mkdir dir=\"${build.classes.dir}/META-INF\"/>\n+        <copy todir=\"${build.classes.dir}/META-INF\">\n+            <fileset dir=\"${meta.inf.dir}\" includes=\"persistence.xml orm.xml\"/>\n+        </copy>\n+    </target>\n+    <target name=\"-post-compile\">\n+        <!-- Empty placeholder for easier customization. -->\n+        <!-- You can override this target in the ../build.xml file. -->\n+    </target>\n+    <target depends=\"init,deps-jar,-verify-automatic-build,-pre-pre-compile,-pre-compile,-do-compile,-post-compile\" description=\"Compile project.\" name=\"compile\"/>\n+    <target name=\"-pre-compile-single\">\n+        <!-- Empty placeholder for easier customization. -->\n+        <!-- You can override this target in the ../build.xml file. -->\n+    </target>\n+    <target depends=\"init,deps-jar,-pre-pre-compile\" name=\"-do-compile-single\">\n+        <fail unless=\"javac.includes\">Must select some files in the IDE or set javac.includes</fail>\n+        <j2seproject3:force-recompile/>\n+        <j2seproject3:javac excludes=\"\" gensrcdir=\"${build.generated.sources.dir}\" includes=\"${javac.includes}\" sourcepath=\"${src.dir}\"/>\n+    </target>\n+    <target name=\"-post-compile-single\">\n+        <!-- Empty placeholder for easier customization. -->\n+        <!-- You can override this target in the ../build.xml file. -->\n+    </target>\n+    <target depends=\"init,deps-jar,-verify-automatic-build,-pre-pre-compile,-pre-compile-single,-do-compile-single,-post-compile-single\" name=\"compile-single\"/>\n+    <!--\n+                ====================\n+                JAR BUILDING SECTION\n+                ====================\n+            -->\n+    <target depends=\"init\" name=\"-pre-pre-jar\">\n+        <dirname file=\"${dist.jar}\" property=\"dist.jar.dir\"/>\n+        <mkdir dir=\"${dist.jar.dir}\"/>\n+    </target>\n+    <target name=\"-pre-jar\">\n+        <!-- Empty placeholder for easier customization. -->\n+        <!-- You can override this target in the ../build.xml file. -->\n+    </target>\n+    <target depends=\"init\" if=\"do.archive\" name=\"-do-jar-create-manifest\" unless=\"manifest.available\">\n+        <tempfile deleteonexit=\"true\" destdir=\"${build.dir}\" property=\"tmp.manifest.file\"/>\n+        <touch file=\"${tmp.manifest.file}\" verbose=\"false\"/>\n+    </target>\n+    <target depends=\"init\" if=\"do.archive+manifest.available\" name=\"-do-jar-copy-manifest\">\n+        <tempfile deleteonexit=\"true\" destdir=\"${build.dir}\" property=\"tmp.manifest.file\"/>\n+        <copy file=\"${manifest.file}\" tofile=\"${tmp.manifest.file}\"/>\n+    </target>\n+    <target depends=\"init,-do-jar-create-manifest,-do-jar-copy-manifest\" if=\"do.archive+main.class.available\" name=\"-do-jar-set-mainclass\">\n+        <manifest file=\"${tmp.manifest.file}\" mode=\"update\">\n+            <attribute name=\"Main-Class\" value=\"${main.class}\"/>\n+        </manifest>\n+    </target>\n+    <target depends=\"init,-do-jar-create-manifest,-do-jar-copy-manifest\" if=\"do.archive+profile.available\" name=\"-do-jar-set-profile\">\n+        <manifest file=\"${tmp.manifest.file}\" mode=\"update\">\n+            <attribute name=\"Profile\" value=\"${javac.profile}\"/>\n+        </manifest>\n+    </target>\n+    <target depends=\"init,-do-jar-create-manifest,-do-jar-copy-manifest\" if=\"do.archive+splashscreen.available\" name=\"-do-jar-set-splashscreen\">\n+        <basename file=\"${application.splash}\" property=\"splashscreen.basename\"/>\n+        <mkdir dir=\"${build.classes.dir}/META-INF\"/>\n+        <copy failonerror=\"false\" file=\"${application.splash}\" todir=\"${build.classes.dir}/META-INF\"/>\n+        <manifest file=\"${tmp.manifest.file}\" mode=\"update\">\n+            <attribute name=\"SplashScreen-Image\" value=\"META-INF/${splashscreen.basename}\"/>\n+        </manifest>\n+    </target>\n+    <target depends=\"init,-init-macrodef-copylibs,compile,-pre-pre-jar,-pre-jar,-do-jar-create-manifest,-do-jar-copy-manifest,-do-jar-set-mainclass,-do-jar-set-profile,-do-jar-set-splashscreen\" if=\"do.mkdist\" name=\"-do-jar-copylibs\">\n+        <j2seproject3:copylibs manifest=\"${tmp.manifest.file}\"/>\n+        <echo level=\"info\">To run this application from the command line without Ant, try:</echo>\n+        <property location=\"${dist.jar}\" name=\"dist.jar.resolved\"/>\n+        <echo level=\"info\">${platform.java} -jar \"${dist.jar.resolved}\"</echo>\n+    </target>\n+    <target depends=\"init,compile,-pre-pre-jar,-pre-jar,-do-jar-create-manifest,-do-jar-copy-manifest,-do-jar-set-mainclass,-do-jar-set-profile,-do-jar-set-splashscreen\" if=\"do.archive\" name=\"-do-jar-jar\" unless=\"do.mkdist\">\n+        <j2seproject1:jar manifest=\"${tmp.manifest.file}\"/>\n+        <property location=\"${build.classes.dir}\" name=\"build.classes.dir.resolved\"/>\n+        <property location=\"${dist.jar}\" name=\"dist.jar.resolved\"/>\n+        <pathconvert property=\"run.classpath.with.dist.jar\">\n+            <path path=\"${run.classpath}\"/>\n+            <map from=\"${build.classes.dir.resolved}\" to=\"${dist.jar.resolved}\"/>\n+        </pathconvert>\n+        <condition else=\"\" property=\"jar.usage.message\" value=\"To run this application from the command line without Ant, try:${line.separator}${platform.java} -cp ${run.classpath.with.dist.jar} ${main.class}\">\n+            <isset property=\"main.class.available\"/>\n+        </condition>\n+        <condition else=\"debug\" property=\"jar.usage.level\" value=\"info\">\n+            <isset property=\"main.class.available\"/>\n+        </condition>\n+        <echo level=\"${jar.usage.level}\" message=\"${jar.usage.message}\"/>\n+    </target>\n+    <target depends=\"-do-jar-copylibs\" if=\"do.archive\" name=\"-do-jar-delete-manifest\">\n+        <delete>\n+            <fileset file=\"${tmp.manifest.file}\"/>\n+        </delete>\n+    </target>\n+    <target depends=\"init,compile,-pre-pre-jar,-pre-jar,-do-jar-create-manifest,-do-jar-copy-manifest,-do-jar-set-mainclass,-do-jar-set-profile,-do-jar-set-splashscreen,-do-jar-jar,-do-jar-delete-manifest\" name=\"-do-jar-without-libraries\"/>\n+    <target depends=\"init,compile,-pre-pre-jar,-pre-jar,-do-jar-create-manifest,-do-jar-copy-manifest,-do-jar-set-mainclass,-do-jar-set-profile,-do-jar-set-splashscreen,-do-jar-copylibs,-do-jar-delete-manifest\" name=\"-do-jar-with-libraries\"/>\n+    <target name=\"-post-jar\">\n+        <!-- Empty placeholder for easier customization. -->\n+        <!-- You can override this target in the ../build.xml file. -->\n+    </target>\n+    <target depends=\"init,compile,-pre-jar,-do-jar-without-libraries,-do-jar-with-libraries,-post-jar\" name=\"-do-jar\"/>\n+    <target depends=\"init,compile,-pre-jar,-do-jar,-post-jar\" description=\"Build JAR.\" name=\"jar\"/>\n+    <!--\n+                =================\n+                EXECUTION SECTION\n+                =================\n+            -->\n+    <target depends=\"init,compile\" description=\"Run a main class.\" name=\"run\">\n+        <j2seproject1:java>\n+            <customize>\n+                <arg line=\"${application.args}\"/>\n+            </customize>\n+        </j2seproject1:java>\n+    </target>\n+    <target name=\"-do-not-recompile\">\n+        <property name=\"javac.includes.binary\" value=\"\"/>\n+    </target>\n+    <target depends=\"init,compile-single\" name=\"run-single\">\n+        <fail unless=\"run.class\">Must select one file in the IDE or set run.class</fail>\n+        <j2seproject1:java classname=\"${run.class}\"/>\n+    </target>\n+    <target depends=\"init,compile-test-single\" name=\"run-test-with-main\">\n+        <fail unless=\"run.class\">Must select one file in the IDE or set run.class</fail>\n+        <j2seproject1:java classname=\"${run.class}\" classpath=\"${run.test.classpath}\"/>\n+    </target>\n+    <!--\n+                =================\n+                DEBUGGING SECTION\n+                =================\n+            -->\n+    <target depends=\"init\" if=\"netbeans.home\" name=\"-debug-start-debugger\">\n+        <j2seproject1:nbjpdastart name=\"${debug.class}\"/>\n+    </target>\n+    <target depends=\"init\" if=\"netbeans.home\" name=\"-debug-start-debugger-main-test\">\n+        <j2seproject1:nbjpdastart classpath=\"${debug.test.classpath}\" name=\"${debug.class}\"/>\n+    </target>\n+    <target depends=\"init,compile\" name=\"-debug-start-debuggee\">\n+        <j2seproject3:debug>\n+            <customize>\n+                <arg line=\"${application.args}\"/>\n+            </customize>\n+        </j2seproject3:debug>\n+    </target>\n+    <target depends=\"init,compile,-debug-start-debugger,-debug-start-debuggee\" description=\"Debug project in IDE.\" if=\"netbeans.home\" name=\"debug\"/>\n+    <target depends=\"init\" if=\"netbeans.home\" name=\"-debug-start-debugger-stepinto\">\n+        <j2seproject1:nbjpdastart stopclassname=\"${main.class}\"/>\n+    </target>\n+    <target depends=\"init,compile,-debug-start-debugger-stepinto,-debug-start-debuggee\" if=\"netbeans.home\" name=\"debug-stepinto\"/>\n+    <target depends=\"init,compile-single\" if=\"netbeans.home\" name=\"-debug-start-debuggee-single\">\n+        <fail unless=\"debug.class\">Must select one file in the IDE or set debug.class</fail>\n+        <j2seproject3:debug classname=\"${debug.class}\"/>\n+    </target>\n+    <target depends=\"init,compile-single,-debug-start-debugger,-debug-start-debuggee-single\" if=\"netbeans.home\" name=\"debug-single\"/>\n+    <target depends=\"init,compile-test-single\" if=\"netbeans.home\" name=\"-debug-start-debuggee-main-test\">\n+        <fail unless=\"debug.class\">Must select one file in the IDE or set debug.class</fail>\n+        <j2seproject3:debug classname=\"${debug.class}\" classpath=\"${debug.test.classpath}\"/>\n+    </target>\n+    <target depends=\"init,compile-test-single,-debug-start-debugger-main-test,-debug-start-debuggee-main-test\" if=\"netbeans.home\" name=\"debug-test-with-main\"/>\n+    <target depends=\"init\" name=\"-pre-debug-fix\">\n+        <fail unless=\"fix.includes\">Must set fix.includes</fail>\n+        <property name=\"javac.includes\" value=\"${fix.includes}.java\"/>\n+    </target>\n+    <target depends=\"init,-pre-debug-fix,compile-single\" if=\"netbeans.home\" name=\"-do-debug-fix\">\n+        <j2seproject1:nbjpdareload/>\n+    </target>\n+    <target depends=\"init,-pre-debug-fix,-do-debug-fix\" if=\"netbeans.home\" name=\"debug-fix\"/>\n+    <!--\n+                =================\n+                PROFILING SECTION\n+                =================\n+            -->\n+    <!--\n+                pre NB7.2 profiler integration\n+            -->\n+    <target depends=\"profile-init,compile\" description=\"Profile a project in the IDE.\" if=\"profiler.info.jvmargs.agent\" name=\"-profile-pre72\">\n+        <fail unless=\"netbeans.home\">This target only works when run from inside the NetBeans IDE.</fail>\n+        <nbprofiledirect>\n+            <classpath>\n+                <path path=\"${run.classpath}\"/>\n+            </classpath>\n+        </nbprofiledirect>\n+        <profile/>\n+    </target>\n+    <target depends=\"profile-init,compile-single\" description=\"Profile a selected class in the IDE.\" if=\"profiler.info.jvmargs.agent\" name=\"-profile-single-pre72\">\n+        <fail unless=\"profile.class\">Must select one file in the IDE or set profile.class</fail>\n+        <fail unless=\"netbeans.home\">This target only works when run from inside the NetBeans IDE.</fail>\n+        <nbprofiledirect>\n+            <classpath>\n+                <path path=\"${run.classpath}\"/>\n+            </classpath>\n+        </nbprofiledirect>\n+        <profile classname=\"${profile.class}\"/>\n+    </target>\n+    <target depends=\"profile-init,compile-single\" if=\"profiler.info.jvmargs.agent\" name=\"-profile-applet-pre72\">\n+        <fail unless=\"netbeans.home\">This target only works when run from inside the NetBeans IDE.</fail>\n+        <nbprofiledirect>\n+            <classpath>\n+                <path path=\"${run.classpath}\"/>\n+            </classpath>\n+        </nbprofiledirect>\n+        <profile classname=\"sun.applet.AppletViewer\">\n+            <customize>\n+                <arg value=\"${applet.url}\"/>\n+            </customize>\n+        </profile>\n+    </target>\n+    <target depends=\"profile-init,compile-test-single\" if=\"profiler.info.jvmargs.agent\" name=\"-profile-test-single-pre72\">\n+        <fail unless=\"netbeans.home\">This target only works when run from inside the NetBeans IDE.</fail>\n+        <nbprofiledirect>\n+            <classpath>\n+                <path path=\"${run.test.classpath}\"/>\n+            </classpath>\n+        </nbprofiledirect>\n+        <junit dir=\"${profiler.info.dir}\" errorproperty=\"tests.failed\" failureproperty=\"tests.failed\" fork=\"true\" jvm=\"${profiler.info.jvm}\" showoutput=\"true\">\n+            <env key=\"${profiler.info.pathvar}\" path=\"${profiler.info.agentpath}:${profiler.current.path}\"/>\n+            <jvmarg value=\"${profiler.info.jvmargs.agent}\"/>\n+            <jvmarg line=\"${profiler.info.jvmargs}\"/>\n+            <test name=\"${profile.class}\"/>\n+            <classpath>\n+                <path path=\"${run.test.classpath}\"/>\n+            </classpath>\n+            <syspropertyset>\n+                <propertyref prefix=\"test-sys-prop.\"/>\n+                <mapper from=\"test-sys-prop.*\" to=\"*\" type=\"glob\"/>\n+            </syspropertyset>\n+            <formatter type=\"brief\" usefile=\"false\"/>\n+            <formatter type=\"xml\"/>\n+        </junit>\n+    </target>\n+    <!--\n+                end of pre NB72 profiling section\n+            -->\n+    <target if=\"netbeans.home\" name=\"-profile-check\">\n+        <condition property=\"profiler.configured\">\n+            <or>\n+                <contains casesensitive=\"true\" string=\"${run.jvmargs.ide}\" substring=\"-agentpath:\"/>\n+                <contains casesensitive=\"true\" string=\"${run.jvmargs.ide}\" substring=\"-javaagent:\"/>\n+            </or>\n+        </condition>\n+    </target>\n+    <target depends=\"-profile-check,-profile-pre72\" description=\"Profile a project in the IDE.\" if=\"profiler.configured\" name=\"profile\" unless=\"profiler.info.jvmargs.agent\">\n+        <startprofiler/>\n+        <antcall target=\"run\"/>\n+    </target>\n+    <target depends=\"-profile-check,-profile-single-pre72\" description=\"Profile a selected class in the IDE.\" if=\"profiler.configured\" name=\"profile-single\" unless=\"profiler.info.jvmargs.agent\">\n+        <fail unless=\"run.class\">Must select one file in the IDE or set run.class</fail>\n+        <startprofiler/>\n+        <antcall target=\"run-single\"/>\n+    </target>\n+    <target depends=\"-profile-test-single-pre72\" description=\"Profile a selected test in the IDE.\" name=\"profile-test-single\"/>\n+    <target depends=\"-profile-check\" description=\"Profile a selected test in the IDE.\" if=\"profiler.configured\" name=\"profile-test\" unless=\"profiler.info.jvmargs\">\n+        <fail unless=\"test.includes\">Must select some files in the IDE or set test.includes</fail>\n+        <startprofiler/>\n+        <antcall target=\"test-single\"/>\n+    </target>\n+    <target depends=\"-profile-check\" description=\"Profile a selected class in the IDE.\" if=\"profiler.configured\" name=\"profile-test-with-main\">\n+        <fail unless=\"run.class\">Must select one file in the IDE or set run.class</fail>\n+        <startprofiler/>\n+        <antcal target=\"run-test-with-main\"/>\n+    </target>\n+    <target depends=\"-profile-check,-profile-applet-pre72\" if=\"profiler.configured\" name=\"profile-applet\" unless=\"profiler.info.jvmargs.agent\">\n+        <fail unless=\"applet.url\">Must select one file in the IDE or set applet.url</fail>\n+        <startprofiler/>\n+        <antcall target=\"run-applet\"/>\n+    </target>\n+    <!--\n+                ===============\n+                JAVADOC SECTION\n+                ===============\n+            -->\n+    <target depends=\"init\" if=\"have.sources\" name=\"-javadoc-build\">\n+        <mkdir dir=\"${dist.javadoc.dir}\"/>\n+        <condition else=\"\" property=\"javadoc.endorsed.classpath.cmd.line.arg\" value=\"-J${endorsed.classpath.cmd.line.arg}\">\n+            <and>\n+                <isset property=\"endorsed.classpath.cmd.line.arg\"/>\n+                <not>\n+                    <equals arg1=\"${endorsed.classpath.cmd.line.arg}\" arg2=\"\"/>\n+                </not>\n+            </and>\n+        </condition>\n+        <exec executable=\"${platform.java}\" failonerror=\"false\" outputproperty=\"platform.version.output\">\n+            <arg value=\"-version\"/>\n+        </exec>\n+        <condition else=\"\" property=\"bug5101868workaround\" value=\"*.java\">\n+            <matches multiline=\"true\" pattern=\"1\\.[56](\\..*)?\" string=\"${platform.version.output}\"/>\n+        </condition>\n+        <javadoc additionalparam=\"-J-Dfile.encoding=${file.encoding} ${javadoc.additionalparam}\" author=\"${javadoc.author}\" charset=\"UTF-8\" destdir=\"${dist.javadoc.dir}\" docencoding=\"UTF-8\" encoding=\"${javadoc.encoding.used}\" executable=\"${platform.javadoc}\" failonerror=\"true\" noindex=\"${javadoc.noindex}\" nonavbar=\"${javadoc.nonavbar}\" notree=\"${javadoc.notree}\" private=\"${javadoc.private}\" source=\"${javac.source}\" splitindex=\"${javadoc.splitindex}\" use=\"${javadoc.use}\" useexternalfile=\"true\" version=\"${javadoc.version}\" windowtitle=\"${javadoc.windowtitle}\">\n+            <classpath>\n+                <path path=\"${javac.classpath}\"/>\n+            </classpath>\n+            <fileset dir=\"${src.dir}\" excludes=\"${bug5101868workaround},${excludes}\" includes=\"${includes}\">\n+                <filename name=\"**/*.java\"/>\n+            </fileset>\n+            <fileset dir=\"${build.generated.sources.dir}\" erroronmissingdir=\"false\">\n+                <include name=\"**/*.java\"/>\n+                <exclude name=\"*.java\"/>\n+            </fileset>\n+            <arg line=\"${javadoc.endorsed.classpath.cmd.line.arg}\"/>\n+        </javadoc>\n+        <copy todir=\"${dist.javadoc.dir}\">\n+            <fileset dir=\"${src.dir}\" excludes=\"${excludes}\" includes=\"${includes}\">\n+                <filename name=\"**/doc-files/**\"/>\n+            </fileset>\n+            <fileset dir=\"${build.generated.sources.dir}\" erroronmissingdir=\"false\">\n+                <include name=\"**/doc-files/**\"/>\n+            </fileset>\n+        </copy>\n+    </target>\n+    <target depends=\"init,-javadoc-build\" if=\"netbeans.home\" name=\"-javadoc-browse\" unless=\"no.javadoc.preview\">\n+        <nbbrowse file=\"${dist.javadoc.dir}/index.html\"/>\n+    </target>\n+    <target depends=\"init,-javadoc-build,-javadoc-browse\" description=\"Build Javadoc.\" name=\"javadoc\"/>\n+    <!--\n+                =========================\n+                TEST COMPILATION SECTION\n+                =========================\n+            -->\n+    <target depends=\"init,compile\" if=\"have.tests\" name=\"-pre-pre-compile-test\">\n+        <mkdir dir=\"${build.test.classes.dir}\"/>\n+    </target>\n+    <target name=\"-pre-compile-test\">\n+        <!-- Empty placeholder for easier customization. -->\n+        <!-- You can override this target in the ../build.xml file. -->\n+    </target>\n+    <target if=\"do.depend.true\" name=\"-compile-test-depend\">\n+        <j2seproject3:depend classpath=\"${javac.test.classpath}\" destdir=\"${build.test.classes.dir}\" srcdir=\"${test.src.dir}\"/>\n+    </target>\n+    <target depends=\"init,deps-jar,compile,-pre-pre-compile-test,-pre-compile-test,-compile-test-depend\" if=\"have.tests\" name=\"-do-compile-test\">\n+        <j2seproject3:javac apgeneratedsrcdir=\"${build.test.classes.dir}\" classpath=\"${javac.test.classpath}\" debug=\"true\" destdir=\"${build.test.classes.dir}\" processorpath=\"${javac.test.processorpath}\" srcdir=\"${test.src.dir}\"/>\n+        <copy todir=\"${build.test.classes.dir}\">\n+            <fileset dir=\"${test.src.dir}\" excludes=\"${build.classes.excludes},${excludes}\" includes=\"${includes}\"/>\n+        </copy>\n+    </target>\n+    <target name=\"-post-compile-test\">\n+        <!-- Empty placeholder for easier customization. -->\n+        <!-- You can override this target in the ../build.xml file. -->\n+    </target>\n+    <target depends=\"init,compile,-pre-pre-compile-test,-pre-compile-test,-do-compile-test,-post-compile-test\" name=\"compile-test\"/>\n+    <target name=\"-pre-compile-test-single\">\n+        <!-- Empty placeholder for easier customization. -->\n+        <!-- You can override this target in the ../build.xml file. -->\n+    </target>\n+    <target depends=\"init,deps-jar,compile,-pre-pre-compile-test,-pre-compile-test-single\" if=\"have.tests\" name=\"-do-compile-test-single\">\n+        <fail unless=\"javac.includes\">Must select some files in the IDE or set javac.includes</fail>\n+        <j2seproject3:force-recompile destdir=\"${build.test.classes.dir}\"/>\n+        <j2seproject3:javac apgeneratedsrcdir=\"${build.test.classes.dir}\" classpath=\"${javac.test.classpath}\" debug=\"true\" destdir=\"${build.test.classes.dir}\" excludes=\"\" includes=\"${javac.includes}\" processorpath=\"${javac.test.processorpath}\" sourcepath=\"${test.src.dir}\" srcdir=\"${test.src.dir}\"/>\n+        <copy todir=\"${build.test.classes.dir}\">\n+            <fileset dir=\"${test.src.dir}\" excludes=\"${build.classes.excludes},${excludes}\" includes=\"${includes}\"/>\n+        </copy>\n+    </target>\n+    <target name=\"-post-compile-test-single\">\n+        <!-- Empty placeholder for easier customization. -->\n+        <!-- You can override this target in the ../build.xml file. -->\n+    </target>\n+    <target depends=\"init,compile,-pre-pre-compile-test,-pre-compile-test-single,-do-compile-test-single,-post-compile-test-single\" name=\"compile-test-single\"/>\n+    <!--\n+                =======================\n+                TEST EXECUTION SECTION\n+                =======================\n+            -->\n+    <target depends=\"init\" if=\"have.tests\" name=\"-pre-test-run\">\n+        <mkdir dir=\"${build.test.results.dir}\"/>\n+    </target>\n+    <target depends=\"init,compile-test,-pre-test-run\" if=\"have.tests\" name=\"-do-test-run\">\n+        <j2seproject3:test includes=\"${includes}\" testincludes=\"**/*Test.java\"/>\n+    </target>\n+    <target depends=\"init,compile-test,-pre-test-run,-do-test-run\" if=\"have.tests\" name=\"-post-test-run\">\n+        <fail if=\"tests.failed\" unless=\"ignore.failing.tests\">Some tests failed; see details above.</fail>\n+    </target>\n+    <target depends=\"init\" if=\"have.tests\" name=\"test-report\"/>\n+    <target depends=\"init\" if=\"netbeans.home+have.tests\" name=\"-test-browse\"/>\n+    <target depends=\"init,compile-test,-pre-test-run,-do-test-run,test-report,-post-test-run,-test-browse\" description=\"Run unit tests.\" name=\"test\"/>\n+    <target depends=\"init\" if=\"have.tests\" name=\"-pre-test-run-single\">\n+        <mkdir dir=\"${build.test.results.dir}\"/>\n+    </target>\n+    <target depends=\"init,compile-test-single,-pre-test-run-single\" if=\"have.tests\" name=\"-do-test-run-single\">\n+        <fail unless=\"test.includes\">Must select some files in the IDE or set test.includes</fail>\n+        <j2seproject3:test excludes=\"\" includes=\"${test.includes}\" testincludes=\"${test.includes}\"/>\n+    </target>\n+    <target depends=\"init,compile-test-single,-pre-test-run-single,-do-test-run-single\" if=\"have.tests\" name=\"-post-test-run-single\">\n+        <fail if=\"tests.failed\" unless=\"ignore.failing.tests\">Some tests failed; see details above.</fail>\n+    </target>\n+    <target depends=\"init,compile-test-single,-pre-test-run-single,-do-test-run-single,-post-test-run-single\" description=\"Run single unit test.\" name=\"test-single\"/>\n+    <target depends=\"init,compile-test-single,-pre-test-run-single\" if=\"have.tests\" name=\"-do-test-run-single-method\">\n+        <fail unless=\"test.class\">Must select some files in the IDE or set test.class</fail>\n+        <fail unless=\"test.method\">Must select some method in the IDE or set test.method</fail>\n+        <j2seproject3:test excludes=\"\" includes=\"${javac.includes}\" testincludes=\"${test.class}\" testmethods=\"${test.method}\"/>\n+    </target>\n+    <target depends=\"init,compile-test-single,-pre-test-run-single,-do-test-run-single-method\" if=\"have.tests\" name=\"-post-test-run-single-method\">\n+        <fail if=\"tests.failed\" unless=\"ignore.failing.tests\">Some tests failed; see details above.</fail>\n+    </target>\n+    <target depends=\"init,compile-test-single,-pre-test-run-single,-do-test-run-single-method,-post-test-run-single-method\" description=\"Run single unit test.\" name=\"test-single-method\"/>\n+    <!--\n+                =======================\n+                TEST DEBUGGING SECTION\n+                =======================\n+            -->\n+    <target depends=\"init,compile-test-single,-pre-test-run-single\" if=\"have.tests\" name=\"-debug-start-debuggee-test\">\n+        <fail unless=\"test.class\">Must select one file in the IDE or set test.class</fail>\n+        <j2seproject3:test-debug excludes=\"\" includes=\"${javac.includes}\" testClass=\"${test.class}\" testincludes=\"${javac.includes}\"/>\n+    </target>\n+    <target depends=\"init,compile-test-single,-pre-test-run-single\" if=\"have.tests\" name=\"-debug-start-debuggee-test-method\">\n+        <fail unless=\"test.class\">Must select one file in the IDE or set test.class</fail>\n+        <fail unless=\"test.method\">Must select some method in the IDE or set test.method</fail>\n+        <j2seproject3:test-debug excludes=\"\" includes=\"${javac.includes}\" testClass=\"${test.class}\" testMethod=\"${test.method}\" testincludes=\"${test.class}\" testmethods=\"${test.method}\"/>\n+    </target>\n+    <target depends=\"init,compile-test\" if=\"netbeans.home+have.tests\" name=\"-debug-start-debugger-test\">\n+        <j2seproject1:nbjpdastart classpath=\"${debug.test.classpath}\" name=\"${test.class}\"/>\n+    </target>\n+    <target depends=\"init,compile-test-single,-debug-start-debugger-test,-debug-start-debuggee-test\" name=\"debug-test\"/>\n+    <target depends=\"init,compile-test-single,-debug-start-debugger-test,-debug-start-debuggee-test-method\" name=\"debug-test-method\"/>\n+    <target depends=\"init,-pre-debug-fix,compile-test-single\" if=\"netbeans.home\" name=\"-do-debug-fix-test\">\n+        <j2seproject1:nbjpdareload dir=\"${build.test.classes.dir}\"/>\n+    </target>\n+    <target depends=\"init,-pre-debug-fix,-do-debug-fix-test\" if=\"netbeans.home\" name=\"debug-fix-test\"/>\n+    <!--\n+                =========================\n+                APPLET EXECUTION SECTION\n+                =========================\n+            -->\n+    <target depends=\"init,compile-single\" name=\"run-applet\">\n+        <fail unless=\"applet.url\">Must select one file in the IDE or set applet.url</fail>\n+        <j2seproject1:java classname=\"sun.applet.AppletViewer\">\n+            <customize>\n+                <arg value=\"${applet.url}\"/>\n+            </customize>\n+        </j2seproject1:java>\n+    </target>\n+    <!--\n+                =========================\n+                APPLET DEBUGGING  SECTION\n+                =========================\n+            -->\n+    <target depends=\"init,compile-single\" if=\"netbeans.home\" name=\"-debug-start-debuggee-applet\">\n+        <fail unless=\"applet.url\">Must select one file in the IDE or set applet.url</fail>\n+        <j2seproject3:debug classname=\"sun.applet.AppletViewer\">\n+            <customize>\n+                <arg value=\"${applet.url}\"/>\n+            </customize>\n+        </j2seproject3:debug>\n+    </target>\n+    <target depends=\"init,compile-single,-debug-start-debugger,-debug-start-debuggee-applet\" if=\"netbeans.home\" name=\"debug-applet\"/>\n+    <!--\n+                ===============\n+                CLEANUP SECTION\n+                ===============\n+            -->\n+    <target name=\"-deps-clean-init\" unless=\"built-clean.properties\">\n+        <property location=\"${build.dir}/built-clean.properties\" name=\"built-clean.properties\"/>\n+        <delete file=\"${built-clean.properties}\" quiet=\"true\"/>\n+    </target>\n+    <target if=\"already.built.clean.${basedir}\" name=\"-warn-already-built-clean\">\n+        <echo level=\"warn\" message=\"Cycle detected: MapleCashDropFetcher was already built\"/>\n+    </target>\n+    <target depends=\"init,-deps-clean-init\" name=\"deps-clean\" unless=\"no.deps\">\n+        <mkdir dir=\"${build.dir}\"/>\n+        <touch file=\"${built-clean.properties}\" verbose=\"false\"/>\n+        <property file=\"${built-clean.properties}\" prefix=\"already.built.clean.\"/>\n+        <antcall target=\"-warn-already-built-clean\"/>\n+        <propertyfile file=\"${built-clean.properties}\">\n+            <entry key=\"${basedir}\" value=\"\"/>\n+        </propertyfile>\n+    </target>\n+    <target depends=\"init\" name=\"-do-clean\">\n+        <delete dir=\"${build.dir}\"/>\n+        <delete dir=\"${dist.dir}\" followsymlinks=\"false\" includeemptydirs=\"true\"/>\n+    </target>\n+    <target name=\"-post-clean\">\n+        <!-- Empty placeholder for easier customization. -->\n+        <!-- You can override this target in the ../build.xml file. -->\n+    </target>\n+    <target depends=\"init,deps-clean,-do-clean,-post-clean\" description=\"Clean build products.\" name=\"clean\"/>\n+    <target name=\"-check-call-dep\">\n+        <property file=\"${call.built.properties}\" prefix=\"already.built.\"/>\n+        <condition property=\"should.call.dep\">\n+            <and>\n+                <not>\n+                    <isset property=\"already.built.${call.subproject}\"/>\n+                </not>\n+                <available file=\"${call.script}\"/>\n+            </and>\n+        </condition>\n+    </target>\n+    <target depends=\"-check-call-dep\" if=\"should.call.dep\" name=\"-maybe-call-dep\">\n+        <ant antfile=\"${call.script}\" inheritall=\"false\" target=\"${call.target}\">\n+            <propertyset>\n+                <propertyref prefix=\"transfer.\"/>\n+                <mapper from=\"transfer.*\" to=\"*\" type=\"glob\"/>\n+            </propertyset>\n+        </ant>\n+    </target>\n+</project>"}, {"sha": "f63836edd2c8a809742bb13a8ebb0d382ed3a70e", "filename": "tools/MapleCashDropFetcher/nbproject/genfiles.properties", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/tools/MapleCashDropFetcher/nbproject/genfiles.properties", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/tools/MapleCashDropFetcher/nbproject/genfiles.properties", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/tools/MapleCashDropFetcher/nbproject/genfiles.properties?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -0,0 +1,8 @@\n+build.xml.data.CRC32=928d5bb0\n+build.xml.script.CRC32=27a7b03c\n+build.xml.stylesheet.CRC32=8064a381@1.75.2.48\n+# This file is used by a NetBeans-based IDE to track changes in generated files such as build-impl.xml.\n+# Do not edit this file. You may delete it but then the IDE will never regenerate such files for you.\n+nbproject/build-impl.xml.data.CRC32=928d5bb0\n+nbproject/build-impl.xml.script.CRC32=34e6e8ba\n+nbproject/build-impl.xml.stylesheet.CRC32=876e7a8f@1.75.2.48"}, {"sha": "a6bd84f5daeabb38a924479aa0c7fcf096fa9f65", "filename": "tools/MapleCashDropFetcher/nbproject/project.properties", "status": "added", "additions": 77, "deletions": 0, "changes": 77, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/tools/MapleCashDropFetcher/nbproject/project.properties", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/tools/MapleCashDropFetcher/nbproject/project.properties", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/tools/MapleCashDropFetcher/nbproject/project.properties?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -0,0 +1,77 @@\n+annotation.processing.enabled=true\n+annotation.processing.enabled.in.editor=false\n+annotation.processing.processors.list=\n+annotation.processing.run.all.processors=true\n+annotation.processing.source.output=${build.generated.sources.dir}/ap-source-output\n+application.title=MapleCashDropFetcher\n+application.vendor=USER\n+build.classes.dir=${build.dir}/classes\n+build.classes.excludes=**/*.java,**/*.form\n+# This directory is removed when the project is cleaned:\n+build.dir=build\n+build.generated.dir=${build.dir}/generated\n+build.generated.sources.dir=${build.dir}/generated-sources\n+# Only compile against the classpath explicitly listed here:\n+build.sysclasspath=ignore\n+build.test.classes.dir=${build.dir}/test/classes\n+build.test.results.dir=${build.dir}/test/results\n+# Uncomment to specify the preferred debugger connection transport:\n+#debug.transport=dt_socket\n+debug.classpath=\\\n+    ${run.classpath}\n+debug.test.classpath=\\\n+    ${run.test.classpath}\n+# Os arquivos em build.classes.dir que devem ser exclu\\u00eddos do jar de distribui\\u00e7\\u00e3o\n+dist.archive.excludes=\n+# This directory is removed when the project is cleaned:\n+dist.dir=dist\n+dist.jar=${dist.dir}/MapleCashDropFetcher.jar\n+dist.javadoc.dir=${dist.dir}/javadoc\n+endorsed.classpath=\n+excludes=\n+file.reference.mysql-connector-java-bin.jar=../../cores/mysql-connector-java-bin.jar\n+includes=**\n+jar.compress=false\n+javac.classpath=\\\n+    ${file.reference.mysql-connector-java-bin.jar}\n+# Space-separated list of extra javac options\n+javac.compilerargs=\n+javac.deprecation=false\n+javac.processorpath=\\\n+    ${javac.classpath}\n+javac.source=1.7\n+javac.target=1.7\n+javac.test.classpath=\\\n+    ${javac.classpath}:\\\n+    ${build.classes.dir}\n+javac.test.processorpath=\\\n+    ${javac.test.classpath}\n+javadoc.additionalparam=\n+javadoc.author=false\n+javadoc.encoding=${source.encoding}\n+javadoc.noindex=false\n+javadoc.nonavbar=false\n+javadoc.notree=false\n+javadoc.private=false\n+javadoc.splitindex=true\n+javadoc.use=true\n+javadoc.version=false\n+javadoc.windowtitle=\n+main.class=maplecashdropfetcher.MapleCashDropFetcher\n+manifest.file=manifest.mf\n+meta.inf.dir=${src.dir}/META-INF\n+mkdist.disabled=false\n+platform.active=JDK_1.7\n+run.classpath=\\\n+    ${javac.classpath}:\\\n+    ${build.classes.dir}\n+# Space-separated list of JVM arguments used when running the project.\n+# You may also define separate properties like run-sys-prop.name=value instead of -Dname=value.\n+# To set system properties for unit tests define test-sys-prop.name=value:\n+run.jvmargs=\n+run.test.classpath=\\\n+    ${javac.test.classpath}:\\\n+    ${build.test.classes.dir}\n+source.encoding=UTF-8\n+src.dir=src\n+test.src.dir=test"}, {"sha": "ea33fc5939bcd5762f4a471684e400e23ef84578", "filename": "tools/MapleCashDropFetcher/nbproject/project.xml", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/tools/MapleCashDropFetcher/nbproject/project.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/tools/MapleCashDropFetcher/nbproject/project.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/tools/MapleCashDropFetcher/nbproject/project.xml?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -0,0 +1,16 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://www.netbeans.org/ns/project/1\">\n+    <type>org.netbeans.modules.java.j2seproject</type>\n+    <configuration>\n+        <data xmlns=\"http://www.netbeans.org/ns/j2se-project/3\">\n+            <name>MapleCashDropFetcher</name>\n+            <explicit-platform explicit-source-supported=\"true\"/>\n+            <source-roots>\n+                <root id=\"src.dir\"/>\n+            </source-roots>\n+            <test-roots>\n+                <root id=\"test.src.dir\"/>\n+            </test-roots>\n+        </data>\n+    </configuration>\n+</project>"}, {"sha": "3c9509f89de62ed38b37da53653e707663b9135b", "filename": "tools/MapleCashDropFetcher/src/maplecashdropfetcher/MapleCashDropFetcher.java", "status": "added", "additions": 406, "deletions": 0, "changes": 406, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/tools/MapleCashDropFetcher/src/maplecashdropfetcher/MapleCashDropFetcher.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/tools/MapleCashDropFetcher/src/maplecashdropfetcher/MapleCashDropFetcher.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/tools/MapleCashDropFetcher/src/maplecashdropfetcher/MapleCashDropFetcher.java?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -0,0 +1,406 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+package maplecashdropfetcher;\n+\n+import java.io.BufferedReader;\n+import java.io.FileInputStream;\n+import java.io.InputStreamReader;\n+import java.io.PrintWriter;\n+import java.sql.Connection;\n+import java.sql.DriverManager;\n+import java.sql.PreparedStatement;\n+import java.sql.ResultSet;\n+import java.sql.SQLException;\n+import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.List;\n+import java.util.HashSet;\n+import java.util.Set;\n+\n+import java.io.File;\n+\n+import tools.Pair;\n+\n+/**\n+ *\n+ * @author RonanLana\n+ \n+ This application gets info from the WZ.XML files regarding cash itemids then searches the drop data on the DB\n+ after any NX (cash item) drops and reports them.\n+ \n+ Estimated parse time: 2 minutes\n+ */\n+public class MapleCashDropFetcher {\n+    static String host = \"jdbc:mysql://localhost:3306/heavenms\";\n+    static String driver = \"com.mysql.jdbc.Driver\";\n+    static String username = \"root\";\n+    static String password = \"\";\n+\n+    static String wzPath = \"../../wz\";\n+    \n+    static String directoryName = \"../..\";\n+    static String newFile = \"lib/CashDropReport.txt\";\n+\n+    static Connection con = null;\n+    static PrintWriter printWriter = null;\n+    static InputStreamReader fileReader = null;\n+    static BufferedReader bufferedReader = null;\n+    \n+    static int initialLength = 200;\n+    static int initialStringLength = 50;\n+    static int itemFileNameSize = 13;\n+    \n+    static Set<Integer> nxItems = new HashSet<>();\n+    static Set<Integer> nxDrops = new HashSet<>();\n+    \n+    static byte status = 0;\n+    static int currentItemid = 0;\n+\n+    private static String getName(String token) {\n+        int i, j;\n+        char[] dest;\n+        String d;\n+        \n+        i = token.lastIndexOf(\"name\");\n+        i = token.indexOf(\"\\\"\", i) + 1; //lower bound of the string\n+        j = token.indexOf(\"\\\"\", i);     //upper bound\n+\n+        if(j < i) return \"0\";           //node value containing 'name' in it's scope, cheap fix since we don't deal with strings anyway\n+        \n+        dest = new char[initialStringLength];\n+        token.getChars(i, j, dest, 0);\n+\n+        d = new String(dest);\n+        return(d.trim());\n+    }\n+    \n+    private static String getValue(String token) {\n+        int i, j;\n+        char[] dest;\n+        String d;\n+\n+        i = token.lastIndexOf(\"value\");\n+        i = token.indexOf(\"\\\"\", i) + 1; //lower bound of the string\n+        j = token.indexOf(\"\\\"\", i);     //upper bound\n+\n+        dest = new char[initialStringLength];\n+        token.getChars(i, j, dest, 0);\n+\n+        d = new String(dest);\n+        return(d.trim());\n+    }\n+    \n+    private static void forwardCursor(int st) {\n+        String line = null;\n+\n+        try {\n+            while(status >= st && (line = bufferedReader.readLine()) != null) {\n+                simpleToken(line);\n+            }\n+        }\n+        catch(Exception e) {\n+            e.printStackTrace();\n+        }\n+    }\n+    \n+    private static void simpleToken(String token) {\n+        if(token.contains(\"/imgdir\")) {\n+            status -= 1;\n+        }\n+        else if(token.contains(\"imgdir\")) {\n+            status += 1;\n+        }\n+    }\n+    \n+    \n+    private static void inspectEquipWzEntry() {\n+        String line = null;\n+\n+        try {\n+            while((line = bufferedReader.readLine()) != null) {\n+                translateEquipToken(line);\n+            }\n+        }\n+        catch(Exception e) {\n+            e.printStackTrace();\n+        }\n+    }\n+    \n+    private static void translateEquipToken(String token) {\n+        if(token.contains(\"/imgdir\")) {\n+            status -= 1;\n+        }\n+        else if(token.contains(\"imgdir\")) {\n+            if(status == 1) {\n+                if(!getName(token).equals(\"info\")) {\n+                    forwardCursor(status);\n+                }\n+            }\n+            \n+            status += 1;\n+        }\n+        else {\n+            if(status == 2) {\n+                String d = getName(token);\n+            \n+                if(d.equals(\"cash\")) {\n+                    if(!getValue(token).equals(\"0\")) {\n+                        nxItems.add(currentItemid);\n+                    }\n+                    \n+                    forwardCursor(status);\n+                }\n+            }\n+        }\n+    }\n+    \n+    private static void inspectItemWzEntry() {\n+        String line = null;\n+\n+        try {\n+            while((line = bufferedReader.readLine()) != null) {\n+                translateItemToken(line);\n+            }\n+        }\n+        catch(Exception e) {\n+            e.printStackTrace();\n+        }\n+    }\n+    \n+    private static void translateItemToken(String token) {\n+        if(token.contains(\"/imgdir\")) {\n+            status -= 1;\n+        }\n+        else if(token.contains(\"imgdir\")) {\n+            if(status == 1) {\n+                currentItemid = Integer.valueOf(getName(token));\n+            }\n+            else if(status == 2) {\n+                if(!getName(token).equals(\"info\")) {\n+                    forwardCursor(status);\n+                }\n+            }\n+            \n+            status += 1;\n+        }\n+        else {\n+            if(status == 3) {\n+                String d = getName(token);\n+            \n+                if(d.equals(\"cash\")) {\n+                    if(!getValue(token).equals(\"0\")) {\n+                        nxItems.add(currentItemid);\n+                    }\n+                    \n+                    forwardCursor(status);\n+                }\n+            }\n+        }\n+    }\n+\n+    private static void printReportFileHeader() {\n+        printWriter.println(\" # Report File autogenerated from the MapleCashDropFetcher feature by Ronan Lana.\");\n+        printWriter.println(\" # Generated data takes into account several data info from the underlying DB and the server-side WZ.xmls.\");\n+        printWriter.println();\n+    }\n+    \n+    private static void listFiles(String directoryName, ArrayList<File> files) {\n+        File directory = new File(directoryName);\n+\n+        // get all the files from a directory\n+        File[] fList = directory.listFiles();\n+        for (File file : fList) {\n+            if (file.isFile()) {\n+                files.add(file);\n+            } else if (file.isDirectory()) {\n+                listFiles(file.getAbsolutePath(), files);\n+            }\n+        }\n+    }\n+    \n+    private static int getItemIdFromFilename(String name) {\n+        try {\n+            return Integer.valueOf(name.substring(0, name.indexOf('.')));\n+        } catch(Exception e) {\n+            return -1;\n+        }\n+    }\n+    \n+    private static String getDropTableName(boolean dropdata) {\n+        return (dropdata ? \"drop_data\" : \"reactordrops\");\n+    }\n+    \n+    private static String getDropElementName(boolean dropdata) {\n+        return (dropdata ? \"dropperid\" : \"reactorid\");\n+    }\n+    \n+    private static void filterNxDropsOnDB(boolean dropdata) throws SQLException {\n+        nxDrops.clear();\n+        \n+        PreparedStatement ps = con.prepareStatement(\"SELECT DISTINCT itemid FROM \" + getDropTableName(dropdata));\n+        ResultSet rs = ps.executeQuery();\n+        \n+        while(rs.next()) {\n+            int itemid = rs.getInt(\"itemid\");\n+            \n+            if(nxItems.contains(itemid)) {\n+                nxDrops.add(itemid);\n+            }\n+        }\n+        \n+        rs.close();\n+        ps.close();\n+    }\n+    \n+    private static List<Pair<Integer, Integer>> getNxDropsEntries(boolean dropdata) throws SQLException {\n+        List<Pair<Integer, Integer>> entries = new ArrayList<>();\n+        \n+        List<Integer> sortedNxDrops = new ArrayList<>(nxDrops);\n+        Collections.sort(sortedNxDrops);\n+        \n+        for(Integer nx : sortedNxDrops) {\n+            PreparedStatement ps = con.prepareStatement(\"SELECT \" + getDropElementName(dropdata) + \" FROM \" + getDropTableName(dropdata) + \" WHERE itemid = ?\");\n+            ps.setInt(1, nx);\n+            \n+            ResultSet rs = ps.executeQuery();\n+            while(rs.next()) {\n+                entries.add(new Pair<>(nx, rs.getInt(getDropElementName(dropdata))));\n+            }\n+            \n+            rs.close();\n+            ps.close();\n+        }\n+        \n+        return entries;\n+    }\n+    \n+    private static void reportNxDropResults(boolean dropdata) throws SQLException {\n+        filterNxDropsOnDB(dropdata);\n+        \n+        if(!nxDrops.isEmpty()) {\n+            List<Pair<Integer, Integer>> nxEntries = getNxDropsEntries(dropdata);\n+\n+            printWriter.println(\"NX DROPS ON \" + getDropTableName(dropdata));\n+            for(Pair<Integer, Integer> nx : nxEntries) {\n+                printWriter.println(nx.left + \" : \" + nx.right);\n+            }\n+            printWriter.println(\"\\n\\n\\n\");\n+        }\n+    }\n+    \n+    private static void ReportNxDropData() {\n+        try {\n+            Class.forName(driver).newInstance();\n+            \n+            System.out.println(\"Reading Character.wz ...\");\n+            ArrayList<File> files = new ArrayList<>();\n+            listFiles(wzPath + \"/Character.wz\", files);\n+            \n+            for(File f : files) {\n+                //System.out.println(\"Parsing \" + f.getAbsolutePath());\n+                int itemid = getItemIdFromFilename(f.getName());\n+                if(itemid < 0) {\n+                    continue;\n+                }\n+                \n+                fileReader = new InputStreamReader(new FileInputStream(f), \"UTF-8\");\n+                bufferedReader = new BufferedReader(fileReader);\n+\n+                currentItemid = itemid;\n+                inspectEquipWzEntry();\n+\n+                bufferedReader.close();\n+                fileReader.close();\n+            }\n+            \n+            System.out.println(\"Reading Item.wz ...\");\n+            files = new ArrayList<>();\n+            listFiles(wzPath + \"/Item.wz\", files);\n+            \n+            for(File f : files) {\n+                //System.out.println(\"Parsing \" + f.getAbsolutePath());\n+                fileReader = new InputStreamReader(new FileInputStream(f), \"UTF-8\");\n+                bufferedReader = new BufferedReader(fileReader);\n+\n+                if(f.getName().length() <= itemFileNameSize) {\n+                    inspectItemWzEntry();\n+                } else {    // pet file structure is similar to equips, maybe there are other item-types following this behaviour?\n+                    int itemid = getItemIdFromFilename(f.getName());\n+                    if(itemid < 0) {\n+                        continue;\n+                    }\n+                    \n+                    currentItemid = itemid;\n+                    inspectEquipWzEntry();\n+                }\n+\n+                bufferedReader.close();\n+                fileReader.close();\n+            }\n+            \n+            System.out.println(\"Reporting results...\");\n+            \n+            // filter drop data on DB\n+            con = DriverManager.getConnection(host, username, password);\n+            \n+            // report suspects of missing quest drop data, as well as those drop data that may have incorrect questids.\n+            printWriter = new PrintWriter(newFile, \"UTF-8\");\n+            printReportFileHeader();\n+            \n+            reportNxDropResults(true);\n+            reportNxDropResults(false);\n+            \n+            /*\n+            printWriter.println(\"NX LIST\");     // list of all cash items found\n+            for(Integer nx : nxItems) {\n+                printWriter.println(nx);\n+            }\n+            */\n+            \n+            con.close();\n+            printWriter.close();\n+            System.out.println(\"Done!\");\n+        }\n+\n+        catch(SQLException e) {\n+            System.out.println(\"Warning: Could not establish connection to database to report quest data.\");\n+            System.out.println(e.getMessage());\n+        }\n+\n+        catch(ClassNotFoundException e) {\n+            System.out.println(\"Error: could not find class\");\n+            System.out.println(e.getMessage());\n+        }\n+\n+        catch(InstantiationException e) {\n+            System.out.println(\"Error: instantiation failure\");\n+            System.out.println(e.getMessage());\n+        }\n+\n+        catch(Exception e) {\n+            e.printStackTrace();\n+        }\n+    }\n+    \n+    public static void main(String[] args) {\n+        ReportNxDropData();\n+    }\n+    \n+}"}, {"sha": "9dcd4e654526bf10315acc9d9b52b1fbfa47b0e6", "filename": "tools/MapleCashDropFetcher/src/tools/DatabaseConnection.java", "status": "added", "additions": 51, "deletions": 0, "changes": 51, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/tools/MapleCashDropFetcher/src/tools/DatabaseConnection.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/tools/MapleCashDropFetcher/src/tools/DatabaseConnection.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/tools/MapleCashDropFetcher/src/tools/DatabaseConnection.java?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -0,0 +1,51 @@\n+package tools;\n+\n+import java.sql.Connection;\n+import java.sql.DriverManager;\n+import java.sql.SQLException;\n+\n+/**\n+ * @author Frz (Big Daddy)\n+ * @author The Real Spookster (some modifications to this beautiful code)\n+ */\n+public class DatabaseConnection {\n+    private static String DB_URL = \"jdbc:mysql://localhost:3306/heavenms\";\n+    private static String DB_USER = \"root\";\n+    private static String DB_PASS = \"\";\n+    \n+    public static final int RETURN_GENERATED_KEYS = 1;\n+\n+    private static ThreadLocal<Connection> con = new ThreadLocalConnection();\n+\n+    public static Connection getConnection() {\n+        Connection c = con.get();\n+        try {\n+            c.getMetaData();\n+        } catch (SQLException e) { // connection is dead, therefore discard old object 5ever\n+            con.remove();\n+            c = con.get();\n+        }\n+        return c;\n+    }\n+\n+    private static class ThreadLocalConnection extends ThreadLocal<Connection> {\n+\n+        @Override\n+        protected Connection initialValue() {\n+            try {\n+                Class.forName(\"com.mysql.jdbc.Driver\"); // touch the mysql driver\n+            } catch (ClassNotFoundException e) {\n+                System.out.println(\"[SEVERE] SQL Driver Not Found. Consider death by clams.\");\n+                e.printStackTrace();\n+                return null;\n+            }\n+            try {\n+                return DriverManager.getConnection(DB_URL, DB_USER, DB_PASS);\n+            } catch (SQLException e) {\n+                System.out.println(\"[SEVERE] Unable to make database connection.\");\n+                e.printStackTrace();\n+                return null;\n+            }\n+        }\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "f88718cbe3e8471b9ccca9461e4978c346b1c43c", "filename": "tools/MapleCashDropFetcher/src/tools/Pair.java", "status": "added", "additions": 121, "deletions": 0, "changes": 121, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/tools/MapleCashDropFetcher/src/tools/Pair.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/tools/MapleCashDropFetcher/src/tools/Pair.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/tools/MapleCashDropFetcher/src/tools/Pair.java?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -0,0 +1,121 @@\n+/*\n+This file is part of the OdinMS Maple Story Server\n+Copyright (C) 2008 ~ 2010 Patrick Huy <patrick.huy@frz.cc> \n+Matthias Butz <matze@odinms.de>\n+Jan Christian Meyer <vimes@odinms.de>\n+\n+This program is free software: you can redistribute it and/or modify\n+it under the terms of the GNU Affero General Public License version 3\n+as published by the Free Software Foundation. You may not use, modify\n+or distribute this program under any other version of the\n+GNU Affero General Public License.\n+\n+This program is distributed in the hope that it will be useful,\n+but WITHOUT ANY WARRANTY; without even the implied warranty of\n+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+GNU Affero General Public License for more details.\n+\n+You should have received a copy of the GNU Affero General Public License\n+along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+package tools;\n+\n+/**\n+ * Represents a pair of values.\n+ * \n+ * @author Frz\n+ * @since Revision 333\n+ * @version 1.0\n+ * \n+ * @param <E> The type of the left value.\n+ * @param <F> The type of the right value.\n+ */\n+public class Pair<E, F> {\n+\n+    public E left;\n+    public F right;\n+\n+    /**\n+     * Class constructor - pairs two objects together.\n+     *\n+     * @param left The left object.\n+     * @param right The right object.\n+     */\n+    public Pair(E left, F right) {\n+        this.left = left;\n+        this.right = right;\n+    }\n+\n+    /**\n+     * Gets the left value.\n+     *\n+     * @return The left value.\n+     */\n+    public E getLeft() {\n+        return left;\n+    }\n+\n+    /**\n+     * Gets the right value.\n+     *\n+     * @return The right value.\n+     */\n+    public F getRight() {\n+        return right;\n+    }\n+\n+    /**\n+     * Turns the pair into a string.\n+     *\n+     * @return Each value of the pair as a string joined by a colon.\n+     */\n+    @Override\n+    public String toString() {\n+        return left.toString() + \":\" + right.toString();\n+    }\n+\n+    /**\n+     * Gets the hash code of this pair.\n+     */\n+    @Override\n+    public int hashCode() {\n+        final int prime = 31;\n+        int result = 1;\n+        result = prime * result + ((left == null) ? 0 : left.hashCode());\n+        result = prime * result + ((right == null) ? 0 : right.hashCode());\n+        return result;\n+    }\n+\n+    /**\n+     * Checks to see if two pairs are equal.\n+     */\n+    @SuppressWarnings(\"unchecked\")\n+    @Override\n+    public boolean equals(Object obj) {\n+        if (this == obj) {\n+            return true;\n+        }\n+        if (obj == null) {\n+            return false;\n+        }\n+        if (getClass() != obj.getClass()) {\n+            return false;\n+        }\n+        final Pair other = (Pair) obj;\n+        if (left == null) {\n+            if (other.left != null) {\n+                return false;\n+            }\n+        } else if (!left.equals(other.left)) {\n+            return false;\n+        }\n+        if (right == null) {\n+            if (other.right != null) {\n+                return false;\n+            }\n+        } else if (!right.equals(other.right)) {\n+            return false;\n+        }\n+        return true;\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "6807a2ba1902a255b464065dd83188d73fbe6d01", "filename": "tools/MapleMesoFetcher/nbproject/private/private.xml", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/tools/MapleMesoFetcher/nbproject/private/private.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/tools/MapleMesoFetcher/nbproject/private/private.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/tools/MapleMesoFetcher/nbproject/private/private.xml?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -2,8 +2,6 @@\n <project-private xmlns=\"http://www.netbeans.org/ns/project-private/1\">\n     <editor-bookmarks xmlns=\"http://www.netbeans.org/ns/editor-bookmarks/2\" lastBookmarkId=\"0\"/>\n     <open-files xmlns=\"http://www.netbeans.org/ns/projectui-open-files/2\">\n-        <group>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/tools/MapleMesoFetcher/src/maplemesofetcher/MapleMesoFetcher.java</file>\n-        </group>\n+        <group/>\n     </open-files>\n </project-private>"}, {"sha": "a81e6a6878f94b4cf9775f3968ea6efa8a4de691", "filename": "tools/MapleQuestItemFetcher/dist/MapleQuestItemFetcher.jar", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/tools/MapleQuestItemFetcher/dist/MapleQuestItemFetcher.jar", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/tools/MapleQuestItemFetcher/dist/MapleQuestItemFetcher.jar", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/tools/MapleQuestItemFetcher/dist/MapleQuestItemFetcher.jar?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24"}, {"sha": "0d20e38d85e210e859cf55ce3eb43ac7995e160c", "filename": "tools/MapleQuestItemFetcher/lib/QuestReport.txt", "status": "modified", "additions": 150, "deletions": 303, "changes": 453, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/tools/MapleQuestItemFetcher/lib/QuestReport.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/tools/MapleQuestItemFetcher/lib/QuestReport.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/tools/MapleQuestItemFetcher/lib/QuestReport.txt?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -2,33 +2,28 @@\n  # Generated data takes into account several data info from the underlying DB and the server-side WZ.xmls.\n \n INCORRECT QUESTIDS ON DB\n-4001342 : 7777 -> 28175\n+2022055 : -1 -> 9330 EXPIRED\n+2022056 : -1 -> 9330 EXPIRED\n+4001352 : 28205 -> 28206\n+4001366 : 28194 -> 28195\n 4001367 : 28257 -> 28262\n 4001368 : 28258 -> 28262\n 4001369 : 28259 -> 28262\n 4001370 : 28260 -> 28262\n 4001371 : 28261 -> 28262\n+4001372 : 28344 -> 28282\n+4031107 : -1 -> 3409\n+4031116 : -1 -> 3419\n 4031130 : 0 -> 3238\n 4031164 : 0 -> 2084\n-4031171 : 0 -> 7101\n-4031172 : 7103 -> 7106\n 4031189 : 0 -> 3448\n 4031218 : 0 -> 3071\n 4031223 : 3607 -> 3608\n-4031343 : 6904 -> 6905\n-4031344 : 6904 -> 6905\n-4031405 : 0 -> 4207\n+4031405 : 0 -> 4207 EXPIRED\n 4031511 : 6904 -> 6914\n-4031512 : 6914 -> 6915\n-4031514 : 6924 -> 6925\n-4031515 : 6924 -> 6925\n-4031517 : 6934 -> 6935\n-4031518 : 6934 -> 6935\n 4031856 : 0 -> 2191\n 4031857 : 0 -> 2192\n-4031860 : 6944 -> 6945\n-4031861 : 6944 -> 6945\n-4031871 : 6350 -> 28344\n+4032319 : -1 -> 21723\n 4032324 : 21736 -> 21737\n 4032339 : 0 -> 21303\n \n@@ -38,371 +33,223 @@ INCORRECT QUESTIDS ON DB\n \n \n ITEMS WITH NO QUEST DROP DATA ON DB\n-1002436 - 2075\n-1102057 - 7103\n-1102061 - 3066\n 1302014 - 2048\n-2022053 - 9330\n-2022054 - 9330\n-2022055 - 9330\n-2022056 - 9330\n-2022057 - 9332\n-2022281 - 8569\n-2100016 - 3223\n-2100017 - 3419\n-2100018 - 3236\n-2100019 - 3238\n-3994139 - 10360\n-4001118 - 3814\n-4001340 - 28167\n-4001347 - 28229\n-4001348 - 28231\n-4001349 - 28235\n-4001350 - 28235\n-4001351 - 28237\n-4001352 - 28206\n+2022053 - 9330 EXPIRED\n+2022054 - 9330 EXPIRED\n+2022057 - 9332 EXPIRED\n+3994139 - 10360 EXPIRED\n+4000142 - 1018\n 4001353 - 28227\n-4001366 - 28195\n 4031014 - 2020\n-4031015 - 2022\n-4031019 - 9411\n+4031015 - 2020\n 4031020 - 2050\n+4031025 - 2052\n+4031026 - 2053\n+4031028 - 2054\n 4031032 - 2051\n 4031039 - 2055\n 4031040 - 2056\n 4031041 - 2057\n 4031042 - 2035\n-4031063 - 9260\n+4031063 - 9260 EXPIRED\n 4031064 - 8012\n-4031107 - 3409\n-4031116 - 3419\n 4031117 - 3421\n-4031122 - 9340\n-4031124 - 9340\n-4031134 - 3443\n-4031136 - 3439\n-4031141 - 3407\n-4031142 - 3407\n-4031143 - 3407\n+4031122 - 9340 EXPIRED\n+4031124 - 9340 EXPIRED\n 4031144 - 2047\n-4031150 - 2067\n-4031157 - 2074\n-4031158 - 2074\n-4031165 - 2086\n-4031167 - 9052\n-4031168 - 9055\n-4031169 - 9058\n+4031167 - 9052 EXPIRED\n+4031168 - 9055 EXPIRED\n+4031169 - 9058 EXPIRED\n 4031180 - 8020\n-4031181 - 9140\n-4031182 - 9140\n-4031183 - 9140\n-4031184 - 9150\n-4031185 - 9150\n-4031186 - 9150\n-4031190 - 3054\n+4031181 - 9140 EXPIRED\n+4031182 - 9140 EXPIRED\n+4031183 - 9140 EXPIRED\n+4031184 - 9150 EXPIRED\n+4031185 - 9150 EXPIRED\n+4031186 - 9150 EXPIRED\n+4031190 - 3055\n 4031191 - 3063\n-4031192 - 8700\n-4031198 - 3043\n-4031199 - 3046\n-4031200 - 3069\n+4031192 - 8700 EXPIRED\n+4031199 - 3045\n 4031201 - 3048\n 4031202 - 3050\n 4031207 - 3443\n-4031220 - 9210\n-4031225 - 3606\n-4031226 - 9321\n+4031220 - 9210 EXPIRED\n+4031226 - 9321 EXPIRED\n 4031227 - 4103 EXPIRED\n 4031230 - 3619\n-4031231 - 3620\n-4031235 - 3607\n+4031235 - 3615\n 4031236 - 3616\n-4031237 - 3605\n-4031238 - 3611\n+4031237 - 3617\n+4031238 - 3618\n 4031243 - 3443\n-4031257 - 9350\n-4031258 - 9351\n-4031270 - 3629\n-4031271 - 9351\n-4031272 - 9352\n-4031274 - 3083\n-4031275 - 3083\n-4031276 - 3083\n-4031277 - 3083\n-4031278 - 3083\n-4031280 - 3632\n-4031290 - 4106\n-4031291 - 4006\n-4031292 - 4009\n-4031293 - 4010\n-4031296 - 4010\n-4031297 - 9386\n-4031298 - 3636\n-4031301 - 9391\n-4031302 - 9503\n-4031303 - 4008\n-4031304 - 9392\n-4031321 - 9504\n-4031352 - 4005\n-4031354 - 4013\n-4031388 - 4218\n-4031418 - 8823\n-4031419 - 8823\n-4031420 - 8823\n-4031421 - 8823\n-4031425 - 8822\n+4031257 - 9350 EXPIRED\n+4031270 - 3630\n+4031271 - 9351 EXPIRED\n+4031272 - 9352 EXPIRED\n+4031280 - 3633\n+4031290 - 4104 EXPIRED\n+4031291 - 4006 EXPIRED\n+4031292 - 4006 EXPIRED\n+4031293 - 4006 EXPIRED\n+4031296 - 4010 EXPIRED\n+4031297 - 9386 EXPIRED\n+4031298 - 3639\n+4031301 - 9391 EXPIRED\n+4031302 - 9503 EXPIRED\n+4031303 - 4007 EXPIRED\n+4031304 - 9392 EXPIRED\n+4031321 - 9504 EXPIRED\n+4031352 - 4005 EXPIRED\n+4031354 - 4013 EXPIRED\n+4031388 - 4218 EXPIRED\n+4031418 - 8823 EXPIRED\n+4031419 - 8823 EXPIRED\n+4031420 - 8823 EXPIRED\n+4031421 - 8823 EXPIRED\n 4031448 - 6134\n-4031450 - 6263\n-4031452 - 6201\n-4031454 - 6281\n 4031455 - 6280\n 4031456 - 6230\n 4031462 - 6210\n 4031468 - 6222\n-4031471 - 6153\n 4031478 - 6210\n 4031488 - 6312\n-4031495 - 6192\n-4031504 - 9640\n-4031505 - 9641\n-4031506 - 9642\n-4031507 - 6002\n-4031508 - 6002\n+4031504 - 9640 EXPIRED\n+4031505 - 9641 EXPIRED\n+4031506 - 9642 EXPIRED\n 4031554 - 3821\n-4031557 - 9710\n-4031558 - 9711\n-4031559 - 9712\n-4031560 - 9713\n-4031561 - 9714\n-4031563 - 8850\n-4031564 - 8851\n-4031565 - 8852\n-4031566 - 8853\n-4031567 - 8854\n-4031568 - 3911\n-4031570 - 3939\n-4031571 - 3941\n-4031574 - 3935\n+4031557 - 9710 EXPIRED\n+4031558 - 9711 EXPIRED\n+4031559 - 9712 EXPIRED\n+4031560 - 9713 EXPIRED\n+4031561 - 9714 EXPIRED\n+4031563 - 8855\n+4031564 - 8856\n+4031565 - 8857\n+4031566 - 8858\n+4031567 - 8859\n+4031570 - 3938\n+4031571 - 3940\n 4031578 - 3923\n-4031581 - 3937\n-4031582 - 3901\n-4031584 - 9731\n-4031585 - 9732\n-4031586 - 9740\n-4031587 - 9741\n-4031588 - 9742\n-4031590 - 8881\n-4031608 - 9803\n-4031611 - 9804\n-4031612 - 9805\n+4031582 - 3949\n+4031584 - 9731 EXPIRED\n+4031585 - 9732 EXPIRED\n+4031586 - 9740 EXPIRED\n+4031587 - 9741 EXPIRED\n+4031588 - 9742 EXPIRED\n+4031590 - 8881 EXPIRED\n+4031608 - 9803 EXPIRED\n+4031611 - 9804 EXPIRED\n+4031612 - 9805 EXPIRED\n 4031625 - 9820\n-4031661 - 9861\n-4031662 - 9866\n-4031667 - 9863\n-4031683 - 1115\n-4031684 - 1116\n-4031685 - 1117\n-4031686 - 1118\n-4031687 - 1119\n-4031688 - 1120\n-4031689 - 1121\n-4031690 - 1122\n-4031691 - 1123\n-4031692 - 1124\n-4031695 - 3335\n+4031661 - 9861 EXPIRED\n+4031662 - 9866 EXPIRED\n+4031667 - 9863 EXPIRED\n 4031696 - 3334\n 4031697 - 3322\n-4031703 - 3302\n 4031708 - 3309\n-4031709 - 3310\n-4031737 - 3343\n-4031764 - 4949\n-4031766 - 4959\n-4031767 - 4947\n-4031768 - 4953\n-4031769 - 4946\n-4031770 - 4946\n-4031771 - 4944\n+4031764 - 4949 EXPIRED\n+4031766 - 4959 EXPIRED\n+4031767 - 4947 EXPIRED\n+4031769 - 4946 EXPIRED\n+4031770 - 4946 EXPIRED\n 4031772 - 4942\n 4031774 - 3361\n 4031785 - 3376\n-4031789 - 3844\n 4031796 - 3362\n 4031797 - 3367\n-4031798 - 3366\n-4031801 - 1040\n-4031806 - 3380\n-4031812 - 4950\n-4031833 - 9946\n-4031837 - 9945\n+4031806 - 3379\n+4031812 - 4950 EXPIRED\n+4031837 - 9942 EXPIRED\n 4031839 - 2162\n-4031881 - 4484\n-4031894 - 2214\n+4031850 - 2180\n+4031881 - 4484 EXPIRED\n 4031921 - 4646\n-4031927 - 3454\n-4031928 - 3454\n-4031945 - 9987\n-4032037 - 9154\n-4032038 - 9154\n-4032039 - 9154\n-4032055 - 4675\n-4032087 - 10081\n-4032092 - 28003\n-4032119 - 28109\n+4032037 - 9154 EXPIRED\n+4032038 - 9154 EXPIRED\n+4032039 - 9154 EXPIRED\n+4032087 - 10081 EXPIRED\n+4032119 - 28109 EXPIRED\n 4032136 - 20710\n-4032138 - 20713\n+4032138 - 20712\n 4032142 - 20716\n-4032143 - 20717\n 4032196 - 20528\n 4032197 - 20528\n 4032198 - 20528\n-4032233 - 8298\n-4032234 - 8299\n-4032235 - 8299\n-4032236 - 8299\n-4032237 - 8299\n-4032238 - 8299\n-4032239 - 8299\n-4032247 - 28103\n-4032248 - 28108\n-4032264 - 10240\n-4032265 - 10241\n-4032266 - 10240\n-4032270 - 10241\n-4032271 - 10260\n-4032272 - 10268\n-4032273 - 10268\n-4032275 - 10261\n-4032276 - 10262\n-4032277 - 10263\n-4032278 - 10270\n-4032279 - 10271\n-4032280 - 10272\n-4032281 - 10270\n-4032282 - 10271\n-4032283 - 10272\n-4032284 - 10264\n-4032285 - 10265\n-4032286 - 10266\n-4032287 - 10267\n-4032307 - 28121\n-4032308 - 28122\n-4032317 - 21717\n-4032318 - 21718\n-4032319 - 21723\n-4032321 - 21727\n-4032325 - 21752\n+4032233 - 8298 EXPIRED\n+4032234 - 8299 EXPIRED\n+4032235 - 8299 EXPIRED\n+4032236 - 8299 EXPIRED\n+4032237 - 8299 EXPIRED\n+4032238 - 8299 EXPIRED\n+4032239 - 8298 EXPIRED\n+4032248 - 28108 EXPIRED\n+4032264 - 10240 EXPIRED\n+4032265 - 10241 EXPIRED\n+4032266 - 10240 EXPIRED\n+4032270 - 10241 EXPIRED\n+4032271 - 10260 EXPIRED\n+4032272 - 10268 EXPIRED\n+4032273 - 10268 EXPIRED\n+4032275 - 10261 EXPIRED\n+4032276 - 10262 EXPIRED\n+4032277 - 10263 EXPIRED\n+4032278 - 10270 EXPIRED\n+4032279 - 10271 EXPIRED\n+4032280 - 10272 EXPIRED\n+4032281 - 10270 EXPIRED\n+4032282 - 10271 EXPIRED\n+4032283 - 10272 EXPIRED\n+4032284 - 10264 EXPIRED\n+4032285 - 10265 EXPIRED\n+4032286 - 10266 EXPIRED\n+4032287 - 10267 EXPIRED\n+4032306 - 28120 EXPIRED\n+4032307 - 28121 EXPIRED\n+4032308 - 28122 EXPIRED\n+4032325 - 21751\n 4032326 - 21752\n 4032331 - 21601\n 4032333 - 21608\n-4032335 - 21617\n-4032342 - 21743\n-4032348 - 10300\n-4032349 - 10301\n-4032350 - 10302\n-4032374 - 2405\n-4032376 - 2406\n-4032377 - 2407\n-4032378 - 2408\n-4032379 - 2409\n+4032348 - 10300 EXPIRED\n+4032349 - 10301 EXPIRED\n+4032350 - 10302 EXPIRED\n 4032401 - 2261\n 4032402 - 2263\n-4032404 - 28128\n+4032404 - 28128 EXPIRED\n 4032423 - 21767\n-4032435 - 28307\n-4032436 - 28314\n-4032437 - 28321\n-4032443 - 28317\n-4032496 - 28238\n-4032512 - 3720\n-4161000 - 9322\n+4032435 - 28307 EXPIRED\n+4032436 - 28314 EXPIRED\n+4032437 - 28321 EXPIRED\n+4161000 - 9322 EXPIRED\n \n \n \n \n \n \n COMPLETE QUEST ITEMS WITH ZERO QUANTITY\n-1018:\n-  4000142\n-\n-2052:\n-  4031025\n-\n-2053:\n-  4031026\n-\n-2054:\n-  4031028\n-\n-2167:\n-  4031841\n-\n-2168:\n-  4031842\n-\n-2169:\n-  4031843\n-\n-2173:\n-  4031846\n-\n-2180:\n-  4031850\n-\n-2183:\n-  4031851\n-\n-2185:\n-  4031852\n-\n-3010:\n-  4031050\n-\n-6340:\n-  4031872\n-\n-6350:\n-  4031871\n-\n-6360:\n-  4031869\n-\n-6361:\n-  4031870\n-\n-6380:\n-  4031873\n-\n-6390:\n-  4031874\n-\n 8142:\n   4000300\n   4000301\n \n-8218:\n+8218 EXPIRED:\n   4031664\n   4031665\n   4031666\n \n-8886:\n+8886 EXPIRED:\n   4031659\n \n-8887:\n+8887 EXPIRED:\n   4031658\n \n-8888:\n+8888 EXPIRED:\n   4031660\n \n-10430:\n-  4220152\n-\n 28104:\n   4032247\n \n-28120:\n-  4032306\n-\n \n \n "}, {"sha": "e6879b655ad537468066799225436df5c7d7c47d", "filename": "tools/MapleQuestItemFetcher/src/maplequestitemfetcher/MapleQuestItemFetcher.java", "status": "modified", "additions": 126, "deletions": 41, "changes": 167, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/tools/MapleQuestItemFetcher/src/maplequestitemfetcher/MapleQuestItemFetcher.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/tools/MapleQuestItemFetcher/src/maplequestitemfetcher/MapleQuestItemFetcher.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/tools/MapleQuestItemFetcher/src/maplequestitemfetcher/MapleQuestItemFetcher.java?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -72,7 +72,6 @@ This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n     static String password = \"\";\n \n     static String wzPath = \"../../wz\";\n-    static String fileName = \"../../wz/Quest.wz/Act.img.xml\";\n     static String directoryName = \"../..\";\n     static String newFile = \"lib/QuestReport.txt\";\n \n@@ -134,6 +133,28 @@ private static String getValue(String token) {\n         return(d.trim());\n     }\n     \n+    private static void forwardCursor(int st) {\n+        String line = null;\n+\n+        try {\n+            while(status >= st && (line = bufferedReader.readLine()) != null) {\n+                simpleToken(line);\n+            }\n+        }\n+        catch(Exception e) {\n+            e.printStackTrace();\n+        }\n+    }\n+\n+    private static void simpleToken(String token) {\n+        if(token.contains(\"/imgdir\")) {\n+            status -= 1;\n+        }\n+        else if(token.contains(\"imgdir\")) {\n+            status += 1;\n+        }\n+    }\n+    \n     private static void inspectQuestItemList(int st) {\n         String line = null;\n \n@@ -152,24 +173,28 @@ private static void processCurrentItem() {\n             if(ii.isQuestItem(currentItemid)) {\n                 if(currentCount != 0) {\n                     if(isCompleteState == 1) {\n-                        Set<Integer> qi = completeQuestItems.get(questId);\n-                        if(qi == null) {\n-                            Set<Integer> newSet = new HashSet<>();\n-                            newSet.add(currentItemid);\n-\n-                            completeQuestItems.put(questId, newSet);\n-                        } else {\n-                            qi.add(currentItemid);\n+                        if(currentCount < 0) {\n+                            Set<Integer> qi = completeQuestItems.get(questId);\n+                            if(qi == null) {\n+                                Set<Integer> newSet = new HashSet<>();\n+                                newSet.add(currentItemid);\n+\n+                                completeQuestItems.put(questId, newSet);\n+                            } else {\n+                                qi.add(currentItemid);\n+                            }\n                         }\n                     } else {\n-                        Set<Integer> qi = startQuestItems.get(questId);\n-                        if(qi == null) {\n-                            Set<Integer> newSet = new HashSet<>();\n-                            newSet.add(currentItemid);\n-\n-                            startQuestItems.put(questId, newSet);\n-                        } else {\n-                            qi.add(currentItemid);\n+                        if(currentCount > 0) {\n+                            Set<Integer> qi = startQuestItems.get(questId);\n+                            if(qi == null) {\n+                                Set<Integer> newSet = new HashSet<>();\n+                                newSet.add(currentItemid);\n+\n+                                startQuestItems.put(questId, newSet);\n+                            } else {\n+                                qi.add(currentItemid);\n+                            }\n                         }\n                     }\n                 } else {\n@@ -222,7 +247,7 @@ else if(token.contains(\"imgdir\")) {\n         }\n     }\n \n-    private static void translateToken(String token) {\n+    private static void translateActToken(String token) {\n         String d;\n         int temp;\n \n@@ -244,8 +269,41 @@ else if(status == 3) {\n                 if(d.contains(\"item\")) {\n                     temp = status;\n                     inspectQuestItemList(temp);\n+                } else {\n+                    forwardCursor(status);\n+                }\n+            }\n+\n+            status += 1;\n+        } else {\n+            if(status == 3) {\n+                d = getName(token);\n+\n+                if(d.equals(\"end\")) {\n+                    limitedQuestids.add(questId);\n                 }\n             }\n+        }\n+    }\n+    \n+    private static void translateCheckToken(String token) {\n+        String d;\n+\n+        if(token.contains(\"/imgdir\")) {\n+            status -= 1;\n+        }\n+        else if(token.contains(\"imgdir\")) {\n+            if(status == 1) {           //getting QuestId\n+                d = getName(token);\n+                questId = Integer.parseInt(d);\n+            }\n+            else if(status == 2) {      //start/complete\n+                d = getName(token);\n+                isCompleteState = Integer.parseInt(d);\n+            }\n+            else if(status == 3) {\n+                forwardCursor(status);\n+            }\n \n             status += 1;\n         } else {\n@@ -289,32 +347,46 @@ private static void calculateQuestItemDiff() {\n         return list;\n     }\n     \n-    private static void filterQuestDropsOnDB(List<Pair<Integer, Integer>> itemsWithQuest) throws SQLException {\n-        List<Pair<Integer, Integer>> copyItemsWithQuest = new ArrayList<>(itemsWithQuest);\n-        try {\n-            for(Pair<Integer, Integer> iq : copyItemsWithQuest) {\n-                PreparedStatement ps = con.prepareStatement(\"SELECT questid FROM drop_data WHERE itemid = ?;\");\n-                ps.setInt(1, iq.getLeft());\n-                ResultSet rs = ps.executeQuery();\n-\n-                if (rs.isBeforeFirst()) {\n-                    while(rs.next()) {\n-                        int curQuest = rs.getInt(1);\n-                        if(curQuest != iq.getRight()) {\n-                            int[] mixed = new int[3];\n-                            mixed[0] = iq.getLeft();\n-                            mixed[1] = curQuest;\n-                            mixed[2] = iq.getRight();\n-                            \n-                            mixedQuestidItems.put(iq.getLeft(), mixed);\n-                        }\n+    private static String getTableName(boolean dropdata) {\n+        return dropdata ? \"drop_data\" : \"reactordrops\";\n+    }\n+    \n+    private static void filterQuestDropsOnTable(Pair<Integer, Integer> iq, List<Pair<Integer, Integer>> itemsWithQuest, boolean dropdata) throws SQLException {\n+        PreparedStatement ps = con.prepareStatement(\"SELECT questid FROM \" + getTableName(dropdata) + \" WHERE itemid = ?;\");\n+        ps.setInt(1, iq.getLeft());\n+        ResultSet rs = ps.executeQuery();\n+\n+        if (rs.isBeforeFirst()) {\n+            while(rs.next()) {\n+                int curQuest = rs.getInt(1);\n+                if(curQuest != iq.getRight()) {\n+                    Set<Integer> sqSet = startQuestItems.get(curQuest);\n+                    if(sqSet != null && sqSet.contains(iq.getLeft())) {\n+                        continue;\n                     }\n                     \n-                    itemsWithQuest.remove(iq);\n+                    int[] mixed = new int[3];\n+                    mixed[0] = iq.getLeft();\n+                    mixed[1] = curQuest;\n+                    mixed[2] = iq.getRight();\n+\n+                    mixedQuestidItems.put(iq.getLeft(), mixed);\n                 }\n+            }\n \n-                rs.close();\n-                ps.close();\n+            itemsWithQuest.remove(iq);\n+        }\n+\n+        rs.close();\n+        ps.close();\n+    }\n+    \n+    private static void filterQuestDropsOnDB(List<Pair<Integer, Integer>> itemsWithQuest) throws SQLException {\n+        List<Pair<Integer, Integer>> copyItemsWithQuest = new ArrayList<>(itemsWithQuest);\n+        try {\n+            for(Pair<Integer, Integer> iq : copyItemsWithQuest) {\n+                filterQuestDropsOnTable(iq, itemsWithQuest, true);\n+                filterQuestDropsOnTable(iq, itemsWithQuest, false);\n             }\n         }\n         catch(SQLException e) {\n@@ -431,17 +503,30 @@ private static String getExpiredStringLabel(int questid) {\n     private static void ReportQuestItemData() {\n         // This will reference one line at a time\n         String line = null;\n+        String fileName = null;\n \n         try {\n             Class.forName(driver).newInstance();\n             \n             System.out.println(\"Reading WZs...\");\n+    \n+            fileName = wzPath + \"/Quest.wz/Check.img.xml\";\n+            fileReader = new InputStreamReader(new FileInputStream(fileName), \"UTF-8\");\n+            bufferedReader = new BufferedReader(fileReader);\n+\n+            while((line = bufferedReader.readLine()) != null) {\n+                translateCheckToken(line);  // fetch expired quests through here as well\n+            }\n+            \n+            bufferedReader.close();\n+            fileReader.close();\n             \n+            fileName = wzPath + \"/Quest.wz/Act.img.xml\";\n             fileReader = new InputStreamReader(new FileInputStream(fileName), \"UTF-8\");\n             bufferedReader = new BufferedReader(fileReader);\n \n             while((line = bufferedReader.readLine()) != null) {\n-                translateToken(line);\n+                translateActToken(line);\n             }\n             \n             bufferedReader.close();"}, {"sha": "149571986a1c7f222200859103d3c5fea64d8d19", "filename": "wz/Quest.wz/Check.img.xml", "status": "modified", "additions": 1, "deletions": 6, "changes": 7, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/wz/Quest.wz/Check.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/wz/Quest.wz/Check.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Quest.wz/Check.img.xml?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24", "patch": "@@ -22139,12 +22139,7 @@\n     </imgdir>\n     <imgdir name=\"1\">\n       <int name=\"npc\" value=\"1061019\"/>\n-      <int name=\"infoNumber\" value=\"21761\"/>\n-      <imgdir name=\"infoex\">\n-        <imgdir name=\"0\">\n-          <string name=\"value\" value=\"0\"/>\n-        </imgdir>\n-      </imgdir>\n+      <string name=\"endscript\" value=\"q21728e\"/>\n     </imgdir>\n   </imgdir>\n   <imgdir name=\"21729\">"}, {"sha": "1c3100271c14d7c0df6827d0ec2aceaf5d08da9d", "filename": "wz/String.wz/Consume.img.xml", "status": "modified", "additions": 3366, "deletions": 3366, "changes": 6732, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/wz/String.wz/Consume.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6a63f9d95e68f54a30144acb2e99924dc3f2ce24/wz/String.wz/Consume.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/String.wz/Consume.img.xml?ref=6a63f9d95e68f54a30144acb2e99924dc3f2ce24"}]}]},
