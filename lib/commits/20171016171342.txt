{"fetchDate": "2019-12-19", "content": [{"sha": "57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "node_id": "MDY6Q29tbWl0NDUwODIwMjM6NTdjMjk2MDNkMWJmYTg5NjRjNmMxM2I5N2ZjZGIwMzdkNmIyMGU2ZQ==", "commit": {"author": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2017-10-16T17:13:42Z"}, "committer": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2017-10-16T17:13:42Z"}, "message": "Fixed chair exploit & beholder issue + Mini-dungeon revamp\n\nFixed an (quite amusing) exploit with map chairs stacking \"extra healing\" schedules on certain conditions. Fixed mini-dungeon not disposing players properly in some cases. Refactored the mini-dungeon structure. Fixed an issue on CASH inventory merging same items when trying to swap them. Fixed Beholder crash issue when trying to enter Cash Shop.", "tree": {"sha": "871c4b168ed7be84582946a939dd3cd63725b34a", "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/trees/871c4b168ed7be84582946a939dd3cd63725b34a"}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/commits/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "html_url": "https://github.com/ronancpl/HeavenMS/commit/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "comments_url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/comments", "author": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1ec7487bd3a634ad3a981ec7b9ac5df5df4f1155", "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/1ec7487bd3a634ad3a981ec7b9ac5df5df4f1155", "html_url": "https://github.com/ronancpl/HeavenMS/commit/1ec7487bd3a634ad3a981ec7b9ac5df5df4f1155"}], "stats": {"total": 1066, "additions": 632, "deletions": 434}, "files": [{"sha": "eceba121aa30a4124d240de807d762d0f819969f", "filename": "build/built-jar.properties", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/built-jar.properties", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/built-jar.properties", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/built-jar.properties?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -1,4 +1,4 @@\n-#Fri, 13 Oct 2017 03:24:23 -0300\n+#Mon, 16 Oct 2017 14:34:51 -0200\n \n \n C\\:\\\\Nexon\\\\MapleSolaxia\\\\MapleSolaxiaV2="}, {"sha": "1ce02a3e34f7b6de57e52f60df00a78582060468", "filename": "build/classes/client/MapleBuffStat.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleBuffStat.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleBuffStat.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleBuffStat.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "fcc4883a62c02636f5a4702c6b06b0a6b1032c86", "filename": "build/classes/client/MapleCharacter$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$1.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "30db8e59cc8aac164a4ff59ee416ff0345d6203a", "filename": "build/classes/client/MapleCharacter$10.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$10.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$10.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$10.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "ef23fbb6ae0e38cffa970370ffd921f6c5538d5e", "filename": "build/classes/client/MapleCharacter$11.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$11.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$11.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$11.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "ad9b9d082f1aedef7c09cac531fa8f67ce27ddd0", "filename": "build/classes/client/MapleCharacter$12.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$12.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$12.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$12.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "571dbae1e9dd20f82135a56ac5a510d683f3834d", "filename": "build/classes/client/MapleCharacter$13.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$13.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$13.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$13.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "bb841cea8f443e68787ba942785a9ee7f3adebcd", "filename": "build/classes/client/MapleCharacter$14.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$14.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$14.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$14.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "5aeefa138d45a88b12dba53633b3c63513b81f13", "filename": "build/classes/client/MapleCharacter$15.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$15.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$15.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$15.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "39bb6eaa119cf8ed570bbcd0a9416054eaa252c8", "filename": "build/classes/client/MapleCharacter$16.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$16.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$16.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$16.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "8afb4b892ff6f92f0f6acf3da474b4905e911c63", "filename": "build/classes/client/MapleCharacter$17.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$17.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$17.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$17.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "4dfd86e071b3b7f2571edc95b23b766b39bab8ae", "filename": "build/classes/client/MapleCharacter$18.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$18.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$18.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$18.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "4d9bda9cad7793c0db00bdb24af5b69ac6240cc8", "filename": "build/classes/client/MapleCharacter$19.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$19.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$19.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$19.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "ffe6fe8371da644dd810ecf67ec6f9fc4e64ef44", "filename": "build/classes/client/MapleCharacter$2.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$2.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$2.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$2.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "c96c3e93d974f632a4bc0a45ea3a034284e10b62", "filename": "build/classes/client/MapleCharacter$3.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$3.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$3.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$3.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "b4acbc402855693e3241c392c4bf6dce86f1d3e8", "filename": "build/classes/client/MapleCharacter$4.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$4.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$4.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$4.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "4f32c82cdb5a20e64f784df1e413236de4680c6a", "filename": "build/classes/client/MapleCharacter$5.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$5.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$5.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$5.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "239d69cfb8bc1d5bc9699c184fc6f0e990eca52c", "filename": "build/classes/client/MapleCharacter$6.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$6.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$6.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$6.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "76d40490a5bd5ebe54d469d2b11d80d97e9682bb", "filename": "build/classes/client/MapleCharacter$7.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$7.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$7.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$7.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "10514607e9ce7a1bd078abd160ac35cbfac21838", "filename": "build/classes/client/MapleCharacter$8.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$8.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$8.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$8.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "96cd8c43a166402101bd8f51f4ccf638b2d17e2e", "filename": "build/classes/client/MapleCharacter$9.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$9.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$9.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$9.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "cd70ac81104310a1437c5c838a0de9dad9a73540", "filename": "build/classes/client/MapleCharacter$FameStatus.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$FameStatus.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$FameStatus.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$FameStatus.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "a02b7bffb843e463cbaafc75a62f3851812d6394", "filename": "build/classes/client/MapleCharacter$MapleBuffStatValueHolder.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$MapleBuffStatValueHolder.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$MapleBuffStatValueHolder.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$MapleBuffStatValueHolder.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "0229b42f7665a28ab9f339e59c1f4981ef611408", "filename": "build/classes/client/MapleCharacter$MapleCoolDownValueHolder.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$MapleCoolDownValueHolder.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$MapleCoolDownValueHolder.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$MapleCoolDownValueHolder.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "41c25bfb8de4eec83647c1d1eed6adf7187b6695", "filename": "build/classes/client/MapleCharacter$SkillEntry.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$SkillEntry.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter$SkillEntry.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter$SkillEntry.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "a6d890a1ba73be1bbceb0a807c3cb5e747178585", "filename": "build/classes/client/MapleCharacter.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleCharacter.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "a63378c9128ddcc2a00cb3614905b70d7ffb0fe7", "filename": "build/classes/client/MapleClient$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleClient$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleClient$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleClient$1.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "b40fec8e7f06d4743632b5c2591311b46813f743", "filename": "build/classes/client/MapleClient$CharNameAndId.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleClient$CharNameAndId.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleClient$CharNameAndId.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleClient$CharNameAndId.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "55ac1ccd341346fadb55ba58f2a3a49202987b75", "filename": "build/classes/client/MapleClient.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleClient.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/MapleClient.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleClient.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "ca4c669580812d2f842f1a8c9c6936123dcfe54e", "filename": "build/classes/client/inventory/MapleInventory.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/inventory/MapleInventory.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/client/inventory/MapleInventory.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/inventory/MapleInventory.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "c10f5ec8c8f350f1fbc6def3483e074d58199c89", "filename": "build/classes/net/PacketProcessor.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/net/PacketProcessor.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/net/PacketProcessor.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/PacketProcessor.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "6d195accb93d1482a55b6472706cca05640276b5", "filename": "build/classes/net/server/channel/Channel$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/net/server/channel/Channel$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/net/server/channel/Channel$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/Channel$1.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "9a9d557a5ad3e32d80574afa3fb7be99103a06bf", "filename": "build/classes/net/server/channel/Channel$respawnMaps.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/net/server/channel/Channel$respawnMaps.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/net/server/channel/Channel$respawnMaps.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/Channel$respawnMaps.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "24a8b37ba6b322c2c8abd2ab01245484de4bc9a3", "filename": "build/classes/net/server/channel/Channel.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/net/server/channel/Channel.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/net/server/channel/Channel.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/Channel.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "f38d7b5c1007cf05e50999ae125139c1a2d07adb", "filename": "build/classes/net/server/channel/handlers/DoorHandler.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/net/server/channel/handlers/DoorHandler.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/net/server/channel/handlers/DoorHandler.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/handlers/DoorHandler.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "c2705f25b1e1abb12a3ad99f1415e07027d6e7c9", "filename": "build/classes/net/server/channel/handlers/EnterCashShopHandler.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/net/server/channel/handlers/EnterCashShopHandler.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/net/server/channel/handlers/EnterCashShopHandler.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/handlers/EnterCashShopHandler.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "2c7dd0cf501ad431facfcc195a49c46792908d02", "filename": "build/classes/net/server/channel/handlers/EnterMTSHandler.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/net/server/channel/handlers/EnterMTSHandler.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/net/server/channel/handlers/EnterMTSHandler.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/handlers/EnterMTSHandler.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "d7e0ba5ffa4cd14219b1ecffaafb647553b89132", "filename": "build/classes/net/server/channel/handlers/ItemIdSortHandler.class", "status": "removed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1ec7487bd3a634ad3a981ec7b9ac5df5df4f1155/build/classes/net/server/channel/handlers/ItemIdSortHandler.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1ec7487bd3a634ad3a981ec7b9ac5df5df4f1155/build/classes/net/server/channel/handlers/ItemIdSortHandler.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/handlers/ItemIdSortHandler.class?ref=1ec7487bd3a634ad3a981ec7b9ac5df5df4f1155"}, {"sha": "0e088c8d2a7785804a7a6caec1794043246aa3b8", "filename": "build/classes/net/server/channel/handlers/ItemSortHandler.class", "status": "removed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1ec7487bd3a634ad3a981ec7b9ac5df5df4f1155/build/classes/net/server/channel/handlers/ItemSortHandler.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1ec7487bd3a634ad3a981ec7b9ac5df5df4f1155/build/classes/net/server/channel/handlers/ItemSortHandler.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/handlers/ItemSortHandler.class?ref=1ec7487bd3a634ad3a981ec7b9ac5df5df4f1155"}, {"sha": "c018f114963a2d6a07b383069aa157a037c11f66", "filename": "build/classes/net/server/channel/handlers/PairedQuicksort.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/net/server/channel/handlers/PairedQuicksort.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/net/server/channel/handlers/PairedQuicksort.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/handlers/PairedQuicksort.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "be3eb52db81dbd5d641dc8f735bdcc0f6e77172a", "filename": "build/classes/net/server/channel/handlers/PartySearchStartHandler.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/net/server/channel/handlers/PartySearchStartHandler.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/net/server/channel/handlers/PartySearchStartHandler.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/handlers/PartySearchStartHandler.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "e5f971a63e6210d93f0416c07c61c94dbd214665", "filename": "build/classes/net/server/channel/handlers/PlayerLoggedinHandler.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/net/server/channel/handlers/PlayerLoggedinHandler.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/net/server/channel/handlers/PlayerLoggedinHandler.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/handlers/PlayerLoggedinHandler.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "5309869df6e00263d65d3adf719704d8a33cf4d8", "filename": "build/classes/scripting/AbstractPlayerInteraction.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/scripting/AbstractPlayerInteraction.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/scripting/AbstractPlayerInteraction.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/scripting/AbstractPlayerInteraction.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "b58abca90725650ef5a4698f4dd8c6581e6ae216", "filename": "build/classes/scripting/event/EventInstanceManager$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/scripting/event/EventInstanceManager$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/scripting/event/EventInstanceManager$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/scripting/event/EventInstanceManager$1.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "378130a1889026edaaf3a64f60ab3c809b0a8ae5", "filename": "build/classes/scripting/event/EventInstanceManager$2.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/scripting/event/EventInstanceManager$2.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/scripting/event/EventInstanceManager$2.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/scripting/event/EventInstanceManager$2.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "9004e14ac8acda3784647e330b1aeb1c6319e9d8", "filename": "build/classes/scripting/event/EventInstanceManager$3.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/scripting/event/EventInstanceManager$3.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/scripting/event/EventInstanceManager$3.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/scripting/event/EventInstanceManager$3.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "35278713390e21ac050b2cefd51c3687eeb4730f", "filename": "build/classes/scripting/event/EventInstanceManager.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/scripting/event/EventInstanceManager.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/scripting/event/EventInstanceManager.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/scripting/event/EventInstanceManager.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "50706461809c3bc7711fa7b5a3ec312d9a8cc51b", "filename": "build/classes/server/MapleInventoryManipulator.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/server/MapleInventoryManipulator.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/server/MapleInventoryManipulator.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/MapleInventoryManipulator.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "6d00ffa0086c3e24486f41ad19692ff86825670f", "filename": "build/classes/server/MapleStatEffect.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/server/MapleStatEffect.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/server/MapleStatEffect.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/MapleStatEffect.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "27a98edfb2399e782c3524b60d35ff24a57ea7ed", "filename": "build/classes/server/maps/MapleMap$27.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/server/maps/MapleMap$27.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/server/maps/MapleMap$27.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$27.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "0318fce7dd60bbe77e14bef0aece4e77cca0bce7", "filename": "build/classes/server/maps/MapleMap$28.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/server/maps/MapleMap$28.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/server/maps/MapleMap$28.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$28.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "1f60828cfe6e52164de1f9c5dc1a368d8ef2cf10", "filename": "build/classes/server/maps/MapleMap$29$1.class", "status": "removed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1ec7487bd3a634ad3a981ec7b9ac5df5df4f1155/build/classes/server/maps/MapleMap$29$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1ec7487bd3a634ad3a981ec7b9ac5df5df4f1155/build/classes/server/maps/MapleMap$29$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$29$1.class?ref=1ec7487bd3a634ad3a981ec7b9ac5df5df4f1155"}, {"sha": "8dce272a4ac62dd3f45d3f86bf0d79229ab8d05d", "filename": "build/classes/server/maps/MapleMap$29.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/server/maps/MapleMap$29.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/server/maps/MapleMap$29.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$29.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "9709aa389dd17bce56848cf75567913c01cb8df6", "filename": "build/classes/server/maps/MapleMap$30.class", "status": "removed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1ec7487bd3a634ad3a981ec7b9ac5df5df4f1155/build/classes/server/maps/MapleMap$30.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1ec7487bd3a634ad3a981ec7b9ac5df5df4f1155/build/classes/server/maps/MapleMap$30.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$30.class?ref=1ec7487bd3a634ad3a981ec7b9ac5df5df4f1155"}, {"sha": "98ec32c14c984d20dcd5dc871600b80d0ffce4df", "filename": "build/classes/server/maps/MapleMap$ActivateItemReactor$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/server/maps/MapleMap$ActivateItemReactor$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/server/maps/MapleMap$ActivateItemReactor$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$ActivateItemReactor$1.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "bd711f8dc9d69881bfc3e27cb37d80a8bb7d03fa", "filename": "build/classes/server/maps/MapleMap$ActivateItemReactor.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/server/maps/MapleMap$ActivateItemReactor.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/server/maps/MapleMap$ActivateItemReactor.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$ActivateItemReactor.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "212d770b3e0c073273c98f25d141b7d0d43acb62", "filename": "build/classes/server/maps/MapleMap$ExpireMapItemJob.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/server/maps/MapleMap$ExpireMapItemJob.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/server/maps/MapleMap$ExpireMapItemJob.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$ExpireMapItemJob.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "826988fa2d87df76a6296c0e3b4932b85bcef439", "filename": "build/classes/server/maps/MapleMap.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/server/maps/MapleMap.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/server/maps/MapleMap.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "5bd0a17edf02bf57868604a393bab0c914996722", "filename": "build/classes/server/maps/MapleMiniDungeon.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/server/maps/MapleMiniDungeon.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/build/classes/server/maps/MapleMiniDungeon.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMiniDungeon.class?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "b89d19b0ca5e5270db61cde62a7ad872c7fd7837", "filename": "dist/MapleSolaxia.jar", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/dist/MapleSolaxia.jar", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/dist/MapleSolaxia.jar", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/dist/MapleSolaxia.jar?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e"}, {"sha": "a462593a700caa717e3679918a72f9599bef7343", "filename": "docs/mychanges_ptbr.txt", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/docs/mychanges_ptbr.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/docs/mychanges_ptbr.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/docs/mychanges_ptbr.txt?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -580,4 +580,9 @@ Alterado tempo-limite em mapas da PiratePQ para seguir o determinado para cada m\n \n 12 Outubro 2017,\n Corrigido alguns bugs com a PPQ.\n-Se houve sucesso usando white scroll, slot ainda \ufffd usado.\n\\ No newline at end of file\n+Se houve sucesso usando white scroll, slot ainda \ufffd usado.\n+\n+15 Outubro 2017,\n+Corrigido Mini-dungeons n\ufffdo liberando os jogadores corretamente. Se player entra em outra sess\ufffdo de MD antes de dar o timeout da primeira, o timeout leva efeito mesmo fora da sess\ufffdo.\n+Corrigido um bug/exploit que permitia stackar map chair recovery.\n+Corrigido um bug no invent\ufffdrio de CASH mesclando itens de mesmo id.\n\\ No newline at end of file"}, {"sha": "5af0ed1acce427edd53bc66d6b2b5f2bf3272c28", "filename": "nbproject/private/private.xml", "status": "modified", "additions": 1, "deletions": 15, "changes": 16, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/nbproject/private/private.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/nbproject/private/private.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/nbproject/private/private.xml?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -2,20 +2,6 @@\n <project-private xmlns=\"http://www.netbeans.org/ns/project-private/1\">\n     <editor-bookmarks xmlns=\"http://www.netbeans.org/ns/editor-bookmarks/2\" lastBookmarkId=\"1\"/>\n     <open-files xmlns=\"http://www.netbeans.org/ns/projectui-open-files/2\">\n-        <group>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/portal/davy_next0.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/command/Commands.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/portal/davy_next3.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/portal/davy_next1.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/portal/davy_next4.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/server/maps/MapleReactorStats.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/server/maps/MapleDoor.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/2094002.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/event/CathedralWedding.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/portal/davy_next2.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/server/maps/MapleMap.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/event/PiratePQ.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/reactor/2512000.js</file>\n-        </group>\n+        <group/>\n     </open-files>\n </project-private>"}, {"sha": "41c50c737c0cb8707b1f9f8911f8086618155ec4", "filename": "scripts/NPC Base.js", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/scripts/NPC%20Base.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/scripts/NPC%20Base.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/NPC%20Base.js?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -51,4 +51,12 @@ function action(mode, type, selection) {\n                         cm.dispose();\n                 }\n         }\n+}\n+\n+function generateSelectionMenu(array) {     // nice tool for generating a string for the sendSimple functionality\n+        var menu = \"\";\n+        for (var i = 0; i < array.length; i++) {\n+                menu += \"#L\" + i + \"#\" + array[i] + \"l\\r\\n\";\n+        }\n+        return menu;\n }\n\\ No newline at end of file"}, {"sha": "93983577b63ba444851427db645fabe434ffd314", "filename": "scripts/portal/MD_drakeroom.js", "status": "modified", "additions": 22, "deletions": 22, "changes": 44, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/scripts/portal/MD_drakeroom.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/scripts/portal/MD_drakeroom.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/MD_drakeroom.js?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -27,28 +27,28 @@ var dungeons = 30;\n \n function enter(pi) {\n     if (pi.getMapId() == baseid) {\n-\t\tif (pi.getParty() != null) {\n-\t\t    if (pi.isLeader()) {\n-\t\t\tfor (var i = 0; i < dungeons; i++) {\n-\t\t\t    if (pi.getPlayerCount(dungeonid + i) == 0) {\n-\t\t\t    \tpi.warpParty(dungeonid + i);\n-\t\t\t\treturn true;\n-\t\t\t    }\n-\t\t\t}\n-\t\t    } else {\n-\t\t    \tpi.playerMessage(5, \"Only solo or party leaders are supposed to enter the Mini-Dungeon.\");\n-\t\t    \treturn false;\n-\t\t    }\n-\t\t} else {\n-\t\t    for (var i = 0; i < dungeons; i++) {\n-\t\t\t\tif (pi.getPlayerCount(dungeonid + i) == 0) {\n-\t\t\t\t    pi.warp(dungeonid + i);\n-\t\t\t\t    return true;\n-\t\t\t\t}\n-\t\t    }\n-\t\t}\n-\t\tpi.playerMessage(5, \"All of the Mini-Dungeons are in use right now, please try again later.\");\n-\t\treturn false;\n+        if (pi.getParty() != null) {\n+            if (pi.isLeader()) {\n+                for (var i = 0; i < dungeons; i++) {\n+                    if(pi.startDungeonInstance(dungeonid + i)) {\n+                        pi.warpParty(dungeonid + i);\n+                        return true;\n+                    }\n+                }\n+            } else {\n+                pi.playerMessage(5, \"Only solo or party leaders are supposed to enter the Mini-Dungeon.\");\n+                return false;\n+            }\n+        } else {\n+            for (var i = 0; i < dungeons; i++) {\n+                if(pi.startDungeonInstance(dungeonid + i)) {\n+                    pi.warp(dungeonid + i);\n+                    return true;\n+                }\n+            }\n+        }\n+        pi.playerMessage(5, \"All of the Mini-Dungeons are in use right now, please try again later.\");\n+        return false;\n     } else {\n     \tpi.playPortalSound();\n     \tpi.warp(baseid, \"MD00\");"}, {"sha": "4d113736d780b33e3c7cbcf46e4d8f9d4096d9cc", "filename": "scripts/portal/MD_golem.js", "status": "modified", "additions": 22, "deletions": 22, "changes": 44, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/scripts/portal/MD_golem.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/scripts/portal/MD_golem.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/MD_golem.js?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -29,28 +29,28 @@ var dungeons = 30;\n \n function enter(pi) {\n     if (pi.getMapId() == baseid) {\n-\t\tif (pi.getParty() != null) {\n-\t\t    if (pi.isLeader()) {\n-\t\t\tfor (var i = 0; i < dungeons; i++) {\n-\t\t\t    if (pi.getPlayerCount(dungeonid + i) == 0) {\n-\t\t\t    \tpi.warpParty(dungeonid + i);\n-\t\t\t\treturn true;\n-\t\t\t    }\n-\t\t\t}\n-\t\t    } else {\n-\t\t    \tpi.playerMessage(5, \"Only solo or party leaders are supposed to enter the Mini-Dungeon.\");\n-\t\t    \treturn false;\n-\t\t    }\n-\t\t} else {\n-\t\t    for (var i = 0; i < dungeons; i++) {\n-\t\t\t\tif (pi.getPlayerCount(dungeonid + i) == 0) {\n-\t\t\t\t    pi.warp(dungeonid + i);\n-\t\t\t\t    return true;\n-\t\t\t\t}\n-\t\t    }\n-\t\t}\n-\t\tpi.playerMessage(5, \"All of the Mini-Dungeons are in use right now, please try again later.\");\n-\t\treturn false;\n+        if (pi.getParty() != null) {\n+            if (pi.isLeader()) {\n+                for (var i = 0; i < dungeons; i++) {\n+                    if(pi.startDungeonInstance(dungeonid + i)) {\n+                        pi.warpParty(dungeonid + i);\n+                        return true;\n+                    }\n+                }\n+            } else {\n+                pi.playerMessage(5, \"Only solo or party leaders are supposed to enter the Mini-Dungeon.\");\n+                return false;\n+            }\n+        } else {\n+            for (var i = 0; i < dungeons; i++) {\n+                if(pi.startDungeonInstance(dungeonid + i)) {\n+                    pi.warp(dungeonid + i);\n+                    return true;\n+                }\n+            }\n+        }\n+        pi.playerMessage(5, \"All of the Mini-Dungeons are in use right now, please try again later.\");\n+        return false;\n     } else {\n     \tpi.playPortalSound();\n     \tpi.warp(baseid, \"MD00\");"}, {"sha": "2f796e3684230702001245042243615fdceeed64", "filename": "scripts/portal/MD_high.js", "status": "modified", "additions": 23, "deletions": 27, "changes": 50, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/scripts/portal/MD_high.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/scripts/portal/MD_high.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/MD_high.js?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -29,35 +29,31 @@ var dungeons = 19;\n \n function enter(pi) {\n     if (pi.getMapId() == baseid) {\n-\tif (pi.getPlayer().getFame() < 10) {\n-\t    pi.playerMessage(5, \"You need 10 Fame to enter.\");\n-\t    return;\n-\t}\n-\tif (pi.getParty() != null) {\n-\t    if (pi.isLeader()) {\n-\t\tfor (var i = 0; i < dungeons; i++) {\n-\t\t    if (pi.getPlayerCount(dungeonid + i) == 0) {\n-\t\t\tpi.warpParty(dungeonid + i);\n-\t\t\treturn true;\n-\t\t    }\n-\t\t}\n-\t    } else {\n-\t\tpi.playerMessage(5, \"Only solo or party leaders are supposed to enter the Mini-Dungeon.\");\n+        if (pi.getParty() != null) {\n+            if (pi.isLeader()) {\n+                for (var i = 0; i < dungeons; i++) {\n+                    if(pi.startDungeonInstance(dungeonid + i)) {\n+                        pi.warpParty(dungeonid + i);\n+                        return true;\n+                    }\n+                }\n+            } else {\n+                pi.playerMessage(5, \"Only solo or party leaders are supposed to enter the Mini-Dungeon.\");\n                 return false;\n-\t    }\n-\t} else {\n-\t    for (var i = 0; i < dungeons; i++) {\n-\t\tif (pi.getPlayerCount(dungeonid + i) == 0) {\n-\t\t    pi.warp(dungeonid + i);\n-\t\t    return true;\n-\t\t}\n-\t    }\n-\t}\n-\tpi.playerMessage(5, \"All of the Mini-Dungeons are in use right now, please try again later.\");\n+            }\n+        } else {\n+            for (var i = 0; i < dungeons; i++) {\n+                if(pi.startDungeonInstance(dungeonid + i)) {\n+                    pi.warp(dungeonid + i);\n+                    return true;\n+                }\n+            }\n+        }\n+        pi.playerMessage(5, \"All of the Mini-Dungeons are in use right now, please try again later.\");\n         return false;\n     } else {\n-        pi.playPortalSound();\n-\tpi.warp(baseid, \"MD00\");\n-        return true;\n+    \tpi.playPortalSound();\n+    \tpi.warp(baseid, \"MD00\");\n+    \treturn true;\n     }\n }\n\\ No newline at end of file"}, {"sha": "279a73452998f2be354f4c51c5cc3b12ca4b6df9", "filename": "scripts/portal/MD_mushroom.js", "status": "modified", "additions": 22, "deletions": 22, "changes": 44, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/scripts/portal/MD_mushroom.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/scripts/portal/MD_mushroom.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/MD_mushroom.js?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -29,28 +29,28 @@ var dungeons = 30;\n \n function enter(pi) {\n     if (pi.getMapId() == baseid) {\n-\t\tif (pi.getParty() != null) {\n-\t\t    if (pi.isLeader()) {\n-\t\t\tfor (var i = 0; i < dungeons; i++) {\n-\t\t\t    if (pi.getPlayerCount(dungeonid + i) == 0) {\n-\t\t\t    \tpi.warpParty(dungeonid + i);\n-\t\t\t\treturn true;\n-\t\t\t    }\n-\t\t\t}\n-\t\t    } else {\n-\t\t    \tpi.playerMessage(5, \"Only solo or party leaders are supposed to enter the Mini-Dungeon.\");\n-\t\t    \treturn false;\n-\t\t    }\n-\t\t} else {\n-\t\t    for (var i = 0; i < dungeons; i++) {\n-\t\t\t\tif (pi.getPlayerCount(dungeonid + i) == 0) {\n-\t\t\t\t    pi.warp(dungeonid + i);\n-\t\t\t\t    return true;\n-\t\t\t\t}\n-\t\t    }\n-\t\t}\n-\t\tpi.playerMessage(5, \"All of the Mini-Dungeons are in use right now, please try again later.\");\n-\t\treturn false;\n+        if (pi.getParty() != null) {\n+            if (pi.isLeader()) {\n+                for (var i = 0; i < dungeons; i++) {\n+                    if(pi.startDungeonInstance(dungeonid + i)) {\n+                        pi.warpParty(dungeonid + i);\n+                        return true;\n+                    }\n+                }\n+            } else {\n+                pi.playerMessage(5, \"Only solo or party leaders are supposed to enter the Mini-Dungeon.\");\n+                return false;\n+            }\n+        } else {\n+            for (var i = 0; i < dungeons; i++) {\n+                if(pi.startDungeonInstance(dungeonid + i)) {\n+                    pi.warp(dungeonid + i);\n+                    return true;\n+                }\n+            }\n+        }\n+        pi.playerMessage(5, \"All of the Mini-Dungeons are in use right now, please try again later.\");\n+        return false;\n     } else {\n     \tpi.playPortalSound();\n     \tpi.warp(baseid, \"MD00\");"}, {"sha": "0e273e0493b251d78b06b0da2b350ae01c216269", "filename": "scripts/portal/MD_pig.js", "status": "modified", "additions": 22, "deletions": 22, "changes": 44, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/scripts/portal/MD_pig.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/scripts/portal/MD_pig.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/MD_pig.js?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -29,28 +29,28 @@ var dungeons = 30;\n \n function enter(pi) {\n     if (pi.getMapId() == baseid) {\n-\t\tif (pi.getParty() != null) {\n-\t\t    if (pi.isLeader()) {\n-\t\t\tfor (var i = 0; i < dungeons; i++) {\n-\t\t\t    if (pi.getPlayerCount(dungeonid + i) == 0) {\n-\t\t\t    \tpi.warpParty(dungeonid + i);\n-\t\t\t\treturn true;\n-\t\t\t    }\n-\t\t\t}\n-\t\t    } else {\n-\t\t    \tpi.playerMessage(5, \"Only solo or party leaders are supposed to enter the Mini-Dungeon.\");\n-\t\t    \treturn false;\n-\t\t    }\n-\t\t} else {\n-\t\t    for (var i = 0; i < dungeons; i++) {\n-\t\t\t\tif (pi.getPlayerCount(dungeonid + i) == 0) {\n-\t\t\t\t    pi.warp(dungeonid + i);\n-\t\t\t\t    return true;\n-\t\t\t\t}\n-\t\t    }\n-\t\t}\n-\t\tpi.playerMessage(5, \"All of the Mini-Dungeons are in use right now, please try again later.\");\n-\t\treturn false;\n+        if (pi.getParty() != null) {\n+            if (pi.isLeader()) {\n+                for (var i = 0; i < dungeons; i++) {\n+                    if(pi.startDungeonInstance(dungeonid + i)) {\n+                        pi.warpParty(dungeonid + i);\n+                        return true;\n+                    }\n+                }\n+            } else {\n+                pi.playerMessage(5, \"Only solo or party leaders are supposed to enter the Mini-Dungeon.\");\n+                return false;\n+            }\n+        } else {\n+            for (var i = 0; i < dungeons; i++) {\n+                if(pi.startDungeonInstance(dungeonid + i)) {\n+                    pi.warp(dungeonid + i);\n+                    return true;\n+                }\n+            }\n+        }\n+        pi.playerMessage(5, \"All of the Mini-Dungeons are in use right now, please try again later.\");\n+        return false;\n     } else {\n     \tpi.playPortalSound();\n     \tpi.warp(baseid, \"MD00\");"}, {"sha": "475646b9ccb037eed894bb0683a7c886516f2460", "filename": "scripts/portal/MD_protect.js", "status": "modified", "additions": 22, "deletions": 22, "changes": 44, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/scripts/portal/MD_protect.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/scripts/portal/MD_protect.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/MD_protect.js?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -27,28 +27,28 @@ var dungeons = 19;\n \n function enter(pi) {\n     if (pi.getMapId() == baseid) {\n-\t\tif (pi.getParty() != null) {\n-\t\t    if (pi.isLeader()) {\n-\t\t\tfor (var i = 0; i < dungeons; i++) {\n-\t\t\t    if (pi.getPlayerCount(dungeonid + i) == 0) {\n-\t\t\t    \tpi.warpParty(dungeonid + i);\n-\t\t\t\treturn true;\n-\t\t\t    }\n-\t\t\t}\n-\t\t    } else {\n-\t\t    \tpi.playerMessage(5, \"Only solo or party leaders are supposed to enter the Mini-Dungeon.\");\n-\t\t    \treturn false;\n-\t\t    }\n-\t\t} else {\n-\t\t    for (var i = 0; i < dungeons; i++) {\n-\t\t\t\tif (pi.getPlayerCount(dungeonid + i) == 0) {\n-\t\t\t\t    pi.warp(dungeonid + i);\n-\t\t\t\t    return true;\n-\t\t\t\t}\n-\t\t    }\n-\t\t}\n-\t\tpi.playerMessage(5, \"All of the Mini-Dungeons are in use right now, please try again later.\");\n-\t\treturn false;\n+        if (pi.getParty() != null) {\n+            if (pi.isLeader()) {\n+                for (var i = 0; i < dungeons; i++) {\n+                    if(pi.startDungeonInstance(dungeonid + i)) {\n+                        pi.warpParty(dungeonid + i);\n+                        return true;\n+                    }\n+                }\n+            } else {\n+                pi.playerMessage(5, \"Only solo or party leaders are supposed to enter the Mini-Dungeon.\");\n+                return false;\n+            }\n+        } else {\n+            for (var i = 0; i < dungeons; i++) {\n+                if(pi.startDungeonInstance(dungeonid + i)) {\n+                    pi.warp(dungeonid + i);\n+                    return true;\n+                }\n+            }\n+        }\n+        pi.playerMessage(5, \"All of the Mini-Dungeons are in use right now, please try again later.\");\n+        return false;\n     } else {\n     \tpi.playPortalSound();\n     \tpi.warp(baseid, \"MD00\");"}, {"sha": "98c04d23a6168d98691a2983835c2d9400b1a506", "filename": "scripts/portal/MD_rabbit.js", "status": "modified", "additions": 22, "deletions": 22, "changes": 44, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/scripts/portal/MD_rabbit.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/scripts/portal/MD_rabbit.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/MD_rabbit.js?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -27,28 +27,28 @@ var dungeons = 30;\n \n function enter(pi) {\n     if (pi.getMapId() == baseid) {\n-\t\tif (pi.getParty() != null) {\n-\t\t    if (pi.isLeader()) {\n-\t\t\tfor (var i = 0; i < dungeons; i++) {\n-\t\t\t    if (pi.getPlayerCount(dungeonid + i) == 0) {\n-\t\t\t    \tpi.warpParty(dungeonid + i);\n-\t\t\t\treturn true;\n-\t\t\t    }\n-\t\t\t}\n-\t\t    } else {\n-\t\t    \tpi.playerMessage(5, \"Only solo or party leaders are supposed to enter the Mini-Dungeon.\");\n-\t\t    \treturn false;\n-\t\t    }\n-\t\t} else {\n-\t\t    for (var i = 0; i < dungeons; i++) {\n-\t\t\t\tif (pi.getPlayerCount(dungeonid + i) == 0) {\n-\t\t\t\t    pi.warp(dungeonid + i);\n-\t\t\t\t    return true;\n-\t\t\t\t}\n-\t\t    }\n-\t\t}\n-\t\tpi.playerMessage(5, \"All of the Mini-Dungeons are in use right now, please try again later.\");\n-\t\treturn false;\n+        if (pi.getParty() != null) {\n+            if (pi.isLeader()) {\n+                for (var i = 0; i < dungeons; i++) {\n+                    if(pi.startDungeonInstance(dungeonid + i)) {\n+                        pi.warpParty(dungeonid + i);\n+                        return true;\n+                    }\n+                }\n+            } else {\n+                pi.playerMessage(5, \"Only solo or party leaders are supposed to enter the Mini-Dungeon.\");\n+                return false;\n+            }\n+        } else {\n+            for (var i = 0; i < dungeons; i++) {\n+                if(pi.startDungeonInstance(dungeonid + i)) {\n+                    pi.warp(dungeonid + i);\n+                    return true;\n+                }\n+            }\n+        }\n+        pi.playerMessage(5, \"All of the Mini-Dungeons are in use right now, please try again later.\");\n+        return false;\n     } else {\n     \tpi.playPortalSound();\n     \tpi.warp(baseid, \"MD00\");"}, {"sha": "9f1c874aaa1e4f995a4e161c30d85f6bee4cbbe7", "filename": "scripts/portal/MD_remember.js", "status": "modified", "additions": 22, "deletions": 22, "changes": 44, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/scripts/portal/MD_remember.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/scripts/portal/MD_remember.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/MD_remember.js?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -27,28 +27,28 @@ var dungeons = 19;\n \n function enter(pi) {\n     if (pi.getMapId() == baseid) {\n-\t\tif (pi.getParty() != null) {\n-\t\t    if (pi.isLeader()) {\n-\t\t\tfor (var i = 0; i < dungeons; i++) {\n-\t\t\t    if (pi.getPlayerCount(dungeonid + i) == 0) {\n-\t\t\t    \tpi.warpParty(dungeonid + i);\n-\t\t\t\treturn true;\n-\t\t\t    }\n-\t\t\t}\n-\t\t    } else {\n-\t\t    \tpi.playerMessage(5, \"Only solo or party leaders are supposed to enter the Mini-Dungeon.\");\n-\t\t    \treturn false;\n-\t\t    }\n-\t\t} else {\n-\t\t    for (var i = 0; i < dungeons; i++) {\n-\t\t\t\tif (pi.getPlayerCount(dungeonid + i) == 0) {\n-\t\t\t\t    pi.warp(dungeonid + i);\n-\t\t\t\t    return true;\n-\t\t\t\t}\n-\t\t    }\n-\t\t}\n-\t\tpi.playerMessage(5, \"All of the Mini-Dungeons are in use right now, please try again later.\");\n-\t\treturn false;\n+        if (pi.getParty() != null) {\n+            if (pi.isLeader()) {\n+                for (var i = 0; i < dungeons; i++) {\n+                    if(pi.startDungeonInstance(dungeonid + i)) {\n+                        pi.warpParty(dungeonid + i);\n+                        return true;\n+                    }\n+                }\n+            } else {\n+                pi.playerMessage(5, \"Only solo or party leaders are supposed to enter the Mini-Dungeon.\");\n+                return false;\n+            }\n+        } else {\n+            for (var i = 0; i < dungeons; i++) {\n+                if(pi.startDungeonInstance(dungeonid + i)) {\n+                    pi.warp(dungeonid + i);\n+                    return true;\n+                }\n+            }\n+        }\n+        pi.playerMessage(5, \"All of the Mini-Dungeons are in use right now, please try again later.\");\n+        return false;\n     } else {\n     \tpi.playPortalSound();\n     \tpi.warp(baseid, \"MD00\");"}, {"sha": "df0aec42ab5a31142c0e44c0f3ada664e1918f52", "filename": "scripts/portal/MD_roundTable.js", "status": "modified", "additions": 23, "deletions": 23, "changes": 46, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/scripts/portal/MD_roundTable.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/scripts/portal/MD_roundTable.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/MD_roundTable.js?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -19,36 +19,36 @@\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n /*\n-MiniDungeon - Rabbit\n+MiniDungeon - Round Table\n */ \n var baseid = 240020500;\n var dungeonid = 240020512;\n var dungeons = 30;\n \n function enter(pi) {\n     if (pi.getMapId() == baseid) {\n-\t\tif (pi.getParty() != null) {\n-\t\t    if (pi.isLeader()) {\n-\t\t\tfor (var i = 0; i < dungeons; i++) {\n-\t\t\t    if (pi.getPlayerCount(dungeonid + i) == 0) {\n-\t\t\t    \tpi.warpParty(dungeonid + i);\n-\t\t\t\treturn true;\n-\t\t\t    }\n-\t\t\t}\n-\t\t    } else {\n-\t\t    \tpi.playerMessage(5, \"Only solo or party leaders are supposed to enter the Mini-Dungeon.\");\n-\t\t    \treturn false;\n-\t\t    }\n-\t\t} else {\n-\t\t    for (var i = 0; i < dungeons; i++) {\n-\t\t\t\tif (pi.getPlayerCount(dungeonid + i) == 0) {\n-\t\t\t\t    pi.warp(dungeonid + i);\n-\t\t\t\t    return true;\n-\t\t\t\t}\n-\t\t    }\n-\t\t}\n-\t\tpi.playerMessage(5, \"All of the Mini-Dungeons are in use right now, please try again later.\");\n-\t\treturn false;\n+        if (pi.getParty() != null) {\n+            if (pi.isLeader()) {\n+                for (var i = 0; i < dungeons; i++) {\n+                    if(pi.startDungeonInstance(dungeonid + i)) {\n+                        pi.warpParty(dungeonid + i);\n+                        return true;\n+                    }\n+                }\n+            } else {\n+                pi.playerMessage(5, \"Only solo or party leaders are supposed to enter the Mini-Dungeon.\");\n+                return false;\n+            }\n+        } else {\n+            for (var i = 0; i < dungeons; i++) {\n+                if(pi.startDungeonInstance(dungeonid + i)) {\n+                    pi.warp(dungeonid + i);\n+                    return true;\n+                }\n+            }\n+        }\n+        pi.playerMessage(5, \"All of the Mini-Dungeons are in use right now, please try again later.\");\n+        return false;\n     } else {\n     \tpi.playPortalSound();\n     \tpi.warp(baseid, \"MD00\");"}, {"sha": "d3d49f17b16b8cd2e0a534843128b257e767e93b", "filename": "scripts/portal/MD_sand.js", "status": "modified", "additions": 22, "deletions": 22, "changes": 44, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/scripts/portal/MD_sand.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/scripts/portal/MD_sand.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/MD_sand.js?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -27,28 +27,28 @@ var dungeons = 34;\n \n function enter(pi) {\n     if (pi.getMapId() == baseid) {\n-\t\tif (pi.getParty() != null) {\n-\t\t    if (pi.isLeader()) {\n-\t\t\tfor (var i = 0; i < dungeons; i++) {\n-\t\t\t    if (pi.getPlayerCount(dungeonid + i) == 0) {\n-\t\t\t    \tpi.warpParty(dungeonid + i);\n-\t\t\t\treturn true;\n-\t\t\t    }\n-\t\t\t}\n-\t\t    } else {\n-\t\t    \tpi.playerMessage(5, \"Only solo or party leaders are supposed to enter the Mini-Dungeon.\");\n-\t\t    \treturn false;\n-\t\t    }\n-\t\t} else {\n-\t\t    for (var i = 0; i < dungeons; i++) {\n-\t\t\t\tif (pi.getPlayerCount(dungeonid + i) == 0) {\n-\t\t\t\t    pi.warp(dungeonid + i);\n-\t\t\t\t    return true;\n-\t\t\t\t}\n-\t\t    }\n-\t\t}\n-\t\tpi.playerMessage(5, \"All of the Mini-Dungeons are in use right now, please try again later.\");\n-\t\treturn false;\n+        if (pi.getParty() != null) {\n+            if (pi.isLeader()) {\n+                for (var i = 0; i < dungeons; i++) {\n+                    if(pi.startDungeonInstance(dungeonid + i)) {\n+                        pi.warpParty(dungeonid + i);\n+                        return true;\n+                    }\n+                }\n+            } else {\n+                pi.playerMessage(5, \"Only solo or party leaders are supposed to enter the Mini-Dungeon.\");\n+                return false;\n+            }\n+        } else {\n+            for (var i = 0; i < dungeons; i++) {\n+                if(pi.startDungeonInstance(dungeonid + i)) {\n+                    pi.warp(dungeonid + i);\n+                    return true;\n+                }\n+            }\n+        }\n+        pi.playerMessage(5, \"All of the Mini-Dungeons are in use right now, please try again later.\");\n+        return false;\n     } else {\n     \tpi.playPortalSound();\n     \tpi.warp(baseid, \"MD00\");"}, {"sha": "f4c6e4b15d6f5a97c16cb70f750497cc05c7b5ee", "filename": "scripts/portal/MD_treasure.js", "status": "modified", "additions": 22, "deletions": 22, "changes": 44, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/scripts/portal/MD_treasure.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/scripts/portal/MD_treasure.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/MD_treasure.js?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -27,28 +27,28 @@ var dungeons = 30;\n \n function enter(pi) {\n     if (pi.getMapId() == baseid) {\n-\t\tif (pi.getParty() != null) {\n-\t\t    if (pi.isLeader()) {\n-\t\t\tfor (var i = 0; i < dungeons; i++) {\n-\t\t\t    if (pi.getPlayerCount(dungeonid + i) == 0) {\n-\t\t\t    \tpi.warpParty(dungeonid + i);\n-\t\t\t\treturn true;\n-\t\t\t    }\n-\t\t\t}\n-\t\t    } else {\n-\t\t    \tpi.playerMessage(5, \"Only solo or party leaders are supposed to enter the Mini-Dungeon.\");\n-\t\t    \treturn false;\n-\t\t    }\n-\t\t} else {\n-\t\t    for (var i = 0; i < dungeons; i++) {\n-\t\t\t\tif (pi.getPlayerCount(dungeonid + i) == 0) {\n-\t\t\t\t    pi.warp(dungeonid + i);\n-\t\t\t\t    return true;\n-\t\t\t\t}\n-\t\t    }\n-\t\t}\n-\t\tpi.playerMessage(5, \"All of the Mini-Dungeons are in use right now, please try again later.\");\n-\t\treturn false;\n+        if (pi.getParty() != null) {\n+            if (pi.isLeader()) {\n+                for (var i = 0; i < dungeons; i++) {\n+                    if(pi.startDungeonInstance(dungeonid + i)) {\n+                        pi.warpParty(dungeonid + i);\n+                        return true;\n+                    }\n+                }\n+            } else {\n+                pi.playerMessage(5, \"Only solo or party leaders are supposed to enter the Mini-Dungeon.\");\n+                return false;\n+            }\n+        } else {\n+            for (var i = 0; i < dungeons; i++) {\n+                if(pi.startDungeonInstance(dungeonid + i)) {\n+                    pi.warp(dungeonid + i);\n+                    return true;\n+                }\n+            }\n+        }\n+        pi.playerMessage(5, \"All of the Mini-Dungeons are in use right now, please try again later.\");\n+        return false;\n     } else {\n     \tpi.playPortalSound();\n     \tpi.warp(baseid, \"MD00\");"}, {"sha": "cccd26b8edcac4b7d9597151c908930763715146", "filename": "scripts/portal/TD_MC_first.js", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/scripts/portal/TD_MC_first.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/scripts/portal/TD_MC_first.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/TD_MC_first.js?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -1,5 +1,6 @@\n function enter(pi) {\n-\tif (pi.isQuestStarted(2301) || pi.isQuestCompleted(2301) \n+\tif (pi.isQuestStarted(2300) || pi.isQuestCompleted(2300)\n+                        || pi.isQuestStarted(2301) || pi.isQuestCompleted(2301) \n \t\t\t|| pi.isQuestStarted(2302) || pi.isQuestCompleted(2302) \n \t\t\t|| pi.isQuestStarted(2303) || pi.isQuestCompleted(2303)\n \t\t\t|| pi.isQuestStarted(2304) || pi.isQuestCompleted(2304) \n@@ -13,6 +14,6 @@ function enter(pi) {\n \t\tpi.warp(106020000, 0);\n \t\treturn true;\n \t}\n-\tpi.playerMessage(5, \"A strange force is blocking you from enetering\");\n+\tpi.playerMessage(5, \"A strange force is blocking you from entering.\");\n \treturn false;\n }\n\\ No newline at end of file"}, {"sha": "ca743768aa04afcba5382d416ea0d39bef640980", "filename": "src/client/MapleBuffStat.java", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/client/MapleBuffStat.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/client/MapleBuffStat.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/MapleBuffStat.java?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -115,7 +115,7 @@\n     COMBO_BARRIER(0x4000000000L, true),\n     BODY_PRESSURE(0x8000000000L, true),\n     SMART_KNOCKBACK(0x10000000000L, true),\n-    PYRAMID_PQ(0x20000000000L, true),\n+    BERSERK(0x20000000000L, true),\n     ENERGY_CHARGE(0x4000000000000L, true),\n     DASH2(0x8000000000000L, true), // correct (speed)\n     DASH(0x10000000000000L, true), // correct (jump)"}, {"sha": "6b5019e7764f437641e6c5a295e52b289f5bfbb6", "filename": "src/client/MapleCharacter.java", "status": "modified", "additions": 39, "deletions": 29, "changes": 68, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/client/MapleCharacter.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/client/MapleCharacter.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/MapleCharacter.java?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -49,6 +49,7 @@\n import java.util.concurrent.locks.Lock;\n import java.util.concurrent.ScheduledFuture;\n import java.util.concurrent.atomic.AtomicInteger;\n+import java.util.concurrent.atomic.AtomicBoolean;\n import java.util.regex.Pattern;\n \n import net.server.PlayerBuffValueHolder;\n@@ -196,14 +197,15 @@\n     private int married;\n     private long lastfametime, lastUsedCashItem, lastHealed, lastMesoDrop = -1, jailExpiration = -1;\n     private transient int localmaxhp, localmaxmp, localstr, localdex, localluk, localint_, magic, watk;\n-    private boolean hidden, canDoor = true, Berserk, hasMerchant, whiteChat = false;\n+    private boolean hidden, canDoor = true, berserk, hasMerchant, whiteChat = false;\n     private int linkedLevel = 0;\n     private String linkedName = null;\n     private boolean finishedDojoTutorial;\n     private String name;\n     private String chalktext;\n     private String dataString;\n     private String search = null;\n+    private AtomicBoolean awayFromWorld = new AtomicBoolean(true);  // player is online, but on cash shop or mts\n     private AtomicInteger exp = new AtomicInteger();\n     private AtomicInteger gachaexp = new AtomicInteger();\n     private AtomicInteger meso = new AtomicInteger();\n@@ -253,7 +255,7 @@\n     private Map<Integer, MapleDoor> doors = new LinkedHashMap<>();\n     private ScheduledFuture<?> dragonBloodSchedule;\n     private ScheduledFuture<?> hpDecreaseTask;\n-    private ScheduledFuture<?> beholderHealingSchedule, beholderBuffSchedule, BerserkSchedule;\n+    private ScheduledFuture<?> beholderHealingSchedule, beholderBuffSchedule, berserkSchedule;\n     private ScheduledFuture<?> skillCooldownTask = null;\n     private ScheduledFuture<?> buffExpireTask = null;\n     private ScheduledFuture<?> itemExpireTask = null;\n@@ -411,6 +413,14 @@ public static MapleCharacter getDefault(MapleClient c) {\n         return ret;\n     }\n     \n+    public boolean getAwayFromWorld() {\n+        return awayFromWorld.get();\n+    }\n+    \n+    public void setAwayFromWorld(boolean away) {\n+        awayFromWorld.set(away);\n+    }\n+    \n     public long getPetLootCd() {\n         return petLootCd;\n     }\n@@ -1238,6 +1248,7 @@ private boolean buffMapProtection() {\n     private void changeMapInternal(final MapleMap to, final Point pos, final byte[] warpPacket) {\n         if(!canWarpMap) return;\n         \n+        this.stopChairTask();\n         this.clearBanishPlayerData();\n         this.closePlayerInteractions();\n         this.resetPlayerAggro();\n@@ -1325,21 +1336,23 @@ public void changeType(int type) {\n     }\n \n     public void checkBerserk(final boolean isHidden) {\n-        if (BerserkSchedule != null) {\n-            BerserkSchedule.cancel(false);\n+        if (berserkSchedule != null) {\n+            berserkSchedule.cancel(false);\n         }\n         final MapleCharacter chr = this;\n         if (job.equals(MapleJob.DARKKNIGHT)) {\n             Skill BerserkX = SkillFactory.getSkill(DarkKnight.BERSERK);\n             final int skilllevel = getSkillLevel(BerserkX);\n             if (skilllevel > 0) {\n-                Berserk = chr.getHp() * 100 / chr.getMaxHp() < BerserkX.getEffect(skilllevel).getX();\n-                BerserkSchedule = TimerManager.getInstance().register(new Runnable() {\n+                berserk = chr.getHp() * 100 / chr.getMaxHp() < BerserkX.getEffect(skilllevel).getX();\n+                berserkSchedule = TimerManager.getInstance().register(new Runnable() {\n                     @Override\n                     public void run() {\n-                        client.announce(MaplePacketCreator.showOwnBerserk(skilllevel, Berserk));\n-                        if(!isHidden) getMap().broadcastMessage(MapleCharacter.this, MaplePacketCreator.showBerserk(getId(), skilllevel, Berserk), false);\n-                        else getMap().broadcastGMMessage(MapleCharacter.this, MaplePacketCreator.showBerserk(getId(), skilllevel, Berserk), false);\n+                        if(awayFromWorld.get()) return;\n+                        \n+                        client.announce(MaplePacketCreator.showOwnBerserk(skilllevel, berserk));\n+                        if(!isHidden) getMap().broadcastMessage(MapleCharacter.this, MaplePacketCreator.showBerserk(getId(), skilllevel, berserk), false);\n+                        else getMap().broadcastGMMessage(MapleCharacter.this, MaplePacketCreator.showBerserk(getId(), skilllevel, berserk), false);\n                     }\n                 }, 5000, 3000);\n             }\n@@ -2747,8 +2760,8 @@ private void debugListAllBuffsCount() {\n         }\n     }\n     \n-    public void cancelAllBuffs(boolean disconnect) {\n-        if (disconnect) {\n+    public void cancelAllBuffs(boolean softcancel) {\n+        if (softcancel) {\n             effLock.lock();\n             chrLock.lock();\n             try {\n@@ -2762,33 +2775,23 @@ public void cancelAllBuffs(boolean disconnect) {\n                 effLock.unlock();\n             }\n         } else {\n-            List<MapleBuffStatValueHolder> mbsvhList;\n-            \n+            Map<MapleStatEffect, Long> mseBuffs = new LinkedHashMap<>();\n+\n             effLock.lock();\n             chrLock.lock();\n             try {\n-                List<Pair<Integer, MapleBuffStat>> mbls = new LinkedList<>();\n-                \n                 for(Entry<Integer, Map<MapleBuffStat, MapleBuffStatValueHolder>> bpl : buffEffects.entrySet()) {\n                     for(Entry<MapleBuffStat, MapleBuffStatValueHolder> mbse : bpl.getValue().entrySet()) {\n-                        if(effects.get(mbse.getKey()) != mbse.getValue()) {\n-                            mbls.add(new Pair<>(bpl.getKey(), mbse.getKey()));\n-                        }\n+                        mseBuffs.put(mbse.getValue().effect, mbse.getValue().startTime);\n                     }\n                 }\n-                \n-                for(Pair<Integer, MapleBuffStat> pmbs : mbls) {\n-                    removeEffectFromItemEffectHolder(pmbs.getLeft(), pmbs.getRight());\n-                }\n-                \n-                mbsvhList = new ArrayList<>(effects.values());\n             } finally {\n                 chrLock.unlock();\n                 effLock.unlock();\n             }\n-            \n-            for (MapleBuffStatValueHolder mbsvh : mbsvhList) {\n-                cancelEffect(mbsvh.effect, false, mbsvh.startTime);\n+\n+            for (Entry<MapleStatEffect, Long> mse : mseBuffs.entrySet()) {\n+                cancelEffect(mse.getKey(), false, mse.getValue());\n             }\n         }\n     }\n@@ -3182,6 +3185,8 @@ public void registerEffect(MapleStatEffect effect, long starttime, long expirati\n                 beholderHealingSchedule = TimerManager.getInstance().register(new Runnable() {\n                     @Override\n                     public void run() {\n+                        if(awayFromWorld.get()) return;\n+                        \n                         addHP(healEffect.getHp());\n                         client.announce(MaplePacketCreator.showOwnBuffEffect(beholder, 2));\n                         getMap().broadcastMessage(MapleCharacter.this, MaplePacketCreator.summonSkill(getId(), beholder, 5), true);\n@@ -3196,6 +3201,8 @@ public void run() {\n                 beholderBuffSchedule = TimerManager.getInstance().register(new Runnable() {\n                     @Override\n                     public void run() {\n+                        if(awayFromWorld.get()) return;\n+                        \n                         buffEffect.applyTo(MapleCharacter.this);\n                         client.announce(MaplePacketCreator.showOwnBuffEffect(beholder, 2));\n                         getMap().broadcastMessage(MapleCharacter.this, MaplePacketCreator.summonSkill(getId(), beholder, (int) (Math.random() * 3) + 6), true);\n@@ -5713,6 +5720,8 @@ private void prepareDragonBlood(final MapleStatEffect bloodEffect) {\n         dragonBloodSchedule = TimerManager.getInstance().register(new Runnable() {\n             @Override\n             public void run() {\n+                if(awayFromWorld.get()) return;\n+                \n                 addHP(-bloodEffect.getX());\n                 client.announce(MaplePacketCreator.showOwnBuffEffect(bloodEffect.getSourceId(), 5));\n                 getMap().broadcastMessage(MapleCharacter.this, MaplePacketCreator.showBuffeffect(getId(), bloodEffect.getSourceId(), 5), false);\n@@ -7771,8 +7780,8 @@ public final void empty(final boolean remove) {\n         if (beholderBuffSchedule != null) {\n             beholderBuffSchedule.cancel(false);\n         }\n-        if (BerserkSchedule != null) {\n-            BerserkSchedule.cancel(false);\n+        if (berserkSchedule != null) {\n+            berserkSchedule.cancel(false);\n         }\n         if (recoveryTask != null) {\n             recoveryTask.cancel(false);\n@@ -7785,6 +7794,7 @@ public final void empty(final boolean remove) {\n         cancelDiseaseExpireTask();\n         cancelSkillCooldownTask();\n         cancelExpirationTask();\n+        stopChairTask();\n         \n         for (ScheduledFuture<?> sf : timers) {\n             sf.cancel(false);"}, {"sha": "588b9827706b2d61bd778fd101b156a2997fdfae", "filename": "src/client/MapleClient.java", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/client/MapleClient.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/client/MapleClient.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/MapleClient.java?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -787,6 +787,7 @@ public boolean checkBirthDate(Calendar date) {\n \n \tprivate void removePlayer() {\n \t\ttry {\n+                        player.setAwayFromWorld(true);\n \t\t\tplayer.cancelAllBuffs(true);\n \t\t\tplayer.cancelAllDebuffs();\n                         \n@@ -1290,7 +1291,12 @@ public void changeChannel(int channel) {\n \t\tif (!player.isAlive() || FieldLimit.CANNOTMIGRATE.check(player.getMap().getFieldLimit())) {\n \t\t\tannounce(MaplePacketCreator.enableActions());\n \t\t\treturn;\n-\t\t}\n+\t\t} else if(MapleMiniDungeonInfo.isDungeonMap(player.getMapId())) {\n+                        announce(MaplePacketCreator.serverNotice(5, \"Changing channels or entering Cash Shop or MTS are disabled when inside a Mini-Dungeon.\"));\n+                        announce(MaplePacketCreator.enableActions());\n+\t\t\treturn;\n+                }\n+                \n \t\tString[] socket = Server.getInstance().getIP(getWorld(), channel).split(\":\");\n \t\tif (player.getTrade() != null) {\n \t\t\tMapleTrade.cancelTrade(getPlayer());\n@@ -1305,10 +1311,12 @@ public void changeChannel(int channel) {\n \t\t\t}\n \t\t}\n \t\tserver.getPlayerBuffStorage().addBuffsToStorage(player.getId(), player.getAllBuffs());\n+                player.setAwayFromWorld(true);\n \t\tplayer.cancelAllBuffs(true);\n                 player.cancelBuffExpireTask();\n                 player.cancelDiseaseExpireTask();\n                 player.cancelSkillCooldownTask();\n+                player.stopChairTask();\n \t\t//Cancelling magicdoor? Nope\n \t\t//Cancelling mounts? Noty\n \t\tif (player.getBuffedValue(MapleBuffStat.PUPPET) != null) {"}, {"sha": "b866695646906e3d642285fe83bbb5f57cb53004", "filename": "src/client/autoban/AutobanManager.java", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/client/autoban/AutobanManager.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/client/autoban/AutobanManager.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/autoban/AutobanManager.java?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -93,8 +93,8 @@ public long getLastSpam(int type) {\n      *  <code>type</code>:<br>\n      * 0: HealOverTime<br>\n      * 1: Pet Food<br>\n-     * 2: ItemSort<br>\n-     * 3: ItemIdSort<br>\n+     * 2: ItemMerge<br>\n+     * 3: ItemSort<br>\n      * 4: SpecialMove<br>\n      * 5: UseCatchItem<br>\n      * 6: Item Drop<br>"}, {"sha": "c4e30c1bb37aa65d124bb966470270409ababc1e", "filename": "src/client/inventory/MapleInventory.java", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/client/inventory/MapleInventory.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/client/inventory/MapleInventory.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/inventory/MapleInventory.java?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -212,10 +212,9 @@ public void move(short sSlot, short dSlot, short slotMax) {\n                 inventory.put(dSlot, source);\n                 inventory.remove(sSlot);\n             } else if (target.getItemId() == source.getItemId() && !ItemConstants.isRechargable(source.getItemId())) {\n-                if (type.getType() == MapleInventoryType.EQUIP.getType()) {\n+                if (type.getType() == MapleInventoryType.EQUIP.getType() || type.getType() == MapleInventoryType.CASH.getType()) {\n                     swap(target, source);\n-                }\n-                if (source.getQuantity() + target.getQuantity() > slotMax) {\n+                } else if (source.getQuantity() + target.getQuantity() > slotMax) {\n                     short rest = (short) ((source.getQuantity() + target.getQuantity()) - slotMax);\n                     source.setQuantity(rest);\n                     target.setQuantity(slotMax);"}, {"sha": "d088e3cbd33136fdc87e8da8bbf6610e0be89bb0", "filename": "src/net/PacketProcessor.java", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/net/PacketProcessor.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/net/PacketProcessor.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/PacketProcessor.java?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -132,7 +132,7 @@ public void reset(int channel) {\n             registerHandler(RecvOpcode.NPC_TALK_MORE, new NPCMoreTalkHandler());\n             registerHandler(RecvOpcode.QUEST_ACTION, new QuestActionHandler());\n             registerHandler(RecvOpcode.NPC_SHOP, new NPCShopHandler());\n-            registerHandler(RecvOpcode.ITEM_SORT, new ItemSortHandler());\n+            registerHandler(RecvOpcode.ITEM_SORT, new InventoryMergeHandler());\n             registerHandler(RecvOpcode.ITEM_MOVE, new ItemMoveHandler());\n             registerHandler(RecvOpcode.MESO_DROP, new MesoDropHandler());\n             registerHandler(RecvOpcode.PLAYER_LOGGEDIN, new PlayerLoggedinHandler());\n@@ -237,7 +237,7 @@ public void reset(int channel) {\n             registerHandler(RecvOpcode.MOB_DAMAGE_MOB_FRIENDLY, new MobDamageMobFriendlyHandler());\n             registerHandler(RecvOpcode.PARTY_SEARCH_REGISTER, new PartySearchRegisterHandler());\n             registerHandler(RecvOpcode.PARTY_SEARCH_START, new PartySearchStartHandler());\n-            registerHandler(RecvOpcode.ITEM_SORT2, new ItemIdSortHandler());\n+            registerHandler(RecvOpcode.ITEM_SORT2, new InventorySortHandler());\n             registerHandler(RecvOpcode.LEFT_KNOCKBACK, new LeftKnockbackHandler());\n             registerHandler(RecvOpcode.SNOWBALL, new SnowballHandler());\n             registerHandler(RecvOpcode.COCONUT, new CoconutHandler());"}, {"sha": "238b3ca35447be9cc2bd021a24b8911b05e4542a", "filename": "src/net/server/channel/Channel.java", "status": "modified", "additions": 44, "deletions": 3, "changes": 47, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/net/server/channel/Channel.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/net/server/channel/Channel.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/Channel.java?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -32,6 +32,8 @@\n import java.util.Map.Entry;\n import java.util.Set;\n import java.util.concurrent.ScheduledFuture;\n+import java.util.concurrent.locks.Lock;\n+import java.util.concurrent.locks.ReentrantLock;\n import java.util.concurrent.locks.ReentrantReadWriteLock;\n import java.util.concurrent.locks.ReentrantReadWriteLock.ReadLock;\n import java.util.concurrent.locks.ReentrantReadWriteLock.WriteLock;\n@@ -60,9 +62,11 @@\n import server.maps.MapleHiredMerchant;\n import server.maps.MapleMap;\n import server.maps.MapleMapFactory;\n+import server.maps.MapleMiniDungeon;\n import tools.MaplePacketCreator;\n import client.MapleCharacter;\n import constants.ServerConstants;\n+import server.maps.MapleMiniDungeonInfo;\n \n public final class Channel {\n \n@@ -75,9 +79,6 @@\n     private EventScriptManager eventSM;\n     private Map<Integer, MapleHiredMerchant> hiredMerchants = new HashMap<>();\n     private final Map<Integer, Integer> storedVars = new HashMap<>();\n-    private ReentrantReadWriteLock merchant_lock = new ReentrantReadWriteLock(true);\n-    private ReadLock merchRlock = merchant_lock.readLock();\n-    private WriteLock merchWlock = merchant_lock.writeLock();\n     private List<MapleExpedition> expeditions = new ArrayList<>();\n     private List<MapleExpeditionType> expedType = new ArrayList<>();\n     private MapleEvent event;\n@@ -87,6 +88,13 @@\n     private long[] dojoFinishTime;\n     private ScheduledFuture<?>[] dojoTask;\n     private Map<Integer, Integer> dojoParty = new HashMap<>();\n+    private Map<Integer, MapleMiniDungeon> dungeons = new HashMap<>();\n+    \n+    private ReentrantReadWriteLock merchant_lock = new ReentrantReadWriteLock(true);\n+    private ReadLock merchRlock = merchant_lock.readLock();\n+    private WriteLock merchWlock = merchant_lock.writeLock();\n+    \n+    private Lock lock = new ReentrantLock();\n     \n     public Channel(final int world, final int channel) {\n         this.world = world;\n@@ -485,4 +493,37 @@ public boolean setDojoProgress(int dojoMapId) {\n     public long getDojoFinishTime(int dojoMapId) {\n         return dojoFinishTime[getDojoSlot(dojoMapId)];\n     }\n+    \n+    public boolean addMiniDungeon(int dungeonid) {\n+        lock.lock();\n+        try {\n+            if(dungeons.containsKey(dungeonid)) return false;\n+            \n+            MapleMiniDungeonInfo mmdi = MapleMiniDungeonInfo.getDungeon(dungeonid);\n+            MapleMiniDungeon mmd = new MapleMiniDungeon(mmdi.getBase(), 30);    // all minidungeons timeouts on 30 mins\n+            \n+            dungeons.put(dungeonid, mmd);\n+            return true;\n+        } finally {\n+            lock.unlock();\n+        }\n+    }\n+    \n+    public MapleMiniDungeon getMiniDungeon(int dungeonid) {\n+        lock.lock();\n+        try {\n+            return dungeons.get(dungeonid);\n+        } finally {\n+            lock.unlock();\n+        }\n+    }\n+    \n+    public void removeMiniDungeon(int dungeonid) {\n+        lock.lock();\n+        try {\n+            dungeons.remove(dungeonid);\n+        } finally {\n+            lock.unlock();\n+        }\n+    }\n }\n\\ No newline at end of file"}, {"sha": "c72907d663ab210f838b8b57fb42c0f94747c096", "filename": "src/net/server/channel/handlers/DoorHandler.java", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/net/server/channel/handlers/DoorHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/net/server/channel/handlers/DoorHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/DoorHandler.java?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -30,7 +30,6 @@\n /**\n  *\n  * @author Matze\n- * @author Ronan\n  */\n public final class DoorHandler extends AbstractMaplePacketHandler {\n     @Override"}, {"sha": "61ebe9dd46234b0420305854f518411e608672f2", "filename": "src/net/server/channel/handlers/EnterCashShopHandler.java", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/net/server/channel/handlers/EnterCashShopHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/net/server/channel/handlers/EnterCashShopHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/EnterCashShopHandler.java?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -25,6 +25,7 @@\n import client.MapleClient;\n import net.AbstractMaplePacketHandler;\n import net.server.Server;\n+import server.maps.MapleMiniDungeonInfo;\n import tools.MaplePacketCreator;\n import tools.data.input.SeekableLittleEndianAccessor;\n \n@@ -41,6 +42,13 @@ public void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {\n             if (mc.cannotEnterCashShop()) {\n                 c.announce(MaplePacketCreator.enableActions());\n                 return;\n+                \n+            }\n+            \n+            if(MapleMiniDungeonInfo.isDungeonMap(c.getPlayer().getMapId())) {\n+                c.announce(MaplePacketCreator.serverNotice(5, \"Changing channels or entering Cash Shop or MTS are disabled when inside a Mini-Dungeon.\"));\n+                c.announce(MaplePacketCreator.enableActions());\n+                return;\n             }\n             \n             if (mc.getCashShop().isOpened()) {\n@@ -50,11 +58,13 @@ public void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {\n             mc.closePlayerInteractions();\n \n             Server.getInstance().getPlayerBuffStorage().addBuffsToStorage(mc.getId(), mc.getAllBuffs());\n+            mc.setAwayFromWorld(true);\n             mc.cancelAllBuffs(true);\n             mc.cancelBuffExpireTask();\n             mc.cancelDiseaseExpireTask();\n             mc.cancelSkillCooldownTask();\n             mc.cancelExpirationTask();\n+            mc.stopChairTask();\n \n             c.announce(MaplePacketCreator.openCashShop(c, false));\n             c.announce(MaplePacketCreator.showCashInventory(c));"}, {"sha": "188860ddf6eb3fa37e0f29767db0866e21890f57", "filename": "src/net/server/channel/handlers/EnterMTSHandler.java", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/net/server/channel/handlers/EnterMTSHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/net/server/channel/handlers/EnterMTSHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/EnterMTSHandler.java?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -36,6 +36,7 @@\n import net.AbstractMaplePacketHandler;\n import net.server.Server;\n import server.MTSItemInfo;\n+import server.maps.MapleMiniDungeonInfo;\n import tools.DatabaseConnection;\n import tools.MaplePacketCreator;\n import tools.data.input.SeekableLittleEndianAccessor;\n@@ -47,6 +48,13 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n             c.announce(MaplePacketCreator.enableActions());\n             return;\n     \t}\n+        \n+        if(MapleMiniDungeonInfo.isDungeonMap(c.getPlayer().getMapId())) {\n+            c.announce(MaplePacketCreator.serverNotice(5, \"Changing channels or entering Cash Shop or MTS are disabled when inside a Mini-Dungeon.\"));\n+            c.announce(MaplePacketCreator.enableActions());\n+            return;\n+        }\n+        \n         MapleCharacter chr = c.getPlayer();\n         if (!chr.isAlive()) {\n             c.announce(MaplePacketCreator.enableActions());\n@@ -59,11 +67,14 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n         }\n         \n         Server.getInstance().getPlayerBuffStorage().addBuffsToStorage(chr.getId(), chr.getAllBuffs());\n+        chr.setAwayFromWorld(true);\n         chr.cancelAllBuffs(true);\n         chr.cancelBuffExpireTask();\n         chr.cancelDiseaseExpireTask();\n         chr.cancelSkillCooldownTask();\n         chr.cancelExpirationTask();\n+        chr.stopChairTask();\n+        \n         chr.saveToDB();\n         chr.getMap().removePlayer(c.getPlayer());\n         try {"}, {"sha": "92ffad463b4990cd7e2c3afb282befa983da3b96", "filename": "src/net/server/channel/handlers/InventoryMergeHandler.java", "status": "renamed", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/net/server/channel/handlers/InventoryMergeHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/net/server/channel/handlers/InventoryMergeHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/InventoryMergeHandler.java?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -33,7 +33,7 @@\n import client.inventory.MapleInventoryType;\n import server.MapleItemInformationProvider;\n \n-public final class ItemSortHandler extends AbstractMaplePacketHandler {\n+public final class InventoryMergeHandler extends AbstractMaplePacketHandler {\n \n     @Override\n     public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {\n@@ -67,7 +67,7 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                 MapleInventoryManipulator.move(c, inventoryType, src, dst);\n             }\n         }\n-                \n+        \n         //------------------------------------------------------------\n                 \n         inventory = c.getPlayer().getInventory(inventoryType);", "previous_filename": "src/net/server/channel/handlers/ItemSortHandler.java"}, {"sha": "ac7601feec366b9273d621f5449d5440f16bf1bf", "filename": "src/net/server/channel/handlers/InventorySortHandler.java", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/net/server/channel/handlers/InventorySortHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/net/server/channel/handlers/InventorySortHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/InventorySortHandler.java?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -183,7 +183,7 @@ public PairedQuicksort(ArrayList<Item> A, int primarySort, int secondarySort) {\n     }\n }\n \n-public final class ItemIdSortHandler extends AbstractMaplePacketHandler {\n+public final class InventorySortHandler extends AbstractMaplePacketHandler {\n     @Override\n     public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {\n         MapleCharacter chr = c.getPlayer();", "previous_filename": "src/net/server/channel/handlers/ItemIdSortHandler.java"}, {"sha": "c75f083c0e9bddf47111f24e8a2e4b671e75bbff", "filename": "src/net/server/channel/handlers/PartySearchStartHandler.java", "status": "modified", "additions": 20, "deletions": 16, "changes": 36, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/net/server/channel/handlers/PartySearchStartHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/net/server/channel/handlers/PartySearchStartHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/PartySearchStartHandler.java?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -33,47 +33,51 @@\n import client.MapleClient;\n import client.MapleJob;\n import constants.ServerConstants;\n+import net.server.world.MaplePartyCharacter;\n+import net.server.world.PartyOperation;\n+import net.server.world.World;\n \n /**\n  *\n  * @author XoticStory\n  * @author BubblesDev\n  */\n public class PartySearchStartHandler extends AbstractMaplePacketHandler {\n+        @Override\n \tpublic void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {\n \t\tif(!ServerConstants.USE_PARTY_SEARCH){\n \t\t\treturn;\n \t\t}\n+                \n \t\tint min = slea.readInt();\n \t\tint max = slea.readInt();\n \t\tslea.readInt(); // members\n \t\tint jobs = slea.readInt();\n+                \n+                MapleParty party = c.getPlayer().getParty();\n+                if(party == null) return;\n+                \n \t\tMapleCharacter chr = c.getPlayer();\n \t\tMapleMap map = chr.getMap();\n+                World world = c.getWorldServer();\n+                \n \t\tCollection<MapleMapObject> mapobjs = map.getPlayers();\n+                \n \t\tfor (MapleMapObject mapobj : mapobjs) {\n-\t\t\tif (chr.getParty().getMembers().size() > 5) {\n+\t\t\tif (party.getMembers().size() > 5) {\n \t\t\t\tbreak;\n \t\t\t}\n \t\t\tif (mapobj instanceof MapleCharacter) {\n \t\t\t\tMapleCharacter tchar = (MapleCharacter) mapobj;\n \t\t\t\tint charlvl = tchar.getLevel();\n \t\t\t\tif (charlvl >= min && charlvl <= max && isValidJob(tchar.getJob(), jobs)) {\n-\t\t\t\t\tif (c.getPlayer().getParty() == null) {\n-\t\t\t\t\t\t//WorldChannelInterface wci = c.getChannelServer().getWorldInterface();\n-\t\t\t\t\t\tMapleParty party = c.getPlayer().getParty();\n-\t\t\t\t\t\t//int partyid = party.getId();\n-\t\t\t\t\t\t//party = null;//.getParty(partyid);\n-\t\t\t\t\t\tif (party != null) {\n-\t\t\t\t\t\t\tif (party.getMembers().size() < 6) {\n-\t\t\t\t\t\t\t\t//MaplePartyCharacter partyplayer = tchar.getMPC();\n-\t\t\t\t\t\t\t\t//wci.updateParty(party.getId(), PartyOperation.JOIN, partyplayer);\n-\t\t\t\t\t\t\t\tc.getPlayer().receivePartyMemberHP();\n-\t\t\t\t\t\t\t\tc.getPlayer().updatePartyMemberHP();\n-\t\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\t\tc.announce(MaplePacketCreator.partyStatusMessage(17));\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t}\n+\t\t\t\t\tif (tchar.getParty() == null) {\n+                                                MaplePartyCharacter partyplayer = new MaplePartyCharacter(tchar);\n+                                                tchar.getMap().addPartyMember(tchar);\n+\n+                                                world.updateParty(party.getId(), PartyOperation.JOIN, partyplayer);\n+                                                tchar.receivePartyMemberHP();\n+                                                tchar.updatePartyMemberHP();\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}"}, {"sha": "bf6759745eadde04d537ac989918ea048630d0e8", "filename": "src/net/server/channel/handlers/PlayerLoggedinHandler.java", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/net/server/channel/handlers/PlayerLoggedinHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/net/server/channel/handlers/PlayerLoggedinHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/PlayerLoggedinHandler.java?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -172,6 +172,8 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n         player.getMap().addPlayer(player);\n         World world = server.getWorld(c.getWorld());\n         world.getPlayerStorage().addPlayer(player);\n+        \n+        player.setAwayFromWorld(false);\n             \n         int buddyIds[] = player.getBuddylist().getBuddyIds();\n         world.loggedOn(player.getName(), player.getId(), c.getChannel(), buddyIds);"}, {"sha": "39a960afee3a2bc608bfa2b12e80abd162a5eabd", "filename": "src/scripting/AbstractPlayerInteraction.java", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/scripting/AbstractPlayerInteraction.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/scripting/AbstractPlayerInteraction.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/scripting/AbstractPlayerInteraction.java?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -46,6 +46,7 @@\n import server.maps.MapleMap;\n import server.maps.MapleMapObject;\n import server.maps.MapleMapObjectType;\n+import server.maps.MapleMiniDungeon;\n import server.partyquest.PartyQuest;\n import server.partyquest.Pyramid;\n import server.quest.MapleQuest;\n@@ -922,4 +923,7 @@ public long getJailTimeLeft() {\n                 return list;\n         }\n         \n+        public boolean startDungeonInstance(int dungeonid) {\n+                return c.getChannelServer().addMiniDungeon(dungeonid);\n+        }\n }"}, {"sha": "a8b846027ff9c0491d86f51201c9cb0fff632290", "filename": "src/scripting/event/EventInstanceManager.java", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/scripting/event/EventInstanceManager.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/scripting/event/EventInstanceManager.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/scripting/event/EventInstanceManager.java?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -282,6 +282,7 @@ public void startEventTimer(long time) {\n                 }\n                 \n                 event_schedule = TimerManager.getInstance().schedule(new Runnable() {\n+                        @Override\n                         public void run() {\n                                 try {\n                                         dismissEventTimer();"}, {"sha": "8be55f8cc37664541601ed768b8a6ab1f2a20c17", "filename": "src/server/MapleInventoryManipulator.java", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/server/MapleInventoryManipulator.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/server/MapleInventoryManipulator.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/MapleInventoryManipulator.java?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -355,15 +355,18 @@ public static void removeById(MapleClient c, MapleInventoryType type, int itemId\n \n     public static void move(MapleClient c, MapleInventoryType type, short src, short dst) {\n         if (src < 0 || dst < 0) {\n+            System.out.println(\"src \" + src + \" dst \" + dst);\n+            return;\n+        }\n+        if(dst > c.getPlayer().getInventory(type).getSlotLimit()) {\n+            System.out.println(\"slim \" + c.getPlayer().getInventory(type).getSlotLimit() + \" dst \" + dst);\n             return;\n         }\n-\t\tif(dst > c.getPlayer().getInventory(type).getSlotLimit()) {\n-\t\t\treturn;\n-\t\t}\n         MapleItemInformationProvider ii = MapleItemInformationProvider.getInstance();\n         Item source = c.getPlayer().getInventory(type).getItem(src);\n         Item initialTarget = c.getPlayer().getInventory(type).getItem(dst);\n         if (source == null) {\n+            System.out.println(\"null\");\n             return;\n         }\n         short olddstQ = -1;\n@@ -374,7 +377,7 @@ public static void move(MapleClient c, MapleInventoryType type, short src, short\n         short slotMax = ii.getSlotMax(c, source.getItemId());\n         c.getPlayer().getInventory(type).move(src, dst, slotMax);\n         final List<ModifyInventory> mods = new ArrayList<>();\n-        if (!type.equals(MapleInventoryType.EQUIP) && initialTarget != null && initialTarget.getItemId() == source.getItemId() && !ItemConstants.isRechargable(source.getItemId())) {\n+        if (!(type.equals(MapleInventoryType.EQUIP) || type.equals(MapleInventoryType.CASH)) && initialTarget != null && initialTarget.getItemId() == source.getItemId() && !ItemConstants.isRechargable(source.getItemId())) {\n             if ((olddstQ + oldsrcQ) > slotMax) {\n                 mods.add(new ModifyInventory(1, source));\n                 mods.add(new ModifyInventory(1, initialTarget));"}, {"sha": "b994f095a312c3a69513ef69e2547aa1197501cd", "filename": "src/server/MapleStatEffect.java", "status": "modified", "additions": 18, "deletions": 12, "changes": 30, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/server/MapleStatEffect.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/server/MapleStatEffect.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/MapleStatEffect.java?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -202,14 +202,6 @@ private static MapleStatEffect loadFromData(MapleData source, int sourceid, bool\n         ret.speed = (short) MapleDataTool.getInt(\"speed\", source, 0);\n         ret.jump = (short) MapleDataTool.getInt(\"jump\", source, 0);\n         \n-        if((sourceid == Beginner.NIMBLE_FEET || sourceid == Noblesse.NIMBLE_FEET || sourceid == Evan.NIMBLE_FEET || sourceid == Legend.AGILE_BODY) && ServerConstants.USE_ULTRA_NIMBLE_FEET == true) {\n-            ret.jump = (short)(ret.speed * 4);\n-            ret.speed *= 15;\n-        }\n-        \n-        ret.berserk = MapleDataTool.getInt(\"berserk\", source, 0);\n-        ret.booster = MapleDataTool.getInt(\"booster\", source, 0);\n-        \n         ret.mapProtection = mapProtection(sourceid);\n         addBuffStatPairToListIfNotZero(statups, MapleBuffStat.MAP_PROTECTION, Integer.valueOf(ret.mapProtection));\n                     \n@@ -222,11 +214,16 @@ private static MapleStatEffect loadFromData(MapleData source, int sourceid, bool\n             addBuffStatPairToListIfNotZero(statups, MapleBuffStat.AVOID, Integer.valueOf(ret.avoid));\n             addBuffStatPairToListIfNotZero(statups, MapleBuffStat.SPEED, Integer.valueOf(ret.speed));\n             addBuffStatPairToListIfNotZero(statups, MapleBuffStat.JUMP, Integer.valueOf(ret.jump));\n-            addBuffStatPairToListIfNotZero(statups, MapleBuffStat.PYRAMID_PQ, Integer.valueOf(ret.berserk));\n-            addBuffStatPairToListIfNotZero(statups, MapleBuffStat.BOOSTER, Integer.valueOf(ret.booster));\n             \n             if(!skill) {\n-                if(isDojoBuff(sourceid) || sourceid == 2022337) {\n+                if(isPyramidBuff(sourceid)) {\n+                    ret.berserk = MapleDataTool.getInt(\"berserk\", source, 0);\n+                    ret.booster = MapleDataTool.getInt(\"booster\", source, 0);\n+                    \n+                    addBuffStatPairToListIfNotZero(statups, MapleBuffStat.BERSERK, Integer.valueOf(ret.berserk));\n+                    addBuffStatPairToListIfNotZero(statups, MapleBuffStat.BOOSTER, Integer.valueOf(ret.booster));\n+                    \n+                } else if(isDojoBuff(sourceid) || sourceid == 2022337) {\n                     ret.mhpR = (byte) MapleDataTool.getInt(\"mhpR\", source, 0);\n                     ret.mhpRRate = (short) (MapleDataTool.getInt(\"mhpRRate\", source, 0) * 100);\n                     ret.mmpR = (byte) MapleDataTool.getInt(\"mmpR\", source, 0);\n@@ -268,6 +265,11 @@ private static MapleStatEffect loadFromData(MapleData source, int sourceid, bool\n                             break;\n                     }\n                 }\n+            } else {\n+                if((sourceid == Beginner.NIMBLE_FEET || sourceid == Noblesse.NIMBLE_FEET || sourceid == Evan.NIMBLE_FEET || sourceid == Legend.AGILE_BODY) && ServerConstants.USE_ULTRA_NIMBLE_FEET == true) {\n+                    ret.jump = (short)(ret.speed * 4);\n+                    ret.speed *= 15;\n+                }\n             }\n         }\n         MapleData ltd = source.getChildByPath(\"lt\");\n@@ -1328,11 +1330,15 @@ public static boolean isDojoBuff(int sourceid) {\n         return sourceid >= 2022359 && sourceid <= 2022421;\n     }\n     \n+    public static boolean isPyramidBuff(int sourceid) {\n+        return sourceid >= 2022585 && sourceid <= 2022617;\n+    }\n+    \n     public static boolean isRateCoupon(int sourceid) {\n         int itemType = sourceid / 1000;\n         return itemType == 5211 || itemType == 5360;\n     }\n-\n+    \n     private boolean isDs() {\n         return skill && (sourceid == Rogue.DARK_SIGHT || sourceid == WindArcher.WIND_WALK || sourceid == NightWalker.DARK_SIGHT);\n     }"}, {"sha": "459ae53ba2b95e21c9f352bf9dd313caea7e1b67", "filename": "src/server/maps/MapleMap.java", "status": "modified", "additions": 14, "deletions": 12, "changes": 26, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/server/maps/MapleMap.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/server/maps/MapleMap.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/maps/MapleMap.java?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -1979,19 +1979,11 @@ public void run() {\n             if (chr.getEventInstance() != null) {\n                 chr.getEventInstance().movePlayer(chr);\n             }\n-        } else if (MapleMiniDungeon.isDungeonMap(mapid)) {\n-            final MapleMiniDungeon dungeon = MapleMiniDungeon.getDungeon(mapid);\n-            chr.getClient().announce(MaplePacketCreator.getClock(30 * 60));\n-            TimerManager.getInstance().schedule(new Runnable() {\n-\n-                @Override\n-                public void run() {\n-                    if (MapleMiniDungeon.isDungeonMap(chr.getMapId())) {\n-                        chr.changeMap(dungeon.getBase());\n-                    }\n-                }\n-            }, 30 * 60 * 1000);\n+        } else if (MapleMiniDungeonInfo.isDungeonMap(mapid)) {\n+            MapleMiniDungeon mmd = chr.getClient().getChannelServer().getMiniDungeon(mapid);\n+            if(mmd != null) mmd.registerPlayer(chr);\n         }\n+        \n         MaplePet[] pets = chr.getPets();\n         for (int i = 0; i < pets.length; i++) {\n             if (pets[i] != null) {\n@@ -2152,6 +2144,16 @@ public void removePlayer(MapleCharacter chr) {\n         } finally {\n             chrWLock.unlock();\n         }\n+        \n+        if (MapleMiniDungeonInfo.isDungeonMap(mapid)) {\n+            MapleMiniDungeon mmd = chr.getClient().getChannelServer().getMiniDungeon(mapid);\n+            if(mmd != null) {\n+                if(!mmd.unregisterPlayer(chr)) {\n+                    chr.getClient().getChannelServer().removeMiniDungeon(mapid);\n+                }\n+            }\n+        }\n+        \n         removeMapObject(chr.getObjectId());\n         if (!chr.isHidden()) {\n             broadcastMessage(MaplePacketCreator.removePlayerFromMap(chr.getId()));"}, {"sha": "5d39376c652b39cf18fbd17588770cd9037e4b34", "filename": "src/server/maps/MapleMiniDungeon.java", "status": "modified", "additions": 94, "deletions": 78, "changes": 172, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/server/maps/MapleMiniDungeon.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/server/maps/MapleMiniDungeon.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/maps/MapleMiniDungeon.java?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -1,86 +1,102 @@\n-package server.maps;\n-\n /*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n-\t\t       Matthias Butz <matze@odinms.de>\n-\t\t       Jan Christian Meyer <vimes@odinms.de>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License as\n-    published by the Free Software Foundation version 3 as published by\n-    the Free Software Foundation. You may not use, modify or distribute\n-    this program under any other version of the GNU Affero General Public\n-    License.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU Affero General Public License for more details.\n-\n-    You should have received a copy of the GNU Affero General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+ * To change this license header, choose License Headers in Project Properties.\n+ * To change this template file, choose Tools | Templates\n+ * and open the template in the editor.\n  */\n+package server.maps;\n+\n+import server.TimerManager;\n+import client.MapleCharacter;\n \n+import java.util.List;\n+import java.util.ArrayList;\n+import java.util.concurrent.ScheduledFuture;\n+import java.util.concurrent.locks.Lock;\n+import java.util.concurrent.locks.ReentrantLock;\n+import tools.MaplePacketCreator;\n \n /**\n  *\n- * @author SharpAceX(Alan)\n+ * @author Ronan\n  */\n-\n-public enum MapleMiniDungeon {\n-\n-\t//http://bbb.hidden-street.net/search_finder/mini%20dungeon\n-\n-\tCAVE_OF_MUSHROOMS(105050100, 105050101, 30),\n-\tGOLEM_CASTLE_RUINS(105040304, 105040320, 34),\n-\tHILL_OF_SANDSTORMS(260020600, 260020630, 30),\n-\tHENESYS_PIG_FARM(100020000, 100020100, 30),\n-\tDRAKES_BLUE_CAVE(105090311, 105090320, 30),\n-\tDRUMMER_BUNNYS_LAIR(221023400, 221023401, 30),\n-\tTHE_ROUND_TABLE_OF_KENTARUS(240020500, 240020512, 30),\n-\tTHE_RESTORING_MEMORY(240040511, 240040800, 19),\n-\tNEWT_SECURED_ZONE(240040520, 240040900, 19),\n-\tPILLAGE_OF_TREASURE_ISLAND(251010402, 251010410, 30),\n-\tLONGEST_RIDE_ON_BYEBYE_STATION(551030000, 551030001, 19);\n-\n-\tprivate int baseId;\n-\tprivate int dungeonId;\n-\tprivate int dungeons;\n-\n-\tprivate MapleMiniDungeon(int baseId, int dungeonId, int dungeons) {\n-\t\tthis.baseId = baseId;\n-\t\tthis.dungeonId = dungeonId;\n-\t\tthis.dungeons = dungeons;\n-\t}\n-\n-\tpublic int getBase() {\n-\t\treturn baseId;\n-\t}\n-\n-\tpublic int getDungeonId() {\n-\t\treturn dungeonId;\n-\t}\n-\n-\tpublic int getDungeons() {\n-\t\treturn dungeons;\n-\t}\n-\n-\tpublic static boolean isDungeonMap(int map){\n-\t\tfor (MapleMiniDungeon dungeon : MapleMiniDungeon.values()){\n-\t\t\tif (map >= dungeon.getDungeonId() && map <= dungeon.getDungeonId() + dungeon.getDungeons()){\n-\t\t\t\treturn true;\n-\t\t\t}\n-\t\t}\n-\t\treturn false;\n-\t}\n-\n-\tpublic static MapleMiniDungeon getDungeon(int map){\n-\t\tfor (MapleMiniDungeon dungeon : MapleMiniDungeon.values()){\n-\t\t\tif (map >= dungeon.getDungeonId() && map <= dungeon.getDungeonId() + dungeon.getDungeons()){\n-\t\t\t\treturn dungeon;\n-\t\t\t}\n-\t\t}\n-\t\treturn null;\n-\t}\n+public class MapleMiniDungeon {\n+    List<MapleCharacter> players = new ArrayList<>();\n+    ScheduledFuture<?> timeoutTask = null;\n+    Lock lock = new ReentrantLock();\n+    \n+    int baseMap;\n+    long expireTime;\n+    \n+    public MapleMiniDungeon(int base, int durationMin) {\n+        baseMap = base;\n+        expireTime = durationMin * 60 * 1000;\n+        \n+        timeoutTask = TimerManager.getInstance().schedule(new Runnable() {\n+            @Override\n+            public void run() {\n+                lock.lock();\n+                try {\n+                    List<MapleCharacter> lchr = new ArrayList<>(players);\n+                    \n+                    for(MapleCharacter chr : lchr) {\n+                        chr.changeMap(baseMap);\n+                    }\n+                    \n+                    dispose();\n+                } finally {\n+                    lock.unlock();\n+                }\n+            }\n+        }, expireTime);\n+        \n+        expireTime += System.currentTimeMillis();\n+    }\n+    \n+    public boolean registerPlayer(MapleCharacter chr) {\n+        int time = (int)((expireTime - System.currentTimeMillis()) / 1000);\n+        if(time > 0) chr.getClient().announce(MaplePacketCreator.getClock(time));\n+        \n+        lock.lock();\n+        try {\n+            if(timeoutTask == null) return false;\n+            \n+            players.add(chr);\n+        } finally {\n+            lock.unlock();\n+        }\n+        \n+        return true;\n+    }\n+    \n+    public boolean unregisterPlayer(MapleCharacter chr) {\n+        chr.getClient().announce(MaplePacketCreator.removeClock());\n+        \n+        lock.lock();\n+        try {\n+            players.remove(chr);\n+            \n+            if(players.isEmpty()) {\n+                dispose();\n+                return false;\n+            }\n+            \n+            return true;\n+        } finally {\n+            lock.unlock();\n+        }\n+    }\n+    \n+    public void dispose() {\n+        lock.lock();\n+        try {\n+            players.clear();\n+            \n+            if(timeoutTask != null) {\n+                timeoutTask.cancel(false);\n+                timeoutTask = null;\n+            }\n+        } finally {\n+            lock.unlock();\n+        }\n+    }\n }"}, {"sha": "7e59af9b2dde54f01a2b7bed0ec182528d48127c", "filename": "src/server/maps/MapleMiniDungeonInfo.java", "status": "added", "additions": 86, "deletions": 0, "changes": 86, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/server/maps/MapleMiniDungeonInfo.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/57c29603d1bfa8964c6c13b97fcdb037d6b20e6e/src/server/maps/MapleMiniDungeonInfo.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/maps/MapleMiniDungeonInfo.java?ref=57c29603d1bfa8964c6c13b97fcdb037d6b20e6e", "patch": "@@ -0,0 +1,86 @@\n+package server.maps;\n+\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+\n+\n+/**\n+ *\n+ * @author SharpAceX(Alan)\n+ */\n+\n+public enum MapleMiniDungeonInfo {\n+\n+\t//http://bbb.hidden-street.net/search_finder/mini%20dungeon\n+\n+\tCAVE_OF_MUSHROOMS(105050100, 105050101, 30),\n+\tGOLEM_CASTLE_RUINS(105040304, 105040320, 34),\n+\tHILL_OF_SANDSTORMS(260020600, 260020630, 30),\n+\tHENESYS_PIG_FARM(100020000, 100020100, 30),\n+\tDRAKES_BLUE_CAVE(105090311, 105090320, 30),\n+\tDRUMMER_BUNNYS_LAIR(221023400, 221023401, 30),\n+\tTHE_ROUND_TABLE_OF_KENTARUS(240020500, 240020512, 30),\n+\tTHE_RESTORING_MEMORY(240040511, 240040800, 19),\n+\tNEWT_SECURED_ZONE(240040520, 240040900, 19),\n+\tPILLAGE_OF_TREASURE_ISLAND(251010402, 251010410, 30),\n+\tLONGEST_RIDE_ON_BYEBYE_STATION(551030000, 551030001, 19);\n+\n+\tprivate int baseId;\n+\tprivate int dungeonId;\n+\tprivate int dungeons;\n+\n+\tprivate MapleMiniDungeonInfo(int baseId, int dungeonId, int dungeons) {\n+\t\tthis.baseId = baseId;\n+\t\tthis.dungeonId = dungeonId;\n+\t\tthis.dungeons = dungeons;\n+\t}\n+\n+\tpublic int getBase() {\n+\t\treturn baseId;\n+\t}\n+\n+\tpublic int getDungeonId() {\n+\t\treturn dungeonId;\n+\t}\n+\n+\tpublic int getDungeons() {\n+\t\treturn dungeons;\n+\t}\n+\n+\tpublic static boolean isDungeonMap(int map){\n+\t\tfor (MapleMiniDungeonInfo dungeon : MapleMiniDungeonInfo.values()){\n+\t\t\tif (map >= dungeon.getDungeonId() && map <= dungeon.getDungeonId() + dungeon.getDungeons()){\n+\t\t\t\treturn true;\n+\t\t\t}\n+\t\t}\n+\t\treturn false;\n+\t}\n+\n+\tpublic static MapleMiniDungeonInfo getDungeon(int map){\n+\t\tfor (MapleMiniDungeonInfo dungeon : MapleMiniDungeonInfo.values()){\n+\t\t\tif (map >= dungeon.getDungeonId() && map <= dungeon.getDungeonId() + dungeon.getDungeons()){\n+\t\t\t\treturn dungeon;\n+\t\t\t}\n+\t\t}\n+\t\treturn null;\n+\t}\n+}"}]}]},
