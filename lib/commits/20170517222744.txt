{"fetchDate": "2019-12-19", "content": [{"sha": "d736d00964c20e835d71ed4e7af309f463ab6c84", "node_id": "MDY6Q29tbWl0NDUwODIwMjM6ZDczNmQwMDk2NGMyMGU4MzVkNzFlZDRlN2FmMzA5ZjQ2M2FiNmM4NA==", "commit": {"author": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2017-05-17T22:27:44Z"}, "committer": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2017-05-17T22:27:44Z"}, "message": "Fixed Pet Name Tag + quest 3927\n\nFixed some issues related to Pet Name Tag item and quest 3927.", "tree": {"sha": "f72a859c02d0bdac994d3d017e5f629d6046f551", "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/trees/f72a859c02d0bdac994d3d017e5f629d6046f551"}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/commits/d736d00964c20e835d71ed4e7af309f463ab6c84", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/d736d00964c20e835d71ed4e7af309f463ab6c84", "html_url": "https://github.com/ronancpl/HeavenMS/commit/d736d00964c20e835d71ed4e7af309f463ab6c84", "comments_url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/d736d00964c20e835d71ed4e7af309f463ab6c84/comments", "author": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3fc338467ba0646c4609aba17d1ed2082c64fbad", "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/3fc338467ba0646c4609aba17d1ed2082c64fbad", "html_url": "https://github.com/ronancpl/HeavenMS/commit/3fc338467ba0646c4609aba17d1ed2082c64fbad"}], "stats": {"total": 198, "additions": 142, "deletions": 56}, "files": [{"sha": "3bfc2a84c86982b0638031fd3786037b0abcd2f0", "filename": "README_wzchanges.txt", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d736d00964c20e835d71ed4e7af309f463ab6c84/README_wzchanges.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d736d00964c20e835d71ed4e7af309f463ab6c84/README_wzchanges.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/README_wzchanges.txt?ref=d736d00964c20e835d71ed4e7af309f463ab6c84", "patch": "@@ -1,5 +1,8 @@\n Changes from the original v83 WZs:\n \n+Character.wz/*:\n+\tUpgraded info of some items.\n+\n Map.wz/MapX/*:\n \tFixed entries of portals placed incorrectly.\n \n@@ -19,7 +22,7 @@ Ronan Lana's MobBookUpdate facility.\n P.S.:\n \n Yeah, these explanations are pretty simplistic, I know. If one really wants to\n-compare the two WZ systems, I recommend do the following:\n+compare the original v83 WZ with the ones I provided, I recommend do the following:\n \t- Open HaRepacker and, for each MapleSolaxiaV2's WZ file, extract all the XMLs\n for \"Private Server\".\n \t- Now, install MapleStory from \"ManagerMsv83.exe\" on an other folder and do the"}, {"sha": "4ea438c08fd3fdc28ba976f7979c65b721790887", "filename": "mychanges_ptbr.txt", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d736d00964c20e835d71ed4e7af309f463ab6c84/mychanges_ptbr.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d736d00964c20e835d71ed4e7af309f463ab6c84/mychanges_ptbr.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/mychanges_ptbr.txt?ref=d736d00964c20e835d71ed4e7af309f463ab6c84", "patch": "@@ -218,4 +218,11 @@ Sistema de Lobbys na BRPQ: aloca lobbys disponiveis para times de acordo com o l\n Sword Earrings: +30HP -> +1 W.att / Shield Earrings: +1ACC -> +1 M.att\n \n 15 Maio 2017,\n-Implementa\ufffd\ufffdo da LMPQ.\n\\ No newline at end of file\n+Implementa\ufffd\ufffdo da LMPQ.\n+\n+16 Maio 2017,\n+Implementa\ufffd\ufffdo da HPQ.\n+\n+17 Maio 2017,\n+Corre\ufffd\ufffdo de bug com o item \"Pet Name Tag\", que n\ufffdo retirava o item ap\ufffds ser usado.\n+Corre\ufffd\ufffdo em bug de uma quest (id 3927) de Ariant que envolve uma \"parede\".\n\\ No newline at end of file"}, {"sha": "ce3e6dc565c76de944fc9b679db86629f5dd031c", "filename": "nbproject/private/private.xml", "status": "modified", "additions": 27, "deletions": 20, "changes": 47, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d736d00964c20e835d71ed4e7af309f463ab6c84/nbproject/private/private.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d736d00964c20e835d71ed4e7af309f463ab6c84/nbproject/private/private.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/nbproject/private/private.xml?ref=d736d00964c20e835d71ed4e7af309f463ab6c84", "patch": "@@ -3,27 +3,34 @@\n     <editor-bookmarks xmlns=\"http://www.netbeans.org/ns/editor-bookmarks/2\" lastBookmarkId=\"0\"/>\n     <open-files xmlns=\"http://www.netbeans.org/ns/projectui-open-files/2\">\n         <group>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/world0/1012113.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/world0/2040047_old.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/reactor/9108004.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/reactor/9108001.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/net/server/channel/handlers/MobDamageMobFriendlyHandler.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/reactor/9108002.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/event/KerningPQ.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/world0/1012114.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/reactor/9108005.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/world0/9201134.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/event/LudiPQ.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/world0/2030010.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/event/HenesysPQ.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/world0/9040005.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/scripting/event/EventInstanceManager.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/world0/1012112.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/reactor/9108000.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/server/maps/MapleMap.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/world0/2131000.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/server/quest/requirements/InfoExRequirement.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/inventory/Item.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/scripting/map/MapScriptMethods.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/world0/2101000.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/world0/2103001.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/quest/1021.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/inventory/Equip.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/net/server/channel/handlers/UseCashItemHandler.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/quest/3927.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/scripting/quest/QuestActionManager.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/scripting/quest/QuestScriptManager.java</file>\n             <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/MapleCharacter.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/MapleClient.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/reactor/9108003.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/server/maps/MapleMap.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/inventory/ModifyInventory.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/inventory/MaplePet.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/world0/2111009.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/server/MapleShop.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/wz/String.wz/Npc.img.xml</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/quest/20522.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/tools/MaplePacketCreator.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/inventory/MapleInventory.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/world0/2101001.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/world0/2094001.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/MapleQuestStatus.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/net/server/channel/handlers/QuestActionHandler.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/world0/2131002.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/server/quest/MapleQuest.java</file>\n         </group>\n     </open-files>\n </project-private>"}, {"sha": "509d65bb33b5998009e555842b31ccb485ef3945", "filename": "scripts/event/HenesysPQ.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d736d00964c20e835d71ed4e7af309f463ab6c84/scripts/event/HenesysPQ.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d736d00964c20e835d71ed4e7af309f463ab6c84/scripts/event/HenesysPQ.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/HenesysPQ.js?ref=d736d00964c20e835d71ed4e7af309f463ab6c84", "patch": "@@ -4,7 +4,7 @@\n */\n \n var isPq = true;\n-var minPlayers = 1, maxPlayers = 6;\n+var minPlayers = 3, maxPlayers = 6;\n var minLevel = 10, maxLevel = 200;\n var entryMap = 910010000;\n var exitMap = 910010300;"}, {"sha": "241adeade80603fe2e8c3df1535be5986916c4a1", "filename": "scripts/npc/world0/2103001.js", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d736d00964c20e835d71ed4e7af309f463ab6c84/scripts/npc/world0/2103001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d736d00964c20e835d71ed4e7af309f463ab6c84/scripts/npc/world0/2103001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/2103001.js?ref=d736d00964c20e835d71ed4e7af309f463ab6c84", "patch": "@@ -0,0 +1,14 @@\n+var status = -1;\n+\n+function start() {\n+    action(1, 0, 0);\n+}\n+\n+function action(mode, type, selection) {\n+    if(cm.isQuestStarted(3927)) {\n+        cm.sendNext(\"If I had an iron hammer and a dagger, a bow and an arrow...\");\n+        cm.setQuestProgress(3927, 1);\n+    }\n+    \n+    cm.dispose();\n+}\n\\ No newline at end of file"}, {"sha": "d3d3fa14a8ceeda2b61724417399e1103b628bd8", "filename": "scripts/quest/3927.js", "status": "added", "additions": 67, "deletions": 0, "changes": 67, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d736d00964c20e835d71ed4e7af309f463ab6c84/scripts/quest/3927.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d736d00964c20e835d71ed4e7af309f463ab6c84/scripts/quest/3927.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/3927.js?ref=d736d00964c20e835d71ed4e7af309f463ab6c84", "patch": "@@ -0,0 +1,67 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/*\t\n+\tAuthor : Ronan Lana\n+*/\n+\n+var status = -1;\n+\n+function end(mode, type, selection) {\n+    if (mode == -1) {\n+        qm.dispose();\n+    } else {\n+        if (mode == 0 && status == 0) {\n+            qm.dispose();\n+            return;\n+        }\n+\n+        if (mode == 1)\n+            status++;\n+        else\n+            status--;\n+        \n+        \n+        if(qm.getQuestProgress(3927) == 0) {    // didn't find the wall yet, eh?\n+            qm.sendOk(\"Did you find the wall? Look closely, the wall is more near than you think!\");\n+            qm.dispose();\n+            return;\n+        }\n+\n+        if (status == 0) {\n+            qm.sendSimple(\"Did you find the wall?\\r\\n#L0##b I did, but... I have no idea what it's talking about.#l\");\n+        } else if (status == 1) {\n+            qm.sendSimple(\"What did it say?\\r\\n#L0##b 'If I had an iron hammer and a dagger, a bow and an arrow...'#l\\r\\n#L1# 'Byron S2 Sirin'#l\\r\\n#L2# 'Ahhh I forgot.'\");\n+        } else if (status == 2) {\n+            if(selection == 0) {\n+                qm.sendOk(\"If I had an iron hammer and a dagger... a bow and an arrow... what does that mean? Do you want me to tell you? I don't know myself. It's something you should think about. If you need a clue... it would go something like... a weapon is just an item... until someone uses it...?\");\n+                qm.gainExp(1000 * qm.getPlayer().getExpRate());\n+                qm.forceCompleteQuest();\n+            } else if(selection == 1) {\n+                qm.sendOk(\"Man, Jiyur wrote on the wall again! Arrgh!!\");\n+            } else {\n+                qm.sendOk(\"What? You forgot? Do you remember where it was written?\");\n+            }\n+\n+            qm.dispose();\n+        }\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "5ccdf531e5813537daf6e78363b2bb131eec5328", "filename": "src/client/inventory/MaplePet.java", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d736d00964c20e835d71ed4e7af309f463ab6c84/src/client/inventory/MaplePet.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d736d00964c20e835d71ed4e7af309f463ab6c84/src/client/inventory/MaplePet.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/inventory/MaplePet.java?ref=d736d00964c20e835d71ed4e7af309f463ab6c84", "patch": "@@ -203,8 +203,8 @@ public void gainClosenessFullness(MapleCharacter owner, int incCloseness, int in\n         saveToDb();\n         \n         Item petz = owner.getInventory(MapleInventoryType.CASH).getItem(getPosition());\n-        if (petz == null) return;\n-        owner.forceUpdateItem(petz);\n+        if (petz != null)\n+            owner.forceUpdateItem(petz);\n     }\n \n     public void setLevel(byte level) {"}, {"sha": "b231fad416064625501e3e2cba6e5dbe19e95779", "filename": "src/net/server/channel/handlers/QuestActionHandler.java", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d736d00964c20e835d71ed4e7af309f463ab6c84/src/net/server/channel/handlers/QuestActionHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d736d00964c20e835d71ed4e7af309f463ab6c84/src/net/server/channel/handlers/QuestActionHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/QuestActionHandler.java?ref=d736d00964c20e835d71ed4e7af309f463ab6c84", "patch": "@@ -69,8 +69,6 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n             \n             if(quest.canComplete(player, npc)) {\n                 QuestScriptManager.getInstance().end(c, questid, npc);\n-                player.getClient().getSession().write(MaplePacketCreator.showSpecialEffect(9)); //show effect when completion \n-                player.getMap().broadcastMessage(player, MaplePacketCreator.showForeignEffect(player.getId(), 9));//show effect around players I guess\n             }\n         }\n     }"}, {"sha": "1ace8c74dbce7113f0f97a8f43d7138353299e4e", "filename": "src/net/server/channel/handlers/UseCashItemHandler.java", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d736d00964c20e835d71ed4e7af309f463ab6c84/src/net/server/channel/handlers/UseCashItemHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d736d00964c20e835d71ed4e7af309f463ab6c84/src/net/server/channel/handlers/UseCashItemHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/UseCashItemHandler.java?ref=d736d00964c20e835d71ed4e7af309f463ab6c84", "patch": "@@ -376,11 +376,14 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                 c.announce(MaplePacketCreator.enableActions());\n                 return;\n             }\n-            Item item = player.getInventory(MapleInventoryType.CASH).getItem(pet.getPosition());\n             String newName = slea.readMapleAsciiString();\n             pet.setName(newName);\n             pet.saveToDb();\n-            player.forceUpdateItem(item);\n+            \n+            Item item = player.getInventory(MapleInventoryType.CASH).getItem(pet.getPosition());\n+            if (item != null)\n+                player.forceUpdateItem(item);\n+            \n             player.getMap().broadcastMessage(player, MaplePacketCreator.changePetName(player, newName, 1), true);\n             c.announce(MaplePacketCreator.enableActions());\n             remove(c, itemId);"}, {"sha": "ef624941ab4d69b6fe0b379ee7dce24eb7459b06", "filename": "src/scripting/AbstractPlayerInteraction.java", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d736d00964c20e835d71ed4e7af309f463ab6c84/src/scripting/AbstractPlayerInteraction.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d736d00964c20e835d71ed4e7af309f463ab6c84/src/scripting/AbstractPlayerInteraction.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/scripting/AbstractPlayerInteraction.java?ref=d736d00964c20e835d71ed4e7af309f463ab6c84", "patch": "@@ -269,6 +269,16 @@ public boolean isQuestStarted(int quest) {\n \t\t}\n \t}\n         \n+        public void setQuestProgress(int qid, int progress) {\n+                MapleQuestStatus status = c.getPlayer().getQuest(MapleQuest.getInstance(qid));\n+                status.setProgress(status.getAnyProgressKey(), String.valueOf(progress));\n+        }\n+        \n+        public void setQuestProgress(int qid, int pid, int progress) {\n+                MapleQuestStatus status = c.getPlayer().getQuest(MapleQuest.getInstance(qid));\n+                status.setProgress(pid, String.valueOf(progress));\n+\t}\n+        \n         public int getQuestProgress(int qid) {\n                 MapleQuestStatus status = c.getPlayer().getQuest(MapleQuest.getInstance(qid));\n                 String progress = status.getProgress(status.getAnyProgressKey());"}, {"sha": "19700bd68ca244c7a3c3da6b244898e996ae41e9", "filename": "src/server/quest/MapleQuest.java", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d736d00964c20e835d71ed4e7af309f463ab6c84/src/server/quest/MapleQuest.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d736d00964c20e835d71ed4e7af309f463ab6c84/src/server/quest/MapleQuest.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/quest/MapleQuest.java?ref=d736d00964c20e835d71ed4e7af309f463ab6c84", "patch": "@@ -256,9 +256,6 @@ public void complete(MapleCharacter c, int npc, Integer selection) {\n             for (MapleQuestAction a : completeActs.values()) {\n                 a.run(c, selection);\n             }\n-\n-            c.getClient().getSession().write(MaplePacketCreator.showSpecialEffect(9)); // Quest completion\n-            c.getMap().broadcastMessage(c, MaplePacketCreator.showForeignEffect(c.getId(), 9), false); //use 9 instead of 12 for both\n         }\n     }\n \n@@ -297,6 +294,9 @@ public boolean forceComplete(MapleCharacter c, int npc) {\n         newStatus.setForfeited(c.getQuest(this).getForfeited());\n         newStatus.setCompletionTime(System.currentTimeMillis());\n         c.updateQuest(newStatus);\n+        \n+        c.getClient().getSession().write(MaplePacketCreator.showSpecialEffect(9)); // Quest completion\n+        c.getMap().broadcastMessage(c, MaplePacketCreator.showForeignEffect(c.getId(), 9), false); //use 9 instead of 12 for both\n         return true;\n     }\n "}, {"sha": "ce5235bf35491f647cc4badc15f6d2ef67a007b1", "filename": "wz/Quest.wz/Act.img.xml", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d736d00964c20e835d71ed4e7af309f463ab6c84/wz/Quest.wz/Act.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d736d00964c20e835d71ed4e7af309f463ab6c84/wz/Quest.wz/Act.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Quest.wz/Act.img.xml?ref=d736d00964c20e835d71ed4e7af309f463ab6c84", "patch": "@@ -27426,10 +27426,8 @@\n   </imgdir>\n   <imgdir name=\"3927\">\n     <imgdir name=\"0\">\n-      <string name=\"info\" value=\"0\"/>\n     </imgdir>\n     <imgdir name=\"1\">\n-      <int name=\"exp\" value=\"1000\"/>\n     </imgdir>\n   </imgdir>\n   <imgdir name=\"3928\">"}, {"sha": "24cdfe8e957823296a7dd5c99cd58936704f1518", "filename": "wz/Quest.wz/Check.img.xml", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d736d00964c20e835d71ed4e7af309f463ab6c84/wz/Quest.wz/Check.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d736d00964c20e835d71ed4e7af309f463ab6c84/wz/Quest.wz/Check.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Quest.wz/Check.img.xml?ref=d736d00964c20e835d71ed4e7af309f463ab6c84", "patch": "@@ -48355,11 +48355,7 @@\n     </imgdir>\n     <imgdir name=\"1\">\n       <int name=\"npc\" value=\"2101000\"/>\n-      <imgdir name=\"infoex\">\n-        <imgdir name=\"0\">\n-          <string name=\"value\" value=\"1\"/>\n-        </imgdir>\n-      </imgdir>\n+      <string name=\"endscript\" value=\"q3927e\"/>\n     </imgdir>\n   </imgdir>\n   <imgdir name=\"3928\">"}, {"sha": "37e263bdd7adab5571223af17a3b20f64c313c17", "filename": "wz/Quest.wz/Say.img.xml", "status": "modified", "additions": 0, "deletions": 17, "changes": 17, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d736d00964c20e835d71ed4e7af309f463ab6c84/wz/Quest.wz/Say.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d736d00964c20e835d71ed4e7af309f463ab6c84/wz/Quest.wz/Say.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Quest.wz/Say.img.xml?ref=d736d00964c20e835d71ed4e7af309f463ab6c84", "patch": "@@ -30133,23 +30133,6 @@\n   </imgdir>\n   <imgdir name=\"3927\">\n     <imgdir name=\"1\">\n-      <string name=\"0\" value=\"Did you find the wall?\\r\\n#L0##b I did, but... I have no idea what it&apos;s talking about.#l\"/>\n-      <string name=\"1\" value=\"What did it say?\\r\\n#L0##b &apos;If I had an iron hammer and a dagger, a bow and an arrow...&apos;#l\\r\\n#L1# &apos;Byron\u2661 Sirin&apos;#l\\r\\n#L2# &apos;Ahhh I forgot.&apos;\"/>\n-      <string name=\"2\" value=\"If I had an iron hammer and a dagger... a bow and an arrow... what does that mean? Do you want me to tell you? I don&apos;t know myself. It&apos;s something you should think about. If you need a clue... it would go something like... a weapon is just an item... until someone uses it...?\"/>\n-      <imgdir name=\"stop\">\n-        <imgdir name=\"npc\">\n-          <string name=\"0\" value=\"I guess you haven&apos;t found #p2103001# yet. Well it&apos;d be tough for you to locate the Sand Bandits anyway...\"/>\n-        </imgdir>\n-        <imgdir name=\"0\">\n-          <int name=\"answer\" value=\"1\"/>\n-        </imgdir>\n-        <imgdir name=\"1\">\n-          <string name=\"1\" value=\"Man, Jiyur wrote on the wall again! Arrgh!!\"/>\n-          <string name=\"2\" value=\"What? You forgot? Do you remember where it was written?\"/>\n-          <int name=\"answer\" value=\"1\"/>\n-        </imgdir>\n-      </imgdir>\n-      <int name=\"ask\" value=\"1\"/>\n     </imgdir>\n     <imgdir name=\"0\">\n       <string name=\"0\" value=\"#m260000000# is a resourceful place that has Lidium, an ore that can only be found at the Oasis and the Nihal Desert. No thanks to the greedy queen, who charges ridiculous amount of taxes, everyone&apos;s struggling these days. Apparently the queen is a fairy from Orbis... and she spends all of the tax money to bring in unfathomable amounts of treasures.\\r\\n#L0##bWhat does the Sultan do?#l\"/>"}]}]},
