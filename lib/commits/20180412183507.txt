{"fetchDate": "2019-12-19", "content": [{"sha": "6d91c79f28258be7d329c2c8ac781b4d8e0fd075", "node_id": "MDY6Q29tbWl0NDUwODIwMjM6NmQ5MWM3OWYyODI1OGJlN2QzMjljMmM4YWM3ODFiNGQ4ZTBmZDA3NQ==", "commit": {"author": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2018-04-12T18:35:07Z"}, "committer": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2018-04-12T18:35:07Z"}, "message": "Ninja Ambush & Donators on GM Map glitch\n\nNormalized the Ninja Ambush skill, now applying a more sane DOT amount.\nAdded \"mobhp\" and \"resetskill\" commands.\nFixed a glitch with donators on the GM map, being able to interact with those NPCs as if they were GM's.\nAdded scripts for the Dyle questline.", "tree": {"sha": "f6ce033a47a80eb47ecfa79229a399a88c2cfec3", "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/trees/f6ce033a47a80eb47ecfa79229a399a88c2cfec3"}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/commits/6d91c79f28258be7d329c2c8ac781b4d8e0fd075", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/6d91c79f28258be7d329c2c8ac781b4d8e0fd075", "html_url": "https://github.com/ronancpl/HeavenMS/commit/6d91c79f28258be7d329c2c8ac781b4d8e0fd075", "comments_url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/6d91c79f28258be7d329c2c8ac781b4d8e0fd075/comments", "author": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5d8ede324748fb2fd6afd3d3f9fdffa1a5f275e9", "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/5d8ede324748fb2fd6afd3d3f9fdffa1a5f275e9", "html_url": "https://github.com/ronancpl/HeavenMS/commit/5d8ede324748fb2fd6afd3d3f9fdffa1a5f275e9"}], "stats": {"total": 372, "additions": 363, "deletions": 9}, "files": [{"sha": "22dc2cf5fe92ce8fe5865de64192bd7174ad2bbf", "filename": "docs/mychanges_ptbr.txt", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6d91c79f28258be7d329c2c8ac781b4d8e0fd075/docs/mychanges_ptbr.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6d91c79f28258be7d329c2c8ac781b4d8e0fd075/docs/mychanges_ptbr.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/docs/mychanges_ptbr.txt?ref=6d91c79f28258be7d329c2c8ac781b4d8e0fd075", "patch": "@@ -853,4 +853,10 @@ Incrementado quiz de 3rd job, agora utilizando um pool de 40 perguntas com escol\n 05 - 10 Mar\u00e7o 2018,\n Corrigido diseases n\u00e3o sendo removidas corretamente no cliente quando tentando trocar de canal/entrar Cash Shop, permitindo-as ficar no jogador infinitamente.\n Corrigido Holy Symbol atuando de forma inesperada no cen\u00e1rio com somente um jogador.\n-Corrigido Summon Sack lv. 9 lan\u00e7ando mob com id inexistente.\n\\ No newline at end of file\n+Corrigido Summon Sack lv. 9 lan\u00e7ando mob com id inexistente.\n+Corrigido NPC de guild tirando mesos do jogador sem efetuar a a\u00e7\u00e3o alguma caso o n\u00famero m\u00e1ximo de jogadores tenha sido alcan\u00e7ado.\n+\n+11 - 12 Mar\u00e7o 2018,\n+Localhost melhorado: retirado caps de Matk, Mdef, Wdef, Acc e Avoid.\n+Balanceado Ninja Ambush, agora dando uma quantidade de dano justific\u00e1vel.\n+Implementado questline do Dyle.\n\\ No newline at end of file"}, {"sha": "f267914e843529ee6120d0dad1f9049d95560e18", "filename": "scripts/npc/9900000.js", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6d91c79f28258be7d329c2c8ac781b4d8e0fd075/scripts/npc/9900000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6d91c79f28258be7d329c2c8ac781b4d8e0fd075/scripts/npc/9900000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9900000.js?ref=6d91c79f28258be7d329c2c8ac781b4d8e0fd075", "patch": "@@ -40,12 +40,18 @@ var facenew = Array();\n var colors = Array();\n \n function start() {\n+    if(cm.getPlayer().gmLevel() < 2) {\n+        cm.sendOk(\"Hey wassup?\");\n+        cm.dispose();\n+        return;\n+    }\n+    \n     cm.sendSimple(\"Hey there, I can change your look. What would you like to change?\\r\\n#L0#Skin#l\\r\\n#L1#Hair#l\\r\\n#L5#Female Hair#l\\r\\n#L2#Hair Color#l\\r\\n#L3#Eye#l\\r\\n#L6#Female Eyes#l\\r\\n#L4#Eye Color#l\\r\\n#L7#Set GM job#l\");\n }\n \n function action(mode, type, selection) {\n     status++;\n-    if (mode != 1 || cm.getPlayer().gmLevel() < 1){\n+    if (mode != 1 || cm.getPlayer().gmLevel() < 2){\n         cm.dispose();\n         return;\n     }"}, {"sha": "c5d17ce6331847e547a4bb1f452f6596701e93bd", "filename": "scripts/npc/9900001.js", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6d91c79f28258be7d329c2c8ac781b4d8e0fd075/scripts/npc/9900001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6d91c79f28258be7d329c2c8ac781b4d8e0fd075/scripts/npc/9900001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9900001.js?ref=6d91c79f28258be7d329c2c8ac781b4d8e0fd075", "patch": "@@ -26,11 +26,12 @@\n  * @Purpose:     Levels people up.\n  */\n function start() {\n-    cm.sendYesNo(\"Do you want to level up?\");\n+    if(cm.getPlayer().gmLevel() > 1) cm.sendYesNo(\"Do you want to level up?\");\n+    else cm.sendOk(\"Hey wassup?\");\n }\n \n function action(i, am, pro) {\n-    if (i > 0 && cm.getPlayer().gmLevel() > 0)\n+    if (i > 0 && cm.getPlayer().gmLevel() > 1)\n         cm.getPlayer().levelUp(true);\n     cm.dispose();\n }\n\\ No newline at end of file"}, {"sha": "20f6e5bb4097aa309d3d24d88b25c7498f693d10", "filename": "scripts/npc/commands.js", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6d91c79f28258be7d329c2c8ac781b4d8e0fd075/scripts/npc/commands.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6d91c79f28258be7d329c2c8ac781b4d8e0fd075/scripts/npc/commands.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/commands.js?ref=6d91c79f28258be7d329c2c8ac781b4d8e0fd075", "patch": "@@ -175,6 +175,7 @@ function writeSolaxiaCommandsLv2() {    //JrGM\n         addCommand(\"setstat\", \"\");\n         addCommand(\"maxstat\", \"\");\n         addCommand(\"maxskill\", \"\");\n+        addCommand(\"resetskill\", \"\");\n         addCommand(\"mesos\", \"\");\n         addCommand(\"search\", \"\");\n         addCommand(\"jail\", \"\");\n@@ -216,6 +217,7 @@ function writeSolaxiaCommandsLv0() {    //Common\n         addCommand(\"joinevent\", \"\");\n         addCommand(\"leaveevent\", \"\");\n         addCommand(\"bosshp\", \"\");\n+        addCommand(\"mobhp\", \"\");\n         addCommand(\"ranks\", \"\");\n }\n "}, {"sha": "b1f2f33075ff88d420414bb243ed518dd1a2588e", "filename": "scripts/quest/2214.js", "status": "added", "additions": 59, "deletions": 0, "changes": 59, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6d91c79f28258be7d329c2c8ac781b4d8e0fd075/scripts/quest/2214.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6d91c79f28258be7d329c2c8ac781b4d8e0fd075/scripts/quest/2214.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2214.js?ref=6d91c79f28258be7d329c2c8ac781b4d8e0fd075", "patch": "@@ -0,0 +1,59 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/*\t\n+\tAuthor : \t\tRonan\n+\tNPC Name: \t\tKnocked Trash Can\n+\tMap(s): \t\tHut in the Swamp\n+\tDescription: \t\tQuest - The Run-down Huts in the Swamp\n+\tQuest ID: \t\t2214\n+*/\n+\n+var status = -1;\n+\n+function end(mode, type, selection) {\n+    if (mode == -1) {\n+        qm.dispose();\n+    } else {\n+        if(mode == 0 && type > 0) {\n+            qm.dispose();\n+            return;\n+        }\n+        \n+        if (mode == 1)\n+            status++;\n+        else\n+            status--;\n+        \n+        if (status == 0) {\n+            if(!qm.canHold(4031894, 1)) {\n+                qm.sendNext(\"(Eh, I can't hold the #t4031894# right now, I need an ETC slot available.)\");\n+                qm.dispose();\n+                return;\n+            }\n+            \n+            qm.sendNext(\"(Ah, there is a crumbled note here... Hm, it contains details about some scheme that is about to happen, that must be what #r#p1052002##k was talking about.)\");\n+            qm.gainItem(4031894, 1);\n+            qm.gainExp(20000 * qm.getPlayer().getExpRate());\n+            qm.forceCompleteQuest();\n+            \n+            qm.dispose();\n+        }\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "edb50c6a1395ccd79a94ee5dd24652b7d20dd9bb", "filename": "scripts/quest/2215.js", "status": "added", "additions": 65, "deletions": 0, "changes": 65, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6d91c79f28258be7d329c2c8ac781b4d8e0fd075/scripts/quest/2215.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6d91c79f28258be7d329c2c8ac781b4d8e0fd075/scripts/quest/2215.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2215.js?ref=6d91c79f28258be7d329c2c8ac781b4d8e0fd075", "patch": "@@ -0,0 +1,65 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/*\t\n+\tAuthor : \t\tRonan\n+\tNPC Name: \t\tFind the Crumpled Piece of Paper Again\n+\tMap(s): \t\tHut in the Swamp\n+\tDescription: \t\tQuest - The Run-down Huts in the Swamp\n+\tQuest ID: \t\t2215\n+*/\n+\n+var status = -1;\n+\n+function end(mode, type, selection) {\n+    if (mode == -1) {\n+        qm.dispose();\n+    } else {\n+        if(mode == 0 && type > 0) {\n+            qm.dispose();\n+            return;\n+        }\n+        \n+        if (mode == 1)\n+            status++;\n+        else\n+            status--;\n+        \n+        if (status == 0) {\n+            if(qm.getMeso() < 2000) {\n+                qm.sendNext(\"(Oh, I don't have the combined fee amount yet.)\");\n+                qm.dispose();\n+                return;\n+            }\n+            \n+            if(!qm.canHold(4031894, 1)) {\n+                qm.sendNext(\"(Eh, I can't hold the #t4031894# right now, I need an ETC slot available.)\");\n+                qm.dispose();\n+                return;\n+            }\n+            \n+            qm.sendNext(\"(Alright, now I will deposit the fee there and get the paper... That's it, yea, that's done.)\");\n+            qm.gainItem(4031894, 1);\n+            qm.gainMeso(-2000);\n+            qm.forceCompleteQuest();\n+            \n+            qm.dispose();\n+        }\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "0daf60319a0abc575525fe3eb8ee11ab963c5629", "filename": "scripts/quest/2216.js", "status": "added", "additions": 45, "deletions": 0, "changes": 45, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6d91c79f28258be7d329c2c8ac781b4d8e0fd075/scripts/quest/2216.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6d91c79f28258be7d329c2c8ac781b4d8e0fd075/scripts/quest/2216.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2216.js?ref=6d91c79f28258be7d329c2c8ac781b4d8e0fd075", "patch": "@@ -0,0 +1,45 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+var status = -1;\n+\n+function start(mode, type, selection) {\n+    if (mode == -1) {\n+        qm.dispose();\n+    } else {\n+        if(mode == 0 && type > 0) {\n+            qm.dispose();\n+            return;\n+        }\n+        \n+        if (mode == 1)\n+            status++;\n+        else\n+            status--;\n+        \n+        if (status == 0) {\n+            qm.sendNext(\"I've just gathered an interesting information, #rDyle looks just like regular Ligators#k, but bigger.\");\n+            qm.gainExp(7000 * qm.getPlayer().getExpRate());\n+            qm.forceCompleteQuest();\n+            \n+            qm.dispose();\n+        }\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "3d05669b62d2c32f9fb98c734f5937114d88ed4b", "filename": "scripts/quest/2217.js", "status": "added", "additions": 45, "deletions": 0, "changes": 45, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6d91c79f28258be7d329c2c8ac781b4d8e0fd075/scripts/quest/2217.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6d91c79f28258be7d329c2c8ac781b4d8e0fd075/scripts/quest/2217.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2217.js?ref=6d91c79f28258be7d329c2c8ac781b4d8e0fd075", "patch": "@@ -0,0 +1,45 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+var status = -1;\n+\n+function start(mode, type, selection) {\n+    if (mode == -1) {\n+        qm.dispose();\n+    } else {\n+        if(mode == 0 && type > 0) {\n+            qm.dispose();\n+            return;\n+        }\n+        \n+        if (mode == 1)\n+            status++;\n+        else\n+            status--;\n+        \n+        if (status == 0) {\n+            qm.sendNext(\"Hey, did you notice already, it looks like some awful stench is emanating from the sewers... Ewww\");\n+            qm.gainExp(7000 * qm.getPlayer().getExpRate());\n+            qm.forceCompleteQuest();\n+            \n+            qm.dispose();\n+        }\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "88dc060c71b4e259ab145dba91daf15354e1b293", "filename": "scripts/quest/2218.js", "status": "added", "additions": 45, "deletions": 0, "changes": 45, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6d91c79f28258be7d329c2c8ac781b4d8e0fd075/scripts/quest/2218.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6d91c79f28258be7d329c2c8ac781b4d8e0fd075/scripts/quest/2218.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2218.js?ref=6d91c79f28258be7d329c2c8ac781b4d8e0fd075", "patch": "@@ -0,0 +1,45 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+var status = -1;\n+\n+function start(mode, type, selection) {\n+    if (mode == -1) {\n+        qm.dispose();\n+    } else {\n+        if(mode == 0 && type > 0) {\n+            qm.dispose();\n+            return;\n+        }\n+        \n+        if (mode == 1)\n+            status++;\n+        else\n+            status--;\n+        \n+        if (status == 0) {\n+            qm.sendNext(\"Hey did you see how strange #rLakelis#k has been acting these days? We should see what's going on aabout her, her actions have been so weird lately...\");\n+            qm.gainExp(7000 * qm.getPlayer().getExpRate());\n+            qm.forceCompleteQuest();\n+            \n+            qm.dispose();\n+        }\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "15d25d730e84a7802ae96df44ec8315c0dc6f3e6", "filename": "scripts/quest/2219.js", "status": "added", "additions": 45, "deletions": 0, "changes": 45, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6d91c79f28258be7d329c2c8ac781b4d8e0fd075/scripts/quest/2219.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6d91c79f28258be7d329c2c8ac781b4d8e0fd075/scripts/quest/2219.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2219.js?ref=6d91c79f28258be7d329c2c8ac781b4d8e0fd075", "patch": "@@ -0,0 +1,45 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+var status = -1;\n+\n+function start(mode, type, selection) {\n+    if (mode == -1) {\n+        qm.dispose();\n+    } else {\n+        if(mode == 0 && type > 0) {\n+            qm.dispose();\n+            return;\n+        }\n+        \n+        if (mode == 1)\n+            status++;\n+        else\n+            status--;\n+        \n+        if (status == 0) {\n+            qm.sendNext(\"Did you know, they say someone from the sewers has been trying to #rdevelop a magic powder that let's one to grow#k, isn't that nice?\");\n+            qm.gainExp(7000 * qm.getPlayer().getExpRate());\n+            qm.forceCompleteQuest();\n+            \n+            qm.dispose();\n+        }\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "5b4647eb1670d066184f0345adc488ab2b091b81", "filename": "sql/db_shopupdate.sql", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6d91c79f28258be7d329c2c8ac781b4d8e0fd075/sql/db_shopupdate.sql", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6d91c79f28258be7d329c2c8ac781b4d8e0fd075/sql/db_shopupdate.sql", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/sql/db_shopupdate.sql?ref=6d91c79f28258be7d329c2c8ac781b4d8e0fd075", "patch": "@@ -255,7 +255,8 @@ INSERT INTO `shopitems` ( `shopid`, `itemid`, `price`, `position`) VALUES\n (1337, 2043712, 1, 81),\n (1337, 2340000, 1, 82),\n (1337, 2040807, 1, 83),\n-(1337, 2210032, 1, 84);\n+(1337, 2210032, 1, 84),\n+(1337, 2050004, 1, 85);\n \n # Thanks to DietStory dev team\n INSERT INTO `shopitems` ( `shopid`, `itemid`, `price`, `pitch`, `position`) VALUES"}, {"sha": "25f7109243eebfa04bb4480dc40570bd13a84c92", "filename": "src/client/MapleCharacter.java", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6d91c79f28258be7d329c2c8ac781b4d8e0fd075/src/client/MapleCharacter.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6d91c79f28258be7d329c2c8ac781b4d8e0fd075/src/client/MapleCharacter.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/MapleCharacter.java?ref=6d91c79f28258be7d329c2c8ac781b4d8e0fd075", "patch": "@@ -5547,6 +5547,7 @@ public static MapleCharacter loadCharFromDB(int charid, MapleClient client, bool\n             ps.close();\n             ret.cashshop = new CashShop(ret.accountid, ret.id, ret.getJobType());\n             ret.autoban = new AutobanManager(ret);\n+            ret.marriageRing = null; //for now\n             ps = con.prepareStatement(\"SELECT name, level FROM characters WHERE accountid = ? AND id != ? ORDER BY level DESC limit 1\");\n             ps.setInt(1, ret.accountid);\n             ps.setInt(2, charid);"}, {"sha": "b3fcea7ad74c8bae385a3fe76448e74f624455c6", "filename": "src/client/command/Commands.java", "status": "modified", "additions": 35, "deletions": 2, "changes": 37, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6d91c79f28258be7d329c2c8ac781b4d8e0fd075/src/client/command/Commands.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6d91c79f28258be7d329c2c8ac781b4d8e0fd075/src/client/command/Commands.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/command/Commands.java?ref=6d91c79f28258be7d329c2c8ac781b4d8e0fd075", "patch": "@@ -651,6 +651,15 @@ public static boolean executeHeavenMsCommandLv0(Channel cserv, Server srv, Maple\n \t\t\t} \n \t\t\tbreak;\n                     \n+                case \"mobhp\":\n+\t\t\tfor(MapleMonster monster : player.getMap().getMonsters()) {\n+\t\t\t\tif(monster != null && monster.getHp() > 0) {\n+\t\t\t\t\tplayer.yellowMessage(monster.getName() + \" (\" + monster.getId() + \") has \" + monster.getHp() + \" / \" + monster.getMaxHp() + \" HP.\");\n+\t\t\t\t\t\n+\t\t\t\t}\n+\t\t\t} \n+\t\t\tbreak;\n+                    \n \t\tcase \"ranks\":\n \t\t\tPreparedStatement ps = null;\n \t\t\tResultSet rs = null;\n@@ -1329,6 +1338,30 @@ else if (type.equals(\"cash\")) {\n                         player.yellowMessage(\"Skills maxed out.\");\n                     break;\n                     \n+                case \"resetskill\":\n+\t\t\tfor (MapleData skill_ : MapleDataProviderFactory.getDataProvider(new File(System.getProperty(\"wzpath\") + \"/\" + \"String.wz\")).getData(\"Skill.img\").getChildren()) {\n+\t\t\t\ttry {\n+\t\t\t\t\tskill = SkillFactory.getSkill(Integer.parseInt(skill_.getName()));\n+                                        player.changeSkillLevel(skill, (byte) 0, skill.getMaxLevel(), -1);\n+\t\t\t\t} catch (NumberFormatException nfe) {\n+                                        nfe.printStackTrace();\n+\t\t\t\t\tbreak;\n+\t\t\t\t} catch (NullPointerException npe) {\n+\t\t\t\t\tcontinue;\n+\t\t\t\t}\n+\t\t\t}\n+                        \n+                        if(player.getJob().isA(MapleJob.ARAN1) || player.getJob().isA(MapleJob.LEGEND)) {\n+                                skill = SkillFactory.getSkill(5001005);\n+                                player.changeSkillLevel(skill, (byte) -1, -1, -1);\n+                        } else {\n+                                skill = SkillFactory.getSkill(21001001);\n+                                player.changeSkillLevel(skill, (byte) -1, -1, -1);\n+                        }\n+                        \n+                        player.yellowMessage(\"Skills reseted.\");\n+                    break;\n+                    \n                 case \"mesos\":\n                         if (sub.length >= 2) {\n                                 player.gainMeso(Integer.parseInt(sub[1]), true);\n@@ -2394,8 +2427,8 @@ public static boolean executeHeavenMsCommandLv4(Channel cserv, Server srv, Maple\n                     case \"cake\":\n                         MapleMonster monster = MapleLifeFactory.getMonster(9400606);\n                         if(sub.length > 1) {\n-                            int newHp = Integer.parseInt(sub[1]);\n-                            if(newHp < 0) newHp = Integer.MAX_VALUE;\n+                            double mobHp = Double.parseDouble(sub[1]);\n+                            int newHp = (mobHp <= 0) ? Integer.MAX_VALUE : ((mobHp > Integer.MAX_VALUE) ? Integer.MAX_VALUE : (int) mobHp);\n                             \n                             monster.getStats().setHp(newHp);\n                             monster.setStartingHp(newHp);"}, {"sha": "d07e56e3187357aa9733ab128e4b3716bda34788", "filename": "src/server/life/MapleMonster.java", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/6d91c79f28258be7d329c2c8ac781b4d8e0fd075/src/server/life/MapleMonster.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/6d91c79f28258be7d329c2c8ac781b4d8e0fd075/src/server/life/MapleMonster.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/life/MapleMonster.java?ref=6d91c79f28258be7d329c2c8ac781b4d8e0fd075", "patch": "@@ -899,7 +899,7 @@ public void run() {\n         } else if (status.getSkill().getId() == 4121004 || status.getSkill().getId() == 4221004) { // Ninja Ambush\n             final Skill skill = SkillFactory.getSkill(status.getSkill().getId());\n             final byte level = from.getSkillLevel(skill);\n-            final int damage = (int) ((from.getStr() + from.getLuk()) * (1.5 + (level * 0.05)) * skill.getEffect(level).getDamage());\n+            final int damage = (int) ((from.getStr() + from.getLuk()) * ((3.7 * skill.getEffect(level).getDamage()) / 100));\n             \n             status.setValue(MonsterStatus.NINJA_AMBUSH, Integer.valueOf(damage));\n             animationTime = broadcastStatusEffect(status);\n@@ -1164,7 +1164,7 @@ public void run() {\n             }\n             if (damage > 0) {\n                 damage(chr, damage, true);\n-                if (type == 1 || type == 2) {\n+                if (type == 1) {    // ninja ambush (type 2) is already displaying DOT\n                     map.broadcastMessage(MaplePacketCreator.damageMonster(getObjectId(), damage), getPosition());\n                 }\n             }"}]}]},
