{"fetchDate": "2019-12-19", "content": [{"sha": "8dba6957df45a072ba785586879005bd1a251e85", "node_id": "MDY6Q29tbWl0NDUwODIwMjM6OGRiYTY5NTdkZjQ1YTA3MmJhNzg1NTg2ODc5MDA1YmQxYTI1MWU4NQ==", "commit": {"author": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2017-12-02T20:50:15Z"}, "committer": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2017-12-02T20:50:15Z"}, "message": "DB improvement + 2nd job info\n\nFixed a major performance problem with installing over 10000 threads when a given amount of accounts exists on the DB.\nAdded information for the available 2nd jobs of the Explorers, introducing to the players the gists of each job branch.", "tree": {"sha": "ffb2da38457e848eb139ed86eeaeb5e0a9560bdc", "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/trees/ffb2da38457e848eb139ed86eeaeb5e0a9560bdc"}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/commits/8dba6957df45a072ba785586879005bd1a251e85", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/8dba6957df45a072ba785586879005bd1a251e85", "html_url": "https://github.com/ronancpl/HeavenMS/commit/8dba6957df45a072ba785586879005bd1a251e85", "comments_url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/8dba6957df45a072ba785586879005bd1a251e85/comments", "author": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a3b6cf563bbaeddcb2a34ba58e2fae9691fc17eb", "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/a3b6cf563bbaeddcb2a34ba58e2fae9691fc17eb", "html_url": "https://github.com/ronancpl/HeavenMS/commit/a3b6cf563bbaeddcb2a34ba58e2fae9691fc17eb"}], "stats": {"total": 124, "additions": 85, "deletions": 39}, "files": [{"sha": "321e725a5ed7e505c52420bdbd0955c4686a5855", "filename": "docs/mychanges_ptbr.txt", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/8dba6957df45a072ba785586879005bd1a251e85/docs/mychanges_ptbr.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/8dba6957df45a072ba785586879005bd1a251e85/docs/mychanges_ptbr.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/docs/mychanges_ptbr.txt?ref=8dba6957df45a072ba785586879005bd1a251e85", "patch": "@@ -703,4 +703,7 @@ Aprimorado mec\n \n 28 Novembro 2017,\n Diversas refatora\ufffd\ufffdes de classes no projeto.\n-Novo release: HeavenMS.\n\\ No newline at end of file\n+Novo release: HeavenMS.\n+\n+02 Dezembro 2017,\n+Adicionado informa\ufffd\ufffdo de classes nos NPCs para os 2o jobs de Explorer.\n\\ No newline at end of file"}, {"sha": "a8188ccf6bab2def95df9b51c492ebd8d5d3496a", "filename": "scripts/npc/1012100.js", "status": "modified", "additions": 18, "deletions": 11, "changes": 29, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/8dba6957df45a072ba785586879005bd1a251e85/scripts/npc/1012100.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/8dba6957df45a072ba785586879005bd1a251e85/scripts/npc/1012100.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1012100.js?ref=8dba6957df45a072ba785586879005bd1a251e85", "patch": "@@ -84,9 +84,9 @@ function action(mode, type, selection) {\n             if (cm.canHold(1452051) && cm.canHold(2060000)){\n                 if (cm.getJobId() == 0){\n                     cm.changeJobById(300);\n-\t\t\t\t\tcm.gainItem(1452051, 1);\n-\t\t\t\t\tcm.gainItem(2060000, 1000);\n-\t\t\t\t\tcm.resetStats();\n+                    cm.gainItem(1452051, 1);\n+                    cm.gainItem(2060000, 1000);\n+                    cm.resetStats();\n                 }\n                 cm.sendNext(\"Alright, from here out, you are a part of us! You'll be living the life of a wanderer at ..., but just be patient as soon, you'll be living the high life. Alright, it ain't much, but I'll give you some of my abilities... HAAAHHH!!!\");\n             } else {\n@@ -95,12 +95,14 @@ function action(mode, type, selection) {\n             }\n         } else if (status == 2) \n             cm.sendNextPrev(\"You've gotten much stronger now. Plus every single one of your inventories have added slots. A whole row, to be exact. Go see for it yourself. I just gave you a little bit of #bSP#k. When you open up the #bSkill#k menu on the lower left corner of the screen, there are skills you can learn by using SP's. One warning, though: You can't raise it all together all at once. There are also skills you can acquire only after having learned a couple of skills first.\");\n-\t\telse\n-\t\t\tcm.dispose();\n-\t} else if(actionx[\"2ndJob\"]){\n+\telse if (status == 3)\n+            cm.sendNextPrev(\"Now a reminder. Once you have chosen, you cannot change up your mind and try to pick another path. Go now, and live as a proud Bowman.\");\n+        else\n+            cm.dispose();    \n+    } else if(actionx[\"2ndJob\"]){\n         if (status == 0){\n             if (cm.haveItem(4031012))\n-                cm.sendSimple(\"Alright, when you have made your decision, click on [I'll choose my occupation] at the bottom.#b\\r\\n#L0#Please explain to me what being the Hunter is all about.\\r\\n#L1#Please explain to me what being the Crossbowman is all about.\\r\\n#L2#I'll choose my occupation!\");\n+                cm.sendSimple(\"Alright, when you have made your decision, click on [I'll choose my occupation] at the bottom.#b\\r\\n#L0#Please explain to me what being the Hunter is all about.\\r\\n#L1#Please explain to me what being the Crossbowman is all about.\\r\\n#L3#I'll choose my occupation!\");\n             else {\n                 cm.sendNext(\"Good decision. You look strong, but I need to see if you really are strong enough to pass the test, it's not a difficult test, so you'll do just fine. Here, take my letter first... make sure you don't lose it!\");\n \t\tif(!cm.isQuestStarted(100000)) cm.startQuest(100000);\n@@ -117,8 +119,13 @@ function action(mode, type, selection) {\n                     cm.dispose();\n                 }\n             } else {\n-                if (selection < 2){\n-                    cm.sendNext(\"Not done.\");\n+                if (selection < 3){\n+                    if(selection == 0) {    //hunter\n+                        cm.sendNext(\"Archers that master #rBows#k.\\r\\n\\r\\n#bHunters#k have a higher damage/minute output in early levels, with attacks having a faster pace but slightly weaker than Crossbowmans. #bHunters#k get #rArrow Bomb#k, a slightly weaker attack that can cause up to 6 enemies to get stunned.\");\n+                    } else if(selection == 1) {    //crossbowman\n+                        cm.sendNext(\"Archers that master #rCrossbows#k.\\r\\n\\r\\n#bCrossbowmans'#k attack power grows higher the higher level you are, when compared to Hunters. #bCrossbowmans#k get #rIron Arrow#k, a stronger attack that does not home on enemies but can go through walls.\");\n+                    }\n+                    \n                     status -= 2;\n                 } else\n                     cm.sendSimple(\"Now... have you made up your mind? Please choose the job you'd like to select for your 2nd job advancement. #b\\r\\n#L0#Hunter\\r\\n#L1#Crossbowman\");\n@@ -138,7 +145,7 @@ function action(mode, type, selection) {\n         else if (status == 5)\n             cm.sendNextPrev(\"I have also given you a little bit of #bSP#k. Open the #bSkill Menu#k located at the bottomleft corner. you'll be able to boost up the newer acquired 2nd level skills. A word of warning, though. You can't boost them up all at once. Some of the skills are only available after you have learned other skills. Make sure yo remember that.\");\n         else if (status == 6)\n-            cm.sendNextPrev((job == 310 ? \"Hunter\" : \"Crossbowman\") + \" need to be strong. But remember that you can't abuse that power and use it on a weaking. Please use your enormous power the right way, because... for you to use that the right way, that is much harden than just getting stronger. Please find me after you have advanced much further. I'll be waiting for you.\");\n+            cm.sendNextPrev((job == 310 ? \"Hunter\" : \"Crossbowman\") + \" need to be strong. But remember that you can't abuse that power and use it on a weakling. Please use your enormous power the right way, because... for you to use that the right way, that is much harden than just getting stronger. Please find me after you have advanced much further. I'll be waiting for you.\");\n     } else if (actionx[\"3thJobI\"]){\n         if (status == 0){\n             if (cm.getPlayer().gotPartyQuestItem(\"JB3\")){\n@@ -258,6 +265,6 @@ function action(mode, type, selection) {\n         else if (status == 5)\n             cm.sendNextPrev(\"I have also given you a little bit of #bSP#k. Open the #bSkill Menu#k located at the bottomleft corner. you'll be able to boost up the newer acquired 2nd level skills. A word of warning, though. You can't boost them up all at once. Some of the skills are only available after you have learned other skills. Make sure yo remember that.\");\n         else if (status == 6)\n-            cm.sendNextPrev((job == 310 ? \"Hunter\" : \"Crossbowman\") + \" need to be strong. But remember that you can't abuse that power and use it on a weaking. Please use your enormous power the right way, because... for you to use that the right way, that is much harden than just getting stronger. Please find me after you have advanced much further. I'll be waiting for you.\");\n+            cm.sendNextPrev((job == 310 ? \"Hunter\" : \"Crossbowman\") + \" need to be strong. But remember that you can't abuse that power and use it on a weakling. Please use your enormous power the right way, because... for you to use that the right way, that is much harden than just getting stronger. Please find me after you have advanced much further. I'll be waiting for you.\");\n     }\n }*/\n\\ No newline at end of file"}, {"sha": "bf25045cf1ff2f76a74c7ec237981366cb9adda2", "filename": "scripts/npc/1022000.js", "status": "modified", "additions": 13, "deletions": 4, "changes": 17, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/8dba6957df45a072ba785586879005bd1a251e85/scripts/npc/1022000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/8dba6957df45a072ba785586879005bd1a251e85/scripts/npc/1022000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1022000.js?ref=8dba6957df45a072ba785586879005bd1a251e85", "patch": "@@ -88,15 +88,17 @@ function action(mode, type, selection) {\n                     cm.gainItem(1302077, 1);\n                     cm.resetStats();\n                 }\n-                cm.sendNext(\"From here on out, you are going to the (Incomplete)\");\n+                cm.sendNext(\"From here on out, you are going to the Warrior path. This is not an easy job, but if you have discipline and confidence in your own body and skills, you will overcome any difficulties in your path. Go, young Warrior!\");\n             } else {\n                 cm.sendNext(\"Make some room in your inventory and talk back to me.\");\n                 cm.dispose();\n             }\n         } else if (status == 2) \n             cm.sendNextPrev(\"You've gotten much stronger now. Plus every single one of your inventories have added slots. A whole row, to be exact. Go see for it yourself. I just gave you a little bit of #bSP#k. When you open up the #bSkill#k menu on the lower left corner of the screen, there are skills you can learn by using SP's. One warning, though: You can't raise it all together all at once. There are also skills you can acquire only after having learned a couple of skills first.\");\n         else if (status == 3)\n-            cm.sendNextPrev(\"One more warning. Once you have chosed you (Incomplete)\");\n+            cm.sendNextPrev(\"Now a reminder. Once you have chosen, you cannot change up your mind and try to pick another path. Go now, and live as a proud Warrior.\");\n+        else\n+            cm.dispose();\n     } else if(actionx[\"2ndJob\"]){\n         if (status == 0){\n             if (cm.haveItem(4031012))\n@@ -117,7 +119,14 @@ function action(mode, type, selection) {\n                 }\n             }else{\n                 if (selection < 3){\n-                    cm.sendNext(\"Make up your mind and then talk to me.\");  //there goes the explanation of the 3 WARRIOR PATHS.\n+                    if(selection == 0) {    //fighter\n+                        cm.sendNext(\"Warriors that master #rSwords or Axes#k.\\r\\n\\r\\n#rFighters#k get #bRage#k, which boosts your party's weapon attack by 10. During 2nd job this is strongly appreciated, as it is free (except for -10 wep def, which is not going to impact the damage you take much at all), takes no Use slots and increases each party member's damage (except Mages) by several hundreds. The other classes can give themselves a weapon attack boost as well, but need items to do so. #rFighters#k also get #bPower Guard#k, reducing touch damage by 40% and deals it back to the monster. This is the main reason why #rFighters#k are considered soloers is because this reduces pot costs immensely.\");\n+                    } else if(selection == 1) {    //page\n+                        cm.sendNext(\"Warriors that master #rSwords or Maces/Blunt weapons#k.\\r\\n\\r\\n#rPages#k get #bThreaten#k, a skill that lowers the enemies' weapon defense and weapon attack by 20; this is mostly used to lower damage dealt to you. Pages also get #bPower Guard#k, reducing touch damage by 40% and deals it back to the monster. This is one of the main reason why #bPages/WKs#k are considered soloers, that's because this reduces pot costs immensely. Of course, constant KB and #bIce Charge#k helps also to the soloing factor.\");\n+                    } else {    //spearman\n+                        cm.sendNext(\"Warriors that master #rSpears or Polearms#k.\\r\\n\\r\\n#rSpearmen#k get #bHyper Body#k, which boosts your max HP/MP and that of your party by 60% when maxed. This skill is particularly useful for helping partied Thieves, Archers, and Mages to survive more hits from enemies and/or PQ bosses. They also get #bIron Will#k which gives +20 wep def and +20 mag def for 300 sec. It is basically a nerfed Bless with 100 seconds more duration but gives no accuracy or avoidability bonus. Even with this skill maxed, it isn't even close to being in the same league as Power Guard and is why Spearmen/Dark Knights are not considered a soloing class.\");\n+                    }\n+                    \n                     status -= 2;\n                 } else\n                     cm.sendSimple(\"Now... have you made up your mind? Please choose the job you'd like to select for your 2nd job advancement. #b\\r\\n#L0#Fighter\\r\\n#L1#Page\\r\\n#L2#Spearman\");\n@@ -144,7 +153,7 @@ function action(mode, type, selection) {\n         else if (status == 5)\n             cm.sendNextPrev(\"I have also given you a little bit of #bSP#k. Open the #bSkill Menu#k located at the bottomleft corner. you'll be able to boost up the newer acquired 2nd level skills. A word of warning, though. You can't boost them up all at once. Some of the skills are only available after you have learned other skills. Make sure yo remember that.\");\n         else if (status == 6)\n-            cm.sendNextPrev((job == 110 ? \"Fighter\" : job == 120 ? \"Page\" : \"Spearman\") + \" need to be strong. But remember that you can't abuse that power and use it on a weaking. Please use your enormous power the right way, because... for you to use that the right way, that is much harden than just getting stronger. Please find me after you have advanced much further. I'll be waiting for you.\");\n+            cm.sendNextPrev((job == 110 ? \"Fighter\" : job == 120 ? \"Page\" : \"Spearman\") + \" need to be strong. But remember that you can't abuse that power and use it on a weakling. Please use your enormous power the right way, because... for you to use that the right way, that is much harden than just getting stronger. Please find me after you have advanced much further. I'll be waiting for you.\");\n     } else if (actionx[\"3thJobI\"]){\n         if (status == 0){\n             if (cm.getPlayer().gotPartyQuestItem(\"JB3\")){"}, {"sha": "72091c6f419213f280c4fad961ed2e34ce02c4f7", "filename": "scripts/npc/1032001.js", "status": "modified", "additions": 12, "deletions": 3, "changes": 15, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/8dba6957df45a072ba785586879005bd1a251e85/scripts/npc/1032001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/8dba6957df45a072ba785586879005bd1a251e85/scripts/npc/1032001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1032001.js?ref=8dba6957df45a072ba785586879005bd1a251e85", "patch": "@@ -100,7 +100,9 @@ function action(mode, type, selection) {\n         else if (status == 4)\n             cm.sendNextPrev(\"Now, one more word of warning to you. If you fail in battle from this point on, you will lose a portion of your total EXP. Be extra mindful of this, since you have less HP than most.\");\n         else if (status == 5)\n-            cm.sendPrev(\"This is all I can teach you. Good luck on your journey, young Magician.\");\n+            cm.sendNextPrev(\"This is all I can teach you. Good luck on your journey, young Magician.\");\n+        else\n+            cm.dispose();\n     } else if(actionx[\"2ndJob\"]){\n         if (status == 0){\n             if (cm.haveItem(4031012))\n@@ -121,7 +123,14 @@ function action(mode, type, selection) {\n                 }\n             }else{\n                 if (selection < 3){\n-                    cm.sendNext(\"Not done.\");\n+                    if(selection == 0) {\n+                        cm.sendNext(\"Magicians that master #rFire/Poison-based magic#k.\\r\\n\\r\\n#bWizards#k are a active class that deal magical, elemental damage. These abilities grants them a significant advantage against enemies weak to their element. With their skills #rMeditation#k and #rSlow#k, #bWizards#k can increase their magic attack and reduce the opponent's mobility. #bFire/Poison Wizards#k contains a powerful flame arrow attack and poison attack.\");    //f/p mage\n+                    } else if(selection == 1) {\n+                        cm.sendNext(\"Magicians that master #rIce/Lightning-based magic#k.\\r\\n\\r\\n#bWizards#k are a active class that deal magical, elemental damage. These abilities grants them a significant advantage against enemies weak to their element. With their skills #rMeditation#k and #rSlow#k, #bWizards#k can increase their magic attack and reduce the opponent's mobility. #bIce/Lightning Wizards#k have a freezing ice attack and a striking lightning attack.\");    //i/l mage\n+                    } else {\n+                        cm.sendNext(\"Magicians that master #rHoly magic#k.\\r\\n\\r\\n#bClerics#k are a powerful supportive class, bound to be accepted into any Party. That's because the have the power to #rHeal#k themselves and others in their party. Using #rBless#k, #bClerics#k can buff the attributes and reduce the amount of damage taken. This class is on worth going for if you find it hard to survive. #bClerics#k are especially effective against undead monsters.\");    //cleric\n+                    }\n+                    \n                     status -= 2;\n                 } else\n                     cm.sendSimple(\"Now... have you made up your mind? Please choose the job you'd like to select for your 2nd job advancement. #b\\r\\n#L0#Wizard (Fire / Poison)\\r\\n#L1#Wizard (Ice / Lighting)\\r\\n#L2#Cleric\");\n@@ -145,7 +154,7 @@ function action(mode, type, selection) {\n         else if (status == 5)\n             cm.sendNextPrev(\"I have also given you a little bit of #bSP#k. Open the #bSkill Menu#k located at the bottomleft corner. you'll be able to boost up the newer acquired 2nd level skills. A word of warning, though. You can't boost them up all at once. Some of the skills are only available after you have learned other skills. Make sure you remember that.\");\n         else if (status == 6)\n-            cm.sendNextPrev((job == 210 ? \"Wizard (Fire / Poison)\" : job == 220 ? \"Wizard (Ice / Lighting)\" : \"Cleric\") + \" need to be strong. But remember that you can't abuse that power and use it on a weaking. Please use your enormous power the right way, because... for you to use that the right way, that is much harden than just getting stronger. Please find me after you have advanced much further. I'll be waiting for you.\");\n+            cm.sendNextPrev((job == 210 ? \"Wizard (Fire / Poison)\" : job == 220 ? \"Wizard (Ice / Lighting)\" : \"Cleric\") + \" need to be strong. But remember that you can't abuse that power and use it on a weakling. Please use your enormous power the right way, because... for you to use that the right way, that is much harden than just getting stronger. Please find me after you have advanced much further. I'll be waiting for you.\");\n     } else if (actionx[\"3thJobI\"]){\n         if (status == 0){\n             if (cm.getPlayer().gotPartyQuestItem(\"JB3\")){"}, {"sha": "b37275f918f96182b32cf1854f4f44f8801e6327", "filename": "scripts/npc/1052001.js", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/8dba6957df45a072ba785586879005bd1a251e85/scripts/npc/1052001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/8dba6957df45a072ba785586879005bd1a251e85/scripts/npc/1052001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1052001.js?ref=8dba6957df45a072ba785586879005bd1a251e85", "patch": "@@ -98,7 +98,9 @@ function action(mode, type, selection) {\n         } else if (status == 2) \n             cm.sendNextPrev(\"You've gotten much stronger now. Plus every single one of your inventories have added slots. A whole row, to be exact. Go see for it yourself. I just gave you a little bit of #bSP#k. When you open up the #bSkill#k menu on the lower left corner of the screen, there are skills you can learn by using SP's. One warning, though: You can't raise it all together all at once. There are also skills you can acquire only after having learned a couple of skills first.\");\n         else if (status == 3)\n-            cm.sendNextPrev(\"One more warning. Once you have chosed you (Incomplete)\");\n+            cm.sendNextPrev(\"Now a reminder. Once you have chosen, you cannot change up your mind and try to pick another path. Go now, and live as a proud Thief.\");\n+        else\n+            cm.dispose();\n     } else if(actionx[\"2ndJob\"]){\n         if (status == 0){\n             if (cm.haveItem(4031012))\n@@ -119,7 +121,12 @@ function action(mode, type, selection) {\n                 }\n             }else{\n                 if (selection < 3){\n-                    cm.sendNext(\"Not done.\");\n+                    if(selection == 0) {    //assassin\n+                        cm.sendNext(\"Thieves that master #rClaws#k.\\r\\n\\r\\n#bAssassins#k are far ranged attackers. They are quite Meso efficient and have good damage potential, but cost more than Bandits.\");\n+                    } else if(selection == 1) {    //bandit\n+                        cm.sendNext(\"Thieves that master #rDaggers#k.\\r\\n\\r\\n#bBandits#k are quick melee attackers and are quite powerful among the 2nd jobs. They aren't as Meso efficient as Assassins and do not have the benefit of ranged attack but make up for it in much greater raw power.\");\n+                    }\n+                    \n                     status -= 2;\n                 } else\n                     cm.sendSimple(\"Now... have you made up your mind? Please choose the job you'd like to select for your 2nd job advancement. #b\\r\\n#L0#Assassin\\r\\n#L1#Bandit\");\n@@ -146,7 +153,7 @@ function action(mode, type, selection) {\n         else if (status == 5)\n             cm.sendNextPrev(\"I have also given you a little bit of #bSP#k. Open the #bSkill Menu#k located at the bottomleft corner. you'll be able to boost up the newer acquired 2nd level skills. A word of warning, though. You can't boost them up all at once. Some of the skills are only available after you have learned other skills. Make sure yo remember that.\");\n         else if (status == 6)\n-            cm.sendNextPrev((job == 410 ? \"Assassin\" : \"Bandit\") + \" need to be strong. But remember that you can't abuse that power and use it on a weaking. Please use your enormous power the right way, because... for you to use that the right way, that is much harden than just getting stronger. Please find me after you have advanced much further. I'll be waiting for you.\");\n+            cm.sendNextPrev((job == 410 ? \"Assassin\" : \"Bandit\") + \" need to be strong. But remember that you can't abuse that power and use it on a weakling. Please use your enormous power the right way, because... for you to use that the right way, that is much harden than just getting stronger. Please find me after you have advanced much further. I'll be waiting for you.\");\n     } else if (actionx[\"3thJobI\"]){\n         if (status == 0){\n             if (cm.getPlayer().gotPartyQuestItem(\"JB3\")){"}, {"sha": "652c54a45a9d48b9f0ef2c165a1075d79d52f548", "filename": "scripts/npc/1090000.js", "status": "modified", "additions": 23, "deletions": 14, "changes": 37, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/8dba6957df45a072ba785586879005bd1a251e85/scripts/npc/1090000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/8dba6957df45a072ba785586879005bd1a251e85/scripts/npc/1090000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1090000.js?ref=8dba6957df45a072ba785586879005bd1a251e85", "patch": "@@ -82,8 +82,8 @@ function action(mode, type, selection) {\n                 if (cm.getJobId() == 0){\n                     cm.changeJobById(500);\n                     cm.gainItem(1492000, 1);\n-\t\t\t\t\tcm.gainItem(1482000, 1);\n-\t\t\t\t\tcm.gainItem(2330000, 1000);\n+                    cm.gainItem(1482000, 1);\n+                    cm.gainItem(2330000, 1000);\n                     cm.resetStats();\n                 }\n                 cm.sendNext(\"Alright, from here out, you are a part of us! You'll be living the life of a wanderer at ..., but just be patient as soon, you'll be living the high life. Alright, it ain't much, but I'll give you some of my abilities... HAAAHHH!!!\");\n@@ -94,7 +94,9 @@ function action(mode, type, selection) {\n         } else if (status == 2) \n             cm.sendNextPrev(\"You've gotten much stronger now. Plus every single one of your inventories have added slots. A whole row, to be exact. Go see for it yourself. I just gave you a little bit of #bSP#k. When you open up the #bSkill#k menu on the lower left corner of the screen, there are skills you can learn by using SP's. One warning, though: You can't raise it all together all at once. There are also skills you can acquire only after having learned a couple of skills first.\");\n         else if (status == 3)\n-            cm.sendNextPrev(\"One more warning. Once you have chosen, you (Incomplete)\");\n+            cm.sendNextPrev(\"Now a reminder. Once you have chosen, you cannot change up your mind and try to pick another path. Go now, and live as a proud Pirate.\");\n+        else\n+            cm.dispose();\n     } else if(actionx[\"2ndJob\"]){\n         if (status == 0){\n             if (cm.isQuestCompleted(2191) || cm.isQuestCompleted(2192))\n@@ -104,11 +106,16 @@ function action(mode, type, selection) {\n         } else if (status == 1){\n             if (!cm.isQuestCompleted(2191) && !cm.isQuestCompleted(2192)){\n                 // Pirate works differently from the other jobs. It warps you directly in.\n-\t\t\t\tactionx[\"2ndJobT\"] = true;\n-\t\t\t\tcm.sendYesNo(\"Would you like to take the test now?\");\n+                actionx[\"2ndJobT\"] = true;\n+                cm.sendYesNo(\"Would you like to take the test now?\");\n             } else {\n                 if (selection < 3) {\n-                    cm.sendNext(\"Not done.\");\n+                    if(selection == 0) {    //brawler\n+                        cm.sendNext(\"Pirates that master #rKnuckles#k.\\r\\n\\r\\n#bBrawlers#k are melee, close-ranged fist fighters who deal lots of damage and have high HP. Armed with #rCorkscrew Blow#k, one can deal massive damage to multiple targets at once. #rOak Barrel#k permits one to scout or disguise themselves in middle of difficult fights, enabling a possible escaping route in front of danger.\");\n+                    } else if(selection == 1) {    //gunslinger\n+                        cm.sendNext(\"Pirates that master #rGuns#k.\\r\\n\\r\\n#bGunslingers#k are faster and ranged attackers. With the #rWings#k skill, Gunslingers can hover in the air, allowing for a longer, more sustained jump than a regular jump. #rBlank Shot#k allows to deal Stun status to multiple targets nearby.\");\n+                    }\n+                    \n                     status -= 2;\n                 } else\n                     cm.sendNextPrev(\"You have a long road ahead of you still, but being a pirate will help you get there. Just keep that in mind and you will do fine.\");\n@@ -129,14 +136,16 @@ function action(mode, type, selection) {\n \t\t\t\t\treturn;\n                 }\n             } else {\n-\t\t\t\tif(cm.isQuestCompleted(2191))\n-\t\t\t\t\tjob = 510;\n-\t\t\t\telse if(cm.isQuestCompleted(2192))\n-\t\t\t\t\tjob = 520;\n+                if(cm.isQuestCompleted(2191) && cm.isQuestCompleted(2192))\n+                        job = (Math.random() < 0.5) ? 510 : 520;\n+                else if(cm.isQuestCompleted(2191))\n+                        job = 510;\n+                else if(cm.isQuestCompleted(2192))\n+                        job = 520;\n \t\t\t\t\t\n-\t\t\t\tcm.sendYesNo(\"So you want to make the second job advancement as the \" + (job == 510 ? \"#bBrawler#k\" : \"#bGunslinger#k\") + \"? You know you won't be able to choose a different job for the 2nd job advancement once you make your decision here, right?\");\n-\t\t\t}\n-\t\t} else if (status == 3){\n+                cm.sendYesNo(\"So you want to make the second job advancement as the \" + (job == 510 ? \"#bBrawler#k\" : \"#bGunslinger#k\") + \"? You know you won't be able to choose a different job for the 2nd job advancement once you make your decision here, right?\");\n+            }\n+        } else if (status == 3){\n             if (cm.haveItem(4031012))\n                 cm.gainItem(4031012, -1);\n             \n@@ -150,7 +159,7 @@ function action(mode, type, selection) {\n         else if (status == 5)\n             cm.sendNextPrev(\"I have also given you a little bit of #bSP#k. Open the #bSkill Menu#k located at the bottom left corner. you'll be able to boost up the newer acquired 2nd level skills. A word of warning, though. You can't boost them up all at once. Some of the skills are only available after you have learned other skills. Make sure yo remember that.\");\n         else if (status == 6)\n-            cm.sendNextPrev((job == 510 ? \"Brawlers\" : \"Gunslingers\") + \" need to be strong. But remember that you can't abuse that power and use it on a weaking. Please use your enormous power the right way, because... for you to use that the right way, that is much harden than just getting stronger. Please find me after you have advanced much further. I'll be waiting for you.\");\n+            cm.sendNextPrev((job == 510 ? \"Brawlers\" : \"Gunslingers\") + \" need to be strong. But remember that you can't abuse that power and use it on a weakling. Please use your enormous power the right way, because... for you to use that the right way, that is much harden than just getting stronger. Please find me after you have advanced much further. I'll be waiting for you.\");\n     } else if (actionx[\"3thJobI\"]){\n         if (status == 0){\n             if (cm.getPlayer().gotPartyQuestItem(\"JB3\")){"}, {"sha": "d2f120d8716b0d2d88716b521c79541e3de25de7", "filename": "src/tools/DatabaseConnection.java", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/8dba6957df45a072ba785586879005bd1a251e85/src/tools/DatabaseConnection.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/8dba6957df45a072ba785586879005bd1a251e85/src/tools/DatabaseConnection.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/tools/DatabaseConnection.java?ref=8dba6957df45a072ba785586879005bd1a251e85", "patch": "@@ -76,9 +76,11 @@ public DatabaseConnection() {\n             config.setUsername(ServerConstants.DB_USER);\n             config.setPassword(ServerConstants.DB_PASS);\n             \n-            int poolSize = getNumberOfAccounts() * 10;     // make sure pool size is comfortable for the worst case scenario\n-            if(poolSize < 100) poolSize = 100;\n-            else if(poolSize > 10000) poolSize = 10000;\n+            // Make sure pool size is comfortable for the worst case scenario.\n+            // Under 100 accounts? Make it 10. Over 10000 accounts? Make it 30.            \n+            int poolSize = (int) Math.ceil(9.889642518 * Math.exp(0.0001109709382 * getNumberOfAccounts()));\n+            if(poolSize < 10) poolSize = 10;\n+            else if(poolSize > 30) poolSize = 30;\n             \n             config.setConnectionTimeout(30 * 1000);\n             config.setMaximumPoolSize(poolSize);"}]}]},
