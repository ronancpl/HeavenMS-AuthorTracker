{"fetchDate": "2019-12-19", "content": [{"sha": "1afbac2429fd5eb312e7f72b834776414f25f15c", "node_id": "MDY6Q29tbWl0NDUwODIwMjM6MWFmYmFjMjQyOWZkNWViMzEyZTdmNzJiODM0Nzc2NDE0ZjI1ZjE1Yw==", "commit": {"author": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2017-06-11T03:12:11Z"}, "committer": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2017-06-11T03:12:11Z"}, "message": "Orbis PQ\n\nImplemented Orbis PQ.", "tree": {"sha": "eaa2eb78250552ba20e941ac0afcbedd6f1d5d66", "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/trees/eaa2eb78250552ba20e941ac0afcbedd6f1d5d66"}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/commits/1afbac2429fd5eb312e7f72b834776414f25f15c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/1afbac2429fd5eb312e7f72b834776414f25f15c", "html_url": "https://github.com/ronancpl/HeavenMS/commit/1afbac2429fd5eb312e7f72b834776414f25f15c", "comments_url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/1afbac2429fd5eb312e7f72b834776414f25f15c/comments", "author": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dbac58e871517da7e7e26192c44ed464937e3cbe", "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/dbac58e871517da7e7e26192c44ed464937e3cbe", "html_url": "https://github.com/ronancpl/HeavenMS/commit/dbac58e871517da7e7e26192c44ed464937e3cbe"}], "stats": {"total": 3121, "additions": 2591, "deletions": 530}, "files": [{"sha": "db62d79b3b10fc3b032771b477f88ce9bd1c53a4", "filename": "MapleIdRetriever/build/built-jar.properties", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/MapleIdRetriever/build/built-jar.properties", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/MapleIdRetriever/build/built-jar.properties", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/MapleIdRetriever/build/built-jar.properties?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -1,4 +1,4 @@\n-#Tue, 30 May 2017 01:29:33 -0300\n+#Wed, 07 Jun 2017 16:23:20 -0300\n \n \n C\\:\\\\Nexon\\\\MapleSolaxia\\\\MapleSolaxiaV2\\\\MapleIdRetriever="}, {"sha": "47dff62a316cf27d2f83279df7782550d39b421a", "filename": "MapleIdRetriever/dist/MapleIdRetriever.jar", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/MapleIdRetriever/dist/MapleIdRetriever.jar", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/MapleIdRetriever/dist/MapleIdRetriever.jar", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/MapleIdRetriever/dist/MapleIdRetriever.jar?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "ab02c7cbdfcc152c2bea1363a1d7e8dfba025f39", "filename": "MapleIdRetriever/lib/fetch.txt", "status": "modified", "additions": 20, "deletions": 44, "changes": 64, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/MapleIdRetriever/lib/fetch.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/MapleIdRetriever/lib/fetch.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/MapleIdRetriever/lib/fetch.txt?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -1,50 +1,26 @@\n-Heaven's Hammer\n+Dark Crystal Ore\n+DEX Crystal Ore\n+LUK Crystal Ore\n+Power Crystal Ore\n+Wisdom Crystal Ore\n+Dark Crystal\n+DEX Crystal\n+LUK Crystal\n+Power Crystal\n+Wisdom Crystal\n \n-Blue Potion\n-White Potion\n-Elixir\n Mana Elixir\n+Elixir\n Power Elixir\n-Pure Water\n-Ice Cream Pop\n-Red Bean Sundae\n-Unagi\n-Watermelon\n+\n+Reindeer Milk\n Sunrise Dew\n Sunset Dew\n \n-Screw\n-\n-White Napoleon\n-Black Napoleon\n-Green Napoleon\n-Red Napoleon\n-Blue Napoleon\n-Blue Justice Cape\n-Red Justice Cape\n-White Justice Cape\n-Black Justice Cape\n-Blue Moon\n-Skull Earrings\n-Red-Hearted Earrings\n-Sapphire Earrings\n-Cat's Eye\n-Blue Moon\n-Maple Throwing-Stars\n-\n-Adamantium Ore\n-Bronze Ore\n-Gold Ore\n-Mithril Ore\n-Orihalcon Ore\n-Silver Ore\n-Steel Ore\n-Amethyst Ore\n-Aquamarine Ore\n-Black Crystal Ore\n-Diamond Ore\n-Emerald Ore\n-Garnet Ore\n-Opal Ore\n-Sapphire Ore\n-Topaz Ore\n\\ No newline at end of file\n+Silver Rover\n+Mithril Husk\n+Gold Eyes\n+Blue Lorin\n+Brown Lorin\n+Steel Pow\n+Black Bisk\n\\ No newline at end of file"}, {"sha": "8cf519cca7479be4dce80833f3d84b7259ecf79f", "filename": "MapleIdRetriever/lib/result.txt", "status": "modified", "additions": 19, "deletions": 43, "changes": 62, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/MapleIdRetriever/lib/result.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/MapleIdRetriever/lib/result.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/MapleIdRetriever/lib/result.txt?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -1,50 +1,26 @@\n-1221011 \n+4004004 \n+4004002 \n+4004003 \n+4004000 \n+4004001 \n+4005004 \n+4005002 \n+4005003 \n+4005000 \n+4005001 \n \n-2000003 2000017 \n-2000002 2000016 2022174 \n-2000004 2000012 2002012 2022175 2022456 \n 2000006 2000018 2022177 \n+2000004 2000012 2002012 2022175 2022456 \n 2000005 2000019 2002013 2022176 2022457 \n-2022000 \n-2001001 \n-2001002 \n-2022003 3994092 \n-2001000 \n+\n+2020013 \n 2020014 \n 2020015 \n \n-4003000 \n-\n-1102003 \n-1102004 \n-1102000 \n-1102002 \n-1102001 \n-1102011 \n-1102012 \n-1102013 \n-1102014 \n-1032011 1041078 \n-1032012 \n-1032013 \n-1032002 \n-1032008 4031568 \n-1032011 1041078 \n-2070011 \n+1082096 \n+1082104 \n+1082107 \n+1082099 \n+1082098 \n \n-4010003 \n-4010000 \n-4010006 \n-4010002 \n-4010005 \n-4010004 \n-4010001 \n-4020001 \n-4020002 \n-4020008 \n-4020007 \n-4020003 \n-4020000 \n-4020004 \n-4020005 \n-4020006 \n+1082204 "}, {"sha": "80ce4c53a02469224d9c4a7b423313250d97b9e0", "filename": "build/built-jar.properties", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/built-jar.properties", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/built-jar.properties", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/built-jar.properties?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -1,4 +1,4 @@\n-#Tue, 06 Jun 2017 11:24:55 -0300\n+#Sat, 10 Jun 2017 23:52:41 -0300\n \n \n C\\:\\\\Nexon\\\\MapleSolaxia\\\\MapleSolaxiaV2="}, {"sha": "7d7e20015282af8e64e036a34f8c47b42b2c25b9", "filename": "build/classes/client/MapleCharacter.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/client/MapleCharacter.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/client/MapleCharacter.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/MapleCharacter.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "e00ce41e0f1bba79ab0b6fec6c4e0bafcd5b8d5e", "filename": "build/classes/client/command/Commands$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/client/command/Commands$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/client/command/Commands$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/command/Commands$1.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "59dab23829d16c324e3476e3eaa6e8da15e8f952", "filename": "build/classes/client/command/Commands.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/client/command/Commands.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/client/command/Commands.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/command/Commands.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "861599c61f51df40366f13bf91efd43ae7e78532", "filename": "build/classes/client/inventory/Equip.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/client/inventory/Equip.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/client/inventory/Equip.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/client/inventory/Equip.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "cb1d23ad900067d4edc31edef4c735ccd109038a", "filename": "build/classes/net/server/channel/handlers/GeneralChatHandler.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/net/server/channel/handlers/GeneralChatHandler.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/net/server/channel/handlers/GeneralChatHandler.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/handlers/GeneralChatHandler.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "dd79cb0060f4c1a068c33eb72c03e56e6396b003", "filename": "build/classes/net/server/channel/handlers/UseCashItemHandler.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/net/server/channel/handlers/UseCashItemHandler.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/net/server/channel/handlers/UseCashItemHandler.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/net/server/channel/handlers/UseCashItemHandler.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "09fd1393437dacd38742fb1eff34c08361da4d58", "filename": "build/classes/scripting/AbstractPlayerInteraction.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/scripting/AbstractPlayerInteraction.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/scripting/AbstractPlayerInteraction.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/scripting/AbstractPlayerInteraction.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "3134159c26f97749eea354a1ac43184fba4fff6e", "filename": "build/classes/scripting/event/EventInstanceManager$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/scripting/event/EventInstanceManager$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/scripting/event/EventInstanceManager$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/scripting/event/EventInstanceManager$1.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "5c6a3897c73897e6839cbd58d566308bd4d64682", "filename": "build/classes/scripting/event/EventInstanceManager$2.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/scripting/event/EventInstanceManager$2.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/scripting/event/EventInstanceManager$2.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/scripting/event/EventInstanceManager$2.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "c3f99bea736ad55d569daf3ad57f0dd645a5956f", "filename": "build/classes/scripting/event/EventInstanceManager$3.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/scripting/event/EventInstanceManager$3.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/scripting/event/EventInstanceManager$3.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/scripting/event/EventInstanceManager$3.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "d8348a07f19018c11b452cde2a278e126451647d", "filename": "build/classes/scripting/event/EventInstanceManager.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/scripting/event/EventInstanceManager.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/scripting/event/EventInstanceManager.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/scripting/event/EventInstanceManager.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "098144df1c75047fce9b3bd826e9689a710196c1", "filename": "build/classes/scripting/event/EventManager.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/scripting/event/EventManager.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/scripting/event/EventManager.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/scripting/event/EventManager.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "d428a60617be26f27a44a54b5ca244fe89f69134", "filename": "build/classes/scripting/reactor/ReactorActionManager.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/scripting/reactor/ReactorActionManager.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/scripting/reactor/ReactorActionManager.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/scripting/reactor/ReactorActionManager.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "5ff03ed892319b92f78e814240f3d078b33be00a", "filename": "build/classes/server/maps/MapleMap$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$1.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "947cd0e213060f379fc1e09c5a6f90cc0fa449cd", "filename": "build/classes/server/maps/MapleMap$10.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$10.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$10.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$10.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "973cba519065bdfff93309d7f0d7995eca128b5a", "filename": "build/classes/server/maps/MapleMap$11.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$11.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$11.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$11.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "50ece276977122dac8977c9aba43165b38401ee7", "filename": "build/classes/server/maps/MapleMap$12.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$12.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$12.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$12.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "8cacf2754dd90b894d08353873e253584369ffc7", "filename": "build/classes/server/maps/MapleMap$13.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$13.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$13.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$13.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "e1cd23bb83d49a396a6dc678d0cd341f80a9c29a", "filename": "build/classes/server/maps/MapleMap$14.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$14.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$14.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$14.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "bb8f0b24e61e742a359ed70101fe27254e53680a", "filename": "build/classes/server/maps/MapleMap$15.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$15.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$15.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$15.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "ea578f65f43e959d4e17685476a6d29a253890f5", "filename": "build/classes/server/maps/MapleMap$16.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$16.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$16.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$16.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "cb47683f0570a61900b394198dc3fd8e91aadd48", "filename": "build/classes/server/maps/MapleMap$17.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$17.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$17.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$17.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "8b918e01385d7e9f8cfa76791fc511e99c2b793f", "filename": "build/classes/server/maps/MapleMap$18.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$18.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$18.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$18.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "ccc95a4734dc0dbeb0b9842d0f84bb7ca2dbea43", "filename": "build/classes/server/maps/MapleMap$19.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$19.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$19.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$19.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "26d41b891deb7806f100fcc452223314ba5c57a9", "filename": "build/classes/server/maps/MapleMap$2.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$2.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$2.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$2.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "0733fcdeccecf6d041cf17f475651c38eca632ce", "filename": "build/classes/server/maps/MapleMap$20.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$20.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$20.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$20.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "1996ac3a49f6e327701d9d18d7074b88f39f8e15", "filename": "build/classes/server/maps/MapleMap$21.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$21.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$21.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$21.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "bcb9824a759fd7791b085abc6ce65cd1b0a6c05d", "filename": "build/classes/server/maps/MapleMap$22.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$22.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$22.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$22.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "206daa1a038fbebd724a71cdb53dadbe17b0b769", "filename": "build/classes/server/maps/MapleMap$23.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$23.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$23.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$23.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "f05af4cd02ae8e3144e93b8cdc56e55fb66ecc8f", "filename": "build/classes/server/maps/MapleMap$24.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$24.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$24.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$24.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "dba447ac61a3a2f39be837b89cc846ce4b2a2478", "filename": "build/classes/server/maps/MapleMap$25.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$25.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$25.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$25.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "4a45b894de1ed0d0c6131fd2ec901e8019c55d43", "filename": "build/classes/server/maps/MapleMap$26.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$26.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$26.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$26.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "80920b5bd6562ea97d3e3b5e647dcc3e8d77d9bf", "filename": "build/classes/server/maps/MapleMap$27.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$27.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$27.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$27.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "d8f6056ee4fc7f0771c3b049deac40c1db111c85", "filename": "build/classes/server/maps/MapleMap$28$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$28$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$28$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$28$1.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "7c073ef345deacff88b95b92452419be2fe60c87", "filename": "build/classes/server/maps/MapleMap$28.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$28.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$28.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$28.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "ffd7186e3e308e31e855b5122b092352385bc3b7", "filename": "build/classes/server/maps/MapleMap$29.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$29.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$29.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$29.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "c54ef7d5089b825e550dc62be79c512fde10b912", "filename": "build/classes/server/maps/MapleMap$3.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$3.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$3.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$3.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "7086b3e86982c59b510b3603928098109687200f", "filename": "build/classes/server/maps/MapleMap$4.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$4.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$4.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$4.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "a0cfcd292fdd54538816f06c43b177900e980e45", "filename": "build/classes/server/maps/MapleMap$5.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$5.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$5.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$5.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "92de3ff9040aa3a1304b3083fbe9006412f84b33", "filename": "build/classes/server/maps/MapleMap$6.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$6.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$6.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$6.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "df8446ac8bf12dabcc2f1f6c7165d60862942734", "filename": "build/classes/server/maps/MapleMap$7.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$7.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$7.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$7.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "1ace036bd73c942bb03d257c8009b59204c17bb5", "filename": "build/classes/server/maps/MapleMap$8.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$8.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$8.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$8.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "c705ead7b6b2e81937e09e43a33209ce9c05dbb0", "filename": "build/classes/server/maps/MapleMap$9.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$9.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$9.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$9.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "f4d69b682760a038f49165c6744964bbe191aba5", "filename": "build/classes/server/maps/MapleMap$ActivateItemReactor$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$ActivateItemReactor$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$ActivateItemReactor$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$ActivateItemReactor$1.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "9f8bdbeaf23d29c3fb132b597375c7b073341515", "filename": "build/classes/server/maps/MapleMap$ActivateItemReactor.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$ActivateItemReactor.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$ActivateItemReactor.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$ActivateItemReactor.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "069f846feadcdf7132e260c15f20019e9dbed749", "filename": "build/classes/server/maps/MapleMap$ExpireMapItemJob.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$ExpireMapItemJob.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap$ExpireMapItemJob.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap$ExpireMapItemJob.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "0e2a60b9eb00077587fb5a8e3a142f598f9db6c1", "filename": "build/classes/server/maps/MapleMap.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleMap.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleMap.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "2a85c8e6be5fa046dd9dc7b5cc75d217a25cb648", "filename": "build/classes/server/maps/MapleReactor$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleReactor$1.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleReactor$1.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleReactor$1.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "2205a8cec3eb0c28ec25cc08a4d674fe10f7399e", "filename": "build/classes/server/maps/MapleReactor.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleReactor.class", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/build/classes/server/maps/MapleReactor.class", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/build/classes/server/maps/MapleReactor.class?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "d5d15ea421c82e1563de65907730a8295799bea0", "filename": "dist/MapleSolaxia.jar", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/dist/MapleSolaxia.jar", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/dist/MapleSolaxia.jar", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/dist/MapleSolaxia.jar?ref=1afbac2429fd5eb312e7f72b834776414f25f15c"}, {"sha": "4a9ce0f5a93ff76918ac075b0363032a4ef3d578", "filename": "mychanges_ptbr.txt", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/mychanges_ptbr.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/mychanges_ptbr.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/mychanges_ptbr.txt?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -299,4 +299,7 @@ Consertada a fun\n 06 Junho 2016,\n Corrigido command empowerme.\n Corrigidos exploits relacionados a algumas das skills do empowerme.\n-Corrigido possivel loop infinito no sistema de EXP.\n\\ No newline at end of file\n+Corrigido possivel loop infinito no sistema de EXP.\n+\n+07 - 10 Junho 2016,\n+Implementa\ufffd\ufffdo da OPQ.\n\\ No newline at end of file"}, {"sha": "9911a7db4b6d0e2daa60258075fa46993420559c", "filename": "nbproject/private/private.xml", "status": "modified", "additions": 23, "deletions": 9, "changes": 32, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/nbproject/private/private.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/nbproject/private/private.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/nbproject/private/private.xml?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -12,17 +12,31 @@\n     </editor-bookmarks>\n     <open-files xmlns=\"http://www.netbeans.org/ns/projectui-open-files/2\">\n         <group>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/portal/party3_room8.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/portal/party3_jailin.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/2013001.js</file>\n             <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/command/Commands.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/server/MapleStatEffect.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/constants/GameConstants.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/net/server/Server.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/Skill.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/constants/ServerConstants.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/net/server/handlers/login/CharlistRequestHandler.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/MapleCharacter.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/net/server/channel/handlers/AbstractDealDamageHandler.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/net/server/channel/handlers/CloseRangeDamageHandler.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/reactor/2001002.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/reactor/2002017.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/event/AreaBossDyle.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/scripting/AbstractPlayerInteraction.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/reactor/2006001.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/reactor/2002014.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/2040044.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/2013002.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/1012005.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/2040045.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/portal/party3_gardenin.js</file>\n             <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/tools/MaplePacketCreator.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/event/OrbisPQ.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/reactor/2001016.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/event/LudiPQ.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/event/BossRushPQ.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/scripting/event/EventInstanceManager.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/2013000.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/server/maps/MapleMap.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/MapleCharacter.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/event/PiratePQ.js</file>\n         </group>\n     </open-files>\n </project-private>"}, {"sha": "f53862519d32ab77562118a62494a219673aa6fd", "filename": "scripts/event/4jberserk.js", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/4jberserk.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/4jberserk.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/4jberserk.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -51,6 +51,8 @@ function setup() {\n     return eim;\n }\n \n+function afterSetup(eim) {}\n+\n function playerEntry(eim, player) {\n     var map = eim.getMapInstance(910500200);\n     player.changeMap(map, map.getPortal(0));"}, {"sha": "ae337d0ab47cad57e0276b6b183f80298a3660e8", "filename": "scripts/event/4jrush.js", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/4jrush.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/4jrush.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/4jrush.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -50,6 +50,8 @@ function setup() {\n     return eim;\n }\n \n+function afterSetup(eim) {}\n+\n function playerEntry(eim, player) {\n     var map = eim.getMapInstance(910500100);\n     player.changeMap(map, map.getPortal(0));"}, {"sha": "e4bd7e0075168252231e40a253fafc5cf472bd96", "filename": "scripts/event/BossRushPQ.js", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/BossRushPQ.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/BossRushPQ.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/BossRushPQ.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -111,6 +111,8 @@ function setup(level, lobbyid) {\n         return eim;\n }\n \n+function afterSetup(eim) {}\n+\n function playerEntry(eim, player) {\n         var map = eim.getMapInstance(entryMap + eim.getIntProperty(\"lobby\"));\n         player.changeMap(map, map.getPortal(0));"}, {"sha": "8eb68edb2e6fb5ff87a1de319c20858a8dd919f1", "filename": "scripts/event/CWKPQ.js", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/CWKPQ.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/CWKPQ.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/CWKPQ.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -21,6 +21,8 @@ em.setProperty(\"state\", \"0\");\n \tem.setProperty(\"leader\", \"true\");\n }\n \n+function afterSetup(eim) {}\n+\n function setup(eim, leaderid) {\n em.setProperty(\"state\", \"1\");\n \tem.setProperty(\"leader\", \"true\");"}, {"sha": "f6c4768617afbc42db80e4fd08ddf7aec18346b2", "filename": "scripts/event/CathedralWedding.js", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/CathedralWedding.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/CathedralWedding.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/CathedralWedding.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -69,6 +69,8 @@ function setup(eim) {\n     return eim;\n }\n \n+function afterSetup(eim) {}\n+\n function playerEntry(eim, player) {\n     var map = eim.getMapInstance(680000200);\n     player.changeMap(map, map.getPortal(0));"}, {"sha": "46daee1c11931ac3d36900929a51b59a4d9be257", "filename": "scripts/event/EllinPQ.js", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/EllinPQ.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/EllinPQ.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/EllinPQ.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -93,6 +93,8 @@ function setup(level, lobbyid) {\n         return eim;\n }\n \n+function afterSetup(eim) {}\n+\n function respawnStg2(eim) {    \n     if(!eim.getMapInstance(930000200).getAllPlayer().isEmpty()) eim.getMapInstance(930000200).instanceMapRespawn();\n     eim.schedule(\"respawnStg2\", 4 * 1000);"}, {"sha": "f685fc4ce0a8bfd292fcdade4a48d58e492cb61b", "filename": "scripts/event/GuildQuest.js", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/GuildQuest.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/GuildQuest.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/GuildQuest.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -87,6 +87,8 @@ function begin(eim) {\n //}\n }\n \n+function afterSetup(eim) {}\n+\n function timeOut(eim) {\n \tend(eim, \"Your allotted time to finish the quest has passed.\");\n }"}, {"sha": "24c52a347f06f711639ba72e55a53b4dad127c59", "filename": "scripts/event/Hak.js", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/Hak.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/Hak.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/Hak.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -19,6 +19,8 @@ function setup() {\n \treturn eim;\n }\n \n+function afterSetup(eim) {}\n+\n function playerEntry(eim, player) {\n \tif (player.getMapId() == returnTo[0]) {\n \t\tmyRide = 0;"}, {"sha": "4510d49cf09bb596443529245b476454375c3b5b", "filename": "scripts/event/HenesysPQ.js", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/HenesysPQ.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/HenesysPQ.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/HenesysPQ.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -52,7 +52,7 @@ function setEventRewards(eim) {\n         var itemSet, itemQty, evLevel, expStages;\n \n         evLevel = 1;    //Rewards at clear PQ\n-        itemSet = [4001129];\n+        itemSet = [4001158];\n         itemQty = [1];\n         eim.setEventRewards(evLevel, itemSet, itemQty);\n         \n@@ -98,6 +98,8 @@ function setup(level, lobbyid) {\n         return eim;\n }\n \n+function afterSetup(eim) {}\n+\n function respawnStages(eim) {\n         eim.getInstanceMap(910010000).instanceMapRespawn();\n         eim.getInstanceMap(910010200).instanceMapRespawn();"}, {"sha": "4e4e48c143edc9fc772b08d36b754d4d60363a21", "filename": "scripts/event/HorntailFight.js", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/HorntailFight.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/HorntailFight.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/HorntailFight.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -54,6 +54,8 @@ function setup() {\n \treturn eim;\n }\n \n+function afterSetup(eim) {}\n+\n function playerEntry(eim,player) {\n     var map = eim.getMapInstance(trial1.getId());\n     player.changeMap(map,map.getPortal(0));"}, {"sha": "c3bba270bafef4cc46409e22f1ac36b0b8e5f1be", "filename": "scripts/event/KerningPQ.js", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/KerningPQ.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/KerningPQ.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/KerningPQ.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -92,6 +92,8 @@ function setup(level, lobbyid) {\n         return eim;\n }\n \n+function afterSetup(eim) {}\n+\n function respawnStages(eim) {    \n         eim.getMapInstance(103000800).instanceMapRespawn();\n         eim.getMapInstance(103000805).instanceMapRespawn();"}, {"sha": "1e87ef4278f82256e46f291899cae594320a4c03", "filename": "scripts/event/KerningTrain.js", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/KerningTrain.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/KerningTrain.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/KerningTrain.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -18,6 +18,8 @@ function setup() {\n \treturn eim;\n }\n \n+function afterSetup(eim) {}\n+\n function playerEntry(eim, player) {\n \tif (player.getMapId() == returnTo[0]) {\n \t\tmyRide = 0;"}, {"sha": "7b3b380d87c3f6d24e5aefeb0dc7ae821b37696e", "filename": "scripts/event/LudiMazePQ.js", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/LudiMazePQ.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/LudiMazePQ.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/LudiMazePQ.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -97,6 +97,8 @@ function setup(level, lobbyid) {\n         return eim;\n }\n \n+function afterSetup(eim) {}\n+\n function respawnStages(eim) {}\n \n function playerEntry(eim, player) {"}, {"sha": "b01c54eaf74ab04cbb30af2870d82dfdd0e89999", "filename": "scripts/event/LudiPQ.js", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/LudiPQ.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/LudiPQ.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/LudiPQ.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -127,6 +127,8 @@ function setup(level, lobbyid) {\n         return eim;\n }\n \n+function afterSetup(eim) {}\n+\n function respawnStages(eim) {}\n \n function playerEntry(eim, player) {\n@@ -136,11 +138,11 @@ function playerEntry(eim, player) {\n \n function scheduledTimeout(eim) {\n         if(eim.getProperty(\"9stageclear\") != null) {\n-            var curStage = 922011000, toStage = 922011100;\n-            eim.warpEventTeam(curStage, toStage);\n+                var curStage = 922011000, toStage = 922011100;\n+                eim.warpEventTeam(curStage, toStage);\n         }\n         else {\n-            end(eim);\n+                end(eim);\n         }\n }\n "}, {"sha": "2e7b9856b10667ffebbb949c0db99a53c4a3d2f9", "filename": "scripts/event/OrbisPQ.js", "status": "modified", "additions": 207, "deletions": 253, "changes": 460, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/OrbisPQ.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/OrbisPQ.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/OrbisPQ.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -1,294 +1,248 @@\n-/* \n- * This file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc> \n-                       Matthias Butz <matze@odinms.de>\n-                       Jan Christian Meyer <vimes@odinms.de>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License version 3\n-    as published by the Free Software Foundation. You may not use, modify\n-    or distribute this program under any other version of the\n-    GNU Affero General Public License.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU Affero General Public License for more details.\n-\n-    You should have received a copy of the GNU Affero General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-\t\n-\tTHIS  FILE WAS MADE BY JVLAPLE. REMOVING THIS NOTICE MEANS YOU CAN'T USE THIS SCRIPT OR ANY OTHER SCRIPT PROVIDED BY JVLAPLE.\n- */\n-\n-/*\n- * @Author Jvlaple\n- * \n- * Orbis Party Quest\n- */\n-\n-importPackage(java.lang);\n-importPackage(Packages.world);\n-importPackage(Packages.client);\n-importPackage(Packages.server.maps);\n-importPackage(Packages.server.life);\n-importPackage(Packages.scripting.npc);\n-\n-var exitMap;\n-var instanceId;\n-var minPlayers = 1;\n+/**\n+ * @author: Ronan\n+ * @event: Orbis PQ\n+*/\n \n-function init() {\n-    instanceId = 1;\n-}\n+var isPq = true;\n+var minPlayers = 5, maxPlayers = 6;\n+var minLevel = 51, maxLevel = 70;\n+var entryMap = 920010000;\n+var exitMap = 920011200;\n+var recruitMap = 200080101;\n+var clearMap = 920011300;\n \n+var minMapId = 920010000;\n+var maxMapId = 920011300;\n \n+var eventTime = 45;     // 45 minutes\n \n-function monsterValue(eim, mobId) {\n-    return 1;\n+var lobbyRange = [0, 0];\n+\n+function init() {\n+        setEventRequirements();\n+}\n+\n+function setLobbyRange() {\n+        return lobbyRange;\n+}\n+\n+function setEventRequirements() {\n+        var reqStr = \"\";\n+        \n+        reqStr += \"\\r\\n    Number of players: \";\n+        if(maxPlayers - minPlayers >= 1) reqStr += minPlayers + \" ~ \" + maxPlayers;\n+        else reqStr += minPlayers;\n+        \n+        reqStr += \"\\r\\n    Level range: \";\n+        if(maxLevel - minLevel >= 1) reqStr += minLevel + \" ~ \" + maxLevel;\n+        else reqStr += minLevel;\n+        \n+        reqStr += \"\\r\\n    Time limit: \";\n+        reqStr += eventTime + \" minutes\";\n+        \n+        em.setProperty(\"party\", reqStr);\n+}\n+\n+function setEventExclusives(eim) {\n+        var itemSet = [4001044, 4001045, 4001046, 4001047, 4001048, 4001049, 4001050, 4001051, 4001052, 4001053, 4001054, 4001055, 4001056, 4001057, 4001058, 4001059, 4001060, 4001061, 4001062, 4001063];\n+        eim.setExclusiveItems(itemSet);\n+}\n+\n+function setEventRewards(eim) {\n+        var itemSet, itemQty, evLevel, expStages;\n+\n+        evLevel = 1;    //Rewards at clear PQ\n+        itemSet = [2040602, 2040802, 2040002, 2040402, 2040505, 2040502, 2040601, 2044501, 2044701, 2044601, 2041019, 2041016, 2041022, 2041013, 2041007, 2043301, 2040301, 2040801, 2040001, 2040004, 2040504, 2040501, 2040513, 2043101, 2044201, 2044401, 2040701, 2044301, 2043801, 2040401, 2043701, 2040803, 2000003, 2000002, 2000004, 2000006, 2000005, 2022000, 2001001, 2001002, 2022003, 2001000, 2020014, 2020015, 4003000, 1102015, 1102016, 1102017, 1102018, 1102021, 1102022, 1102023, 1102024, 1102084, 1102085, 1102086, 1032019, 1032020, 1032021, 1032014, 2070011, 4010003, 4010000, 4010006, 4010002, 4010005, 4010004, 4010001, 4020001, 4020002, 4020008, 4020007, 4020003, 4020000, 4020004, 4020005, 4020006, 2210000, 2210001, 2210002, 2070006, 2070005, 2070007, 2070004, 2061003, 2060003, 2060004, 2061004, 2100000, 2100001, 2100002, 2100003, 2100004, 2100005];\n+        itemQty = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 100, 100, 15, 80, 5, 25, 20, 20, 25, 20, 15, 10, 45, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 15, 15, 10, 15, 15, 15, 15, 15, 15, 10, 10, 15, 15, 15, 15, 15, 5, 5, 5, 1, 1, 1, 1, 2000, 2000, 2000, 2000, 1, 1, 1, 1, 1, 1];\n+        eim.setEventRewards(evLevel, itemSet, itemQty);\n+        \n+        expStages = [];    //bonus exp given on CLEAR stage signal\n+        eim.setEventClearStageExp(expStages);\n+}\n+\n+function getEligibleParty(party) {      //selects, from the given party, the team that is allowed to attempt this event\n+        var eligible = [];\n+        var hasLeader = false;\n+        \n+        if(party.size() > 0) {\n+                var partyList = party.toArray();\n+\n+                for(var i = 0; i < party.size(); i++) {\n+                        var ch = partyList[i];\n+\n+                        if(ch.getMapId() == recruitMap && ch.getLevel() >= minLevel && ch.getLevel() <= maxLevel) {\n+                                if(ch.isLeader()) hasLeader = true;\n+                                eligible.push(ch);\n+                        }\n+                }\n+        }\n+        \n+        if(!(hasLeader && eligible.length >= minPlayers && eligible.length <= maxPlayers)) eligible = [];\n+        return eligible;\n+}\n+\n+function setup(level, lobbyid) {\n+        var eim = em.newInstance(\"Orbis\" + lobbyid);\n+        eim.setProperty(\"level\", level);\n+        \n+        eim.setProperty(\"statusStg1\", -1);\n+        eim.setProperty(\"statusStg2\", -1);\n+        eim.setProperty(\"statusStg3\", -1);\n+        eim.setProperty(\"statusStg4\", -1);\n+        eim.setProperty(\"statusStg5\", -1);\n+        eim.setProperty(\"statusStg6\", -1);\n+        eim.setProperty(\"statusStg7\", -1);\n+        eim.setProperty(\"statusStg8\", -1);\n+        eim.setProperty(\"statusStg7_c\", 0);\n+        eim.setProperty(\"statusStgBonus\", 0);\n+        \n+        \n+        eim.getInstanceMap(920010000).resetPQ(level);\n+        eim.getInstanceMap(920010100).resetPQ(level);\n+        eim.getInstanceMap(920010200).resetPQ(level);\n+        eim.getInstanceMap(920010300).resetPQ(level);\n+        eim.getInstanceMap(920010400).resetPQ(level);\n+        eim.getInstanceMap(920010500).resetPQ(level);\n+        eim.getInstanceMap(920010600).resetPQ(level);\n+        eim.getInstanceMap(920010601).resetPQ(level);\n+        eim.getInstanceMap(920010602).resetPQ(level);\n+        eim.getInstanceMap(920010603).resetPQ(level);\n+        eim.getInstanceMap(920010604).resetPQ(level);\n+        eim.getInstanceMap(920010700).resetPQ(level);\n+        eim.getInstanceMap(920010800).resetPQ(level);\n+        eim.getInstanceMap(920010900).resetPQ(level);\n+        eim.getInstanceMap(920010910).resetPQ(level);\n+        eim.getInstanceMap(920010911).resetPQ(level);\n+        eim.getInstanceMap(920010912).resetPQ(level);\n+        eim.getInstanceMap(920010920).resetPQ(level);\n+        eim.getInstanceMap(920010921).resetPQ(level);\n+        eim.getInstanceMap(920010922).resetPQ(level);\n+        eim.getInstanceMap(920010930).resetPQ(level);\n+        eim.getInstanceMap(920010931).resetPQ(level);\n+        eim.getInstanceMap(920010932).resetPQ(level);\n+        eim.getInstanceMap(920011000).resetPQ(level);\n+        eim.getInstanceMap(920011100).resetPQ(level);\n+        eim.getInstanceMap(920011200).resetPQ(level);\n+        eim.getInstanceMap(920011300).resetPQ(level);\n+        \n+        respawnStages(eim);\n+        \n+        var d = new Date();\n+        eim.getInstanceMap(920010400).getReactorByName(\"music\").setEventState(d.getDay());\n+        \n+        eim.startEventTimer(eventTime * 60000);\n+        setEventRewards(eim);\n+        setEventExclusives(eim);\n+        \n+        return eim;\n+}\n+\n+function afterSetup(eim) {\n+        var rnd = Math.floor(Math.random() * 4);\n+        eim.applyEventPlayersItemBuff(2022090 + rnd);\n+}\n+\n+function respawnStages(eim) {}\n+\n+function playerEntry(eim, player) {\n+        var map = eim.getMapInstance(entryMap);\n+        player.changeMap(map, map.getPortal(0));\n+        \n+        var texttt = \"Hi, my name is Eak, the Chamberlain of the Goddess. Don't be alarmed; you won't be able to see me right now. Back when the Goddess turned into a block of stone, I simultaneously lost my own power. If you gather up the power of the Magic Cloud of Orbis, however, then I'll be able to recover my body and re-transform back to my original self. Please collect #b20#k Magic Clouds and bring them back to me. Right now, you'll only see me as a tiny, flickering light.\";\n+        player.getClient().getSession().write(Packages.tools.MaplePacketCreator.getNPCTalk(2013001, /*(byte)*/ 0, texttt, \"00 00\", /*(byte)*/ 0));\n }\n \n-function setup() {\n-    instanceId = em.getChannelServer().getInstanceId();\n-    exitMap = em.getChannelServer().getMapFactory().getMap(920011200); //Teh exit map :) <---------t\n-    var instanceName = \"OrbisPQ\" + instanceId;\n-    var eim = em.newInstance(instanceName);\n-    var mf = eim.getMapFactory();\n-    em.getChannelServer().addInstanceId();\n-    var map = mf.getMap(920010000);//wutt\n-    //map.shuffleReactors();\n-    // eim.addMapInstance(920010000,map);\n-    //var firstPortal = eim.getMapInstance(920010000).getPortal(\"in00\");\n-    //firstPortal.setScriptName(\"hontale_BtoB1\");\n-    //Fuck this timer\n-    //eim.setProperty(\"bulbWay\", 0);\n-    //Define all Maps and PortalScripts\n-    var centerMap = eim.getMapInstance(920010100);\n-    centerMap.getPortal(13).setScriptName(\"orbisPQSealedRoom\");\n-    centerMap.getPortal(4).setScriptName(\"orbisPQWalkway\");\n-    centerMap.getPortal(12).setScriptName(\"orbisPQStorage\");\n-    centerMap.getPortal(5).setScriptName(\"orbisPQLobby\");\n-    centerMap.getPortal(14).setScriptName(\"orbisPQOnTheWayUp\");\n-    centerMap.getPortal(15).setScriptName(\"orbisPQLounge\");\n-    centerMap.getPortal(16).setScriptName(\"orbisPQRoomOfDarkness\");\n-    var walkwayMap = eim.getMapInstance(920010200);\n-    var storageMap = eim.getMapInstance(920010300);\n-    var lobbyMap = eim.getMapInstance(920010400);\n-    var sealedRoomMap = eim.getMapInstance(920010500);\n-    var loungeMap = eim.getMapInstance(920010600);\n-    var onTheWayUpMap = eim.getMapInstance(920010700);\n-    var bossMap = eim.getMapInstance(920010800);\n-    var jailMap = eim.getMapInstance(920010900);\n-    var roomOfDarknessMap = eim.getMapInstance(920011000);\n-    var bonusMap = eim.getMapInstance(920011100);\n-    var endMap = eim.getMapInstance(920011300);\n-    walkwayMap.getPortal(13).setScriptName(\"orbisPQWalkwayExit\");\n-    storageMap.getPortal(1).setScriptName(\"orbisPQStorageExit\");\n-    lobbyMap.getPortal(8).setScriptName(\"orbisPQLobbyExit\");\n-    sealedRoomMap.getPortal(3).setScriptName(\"orbisPQSRExit\");\n-    loungeMap.getPortal(17).setScriptName(\"orbisPQLoungeExit\");\n-    onTheWayUpMap.getPortal(23).setScriptName(\"orbisPQOnTheWayUpExit\");\n-    bossMap.getPortal(1).setScriptName(\"orbisPQGardenExit\");\n-    roomOfDarknessMap.getPortal(1).setScriptName(\"orbisPQRoomOfDarknessExit\");\n-    //-->Fuck we are done with portals -.-\n-    eim.setProperty(\"killedCellions\", \"0\");\n-    eim.setProperty(\"papaSpawned\", \"no\");\n-    em.schedule(\"timeOut\", 60 * 60000);\n-    em.schedule(\"broadcastClock\", 1500);\n-    eim.setProperty(\"entryTimestamp\",System.currentTimeMillis() + (60 * 60000));\n-\t\n-    return eim;\n+function scheduledTimeout(eim) {\n+        if(eim.getIntProperty(\"statusStg8\") == 1) {\n+                eim.warpEventTeam(920011300);\n+        }\n+        else {\n+                end(eim);\n+        }\n }\n \n-function playerEntry(eim, player) {\n-    var map = eim.getMapInstance(920010000);\n-    player.changeMap(map, map.getPortal(0));\n-    player.getClient().getSession().write(net.sf.odinms.tools.MaplePacketCreator.getClock((Long.parseLong(eim.getProperty(\"entryTimestamp\")) - System.currentTimeMillis()) / 1000));\n-    var texttt = \"Hi, my name is Eak, the Chamberlain of the Goddess. Don't be alarmed; you won't be able to see me right now. Back when the Goddess turned into a block of stone, I simultaneously lost my own power. If you gather up the power of the Magic Cloud of Orbis, however, then I'll be able to recover my body and re-transform back to my original self. Please collect #b20#k Magic Clouds and bring them back to me. Right now, you'll only see me as a tiny, flickering light.\"\n-    player.getClient().getSession().write(net.sf.odinms.tools.MaplePacketCreator.getNPCTalk(2013001, /*(byte)*/ 0, texttt, \"00 00\"));\n-//player.getClient().getSession().write(net.sf.odinms.scripting.npc.NPCScriptManager.dispose(eim.getClient()));\n-//THE CLOCK IS SHIT\n-//player.getClient().getSession().write(net.sf.odinms.tools.MaplePacketCreator.getClock(1800));\n+function playerExit(eim, player) {\n+        eim.unregisterPlayer(player);\n+        player.changeMap(exitMap, 0);\n }\n \n-function playerDead(eim, player) {\n+function changedMap(eim, player, mapid) {\n+        if (mapid < minMapId || mapid > maxMapId) {\n+                if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+                        eim.unregisterPlayer(player);\n+                        end(eim);\n+                }\n+                else\n+                        eim.unregisterPlayer(player);\n+        }\n }\n \n-function playerRevive(eim, player) {\n-    if (eim.isLeader(player)) { //check for party leader\n-        //boot whole party and end\n-        var party = eim.getPlayers();\n-        for (var i = 0; i < party.size(); i++) {\n-            playerExit(eim, party.get(i));\n+function changedLeader(eim, leader) {\n+        var mapid = leader.getMapId();\n+        if (!eim.isEventCleared() && (mapid < minMapId || mapid > maxMapId)) {\n+                end(eim);\n         }\n-        eim.dispose();\n-    }\n-    else { //boot dead player\n-        // If only 5 players are left, uncompletable:\n-        var party = eim.getPlayers();\n-        if (party.size() <= minPlayers) {\n-            for (var i = 0; i < party.size(); i++) {\n-                playerExit(eim,party.get(i));\n-            }\n-            eim.dispose();\n+}\n+\n+function playerDead(eim, player) {}\n+\n+function playerRevive(eim, player) { // player presses ok on the death pop up.\n+        if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+                eim.unregisterPlayer(player);\n+                end(eim);\n         }\n         else\n-            playerExit(eim, player);\n-    }\n+                eim.unregisterPlayer(player);\n }\n \n function playerDisconnected(eim, player) {\n-    if (eim.isLeader(player)) { //check for party leader\n-        //PWN THE PARTY (KICK OUT)\n-        var party = eim.getPlayers();\n-        for (var i = 0; i < party.size(); i++) {\n-            if (party.get(i).equals(player)) {\n-                removePlayer(eim, player);\n-            }\n-            else {\n-                playerExit(eim, party.get(i));\n-            }\n-        }\n-        eim.dispose();\n-    }\n-    else { //KICK THE D/CED CUNT\n-        // If only 5 players are left, uncompletable:\n-        var party = eim.getPlayers();\n-        if (party.size() < minPlayers) {\n-            for (var i = 0; i < party.size(); i++) {\n-                playerExit(eim,party.get(i));\n-            }\n-            eim.dispose();\n+        if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+                eim.unregisterPlayer(player);\n+                end(eim);\n         }\n         else\n-            playerExit(eim, player);\n-    }\n+                eim.unregisterPlayer(player);\n }\n \n-function leftParty(eim, player) {\t\t\t\n-    // If only 5 players are left, uncompletable:\n-    var party = eim.getPlayers();\n-    if (party.size() <= minPlayers) {\n-        for (var i = 0; i < party.size(); i++) {\n-            playerExit(eim,party.get(i));\n+function leftParty(eim, player) {\n+        if (eim.isEventTeamLackingNow(false, minPlayers, player)) {\n+                eim.unregisterPlayer(player);\n+                end(eim);\n         }\n-        eim.dispose();\n-    }\n-    else\n-        playerExit(eim, player);\n+        else\n+                eim.unregisterPlayer(player);\n }\n \n function disbandParty(eim) {\n-    //boot whole party and end\n-    var party = eim.getPlayers();\n-    for (var i = 0; i < party.size(); i++) {\n-        playerExit(eim, party.get(i));\n-    }\n-    eim.dispose();\n+        end(eim);\n }\n \n-function playerExit(eim, player) {\n-    eim.unregisterPlayer(player);\n-    player.cancelAllBuffs(); //We don't want people going out with wonky blessing >=(\n-    player.changeMap(exitMap, exitMap.getPortal(0));\n+function monsterValue(eim, mobId) {\n+        return 1;\n }\n \n-//Those offline cuntts\n-function removePlayer(eim, player) {\n-    eim.unregisterPlayer(player);\n-    player.getMap().removePlayer(player);\n-    player.setMap(exitMap);\n+function end(eim) {\n+        var party = eim.getPlayers();\n+        for (var i = 0; i < party.size(); i++) {\n+                playerExit(eim, party.get(i));\n+        }\n+        eim.dispose();\n }\n \n-function clearPQ(eim) {\n-    // W00t! Bonus!!\n-    var iter = eim.getPlayers().iterator();\n-    var bonusMap = eim.getMapInstance(920011100);\n-    while (iter.hasNext()) {\n-        var player = iter.next();\n-        player.changeMap(bonusMap, bonusMap.getPortal(0));\n-        eim.setProperty(\"entryTimestamp\",System.currentTimeMillis() + (1 * 60000));\n-        player.getClient().getSession().write(net.sf.odinms.tools.MaplePacketCreator.getClock(60));\n-    }\n-    eim.schedule(\"finish\", 60000)\n+function giveRandomEventReward(eim, player) {\n+        eim.giveEventReward(player);\n }\n \n-function finish(eim) {\n-    var dMap = eim.getMapInstance(920011300);\n-    var iter = eim.getPlayers().iterator();\n-    while (iter.hasNext()) {\n-        var player = iter.next();\n-        eim.unregisterPlayer(player);\n-        player.changeMap(dMap, dMap.getPortal(0));\n-    }\n-    eim.dispose();\n+function clearPQ(eim) {\n+        eim.stopEventTimer();\n+        eim.setEventCleared();\n }\n \n function monsterKilled(mob, eim) {}\n \n-function allMonstersDead(eim) {} //Open Portal? o.O\n+function allMonstersDead(eim) {}\n \n-function cancelSchedule() {\n-}\n-\n-function timeOut() {\n-    var iter = em.getInstances().iterator();\n-    while (iter.hasNext()) {\n-        var eim = iter.next();\n-        if (eim.getPlayerCount() > 0) {\n-            var pIter = eim.getPlayers().iterator();\n-            while (pIter.hasNext()) {\n-                playerExit(eim, pIter.next());\n-            }\n-        }\n-        eim.dispose();\n-    }\n-}\n-\n-function playerClocks(eim, player) {\n-    if (player.getMap().hasTimer() == false){\n-        player.getClient().getSession().write(net.sf.odinms.tools.MaplePacketCreator.getClock((Long.parseLong(eim.getProperty(\"entryTimestamp\")) - System.currentTimeMillis()) / 1000));\n-    //player.getMap().setTimer(true);\n-    }\n-}\n-\n-function playerTimer(eim, player) {\n-    if (player.getMap().hasTimer() == false) {\n-        player.getMap().setTimer(true);\n-    }\n-}\n-\n-function broadcastClock(eim, player) {\n-    //var party = eim.getPlayers();\n-    var iter = em.getInstances().iterator();\n-    while (iter.hasNext()) {\n-        var eim = iter.next();\n-        if (eim.getPlayerCount() > 0) {\n-            var pIter = eim.getPlayers().iterator();\n-            while (pIter.hasNext()) {\n-                playerClocks(eim, pIter.next());\n-            }\n-        }\n-    //em.schedule(\"broadcastClock\", 1600);\n-    }\n-    // for (var kkl = 0; kkl < party.size(); kkl++) {\n-    // party.get(kkl).getMap().setTimer(true);\n-    // }\n-    var iterr = em.getInstances().iterator();\n-    while (iterr.hasNext()) {\n-        var eim = iterr.next();\n-        if (eim.getPlayerCount() > 0) {\n-            var pIterr = eim.getPlayers().iterator();\n-            while (pIterr.hasNext()) {\n-                //playerClocks(eim, pIter.next());\n-                playerTimer(eim, pIterr.next());\n-            }\n-        }\n-    //em.schedule(\"broadcastClock\", 1600);\n-    }\n-    em.schedule(\"broadcastClock\", 1600);\n-}\n+function cancelSchedule() {}\n \n-function dispose() {\n+function dispose(eim) {}\n \n-}\n\\ No newline at end of file"}, {"sha": "88451adc455a901c9b6e59c6cbafe7a3c4a43322", "filename": "scripts/event/OrbisPQ_old.js", "status": "added", "additions": 296, "deletions": 0, "changes": 296, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/OrbisPQ_old.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/OrbisPQ_old.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/OrbisPQ_old.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,296 @@\n+/* \n+ * This file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc> \n+                       Matthias Butz <matze@odinms.de>\n+                       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License version 3\n+    as published by the Free Software Foundation. You may not use, modify\n+    or distribute this program under any other version of the\n+    GNU Affero General Public License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+\t\n+\tTHIS  FILE WAS MADE BY JVLAPLE. REMOVING THIS NOTICE MEANS YOU CAN'T USE THIS SCRIPT OR ANY OTHER SCRIPT PROVIDED BY JVLAPLE.\n+ */\n+\n+/*\n+ * @Author Jvlaple\n+ * \n+ * Orbis Party Quest\n+ */\n+\n+importPackage(java.lang);\n+importPackage(Packages.world);\n+importPackage(Packages.client);\n+importPackage(Packages.server.maps);\n+importPackage(Packages.server.life);\n+importPackage(Packages.scripting.npc);\n+\n+var exitMap;\n+var instanceId;\n+var minPlayers = 1;\n+\n+function init() {\n+    instanceId = 1;\n+}\n+\n+\n+\n+function monsterValue(eim, mobId) {\n+    return 1;\n+}\n+\n+function setup() {\n+    instanceId = em.getChannelServer().getInstanceId();\n+    exitMap = em.getChannelServer().getMapFactory().getMap(920011200); //Teh exit map :) <---------t\n+    var instanceName = \"OrbisPQ\" + instanceId;\n+    var eim = em.newInstance(instanceName);\n+    var mf = eim.getMapFactory();\n+    em.getChannelServer().addInstanceId();\n+    var map = mf.getMap(920010000);//wutt\n+    //map.shuffleReactors();\n+    // eim.addMapInstance(920010000,map);\n+    //var firstPortal = eim.getMapInstance(920010000).getPortal(\"in00\");\n+    //firstPortal.setScriptName(\"hontale_BtoB1\");\n+    //Fuck this timer\n+    //eim.setProperty(\"bulbWay\", 0);\n+    //Define all Maps and PortalScripts\n+    var centerMap = eim.getMapInstance(920010100);\n+    centerMap.getPortal(13).setScriptName(\"orbisPQSealedRoom\");\n+    centerMap.getPortal(4).setScriptName(\"orbisPQWalkway\");\n+    centerMap.getPortal(12).setScriptName(\"orbisPQStorage\");\n+    centerMap.getPortal(5).setScriptName(\"orbisPQLobby\");\n+    centerMap.getPortal(14).setScriptName(\"orbisPQOnTheWayUp\");\n+    centerMap.getPortal(15).setScriptName(\"orbisPQLounge\");\n+    centerMap.getPortal(16).setScriptName(\"orbisPQRoomOfDarkness\");\n+    var walkwayMap = eim.getMapInstance(920010200);\n+    var storageMap = eim.getMapInstance(920010300);\n+    var lobbyMap = eim.getMapInstance(920010400);\n+    var sealedRoomMap = eim.getMapInstance(920010500);\n+    var loungeMap = eim.getMapInstance(920010600);\n+    var onTheWayUpMap = eim.getMapInstance(920010700);\n+    var bossMap = eim.getMapInstance(920010800);\n+    var jailMap = eim.getMapInstance(920010900);\n+    var roomOfDarknessMap = eim.getMapInstance(920011000);\n+    var bonusMap = eim.getMapInstance(920011100);\n+    var endMap = eim.getMapInstance(920011300);\n+    walkwayMap.getPortal(13).setScriptName(\"orbisPQWalkwayExit\");\n+    storageMap.getPortal(1).setScriptName(\"orbisPQStorageExit\");\n+    lobbyMap.getPortal(8).setScriptName(\"orbisPQLobbyExit\");\n+    sealedRoomMap.getPortal(3).setScriptName(\"orbisPQSRExit\");\n+    loungeMap.getPortal(17).setScriptName(\"orbisPQLoungeExit\");\n+    onTheWayUpMap.getPortal(23).setScriptName(\"orbisPQOnTheWayUpExit\");\n+    bossMap.getPortal(1).setScriptName(\"orbisPQGardenExit\");\n+    roomOfDarknessMap.getPortal(1).setScriptName(\"orbisPQRoomOfDarknessExit\");\n+    //-->Fuck we are done with portals -.-\n+    eim.setProperty(\"killedCellions\", \"0\");\n+    eim.setProperty(\"papaSpawned\", \"no\");\n+    em.schedule(\"timeOut\", 60 * 60000);\n+    em.schedule(\"broadcastClock\", 1500);\n+    eim.setProperty(\"entryTimestamp\",System.currentTimeMillis() + (60 * 60000));\n+\t\n+    return eim;\n+}\n+\n+function afterSetup(eim) {}\n+\n+function playerEntry(eim, player) {\n+    var map = eim.getMapInstance(920010000);\n+    player.changeMap(map, map.getPortal(0));\n+    player.getClient().getSession().write(net.sf.odinms.tools.MaplePacketCreator.getClock((Long.parseLong(eim.getProperty(\"entryTimestamp\")) - System.currentTimeMillis()) / 1000));\n+    var texttt = \"Hi, my name is Eak, the Chamberlain of the Goddess. Don't be alarmed; you won't be able to see me right now. Back when the Goddess turned into a block of stone, I simultaneously lost my own power. If you gather up the power of the Magic Cloud of Orbis, however, then I'll be able to recover my body and re-transform back to my original self. Please collect #b20#k Magic Clouds and bring them back to me. Right now, you'll only see me as a tiny, flickering light.\"\n+    player.getClient().getSession().write(net.sf.odinms.tools.MaplePacketCreator.getNPCTalk(2013001, /*(byte)*/ 0, texttt, \"00 00\"));\n+//player.getClient().getSession().write(net.sf.odinms.scripting.npc.NPCScriptManager.dispose(eim.getClient()));\n+//THE CLOCK IS SHIT\n+//player.getClient().getSession().write(net.sf.odinms.tools.MaplePacketCreator.getClock(1800));\n+}\n+\n+function playerDead(eim, player) {\n+}\n+\n+function playerRevive(eim, player) {\n+    if (eim.isLeader(player)) { //check for party leader\n+        //boot whole party and end\n+        var party = eim.getPlayers();\n+        for (var i = 0; i < party.size(); i++) {\n+            playerExit(eim, party.get(i));\n+        }\n+        eim.dispose();\n+    }\n+    else { //boot dead player\n+        // If only 5 players are left, uncompletable:\n+        var party = eim.getPlayers();\n+        if (party.size() <= minPlayers) {\n+            for (var i = 0; i < party.size(); i++) {\n+                playerExit(eim,party.get(i));\n+            }\n+            eim.dispose();\n+        }\n+        else\n+            playerExit(eim, player);\n+    }\n+}\n+\n+function playerDisconnected(eim, player) {\n+    if (eim.isLeader(player)) { //check for party leader\n+        //PWN THE PARTY (KICK OUT)\n+        var party = eim.getPlayers();\n+        for (var i = 0; i < party.size(); i++) {\n+            if (party.get(i).equals(player)) {\n+                removePlayer(eim, player);\n+            }\n+            else {\n+                playerExit(eim, party.get(i));\n+            }\n+        }\n+        eim.dispose();\n+    }\n+    else { //KICK THE D/CED CUNT\n+        // If only 5 players are left, uncompletable:\n+        var party = eim.getPlayers();\n+        if (party.size() < minPlayers) {\n+            for (var i = 0; i < party.size(); i++) {\n+                playerExit(eim,party.get(i));\n+            }\n+            eim.dispose();\n+        }\n+        else\n+            playerExit(eim, player);\n+    }\n+}\n+\n+function leftParty(eim, player) {\t\t\t\n+    // If only 5 players are left, uncompletable:\n+    var party = eim.getPlayers();\n+    if (party.size() <= minPlayers) {\n+        for (var i = 0; i < party.size(); i++) {\n+            playerExit(eim,party.get(i));\n+        }\n+        eim.dispose();\n+    }\n+    else\n+        playerExit(eim, player);\n+}\n+\n+function disbandParty(eim) {\n+    //boot whole party and end\n+    var party = eim.getPlayers();\n+    for (var i = 0; i < party.size(); i++) {\n+        playerExit(eim, party.get(i));\n+    }\n+    eim.dispose();\n+}\n+\n+function playerExit(eim, player) {\n+    eim.unregisterPlayer(player);\n+    player.cancelAllBuffs(); //We don't want people going out with wonky blessing >=(\n+    player.changeMap(exitMap, exitMap.getPortal(0));\n+}\n+\n+//Those offline cuntts\n+function removePlayer(eim, player) {\n+    eim.unregisterPlayer(player);\n+    player.getMap().removePlayer(player);\n+    player.setMap(exitMap);\n+}\n+\n+function clearPQ(eim) {\n+    // W00t! Bonus!!\n+    var iter = eim.getPlayers().iterator();\n+    var bonusMap = eim.getMapInstance(920011100);\n+    while (iter.hasNext()) {\n+        var player = iter.next();\n+        player.changeMap(bonusMap, bonusMap.getPortal(0));\n+        eim.setProperty(\"entryTimestamp\",System.currentTimeMillis() + (1 * 60000));\n+        player.getClient().getSession().write(net.sf.odinms.tools.MaplePacketCreator.getClock(60));\n+    }\n+    eim.schedule(\"finish\", 60000)\n+}\n+\n+function finish(eim) {\n+    var dMap = eim.getMapInstance(920011300);\n+    var iter = eim.getPlayers().iterator();\n+    while (iter.hasNext()) {\n+        var player = iter.next();\n+        eim.unregisterPlayer(player);\n+        player.changeMap(dMap, dMap.getPortal(0));\n+    }\n+    eim.dispose();\n+}\n+\n+function monsterKilled(mob, eim) {}\n+\n+function allMonstersDead(eim) {} //Open Portal? o.O\n+\n+function cancelSchedule() {\n+}\n+\n+function timeOut() {\n+    var iter = em.getInstances().iterator();\n+    while (iter.hasNext()) {\n+        var eim = iter.next();\n+        if (eim.getPlayerCount() > 0) {\n+            var pIter = eim.getPlayers().iterator();\n+            while (pIter.hasNext()) {\n+                playerExit(eim, pIter.next());\n+            }\n+        }\n+        eim.dispose();\n+    }\n+}\n+\n+function playerClocks(eim, player) {\n+    if (player.getMap().hasTimer() == false){\n+        player.getClient().getSession().write(net.sf.odinms.tools.MaplePacketCreator.getClock((Long.parseLong(eim.getProperty(\"entryTimestamp\")) - System.currentTimeMillis()) / 1000));\n+    //player.getMap().setTimer(true);\n+    }\n+}\n+\n+function playerTimer(eim, player) {\n+    if (player.getMap().hasTimer() == false) {\n+        player.getMap().setTimer(true);\n+    }\n+}\n+\n+function broadcastClock(eim, player) {\n+    //var party = eim.getPlayers();\n+    var iter = em.getInstances().iterator();\n+    while (iter.hasNext()) {\n+        var eim = iter.next();\n+        if (eim.getPlayerCount() > 0) {\n+            var pIter = eim.getPlayers().iterator();\n+            while (pIter.hasNext()) {\n+                playerClocks(eim, pIter.next());\n+            }\n+        }\n+    //em.schedule(\"broadcastClock\", 1600);\n+    }\n+    // for (var kkl = 0; kkl < party.size(); kkl++) {\n+    // party.get(kkl).getMap().setTimer(true);\n+    // }\n+    var iterr = em.getInstances().iterator();\n+    while (iterr.hasNext()) {\n+        var eim = iterr.next();\n+        if (eim.getPlayerCount() > 0) {\n+            var pIterr = eim.getPlayers().iterator();\n+            while (pIterr.hasNext()) {\n+                //playerClocks(eim, pIter.next());\n+                playerTimer(eim, pIterr.next());\n+            }\n+        }\n+    //em.schedule(\"broadcastClock\", 1600);\n+    }\n+    em.schedule(\"broadcastClock\", 1600);\n+}\n+\n+function dispose() {\n+\n+}\n\\ No newline at end of file"}, {"sha": "4182dcfbb47cf1f257341c4d02e31c56b1472f75", "filename": "scripts/event/PiratePQ.js", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/PiratePQ.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/PiratePQ.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/PiratePQ.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -167,6 +167,8 @@ function setup(level, lobbyid) {\n         return eim;\n }\n \n+function afterSetup(eim) {}\n+\n function respawnStg4(eim) {\n         eim.getMapInstance(925100400).instanceMapRespawn();\n         eim.schedule(\"respawnStg4\", 10 * 1000);"}, {"sha": "1c32a64862d2e1dea5d1ff347de883753fd4626a", "filename": "scripts/event/RockSpirit.js", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/RockSpirit.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/RockSpirit.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/RockSpirit.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -38,6 +38,8 @@ function setup() {\n \treturn eim;\n }\n \n+function afterSetup(eim) {}\n+\n function respawn(eim) {\n \tvar map = eim.getMapInstance(startMap.getId());\n \tvar map2 = eim.getMapInstance(otherMap.getId());"}, {"sha": "45e8251c61525a6775bdc8948fc937ee48858f3f", "filename": "scripts/event/ScargaBattle.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/ScargaBattle.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/ScargaBattle.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/ScargaBattle.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -44,7 +44,7 @@ function setup() {\n \treturn eim;\n }\n \n-\n+function afterSetup(eim) {}\n \n function playerEntry(eim,player) {\n \tvar battle = eim.getMapInstance(battleMap.getId());"}, {"sha": "400458b53a8a06758ff5c760a24f14c1e5e2cbdc", "filename": "scripts/event/VIPRockSpirit.js", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/VIPRockSpirit.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/VIPRockSpirit.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/VIPRockSpirit.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -38,6 +38,8 @@ function setup() {\n \treturn eim;\n }\n \n+function afterSetup(eim) {}\n+\n function respawn(eim) {\n \tvar map = eim.getMapInstance(startMap.getId());\n \tvar map2 = eim.getMapInstance(otherMap.getId());"}, {"sha": "66798beaf1915782c19dbc67ba496f1289e26f81", "filename": "scripts/event/ZakumBattle.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/ZakumBattle.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/ZakumBattle.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/ZakumBattle.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -53,7 +53,7 @@ function setup() {\n \treturn eim;\n }\n \n-\n+function afterSetup(eim) {}\n \n function playerEntry(eim,player) {\n \tvar altar = eim.getMapInstance(altarMap.getId());"}, {"sha": "2e14c3c4c402957657f2adc3535653b2fee6a129", "filename": "scripts/event/ZakumPQ.js", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/ZakumPQ.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/ZakumPQ.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/ZakumPQ.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -60,6 +60,8 @@ function setup() {\n     return eim;\n }\n \n+function afterSetup(eim) {}\n+\n function playerEntry(eim, player) {\n     var map = eim.getMapInstance(280010000);\n     player.changeMap(map, map.getPortal(0));"}, {"sha": "7c141e8148f848e6d18064a775621704d6d837e6", "filename": "scripts/event/s4aWorld.js", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/s4aWorld.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/event/s4aWorld.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/s4aWorld.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -23,6 +23,8 @@ function setup() {\n     return eim;\n }\n \n+function afterSetup(eim) {}\n+\n function playerEntry(eim, player) {\n     var map = eim.getMapFactory().getMap(910500000);\n     player.changeMap(map, map.getPortal(0));"}, {"sha": "c5e9747f6b5d943cd1f755e7faafe4a39c192c72", "filename": "scripts/npc/1012112.js", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/npc/1012112.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/npc/1012112.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1012112.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -83,17 +83,17 @@ function action(mode, type, selection) {\n                                         cm.sendOk(\"#e#b<Party Quest: Primrose Hill>#k#n\\r\\nCollect primrose seeds from the flowers at the bottom part of the map and drop them by the platforms above the stage. Primrose seed color must match to grow the seeds, so test until you find the correct combination. When all the seeds have been planted, that is, starting second part of the mission, scout the Moon Bunny while it prepares Rice Cakes for the hungry Growlie. Once Growlie becomes satisfied, your mission is complete.\");\n                                         cm.dispose();\n                                 } else {\n-                                        cm.sendYesNo(\"So you want to exchange #b20 #b#t4001129##k for the event-designed hat?\");\n+                                        cm.sendYesNo(\"So you want to exchange #b20 #b#t4001158##k for the event-designed hat?\");\n                                 }\n                         } else {\n-                                if(cm.hasItem(4001129, 20)) {\n+                                if(cm.hasItem(4001158, 20)) {\n                                         if(cm.canHold(1002798)) {\n-                                                cm.gainItem(4001129, -20);\n+                                                cm.gainItem(4001158, -20);\n                                                 cm.gainItem(1002798, 20);\n                                                 cm.sendNext(\"Here it is. Enjoy!\");\n                                         }\n                                 } else {\n-                                        cm.sendNext(\"You don't have enough #t4001129# to buy it yet!\");\n+                                        cm.sendNext(\"You don't have enough #t4001158# to buy it yet!\");\n                                 }\n                                 \n                                 cm.dispose();"}, {"sha": "54eecd98c695a2faace95944b8f97553d36ad205", "filename": "scripts/npc/2013000.js", "status": "added", "additions": 91, "deletions": 0, "changes": 91, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/npc/2013000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/npc/2013000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2013000.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,91 @@\n+/**\n+ * @author: Ronan\n+ * @npc: Wonky\n+ * @map: 200080101 - Orbis - The Unknown Tower\n+ * @func: Orbis PQ\n+*/\n+\n+var status = 0;\n+var em = null;\n+\n+function start() {\n+\tstatus = -1;\n+\taction(1, 0, 0);\n+}\n+\n+function action(mode, type, selection) {\n+        if (mode == -1) {\n+                cm.dispose();\n+        } else {\n+                if (mode == 0 && status == 0) {\n+                        cm.dispose();\n+                        return;\n+                }\n+                if (mode == 1)\n+                        status++;\n+                else\n+                        status--;\n+\n+                if(cm.getMapId() == 200080101) {\n+                        if (status == 0) {\n+                                em = cm.getEventManager(\"OrbisPQ\");\n+                                if(em == null) {\n+                                        cm.sendOk(\"The Orbis PQ has encountered an error.\");\n+                                        cm.dispose();\n+                                        return;\n+                                }\n+\n+                                cm.sendSimple(\"#e#b<Party Quest: Tower of Goddess>\\r\\n#k#n\" + em.getProperty(\"party\") + \"\\r\\n\\r\\nWould you like to assemble or join a team to solve the puzzles of the #bTower of Goddess#k? Have your #bparty leader#k talk to me or make yourself a party.#b\\r\\n#L0#I want to participate in the party quest.\\r\\n#L1#I want to find party members.\\r\\n#L2#I would like to hear more details.\\r\\n#L3#I would like to reclaim a prize.\");\n+                        } else if (status == 1) {\n+                                if (selection == 0) {\n+                                        if (cm.getParty() == null) {\n+                                                cm.sendOk(\"You can participate in the party quest only if you are in a party.\");\n+                                                cm.dispose();\n+                                        } else if(!cm.isLeader()) {\n+                                                cm.sendOk(\"Your party leader must talk to me to start this party quest.\");\n+                                                cm.dispose();\n+                                        } else {\n+                                                var eli = em.getEligibleParty(cm.getParty());\n+                                                if(eli.size() > 0) {\n+                                                        if(!em.startInstance(cm.getParty(), cm.getPlayer().getMap(), 1)) {\n+                                                                cm.sendOk(\"Another party has already entered the #rParty Quest#k in this channel. Please try another channel, or wait for the current party to finish.\");\n+                                                        }\n+                                                }\n+                                                else {\n+                                                        cm.sendOk(\"You cannot start this party quest yet, because either your party is not in the range size, some of your party members are not eligible to attempt it or they are not in this map. If you're having trouble finding party members, try Party Search.\");\n+                                                }\n+\n+                                                cm.dispose();\n+                                        }\n+                                } else if (selection == 1) {\n+                                        cm.sendOk(\"Try using a Super Megaphone or asking your buddies or guild to join!\");\n+                                        cm.dispose();\n+                                } else if (selection == 2) {\n+                                        cm.sendOk(\"#e#b<Party Quest: Tower of Goddess>#k#n\\r\\nOur goddess has been missing since some time ago, rumor has it She has been seen last time inside the Tower of Goddess. Furthermore, our sanctuary has been seized by the overwhelming forces of the pixies, those beings that are recently wandering at the outskirts of Orbis. Their leader, Papa Pixie, currently holds the throne and may know Her whereabouts, so we urge to find a composition of brave heroes to charge into and claim back our sanctuary and rescue Her. Will you join us?\\r\\n\");\n+                                        cm.dispose();\n+                                }\n+                                else {\n+                                        cm.sendSimple(\"So, what prize do you want to obtain?\\r\\n#b#L0#Give me Goddess Wristband.\\r\\n\");\n+                                }\n+                        } else if (status == 2) {\n+                                if (selection == 0) {\n+                                        if (!cm.haveItem(1082232) && cm.haveItem(4001158, 10)) {\n+                                                cm.gainItem(1082232, 1);\n+                                                cm.gainItem(4001158, -10);\n+                                                cm.dispose();\n+                                        } else {\n+                                                cm.sendOk(\"You either have Goddess Wristband already or you do not have 10 #t4001158#.\");\n+                                                cm.dispose();\n+                                        }\n+                                }\n+                        }\n+                } else {\n+                        if(status == 0) {\n+                                cm.sendYesNo(\"Are you going to drop out from this rescue mission?\");\n+                        } else if(status == 1) {\n+                                cm.warp(920011200);\n+                                cm.dispose();\n+                        }\n+                }\n+        }\n+}\n\\ No newline at end of file"}, {"sha": "40eea682794678972fee173e9ad0efdf5bc388c5", "filename": "scripts/npc/2013001.js", "status": "added", "additions": 289, "deletions": 0, "changes": 289, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/npc/2013001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/npc/2013001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2013001.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,289 @@\n+/**\n+ * @author: Ronan\n+ * @npc: Chamberlain Eak\n+ * @map: Orbis - Tower of Goddess\n+ * @func: Orbis PQ\n+*/\n+\n+var status = 0;\n+var em = null;\n+\n+function isStatueComplete() {\n+    for(var i = 1; i <= 6; i++) {\n+        if(cm.getMap().getReactorByName(\"scar\" + i).getState() < 1) return false;\n+    }\n+    \n+    return true;\n+}\n+\n+function clearStage(stage, eim) {\n+    eim.setProperty(\"statusStg\" + stage, \"1\");\n+    eim.showClearEffect(true);\n+}\n+\n+function start() {\n+    status = -1;\n+    action(1, 0, 0);\n+}\n+\n+function action(mode, type, selection) {\n+    if (mode == -1) {\n+        cm.dispose();\n+    } else {\n+        if (mode == 0 && status == 0) {\n+            cm.dispose();\n+            return;\n+        }\n+        if (mode == 1)\n+            status++;\n+        else\n+            status--;\n+    \n+        if (cm.getPlayer().getMapId() == 920011200) { //exit\n+            cm.warp(200080101);\n+            cm.dispose();\n+            return;\n+        }\n+        if (!cm.isLeader()) {\n+            if(cm.getPlayer().getMapId() == 920010000) {\n+                cm.warp(920010000, 2);\n+                cm.dispose();\n+                return;\n+            }\n+\n+            cm.sendOk(\"I only wish to speak to your leader!\");\n+            cm.dispose();\n+            return;\n+        }\n+\n+        var eim = cm.getEventInstance();\n+\n+        switch(cm.getPlayer().getMapId()) {\n+            case 920010000:\n+                if(eim.getIntProperty(\"statusStg0\") != 1) {\n+                    eim.warpEventTeamToMapSpawnPoint(920010000, 2);\n+                    eim.giveEventPlayersExp(3500);\n+                    clearStage(0, eim);\n+\n+                    cm.sendNext(\"Please save Minerva, She've been trapped in the seal by Papa Pixie, the terror of our tower! He misplaced all of our Minerva Statue's parts and we have to get it all back! Oh pardon me, I am the tower's Chamberlain, Eak. I am Minerva's royal servant.\");\n+                }\n+                else {\n+                    cm.warp(920010000, 2);\n+                }\n+                cm.dispose();\n+                break;\n+            case 920010100:\n+                if (isStatueComplete()) {\n+                    if (eim.getIntProperty(\"statusStg7\") == -1) {\n+                        eim.warpEventTeam(920010800);\n+                    } else if(eim.getIntProperty(\"statusStg8\") == -1) {\n+                        cm.sendOk(\"Oh! You brought the #t4001055#! Please, drop it at the base of the statue to bring Minerva back!\");\n+                    } else {\n+                        cm.sendOk(\"Thank you for saving Minerva! Please, talk to her...\");\n+                    }\n+                } else {\n+                    cm.sendOk(\"Please, save Minerva! Gather the six pieces of her statue and then talk to me to retrieve the final piece!\");\n+                } \n+                break;\n+            case 920010200: //walkway\n+                if (!cm.haveItem(4001050,30)) {\n+                    cm.sendOk(\"Gather the 30 Statue Pieces from the monsters in this stage, and please bring them to me so I can put them together!\");\n+                } else {\n+                    cm.sendOk(\"You got them all! Here, the 1st statue piece.\");\n+                    cm.removeAll(4001050);\n+                    cm.gainItem(4001044,1); //first piece\n+                    eim.giveEventPlayersExp(3500);\n+                    clearStage(1, eim);\n+                }\n+                break;\n+            case 920010300: //storage\n+                if(eim.getIntProperty(\"statusStg2\") != 1) {\n+                    if(cm.getMap().countMonsters() == 0 && cm.getMap().countItems() == 0) {\n+                        if(cm.canHold(4001045)) {\n+                            cm.sendOk(\"Oh, I've found the 2nd Piece of Statue. Here, take it.\");\n+                            cm.gainItem(4001045, 1);\n+                            eim.giveEventPlayersExp(3500);\n+                            clearStage(2, eim);\n+                            eim.setProperty(\"statusStg2\", \"1\");\n+                        } else {\n+                            cm.sendOk(\"I've found the 2nd Piece of Statue. Get a slot available on your inventory to take it.\");\n+                        }\n+                    } else {\n+                        cm.sendOk(\"Find the 2nd Piece of Statue that is hidden in this room.\");\n+                    }\n+                } else {\n+                    cm.sendOk(\"Well done. Go find the other statue pieces.\");\n+                }\n+                \n+                break;\n+            case 920010400: //lobby\n+                if (eim.getIntProperty(\"statusStg3\") == -1) {\n+                    cm.sendOk(\"Please, find the LP for the current day of week and place it on the music player.\\r\\n#v4001056# Sunday\\r\\n#v4001057# Monday\\r\\n#v4001058# Tuesday\\r\\n#v4001059# Wednesday\\r\\n#v4001060# Thursday\\r\\n#v4001061# Friday\\r\\n#v4001062# Saturday\\r\\n\");\n+                } else if (eim.getIntProperty(\"statusStg3\") == 0) {\n+                    cm.getMap().getReactorByName(\"stone3\").forceHitReactor(1);\n+                    cm.sendOk(\"Ooh, the music... It sounds so fitting with the ambient. Nicely done, a box has appeared on the field. Retrieve the statue part from it!\");\n+                    eim.giveEventPlayersExp(3500);\n+                    clearStage(3, eim);\n+                    eim.setProperty(\"statusStg3\", \"2\");\n+                    \n+                } else {\n+                    cm.sendOk(\"Thank you so much!\");\n+                }\n+                break;\n+            case 920010500: //sealed\n+                if (eim.getIntProperty(\"statusStg4\") == -1) {\n+                    var total = 3;\n+                    for(var i = 0; i < 2; i++) {\n+                        var rnd = Math.round(Math.random() * total);\n+                        total -= rnd;\n+                        \n+                        eim.setProperty(\"stage4_\" + i, rnd);\n+                    }\n+                    eim.setProperty(\"stage4_2\", \"\" + total);\n+                    \n+                    eim.setProperty(\"statusStg4\", \"0\");\n+                }\n+                if (eim.getIntProperty(\"statusStg4\") == 0) {\n+                    var players = Array();\n+                    var total = 0;\n+                    for (var i = 0; i < 3; i++) {\n+                        var z = cm.getMap().getNumPlayersItemsInArea(i);\n+                        players.push(z);\n+                        total += z;\n+                    }\n+                    if (total != 3) {\n+                        cm.sendOk(\"There needs to be 3 players OR items on the platforms.\");\n+                    } else {\n+                        var num_correct = 0;\n+                        for (var i = 0; i < 3; i++) {\n+                            if (eim.getProperty(\"stage4_\" + i).equals(\"\" + players[i])) {\n+                                num_correct++;\n+                            }\n+                        }\n+                        if (num_correct == 3) {\n+                            cm.sendOk(\"You found the right combination! A box has appeared on the top of this map, go retrieve the statue piece from it!\");\n+                            cm.getMap().getReactorByName(\"stone4\").forceHitReactor(1);\n+                            eim.giveEventPlayersExp(3500);\n+                            clearStage(4, eim);\n+                        } else {\n+                            eim.showWrongEffect();\n+                            if (num_correct > 0) {\n+                                cm.sendOk(\"One of the platforms has the right number of players.\");\n+                            } else {\n+                                cm.sendOk(\"All of the platforms have the wrong amount of players.\");\n+                            }\n+                        }\n+                    }\n+                } else {\n+                    cm.sendOk(\"Well done! Please, go fetch the other pieces and save Minerva!\");\n+                }\n+                cm.dispose();\n+                break;\n+            case 920010600: //lounge\n+                if(eim.getIntProperty(\"statusStg5\") == -1) {\n+                    if (!cm.haveItem(4001052,40)) {\n+                        cm.sendOk(\"Gather the 40 Statue Pieces from the monsters in this stage, and please bring them to me so I can put them together!\");\n+                    } else {\n+                        cm.sendOk(\"You got them all! Here, the 5th statue piece.\");\n+                        cm.removeAll(4001052);\n+                        cm.gainItem(4001048,1); //fifth piece\n+                        eim.giveEventPlayersExp(3500);\n+                        clearStage(5, eim);\n+                        eim.setIntProperty(\"statusStg5\", 1);\n+                    }\n+                } else {\n+                    cm.sendOk(\"You got them all here. Go search the others rooms of the tower.\");\n+                }\n+                break;\n+            case 920010700: //on the way up\n+                if (eim.getIntProperty(\"statusStg6\") == -1) {\n+                    var rnd1 = Math.floor(Math.random() * 5);\n+                    \n+                    var rnd2 = Math.floor(Math.random() * 5);\n+                    while(rnd2 == rnd1) {\n+                        rnd2 = Math.floor(Math.random() * 5);\n+                    }\n+                    \n+                    if(rnd1 > rnd2) {\n+                        rnd1 = rnd1 ^ rnd2;\n+                        rnd2 = rnd1 ^ rnd2;\n+                        rnd1 = rnd1 ^ rnd2;\n+                    }\n+                    \n+                    var comb = \"\";\n+                    for(var i = 0; i < rnd1; i++) comb += \"0\";\n+                    comb += \"1\";\n+                    for(var i = rnd1 + 1; i < rnd2; i++) comb += \"0\";\n+                    comb += \"1\";\n+                    for(var i = rnd2 + 1; i < 5; i++) comb += \"0\";\n+                    \n+                    eim.setProperty(\"stage6_c\", \"\" + comb);\n+                    \n+                    eim.setProperty(\"statusStg6\", \"0\");\n+                }\n+                \n+                var comb = eim.getProperty(\"stage6_c\");\n+                \n+                if (eim.getIntProperty(\"statusStg6\") == 0) {\n+                    var react = \"\";\n+                    var total = 0;\n+                    for(var i = 1; i <= 5; i++) {\n+                        if (cm.getMap().getReactorByName(\"\" + i).getState() > 0) {\n+                            react += \"1\";\n+                            total += 1;\n+                        } else {\n+                            react += \"0\";\n+                        }\n+                    }\n+                    \n+                    if (total != 2) {\n+                        cm.sendOk(\"There needs to be exactly 2 levers at the top of the map pushed on.\");\n+                    } else {\n+                        var num_correct = 0;\n+                        var psh_correct = 0;\n+                        for (var i = 0; i < 5; i++) {\n+                            if (react.charCodeAt(i) == comb.charCodeAt(i)) {\n+                                num_correct++;\n+                                if(react.charAt(i) == '1') psh_correct++;\n+                            }\n+                        }\n+                        if (num_correct == 5) {\n+                            cm.sendOk(\"You found the right combination! Retrieve the statue piece from inside it!\");\n+                            cm.getMap().getReactorByName(\"stone6\").forceHitReactor(1);\n+                            eim.giveEventPlayersExp(3500);\n+                            clearStage(6, eim);\n+                        } else {\n+                            eim.showWrongEffect();\n+                            if (psh_correct >= 1) {\n+                                cm.sendOk(\"One of the pushed levers is correct.\");\n+                            } else {\n+                                cm.sendOk(\"Both of the pushed levers are wrong.\");\n+                            }\n+                        }\n+                    }\n+                } else {\n+                    cm.sendOk(\"Nicely done!! Go check out the rest of the pieces.\");\n+                }\n+                break;\n+            case 920010800:\n+                cm.sendNext(\"Please, find a way to defeat Papa Pixie! Once you've found the Dark Nependeath by placing seeds, you've found Papa Pixie! Defeat it, and get the Root of Life to save Minerva!!!\"); \n+                break;\n+            case 920010900:\n+                cm.sendNext(\"This is the jail of the tower. You may find some goodies here, just be sure to clear the puzzles ahead as fast as possible.\");\n+                break;\n+            case 920011000:\n+                if(cm.getMap().countMonsters() > 0) {\n+                    cm.sendNext(\"This is the hidden room of the tower. After eliminating all monsters on this room, talk to me to gain access to the treasure room, leaving the center tower access behind.\");\n+                } else {\n+                    cm.warp(920011100);\n+                }\n+                break;\n+        }\n+        cm.dispose();\n+    }\n+}\n+\n+function clear() {\n+    cm.showEffect(true, \"quest/party/clear\");\n+    cm.playSound(true, \"Party1/Clear\");\n+}\n\\ No newline at end of file"}, {"sha": "6ae2dc47ef297ca838f278750c20f1abde292a60", "filename": "scripts/npc/2013002.js", "status": "modified", "additions": 22, "deletions": 17, "changes": 39, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/npc/2013002.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/npc/2013002.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2013002.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -24,10 +24,6 @@\n  *@author Jvlaple\n  */\n var status = 0;\n-var itemArray = Array(2000004, 2000005, 2000006, 2002020, 2002021, 2002022, 2002023, 2002024, 2002025, 2002026, 2001000, 2001002, 2002015, 2050005, 2022179, 2020014, 2020015 /*End of Pots*/, 2100000, 2100001, 2100002, 2100003, 2100004, 2100005, /*End of Sacks*/\n-    2061003, 2060003, 2060004, 2061004 /*End of Arrows*/, 2070006, 2070005, 2070007, 2070004 /*End of Stars*/, 2210000, 2210001, 2210002 /*End of Morph items*/ );\n-var itemQuan = Array(50, 20, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 5, 30, 2, 100, 50, 1, 1, 1, 1, 1, 1, 2000, 2000, 2000, 2000, 1, 1, 1, 1, 5, 5, 5);\n-var PQItems = new Array(4001022, 4001023);\n \n function start() {\n     status = -1;\n@@ -38,27 +34,36 @@ function action(mode, type, selection) {\n     if (mode < 1)\n         cm.dispose();\n     else {\n-        status++;\n+        status++;        \n         if (cm.getPlayer().getMapId() == 920010100) { //Center tower\n             if (status == 0)\n-                cm.sendNext(\"Thank you for not only restoring the statue, but rescuing me, Minerva, from the entrapment. May the blessing of the goddess be with you till the end...\");\n+                cm.sendYesNo(\"I have lifted the spell that was blocking the access to the tower's jail storages. You may find some goodies down there... Alternatively, you may want to be leaving now. Are you ready to exit?\");\n             else if (status == 1) {\n-                var eim = cm.getPlayer().getEventInstance();\n-                eim.clearPQ();\n+                cm.warp(920011300, 0);\n                 cm.dispose();\n             }\n+            \n+        } else if (cm.getPlayer().getMapId() == 920011100) {\n+            if (status == 0)\n+                cm.sendYesNo(\"So, are you ready to exit?\");\n+            else if (status == 1) {\n+                cm.warp(920011300, 0);\n+                cm.dispose();\n+            }\n+                        \n         } else if (cm.getPlayer().getMapId() == 920011300) {\n             if (status == 0) \n-                cm.sendNext(\"Thank you for not only restoring the statue, but rescuing me, Minerva, from the entrapment. May the blessing of the goddess be with you till the end...\");\n+                cm.sendNext(\"Thank you for not only restoring the statue, but rescuing me, Minerva, from the entrapment. May the blessing of the goddess be with you till the end... As a token of gratitude, please accept this memento for your bravery.\");\n             else if (status == 1) {\n-                for (var i = 0; i < PQItems.length; i++) \n-                    cm.removeAll(PQItems[i]); // Remove All PQ Items :D\n-                var randmm = (Math.random() * itemArray.length) | 0;\n-                cm.gainItem(itemArray[randmm], itemQuan[randmm]);\n-                cm.warp(200080101, 0);\n-                cm.dispose();\n+                if(cm.getEventInstance().giveEventReward(cm.getPlayer())) {\n+                    cm.warp(200080101, 0);\n+                    cm.dispose();\n+                }\n+                else {\n+                    cm.sendOk(\"Please make room on your inventory first.\");\n+                    cm.dispose();\n+                }\n             }\n         }\n     }\n-}\n-\t\t\t\t\n\\ No newline at end of file\n+}\n\\ No newline at end of file"}, {"sha": "f3536c2f7313ee42dfd8a201bed754e10df57dd2", "filename": "scripts/npc/2094001.js", "status": "modified", "additions": 11, "deletions": 11, "changes": 22, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/npc/2094001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/npc/2094001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2094001.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -61,53 +61,53 @@ function action(mode, type, selection) {\n                                 cm.sendSimple(\"Thank you for saving me! How can I help you?\\r\\n#b#L0#Get me out of here.\\r\\n#L1#Give me Pirate Hat.\");\n                         } else if (status == 1) {\n                                 if (selection == 0) {\n-                                        if (!cm.canHold(4001129, 1)) {\n+                                        if (!cm.canHold(4001158, 1)) {\n                                                 cm.sendOk(\"Please make room in ETC.\");\n                                                 cm.dispose();\n                                                 return;\n                                         }\n-                                        cm.gainItem(4001129, 1);\n+                                        cm.gainItem(4001158, 1);\n                                         cm.warp(251010404,0);\n                                 } else {\n                                         if (cm.haveItem(1003267, 1)) {\n                                                 cm.sendOk(\"You have the best hat.\");\n                                         } else if (cm.haveItem(1002573, 1)) {\n-                                                if (cm.haveItem(4001129, 20)) {\t\n+                                                if (cm.haveItem(4001158, 20)) {\t\n                                                         if (cm.canHold(1003267,1)) {\n                                                                 cm.gainItem(1002573, -1);\n-                                                                cm.gainItem(4001129, -20);\n+                                                                cm.gainItem(4001158, -20);\n                                                                 cm.gainItem(1003267,1);\n                                                                 cm.sendOk(\"I have given you the hat.\");\n                                                         } else {\n                                                                 cm.sendOk(\"Please make room in your EQUIP inventory before receiving the hat.\");\n                                                         }\n                                                 } else {\n-                                                        cm.sendOk(\"You need 20 #t4001129# to get the next hat.\");\n+                                                        cm.sendOk(\"You need 20 #t4001158# to get the next hat.\");\n                                                 }\n                                         } else if (cm.haveItem(1002572, 1)) {\n-                                                if (cm.haveItem(4001129, 20)) {\n+                                                if (cm.haveItem(4001158, 20)) {\n                                                         if (cm.canHold(1002573,1)) {\n                                                                 cm.gainItem(1002572, -1);\n-                                                                cm.gainItem(4001129, -20);\n+                                                                cm.gainItem(4001158, -20);\n                                                                 cm.gainItem(1002573,1);\n                                                                 cm.sendOk(\"I have given you the hat.\");\n                                                         } else {\n                                                                 cm.sendOk(\"Please make room in your EQUIP inventory before receiving the hat.\");\n                                                         }\n                                                 } else {\n-                                                        cm.sendOk(\"You need 20 #t4001129# to get the next hat.\");\n+                                                        cm.sendOk(\"You need 20 #t4001158# to get the next hat.\");\n                                                 }\n                                         } else {\n-                                                if (cm.haveItem(4001129, 20)) {\t\n+                                                if (cm.haveItem(4001158, 20)) {\t\n                                                         if (cm.canHold(1002572,1)) {\n-                                                                cm.gainItem(4001129, -20);\n+                                                                cm.gainItem(4001158, -20);\n                                                                 cm.gainItem(1002572,1);\n                                                                 cm.sendOk(\"I have given you the hat.\");\n                                                         } else {\n                                                                 cm.sendOk(\"Please make room in your EQUIP inventory before receiving the hat.\");\n                                                         }\n                                                 } else {\n-                                                        cm.sendOk(\"You need 20 #t4001129# to get the next hat.\");\n+                                                        cm.sendOk(\"You need 20 #t4001158# to get the next hat.\");\n                                                 }\n                                         }\n                                 }"}, {"sha": "f202542c4234d366b25dfd8a8cf51c0b781973ab", "filename": "scripts/npc/9020002.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/npc/9020002.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/npc/9020002.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9020002.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -48,7 +48,7 @@ function action(mode, type, selection){\n         if (status == 0) {\n             cm.sendNext(\"To return back to the city, follow this way.\");\n         } else {\n-            cm.getPlayer().changeMap(103000000, cm.getClient().getChannelServer().getMapFactory().getMap(103000000).getRandomSpawnpoint());\n+            cm.getPlayer().warp(103000000, cm.getClient().getChannelServer().getMapFactory().getMap(103000000).getRandomPlayerSpawnpoint());\n             cm.dispose();\n         }\n     } else {"}, {"sha": "dfee2e3dd0cedc968dd82a4450b8952cf3cf9c80", "filename": "scripts/portal/party3_gardenin.js", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/portal/party3_gardenin.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/portal/party3_gardenin.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/party3_gardenin.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,9 @@\n+function enter(pi) {\n+\tif (pi.getPlayer().getParty() != null && pi.isLeader() && pi.haveItem(4001055,1)) {\n+                pi.getEventInstance().warpEventTeam(920010100);\n+                return true;\n+\t} else {\n+\t\tpi.playerMessage(5,\"Please get the leader in this portal, make sure you have the Root of Life.\");\n+                return false;\n+\t}\n+}\n\\ No newline at end of file"}, {"sha": "084b93632b7d6e97fdf1de20635cdd47f7108b19", "filename": "scripts/portal/party3_jail1.js", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/portal/party3_jail1.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/portal/party3_jail1.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/party3_jail1.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,10 @@\n+function enter(pi) {\n+    if(pi.getEventInstance().getIntProperty(\"statusStg8\") == 1) {\n+        pi.warp(920010910,0);\n+        return true;\n+    }\n+    else {\n+        pi.playerMessage(5, \"The storage is currently inaccessible, as the powers of the Pixies remains active within the tower.\");\n+        return false;\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "37e981c6faba81cb8d81a171d7fc4d7a414f5f68", "filename": "scripts/portal/party3_jail2.js", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/portal/party3_jail2.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/portal/party3_jail2.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/party3_jail2.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,10 @@\n+function enter(pi) {\n+    if(pi.getEventInstance().getIntProperty(\"statusStg8\") == 1) {\n+        pi.warp(920010920,0);\n+        return true;\n+    }\n+    else {\n+        pi.playerMessage(5, \"The storage is currently inaccessible, as the powers of the Pixies remains active within the tower.\");\n+        return false;\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "346a0bb6c94a4398533ba1b02b32fe659d196372", "filename": "scripts/portal/party3_jail3.js", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/portal/party3_jail3.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/portal/party3_jail3.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/party3_jail3.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,10 @@\n+function enter(pi) {\n+    if(pi.getEventInstance().getIntProperty(\"statusStg8\") == 1) {\n+        pi.warp(920010930,0);\n+        return true;\n+    }\n+    else {\n+        pi.playerMessage(5, \"The storage is currently inaccessible, as the powers of the Pixies remains active within the tower.\");\n+        return false;\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "69d22c354d4d81bac43f5b57afc084f7e69df7c9", "filename": "scripts/portal/party3_jailin.js", "status": "added", "additions": 46, "deletions": 0, "changes": 46, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/portal/party3_jailin.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/portal/party3_jailin.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/party3_jailin.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,46 @@\n+importPackage(Packages.tools);\n+\n+function enter(pi) {\n+        var map = pi.getMap();\n+    \n+        var jailn = (pi.getMap().getId() / 10) % 10;\n+        var maxToggles = (jailn == 1) ? 7 : 6;\n+        \n+        var mapProp = pi.getEventInstance().getProperty(\"jail\" + jailn);\n+        \n+        if(mapProp == null) {\n+            var seq = 0;\n+            \n+            for(var i = 1; i <= maxToggles; i++) {\n+                if(Math.random() < 0.5) seq += (1 << i);\n+            }\n+            \n+            pi.getEventInstance().setProperty(\"jail\" + jailn, seq);\n+            mapProp = seq;\n+        }\n+        \n+        mapProp = Number(mapProp);\n+        if(mapProp != 0) {\n+            var countMiss = 0;\n+            for(var i = 1; i <= maxToggles; i++) {\n+                if(!(pi.getMap().getReactorByName(\"lever\" + i).getState() == (mapProp >> i) % 2)) {\n+                    countMiss++;\n+                }\n+            }\n+            \n+            if(countMiss > 0) {\n+                map.broadcastMessage(MaplePacketCreator.showEffect(\"quest/party/wrong_kor\"));\n+                map.broadcastMessage(MaplePacketCreator.playSound(\"Party1/Failed\"));\n+                \n+                pi.playerMessage(5, \"The right combination of levers is needed to pass. \" + countMiss + \" lever(s) are misplaced.\");\n+                return false;\n+            }\n+            \n+            map.broadcastMessage(MaplePacketCreator.showEffect(\"quest/party/clear\"));\n+            map.broadcastMessage(MaplePacketCreator.playSound(\"Party1/Clear\"));\n+            pi.getEventInstance().setProperty(\"jail\" + jailn, \"0\");\n+        }\n+        \n+        pi.warp(pi.getMapId() + 2,0);\n+        return true;\n+}\n\\ No newline at end of file"}, {"sha": "4b98206d2777466713b83ef00e5248a94e469eb0", "filename": "scripts/portal/party3_r4pt.js", "status": "modified", "additions": 29, "deletions": 6, "changes": 35, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/portal/party3_r4pt.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/portal/party3_r4pt.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/party3_r4pt.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -3,28 +3,51 @@\n     Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n \t\t       Matthias Butz <matze@odinms.de>\n \t\t       Jan Christian Meyer <vimes@odinms.de>\n-\n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as\n     published by the Free Software Foundation version 3 as published by\n     the Free Software Foundation. You may not use, modify or distribute\n     this program under any other version of the GNU Affero General Public\n     License.\n-\n     This program is distributed in the hope that it will be useful,\n     but WITHOUT ANY WARRANTY; without even the implied warranty of\n     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n     GNU Affero General Public License for more details.\n-\n     You should have received a copy of the GNU Affero General Public License\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n /**\n- *@author Jvlaple\n+ *@author Ronan\n  *party3_r4pt\n  */\n \n function enter(pi) {\n-    pi.warp(920010600, Math.random() * 3 > 1 ? 14 : 2);\n-    return true;\n+    var eim = pi.getEventInstance();\n+    if(eim.getProperty(\"stage4_comb\") == null) {\n+        var r = Math.floor((Math.random() * 3)) + 1;\n+        var s = Math.floor((Math.random() * 3)) + 1;\n+        \n+        eim.setProperty(\"stage4_comb\", \"\" + r + s);\n+    }\n+\n+    var pname = Number(pi.getPortal().getName().substring(4, 6));\n+    var cname = Number(eim.getProperty(\"stage4_comb\"));\n+    \n+    var secondPt = true;\n+    if(pi.getPortal().getId() < 14) {\n+        cname = Math.floor(cname / 10);\n+        secondPt = false;\n+    }\n+    \n+    if ((pname % 10) == (cname % 10)) {    //climb\n+        var nextPortal;\n+        if(secondPt) nextPortal = 1;\n+        else nextPortal = pi.getPortal().getId() + 3;\n+            \n+        pi.warp(pi.getMapId(), nextPortal);\n+    } else {    //fail\n+        pi.warp(pi.getMapId(), 2);\n+    }\n+    \n+    return false;\n }\n\\ No newline at end of file"}, {"sha": "2647b8ed392f5293d87365ba24b569af748d1e77", "filename": "scripts/portal/party3_r6pt.js", "status": "added", "additions": 54, "deletions": 0, "changes": 54, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/portal/party3_r6pt.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/portal/party3_r6pt.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/party3_r6pt.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,54 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/**\n+ *@author Ronan\n+ *party3_r4pt\n+ */\n+\n+function enter(pi) {\n+    var eim = pi.getEventInstance();\n+    if(eim.getProperty(\"stage6_comb\") == null) {\n+        var comb = \"0\";\n+\n+        for(var i = 0; i < 16; i++) {\n+            var r = Math.floor((Math.random() * 4)) + 1;\n+            comb += r.toString();\n+        }\n+\n+        eim.setProperty(\"stage6_comb\", comb);\n+    }\n+\n+    var comb = eim.getProperty(\"stage6_comb\");\n+    \n+    var name = pi.getPortal().getName().substring(2, 5);\n+    var portalId = parseInt(name, 10);\n+    \n+    \n+    var pRow = Math.floor(portalId / 10);\n+    var pCol = portalId % 10;\n+    \n+\n+    if (pCol == parseInt(comb.substring(pRow, pRow + 1), 10)) {    //climb\n+        pi.warp(pi.getMapId(), (pRow % 4 != 0) ? pi.getPortal().getId() + 4 : (pRow / 4));\n+    } else {    //fail\n+        pi.warp(pi.getMapId(), 5);\n+    }\n+    \n+    return false;\n+}\n\\ No newline at end of file"}, {"sha": "c8270682ee70a8dd3fe5a63183108cdb345e6a16", "filename": "scripts/portal/party3_room1.js", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/portal/party3_room1.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/portal/party3_room1.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/party3_room1.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,4 @@\n+function enter(pi) {\n+        pi.warp(920010200, 13);\n+        return true;\n+}\n\\ No newline at end of file"}, {"sha": "4ca237e0bf6223063f8397a96f89fda1b70220a7", "filename": "scripts/portal/party3_room2.js", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/portal/party3_room2.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/portal/party3_room2.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/party3_room2.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,4 @@\n+function enter(pi) {\n+        pi.warp(920010300, 1);\n+        return true;\n+}\n\\ No newline at end of file"}, {"sha": "cc5733f6a48e644f931bf0f9725a01ffa80479a3", "filename": "scripts/portal/party3_room3.js", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/portal/party3_room3.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/portal/party3_room3.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/party3_room3.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,4 @@\n+function enter(pi) {\n+        pi.warp(920010400, 8);\n+        return true;\n+}\n\\ No newline at end of file"}, {"sha": "7f6c977a6a8aac7a8b67e0874b77b1f3391b0d17", "filename": "scripts/portal/party3_room4.js", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/portal/party3_room4.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/portal/party3_room4.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/party3_room4.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,4 @@\n+function enter(pi) {\n+        pi.warp(920010500, 3);\n+        return true;\n+}\n\\ No newline at end of file"}, {"sha": "4897ea97821d263b4faf61a51d693c5bb64d3019", "filename": "scripts/portal/party3_room5.js", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/portal/party3_room5.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/portal/party3_room5.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/party3_room5.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,4 @@\n+function enter(pi) {\n+        pi.warp(920010600, 17);\n+        return true;\n+}\n\\ No newline at end of file"}, {"sha": "1d81c5328b9de9fba181ac1b1d53755e002d64c1", "filename": "scripts/portal/party3_room6.js", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/portal/party3_room6.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/portal/party3_room6.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/party3_room6.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,4 @@\n+function enter(pi) {\n+        pi.warp(920010700, 23);\n+        return true;\n+}\n\\ No newline at end of file"}, {"sha": "d8e7eda6d972649ce5f24e976d946b894b68fc58", "filename": "scripts/portal/party3_room8.js", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/portal/party3_room8.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/portal/party3_room8.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/party3_room8.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,10 @@\n+function enter(pi) {\n+    if(pi.getEventInstance().getIntProperty(\"statusStg8\") == 1) {\n+        pi.warp(920011000,0);\n+        return true;\n+    }\n+    else {\n+        pi.playerMessage(5, \"The storage is currently inaccessible, as the powers of the Pixies remains active within the tower.\");\n+        return false;\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "bbbc941cbdceea22f18ef70d1d6248dd326b3ac6", "filename": "scripts/portal/party3_roomout.js", "status": "added", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/portal/party3_roomout.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/portal/party3_roomout.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/party3_roomout.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,36 @@\n+function enter(pi) {\n+        var exitPortal = 0;\n+        \n+        switch(pi.getMapId()) {\n+            case 920010200:\n+                exitPortal = 4;\n+                break;\n+\n+            case 920010300:\n+                exitPortal = 12;\n+                break;\n+\n+            case 920010400:\n+                exitPortal = 5;\n+                break;\n+\n+            case 920010500:\n+                exitPortal = 13;\n+                break;\n+\n+            case 920010600:\n+                exitPortal = 15;\n+                break;\n+\n+            case 920010700:\n+                exitPortal = 14;\n+                break;\n+                \n+            case 920011000:\n+                exitPortal = 16;\n+                break;\n+        }\n+\n+        pi.warp(920010100, exitPortal);\n+        return true;\n+}\n\\ No newline at end of file"}, {"sha": "c06753da3bf1b1f703528bebcd9a62e1bd0821da", "filename": "scripts/reactor/200.js", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/200.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/200.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/200.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,3 @@\n+function act() {\n+\trm.dropItems();\n+}\n\\ No newline at end of file"}, {"sha": "fa582deb93dd75d8616202f1491a1239b07ef2a6", "filename": "scripts/reactor/2001000.js", "status": "modified", "additions": 15, "deletions": 3, "changes": 18, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2001000.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -19,10 +19,22 @@\n     You should have received a copy of the GNU Affero General Public License\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n-/*@author Jvlaple\n- *Nependath Pot - Spawns Nependath or Dark Nependath\n+/*@author Ronan\n+ *Nependeath Pot - Spawns Nependeath or Dark Nependeath\n  */\n  \n function act() {\n-    rm.spawnMonster(Math.random() > .6 ? 9300049 : 9300048);\n+    if(rm.getMap().getSummonState()) {\n+        var count = Number(rm.getEventInstance().getIntProperty(\"statusStg7_c\"));\n+\n+        if(count < 7) {\n+            var nextCount = (count + 1);\n+\n+            rm.spawnMonster(Math.random() >= .6 ? 9300049 : 9300048);\n+            rm.getEventInstance().setProperty(\"statusStg7_c\", nextCount);\n+        }\n+        else {\n+            rm.spawnMonster(9300049);\n+        }\n+    }\n }\n\\ No newline at end of file"}, {"sha": "fa582deb93dd75d8616202f1491a1239b07ef2a6", "filename": "scripts/reactor/2001001.js", "status": "added", "additions": 40, "deletions": 0, "changes": 40, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2001001.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,40 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/*@author Ronan\n+ *Nependeath Pot - Spawns Nependeath or Dark Nependeath\n+ */\n+ \n+function act() {\n+    if(rm.getMap().getSummonState()) {\n+        var count = Number(rm.getEventInstance().getIntProperty(\"statusStg7_c\"));\n+\n+        if(count < 7) {\n+            var nextCount = (count + 1);\n+\n+            rm.spawnMonster(Math.random() >= .6 ? 9300049 : 9300048);\n+            rm.getEventInstance().setProperty(\"statusStg7_c\", nextCount);\n+        }\n+        else {\n+            rm.spawnMonster(9300049);\n+        }\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "a9528cf884ee1e2f0cccec187ceca8de4fc0b22b", "filename": "scripts/reactor/2001002.js", "status": "added", "additions": 55, "deletions": 0, "changes": 55, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001002.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001002.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2001002.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,55 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/* @Author Ronan\n+ * \n+ * 2001002.js: Either spawns a PQ mob or drops the Statue piece.\n+*/\n+\n+function act() {\n+    if(rm.getEventInstance().getIntProperty(\"statusStg2\") == -1) {\n+        var rnd = Math.max(Math.floor(Math.random() * 14), 4);\n+        \n+        rm.getEventInstance().setProperty(\"statusStg2\", \"\" + rnd);\n+        rm.getEventInstance().setProperty(\"statusStg2_c\", \"0\");\n+    }\n+    \n+    var limit = rm.getEventInstance().getIntProperty(\"statusStg2\");\n+    var count = rm.getEventInstance().getIntProperty(\"statusStg2_c\");\n+    if(count >= limit) {\n+        rm.dropItems();\n+        \n+        var eim = rm.getEventInstance();\n+        eim.giveEventPlayersExp(3500);\n+        \n+        eim.setProperty(\"statusStg2\", \"1\");\n+        eim.showClearEffect(true);\n+    }\n+    else {\n+        count++;\n+        rm.getEventInstance().setProperty(\"statusStg2_c\", count);\n+        \n+        var nextHashed = (11 * (count)) % 14;\n+        \n+        var nextPos = rm.getMap().getReactorById(2001002 + nextHashed).getPosition();\n+        rm.spawnMonster(9300040, 1, nextPos);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "d213aa75134a2b48d6ea76a3a17871e11dc97464", "filename": "scripts/reactor/2001003.js", "status": "added", "additions": 55, "deletions": 0, "changes": 55, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001003.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001003.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2001003.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,55 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/* @Author Ronan\n+ * \n+ * 2001002.js: Either spawns a PQ mob or drops the Statue piece.\n+*/\n+\n+function act() {\n+    if(rm.getEventInstance().getIntProperty(\"statusStg2\") == -1) {\n+        var rnd = Math.floor(Math.random() * 14);\n+        \n+        rm.getEventInstance().setProperty(\"statusStg2\", \"\" + rnd);\n+        rm.getEventInstance().setProperty(\"statusStg2_c\", \"0\");\n+    }\n+    \n+    var limit = rm.getEventInstance().getIntProperty(\"statusStg2\");\n+    var count = rm.getEventInstance().getIntProperty(\"statusStg2_c\");\n+    if(count >= limit) {\n+        rm.dropItems();\n+        \n+        var eim = rm.getEventInstance();\n+        eim.giveEventPlayersExp(3500);\n+        \n+        eim.setProperty(\"statusStg2\", \"1\");\n+        eim.showClearEffect(true);\n+    }\n+    else {\n+        count++;\n+        rm.getEventInstance().setProperty(\"statusStg2_c\", count);\n+        \n+        var nextHashed = (11 * (count)) % 14;\n+        \n+        var nextPos = rm.getMap().getReactorById(2001002 + nextHashed).getPosition();\n+        rm.spawnMonster(9300040, 1, nextPos);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "d213aa75134a2b48d6ea76a3a17871e11dc97464", "filename": "scripts/reactor/2001004.js", "status": "added", "additions": 55, "deletions": 0, "changes": 55, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001004.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001004.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2001004.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,55 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/* @Author Ronan\n+ * \n+ * 2001002.js: Either spawns a PQ mob or drops the Statue piece.\n+*/\n+\n+function act() {\n+    if(rm.getEventInstance().getIntProperty(\"statusStg2\") == -1) {\n+        var rnd = Math.floor(Math.random() * 14);\n+        \n+        rm.getEventInstance().setProperty(\"statusStg2\", \"\" + rnd);\n+        rm.getEventInstance().setProperty(\"statusStg2_c\", \"0\");\n+    }\n+    \n+    var limit = rm.getEventInstance().getIntProperty(\"statusStg2\");\n+    var count = rm.getEventInstance().getIntProperty(\"statusStg2_c\");\n+    if(count >= limit) {\n+        rm.dropItems();\n+        \n+        var eim = rm.getEventInstance();\n+        eim.giveEventPlayersExp(3500);\n+        \n+        eim.setProperty(\"statusStg2\", \"1\");\n+        eim.showClearEffect(true);\n+    }\n+    else {\n+        count++;\n+        rm.getEventInstance().setProperty(\"statusStg2_c\", count);\n+        \n+        var nextHashed = (11 * (count)) % 14;\n+        \n+        var nextPos = rm.getMap().getReactorById(2001002 + nextHashed).getPosition();\n+        rm.spawnMonster(9300040, 1, nextPos);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "d213aa75134a2b48d6ea76a3a17871e11dc97464", "filename": "scripts/reactor/2001005.js", "status": "added", "additions": 55, "deletions": 0, "changes": 55, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001005.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001005.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2001005.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,55 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/* @Author Ronan\n+ * \n+ * 2001002.js: Either spawns a PQ mob or drops the Statue piece.\n+*/\n+\n+function act() {\n+    if(rm.getEventInstance().getIntProperty(\"statusStg2\") == -1) {\n+        var rnd = Math.floor(Math.random() * 14);\n+        \n+        rm.getEventInstance().setProperty(\"statusStg2\", \"\" + rnd);\n+        rm.getEventInstance().setProperty(\"statusStg2_c\", \"0\");\n+    }\n+    \n+    var limit = rm.getEventInstance().getIntProperty(\"statusStg2\");\n+    var count = rm.getEventInstance().getIntProperty(\"statusStg2_c\");\n+    if(count >= limit) {\n+        rm.dropItems();\n+        \n+        var eim = rm.getEventInstance();\n+        eim.giveEventPlayersExp(3500);\n+        \n+        eim.setProperty(\"statusStg2\", \"1\");\n+        eim.showClearEffect(true);\n+    }\n+    else {\n+        count++;\n+        rm.getEventInstance().setProperty(\"statusStg2_c\", count);\n+        \n+        var nextHashed = (11 * (count)) % 14;\n+        \n+        var nextPos = rm.getMap().getReactorById(2001002 + nextHashed).getPosition();\n+        rm.spawnMonster(9300040, 1, nextPos);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "d213aa75134a2b48d6ea76a3a17871e11dc97464", "filename": "scripts/reactor/2001006.js", "status": "added", "additions": 55, "deletions": 0, "changes": 55, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001006.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001006.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2001006.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,55 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/* @Author Ronan\n+ * \n+ * 2001002.js: Either spawns a PQ mob or drops the Statue piece.\n+*/\n+\n+function act() {\n+    if(rm.getEventInstance().getIntProperty(\"statusStg2\") == -1) {\n+        var rnd = Math.floor(Math.random() * 14);\n+        \n+        rm.getEventInstance().setProperty(\"statusStg2\", \"\" + rnd);\n+        rm.getEventInstance().setProperty(\"statusStg2_c\", \"0\");\n+    }\n+    \n+    var limit = rm.getEventInstance().getIntProperty(\"statusStg2\");\n+    var count = rm.getEventInstance().getIntProperty(\"statusStg2_c\");\n+    if(count >= limit) {\n+        rm.dropItems();\n+        \n+        var eim = rm.getEventInstance();\n+        eim.giveEventPlayersExp(3500);\n+        \n+        eim.setProperty(\"statusStg2\", \"1\");\n+        eim.showClearEffect(true);\n+    }\n+    else {\n+        count++;\n+        rm.getEventInstance().setProperty(\"statusStg2_c\", count);\n+        \n+        var nextHashed = (11 * (count)) % 14;\n+        \n+        var nextPos = rm.getMap().getReactorById(2001002 + nextHashed).getPosition();\n+        rm.spawnMonster(9300040, 1, nextPos);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "d213aa75134a2b48d6ea76a3a17871e11dc97464", "filename": "scripts/reactor/2001007.js", "status": "added", "additions": 55, "deletions": 0, "changes": 55, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001007.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001007.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2001007.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,55 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/* @Author Ronan\n+ * \n+ * 2001002.js: Either spawns a PQ mob or drops the Statue piece.\n+*/\n+\n+function act() {\n+    if(rm.getEventInstance().getIntProperty(\"statusStg2\") == -1) {\n+        var rnd = Math.floor(Math.random() * 14);\n+        \n+        rm.getEventInstance().setProperty(\"statusStg2\", \"\" + rnd);\n+        rm.getEventInstance().setProperty(\"statusStg2_c\", \"0\");\n+    }\n+    \n+    var limit = rm.getEventInstance().getIntProperty(\"statusStg2\");\n+    var count = rm.getEventInstance().getIntProperty(\"statusStg2_c\");\n+    if(count >= limit) {\n+        rm.dropItems();\n+        \n+        var eim = rm.getEventInstance();\n+        eim.giveEventPlayersExp(3500);\n+        \n+        eim.setProperty(\"statusStg2\", \"1\");\n+        eim.showClearEffect(true);\n+    }\n+    else {\n+        count++;\n+        rm.getEventInstance().setProperty(\"statusStg2_c\", count);\n+        \n+        var nextHashed = (11 * (count)) % 14;\n+        \n+        var nextPos = rm.getMap().getReactorById(2001002 + nextHashed).getPosition();\n+        rm.spawnMonster(9300040, 1, nextPos);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "d213aa75134a2b48d6ea76a3a17871e11dc97464", "filename": "scripts/reactor/2001008.js", "status": "added", "additions": 55, "deletions": 0, "changes": 55, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001008.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001008.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2001008.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,55 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/* @Author Ronan\n+ * \n+ * 2001002.js: Either spawns a PQ mob or drops the Statue piece.\n+*/\n+\n+function act() {\n+    if(rm.getEventInstance().getIntProperty(\"statusStg2\") == -1) {\n+        var rnd = Math.floor(Math.random() * 14);\n+        \n+        rm.getEventInstance().setProperty(\"statusStg2\", \"\" + rnd);\n+        rm.getEventInstance().setProperty(\"statusStg2_c\", \"0\");\n+    }\n+    \n+    var limit = rm.getEventInstance().getIntProperty(\"statusStg2\");\n+    var count = rm.getEventInstance().getIntProperty(\"statusStg2_c\");\n+    if(count >= limit) {\n+        rm.dropItems();\n+        \n+        var eim = rm.getEventInstance();\n+        eim.giveEventPlayersExp(3500);\n+        \n+        eim.setProperty(\"statusStg2\", \"1\");\n+        eim.showClearEffect(true);\n+    }\n+    else {\n+        count++;\n+        rm.getEventInstance().setProperty(\"statusStg2_c\", count);\n+        \n+        var nextHashed = (11 * (count)) % 14;\n+        \n+        var nextPos = rm.getMap().getReactorById(2001002 + nextHashed).getPosition();\n+        rm.spawnMonster(9300040, 1, nextPos);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "d213aa75134a2b48d6ea76a3a17871e11dc97464", "filename": "scripts/reactor/2001009.js", "status": "added", "additions": 55, "deletions": 0, "changes": 55, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001009.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001009.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2001009.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,55 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/* @Author Ronan\n+ * \n+ * 2001002.js: Either spawns a PQ mob or drops the Statue piece.\n+*/\n+\n+function act() {\n+    if(rm.getEventInstance().getIntProperty(\"statusStg2\") == -1) {\n+        var rnd = Math.floor(Math.random() * 14);\n+        \n+        rm.getEventInstance().setProperty(\"statusStg2\", \"\" + rnd);\n+        rm.getEventInstance().setProperty(\"statusStg2_c\", \"0\");\n+    }\n+    \n+    var limit = rm.getEventInstance().getIntProperty(\"statusStg2\");\n+    var count = rm.getEventInstance().getIntProperty(\"statusStg2_c\");\n+    if(count >= limit) {\n+        rm.dropItems();\n+        \n+        var eim = rm.getEventInstance();\n+        eim.giveEventPlayersExp(3500);\n+        \n+        eim.setProperty(\"statusStg2\", \"1\");\n+        eim.showClearEffect(true);\n+    }\n+    else {\n+        count++;\n+        rm.getEventInstance().setProperty(\"statusStg2_c\", count);\n+        \n+        var nextHashed = (11 * (count)) % 14;\n+        \n+        var nextPos = rm.getMap().getReactorById(2001002 + nextHashed).getPosition();\n+        rm.spawnMonster(9300040, 1, nextPos);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "d213aa75134a2b48d6ea76a3a17871e11dc97464", "filename": "scripts/reactor/2001010.js", "status": "added", "additions": 55, "deletions": 0, "changes": 55, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001010.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001010.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2001010.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,55 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/* @Author Ronan\n+ * \n+ * 2001002.js: Either spawns a PQ mob or drops the Statue piece.\n+*/\n+\n+function act() {\n+    if(rm.getEventInstance().getIntProperty(\"statusStg2\") == -1) {\n+        var rnd = Math.floor(Math.random() * 14);\n+        \n+        rm.getEventInstance().setProperty(\"statusStg2\", \"\" + rnd);\n+        rm.getEventInstance().setProperty(\"statusStg2_c\", \"0\");\n+    }\n+    \n+    var limit = rm.getEventInstance().getIntProperty(\"statusStg2\");\n+    var count = rm.getEventInstance().getIntProperty(\"statusStg2_c\");\n+    if(count >= limit) {\n+        rm.dropItems();\n+        \n+        var eim = rm.getEventInstance();\n+        eim.giveEventPlayersExp(3500);\n+        \n+        eim.setProperty(\"statusStg2\", \"1\");\n+        eim.showClearEffect(true);\n+    }\n+    else {\n+        count++;\n+        rm.getEventInstance().setProperty(\"statusStg2_c\", count);\n+        \n+        var nextHashed = (11 * (count)) % 14;\n+        \n+        var nextPos = rm.getMap().getReactorById(2001002 + nextHashed).getPosition();\n+        rm.spawnMonster(9300040, 1, nextPos);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "d213aa75134a2b48d6ea76a3a17871e11dc97464", "filename": "scripts/reactor/2001011.js", "status": "added", "additions": 55, "deletions": 0, "changes": 55, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001011.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001011.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2001011.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,55 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/* @Author Ronan\n+ * \n+ * 2001002.js: Either spawns a PQ mob or drops the Statue piece.\n+*/\n+\n+function act() {\n+    if(rm.getEventInstance().getIntProperty(\"statusStg2\") == -1) {\n+        var rnd = Math.floor(Math.random() * 14);\n+        \n+        rm.getEventInstance().setProperty(\"statusStg2\", \"\" + rnd);\n+        rm.getEventInstance().setProperty(\"statusStg2_c\", \"0\");\n+    }\n+    \n+    var limit = rm.getEventInstance().getIntProperty(\"statusStg2\");\n+    var count = rm.getEventInstance().getIntProperty(\"statusStg2_c\");\n+    if(count >= limit) {\n+        rm.dropItems();\n+        \n+        var eim = rm.getEventInstance();\n+        eim.giveEventPlayersExp(3500);\n+        \n+        eim.setProperty(\"statusStg2\", \"1\");\n+        eim.showClearEffect(true);\n+    }\n+    else {\n+        count++;\n+        rm.getEventInstance().setProperty(\"statusStg2_c\", count);\n+        \n+        var nextHashed = (11 * (count)) % 14;\n+        \n+        var nextPos = rm.getMap().getReactorById(2001002 + nextHashed).getPosition();\n+        rm.spawnMonster(9300040, 1, nextPos);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "d213aa75134a2b48d6ea76a3a17871e11dc97464", "filename": "scripts/reactor/2001012.js", "status": "added", "additions": 55, "deletions": 0, "changes": 55, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001012.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001012.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2001012.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,55 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/* @Author Ronan\n+ * \n+ * 2001002.js: Either spawns a PQ mob or drops the Statue piece.\n+*/\n+\n+function act() {\n+    if(rm.getEventInstance().getIntProperty(\"statusStg2\") == -1) {\n+        var rnd = Math.floor(Math.random() * 14);\n+        \n+        rm.getEventInstance().setProperty(\"statusStg2\", \"\" + rnd);\n+        rm.getEventInstance().setProperty(\"statusStg2_c\", \"0\");\n+    }\n+    \n+    var limit = rm.getEventInstance().getIntProperty(\"statusStg2\");\n+    var count = rm.getEventInstance().getIntProperty(\"statusStg2_c\");\n+    if(count >= limit) {\n+        rm.dropItems();\n+        \n+        var eim = rm.getEventInstance();\n+        eim.giveEventPlayersExp(3500);\n+        \n+        eim.setProperty(\"statusStg2\", \"1\");\n+        eim.showClearEffect(true);\n+    }\n+    else {\n+        count++;\n+        rm.getEventInstance().setProperty(\"statusStg2_c\", count);\n+        \n+        var nextHashed = (11 * (count)) % 14;\n+        \n+        var nextPos = rm.getMap().getReactorById(2001002 + nextHashed).getPosition();\n+        rm.spawnMonster(9300040, 1, nextPos);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "d213aa75134a2b48d6ea76a3a17871e11dc97464", "filename": "scripts/reactor/2001013.js", "status": "added", "additions": 55, "deletions": 0, "changes": 55, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001013.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001013.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2001013.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,55 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/* @Author Ronan\n+ * \n+ * 2001002.js: Either spawns a PQ mob or drops the Statue piece.\n+*/\n+\n+function act() {\n+    if(rm.getEventInstance().getIntProperty(\"statusStg2\") == -1) {\n+        var rnd = Math.floor(Math.random() * 14);\n+        \n+        rm.getEventInstance().setProperty(\"statusStg2\", \"\" + rnd);\n+        rm.getEventInstance().setProperty(\"statusStg2_c\", \"0\");\n+    }\n+    \n+    var limit = rm.getEventInstance().getIntProperty(\"statusStg2\");\n+    var count = rm.getEventInstance().getIntProperty(\"statusStg2_c\");\n+    if(count >= limit) {\n+        rm.dropItems();\n+        \n+        var eim = rm.getEventInstance();\n+        eim.giveEventPlayersExp(3500);\n+        \n+        eim.setProperty(\"statusStg2\", \"1\");\n+        eim.showClearEffect(true);\n+    }\n+    else {\n+        count++;\n+        rm.getEventInstance().setProperty(\"statusStg2_c\", count);\n+        \n+        var nextHashed = (11 * (count)) % 14;\n+        \n+        var nextPos = rm.getMap().getReactorById(2001002 + nextHashed).getPosition();\n+        rm.spawnMonster(9300040, 1, nextPos);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "d213aa75134a2b48d6ea76a3a17871e11dc97464", "filename": "scripts/reactor/2001014.js", "status": "added", "additions": 55, "deletions": 0, "changes": 55, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001014.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001014.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2001014.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,55 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/* @Author Ronan\n+ * \n+ * 2001002.js: Either spawns a PQ mob or drops the Statue piece.\n+*/\n+\n+function act() {\n+    if(rm.getEventInstance().getIntProperty(\"statusStg2\") == -1) {\n+        var rnd = Math.floor(Math.random() * 14);\n+        \n+        rm.getEventInstance().setProperty(\"statusStg2\", \"\" + rnd);\n+        rm.getEventInstance().setProperty(\"statusStg2_c\", \"0\");\n+    }\n+    \n+    var limit = rm.getEventInstance().getIntProperty(\"statusStg2\");\n+    var count = rm.getEventInstance().getIntProperty(\"statusStg2_c\");\n+    if(count >= limit) {\n+        rm.dropItems();\n+        \n+        var eim = rm.getEventInstance();\n+        eim.giveEventPlayersExp(3500);\n+        \n+        eim.setProperty(\"statusStg2\", \"1\");\n+        eim.showClearEffect(true);\n+    }\n+    else {\n+        count++;\n+        rm.getEventInstance().setProperty(\"statusStg2_c\", count);\n+        \n+        var nextHashed = (11 * (count)) % 14;\n+        \n+        var nextPos = rm.getMap().getReactorById(2001002 + nextHashed).getPosition();\n+        rm.spawnMonster(9300040, 1, nextPos);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "d213aa75134a2b48d6ea76a3a17871e11dc97464", "filename": "scripts/reactor/2001015.js", "status": "added", "additions": 55, "deletions": 0, "changes": 55, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001015.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001015.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2001015.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,55 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/* @Author Ronan\n+ * \n+ * 2001002.js: Either spawns a PQ mob or drops the Statue piece.\n+*/\n+\n+function act() {\n+    if(rm.getEventInstance().getIntProperty(\"statusStg2\") == -1) {\n+        var rnd = Math.floor(Math.random() * 14);\n+        \n+        rm.getEventInstance().setProperty(\"statusStg2\", \"\" + rnd);\n+        rm.getEventInstance().setProperty(\"statusStg2_c\", \"0\");\n+    }\n+    \n+    var limit = rm.getEventInstance().getIntProperty(\"statusStg2\");\n+    var count = rm.getEventInstance().getIntProperty(\"statusStg2_c\");\n+    if(count >= limit) {\n+        rm.dropItems();\n+        \n+        var eim = rm.getEventInstance();\n+        eim.giveEventPlayersExp(3500);\n+        \n+        eim.setProperty(\"statusStg2\", \"1\");\n+        eim.showClearEffect(true);\n+    }\n+    else {\n+        count++;\n+        rm.getEventInstance().setProperty(\"statusStg2_c\", count);\n+        \n+        var nextHashed = (11 * (count)) % 14;\n+        \n+        var nextPos = rm.getMap().getReactorById(2001002 + nextHashed).getPosition();\n+        rm.spawnMonster(9300040, 1, nextPos);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "feb254b9d635c6c2eb97e6029c267ccaebd69f55", "filename": "scripts/reactor/2001016.js", "status": "added", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001016.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2001016.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2001016.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,31 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/*@author Ronan\n+ *Nependeath Pot - Spawns Papa Pixie\n+ */\n+ \n+function act() {\n+    rm.getMap().killAllMonstersNotFriendly();\n+    rm.getMap().allowSummonState(false);\n+    rm.spawnMonster(9300039, 260, 490);\n+    rm.mapMessage(5, \"As the air on the tower outskirts starts to become more dense, Papa Pixie appears.\");\n+}\n\\ No newline at end of file"}, {"sha": "3d23911aac052ea613d78d90e8e2d176bc3095f1", "filename": "scripts/reactor/2002003.js", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2002003.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2002003.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2002003.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -25,4 +25,9 @@\n  \n function act() {\n \trm.dropItems();\n+        \n+        var eim = rm.getEventInstance();\n+        eim.giveEventPlayersExp(3500);\n+        eim.setProperty(\"statusStg7\", \"1\");\n+        eim.showClearEffect(true);\n }\n\\ No newline at end of file"}, {"sha": "fb841259af22df0d3ac62fa882cb2becb740fe2a", "filename": "scripts/reactor/2002013.js", "status": "added", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2002013.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2002013.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2002013.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,29 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/* @Author Ronan\n+ * \n+ * 2002013.js: Drops the Statue piece.\n+*/\n+\n+function act() {\n+    rm.dropItems();\n+}\n\\ No newline at end of file"}, {"sha": "7a0da6b7de1ad3cfe7d2d259014ce66d2c758aee", "filename": "scripts/reactor/2002014.js", "status": "modified", "additions": 9, "deletions": 8, "changes": 17, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2002014.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2002014.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2002014.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -19,16 +19,17 @@\n     You should have received a copy of the GNU Affero General Public License\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n-/*@author Jvlaple\n- *Reactor : Orbis PQ Bonus Reactor - 2002014.js\n+/*@author Ronan\n+ *Reactor : OrbisPQ Bonus Reactor - 2002014.js\n  * Drops all the Bonus Items\n  */\n  \n function act() {\n-\trand = Math.floor(Math.random() * 4);\n-\tif (rand < 1) rand = 1;\n-\t//We'll make it drop a lot of crap :D\n-\tfor (var i = 0; i<rand; i++) {\n-\t\trm.dropItems(true, 1, 30, 60, 15);\n-\t}\n+        rm.dropItems(true, 1, 100, 400, 15);\n+    \n+        var eim = rm.getEventInstance();\n+        if(eim.getProperty(\"statusStgBonus\") != \"1\") {\n+            rm.spawnNpc(2013002, new java.awt.Point(46, 840));\n+            eim.setProperty(\"statusStgBonus\", \"1\");\n+        }\n }\n\\ No newline at end of file"}, {"sha": "d26c2eb577d65ff96f86c54102186f7268bd66bd", "filename": "scripts/reactor/2002017.js", "status": "added", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2002017.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2002017.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2002017.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,29 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/*@author Ronan\n+ *Reactor : OrbisPQ Bonus Reactor - 2202004.js\n+ * Drops all the Bonus Items\n+ */\n+ \n+function act() {\n+        rm.dropItems(true, 1, 100, 400, 15);\n+}\n\\ No newline at end of file"}, {"sha": "e572925ff0c532a3978ddf78c5d97baa3890020f", "filename": "scripts/reactor/2006001.js", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2006001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2006001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2006001.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -20,10 +20,14 @@\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n /**\n- *2006001.js - Spawns Minevra\n+ *2006001.js - Spawns Minerva\n  *@author Jvlaple\n  */\n  \n function act() {\n     rm.spawnNpc(2013002);\n+    \n+    rm.getEventInstance().clearPQ();\n+    rm.getEventInstance().setProperty(\"statusStg8\", \"1\");\n+    rm.getEventInstance().startEventTimer(10 * 60000); //bonus time\n }\n\\ No newline at end of file"}, {"sha": "818969475a40ad82ef2f03c3b4ea189dc1d56ce4", "filename": "scripts/reactor/2008006.js", "status": "added", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2008006.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/scripts/reactor/2008006.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2008006.js?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -0,0 +1,29 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/*@author Ronan\n+ *Reactor : Orbis PQ LP Player - 2008006.js\n+ * Makes Chamberlain Eak spawn box.\n+ */\n+ \n+function act() {\n+\trm.getEventInstance().setProperty(\"statusStg3\", \"0\");\n+}\n\\ No newline at end of file"}, {"sha": "c843f2e88e346a043f52920c8d6985aa2bbce607", "filename": "sql/db_drops.sql", "status": "modified", "additions": 96, "deletions": 2, "changes": 98, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/sql/db_drops.sql", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/sql/db_drops.sql", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/sql/db_drops.sql?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -19026,7 +19026,16 @@\n (5110300, 2383016, 1, 1, 0, 8000),\n (5110301, 2383028, 1, 1, 0, 8000),\n (8143000, 2386010, 1, 1, 0, 8000),\n-(2220000, 2388000, 1, 1, 0, 8000);\n+(2220000, 2388000, 1, 1, 0, 8000),\n+(9300045, 4001050, 1, 1, 0, 999999),\n+(9300046, 4001050, 1, 1, 0, 999999),\n+(9300047, 4001050, 1, 1, 0, 999999),\n+(9300041, 4001052, 1, 1, 0, 999999),\n+(9300042, 4001052, 1, 1, 0, 999999),\n+(9300043, 4001052, 1, 1, 0, 999999),\n+(9300040, 4001074, 1, 1, 0, 999999),\n+(9300048, 4001053, 1, 1, 0, 999999),\n+(9300049, 4001074, 1, 1, 0, 999999);\n \n # (dropperid, itemid, minqty, maxqty, questid, chance)\n \n@@ -19209,7 +19218,92 @@\n     (9102004, 4001097, 3, -1),\n     (9102005, 4001098, 3, -1),\n     (9102006, 4001099, 3, -1),\n-    (9102007, 4001100, 3, -1);\n+    (9102007, 4001100, 3, -1),\n+    (2002017, 1302012, 25, -1),\n+    (2002017, 1402015, 25, -1),\n+    (2002017, 1312010, 25, -1),\n+    (2002017, 1412032, 25, -1),\n+    (2002017, 1322028, 25, -1),\n+    (2002017, 1422010, 25, -1),\n+    (2002017, 1452011, 25, -1),\n+    (2002017, 1462009, 25, -1),\n+    (2002017, 1472028, 25, -1),\n+    (2002017, 1332018, 25, -1),\n+    (2002017, 1432007, 25, -1),\n+    (2002017, 1442008, 25, -1),\n+    (2002017, 1372015, 25, -1),\n+    (2002017, 1382008, 25, -1),\n+    (2002017, 1482009, 25, -1),\n+    (2002017, 1492010, 25, -1),\n+    (2002017, 2001000, 5, -1),\n+    (2002017, 2001001, 5, -1),\n+    (2002017, 2001002, 5, -1),\n+    (2002017, 2010005, 10, -1),\n+    (2002017, 2020007, 10, -1),\n+    (2002017, 2020009, 10, -1),\n+    (2002017, 2020011, 15, -1),\n+    (2002017, 2020012, 15, -1),\n+    (2002017, 2020013, 15, -1),\n+    (2002018, 4004004, 1, -1),\n+    (2002018, 4004002, 1, -1),\n+    (2002018, 4004003, 1, -1),\n+    (2002018, 4004000, 1, -1),\n+    (2002018, 4004001, 1, -1),\n+    (2002018, 4005004, 5, -1),\n+    (2002018, 4005002, 5, -1),\n+    (2002018, 4005003, 5, -1),\n+    (2002018, 4005000, 5, -1),\n+    (2002018, 4005001, 5, -1),\n+    (2002018, 2000006, 1, -1),\n+    (2002018, 2000004, 2, -1),\n+    (2002018, 2000005, 2, -1),\n+    (2002018, 2020013, 5, -1),\n+    (2002018, 2020014, 5, -1),\n+    (2002018, 2020015, 5, -1),\n+    (2002018, 1082096, 25, -1),\n+    (2002018, 1082104, 25, -1),\n+    (2002018, 1082107, 25, -1),\n+    (2002018, 1082099, 25, -1),\n+    (2002018, 1082098, 25, -1),\n+    (2002018, 1082093, 25, -1),\n+    (2002018, 1082204, 25, -1),\n+    (2002014, 4004004, 1, -1),\n+    (2002014, 4004002, 1, -1),\n+    (2002014, 4004003, 1, -1),\n+    (2002014, 4004000, 1, -1),\n+    (2002014, 4004001, 1, -1),\n+    (2002014, 4005004, 5, -1),\n+    (2002014, 4005002, 5, -1),\n+    (2002014, 4005003, 5, -1),\n+    (2002014, 4005000, 5, -1),\n+    (2002014, 4005001, 5, -1),\n+    (2002014, 2000006, 1, -1),\n+    (2002014, 2000004, 2, -1),\n+    (2002014, 2000005, 2, -1),\n+    (2002014, 2020013, 5, -1),\n+    (2002014, 2020014, 5, -1),\n+    (2002014, 2020015, 5, -1),\n+    (2002014, 1082096, 25, -1),\n+    (2002014, 1082104, 25, -1),\n+    (2002014, 1082107, 25, -1),\n+    (2002014, 1082099, 25, -1),\n+    (2002014, 1082098, 25, -1),\n+    (2002014, 1082093, 25, -1),\n+    (2002014, 1082204, 25, -1),\n+    (2001002, 4001045, 1, -1),\n+    (2001003, 4001045, 1, -1),\n+    (2001004, 4001045, 1, -1),\n+    (2001005, 4001045, 1, -1),\n+    (2001006, 4001045, 1, -1),\n+    (2001007, 4001045, 1, -1),\n+    (2001008, 4001045, 1, -1),\n+    (2001009, 4001045, 1, -1),\n+    (2001010, 4001045, 1, -1),\n+    (2001011, 4001045, 1, -1),\n+    (2001012, 4001045, 1, -1),\n+    (2001013, 4001045, 1, -1),\n+    (2001014, 4001045, 1, -1),\n+    (2001015, 4001045, 1, -1);\n \n   # updates info for all cards on monster book\n   DROP TABLE `monstercarddata`;"}, {"sha": "9770ef0b52ef67b26bf550706495158352f566ca", "filename": "src/client/MapleCharacter.java", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/src/client/MapleCharacter.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/src/client/MapleCharacter.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/MapleCharacter.java?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -743,7 +743,7 @@ public void newClient(MapleClient c) {\n         this.loggedIn = true;\n         c.setAccountName(this.client.getAccountName());//No null's for accountName\n         this.client = c;\n-        MaplePortal portal = map.findClosestSpawnpoint(getPosition());\n+        MaplePortal portal = map.findClosestPlayerSpawnpoint(getPosition());\n         if (portal == null) {\n             portal = map.getPortal(0);\n         }\n@@ -4814,7 +4814,7 @@ public synchronized void saveToDB() {\n             if (map == null || map.getId() == 610020000 || map.getId() == 610020001) {\n                 ps.setInt(24, 0);\n             } else {\n-                MaplePortal closest = map.findClosestSpawnpoint(getPosition());\n+                MaplePortal closest = map.findClosestPlayerSpawnpoint(getPosition());\n                 if (closest != null) {\n                     ps.setInt(24, closest.getId());\n                 } else {"}, {"sha": "7109b60d25ab071b98d09802a80fa0e90b40ea3f", "filename": "src/client/command/Commands.java", "status": "modified", "additions": 35, "deletions": 4, "changes": 39, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/src/client/command/Commands.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/src/client/command/Commands.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/command/Commands.java?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -72,6 +72,7 @@\n import server.maps.MapleMapItem;\n import server.maps.MapleMapObject;\n import server.maps.MapleMapObjectType;\n+import server.maps.MapleReactor;\n import server.quest.MapleQuest;\n import tools.DatabaseConnection;\n import tools.FilePrinter;\n@@ -104,7 +105,10 @@\n import constants.skills.Priest;\n import constants.skills.Spearman;\n import java.util.ArrayList;\n+import server.life.SpawnPoint;\n import server.maps.FieldLimit;\n+import server.movement.LifeMovementFragment;\n+import server.movement.TeleportMovement;\n \n public class Commands {\n         private static HashMap<String, Integer> gotomaps = new HashMap<String, Integer>();\n@@ -328,6 +332,10 @@ private static void hardsetItemStats(Equip equip, short stat) {\n             equip.setMdef(stat);\n             equip.setHp(stat);\n             equip.setMp(stat);\n+            \n+            byte flag = equip.getFlag();\n+            flag |= ItemConstants.UNTRADEABLE;\n+            equip.setFlag(flag);\n         }\n \n \tpublic static boolean executePlayerCommand(MapleClient c, String[] sub, char heading) {\n@@ -673,6 +681,22 @@ public static boolean executePlayerCommand(MapleClient c, String[] sub, char hea\n \t\t\tbreak;\n                     \n                 //debug only\n+                case \"debugnearestportal\":\n+                        if(ServerConstants.USE_DEBUG) {\n+                            MaplePortal portal = player.getMap().findClosestPortal(player.getPosition());\n+                            if(portal != null) player.dropMessage(6, \"Closest portal: \" + portal.getId() + \" '\" + portal.getName() + \"' --> toMap: \" + portal.getTargetMapId() + \" scriptname: '\" + portal.getScriptName() + \"' state: \" + portal.getPortalState() + \".\");\n+                            else player.dropMessage(6, \"There is no portal on this map.\");\n+                        }\n+                        break;\n+                \n+                case \"debugnearestspawnpoint\":\n+                        if(ServerConstants.USE_DEBUG) {\n+                            SpawnPoint sp = player.getMap().findClosestSpawnpoint(player.getPosition());\n+                            if(sp != null) player.dropMessage(6, \"Closest spawn point: \" + \" Position: x \" + sp.getPosition().getX() + \" y \" + sp.getPosition().getY() + \" Spawns mobid: '\" + ((sp.getMonster() != null) ? sp.getMonster().getId() : \"null\") + \"' --> canSpawn: \" + !sp.getDenySpawn() + \" canSpawnRightNow: \" + sp.shouldSpawn() + \".\");\n+                            else player.dropMessage(6, \"There is no mob spawn point on this map.\");\n+                        }\n+                        break;\n+                    \n                 case \"debugpos\":\n                         if(ServerConstants.USE_DEBUG) {\n                             player.dropMessage(6, \"Current map position: (\" + player.getPosition().getX() + \", \" + player.getPosition().getY() + \").\");\n@@ -681,7 +705,7 @@ public static boolean executePlayerCommand(MapleClient c, String[] sub, char hea\n                     \n                 case \"debugmap\":\n                         if(ServerConstants.USE_DEBUG) {\n-                            player.dropMessage(6, \"Current map id \" + player.getMap().getId() + \", event: '\" + ((player.getMap().getEventInstance() != null) ? player.getMap().getEventInstance().getName() : \"null\") + \"'; Players: \" + player.getMap().getAllPlayers().size() + \", Mobs: \" + player.getMap().countMonsters() + \", Reactors: \" + player.getMap().countReactors() + \".\");\n+                            player.dropMessage(6, \"Current map id \" + player.getMap().getId() + \", event: '\" + ((player.getMap().getEventInstance() != null) ? player.getMap().getEventInstance().getName() : \"null\") + \"'; Players: \" + player.getMap().getAllPlayers().size() + \", Mobs: \" + player.getMap().countMonsters() + \", Reactors: \" + player.getMap().countReactors() + \", Items: \" + player.getMap().countItems() + \".\");\n                         }\n                         break;\n                 \n@@ -695,8 +719,10 @@ public static boolean executePlayerCommand(MapleClient c, String[] sub, char hea\n                 case \"debugreactors\":\n                         if(ServerConstants.USE_DEBUG) {\n                             player.dropMessage(6, \"Current reactor states on map \" + player.getMapId() + \":\");\n-                            for(Pair p: player.getMap().reportReactorStates()) {\n-                                player.dropMessage(6, \"Reactor id: \" + p.getLeft() + \" -> State: \" + p.getRight() + \".\");\n+                            \n+                            for(MapleMapObject mmo: player.getMap().getReactors()) {\n+                                MapleReactor mr = (MapleReactor) mmo;\n+                                player.dropMessage(6, \"Reactor id: \" + mr.getId() + \" name: '\" + mr.getName() + \"' -> Type: \" + mr.getReactorType() + \" State: \" + mr.getState() + \" Event State: \" + mr.getEventState() + \" Position: x \" + mr.getPosition().getX() + \" y \" + mr.getPosition().getY() + \".\");\n                             }\n                         }\n                         break;\n@@ -863,6 +889,11 @@ else if (sub[0].equals(\"sp\")) {\n                                         eu.setInt(incval);\n                                         eu.setStr(incval);\n                                         eu.setLuk(incval);\n+                                        \n+                                        byte flag = eu.getFlag();\n+                                        flag |= ItemConstants.UNTRADEABLE;\n+                                        eu.setFlag(flag);\n+                                        \n                                         player.forceUpdateItem(eu);\n                                 } catch(Exception e){\n                                         e.printStackTrace();\n@@ -904,7 +935,7 @@ else if (sub[0].equals(\"sp\")) {\n \t\t\t\tplayer.getMap().setMuted(true);\n \t\t\t\tplayer.dropMessage(5, \"The map you are in has been muted.\");\n \t\t\t}\n-\t\t} else if (sub[0].equals(\"checkdmg\")) {\n+                } else if (sub[0].equals(\"checkdmg\")) {\n \t\t\tMapleCharacter victim = c.getWorldServer().getPlayerStorage().getCharacterByName(sub[1]);\n \t\t\tint maxBase = victim.calculateMaxBaseDamage(victim.getTotalWatk());\n \t\t\tInteger watkBuff = victim.getBuffedValue(MapleBuffStat.WATK);"}, {"sha": "fdefc5f195047a2dd4ef461d82b87092c2e73370", "filename": "src/client/inventory/Equip.java", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/src/client/inventory/Equip.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/src/client/inventory/Equip.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/inventory/Equip.java?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -460,6 +460,10 @@ public int getItemExp() {\n     }\n     \n     private double normalizedMasteryExp(int reqLevel) {\n+        // Trivia: at equips requiring level 200, one gaining MAX INTEGER exp points will have their equip\n+        // exp gain normalized to roughly 5.752 points (1/3 of the needed to pass the equipment to lvl 2)!\n+        // Good thing there is not much lvl 140+ equipments in the game!\n+        \n         return Math.max((2622.71 * Math.exp(reqLevel * 0.0733649)) - 6000.0, 15);\n     }\n     "}, {"sha": "405bf21ece33d8c9961a94cb7e8523fc30abfa04", "filename": "src/net/server/channel/handlers/AbstractMovementPacketHandler.java", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/src/net/server/channel/handlers/AbstractMovementPacketHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/src/net/server/channel/handlers/AbstractMovementPacketHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/AbstractMovementPacketHandler.java?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -66,10 +66,10 @@\n                 case 12:\n                 case 13: // Shot-jump-back thing\n                 case 16: // Float\n-\t\t\t\tcase 18:\n-\t\t\t\tcase 19: // Springs on maps\n+                case 18:\n+                case 19: // Springs on maps\n                 case 20: // Aran Combat Step\n-\t\t\t\tcase 22: {\n+                case 22: {\n                     short xpos = lea.readShort();\n                     short ypos = lea.readShort();\n                     byte newstate = lea.readByte();\n@@ -83,7 +83,7 @@\n                 case 7: // assaulter\n                 case 8: // assassinate\n                 case 9: // rush\n-\t\t\t\tcase 11: //chair\n+                case 11: //chair\n                 {\n //                case 14: {\n                     short xpos = lea.readShort();\n@@ -138,7 +138,7 @@\n                     break;\n                 }\n                 default:\n-\t\t\t\t\tSystem.out.println(\"Unhandled Case:\" + command);\n+                    System.out.println(\"Unhandled Case:\" + command);\n                     return null;\n             }\n         }"}, {"sha": "b0ee0923ec7b42b8fe6fef484119ee8c271e84ea", "filename": "src/net/server/channel/handlers/GeneralChatHandler.java", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/src/net/server/channel/handlers/GeneralChatHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/src/net/server/channel/handlers/GeneralChatHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/GeneralChatHandler.java?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -61,7 +61,7 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                     }\n                     \n                     SimpleDateFormat sdf = new SimpleDateFormat(\"dd-MM-yyyy HH:mm\");\n-                    FilePrinter.print(FilePrinter.USED_COMMANDS + \".txt\", c.getPlayer().getName() + \" used: \" + heading + command + \"on \" + sdf.format(Calendar.getInstance().getTime()) + \"\\r\\n\");\n+                    FilePrinter.print(FilePrinter.USED_COMMANDS, c.getPlayer().getName() + \" used: \" + heading + command + \"on \" + sdf.format(Calendar.getInstance().getTime()) + \"\\r\\n\");\n                 }\n             }\n         } else {"}, {"sha": "4c250bc870b9913bcc7b5baa8c75871fcad5dfbd", "filename": "src/net/server/channel/handlers/UseCashItemHandler.java", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/src/net/server/channel/handlers/UseCashItemHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/src/net/server/channel/handlers/UseCashItemHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/UseCashItemHandler.java?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -411,7 +411,7 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                     if (c.getChannelServer().getMapFactory().getMap(victim.getMapId()).getForcedReturnId() == 999999999 || victim.getMapId() < 100000000) {\n                         if (victim.gmLevel() <= player.gmLevel()) {\n                             if (itemId == 5041000 || victim.getMapId() / player.getMapId() == 1) { //viprock & same continent\n-                                player.changeMap(target, target.findClosestSpawnpoint(victim.getPosition()));\n+                                player.changeMap(target, target.findClosestPlayerSpawnpoint(victim.getPosition()));\n                                 success = true;\n                             } else {\n                                 player.dropMessage(1, \"You cannot teleport between continents with this teleport rock.\");"}, {"sha": "268da7fbb66f84ac99d008e63ff0c1acf1d17adf", "filename": "src/scripting/AbstractPlayerInteraction.java", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/src/scripting/AbstractPlayerInteraction.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/src/scripting/AbstractPlayerInteraction.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/scripting/AbstractPlayerInteraction.java?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -88,9 +88,10 @@ public MapleCharacter getChar() {\n         public MapleMap getMap() {\n                 return c.getPlayer().getMap();\n         }\n-\n-\tpublic void warp(int map) {\n-\t\tgetPlayer().changeMap(map, 0);\n+        \n+\tpublic void warp(int mapid) {\n+                MapleMap map = getWarpMap(mapid);\n+\t\tgetPlayer().changeMap(map, map.getRandomPlayerSpawnpoint());\n \t}\n \n \tpublic void warp(int map, int portal) {"}, {"sha": "d59c5ede0ba93878a678ab766bd438e70c8e8e4f", "filename": "src/scripting/event/EventInstanceManager.java", "status": "modified", "additions": 65, "deletions": 2, "changes": 67, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/src/scripting/event/EventInstanceManager.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/src/scripting/event/EventInstanceManager.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/scripting/event/EventInstanceManager.java?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -43,19 +43,23 @@\n import provider.MapleDataProviderFactory;\n import server.MaplePortal;\n import server.TimerManager;\n+import server.MapleStatEffect;\n import server.expeditions.MapleExpedition;\n import server.life.MapleMonster;\n import server.maps.MapleMap;\n import server.maps.MapleMapFactory;\n import tools.DatabaseConnection;\n import client.MapleCharacter;\n+import client.SkillFactory;\n+import client.Skill;\n import constants.ItemConstants;\n import constants.ServerConstants;\n import java.awt.Point;\n import java.util.concurrent.ScheduledFuture;\n import java.util.logging.Level;\n import java.util.logging.Logger;\n import scripting.AbstractPlayerInteraction;\n+import server.MapleItemInformationProvider;\n import server.life.MapleLifeFactory;\n import server.life.MapleNPC;\n import tools.MaplePacketCreator;\n@@ -113,6 +117,35 @@ public EventManager getEm() {\n \t\treturn em;\n \t}\n         \n+        public void applyEventPlayersItemBuff(int itemId) {\n+                List<MapleCharacter> players = getPlayerList();\n+                MapleStatEffect mse = MapleItemInformationProvider.getInstance().getItemEffect(itemId);\n+                \n+                if(mse != null) {\n+                        for (MapleCharacter player: players) {\n+                                mse.applyTo(player);\n+                        }\n+                }\n+        }\n+        \n+        public void applyEventPlayersSkillBuff(int skillId) {\n+                applyEventPlayersSkillBuff(skillId, Integer.MAX_VALUE);\n+        }\n+        \n+        public void applyEventPlayersSkillBuff(int skillId, int skillLv) {\n+                List<MapleCharacter> players = getPlayerList();\n+                Skill skill = SkillFactory.getSkill(skillId);\n+                \n+                if(skill != null) {\n+                        MapleStatEffect mse = skill.getEffect(Math.min(skillLv, skill.getMaxLevel()));\n+                        if(mse != null) {\n+                                for (MapleCharacter player: players) {\n+                                        mse.applyTo(player);\n+                                }\n+                        }\n+                }\n+        }\n+        \n         public void giveEventPlayersExp(int gain) {\n                 giveEventPlayersExp(gain, -1);\n         }\n@@ -193,6 +226,7 @@ public void startEventTimer(long time) {\n                 timeStarted = System.currentTimeMillis();\n \t\teventTime = time;\n                 \n+                for(MapleCharacter chr: getPlayers()) chr.announce(MaplePacketCreator.getClock((int) (time / 1000)));\n                 event_schedule = TimerManager.getInstance().schedule(new Runnable() {\n                         public void run() {\n                                 try {\n@@ -496,6 +530,14 @@ public MapleMap getMapInstance(int mapId) {\n \t\treturn map;\n \t}\n \n+        public void setIntProperty(String key, Integer value) {\n+                setProperty(key, value);\n+        }\n+        \n+        public void setProperty(String key, Integer value) {\n+                setProperty(key, \"\" + value);\n+        }\n+        \n \tpublic void setProperty(String key, String value) {\n \t\tprops.setProperty(key, value);\n \t}\n@@ -512,8 +554,12 @@ public Properties getProperties() {\n                 return props;\n         }\n         \n-        public int getIntProperty(String key) {\n-                return Integer.parseInt(props.getProperty(key));\n+        public Integer getIntProperty(String key) {\n+                try {\n+                        return Integer.parseInt(props.getProperty(key));\n+                } catch(Exception e) {\n+                        return null;\n+                }\n         }\n \t\n \tpublic void leftParty(MapleCharacter chr) {\n@@ -811,6 +857,23 @@ public final void warpEventTeam(int warpTo) {\n                 }\n         }\n         \n+        public final void warpEventTeamToMapSpawnPoint(int warpFrom, int warpTo, int toSp) {\n+                List<MapleCharacter> players = getPlayerList();\n+                \n+                for (MapleCharacter chr : players) {\n+                        if(chr.getMapId() == warpFrom)\n+                                chr.changeMap(warpTo, toSp);\n+                }\n+        }\n+        \n+        public final void warpEventTeamToMapSpawnPoint(int warpTo, int toSp) {\n+                List<MapleCharacter> players = getPlayerList();\n+                \n+                for (MapleCharacter chr : players) {\n+                        chr.changeMap(warpTo, toSp);\n+                }\n+        }\n+        \n         public final MapleCharacter getLeader() {\n                 rL.lock();\n                 try {"}, {"sha": "866d0c0fc818edfd62cc3886d61f284b09ef9210", "filename": "src/scripting/event/EventManager.java", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/src/scripting/event/EventManager.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/src/scripting/event/EventManager.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/scripting/event/EventManager.java?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -272,6 +272,7 @@ public boolean startInstance(int lobbyId, MapleExpedition exped) {\n             \n             eim.registerExpedition(exped);\n             exped.start();\n+            iv.invokeFunction(\"afterSetup\", eim);\n         } catch (ScriptException | NoSuchMethodException ex) {\n             Logger.getLogger(EventManager.class.getName()).log(Level.SEVERE, null, ex);\n         }\n@@ -303,6 +304,7 @@ public boolean startInstance(int lobbyId, MapleCharacter chr) {\n             instanceLocks.put(eim.getName(), lobbyId);\n             \n             eim.registerPlayer(chr);\n+            iv.invokeFunction(\"afterSetup\", eim);\n         } catch (ScriptException | NoSuchMethodException ex) {\n             Logger.getLogger(EventManager.class.getName()).log(Level.SEVERE, null, ex);\n         }\n@@ -335,6 +337,7 @@ public boolean startInstance(int lobbyId, MapleParty party, MapleMap map) {\n             \n             eim.registerParty(party, map);\n             party.setEligibleMembers(null);\n+            iv.invokeFunction(\"afterSetup\", eim);\n         } catch (ScriptException | NoSuchMethodException ex) {\n             Logger.getLogger(EventManager.class.getName()).log(Level.SEVERE, null, ex);\n         }\n@@ -367,6 +370,7 @@ public boolean startInstance(int lobbyId, MapleParty party, MapleMap map, int di\n             \n             eim.registerParty(party, map);\n             party.setEligibleMembers(null);\n+            iv.invokeFunction(\"afterSetup\", eim);\n         } catch (ScriptException | NoSuchMethodException ex) {\n             Logger.getLogger(EventManager.class.getName()).log(Level.SEVERE, null, ex);\n         }\n@@ -398,6 +402,7 @@ public boolean startInstance(int lobbyId, EventInstanceManager eim, String leade\n             \n             iv.invokeFunction(\"setup\", eim);\n             eim.setProperty(\"leader\", leader);\n+            iv.invokeFunction(\"afterSetup\", eim);\n         } catch (ScriptException | NoSuchMethodException ex) {\n             Logger.getLogger(EventManager.class.getName()).log(Level.SEVERE, null, ex);\n         }"}, {"sha": "a2735514acdadc043e086ed757fdbe84020043dd", "filename": "src/scripting/reactor/ReactorActionManager.java", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/src/scripting/reactor/ReactorActionManager.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/src/scripting/reactor/ReactorActionManager.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/scripting/reactor/ReactorActionManager.java?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -101,7 +101,7 @@ public void dropItems(int posX, int posY, boolean meso, int mesoChance, int minM\n                 } else {\n                     drop = ii.randomizeStats((Equip) ii.getEquipById(d.itemId));\n                 }\n-                reactor.getMap().spawnItemDrop(reactor, getPlayer(), drop, reactor.getMap().calcDropPos(dropPos, reactor.getPosition()), false, false);\n+                reactor.getMap().spawnItemDrop(reactor, getPlayer(), drop, reactor.getMap().calcDropPos(dropPos, reactor.getPosition()), (byte)(getPlayer().getParty() != null ? 1 : 0), false);\n             }\n             dropPos.x += 25;\n         }\n@@ -127,7 +127,7 @@ public void spawnMonster(int id, int qty, int x, int y) {\n         spawnMonster(id, qty, new Point(x, y));\n     }\n \n-    private void spawnMonster(int id, int qty, Point pos) {\n+    public void spawnMonster(int id, int qty, Point pos) {\n         for (int i = 0; i < qty; i++) {\n             reactor.getMap().spawnMonsterOnGroundBelow(MapleLifeFactory.getMonster(id), pos);\n         }"}, {"sha": "22b1b6714cf171b423436bb2459d13289b1b3549", "filename": "src/server/maps/MapleGenericPortal.java", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/src/server/maps/MapleGenericPortal.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/src/server/maps/MapleGenericPortal.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/maps/MapleGenericPortal.java?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -121,7 +121,7 @@ public void enterPortal(MapleClient c) {\n         } else if (getTargetMapId() != 999999999) {\n             MapleMap to = c.getPlayer().getEventInstance() == null ? c.getChannelServer().getMapFactory().getMap(getTargetMapId()) : c.getPlayer().getEventInstance().getMapInstance(getTargetMapId());\n             MaplePortal pto = to.getPortal(getTarget());\n-            if (pto == null) {// fallback for missing portals - no real life case anymore - intresting for not implemented areas\n+            if (pto == null) {// fallback for missing portals - no real life case anymore - interesting for not implemented areas\n                 pto = to.getPortal(0);\n             }\n             c.getPlayer().changeMap(to, pto); //late resolving makes this harder but prevents us from loading the whole world at once"}, {"sha": "e61fca0dc7d587ca6285722e5b771ef0699f961e", "filename": "src/server/maps/MapleMap.java", "status": "modified", "additions": 103, "deletions": 55, "changes": 158, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/src/server/maps/MapleMap.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/src/server/maps/MapleMap.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/maps/MapleMap.java?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -45,6 +45,7 @@\n import java.util.LinkedHashSet;\n import java.util.LinkedList;\n import java.util.List;\n+import java.util.Iterator;\n import java.util.Map;\n import java.util.Map.Entry;\n import java.util.Random;\n@@ -530,16 +531,6 @@ public int countMonster(int id) {\n         return count;\n     }\n     \n-    public List<Pair> reportReactorStates() {\n-        List<Pair> list = new LinkedList<>();\n-        \n-        for (MapleMapObject m : getMapObjectsInRange(new Point(0, 0), Double.POSITIVE_INFINITY, Arrays.asList(MapleMapObjectType.REACTOR))) {\n-            MapleReactor mr = (MapleReactor) m;\n-            list.add(new Pair(mr.getId(), mr.getState()));\n-        }\n-        return list;\n-    }\n-    \n     public int countMonsters() {\n         return getMapObjectsInRange(new Point(0, 0), Double.POSITIVE_INFINITY, Arrays.asList(MapleMapObjectType.MONSTER)).size();\n     }\n@@ -551,6 +542,14 @@ public int countReactors() {\n     public final List<MapleMapObject> getReactors() {\n         return getMapObjectsInRange(new Point(0, 0), Double.POSITIVE_INFINITY, Arrays.asList(MapleMapObjectType.REACTOR));\n     }\n+    \n+    public int countItems() {\n+        return getMapObjectsInRange(new Point(0, 0), Double.POSITIVE_INFINITY, Arrays.asList(MapleMapObjectType.ITEM)).size();\n+    }\n+    \n+    public final List<MapleMapObject> getItems() {\n+        return getMapObjectsInRange(new Point(0, 0), Double.POSITIVE_INFINITY, Arrays.asList(MapleMapObjectType.ITEM));\n+    }\n \n     public boolean damageMonster(final MapleCharacter chr, final MapleMonster monster, final int damage) {\n         if (monster.getId() == 8800000) {\n@@ -886,22 +885,6 @@ public void shuffleReactors() {\n         }\n     }\n \n-    public MapleReactor getReactorById(int Id) {\n-        objectRLock.lock();\n-        try {\n-            for (MapleMapObject obj : mapobjects.values()) {\n-                if (obj.getType() == MapleMapObjectType.REACTOR) {\n-                    if (((MapleReactor) obj).getId() == Id) {\n-                        return (MapleReactor) obj;\n-                    }\n-                }\n-            }\n-            return null;\n-        } finally {\n-            objectRLock.unlock();\n-        }\n-    }\n-\n     /**\n      * Automagically finds a new controller for the given monster from the chars\n      * on the map...\n@@ -1002,6 +985,22 @@ public MapleReactor getReactorByOid(int oid) {\n         MapleMapObject mmo = getMapObject(oid);\n         return (mmo != null && mmo.getType() == MapleMapObjectType.REACTOR) ? (MapleReactor) mmo : null;\n     }\n+    \n+    public MapleReactor getReactorById(int Id) {\n+        objectRLock.lock();\n+        try {\n+            for (MapleMapObject obj : mapobjects.values()) {\n+                if (obj.getType() == MapleMapObjectType.REACTOR) {\n+                    if (((MapleReactor) obj).getId() == Id) {\n+                        return (MapleReactor) obj;\n+                    }\n+                }\n+            }\n+            return null;\n+        } finally {\n+            objectRLock.unlock();\n+        }\n+    }\n \n     public MapleReactor getReactorByName(String name) {\n         objectRLock.lock();\n@@ -1327,10 +1326,14 @@ public void run() {\n             }\n         }, duration);\n     }\n-\n+    \n     public final void spawnItemDrop(final MapleMapObject dropper, final MapleCharacter owner, final Item item, Point pos, final boolean ffaDrop, final boolean playerDrop) {\n+        spawnItemDrop(dropper, owner, item, pos, (byte)(ffaDrop ? 2 : 0), playerDrop);\n+    }\n+\n+    public final void spawnItemDrop(final MapleMapObject dropper, final MapleCharacter owner, final Item item, Point pos, final byte dropType, final boolean playerDrop) {\n         final Point droppos = calcDropPos(pos, pos);\n-        final MapleMapItem drop = new MapleMapItem(item, droppos, dropper, owner, (byte) (ffaDrop ? 2 : 0), playerDrop);\n+        final MapleMapItem drop = new MapleMapItem(item, droppos, dropper, owner, dropType, playerDrop);\n         drop.setDropTime(System.currentTimeMillis());\n \n         spawnAndAddRangedMapObject(drop, new DelayedPacketCreation() {\n@@ -1396,7 +1399,7 @@ private void activateItemReactors(final MapleMapItem drop, final MapleClient c)\n             final MapleReactor react = (MapleReactor) o;\n \n             if (react.getReactorType() == 100) {\n-                if (react.getReactItem((byte) 0).getLeft() == item.getItemId() && react.getReactItem((byte) 0).getRight() == item.getQuantity()) {\n+                if (react.getReactItem(react.getEventState()).getLeft() == item.getItemId() && react.getReactItem(react.getEventState()).getRight() == item.getQuantity()) {\n \n                     if (react.getArea().contains(drop.getPosition())) {\n                         TimerManager.getInstance().schedule(new ActivateItemReactor(drop, react, c), 5000);\n@@ -1634,28 +1637,45 @@ public void run() {\n         chr.receivePartyMemberHP();\n     }\n \n-    public MaplePortal findClosestPortal(Point from) {\n+    public MaplePortal getRandomPlayerSpawnpoint() {\n+        List<MaplePortal> spawnPoints = new ArrayList<>();\n+        for (MaplePortal portal : portals.values()) {\n+            if (portal.getType() >= 0 && portal.getType() <= 2) {\n+                spawnPoints.add(portal);\n+            }\n+        }\n+        MaplePortal portal = spawnPoints.get(new Random().nextInt(spawnPoints.size()));\n+        return portal != null ? portal : getPortal(0);\n+    }\n+    \n+    public MaplePortal findClosestPlayerSpawnpoint(Point from) {\n         MaplePortal closest = null;\n         double shortestDistance = Double.POSITIVE_INFINITY;\n         for (MaplePortal portal : portals.values()) {\n             double distance = portal.getPosition().distanceSq(from);\n-            if (distance < shortestDistance) {\n+            if (portal.getType() >= 0 && portal.getType() <= 2 && distance < shortestDistance && portal.getTargetMapId() == 999999999) {\n                 closest = portal;\n                 shortestDistance = distance;\n             }\n         }\n         return closest;\n     }\n-\n-    public MaplePortal getRandomSpawnpoint() {\n-        List<MaplePortal> spawnPoints = new ArrayList<>();\n+    \n+    public MaplePortal findClosestPortal(Point from) {\n+        MaplePortal closest = null;\n+        double shortestDistance = Double.POSITIVE_INFINITY;\n         for (MaplePortal portal : portals.values()) {\n-            if (portal.getType() >= 0 && portal.getType() <= 2) {\n-                spawnPoints.add(portal);\n+            double distance = portal.getPosition().distanceSq(from);\n+            if (distance < shortestDistance) {\n+                closest = portal;\n+                shortestDistance = distance;\n             }\n         }\n-        MaplePortal portal = spawnPoints.get(new Random().nextInt(spawnPoints.size()));\n-        return portal != null ? portal : getPortal(0);\n+        return closest;\n+    }\n+\n+    public Collection<MaplePortal> getPortals() {\n+        return Collections.unmodifiableCollection(portals.values());\n     }\n \n     public void removePlayer(MapleCharacter chr) {\n@@ -2003,23 +2023,6 @@ public void movePlayer(MapleCharacter player, Point newPosition) {\n         }\n     }\n \n-    public MaplePortal findClosestSpawnpoint(Point from) {\n-        MaplePortal closest = null;\n-        double shortestDistance = Double.POSITIVE_INFINITY;\n-        for (MaplePortal portal : portals.values()) {\n-            double distance = portal.getPosition().distanceSq(from);\n-            if (portal.getType() >= 0 && portal.getType() <= 2 && distance < shortestDistance && portal.getTargetMapId() == 999999999) {\n-                closest = portal;\n-                shortestDistance = distance;\n-            }\n-        }\n-        return closest;\n-    }\n-\n-    public Collection<MaplePortal> getPortals() {\n-        return Collections.unmodifiableCollection(portals.values());\n-    }\n-\n     public String getMapName() {\n         return mapName;\n     }\n@@ -2244,6 +2247,19 @@ public void setAllowSpawnPointInRange(boolean allow, Point from, double rangeSq)\n             }\n         }\n     }\n+    \n+    public SpawnPoint findClosestSpawnpoint(Point from) {\n+        SpawnPoint closest = null;\n+        double shortestDistance = Double.POSITIVE_INFINITY;\n+        for (SpawnPoint sp : monsterSpawn) {\n+            double distance = sp.getPosition().distanceSq(from);\n+            if (distance < shortestDistance) {\n+                closest = sp;\n+                shortestDistance = distance;\n+            }\n+        }\n+        return closest;\n+    }\n \n     public void respawn() {\n         if(!allowSummons) return;\n@@ -2284,6 +2300,38 @@ public void respawn() {\n             }\n         }\n     }\n+    \n+    public final int getNumPlayersInArea(final int index) {\n+        return getNumPlayersInRect(getArea(index));\n+    }\n+\n+    public final int getNumPlayersInRect(final Rectangle rect) {\n+        int ret = 0;\n+\n+        chrRLock.lock();\n+        try {\n+            final Iterator<MapleCharacter> ltr = characters.iterator();\n+            while (ltr.hasNext()) {\n+                if (rect.contains(ltr.next().getPosition())) {\n+                    ret++;\n+                }\n+            }\n+        } finally {\n+            chrRLock.unlock();\n+        }\n+        return ret;\n+    }\n+\n+    public final int getNumPlayersItemsInArea(final int index) {\n+        return getNumPlayersItemsInRect(getArea(index));\n+    }\n+\n+    public final int getNumPlayersItemsInRect(final Rectangle rect) {\n+        int retP = getNumPlayersInRect(rect);\n+        int retI = getMapObjectsInBox(rect, Arrays.asList(MapleMapObjectType.ITEM)).size();\n+\n+        return retP + retI;\n+    }\n \n     private static interface DelayedPacketCreation {\n "}, {"sha": "faad95f1d2d0e366265d75cf553f22a5b03918bb", "filename": "src/server/maps/MapleReactor.java", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/src/server/maps/MapleReactor.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/src/server/maps/MapleReactor.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/maps/MapleReactor.java?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -43,6 +43,7 @@\n     private int rid;\n     private MapleReactorStats stats;\n     private byte state;\n+    private byte evstate;\n     private int delay;\n     private MapleMap map;\n     private String name;\n@@ -51,6 +52,7 @@\n     private Lock reactorLock = new ReentrantLock(true);\n \n     public MapleReactor(MapleReactorStats stats, int rid) {\n+        this.evstate = (byte)0;\n         this.stats = stats;\n         this.rid = rid;\n         alive = true;\n@@ -75,11 +77,19 @@ public void unlockReactor() {\n     public void setState(byte state) {\n         this.state = state;\n     }\n-\n+    \n     public byte getState() {\n         return state;\n     }\n     \n+    public void setEventState(byte substate) {\n+        this.evstate = substate;\n+    }\n+    \n+    public byte getEventState() {\n+        return evstate;\n+    }\n+    \n     public MapleReactorStats getStats() {\n         return stats;\n     }"}, {"sha": "53ec1dc29b99a661feda34762d381349d5c410d3", "filename": "wz/Map.wz/Map/Map9/920010900.img.xml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/wz/Map.wz/Map/Map9/920010900.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/wz/Map.wz/Map/Map9/920010900.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Map.wz/Map/Map9/920010900.img.xml?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -3077,7 +3077,7 @@\n     <int name=\"VRBottom\" value=\"2775\"/>\n     <int name=\"VRRight\" value=\"357\"/>\n     <int name=\"fieldType\" value=\"9\"/>\n-    <int name=\"fieldLimit\" value=\"270974\"/>\n+    <int name=\"fieldLimit\" value=\"402046\"/>\n   </imgdir>\n   <imgdir name=\"foothold\">\n     <imgdir name=\"3\">"}, {"sha": "00b3a83a4e383e199d87ac0c08c6321de79725d9", "filename": "wz/Reactor.wz/2006000.img.xml", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/wz/Reactor.wz/2006000.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/wz/Reactor.wz/2006000.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Reactor.wz/2006000.img.xml?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -52,6 +52,16 @@\n         <int name=\"delay\" value=\"150\"/>\n       </canvas>\n     </imgdir>\n+    <imgdir name=\"event\">\n+      <imgdir name=\"0\">\n+        <int name=\"type\" value=\"100\"/>\n+        <int name=\"state\" value=\"1\"/>\n+        <string name=\"0\" value=\"4001063\"/>\n+        <int name=\"1\" value=\"20\"/>\n+        <vector name=\"lt\" x=\"-100\" y=\"-100\"/>\n+        <vector name=\"rb\" x=\"100\" y=\"100\"/>\n+      </imgdir>\n+    </imgdir>\n   </imgdir>\n   <imgdir name=\"1\">\n     <uol name=\"0\" value=\"../0/0\"/>"}, {"sha": "9352cb632f8d989fe0b0aeb8764bd0b0dabe03f8", "filename": "wz/Reactor.wz/2006001.img.xml", "status": "modified", "additions": 9, "deletions": 41, "changes": 50, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1afbac2429fd5eb312e7f72b834776414f25f15c/wz/Reactor.wz/2006001.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1afbac2429fd5eb312e7f72b834776414f25f15c/wz/Reactor.wz/2006001.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Reactor.wz/2006001.img.xml?ref=1afbac2429fd5eb312e7f72b834776414f25f15c", "patch": "@@ -3,62 +3,30 @@\n   <imgdir name=\"info\">\n     <string name=\"info\" value=\"\uc5ec\uc2e0\uc758 \uc11d\uc0c1\"/>\n   </imgdir>\n-  <imgdir name=\"0\">\n+  <string name=\"action\" value=\"fgodNPC1\"/>\n+  <imgdir name=\"1\">\n     <canvas name=\"0\" width=\"1\" height=\"1\">\n       <vector name=\"origin\" x=\"0\" y=\"0\"/>\n     </canvas>\n-    <imgdir name=\"hit\">\n-      <canvas name=\"0\" width=\"1\" height=\"1\">\n-        <vector name=\"origin\" x=\"0\" y=\"0\"/>\n-      </canvas>\n-    </imgdir>\n-  </imgdir>\n-  <imgdir name=\"1\">\n-    <uol name=\"0\" value=\"../0/0\"/>\n-    <uol name=\"hit\" value=\"../0/hit\"/>\n-  </imgdir>\n-  <imgdir name=\"2\">\n-    <uol name=\"0\" value=\"../0/0\"/>\n-    <uol name=\"hit\" value=\"../0/hit\"/>\n-  </imgdir>\n-  <imgdir name=\"3\">\n-    <uol name=\"0\" value=\"../0/0\"/>\n-    <uol name=\"hit\" value=\"../0/hit\"/>\n-  </imgdir>\n-  <imgdir name=\"4\">\n-    <uol name=\"0\" value=\"../0/0\"/>\n-    <uol name=\"hit\" value=\"../0/hit\"/>\n   </imgdir>\n-  <imgdir name=\"5\">\n-    <uol name=\"0\" value=\"../0/0\"/>\n-    <uol name=\"hit\" value=\"../0/hit\"/>\n-  </imgdir>\n-  <imgdir name=\"6\">\n-    <uol name=\"0\" value=\"../0/0\"/>\n+  <imgdir name=\"0\">\n+    <canvas name=\"0\" width=\"1\" height=\"1\">\n+      <vector name=\"origin\" x=\"0\" y=\"0\"/>\n+    </canvas>\n     <imgdir name=\"event\">\n       <imgdir name=\"0\">\n         <int name=\"type\" value=\"100\"/>\n-        <int name=\"state\" value=\"7\"/>\n+        <int name=\"state\" value=\"1\"/>\n         <int name=\"0\" value=\"4001055\"/>\n         <int name=\"1\" value=\"1\"/>\n         <vector name=\"lt\" x=\"-48\" y=\"-48\"/>\n         <vector name=\"rb\" x=\"47\" y=\"48\"/>\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"hit\">\n-      <canvas name=\"0\" width=\"67\" height=\"67\">\n-        <vector name=\"origin\" x=\"33\" y=\"33\"/>\n-        <int name=\"z\" value=\"-2\"/>\n-        <int name=\"a0\" value=\"0\"/>\n-        <int name=\"a1\" value=\"0\"/>\n-        <int name=\"delay\" value=\"300\"/>\n+      <canvas name=\"0\" width=\"1\" height=\"1\">\n+        <vector name=\"origin\" x=\"0\" y=\"0\"/>\n       </canvas>\n     </imgdir>\n   </imgdir>\n-  <imgdir name=\"7\">\n-    <canvas name=\"0\" width=\"1\" height=\"1\">\n-      <vector name=\"origin\" x=\"0\" y=\"0\"/>\n-    </canvas>\n-  </imgdir>\n-  <string name=\"action\" value=\"fgodNPC1\"/>\n </imgdir>"}]}]},
