{"fetchDate": "2019-12-19", "content": [{"sha": "fba27fb3b1018b205431dd8b83e8e50edc594095", "node_id": "MDY6Q29tbWl0NDUwODIwMjM6ZmJhMjdmYjNiMTAxOGIyMDU0MzFkZDhiODNlOGU1MGVkYzU5NDA5NQ==", "commit": {"author": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2019-06-27T23:34:39Z"}, "committer": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2019-06-27T23:34:39Z"}, "message": "Boss Daily Entry + Maker enable actions + Duey Quick Delivery\n\nFixed Legendary Spirit UI getting stuck when trying to apply scrolls in equipments without upgrade slots available.\nRevised map leasing. Players no longer lose ownership when changing maps. Players are allowed to lease one map each time.\nRevised expeditions warping players out as soon as the leader leaves the event or the number of players inside gets to be less than the minimum required to enter.\nFixed start/complete quest commands not acting properly for some quests.\nRefactored quest loadouts unnecessarily reloading MapleData.\nImplemented support for daily boss limit entry, usable on expeditions.\nRevised potential exploit cases within chair, face expression, quest action, summon damage and mob damage mob handlers.\nAdjusted displayed date in Duey. Value displayed now should be consistent with the expected expiration time.\nRefactored damage for friendly mobs getting handled inside packet structure.\nImplemented support for Quick Delivery from Duey.\nFixed Horntail specifically not dropping loots after recent updates.\nRefactored commands system. All commands are instanced at boot time instead of at every call.\nFixed usage of Maker skill not sending MAKER_RESULT packet to players. This automatically reenables the actions button (such as create) in Maker UI.\nAdjusted minidungeons, now using time limits specified in their respective recipes.\nReviewed the \"timeLimit\" property utilized by maps, which was poised to work on 2 different concepts altogether.\nFixed Gaga space event, should be functional now.\nAdded RPS minigame, resources implemented by Arnah.\nFixed damage taken from mob auto-destruction not working properly.", "tree": {"sha": "78a8f59438c07f1b0fbfbd0a9aadd7aba1d94ab0", "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/trees/78a8f59438c07f1b0fbfbd0a9aadd7aba1d94ab0"}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/commits/fba27fb3b1018b205431dd8b83e8e50edc594095", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/fba27fb3b1018b205431dd8b83e8e50edc594095", "html_url": "https://github.com/ronancpl/HeavenMS/commit/fba27fb3b1018b205431dd8b83e8e50edc594095", "comments_url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/fba27fb3b1018b205431dd8b83e8e50edc594095/comments", "author": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a39a210c1f6993a8747ba43f160c5b8dbfe761f2", "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/a39a210c1f6993a8747ba43f160c5b8dbfe761f2", "html_url": "https://github.com/ronancpl/HeavenMS/commit/a39a210c1f6993a8747ba43f160c5b8dbfe761f2"}], "stats": {"total": 5517, "additions": 2904, "deletions": 2613}, "files": [{"sha": "f7b19363c5cf21065647bf540d7ed08ac99c147f", "filename": "README.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/README.md", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/README.md", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/README.md?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -29,7 +29,7 @@ Java7 SDK: https://www.oracle.com/technetwork/java/javase/downloads/java-archive\n \n **Change log:**\n \n-  * Fixed Monster Magnet crashing the caster when trying to pull-in bosses.\n+  * Fixed Monster Magnet crashing the caster when trying to pull bosses.\n \n   * Fixed some 'rn' problems with quest icons & removed \"tab\" from party leader changed message. https://hostr.co/tsYsQzzV6xT0\n \n@@ -247,7 +247,7 @@ To change a character's GM level, make sure that character is not logged in, the\n ---\n ### Some notes about WZ/WZ.XML EDITING \n \n-NOTE: Be extremely wary when using server-side's XMLs data being reimporting into the client's WZ, as some means of synchronization between the server and client modules, this action COULD generate some kind of bugs afterwards. Client-to-server data reimporting seems to be fine, though.\n+NOTE: Be extremely wary when using server-side's XMLs data being reimported into the client's WZ, as some means of synchronization between the server and client modules, this action COULD generate some kind of bugs afterwards. Client-to-server data reimporting seems to be fine, though.\n \n #### Editing the v83 WZ's:\n "}, {"sha": "465429633afb1aa321e93c0a75f4612a17177789", "filename": "docs/mychanges_ptbr.txt", "status": "modified", "additions": 35, "deletions": 1, "changes": 36, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/docs/mychanges_ptbr.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/docs/mychanges_ptbr.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/docs/mychanges_ptbr.txt?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -1948,4 +1948,38 @@ Ajustado intera\u00e7\u00e3o com mapa do NPC Nein Spirit's Baby Dragon. Acesso \u00e0 \u00e1rea\n Normalizado uso de lobbyids em in\u00edcio de eventos nos scripts.\n \n 15 Junho 2019,\n-Corrigido limites de requisitos de n\u00edvel para acessar expedi\u00e7\u00f5es nos scripts de NPCs que as gerenciam.\n\\ No newline at end of file\n+Corrigido limites de requisitos de n\u00edvel para acessar expedi\u00e7\u00f5es nos scripts de NPCs que as gerenciam.\n+\n+19 Junho 2019,\n+Corrigido janela congelada de Legendary Spirit ao tentar aplicar scrolls em equipamentos sem slots.\n+Ajustado chance de drops de skillbooks.\n+Revisado funcionalidade de arrendamento de mapas. Jogadores n\u00e3o mais perdem posse ao trocar de mapas, somente ao expirar devido \u00e0 falta de atividades ou ao tentar arrendar outro mapa.\n+Revisado expedi\u00e7\u00f5es retirando jogadores assim que o l\u00edder sai de mapa ou n\u00e3o h\u00e1 mais em campo a quantidade m\u00ednima de jogadores requisitada para come\u00e7ar o evento.\n+Corrigido gerenciador de mapas finalizando antes dos eventos, potencialmente levando a quebra de scripts de evento durante a fase de shutdown do servidor.\n+Corrigido comandos de come\u00e7ar/completar quests n\u00e3o atuando para quests n\u00e3o previstas pelos XMLs.\n+Revisado sistema de quests desnecessariamente inicializando estruturas de leitura de XMLs.\n+Corrigido sistema de quests no objeto do jogador n\u00e3o acessando corretamente certas quests devido a uso indevido de inteiros de tamanho short e int.\n+\n+20 Junho 2019,\n+Implementado sistema de contabiliza\u00e7\u00e3o de entradas em bosses.\n+Corrigido potencial exploit com express\u00e3o facial podendo crashar jogadores ao receber express\u00e3o inv\u00e1lida.\n+\n+21 - 22 Junho 2019,\n+Ajustado data no Duey, que estava atuando de forma inesperada anteriormente.\n+Adicionado checagem contra potenciais exploits de dano dado em mobs por mobs ou summons em seus respectivos handlers.\n+Adicionado checagem contra potenciais exploits por itens nos handlers de cadeira e express\u00e3o facial.\n+Ajustado checagem contra potenciais exploits de dist\u00e2ncia/inexist\u00eancia de NPC na \u00e1rea onde o jogador se encontra, ao se realizar opera\u00e7\u00f5es sobre quests.\n+Refatorado fun\u00e7\u00e3o que modifica estado de mob aliado no mapa (no lado servidor) sendo executada dentro de defini\u00e7\u00e3o de pacote.\n+Implementado suporte para entrega r\u00e1pida pelo Duey.\n+\n+24 - 25 Junho 2019,\n+Corrigido Horntail n\u00e3o dropando itens ap\u00f3s mudan\u00e7a recente na l\u00f3gica de drops.\n+Revisado sistema de comandos. Cada comando no sistema \u00e9 inicializado somente uma vez, ao iniciar o servidor.\n+Ajustado Maker skill, agora utilizando pacotes de resultados ao realizar suas opera\u00e7\u00f5es.\n+Corrigido Mini Dungeons utilizando tempo limite pr\u00e9-determinado no c\u00f3digo-fonte.\n+Revisado utiliza\u00e7\u00e3o de \"timeLimit\" em objeto MapleMap. Valor supostamente pr\u00e9-determinado pela receita XML poderia ser sobrescrito por outros m\u00e9todos da classe.\n+Ajustado evento de Gaga no espa\u00e7o, evento agora funcional.\n+Adicionado minigame RPS de NPC, recursos implementados pelo Arnah.\n+\n+27 Junho 2019,\n+Corrigido contabiliza\u00e7\u00e3o de dano de auto-destrui\u00e7\u00e3o de mobs n\u00e3o sendo aplicado corretamente.\n\\ No newline at end of file"}, {"sha": "57d9b2d6ec77c96d90fd9ffc43bb77a50bcc1679", "filename": "launch_server_linux.sh", "status": "removed", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/a39a210c1f6993a8747ba43f160c5b8dbfe761f2/launch_server_linux.sh", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/a39a210c1f6993a8747ba43f160c5b8dbfe761f2/launch_server_linux.sh", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/launch_server_linux.sh?ref=a39a210c1f6993a8747ba43f160c5b8dbfe761f2", "patch": "@@ -1,3 +0,0 @@\n-#!/bin/sh\n-export CLASSPATH=\".:dist/*\" \n-java -Xmx2048m -Dwzpath=wz/ net.server.Server\n\\ No newline at end of file"}, {"sha": "9cfec04218b7dc7ae17589d02f01221598599480", "filename": "linux-compile.sh", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/linux-compile.sh", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/linux-compile.sh", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/linux-compile.sh?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -0,0 +1,4 @@\n+#!/bin/bash\n+# thanks to lkxyyjx\n+sudo ant -Dplatforms.JDK_1.7.home=/opt/jdk1.7.0_80 compile\n+sudo ant -Dplatforms.JDK_1.7.home=/opt/jdk1.7.0_80 jar\n\\ No newline at end of file"}, {"sha": "40557cec8e45a0ba1a40781b0eec47a563ccd03a", "filename": "linux-launch.sh", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/linux-launch.sh", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/linux-launch.sh", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/linux-launch.sh?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -0,0 +1,4 @@\n+#!/bin/sh\n+# cores in classpath, thanks to lkxyyjx\n+export CLASSPATH=\".:dist/*:cores/*\"\n+java -Xmx2048m -Dwzpath=wz/ net.server.Server\n\\ No newline at end of file"}, {"sha": "d3fd4fa7476e5f5a9f547ac04953d6f5539d79f3", "filename": "scripts/event/4jberserk.js", "status": "removed", "additions": 0, "deletions": 185, "changes": 185, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/a39a210c1f6993a8747ba43f160c5b8dbfe761f2/scripts/event/4jberserk.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/a39a210c1f6993a8747ba43f160c5b8dbfe761f2/scripts/event/4jberserk.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/4jberserk.js?ref=a39a210c1f6993a8747ba43f160c5b8dbfe761f2", "patch": "@@ -1,185 +0,0 @@\n-/*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n-\t\t       Matthias Butz <matze@odinms.de>\n-\t\t       Jan Christian Meyer <vimes@odinms.de>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License as\n-    published by the Free Software Foundation version 3 as published by\n-    the Free Software Foundation. You may not use, modify or distribute\n-    this program under any other version of the GNU Affero General Public\n-    License.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU Affero General Public License for more details.\n-\n-    You should have received a copy of the GNU Affero General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-*/\n-var exitMap;\n-var minPlayers = 3;\n-\n-function init() {}\n-\n-function monsterValue(eim, mobId) {\n-    return 1;\n-}\n-\n-function setup(level, lobbyid) {\n-    exitMap = em.getChannelServer().getMapFactory().getMap(105090800); // <exit>\n-    \n-    var eim = em.newInstance(\"4jberserk_\" + lobbyid);\n-    eim.setProperty(\"level\", level);\n-\t\n-    var mf = eim.getMapFactory();\n-    \n-    var map = mf.getMap(910500200);\n-    map.addMapTimer(3*60);\n-    em.schedule(\"timeOut\", 20 * 60000);\n-\n-    //you can't warp up to the rocks until all rogs are dead, I think?\n-    eim.setProperty(\"canWarp\",\"false\");\n-\t\n-    return eim;\n-}\n-\n-function afterSetup(eim) {}\n-\n-function playerEntry(eim, player) {\n-    var map = eim.getMapInstance(910500200);\n-    player.changeMap(map, map.getPortal(0));\n-\t\n-//TODO: hold time across map changes\n-//player.getClient().announce(tools.MaplePacketCreator.getClock(1800));\n-}\n-\n-function playerDead(eim, player) {\n-}\n-\n-function playerRevive(eim, player) {\n-    //if (eim.isLeader(player)) { //check for party leader\n-    //boot whole party and end\n-    var party = eim.getPlayers();\n-    for (var i = 0; i < party.size(); i++) {\n-        playerExit(eim, party.get(i));\n-    }\n-    eim.dispose();\n-/*/}\n-\telse { //boot dead player\n-\t\t// If only 2 players are left, uncompletable:\n-\t\tvar party = eim.getPlayers();\n-\t\tif (party.size() <= minPlayers) {\n-\t\t\tfor (var i = 0; i < party.size(); i++) {\n-\t\t\t\tplayerExit(eim,party.get(i));\n-\t\t\t}\n-\t\t\teim.dispose();\n-\t\t}\n-\t\telse\n-\t\t\tplayerExit(eim, player);\n-\t}*/\n-}\n-\n-function playerDisconnected(eim, player) {\n-    //if (eim.isLeader(player)) { //check for party leader\n-    //boot whole party and end\n-    var party = eim.getPlayers();\n-    for (var i = 0; i < party.size(); i++) {\n-        if (party.get(i).equals(player)) {\n-            removePlayer(eim, player);\n-        }\n-        else {\n-            playerExit(eim, party.get(i));\n-        }\n-    }\n-    eim.dispose();\n-/*/}\n-\telse { //boot d/ced player\n-\t\t// If only 2 players are left, uncompletable:\n-\t\tvar party = eim.getPlayers();\n-\t\tif (party.size() < minPlayers) {\n-\t\t\tfor (var i = 0; i < party.size(); i++) {\n-\t\t\t\tplayerExit(eim,party.get(i));\n-\t\t\t}\n-\t\t\teim.dispose();\n-\t\t}\n-\t\telse\n-\t\t\tplayerExit(eim, player);\n-\t}*/\n-}\n-\n-function leftParty(eim, player) {\t\t\t\n-    // If only 2 players are left, uncompletable:\n-    var party = eim.getPlayers();\n-    if (true) {\n-        for (var i = 0; i < party.size(); i++) {\n-            playerExit(eim,party.get(i));\n-        }\n-        eim.dispose();\n-    }\n-    else\n-        playerExit(eim, player);\n-}\n-\n-function disbandParty(eim) {\n-    //boot whole party and end\n-    var party = eim.getPlayers();\n-    for (var i = 0; i < party.size(); i++) {\n-        playerExit(eim, party.get(i));\n-    }\n-    eim.dispose();\n-}\n-\n-function playerUnregistered(eim, player) {}\n-\n-function playerExit(eim, player) {\n-    eim.unregisterPlayer(player);\n-    player.changeMap(exitMap, exitMap.getPortal(0));\n-}\n-\n-//for offline players\n-function removePlayer(eim, player) {\n-    eim.unregisterPlayer(player);\n-    player.getMap().removePlayer(player);\n-    player.setMap(exitMap);\n-}\n-\n-function clearPQ(eim) {\n-    var party = eim.getPlayers();\n-    for (var i = 0; i < party.size(); i++)\n-        playerExit(eim, party.get(i));\n-    eim.dispose();\n-}\n-\n-function monsterKilled(mob, eim) {}\n-\n-function allMonstersDead(eim) {\n-    eim.setProperty(\"canWarp\",\"true\");\n-}\n-\n-function cancelSchedule() {}\n-\n-function timeOut() {\n-    var iter = em.getInstances().iterator();\n-    while (iter.hasNext()) {\n-        var eim = iter.next();\n-        if (eim.getPlayerCount() > 0) {\n-            var pIter = eim.getPlayers().iterator();\n-            while (pIter.hasNext())\n-                playerExit(eim, pIter.next());\n-        }\n-        eim.dispose();\n-    }\n-}\n-\n-\n-// ---------- FILLER FUNCTIONS ----------\n-\n-function dispose() {}\n-\n-function scheduledTimeout(eim) {}\n-\n-function changedLeader(eim, leader) {}\n-"}, {"sha": "a1258d0ec6d9057631456aaec50b599c21cb0c6d", "filename": "scripts/event/4jrush.js", "status": "removed", "additions": 0, "deletions": 155, "changes": 155, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/a39a210c1f6993a8747ba43f160c5b8dbfe761f2/scripts/event/4jrush.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/a39a210c1f6993a8747ba43f160c5b8dbfe761f2/scripts/event/4jrush.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/4jrush.js?ref=a39a210c1f6993a8747ba43f160c5b8dbfe761f2", "patch": "@@ -1,155 +0,0 @@\n-/*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n-\t\t       Matthias Butz <matze@odinms.de>\n-\t\t       Jan Christian Meyer <vimes@odinms.de>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License as\n-    published by the Free Software Foundation version 3 as published by\n-    the Free Software Foundation. You may not use, modify or distribute\n-    this program under any other version of the GNU Affero General Public\n-    License.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU Affero General Public License for more details.\n-\n-    You should have received a copy of the GNU Affero General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-*/\n-/*\n- * @author AngelSL\n- * \n- * 4th Job Rush Quest.\n- * Based on Kerning City PQ script by Stereo\n- */\n-\n-var exitMap;\n-var minPlayers = 3;\n-\n-function init() {}\n-\n-function monsterValue(eim, mobId) {\n-    return 1;\n-}\n-\n-function setup(level, lobbyid) {\n-    exitMap = em.getChannelServer().getMapFactory().getMap(105090700); // <exit>\n-    \n-    var eim = em.newInstance(\"4jrush_\" + lobbyid);\n-    eim.setProperty(\"level\", level);\n-    \n-    var mf = eim.getMapFactory();\n-    var map = mf.getMap(910500100);\n-    map.addMapTimer(20*60);\n-    em.schedule(\"timeOut\", 20 * 60000);\n-    return eim;\n-}\n-\n-function afterSetup(eim) {}\n-\n-function playerEntry(eim, player) {\n-    var map = eim.getMapInstance(910500100);\n-    player.changeMap(map, map.getPortal(0));\n-}\n-\n-function playerDead(eim, player) {\n-}\n-\n-function playerRevive(eim, player) {\n-    var party = eim.getPlayers();\n-    for (var i = 0; i < party.size(); i++) {\n-        playerExit(eim, party.get(i));\n-    }\n-    eim.dispose();\n-}\n-\n-function playerDisconnected(eim, player) {\n-    var party = eim.getPlayers();\n-    for (var i = 0; i < party.size(); i++) {\n-        if (party.get(i).equals(player)) {\n-            removePlayer(eim, player);\n-        }\n-        else {\n-            playerExit(eim, party.get(i));\n-        }\n-    }\n-    eim.dispose();\n-}\n-\n-function leftParty(eim, player) {\t\t\t\n-    // If only 2 players are left, uncompletable:\n-    var party = eim.getPlayers();\n-    if (true) {\n-        for (var i = 0; i < party.size(); i++) {\n-            playerExit(eim,party.get(i));\n-        }\n-        eim.dispose();\n-    }\n-    else\n-        playerExit(eim, player);\n-}\n-\n-function disbandParty(eim) {\n-    //boot whole party and end\n-    var party = eim.getPlayers();\n-    for (var i = 0; i < party.size(); i++) {\n-        playerExit(eim, party.get(i));\n-    }\n-    eim.dispose();\n-}\n-\n-function playerUnregistered(eim, player) {}\n-\n-function playerExit(eim, player) {\n-    eim.unregisterPlayer(player);\n-    player.changeMap(exitMap, exitMap.getPortal(0));\n-}\n-\n-//for offline players\n-function removePlayer(eim, player) {\n-    eim.unregisterPlayer(player);\n-    player.getMap().removePlayer(player);\n-    player.setMap(exitMap);\n-}\n-\n-function clearPQ(eim) {\n-    //KPQ does nothing special with winners\n-    var party = eim.getPlayers();\n-    for (var i = 0; i < party.size(); i++) {\n-        playerExit(eim, party.get(i));\n-    }\n-    eim.dispose();\n-}\n-\n-function monsterKilled(mob, eim) {}\n-\n-function allMonstersDead(eim) {}\n-\n-function cancelSchedule() {}\n-\n-function timeOut() {\n-    var iter = em.getInstances().iterator();\n-    while (iter.hasNext()) {\n-        var eim = iter.next();\n-        if (eim.getPlayerCount() > 0) {\n-            var pIter = eim.getPlayers().iterator();\n-            while (pIter.hasNext()) {\n-                playerExit(eim, pIter.next());\n-            }\n-        }\n-        eim.dispose();\n-    }\n-}\n-\n-\n-// ---------- FILLER FUNCTIONS ----------\n-\n-function dispose() {}\n-\n-function scheduledTimeout(eim) {}\n-\n-function changedLeader(eim, leader) {}\n-"}, {"sha": "ba3d9bd204aa99a922bc4c977df8f16b26964438", "filename": "scripts/event/BalrogBattle.js", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/scripts/event/BalrogBattle.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/scripts/event/BalrogBattle.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/BalrogBattle.js?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -170,7 +170,7 @@ function playerLeft(eim, player) {\n \n function changedMap(eim, player, mapid) {\n         if (mapid < minMapId || mapid > maxMapId) {\n-                if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+                if (eim.isExpeditionTeamLackingNow(true, minPlayers, player)) {\n                         eim.unregisterPlayer(player);\n                         end(eim);\n                 }\n@@ -189,7 +189,7 @@ function changedLeader(eim, leader) {\n function playerDead(eim, player) {}\n \n function playerRevive(eim, player) { // player presses ok on the death pop up.\n-        if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+        if (eim.isExpeditionTeamLackingNow(true, minPlayers, player)) {\n                 eim.unregisterPlayer(player);\n                 end(eim);\n         }\n@@ -198,7 +198,7 @@ function playerRevive(eim, player) { // player presses ok on the death pop up.\n }\n \n function playerDisconnected(eim, player) {\n-        if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+        if (eim.isExpeditionTeamLackingNow(true, minPlayers, player)) {\n                 eim.unregisterPlayer(player);\n                 end(eim);\n         }\n@@ -207,7 +207,7 @@ function playerDisconnected(eim, player) {\n }\n \n function leftParty(eim, player) {\n-        if (eim.isEventTeamLackingNow(false, minPlayers, player)) {\n+        if (eim.isExpeditionTeamLackingNow(false, minPlayers, player)) {\n                 end(eim);\n         }\n         else"}, {"sha": "5bb27d8353978f899d01197e95829be7304b8884", "filename": "scripts/event/BalrogBattle_Easy.js", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/scripts/event/BalrogBattle_Easy.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/scripts/event/BalrogBattle_Easy.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/BalrogBattle_Easy.js?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -170,7 +170,7 @@ function playerLeft(eim, player) {\n \n function changedMap(eim, player, mapid) {\n         if (mapid < minMapId || mapid > maxMapId) {\n-                if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+                if (eim.isExpeditionTeamLackingNow(true, minPlayers, player)) {\n                         eim.unregisterPlayer(player);\n                         end(eim);\n                 }\n@@ -189,7 +189,7 @@ function changedLeader(eim, leader) {\n function playerDead(eim, player) {}\n \n function playerRevive(eim, player) { // player presses ok on the death pop up.\n-        if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+        if (eim.isExpeditionTeamLackingNow(true, minPlayers, player)) {\n                 eim.unregisterPlayer(player);\n                 end(eim);\n         }\n@@ -198,7 +198,7 @@ function playerRevive(eim, player) { // player presses ok on the death pop up.\n }\n \n function playerDisconnected(eim, player) {\n-        if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+        if (eim.isExpeditionTeamLackingNow(true, minPlayers, player)) {\n                 eim.unregisterPlayer(player);\n                 end(eim);\n         }\n@@ -207,7 +207,7 @@ function playerDisconnected(eim, player) {\n }\n \n function leftParty(eim, player) {\n-        if (eim.isEventTeamLackingNow(false, minPlayers, player)) {\n+        if (eim.isExpeditionTeamLackingNow(false, minPlayers, player)) {\n                 end(eim);\n         }\n         else"}, {"sha": "87b5eddc4b22fbbf67aa1334ecbbc0cbe6ca024d", "filename": "scripts/event/CWKPQ.js", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/scripts/event/CWKPQ.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/scripts/event/CWKPQ.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/CWKPQ.js?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -241,7 +241,7 @@ function scheduledTimeout(eim) {\n \n function changedMap(eim, player, mapid) {\n     if (mapid < minMapId || mapid > maxMapId) {\n-\tif (eim.isExpeditionTeamLackingNow(true, minPlayers, player)) {\n+\tif (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n             eim.dropMessage(5, \"[Expedition] Either the leader has quit the expedition or there is no longer the minimum number of members required to continue it.\");\n             eim.unregisterPlayer(player);\n             end(eim);\n@@ -297,7 +297,7 @@ function changedLeader(eim, leader) {}\n function playerDead(eim, player) {}\n \n function playerRevive(eim, player) {\n-    if (eim.isExpeditionTeamLackingNow(true, minPlayers, player)) {\n+    if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n         eim.unregisterPlayer(player);\n         eim.dropMessage(5, \"[Expedition] Either the leader has quit the expedition or there is no longer the minimum number of members required to continue it.\");\n         end(eim);\n@@ -309,7 +309,7 @@ function playerRevive(eim, player) {\n }\n \n function playerDisconnected(eim, player) {\n-    if (eim.isExpeditionTeamLackingNow(true, minPlayers, player)) {\n+    if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n         eim.dropMessage(5, \"[Expedition] Either the leader has quit the expedition or there is no longer the minimum number of members required to continue it.\");\n         eim.unregisterPlayer(player);\n         end(eim);"}, {"sha": "dc9dd6b7c79c9138c5c1b830308562eebd083b8c", "filename": "scripts/event/RescueGaga.js", "status": "added", "additions": 211, "deletions": 0, "changes": 211, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/scripts/event/RescueGaga.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/scripts/event/RescueGaga.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/RescueGaga.js?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -0,0 +1,211 @@\n+/**\n+ * @author: kevintjuh93\n+ * @author: Ronan\n+*/\n+\n+importPackage(Packages.tools);\n+\n+var isPq = true;\n+var minPlayers = 1, maxPlayers = 1;\n+var minLevel = 12, maxLevel = 255;\n+var entryMap = 922240000;\n+var exitMap = 922240200;\n+var recruitMap = 922240200;\n+\n+var minMapId = 922240000;\n+var maxMapId = 922240100;\n+\n+var eventTime = 3;         // 3 minutes\n+\n+var lobbyRange = [0, 19];\n+\n+function init() {\n+        setEventRequirements();\n+}\n+\n+function setLobbyRange() {\n+        return lobbyRange;\n+}\n+\n+function setEventRequirements() {\n+        var reqStr = \"\";\n+        \n+        reqStr += \"\\r\\n    Number of players: \";\n+        if(maxPlayers - minPlayers >= 1) reqStr += minPlayers + \" ~ \" + maxPlayers;\n+        else reqStr += minPlayers;\n+        \n+        reqStr += \"\\r\\n    Level range: \";\n+        if(maxLevel - minLevel >= 1) reqStr += minLevel + \" ~ \" + maxLevel;\n+        else reqStr += minLevel;\n+        \n+        reqStr += \"\\r\\n    Time limit: \";\n+        reqStr += eventTime + \" minutes\";\n+        \n+        em.setProperty(\"party\", reqStr);\n+}\n+\n+function setEventExclusives(eim) {\n+        var itemSet = [];\n+        eim.setExclusiveItems(itemSet);\n+}\n+\n+function setEventRewards(eim) {\n+        var itemSet, itemQty, evLevel, expStages;\n+\n+        evLevel = 1;    //Rewards at clear PQ\n+        itemSet = [];\n+        itemQty = [];\n+        eim.setEventRewards(evLevel, itemSet, itemQty);\n+        \n+        expStages = [];    //bonus exp given on CLEAR stage signal\n+        eim.setEventClearStageExp(expStages);\n+}\n+\n+function getEligibleParty(party) {      //selects, from the given party, the team that is allowed to attempt this event\n+        var eligible = [];\n+        var hasLeader = false;\n+        \n+        if(party.size() > 0) {\n+                var partyList = party.toArray();\n+\n+                for(var i = 0; i < party.size(); i++) {\n+                        var ch = partyList[i];\n+\n+                        if(ch.getMapId() == recruitMap && ch.getLevel() >= minLevel && ch.getLevel() <= maxLevel) {\n+                                if(ch.isLeader()) hasLeader = true;\n+                                eligible.push(ch);\n+                        }\n+                }\n+        }\n+        \n+        if(!(hasLeader && eligible.length >= minPlayers && eligible.length <= maxPlayers)) eligible = [];\n+        return eligible;\n+}\n+\n+function setup(level, lobbyid) {\n+        var eim = em.newInstance(\"RescueGaga_\" + lobbyid);\n+        eim.setProperty(\"level\", level);\n+        eim.setProperty(\"stage\", \"0\");\n+        eim.setProperty(\"falls\", \"0\");\n+        \n+        respawnStages(eim);\n+        eim.startEventTimer(eventTime * 60000);\n+        setEventRewards(eim);\n+        setEventExclusives(eim);\n+        return eim;\n+}\n+\n+function afterSetup(eim) {}\n+\n+function respawnStages(eim) {}\n+\n+function playerEntry(eim, player) {\n+        var map = eim.getMapInstance(entryMap);\n+        player.changeMap(map, map.getPortal(0));\n+        \n+        player.announce(MaplePacketCreator.showEffect(\"event/space/start\"));\n+        player.startMapEffect(\"Please rescue Gaga within the time limit.\", 5120027);\n+}\n+\n+function scheduledTimeout(eim) {\n+        end(eim);\n+}\n+\n+function playerUnregistered(eim, player) {}\n+\n+function playerExit(eim, player) {\n+        eim.unregisterPlayer(player);\n+        player.changeMap(exitMap, 0);\n+}\n+\n+function changedMap(eim, player, mapid) {\n+        if (mapid < minMapId || mapid > maxMapId) {\n+                if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+                        eim.unregisterPlayer(player);\n+                        \n+                        player.changeMap(mapid, 0);\n+                        player.cancelEffect(2360002);\n+                        \n+                        end(eim);\n+                } else {\n+                        eim.unregisterPlayer(player);\n+                        \n+                        player.changeMap(mapid, 0);\n+                        player.cancelEffect(2360002);\n+                }\n+        } else if (mapid == maxMapId) {\n+                eim.clearPQ();\n+                \n+                var rgaga = player.getEvents().get(\"rescueGaga\");\n+                rgaga.complete();\n+        }\n+}\n+\n+function afterChangedMap(eim, player, mapid) {\n+        if (mapid == minMapId) {\n+                player.getAbstractPlayerInteraction().useItem(2360002);//HOORAY <3\n+        } else {\n+                player.cancelEffect(2360002);\n+        }\n+}\n+\n+function changedLeader(eim, leader) {}\n+\n+function playerDead(eim, player) {}\n+\n+function playerRevive(eim, player) { // player presses ok on the death pop up.\n+        if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+                eim.unregisterPlayer(player);\n+                end(eim);\n+        }\n+        else\n+                eim.unregisterPlayer(player);\n+}\n+\n+function playerDisconnected(eim, player) {\n+        if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+                eim.unregisterPlayer(player);\n+                end(eim);\n+        }\n+        else\n+                eim.unregisterPlayer(player);\n+}\n+\n+function leftParty(eim, player) {}\n+\n+function disbandParty(eim) {}\n+\n+function monsterValue(eim, mobId) {\n+        return 1;\n+}\n+\n+function end(eim) {\n+        var party = eim.getPlayers();\n+        for (var i = 0; i < party.size(); i++) {\n+                playerExit(eim, party.get(i));\n+        }\n+        eim.dispose();\n+}\n+\n+function giveRandomEventReward(eim, player) {\n+        eim.giveEventReward(player);\n+}\n+\n+function clearPQ(eim) {\n+        eim.stopEventTimer();\n+        eim.setEventCleared();\n+        \n+        eim.schedule(\"spawnGrandpaBunny\", 10 * 1000);\n+}\n+\n+function spawnGrandpaBunny(eim) {\n+        eim.spawnNpc(9001105, new java.awt.Point(175, -20), eim.getInstanceMap(maxMapId));\n+}\n+\n+function monsterKilled(mob, eim) {}\n+\n+function allMonstersDead(eim) {}\n+\n+function cancelSchedule() {}\n+\n+function dispose(eim) {}"}, {"sha": "1e7fdab44a9811e72bf3238ecdd7bb45197905fa", "filename": "scripts/event/ZakumBattle.js", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/scripts/event/ZakumBattle.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/scripts/event/ZakumBattle.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/ZakumBattle.js?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -85,7 +85,9 @@ function setEventRewards(eim) {\n         eim.setEventClearStageMeso(mesoStages);\n }\n \n-function afterSetup(eim) {}\n+function afterSetup(eim) {\n+    em.getChannelServer().getMapFactory().getMap(211042300).getReactorById(2118002).forceHitReactor(1);\n+}\n \n function setup(channel) {\n     var eim = em.newInstance(\"Zakum\" + channel);\n@@ -188,6 +190,7 @@ function giveRandomEventReward(eim, player) {\n function clearPQ(eim) {\n     eim.stopEventTimer();\n     eim.setEventCleared();\n+    em.getChannelServer().getMapFactory().getMap(211042300).getReactorById(2118002).forceHitReactor(0);\n }\n \n function isZakum(mob) {\n@@ -209,4 +212,8 @@ function allMonstersDead(eim) {}\n \n function cancelSchedule() {}\n \n-function dispose(eim) {}\n+function dispose(eim) {\n+    if (!eim.isEventCleared()) {\n+        em.getChannelServer().getMapFactory().getMap(211042300).getReactorById(2118002).forceHitReactor(0);\n+    }\n+}"}, {"sha": "3ec7de09a7425e913a691c0dde86fdeff2f10074", "filename": "scripts/map/onFirstUserEnter/spaceGaGa_sMap.js", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/scripts/map/onFirstUserEnter/spaceGaGa_sMap.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/scripts/map/onFirstUserEnter/spaceGaGa_sMap.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/map/onFirstUserEnter/spaceGaGa_sMap.js?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -1,5 +1,4 @@\n function start(ms) { \n-        ms.getPlayer().resetEnteredScript(); \n-\tms.getPlayer().getMap().addMapTimer(180);\n+        ms.getPlayer().resetEnteredScript();\n \tms.spawnMonster(9300331, -28, 0);\n }  \n\\ No newline at end of file"}, {"sha": "57d476e830cf7298f521d057b49229bf7dc63272", "filename": "scripts/map/onFirstUserEnter/spaceGaGa_start.js", "status": "removed", "additions": 0, "deletions": 41, "changes": 41, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/a39a210c1f6993a8747ba43f160c5b8dbfe761f2/scripts/map/onFirstUserEnter/spaceGaGa_start.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/a39a210c1f6993a8747ba43f160c5b8dbfe761f2/scripts/map/onFirstUserEnter/spaceGaGa_start.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/map/onFirstUserEnter/spaceGaGa_start.js?ref=a39a210c1f6993a8747ba43f160c5b8dbfe761f2", "patch": "@@ -1,41 +0,0 @@\n-/*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n-\t\t       Matthias Butz <matze@odinms.de>\n-\t\t       Jan Christian Meyer <vimes@odinms.de>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License as\n-    published by the Free Software Foundation version 3 as published by\n-    the Free Software Foundation. You may not use, modify or distribute\n-    this program under any other version of the GNU Affero General Public\n-    License.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU Affero General Public License for more details.\n-\n-    You should have received a copy of the GNU Affero General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-*/\n-/*\n- *@Author:     kevintjuh93\n-*/\n-\n-importPackage(Packages.tools); \n-var player;\n-\n-function start(ms) { \n-\tplayer = ms.getPlayer();\n-        player.resetEnteredScript(); \n-        ms.getClient().announce(MaplePacketCreator.showEffect(\"event/space/start\")); \n-        player.startMapEffect(\"Please rescue Gaga within the time limit.\", 5120027); \n-\tvar map = player.getMap();\n-\tif (map.getTimeLeft() > 0) {\n-\t\tms.getClient().announce(MaplePacketCreator.getClock(map.getTimeLeft()));\n-\t} else {\n-\t\tmap.addMapTimer(180);\n-\t}\n-\tms.useItem(2360002);//HOORAY <3\n-}  \n\\ No newline at end of file"}, {"sha": "c5c20ae16184252fc387ce1691f023423e34e068", "filename": "scripts/npc/9000019.js", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/scripts/npc/9000019.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/scripts/npc/9000019.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9000019.js?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -0,0 +1,32 @@\n+var status;\n+ \n+function start() {\n+        status = -1;\n+        action(1, 0, 0);\n+}\n+\n+function action(mode, type, selection) {\n+        if (mode == -1) {\n+                cm.dispose();\n+        } else {\n+                if (mode == 0 && type > 0) {\n+                        cm.dispose();\n+                        return;\n+                }\n+                if (mode == 1)\n+                        status++;\n+                else\n+                        status--;\n+    \n+                if(status == 0) {\n+                        if(cm.getPlayer().getInventory(Packages.client.inventory.MapleInventoryType.ETC).getNumFreeSlot() < 1) {\n+                                cm.sendNext(\"Check for a available slot on your ETC inventory.\");\n+                                cm.dispose();\n+                                return;\n+                        }\n+                    \n+                        cm.getClient().announce(Packages.tools.MaplePacketCreator.openRPSNPC());\n+                        cm.dispose();\n+                }\n+        }\n+}\n\\ No newline at end of file"}, {"sha": "101c772a719cb9294e87601ce3133d2f1334b916", "filename": "scripts/npc/9001102.js", "status": "added", "additions": 54, "deletions": 0, "changes": 54, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/scripts/npc/9001102.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/scripts/npc/9001102.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9001102.js?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -0,0 +1,54 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/**\n+* @Author : iAkira, Kevintjuh93\n+**/\n+var status = 0; \n+var selected = 0;\n+\n+function start() {\n+\tif (cm.getPlayer().getMapId() == 100000000) {\n+\t\tcm.sendNext(\"There! Did you see that? You didn't? A UFO just passed... there!! Look, someone is getting dragged into the UFO... arrrrrrgh, it's Gaga! #rGaga just got kidnapped by a UFO!#k\");\n+\t}\n+}\n+\n+function action(m,t,s) { \n+\tif (m > 0) {\n+\t\tstatus++; \n+\t\tif (cm.getPlayer().getMapId() == 100000000) { // warper completed\n+\t\t\tif (status == 1) {\n+\t\t\t\tif (cm.getPlayer().getLevel() >= 12) \n+\t\t\t\t\tcm.sendYesNo(\"What do we do now? It's just a rumor yet, but... I've heard that scary things happen to you if you get kidnapped by aliens... may be that's what happenning to Gaga right now! Please, please rescue Gaga! \\r\\n #bGaga may be a bit indetermined and clueless, but#k he has a really good heart. I can't let something terrible happen to him. Right! Grandpa from the moon might know how to rescue him! I will send you to the moon, so please go meet Grandpa and rescue Gaga!!!\");\n+\t\t\t\telse \n+\t\t\t\t\tcm.sendOk(\"Oh! It seems you don't reach the level requirements to save Gaga. Please come back when you are level 12 or higher.\");\n+          \n+\t\t\t} else if (status == 2)\n+\t\t\t\tcm.sendNext(\"Thank you so much. Please rescue Gaga! Grandpa from the moon will help you.\");\n+\t\t\telse if (status == 3) {\n+\t\t\t\tcm.warp(922240200, 0); \n+\t\t\t\tcm.dispose();\n+\t\t\t}\n+\t\t}\n+\t} else if (m < 1) {\n+\t\tcm.dispose();\n+\t}\n+}\n\\ No newline at end of file"}, {"sha": "d648f068ee7f9770b64d30acd31babbce72ad6eb", "filename": "scripts/npc/9001105.js", "status": "added", "additions": 77, "deletions": 0, "changes": 77, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/scripts/npc/9001105.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/scripts/npc/9001105.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9001105.js?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -0,0 +1,77 @@\n+var status;\n+ \n+function start() {\n+        status = -1;\n+        action(1, 0, 0);\n+}\n+\n+function action(mode, type, selection) {\n+        if (mode == -1) {\n+                cm.dispose();\n+        } else {\n+                if (mode == 0 && type > 0) {\n+                        if (cm.getPlayer().getMapId() == 922240200)  {\n+                                cm.sendOk(\"That's a shame, come back when your ready.\");\n+                        }\n+                        \n+                        cm.dispose();\n+                        return;\n+                }\n+                if (mode == 1)\n+                        status++;\n+                else\n+                        status--;\n+    \n+                if(status == 0) {\n+                        if (cm.getMapId() == 922240200) {\n+                                cm.sendSimple(\"Did you have something to say...? #b\\b\\r\\n#L0#I want to rescue Gaga.#l\\r\\n\");    //#L1#I want to go to the Space Mine.#l\n+                        } else if (cm.getMapId() >= 922240000 && cm.getMapId() <= 922240019) {\n+                                cm.sendYesNo(\"Don't worry if you fail. You'll have 3 chances. Do you still want to give up?\"); \n+                        } else if (cm.getMapId() >= 922240100 && cm.getMapId() <= 922240119) {\n+                                var text = \"You went through so much trouble to rescue Gaga, but it looks like we're back to square one. \";\t\t\t\t\n+                                var rgaga = cm.getPlayer().getEvents().get(\"rescueGaga\");\n+                                if (rgaga.getCompleted() > 10) {\n+                                        text += \"Please don't give up until Gaga is rescued. To show you my appreciation for what you've accomplished thus far, I've given you a Spaceship. It's rather worn out, but it should still be operational. Check your #bSkill Window#k.\";\n+                                        rgaga.giveSkill(cm.getPlayer());\n+                                } else \n+                                        text += \"Let's go back now.\";\n+\n+                                cm.sendNext(text); \n+                        }\n+                } else {\n+                        if (cm.getPlayer().getMapId() == 922240200) {\n+                                if (status == 1) {\n+                                        if(selection == 0) {\n+                                                selected = 1;\n+                                                cm.sendNext(\"Welcome! I heard what happened from Baby Moon Bunny I'm glad you came since I was Planning on requesting some help. Gaga is a friend of mine who has helped me before and often stops by to say hello. Unfortunately, he was kidnapped by aliens.\"); \n+                                        } else {\n+                                                selected = 2;\n+                                                cm.sendYesNo(\"At the Space Mine, you can find special ores called #bKrypto Crystals#k that contains the mysterious power of space. #bKrypto Crystals#l are usually emerald in color, but will turn brown if hit with the Spaceship's #bSpace Beam#k. Remember, in order to thwart this alien conspracy, #b10 Brown Krypto Crystal's and 10 Emerald Krypto Crystal's are needed. But since even #b1 Krypto Crystal#k can be of help, brign me as many as possible. Oh, and one more thing! The Space Mines are protected by the Space Mateons. They are extemely strong due to the power of the #Krypto Crystals#k, so don't try to defeat them. Simply concentrate on quickly collecting the crystals.\"); \n+                                        } \n+                                } else if (status == 2) {\n+                                        if(selected == 1) {\n+                                                cm.sendYesNo(\"If we just leave Gaga with the aliens, something terrible will happen to him! I'll let you borrow a spaceship that the Moon Bunnies use for traveling so that you can rescue Gaga.#b Although he might appear a bit indecisive, slow, and immature at times#k, he's really a nice young man. Do you want to go rescue him now?\");\n+                                        } else if(selected == 2) { \n+                                                cm.sendOk(\"Not coded yet, f4.\"); \n+                                                cm.dispose();\n+                                        }\n+                                } else if (status == 3) {\n+                                        var em = cm.getEventManager(\"RescueGaga\");\n+                                        if (em == null) {\n+                                                cm.sendOk(\"This event is currently unavailable.\");\n+                                        } else if (!em.startInstance(cm.getPlayer())) {\n+                                                cm.sendOk(\"There is currently someone in this map, come back later.\");\n+                                        }\n+                                        \n+                                        cm.dispose();\n+                                }\n+                        } else if (cm.getPlayer().getMapId() >= 922240000 && cm.getPlayer().getMapId() <= 922240019) {\n+                                cm.warp(922240200, 0);\n+                                cm.dispose();\n+                        } else if (cm.getPlayer().getMapId() >= 922240100 && cm.getPlayer().getMapId() <= 922240119) {\n+                                cm.warp(922240200, 0);\n+                                cm.dispose();\n+                        }\n+                }\n+        }\n+}\n\\ No newline at end of file"}, {"sha": "cf56b21f87ea9920a9b2b502854fdbd95e4ff183", "filename": "scripts/npc/9001108.js", "status": "removed", "additions": 0, "deletions": 108, "changes": 108, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/a39a210c1f6993a8747ba43f160c5b8dbfe761f2/scripts/npc/9001108.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/a39a210c1f6993a8747ba43f160c5b8dbfe761f2/scripts/npc/9001108.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9001108.js?ref=a39a210c1f6993a8747ba43f160c5b8dbfe761f2", "patch": "@@ -1,108 +0,0 @@\n-/*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n-\t\t       Matthias Butz <matze@odinms.de>\n-\t\t       Jan Christian Meyer <vimes@odinms.de>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License as\n-    published by the Free Software Foundation version 3 as published by\n-    the Free Software Foundation. You may not use, modify or distribute\n-    this program under any other version of the GNU Affero General Public\n-    License.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU Affero General Public License for more details.\n-\n-    You should have received a copy of the GNU Affero General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-*/\n-/**\n-* @Author : iAkira, Kevintjuh93\n-**/\n-var status = 0; \n-var selected = 0;\n-\n-function start() {\n-\tif (cm.getPlayer().getMapId() == 100000000) {\n-\t\tcm.sendNext(\"There! Did you see that? You didn't? A UFO  just passed... there!! Look, someone is getting dragged into the UFO... arrrrrrgh, it's Gaga! #rGaga just got kidnapped by a UFO!#k\");\n-\t} else if (cm.getPlayer().getMapId() == 922240200) {\n-\t\tcm.sendSimple(\"Did you have something to say...? #b\\b\\r\\n#L0#I want to rescue Gaga.#l\\r\\n#L1#I want to go to the Space Mine.#l\");\n-\t} else if (cm.getPlayer().getMapId() >= 922240000 && cm.getPlayer().getMapId() <= 922240019) {\n-\t\tcm.sendYesNo(\"Don't worry if you fail. You'll have 3 chances. Do you still want to give up?\"); \n-\t} else if (cm.getPlayer().getMapId() >= 922240100 && cm.getPlayer().getMapId() <= 922240119) {\n-\t\tvar text = \"You went through so much trouble to rescue Gaga, but it looks like we're back to square one. \";\t\t\t\t\n-\t\tvar rgaga = cm.getPlayer().getEvents().get(\"rescueGaga\");\n-\t\tif (rgaga.getCompleted() == 10 || rgaga.getCompleted() == 20) {\n-\t\t\ttext += \"Please don't give up untill Gaga is rescued. To show you my appreciation for what you've accomplished thus far, I've given you a Spaceship. It's rather worn out, but it should still be operational. Check your #bSkill Window#k.\";\n-\t\t\trgaga.giveSkill(cm.getPlayer());\n-\t\t} else \n-\t\t\ttext += \"Let's go back now.\";\n-\t\t\t\t\t\n-\t\tcm.sendNext(text); \n-\t}\n-}\n-\n-function action(m,t,s) { \n-\tif (m > 0) {\n-\t\tstatus++; \n-\t\tif (cm.getPlayer().getMapId() == 100000000) { // warper completed\n-\t\t\tif (status == 1) {\n-\t\t\t\tif (cm.getPlayer().getLevel() >= 12) \n-\t\t\t\t\tcm.sendYesNo(\"What do we do now? It's just a rumor yet, but... I've heard that scary things happen to you if you get kidnapped by aliens... may be that's what happenning to Gaga right now! Please, please rescue Gaga! \\r\\n #bGaga may be a bit indetermined and clueless, but#k he has a really good heart. I can't let something terrible happen to him. Right! Grandpa from the moon might know how to rescue him! I will send you to the moon, so please go meet Grandpa and rescue Gaga\");\n-\t\t\t\telse \n-\t\t\t\t\tcm.sendOk(\"Oh! it seems you don't reach the level requirements to save Gaga. Please come back when you are level 12 or higher.\");\n-          \n-\t\t\t} else if (status == 2)\n-\t\t\t\tcm.sendNext(\"Thank you so much. Please rescue Gaga! Grandpa from the moon will help you.\");\n-\t\t\telse if (status == 3) {\n-\t\t\t\tcm.warp(922240200, 0); \n-\t\t\t\tcm.dispose();\n-\t\t\t}\n-\t\t} else if (cm.getPlayer().getMapId() == 922240200) {\n-\t\t\tif (status == 1) {\n-\t\t\t\tif(s == 0) {\n-\t\t\t\t\tselected = 1;\n-\t\t\t\t\tcm.sendNext(\"Welcome! I heard what happened from Baby Moon Bunny I'm glad you came since I was Planning on requesting some help. Gaga is a friend of mine who has helped me before and often stops by to say hello. Unfortunaley, he was kidnapped by aliens.\"); \n-\t\t\t\t} else {\n-\t\t\t\t\tselected = 2;\n-\t\t\t\t\tcm.sendYesNo(\"At the Space Mine, you can find special ores called #bKrypto Crystals#k that contains the mysterious power of space. #bKrypto Crystals#l are usually emerald in color, but will turn brown if hit with the Spaceship's #bSpace Beam#k. Remember, in order to thwart this alien conspracy, #b10 Brown Krypto Crystal's and 10 Emerald Krypto Crystal's are needed. But since even #b1 Krypto Crystal#k can be of help, brign me as many as possible. Oh, and one more thing! The Space Mines are protected by the Space Mateons. They are extemely strong due to the power of the #Krypto Crystals#k, so don't try to defeat them. Simply concentrate on quickly collecting the crystals.\"); \n-\t\t\t\t} \n-\t\t\t} else if (status == 2) {\n-\t\t\t\tif(selected == 1) {\n-\t\t\t\t\tcm.sendYesNo(\"If we just leave Gaga with the aliens, something terrible will happen to him! I'll let you borrow a spaceship that the Moon Bunnies use for traveling so that you can rescue Gaga.#b Although he might appear a bit indecieve, slow, and immature at times#k, he's really a nice young man. Do you want to go rescue him now?\");\n-\t\t\t\t} else if(selected == 2) { \n-\t\t\t\t\tcm.sendOk(\"Not coded yet, f4.\"); \n-\t\t\t\t\tcm.dispose();\n-\t\t\t\t}\n-\t\t\t} else  if (status == 3) {\n-\t\t\t\tvar number = -1;\n-\t\t\t\tfor (var i = 0; i < 20; i++) {\n-\t\t\t\t\tvar mapFactory = cm.getClient().getChannelServer().getMapFactory();\n-\t\t\t\t\tif (mapFactory.getMap(922240000 + i).getCharacters().isEmpty()) {\n-\t\t\t\t\t\tnumber = i;\n-\t\t\t\t\t\tbreak;\n-\t\t\t\t\t}\t    \n-\t\t\t\t}\n-\t\t\t\tif (number > -1) \n-\t\t\t\t\tcm.warp(922240000 + number);\n-\t\t\t\telse \n-\t\t\t\t\tcm.sendOk(\"There are currently no empty maps, please try again later.\");\n-\t\t\t\t\n-\t\t\t\tcm.dispose();\n-\t\t\t}\n-\t\t} else if ((cm.getPlayer().getMapId() >= 922240000 && cm.getPlayer().getMapId() <= 922240019) || (cm.getPlayer().getMapId() >= 922240100 && cm.getPlayer().getMapId() <= 922240119)) {\n-\t\t\tcm.warp(922240200, 0);\n-\t\t\tcm.dispose();\n-\t\t}\n-\t} else if (m < 1) {\n-\t\tif(m == 0) {\n-\t\t\tif (cm.getPlayer().getMapId() == 922240200)  {\n-\t\t\t\tcm.sendOk(\"That's a shame, come back when your ready.\");\n-\t\t\t}\n-\t\t}\n-\t\tcm.dispose();\n-\t}\n-}\n\\ No newline at end of file"}, {"sha": "06a5f714a5e72cb837cf8f1bee7c3bb3eca3ca5c", "filename": "scripts/npc/9977777.js", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/scripts/npc/9977777.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/scripts/npc/9977777.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9977777.js?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -43,6 +43,7 @@ function writeFeatureTab_PQs() {\n         addFeature(\"RnJPQ/HorntailPQ/TreasurePQ/ElnathPQ/HolidayPQ.\");\n         addFeature(\"CWKPQ as Expedition-based instance.\");\n         addFeature(\"Scarga/Horntail/Showa/Balrog/Zakum/Pinkbean.\");\n+        addFeature(\"Expeditions with entry-limit system available.\");\n         addFeature(\"GuildPQ & queue with multi-lobby system available.\");\n         addFeature(\"Brand-new PQs: BossRushPQ, CafePQ.\");\n         addFeature(\"Mu Lung Dojo.\");\n@@ -57,7 +58,7 @@ function writeFeatureTab_Skills() {\n         addFeature(\"Reviewed many skills, such as Steal and M. Door.\");\n         addFeature(\"Heal GMS-like: fixed HP gain & Heal skill packet.\");\n         addFeature(\"Improved battleship: HP visible and map-persistent.\");\n-        addFeature(\"Maker skill features properly developed.\");\n+        addFeature(\"Maker skill features developed - pckts thanks Arnah.\");\n         addFeature(\"Chair Mastery - map chair boosts HP/MP rec.\");\n         addFeature(\"Mu Lung Dojo skills functional.\");\n         addFeature(\"Monster Magnet skill no longer crashes players.\");\n@@ -185,6 +186,7 @@ function writeFeatureTab_Playerpotentials() {\n         addFeature(\"Optional cash shop inventory separated by classes.\");\n         addFeature(\"Players manage 'same-typed' invites exclusively.\");\n         addFeature(\"Player buffs with conditional active effects.\");\n+        addFeature(\"Rock-paper-scissors minigame - thanks Arnah!\");\n }\n \n function writeFeatureTab_Serverpotentials() {"}, {"sha": "8a89b22737d4c7e192e78915ce93a00b0a70a74b", "filename": "scripts/portal/Spacegaga_out0.js", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/scripts/portal/Spacegaga_out0.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/scripts/portal/Spacegaga_out0.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/Spacegaga_out0.js?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -1,11 +1,15 @@\n //Author: kevintjuh93\n \n function enter(pi) {  \n-\tif (pi.getPlayer().getEvents().get(\"rescueGaga\").fallAndGet() > 3) {\n-\t    pi.playPortalSound(); pi.warp(922240200, 0);\n-\t    pi.getPlayer().cancelEffect(2360002);\n-\t} else\n+        var eim = pi.getPlayer().getEventInstance();\n+\tvar fc = eim.getIntProperty(\"falls\");\n+        \n+        if (fc >= 3) {\n+            pi.playPortalSound(); pi.warp(922240200, 0);\n+\t} else {\n+            eim.setIntProperty(\"falls\", fc + 1);\n \t    pi.playPortalSound(); pi.warp(pi.getPlayer().getMapId(), 0);\n+        }\n \n \treturn true;\n }\n\\ No newline at end of file"}, {"sha": "e27fdabbd60979ee3d4ae53b0488661738c7ebbf", "filename": "scripts/portal/Spacegaga_out1.js", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/scripts/portal/Spacegaga_out1.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/scripts/portal/Spacegaga_out1.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/Spacegaga_out1.js?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -1,11 +1,15 @@\n //Author: kevintjuh93\n \n function enter(pi) {  \n-\tif (pi.getPlayer().getEvents().get(\"rescueGaga\").fallAndGet() > 3) {\n-\t    pi.playPortalSound(); pi.warp(922240200, 0);\n-\t    pi.getPlayer().cancelEffect(2360002);\n-\t} else\n+\tvar eim = pi.getPlayer().getEventInstance();\n+\tvar fc = eim.getIntProperty(\"falls\");\n+        \n+        if (fc >= 3) {\n+            pi.playPortalSound(); pi.warp(922240200, 0);\n+\t} else {\n+            eim.setIntProperty(\"falls\", fc + 1);\n \t    pi.playPortalSound(); pi.warp(pi.getPlayer().getMapId(), 0);\n+        }\n \n \treturn true;\n }\n\\ No newline at end of file"}, {"sha": "e27fdabbd60979ee3d4ae53b0488661738c7ebbf", "filename": "scripts/portal/Spacegaga_out2.js", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/scripts/portal/Spacegaga_out2.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/scripts/portal/Spacegaga_out2.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/Spacegaga_out2.js?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -1,11 +1,15 @@\n //Author: kevintjuh93\n \n function enter(pi) {  \n-\tif (pi.getPlayer().getEvents().get(\"rescueGaga\").fallAndGet() > 3) {\n-\t    pi.playPortalSound(); pi.warp(922240200, 0);\n-\t    pi.getPlayer().cancelEffect(2360002);\n-\t} else\n+\tvar eim = pi.getPlayer().getEventInstance();\n+\tvar fc = eim.getIntProperty(\"falls\");\n+        \n+        if (fc >= 3) {\n+            pi.playPortalSound(); pi.warp(922240200, 0);\n+\t} else {\n+            eim.setIntProperty(\"falls\", fc + 1);\n \t    pi.playPortalSound(); pi.warp(pi.getPlayer().getMapId(), 0);\n+        }\n \n \treturn true;\n }\n\\ No newline at end of file"}, {"sha": "8a89b22737d4c7e192e78915ce93a00b0a70a74b", "filename": "scripts/portal/Spacegaga_out3.js", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/scripts/portal/Spacegaga_out3.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/scripts/portal/Spacegaga_out3.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/Spacegaga_out3.js?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -1,11 +1,15 @@\n //Author: kevintjuh93\n \n function enter(pi) {  \n-\tif (pi.getPlayer().getEvents().get(\"rescueGaga\").fallAndGet() > 3) {\n-\t    pi.playPortalSound(); pi.warp(922240200, 0);\n-\t    pi.getPlayer().cancelEffect(2360002);\n-\t} else\n+        var eim = pi.getPlayer().getEventInstance();\n+\tvar fc = eim.getIntProperty(\"falls\");\n+        \n+        if (fc >= 3) {\n+            pi.playPortalSound(); pi.warp(922240200, 0);\n+\t} else {\n+            eim.setIntProperty(\"falls\", fc + 1);\n \t    pi.playPortalSound(); pi.warp(pi.getPlayer().getMapId(), 0);\n+        }\n \n \treturn true;\n }\n\\ No newline at end of file"}, {"sha": "b23f2495a4a703399fbddf9d27d5cfe462bf4ded", "filename": "scripts/portal/Zakum05.js", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/scripts/portal/Zakum05.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/scripts/portal/Zakum05.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/Zakum05.js?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -34,6 +34,17 @@ function enter(pi) {\n         return false;\n     }\n     \n+    if (!pi.haveItem(4001017)) {    // thanks Conrad for pointing out missing checks for token item and unused reactor\n+        pi.getPlayer().dropMessage(5,\"You do not have the Eye of Fire. You may not face the boss.\");\n+        return false;\n+    }\n+    \n+    var react = pi.getMap().getReactorById(2118002);\n+    if (react != null && react.getState() > 0) {\n+        pi.getPlayer().dropMessage(5,\"The entrance is currently blocked.\");\n+        return false;\n+    }\n+    \n     pi.playPortalSound(); pi.warp(211042400,\"west00\");\n     return true;\n }\n\\ No newline at end of file"}, {"sha": "cd6b93d9f9e7c4ae2a670f492cf63bf6bf9b917e", "filename": "scripts/portal/gaga_success.js", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/scripts/portal/gaga_success.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/scripts/portal/gaga_success.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/gaga_success.js?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -1,8 +1,6 @@\n //Author: kevintjuh93\n \n function enter(pi) {  \n-\tpi.getPlayer().getEvents().get(\"rescueGaga\").complete();\n \tpi.playPortalSound(); pi.warp(922240100 + (pi.getPlayer().getMapId() - 922240000));\n-\tpi.getPlayer().cancelEffect(2360002);\n \treturn true;\n }  \n\\ No newline at end of file"}, {"sha": "2a61cf7e54164eb9a86d2cd4098a241a385451ba", "filename": "sql/db_database.sql", "status": "modified", "additions": 54, "deletions": 32, "changes": 86, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/sql/db_database.sql", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/sql/db_database.sql", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/sql/db_database.sql?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -80,6 +80,22 @@ CREATE TABLE IF NOT EXISTS `area_info` (\n   PRIMARY KEY (`id`)\n ) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;\n \n+CREATE TABLE IF NOT EXISTS `bosslog_daily` (\n+  `id` int(11) NOT NULL AUTO_INCREMENT,\n+  `characterid` int(11) NOT NULL,\n+  `bosstype` enum('ZAKUM','HORNTAIL','PINKBEAN','SCARGA','PAPULATUS') NOT NULL,\n+  `attempttime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n+  PRIMARY KEY (`id`)\n+) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;\n+\n+CREATE TABLE IF NOT EXISTS `bosslog_weekly` (\n+  `id` int(11) NOT NULL AUTO_INCREMENT,\n+  `characterid` int(11) NOT NULL,\n+  `bosstype` enum('ZAKUM','HORNTAIL','PINKBEAN','SCARGA','PAPULATUS') NOT NULL,\n+  `attempttime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n+  PRIMARY KEY (`id`)\n+) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;\n+\n CREATE TABLE IF NOT EXISTS `bbs_replies` (\n   `replyid` int(10) unsigned NOT NULL AUTO_INCREMENT,\n   `threadid` int(10) unsigned NOT NULL,\n@@ -13032,36 +13048,36 @@ INSERT IGNORE INTO `makercreatedata` (`id`, `itemid`, `req_level`, `req_maker_le\n   (0, 4250900, 45, 1, 110000, 0, 0, 0, 1, 0),\n   (0, 4251000, 45, 1, 110000, 0, 0, 0, 1, 0),\n   (0, 4251100, 45, 1, 110000, 0, 0, 0, 1, 0),\n-  (0, 4251300, 75, 2, 164000, 0, 0, 0, 1, 0),\n-  (0, 4251400, 75, 2, 164000, 0, 0, 0, 1, 0),\n-  (0, 4250001, 45, 1, 328000, 0, 0, 0, 1, 0),\n-  (0, 4250101, 45, 1, 328000, 0, 0, 0, 1, 0),\n-  (0, 4250201, 45, 1, 328000, 0, 0, 0, 1, 0),\n-  (0, 4250301, 45, 1, 328000, 0, 0, 0, 1, 0),\n-  (0, 4250401, 45, 1, 328000, 0, 0, 0, 1, 0),\n-  (0, 4250501, 45, 1, 328000, 0, 0, 0, 1, 0),\n-  (0, 4250601, 45, 1, 328000, 0, 0, 0, 1, 0),\n-  (0, 4250701, 45, 1, 328000, 0, 0, 0, 1, 0),\n-  (0, 4250801, 45, 1, 328000, 0, 0, 0, 1, 0),\n-  (0, 4250901, 45, 1, 328000, 0, 0, 0, 1, 0),\n-  (0, 4251001, 45, 1, 328000, 0, 0, 0, 1, 0),\n-  (0, 4251101, 45, 1, 328000, 0, 0, 0, 1, 0),\n-  (0, 4251301, 75, 2, 491000, 0, 0, 0, 1, 0),\n-  (0, 4251401, 75, 2, 491000, 0, 0, 0, 1, 0),\n-  (0, 4250002, 45, 2, 546000, 0, 0, 0, 1, 0),\n-  (0, 4250102, 45, 2, 546000, 0, 0, 0, 1, 0),\n-  (0, 4250202, 45, 2, 546000, 0, 0, 0, 1, 0),\n-  (0, 4250302, 45, 2, 546000, 0, 0, 0, 1, 0),\n-  (0, 4250402, 45, 2, 546000, 0, 0, 0, 1, 0),\n-  (0, 4250502, 45, 2, 546000, 0, 0, 0, 1, 0),\n-  (0, 4250602, 45, 2, 546000, 0, 0, 0, 1, 0),\n-  (0, 4250702, 45, 2, 546000, 0, 0, 0, 1, 0),\n-  (0, 4250802, 45, 2, 546000, 0, 0, 0, 1, 0),\n-  (0, 4250902, 45, 2, 546000, 0, 0, 0, 1, 0),\n-  (0, 4251002, 45, 2, 546000, 0, 0, 0, 1, 0),\n-  (0, 4251102, 45, 2, 546000, 0, 0, 0, 1, 0),\n-  (0, 4251302, 75, 3, 819000, 0, 0, 0, 1, 0),\n-  (0, 4251402, 75, 3, 819000, 0, 0, 0, 1, 0),\n+  (0, 4251300, 75, 2, 165000, 0, 0, 0, 1, 0),\n+  (0, 4251400, 75, 2, 165000, 0, 0, 0, 1, 0),\n+  (0, 4250001, 45, 1, 330000, 0, 0, 0, 1, 0),\n+  (0, 4250101, 45, 1, 330000, 0, 0, 0, 1, 0),\n+  (0, 4250201, 45, 1, 330000, 0, 0, 0, 1, 0),\n+  (0, 4250301, 45, 1, 330000, 0, 0, 0, 1, 0),\n+  (0, 4250401, 45, 1, 330000, 0, 0, 0, 1, 0),\n+  (0, 4250501, 45, 1, 330000, 0, 0, 0, 1, 0),\n+  (0, 4250601, 45, 1, 330000, 0, 0, 0, 1, 0),\n+  (0, 4250701, 45, 1, 330000, 0, 0, 0, 1, 0),\n+  (0, 4250801, 45, 1, 330000, 0, 0, 0, 1, 0),\n+  (0, 4250901, 45, 1, 330000, 0, 0, 0, 1, 0),\n+  (0, 4251001, 45, 1, 330000, 0, 0, 0, 1, 0),\n+  (0, 4251101, 45, 1, 330000, 0, 0, 0, 1, 0),\n+  (0, 4251301, 75, 2, 495000, 0, 0, 0, 1, 0),\n+  (0, 4251401, 75, 2, 495000, 0, 0, 0, 1, 0),\n+  (0, 4250002, 45, 2, 550000, 0, 0, 0, 1, 0),\n+  (0, 4250102, 45, 2, 550000, 0, 0, 0, 1, 0),\n+  (0, 4250202, 45, 2, 550000, 0, 0, 0, 1, 0),\n+  (0, 4250302, 45, 2, 550000, 0, 0, 0, 1, 0),\n+  (0, 4250402, 45, 2, 550000, 0, 0, 0, 1, 0),\n+  (0, 4250502, 45, 2, 550000, 0, 0, 0, 1, 0),\n+  (0, 4250602, 45, 2, 550000, 0, 0, 0, 1, 0),\n+  (0, 4250702, 45, 2, 550000, 0, 0, 0, 1, 0),\n+  (0, 4250802, 45, 2, 550000, 0, 0, 0, 1, 0),\n+  (0, 4250902, 45, 2, 550000, 0, 0, 0, 1, 0),\n+  (0, 4251002, 45, 2, 550000, 0, 0, 0, 1, 0),\n+  (0, 4251102, 45, 2, 550000, 0, 0, 0, 1, 0),\n+  (0, 4251302, 75, 3, 825000, 0, 0, 0, 1, 0),\n+  (0, 4251402, 75, 3, 825000, 0, 0, 0, 1, 0),\n   (0, 4001174, 45, 1, 0, 4031966, 0, 0, 1, 0),\n   (0, 4001175, 50, 1, 0, 4031967, 0, 0, 1, 0),\n   (0, 4001176, 55, 1, 0, 4031968, 0, 0, 10, 0),\n@@ -13080,6 +13096,8 @@ INSERT IGNORE INTO `makercreatedata` (`id`, `itemid`, `req_level`, `req_maker_le\n   (0, 4032312, 70, 1, 0, 0, 0, 0, 1, 0),\n   (0, 2041058, 50, 1, 55000, 0, 1122013, 0, 1, 0),\n   (0, 2040727, 50, 1, 55000, 0, 1122013, 0, 1, 0),\n+  (0, 4260007, 105, 3, 2200000, 4001126, 0, 0, 5, 0),\n+  (0, 4260008, 105, 3, 5500000, 4001126, 0, 0, 10, 0),\n   (1, 1002028, 45, 1, 55000, 0, 0, 4130018, 1, 1),\n   (1, 1002085, 45, 1, 50000, 0, 0, 4130018, 1, 1),\n   (1, 1002086, 45, 1, 41000, 0, 0, 4130018, 1, 1),\n@@ -13963,6 +13981,10 @@ INSERT IGNORE INTO `makerrecipedata` (`itemid`, `req_item`, `count`) VALUES\n   (2041058, 4000299, 10),\n   (2040727, 4000159, 50),\n   (2040727, 4000299, 10),\n+  (4260007, 4260006, 100),\n+  (4260007, 4001126, 5),\n+  (4260008, 4260007, 50),\n+  (4260008, 4001126, 5),\n   (1002028, 4007001, 5),\n   (1002028, 4260000, 5),\n   (1002085, 4007002, 5),\n@@ -14808,7 +14830,7 @@ INSERT IGNORE INTO `makerrecipedata` (`itemid`, `req_item`, `count`) VALUES\n   (1372016, 4011002, 3),\n   (1372016, 4260003, 26),\n   (1382008, 4011002, 3),\n-  (1382008, 4260003, 26),\n+  (1382008, 4260004, 26),\n   (1372009, 4011002, 4),\n   (1372009, 4260004, 28),\n   (1382035, 4011002, 4),\n@@ -15450,7 +15472,7 @@ INSERT IGNORE INTO `makerrecipedata` (`itemid`, `req_item`, `count`) VALUES\n   (1072194, 4260004, 9),\n   (1072195, 4007006, 9),\n   (1072195, 4260004, 9),\n-  (1072213, 4007001, 10),\n+  (1072213, 4007003, 10),\n   (1072213, 4260005, 10),\n   (1072214, 4007002, 10),\n   (1072214, 4260005, 10),"}, {"sha": "bb1ff0cb4406ad1440d14373c6571c1ebb422f16", "filename": "sql/db_drops.sql", "status": "modified", "additions": 592, "deletions": 591, "changes": 1183, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/sql/db_drops.sql", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/sql/db_drops.sql", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/sql/db_drops.sql?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -23926,527 +23926,528 @@ SET minimum_quantity = CASE\n   UPDATE drop_data SET `chance`=1287 WHERE `chance`=1500;\n \n   # MapleSkillbookChanceFetcher! Tuning up some skillbook drop chances in order to fit their dropper's availability (whether's a boss or not) and level.\n+  # thanks unnqca for reporting some skillbooks having unusually high drop chances.\n   REPLACE INTO drop_data (`dropperid`, `itemid`, `minimum_quantity`, `maximum_quantity`, `questid`, `chance`) VALUES\n (851000, 2290132, 1, 1, 0, 3861),\n-(7090000, 2290087, 1, 1, 0, 40000),\n-(8090000, 2290045, 1, 1, 0, 40000),\n-(8140103, 2290044, 1, 1, 0, 2000),\n-(8140511, 2290009, 1, 1, 0, 2000),\n-(8140511, 2290050, 1, 1, 0, 2000),\n-(8140511, 2290083, 1, 1, 0, 2000),\n-(8140511, 2290134, 1, 1, 0, 6000),\n-(8140512, 2290013, 1, 1, 0, 2000),\n-(8140512, 2290067, 1, 1, 0, 2000),\n-(8140512, 2290082, 1, 1, 0, 2000),\n-(8140512, 2290097, 1, 1, 0, 2000),\n-(8140512, 2290116, 1, 1, 0, 2000),\n-(8140512, 2290131, 1, 1, 0, 6000),\n-(8140600, 2290132, 1, 1, 0, 6000),\n-(8140700, 2290106, 1, 1, 0, 2000),\n-(8140700, 2290126, 1, 1, 0, 6000),\n-(8140701, 2290122, 1, 1, 0, 2000),\n-(8140702, 2290112, 1, 1, 0, 2000),\n-(8140703, 2290088, 1, 1, 0, 2000),\n-(8140703, 2290099, 1, 1, 0, 2000),\n-(8141000, 2290082, 1, 1, 0, 2000),\n-(8141000, 2290097, 1, 1, 0, 2000),\n-(8141100, 2280005, 1, 1, 0, 2000),\n-(8141300, 2290098, 1, 1, 0, 2000),\n-(8142100, 2290032, 1, 1, 0, 2000),\n-(8142100, 2290082, 1, 1, 0, 2000),\n-(8142100, 2290114, 1, 1, 0, 2000),\n-(8143000, 2280004, 1, 1, 0, 2000),\n-(8150000, 2280013, 1, 1, 0, 120000),\n-(8150000, 2290070, 1, 1, 0, 40000),\n-(8150000, 2290091, 1, 1, 0, 40000),\n-(8150100, 2290042, 1, 1, 0, 2000),\n-(8150100, 2290053, 1, 1, 0, 2000),\n-(8150100, 2290073, 1, 1, 0, 2000),\n-(8150100, 2290102, 1, 1, 0, 2000),\n-(8150100, 2290118, 1, 1, 0, 2000),\n-(8150101, 2290017, 1, 1, 0, 2000),\n-(8150101, 2290021, 1, 1, 0, 2000),\n-(8150101, 2290035, 1, 1, 0, 2000),\n-(8150101, 2290042, 1, 1, 0, 2000),\n-(8150101, 2290052, 1, 1, 0, 2000),\n-(8150101, 2290102, 1, 1, 0, 2000),\n-(8150200, 2290024, 1, 1, 0, 2000),\n-(8150200, 2290100, 1, 1, 0, 2000),\n-(8150200, 2290135, 1, 1, 0, 6000),\n-(8150201, 2290004, 1, 1, 0, 2000),\n-(8150201, 2290006, 1, 1, 0, 2000),\n-(8150201, 2290024, 1, 1, 0, 2000),\n-(8150201, 2290036, 1, 1, 0, 2000),\n-(8150201, 2290056, 1, 1, 0, 2000),\n-(8150201, 2290072, 1, 1, 0, 2000),\n-(8150201, 2290078, 1, 1, 0, 2000),\n-(8150201, 2290117, 1, 1, 0, 2000),\n-(8150300, 2290003, 1, 1, 0, 2000),\n-(8150300, 2290033, 1, 1, 0, 2000),\n-(8150300, 2290111, 1, 1, 0, 2000),\n-(8150300, 2290120, 1, 1, 0, 2000),\n-(8150300, 2290127, 1, 1, 0, 6000),\n-(8150301, 2290023, 1, 1, 0, 2000),\n-(8150301, 2290029, 1, 1, 0, 2000),\n-(8150301, 2290101, 1, 1, 0, 2000),\n-(8150301, 2290107, 1, 1, 0, 2000),\n-(8150302, 2290010, 1, 1, 0, 2000),\n-(8150302, 2290019, 1, 1, 0, 2000),\n-(8150302, 2290026, 1, 1, 0, 2000),\n-(8150302, 2290076, 1, 1, 0, 2000),\n-(8150302, 2290085, 1, 1, 0, 2000),\n-(8150302, 2290096, 1, 1, 0, 2000),\n-(8150302, 2290113, 1, 1, 0, 2000),\n-(8150302, 2290119, 1, 1, 0, 2000),\n-(8150302, 2290128, 1, 1, 0, 6000),\n-(8160000, 2290017, 1, 1, 0, 2000),\n-(8160000, 2290045, 1, 1, 0, 2000),\n-(8160000, 2290065, 1, 1, 0, 2000),\n-(8160000, 2290067, 1, 1, 0, 2000),\n-(8160000, 2290081, 1, 1, 0, 2000),\n-(8170000, 2290012, 1, 1, 0, 2000),\n-(8170000, 2290086, 1, 1, 0, 2000),\n-(8170000, 2290087, 1, 1, 0, 2000),\n-(8170000, 2290134, 1, 1, 0, 6000),\n-(8180000, 2290002, 1, 1, 0, 40000),\n-(8180000, 2290003, 1, 1, 0, 40000),\n-(8180000, 2290014, 1, 1, 0, 40000),\n-(8180000, 2290015, 1, 1, 0, 40000),\n-(8180000, 2290030, 1, 1, 0, 40000),\n-(8180000, 2290035, 1, 1, 0, 40000),\n-(8180000, 2290036, 1, 1, 0, 40000),\n-(8180000, 2290063, 1, 1, 0, 40000),\n-(8180000, 2290080, 1, 1, 0, 40000),\n-(8180000, 2290098, 1, 1, 0, 40000),\n-(8180000, 2290101, 1, 1, 0, 40000),\n-(8180000, 2290117, 1, 1, 0, 40000),\n-(8180000, 2290130, 1, 1, 0, 120000),\n-(8180001, 2290018, 1, 1, 0, 40000),\n-(8180001, 2290019, 1, 1, 0, 40000),\n-(8180001, 2290032, 1, 1, 0, 40000),\n-(8180001, 2290042, 1, 1, 0, 40000),\n-(8180001, 2290058, 1, 1, 0, 40000),\n-(8180001, 2290059, 1, 1, 0, 40000),\n-(8180001, 2290068, 1, 1, 0, 40000),\n-(8180001, 2290069, 1, 1, 0, 40000),\n-(8180001, 2290072, 1, 1, 0, 40000),\n-(8180001, 2290092, 1, 1, 0, 40000),\n-(8180001, 2290099, 1, 1, 0, 40000),\n-(8180001, 2290100, 1, 1, 0, 40000),\n-(8180001, 2290102, 1, 1, 0, 40000),\n-(8180001, 2290119, 1, 1, 0, 40000),\n-(8180001, 2290128, 1, 1, 0, 120000),\n-(8190000, 2280016, 1, 1, 0, 6000),\n-(8190000, 2290030, 1, 1, 0, 2000),\n-(8190000, 2290044, 1, 1, 0, 2000),\n-(8190000, 2290054, 1, 1, 0, 2000),\n-(8190000, 2290066, 1, 1, 0, 2000),\n-(8190000, 2290075, 1, 1, 0, 2000),\n-(8190000, 2290092, 1, 1, 0, 2000),\n-(8190000, 2290103, 1, 1, 0, 2000),\n-(8190002, 2290000, 1, 1, 0, 2000),\n-(8190002, 2290008, 1, 1, 0, 2000),\n-(8190002, 2290018, 1, 1, 0, 2000),\n-(8190002, 2290038, 1, 1, 0, 2000),\n-(8190002, 2290060, 1, 1, 0, 2000),\n-(8190002, 2290080, 1, 1, 0, 2000),\n-(8190002, 2290124, 1, 1, 0, 2000),\n-(8190003, 2280013, 1, 1, 0, 6000),\n-(8190003, 2290007, 1, 1, 0, 2000),\n-(8190003, 2290012, 1, 1, 0, 2000),\n-(8190003, 2290014, 1, 1, 0, 2000),\n-(8190003, 2290033, 1, 1, 0, 2000),\n-(8190003, 2290045, 1, 1, 0, 2000),\n-(8190003, 2290050, 1, 1, 0, 2000),\n-(8190003, 2290055, 1, 1, 0, 2000),\n-(8190003, 2290062, 1, 1, 0, 2000),\n-(8190003, 2290063, 1, 1, 0, 2000),\n-(8190003, 2290070, 1, 1, 0, 2000),\n-(8190003, 2290086, 1, 1, 0, 2000),\n-(8190003, 2290108, 1, 1, 0, 2000),\n-(8190003, 2290133, 1, 1, 0, 6000),\n-(8190004, 2290002, 1, 1, 0, 2000),\n-(8190004, 2290009, 1, 1, 0, 2000),\n-(8190004, 2290021, 1, 1, 0, 2000),\n-(8190004, 2290034, 1, 1, 0, 2000),\n-(8190004, 2290041, 1, 1, 0, 2000),\n-(8190004, 2290052, 1, 1, 0, 2000),\n-(8190004, 2290053, 1, 1, 0, 2000),\n-(8190004, 2290058, 1, 1, 0, 2000),\n-(8190004, 2290068, 1, 1, 0, 2000),\n-(8190004, 2290071, 1, 1, 0, 2000),\n-(8190004, 2290073, 1, 1, 0, 2000),\n-(8190004, 2290090, 1, 1, 0, 2000),\n-(8190004, 2290112, 1, 1, 0, 2000),\n-(8190004, 2290121, 1, 1, 0, 2000),\n-(8190004, 2290130, 1, 1, 0, 6000),\n-(8190005, 2290000, 1, 1, 0, 2000),\n-(8190005, 2290008, 1, 1, 0, 2000),\n-(8190005, 2290018, 1, 1, 0, 2000),\n-(8190005, 2290038, 1, 1, 0, 2000),\n-(8190005, 2290060, 1, 1, 0, 2000),\n-(8190005, 2290080, 1, 1, 0, 2000),\n-(8190005, 2290124, 1, 1, 0, 2000),\n-(8200000, 2290005, 1, 1, 0, 2000),\n-(8200000, 2290011, 1, 1, 0, 2000),\n-(8200000, 2290114, 1, 1, 0, 2000),\n-(8200001, 2280015, 1, 1, 0, 6000),\n-(8200001, 2290050, 1, 1, 0, 2000),\n-(8200001, 2290059, 1, 1, 0, 2000),\n-(8200001, 2290065, 1, 1, 0, 2000),\n-(8200001, 2290129, 1, 1, 0, 6000),\n-(8200002, 2290062, 1, 1, 0, 2000),\n-(8200002, 2290066, 1, 1, 0, 2000),\n-(8200002, 2290070, 1, 1, 0, 2000),\n-(8200002, 2290131, 1, 1, 0, 6000),\n-(8200002, 2290139, 1, 1, 0, 6000),\n-(8200003, 2290012, 1, 1, 0, 2000),\n-(8200003, 2290056, 1, 1, 0, 2000),\n-(8200003, 2290071, 1, 1, 0, 2000),\n-(8200003, 2290101, 1, 1, 0, 2000),\n-(8200003, 2290136, 1, 1, 0, 6000),\n-(8200004, 2280016, 1, 1, 0, 6000),\n-(8200004, 2290069, 1, 1, 0, 2000),\n-(8200004, 2290072, 1, 1, 0, 2000),\n-(8200004, 2290073, 1, 1, 0, 2000),\n-(8200004, 2290127, 1, 1, 0, 6000),\n-(8200004, 2290134, 1, 1, 0, 6000),\n-(8200005, 2280014, 1, 1, 0, 6000),\n-(8200005, 2290078, 1, 1, 0, 2000),\n-(8200005, 2290079, 1, 1, 0, 2000),\n-(8200005, 2290095, 1, 1, 0, 2000),\n-(8200006, 2290003, 1, 1, 0, 2000),\n-(8200006, 2290064, 1, 1, 0, 2000),\n-(8200006, 2290076, 1, 1, 0, 2000),\n-(8200006, 2290077, 1, 1, 0, 2000),\n-(8200006, 2290129, 1, 1, 0, 6000),\n-(8200006, 2290138, 1, 1, 0, 6000),\n-(8200007, 2290006, 1, 1, 0, 2000),\n-(8200007, 2290007, 1, 1, 0, 2000),\n-(8200007, 2290011, 1, 1, 0, 2000),\n-(8200007, 2290016, 1, 1, 0, 2000),\n-(8200007, 2290125, 1, 1, 0, 2000),\n-(8200007, 2290136, 1, 1, 0, 6000),\n-(8200008, 2290006, 1, 1, 0, 2000),\n-(8200008, 2290051, 1, 1, 0, 2000),\n-(8200008, 2290121, 1, 1, 0, 2000),\n-(8200008, 2290122, 1, 1, 0, 2000),\n-(8200008, 2290133, 1, 1, 0, 6000),\n-(8200009, 2290013, 1, 1, 0, 2000),\n-(8200009, 2290016, 1, 1, 0, 2000),\n-(8200009, 2290031, 1, 1, 0, 2000),\n-(8200009, 2290039, 1, 1, 0, 2000),\n-(8200010, 2290026, 1, 1, 0, 2000),\n-(8200010, 2290059, 1, 1, 0, 2000),\n-(8200010, 2290088, 1, 1, 0, 2000),\n-(8200010, 2290089, 1, 1, 0, 2000),\n-(8200010, 2290127, 1, 1, 0, 6000),\n-(8200011, 2290001, 1, 1, 0, 3000),\n-(8200011, 2290040, 1, 1, 0, 3000),\n-(8200011, 2290046, 1, 1, 0, 3000),\n-(8200011, 2290048, 1, 1, 0, 3000),\n-(8200011, 2290049, 1, 1, 0, 3000),\n-(8200011, 2290114, 1, 1, 0, 3000),\n-(8200011, 2290137, 1, 1, 0, 9000),\n-(8200012, 2290041, 1, 1, 0, 3000),\n-(8200012, 2290092, 1, 1, 0, 3000),\n-(8200012, 2290093, 1, 1, 0, 3000),\n-(8200012, 2290115, 1, 1, 0, 3000),\n-(8200012, 2290137, 1, 1, 0, 9000),\n-(8200012, 2290139, 1, 1, 0, 9000),\n-(8220002, 2290020, 1, 1, 0, 40000),\n-(8220002, 2290081, 1, 1, 0, 40000),\n-(8220002, 2290085, 1, 1, 0, 40000),\n-(8220002, 2290133, 1, 1, 0, 120000),\n-(8220003, 2290006, 1, 1, 0, 40000),\n-(8220003, 2290030, 1, 1, 0, 40000),\n-(8220003, 2290031, 1, 1, 0, 40000),\n-(8220003, 2290032, 1, 1, 0, 40000),\n-(8220003, 2290033, 1, 1, 0, 40000),\n-(8220003, 2290060, 1, 1, 0, 40000),\n-(8220003, 2290061, 1, 1, 0, 40000),\n-(8220003, 2290076, 1, 1, 0, 40000),\n-(8220003, 2290077, 1, 1, 0, 40000),\n-(8220003, 2290104, 1, 1, 0, 40000),\n-(8220003, 2290105, 1, 1, 0, 40000),\n-(8220003, 2290117, 1, 1, 0, 40000),\n-(8220003, 2290118, 1, 1, 0, 40000),\n-(8220004, 2290018, 1, 1, 0, 40000),\n-(8220004, 2290019, 1, 1, 0, 40000),\n-(8220004, 2290024, 1, 1, 0, 40000),\n-(8220004, 2290025, 1, 1, 0, 40000),\n-(8220004, 2290058, 1, 1, 0, 40000),\n-(8220004, 2290059, 1, 1, 0, 40000),\n-(8220004, 2290076, 1, 1, 0, 40000),\n-(8220004, 2290077, 1, 1, 0, 40000),\n-(8220004, 2290106, 1, 1, 0, 40000),\n-(8220004, 2290127, 1, 1, 0, 120000),\n-(8220004, 2290134, 1, 1, 0, 120000),\n-(8220005, 2290002, 1, 1, 0, 60000),\n-(8220005, 2290003, 1, 1, 0, 60000),\n-(8220005, 2290036, 1, 1, 0, 60000),\n-(8220005, 2290037, 1, 1, 0, 60000),\n-(8220005, 2290055, 1, 1, 0, 60000),\n-(8220005, 2290080, 1, 1, 0, 60000),\n-(8220005, 2290099, 1, 1, 0, 60000),\n-(8220005, 2290131, 1, 1, 0, 180000),\n-(8220005, 2290136, 1, 1, 0, 180000),\n-(8220006, 2290012, 1, 1, 0, 80000),\n-(8220006, 2290013, 1, 1, 0, 80000),\n-(8220006, 2290042, 1, 1, 0, 80000),\n-(8220006, 2290043, 1, 1, 0, 80000),\n-(8220006, 2290060, 1, 1, 0, 80000),\n-(8220006, 2290061, 1, 1, 0, 80000),\n-(8220006, 2290090, 1, 1, 0, 80000),\n-(8220006, 2290119, 1, 1, 0, 80000),\n-(8220006, 2290120, 1, 1, 0, 80000),\n-(8220006, 2290135, 1, 1, 0, 240000),\n-(8220006, 2290138, 1, 1, 0, 240000),\n-(8220007, 2290035, 1, 1, 0, 40000),\n-(8220007, 2290091, 1, 1, 0, 40000),\n-(8220007, 2290108, 1, 1, 0, 40000),\n-(8220009, 2290031, 1, 1, 0, 40000),\n-(8220009, 2290129, 1, 1, 0, 120000),\n-(8220015, 2280004, 1, 1, 0, 40000),\n-(8220015, 2280005, 1, 1, 0, 40000),\n-(8220015, 2280006, 1, 1, 0, 40000),\n-(8500002, 2280007, 1, 1, 0, 60000),\n-(8500002, 2280008, 1, 1, 0, 60000),\n-(8500002, 2280009, 1, 1, 0, 60000),\n-(8500002, 2280010, 1, 1, 0, 60000),\n-(8500002, 2290006, 1, 1, 0, 60000),\n-(8500002, 2290010, 1, 1, 0, 60000),\n-(8500002, 2290011, 1, 1, 0, 60000),\n-(8500002, 2290013, 1, 1, 0, 60000),\n-(8500002, 2290028, 1, 1, 0, 60000),\n-(8500002, 2290037, 1, 1, 0, 60000),\n-(8500002, 2290043, 1, 1, 0, 60000),\n-(8500002, 2290051, 1, 1, 0, 60000),\n-(8500002, 2290056, 1, 1, 0, 60000),\n-(8500002, 2290061, 1, 1, 0, 60000),\n-(8500002, 2290066, 1, 1, 0, 60000),\n-(8500002, 2290071, 1, 1, 0, 60000),\n-(8500002, 2290078, 1, 1, 0, 60000),\n-(8500002, 2290089, 1, 1, 0, 60000),\n-(8500002, 2290091, 1, 1, 0, 60000),\n-(8500002, 2290104, 1, 1, 0, 60000),\n-(8500002, 2290107, 1, 1, 0, 60000),\n-(8500002, 2290121, 1, 1, 0, 60000),\n-(8500002, 2290123, 1, 1, 0, 60000),\n-(8500002, 2290126, 1, 1, 0, 180000),\n-(8500002, 2290129, 1, 1, 0, 180000),\n-(8510000, 2280007, 1, 1, 0, 40000),\n-(8510000, 2280008, 1, 1, 0, 40000),\n-(8510000, 2280009, 1, 1, 0, 40000),\n-(8510000, 2280010, 1, 1, 0, 40000),\n-(8510000, 2290000, 1, 1, 0, 40000),\n-(8510000, 2290001, 1, 1, 0, 40000),\n-(8510000, 2290004, 1, 1, 0, 40000),\n-(8510000, 2290005, 1, 1, 0, 40000),\n-(8510000, 2290024, 1, 1, 0, 40000),\n-(8510000, 2290025, 1, 1, 0, 40000),\n-(8510000, 2290026, 1, 1, 0, 40000),\n-(8510000, 2290027, 1, 1, 0, 40000),\n-(8510000, 2290052, 1, 1, 0, 40000),\n-(8510000, 2290053, 1, 1, 0, 40000),\n-(8510000, 2290054, 1, 1, 0, 40000),\n-(8510000, 2290055, 1, 1, 0, 40000),\n-(8510000, 2290076, 1, 1, 0, 40000),\n-(8510000, 2290077, 1, 1, 0, 40000),\n-(8510000, 2290082, 1, 1, 0, 40000),\n-(8510000, 2290083, 1, 1, 0, 40000),\n-(8510000, 2290097, 1, 1, 0, 40000),\n-(8510000, 2290099, 1, 1, 0, 40000),\n-(8510000, 2290106, 1, 1, 0, 40000),\n-(8510000, 2290108, 1, 1, 0, 40000),\n-(8510000, 2290112, 1, 1, 0, 40000),\n-(8510000, 2290114, 1, 1, 0, 40000),\n-(8510000, 2290122, 1, 1, 0, 40000),\n-(8510000, 2290124, 1, 1, 0, 40000),\n-(8510000, 2290132, 1, 1, 0, 120000),\n-(8520000, 2280007, 1, 1, 0, 40000),\n-(8520000, 2280008, 1, 1, 0, 40000),\n-(8520000, 2280009, 1, 1, 0, 40000),\n-(8520000, 2280010, 1, 1, 0, 40000),\n-(8520000, 2290000, 1, 1, 0, 40000),\n-(8520000, 2290001, 1, 1, 0, 40000),\n-(8520000, 2290004, 1, 1, 0, 40000),\n-(8520000, 2290005, 1, 1, 0, 40000),\n-(8520000, 2290024, 1, 1, 0, 40000),\n-(8520000, 2290025, 1, 1, 0, 40000),\n-(8520000, 2290026, 1, 1, 0, 40000),\n-(8520000, 2290027, 1, 1, 0, 40000),\n-(8520000, 2290052, 1, 1, 0, 40000),\n-(8520000, 2290053, 1, 1, 0, 40000),\n-(8520000, 2290054, 1, 1, 0, 40000),\n-(8520000, 2290055, 1, 1, 0, 40000),\n-(8520000, 2290076, 1, 1, 0, 40000),\n-(8520000, 2290077, 1, 1, 0, 40000),\n-(8520000, 2290082, 1, 1, 0, 40000),\n-(8520000, 2290083, 1, 1, 0, 40000),\n-(8520000, 2290097, 1, 1, 0, 40000),\n-(8520000, 2290099, 1, 1, 0, 40000),\n-(8520000, 2290106, 1, 1, 0, 40000),\n-(8520000, 2290108, 1, 1, 0, 40000),\n-(8520000, 2290112, 1, 1, 0, 40000),\n-(8520000, 2290114, 1, 1, 0, 40000),\n-(8520000, 2290122, 1, 1, 0, 40000),\n-(8520000, 2290124, 1, 1, 0, 40000),\n-(8520000, 2290132, 1, 1, 0, 120000),\n-(8800002, 2280007, 1, 1, 0, 80000),\n-(8800002, 2280008, 1, 1, 0, 80000),\n-(8800002, 2280009, 1, 1, 0, 80000),\n-(8800002, 2280010, 1, 1, 0, 80000),\n-(8800002, 2280013, 1, 1, 0, 240000),\n-(8800002, 2280014, 1, 1, 0, 240000),\n-(8800002, 2280015, 1, 1, 0, 240000),\n-(8800002, 2280016, 1, 1, 0, 240000),\n-(8800002, 2290006, 1, 1, 0, 80000),\n-(8800002, 2290007, 1, 1, 0, 80000),\n-(8800002, 2290016, 1, 1, 0, 80000),\n-(8800002, 2290020, 1, 1, 0, 80000),\n-(8800002, 2290022, 1, 1, 0, 80000),\n-(8800002, 2290024, 1, 1, 0, 80000),\n-(8800002, 2290028, 1, 1, 0, 80000),\n-(8800002, 2290029, 1, 1, 0, 80000),\n-(8800002, 2290040, 1, 1, 0, 80000),\n-(8800002, 2290046, 1, 1, 0, 80000),\n-(8800002, 2290048, 1, 1, 0, 80000),\n-(8800002, 2290056, 1, 1, 0, 80000),\n-(8800002, 2290057, 1, 1, 0, 80000),\n-(8800002, 2290058, 1, 1, 0, 80000),\n-(8800002, 2290064, 1, 1, 0, 80000),\n-(8800002, 2290067, 1, 1, 0, 80000),\n-(8800002, 2290074, 1, 1, 0, 80000),\n-(8800002, 2290079, 1, 1, 0, 80000),\n-(8800002, 2290084, 1, 1, 0, 80000),\n-(8800002, 2290094, 1, 1, 0, 80000),\n-(8800002, 2290110, 1, 1, 0, 80000),\n-(8800002, 2290115, 1, 1, 0, 80000),\n-(8810018, 2290017, 1, 1, 0, 100000),\n-(8810018, 2290021, 1, 1, 0, 100000),\n-(8810018, 2290023, 1, 1, 0, 100000),\n-(8810018, 2290041, 1, 1, 0, 100000),\n-(8810018, 2290047, 1, 1, 0, 100000),\n-(8810018, 2290049, 1, 1, 0, 100000),\n-(8810018, 2290065, 1, 1, 0, 100000),\n-(8810018, 2290075, 1, 1, 0, 100000),\n-(8810018, 2290085, 1, 1, 0, 100000),\n-(8810018, 2290095, 1, 1, 0, 100000),\n-(8810018, 2290096, 1, 1, 0, 100000),\n-(8810018, 2290111, 1, 1, 0, 100000),\n-(8810018, 2290116, 1, 1, 0, 100000),\n-(8810018, 2290125, 1, 1, 0, 100000),\n-(8810018, 2290133, 1, 1, 0, 300000),\n-(8810018, 2290137, 1, 1, 0, 300000),\n-(8810018, 2290139, 1, 1, 0, 300000),\n-(8820000, 2290010, 1, 1, 0, 120000),\n-(8820000, 2290022, 1, 1, 0, 120000),\n-(8820000, 2290040, 1, 1, 0, 120000),\n-(8820000, 2290046, 1, 1, 0, 120000),\n-(8820000, 2290048, 1, 1, 0, 120000),\n-(8820000, 2290052, 1, 1, 0, 120000),\n-(8820000, 2290084, 1, 1, 0, 120000),\n-(8820000, 2290090, 1, 1, 0, 120000),\n-(8820000, 2290106, 1, 1, 0, 120000),\n-(8820000, 2290119, 1, 1, 0, 120000),\n-(8820001, 2290010, 1, 1, 0, 120000),\n-(8820001, 2290022, 1, 1, 0, 120000),\n-(8820001, 2290040, 1, 1, 0, 120000),\n-(8820001, 2290046, 1, 1, 0, 120000),\n-(8820001, 2290048, 1, 1, 0, 120000),\n-(8820001, 2290052, 1, 1, 0, 120000),\n-(8820001, 2290084, 1, 1, 0, 120000),\n-(8820001, 2290090, 1, 1, 0, 120000),\n-(8820001, 2290106, 1, 1, 0, 120000),\n-(8820001, 2290119, 1, 1, 0, 120000),\n-(9300028, 2280015, 1, 1, 0, 120000),\n-(9300028, 2290026, 1, 1, 0, 40000),\n-(9300028, 2290064, 1, 1, 0, 40000),\n-(9300028, 2290075, 1, 1, 0, 40000),\n-(9300028, 2290093, 1, 1, 0, 40000),\n-(9300028, 2290111, 1, 1, 0, 40000),\n-(9300094, 2280004, 1, 1, 0, 40000),\n-(9300094, 2280005, 1, 1, 0, 40000),\n-(9300094, 2280006, 1, 1, 0, 40000),\n-(9300095, 2280004, 1, 1, 0, 2000),\n-(9300095, 2280005, 1, 1, 0, 2000),\n-(9300095, 2280006, 1, 1, 0, 2000),\n-(9303016, 2290006, 1, 1, 0, 2000),\n-(9303016, 2290030, 1, 1, 0, 2000),\n-(9303016, 2290032, 1, 1, 0, 2000),\n-(9303016, 2290060, 1, 1, 0, 2000),\n-(9303016, 2290076, 1, 1, 0, 2000),\n-(9303016, 2290104, 1, 1, 0, 2000),\n-(9303016, 2290117, 1, 1, 0, 2000),\n-(9400014, 2290053, 1, 1, 0, 40000),\n-(9400014, 2290087, 1, 1, 0, 40000),\n-(9400014, 2290112, 1, 1, 0, 40000),\n-(9400014, 2290122, 1, 1, 0, 40000),\n-(9400120, 2290045, 1, 1, 0, 40000),\n-(9400121, 2280014, 1, 1, 0, 180000),\n-(9400121, 2290081, 1, 1, 0, 60000),\n-(9400121, 2290087, 1, 1, 0, 60000),\n-(9400121, 2290101, 1, 1, 0, 60000),\n-(9400121, 2290103, 1, 1, 0, 60000),\n-(9400122, 2290007, 1, 1, 0, 40000),\n-(9400122, 2290062, 1, 1, 0, 40000),\n-(9400122, 2290116, 1, 1, 0, 40000),\n-(9400300, 2290045, 1, 1, 0, 120000),\n-(9400300, 2290055, 1, 1, 0, 120000),\n-(9400300, 2290063, 1, 1, 0, 120000),\n-(9400300, 2290079, 1, 1, 0, 120000),\n-(9400300, 2290081, 1, 1, 0, 120000),\n-(9400300, 2290096, 1, 1, 0, 120000),\n-(9400514, 2290023, 1, 1, 0, 40000),\n-(9400514, 2290057, 1, 1, 0, 40000),\n-(9400514, 2290088, 1, 1, 0, 40000),\n-(9400514, 2290095, 1, 1, 0, 40000),\n-(9400514, 2290115, 1, 1, 0, 40000),\n-(9400514, 2290139, 1, 1, 0, 120000),\n-(9400549, 2290001, 1, 1, 0, 40000),\n-(9400549, 2290020, 1, 1, 0, 40000),\n-(9400549, 2290045, 1, 1, 0, 40000),\n-(9400549, 2290057, 1, 1, 0, 40000),\n-(9400549, 2290086, 1, 1, 0, 40000),\n-(9400575, 2290009, 1, 1, 0, 40000),\n-(9400575, 2290051, 1, 1, 0, 40000),\n-(9400575, 2290081, 1, 1, 0, 40000),\n-(9400575, 2290087, 1, 1, 0, 40000),\n-(9400575, 2290107, 1, 1, 0, 40000),\n-(9400575, 2290123, 1, 1, 0, 40000),\n-(9400580, 2290004, 1, 1, 0, 2000),\n-(9400580, 2290024, 1, 1, 0, 2000),\n-(9400580, 2290083, 1, 1, 0, 2000),\n-(9400580, 2290087, 1, 1, 0, 2000),\n-(9400580, 2290103, 1, 1, 0, 2000),\n-(9400580, 2290121, 1, 1, 0, 2000),\n-(9400582, 2290005, 1, 1, 0, 2000),\n-(9400582, 2290010, 1, 1, 0, 2000),\n-(9400582, 2290029, 1, 1, 0, 2000),\n-(9400582, 2290047, 1, 1, 0, 2000),\n-(9400582, 2290049, 1, 1, 0, 2000),\n-(9400582, 2290074, 1, 1, 0, 2000),\n-(9400582, 2290079, 1, 1, 0, 2000),\n-(9400582, 2290081, 1, 1, 0, 2000),\n-(9400582, 2290135, 1, 1, 0, 6000),\n-(9400590, 2290088, 1, 1, 0, 60000),\n-(9400590, 2290125, 1, 1, 0, 60000),\n-(9400590, 2290135, 1, 1, 0, 180000),\n-(9400591, 2290039, 1, 1, 0, 60000),\n-(9400591, 2290074, 1, 1, 0, 60000),\n-(9400591, 2290113, 1, 1, 0, 60000),\n-(9400592, 2290047, 1, 1, 0, 60000),\n-(9400592, 2290123, 1, 1, 0, 60000),\n-(9400592, 2290131, 1, 1, 0, 180000),\n-(9400593, 2290069, 1, 1, 0, 60000),\n-(9400593, 2290093, 1, 1, 0, 60000),\n-(9400593, 2290138, 1, 1, 0, 180000),\n-(9420513, 2290039, 1, 1, 0, 40000),\n-(9420513, 2290100, 1, 1, 0, 40000),\n-(9420513, 2290108, 1, 1, 0, 40000),\n-(9420513, 2290118, 1, 1, 0, 40000),\n-(9420513, 2290138, 1, 1, 0, 120000),\n+(7090000, 2290087, 1, 1, 0, 10000),\n+(8090000, 2290045, 1, 1, 0, 10000),\n+(8140103, 2290044, 1, 1, 0, 500),\n+(8140511, 2290009, 1, 1, 0, 500),\n+(8140511, 2290050, 1, 1, 0, 500),\n+(8140511, 2290083, 1, 1, 0, 500),\n+(8140511, 2290134, 1, 1, 0, 1500),\n+(8140512, 2290013, 1, 1, 0, 500),\n+(8140512, 2290067, 1, 1, 0, 500),\n+(8140512, 2290082, 1, 1, 0, 500),\n+(8140512, 2290097, 1, 1, 0, 500),\n+(8140512, 2290116, 1, 1, 0, 500),\n+(8140512, 2290131, 1, 1, 0, 1500),\n+(8140600, 2290132, 1, 1, 0, 1500),\n+(8140700, 2290106, 1, 1, 0, 500),\n+(8140700, 2290126, 1, 1, 0, 1500),\n+(8140701, 2290122, 1, 1, 0, 500),\n+(8140702, 2290112, 1, 1, 0, 500),\n+(8140703, 2290088, 1, 1, 0, 500),\n+(8140703, 2290099, 1, 1, 0, 500),\n+(8141000, 2290082, 1, 1, 0, 500),\n+(8141000, 2290097, 1, 1, 0, 500),\n+(8141100, 2280005, 1, 1, 0, 500),\n+(8141300, 2290098, 1, 1, 0, 500),\n+(8142100, 2290032, 1, 1, 0, 500),\n+(8142100, 2290082, 1, 1, 0, 500),\n+(8142100, 2290114, 1, 1, 0, 500),\n+(8143000, 2280004, 1, 1, 0, 500),\n+(8150000, 2280013, 1, 1, 0, 30000),\n+(8150000, 2290070, 1, 1, 0, 10000),\n+(8150000, 2290091, 1, 1, 0, 10000),\n+(8150100, 2290042, 1, 1, 0, 500),\n+(8150100, 2290053, 1, 1, 0, 500),\n+(8150100, 2290073, 1, 1, 0, 500),\n+(8150100, 2290102, 1, 1, 0, 500),\n+(8150100, 2290118, 1, 1, 0, 500),\n+(8150101, 2290017, 1, 1, 0, 500),\n+(8150101, 2290021, 1, 1, 0, 500),\n+(8150101, 2290035, 1, 1, 0, 500),\n+(8150101, 2290042, 1, 1, 0, 500),\n+(8150101, 2290052, 1, 1, 0, 500),\n+(8150101, 2290102, 1, 1, 0, 500),\n+(8150200, 2290024, 1, 1, 0, 500),\n+(8150200, 2290100, 1, 1, 0, 500),\n+(8150200, 2290135, 1, 1, 0, 1500),\n+(8150201, 2290004, 1, 1, 0, 500),\n+(8150201, 2290006, 1, 1, 0, 500),\n+(8150201, 2290024, 1, 1, 0, 500),\n+(8150201, 2290036, 1, 1, 0, 500),\n+(8150201, 2290056, 1, 1, 0, 500),\n+(8150201, 2290072, 1, 1, 0, 500),\n+(8150201, 2290078, 1, 1, 0, 500),\n+(8150201, 2290117, 1, 1, 0, 500),\n+(8150300, 2290003, 1, 1, 0, 500),\n+(8150300, 2290033, 1, 1, 0, 500),\n+(8150300, 2290111, 1, 1, 0, 500),\n+(8150300, 2290120, 1, 1, 0, 500),\n+(8150300, 2290127, 1, 1, 0, 1500),\n+(8150301, 2290023, 1, 1, 0, 500),\n+(8150301, 2290029, 1, 1, 0, 500),\n+(8150301, 2290101, 1, 1, 0, 500),\n+(8150301, 2290107, 1, 1, 0, 500),\n+(8150302, 2290010, 1, 1, 0, 500),\n+(8150302, 2290019, 1, 1, 0, 500),\n+(8150302, 2290026, 1, 1, 0, 500),\n+(8150302, 2290076, 1, 1, 0, 500),\n+(8150302, 2290085, 1, 1, 0, 500),\n+(8150302, 2290096, 1, 1, 0, 500),\n+(8150302, 2290113, 1, 1, 0, 500),\n+(8150302, 2290119, 1, 1, 0, 500),\n+(8150302, 2290128, 1, 1, 0, 1500),\n+(8160000, 2290017, 1, 1, 0, 500),\n+(8160000, 2290045, 1, 1, 0, 500),\n+(8160000, 2290065, 1, 1, 0, 500),\n+(8160000, 2290067, 1, 1, 0, 500),\n+(8160000, 2290081, 1, 1, 0, 500),\n+(8170000, 2290012, 1, 1, 0, 500),\n+(8170000, 2290086, 1, 1, 0, 500),\n+(8170000, 2290087, 1, 1, 0, 500),\n+(8170000, 2290134, 1, 1, 0, 1500),\n+(8180000, 2290002, 1, 1, 0, 10000),\n+(8180000, 2290003, 1, 1, 0, 10000),\n+(8180000, 2290014, 1, 1, 0, 10000),\n+(8180000, 2290015, 1, 1, 0, 10000),\n+(8180000, 2290030, 1, 1, 0, 10000),\n+(8180000, 2290035, 1, 1, 0, 10000),\n+(8180000, 2290036, 1, 1, 0, 10000),\n+(8180000, 2290063, 1, 1, 0, 10000),\n+(8180000, 2290080, 1, 1, 0, 10000),\n+(8180000, 2290098, 1, 1, 0, 10000),\n+(8180000, 2290101, 1, 1, 0, 10000),\n+(8180000, 2290117, 1, 1, 0, 10000),\n+(8180000, 2290130, 1, 1, 0, 30000),\n+(8180001, 2290018, 1, 1, 0, 10000),\n+(8180001, 2290019, 1, 1, 0, 10000),\n+(8180001, 2290032, 1, 1, 0, 10000),\n+(8180001, 2290042, 1, 1, 0, 10000),\n+(8180001, 2290058, 1, 1, 0, 10000),\n+(8180001, 2290059, 1, 1, 0, 10000),\n+(8180001, 2290068, 1, 1, 0, 10000),\n+(8180001, 2290069, 1, 1, 0, 10000),\n+(8180001, 2290072, 1, 1, 0, 10000),\n+(8180001, 2290092, 1, 1, 0, 10000),\n+(8180001, 2290099, 1, 1, 0, 10000),\n+(8180001, 2290100, 1, 1, 0, 10000),\n+(8180001, 2290102, 1, 1, 0, 10000),\n+(8180001, 2290119, 1, 1, 0, 10000),\n+(8180001, 2290128, 1, 1, 0, 30000),\n+(8190000, 2280016, 1, 1, 0, 1500),\n+(8190000, 2290030, 1, 1, 0, 500),\n+(8190000, 2290044, 1, 1, 0, 500),\n+(8190000, 2290054, 1, 1, 0, 500),\n+(8190000, 2290066, 1, 1, 0, 500),\n+(8190000, 2290075, 1, 1, 0, 500),\n+(8190000, 2290092, 1, 1, 0, 500),\n+(8190000, 2290103, 1, 1, 0, 500),\n+(8190002, 2290000, 1, 1, 0, 500),\n+(8190002, 2290008, 1, 1, 0, 500),\n+(8190002, 2290018, 1, 1, 0, 500),\n+(8190002, 2290038, 1, 1, 0, 500),\n+(8190002, 2290060, 1, 1, 0, 500),\n+(8190002, 2290080, 1, 1, 0, 500),\n+(8190002, 2290124, 1, 1, 0, 500),\n+(8190003, 2280013, 1, 1, 0, 1500),\n+(8190003, 2290007, 1, 1, 0, 500),\n+(8190003, 2290012, 1, 1, 0, 500),\n+(8190003, 2290014, 1, 1, 0, 500),\n+(8190003, 2290033, 1, 1, 0, 500),\n+(8190003, 2290045, 1, 1, 0, 500),\n+(8190003, 2290050, 1, 1, 0, 500),\n+(8190003, 2290055, 1, 1, 0, 500),\n+(8190003, 2290062, 1, 1, 0, 500),\n+(8190003, 2290063, 1, 1, 0, 500),\n+(8190003, 2290070, 1, 1, 0, 500),\n+(8190003, 2290086, 1, 1, 0, 500),\n+(8190003, 2290108, 1, 1, 0, 500),\n+(8190003, 2290133, 1, 1, 0, 1500),\n+(8190004, 2290002, 1, 1, 0, 500),\n+(8190004, 2290009, 1, 1, 0, 500),\n+(8190004, 2290021, 1, 1, 0, 500),\n+(8190004, 2290034, 1, 1, 0, 500),\n+(8190004, 2290041, 1, 1, 0, 500),\n+(8190004, 2290052, 1, 1, 0, 500),\n+(8190004, 2290053, 1, 1, 0, 500),\n+(8190004, 2290058, 1, 1, 0, 500),\n+(8190004, 2290068, 1, 1, 0, 500),\n+(8190004, 2290071, 1, 1, 0, 500),\n+(8190004, 2290073, 1, 1, 0, 500),\n+(8190004, 2290090, 1, 1, 0, 500),\n+(8190004, 2290112, 1, 1, 0, 500),\n+(8190004, 2290121, 1, 1, 0, 500),\n+(8190004, 2290130, 1, 1, 0, 1500),\n+(8190005, 2290000, 1, 1, 0, 500),\n+(8190005, 2290008, 1, 1, 0, 500),\n+(8190005, 2290018, 1, 1, 0, 500),\n+(8190005, 2290038, 1, 1, 0, 500),\n+(8190005, 2290060, 1, 1, 0, 500),\n+(8190005, 2290080, 1, 1, 0, 500),\n+(8190005, 2290124, 1, 1, 0, 500),\n+(8200000, 2290005, 1, 1, 0, 500),\n+(8200000, 2290011, 1, 1, 0, 500),\n+(8200000, 2290114, 1, 1, 0, 500),\n+(8200001, 2280015, 1, 1, 0, 1500),\n+(8200001, 2290050, 1, 1, 0, 500),\n+(8200001, 2290059, 1, 1, 0, 500),\n+(8200001, 2290065, 1, 1, 0, 500),\n+(8200001, 2290129, 1, 1, 0, 1500),\n+(8200002, 2290062, 1, 1, 0, 500),\n+(8200002, 2290066, 1, 1, 0, 500),\n+(8200002, 2290070, 1, 1, 0, 500),\n+(8200002, 2290131, 1, 1, 0, 1500),\n+(8200002, 2290139, 1, 1, 0, 1500),\n+(8200003, 2290012, 1, 1, 0, 500),\n+(8200003, 2290056, 1, 1, 0, 500),\n+(8200003, 2290071, 1, 1, 0, 500),\n+(8200003, 2290101, 1, 1, 0, 500),\n+(8200003, 2290136, 1, 1, 0, 1500),\n+(8200004, 2280016, 1, 1, 0, 1500),\n+(8200004, 2290069, 1, 1, 0, 500),\n+(8200004, 2290072, 1, 1, 0, 500),\n+(8200004, 2290073, 1, 1, 0, 500),\n+(8200004, 2290127, 1, 1, 0, 1500),\n+(8200004, 2290134, 1, 1, 0, 1500),\n+(8200005, 2280014, 1, 1, 0, 1500),\n+(8200005, 2290078, 1, 1, 0, 500),\n+(8200005, 2290079, 1, 1, 0, 500),\n+(8200005, 2290095, 1, 1, 0, 500),\n+(8200006, 2290003, 1, 1, 0, 500),\n+(8200006, 2290064, 1, 1, 0, 500),\n+(8200006, 2290076, 1, 1, 0, 500),\n+(8200006, 2290077, 1, 1, 0, 500),\n+(8200006, 2290129, 1, 1, 0, 1500),\n+(8200006, 2290138, 1, 1, 0, 1500),\n+(8200007, 2290006, 1, 1, 0, 500),\n+(8200007, 2290007, 1, 1, 0, 500),\n+(8200007, 2290011, 1, 1, 0, 500),\n+(8200007, 2290016, 1, 1, 0, 500),\n+(8200007, 2290125, 1, 1, 0, 500),\n+(8200007, 2290136, 1, 1, 0, 1500),\n+(8200008, 2290006, 1, 1, 0, 500),\n+(8200008, 2290051, 1, 1, 0, 500),\n+(8200008, 2290121, 1, 1, 0, 500),\n+(8200008, 2290122, 1, 1, 0, 500),\n+(8200008, 2290133, 1, 1, 0, 1500),\n+(8200009, 2290013, 1, 1, 0, 500),\n+(8200009, 2290016, 1, 1, 0, 500),\n+(8200009, 2290031, 1, 1, 0, 500),\n+(8200009, 2290039, 1, 1, 0, 500),\n+(8200010, 2290026, 1, 1, 0, 500),\n+(8200010, 2290059, 1, 1, 0, 500),\n+(8200010, 2290088, 1, 1, 0, 500),\n+(8200010, 2290089, 1, 1, 0, 500),\n+(8200010, 2290127, 1, 1, 0, 1500),\n+(8200011, 2290001, 1, 1, 0, 750),\n+(8200011, 2290040, 1, 1, 0, 750),\n+(8200011, 2290046, 1, 1, 0, 750),\n+(8200011, 2290048, 1, 1, 0, 750),\n+(8200011, 2290049, 1, 1, 0, 750),\n+(8200011, 2290114, 1, 1, 0, 750),\n+(8200011, 2290137, 1, 1, 0, 2250),\n+(8200012, 2290041, 1, 1, 0, 750),\n+(8200012, 2290092, 1, 1, 0, 750),\n+(8200012, 2290093, 1, 1, 0, 750),\n+(8200012, 2290115, 1, 1, 0, 750),\n+(8200012, 2290137, 1, 1, 0, 2250),\n+(8200012, 2290139, 1, 1, 0, 2250),\n+(8220002, 2290020, 1, 1, 0, 10000),\n+(8220002, 2290081, 1, 1, 0, 10000),\n+(8220002, 2290085, 1, 1, 0, 10000),\n+(8220002, 2290133, 1, 1, 0, 30000),\n+(8220003, 2290006, 1, 1, 0, 10000),\n+(8220003, 2290030, 1, 1, 0, 10000),\n+(8220003, 2290031, 1, 1, 0, 10000),\n+(8220003, 2290032, 1, 1, 0, 10000),\n+(8220003, 2290033, 1, 1, 0, 10000),\n+(8220003, 2290060, 1, 1, 0, 10000),\n+(8220003, 2290061, 1, 1, 0, 10000),\n+(8220003, 2290076, 1, 1, 0, 10000),\n+(8220003, 2290077, 1, 1, 0, 10000),\n+(8220003, 2290104, 1, 1, 0, 10000),\n+(8220003, 2290105, 1, 1, 0, 10000),\n+(8220003, 2290117, 1, 1, 0, 10000),\n+(8220003, 2290118, 1, 1, 0, 10000),\n+(8220004, 2290018, 1, 1, 0, 10000),\n+(8220004, 2290019, 1, 1, 0, 10000),\n+(8220004, 2290024, 1, 1, 0, 10000),\n+(8220004, 2290025, 1, 1, 0, 10000),\n+(8220004, 2290058, 1, 1, 0, 10000),\n+(8220004, 2290059, 1, 1, 0, 10000),\n+(8220004, 2290076, 1, 1, 0, 10000),\n+(8220004, 2290077, 1, 1, 0, 10000),\n+(8220004, 2290106, 1, 1, 0, 10000),\n+(8220004, 2290127, 1, 1, 0, 30000),\n+(8220004, 2290134, 1, 1, 0, 30000),\n+(8220005, 2290002, 1, 1, 0, 15000),\n+(8220005, 2290003, 1, 1, 0, 15000),\n+(8220005, 2290036, 1, 1, 0, 15000),\n+(8220005, 2290037, 1, 1, 0, 15000),\n+(8220005, 2290055, 1, 1, 0, 15000),\n+(8220005, 2290080, 1, 1, 0, 15000),\n+(8220005, 2290099, 1, 1, 0, 15000),\n+(8220005, 2290131, 1, 1, 0, 45000),\n+(8220005, 2290136, 1, 1, 0, 45000),\n+(8220006, 2290012, 1, 1, 0, 20000),\n+(8220006, 2290013, 1, 1, 0, 20000),\n+(8220006, 2290042, 1, 1, 0, 20000),\n+(8220006, 2290043, 1, 1, 0, 20000),\n+(8220006, 2290060, 1, 1, 0, 20000),\n+(8220006, 2290061, 1, 1, 0, 20000),\n+(8220006, 2290090, 1, 1, 0, 20000),\n+(8220006, 2290119, 1, 1, 0, 20000),\n+(8220006, 2290120, 1, 1, 0, 20000),\n+(8220006, 2290135, 1, 1, 0, 60000),\n+(8220006, 2290138, 1, 1, 0, 60000),\n+(8220007, 2290035, 1, 1, 0, 10000),\n+(8220007, 2290091, 1, 1, 0, 10000),\n+(8220007, 2290108, 1, 1, 0, 10000),\n+(8220009, 2290031, 1, 1, 0, 10000),\n+(8220009, 2290129, 1, 1, 0, 30000),\n+(8220015, 2280004, 1, 1, 0, 10000),\n+(8220015, 2280005, 1, 1, 0, 10000),\n+(8220015, 2280006, 1, 1, 0, 10000),\n+(8500002, 2280007, 1, 1, 0, 15000),\n+(8500002, 2280008, 1, 1, 0, 15000),\n+(8500002, 2280009, 1, 1, 0, 15000),\n+(8500002, 2280010, 1, 1, 0, 15000),\n+(8500002, 2290006, 1, 1, 0, 15000),\n+(8500002, 2290010, 1, 1, 0, 15000),\n+(8500002, 2290011, 1, 1, 0, 15000),\n+(8500002, 2290013, 1, 1, 0, 15000),\n+(8500002, 2290028, 1, 1, 0, 15000),\n+(8500002, 2290037, 1, 1, 0, 15000),\n+(8500002, 2290043, 1, 1, 0, 15000),\n+(8500002, 2290051, 1, 1, 0, 15000),\n+(8500002, 2290056, 1, 1, 0, 15000),\n+(8500002, 2290061, 1, 1, 0, 15000),\n+(8500002, 2290066, 1, 1, 0, 15000),\n+(8500002, 2290071, 1, 1, 0, 15000),\n+(8500002, 2290078, 1, 1, 0, 15000),\n+(8500002, 2290089, 1, 1, 0, 15000),\n+(8500002, 2290091, 1, 1, 0, 15000),\n+(8500002, 2290104, 1, 1, 0, 15000),\n+(8500002, 2290107, 1, 1, 0, 15000),\n+(8500002, 2290121, 1, 1, 0, 15000),\n+(8500002, 2290123, 1, 1, 0, 15000),\n+(8500002, 2290126, 1, 1, 0, 45000),\n+(8500002, 2290129, 1, 1, 0, 45000),\n+(8510000, 2280007, 1, 1, 0, 10000),\n+(8510000, 2280008, 1, 1, 0, 10000),\n+(8510000, 2280009, 1, 1, 0, 10000),\n+(8510000, 2280010, 1, 1, 0, 10000),\n+(8510000, 2290000, 1, 1, 0, 10000),\n+(8510000, 2290001, 1, 1, 0, 10000),\n+(8510000, 2290004, 1, 1, 0, 10000),\n+(8510000, 2290005, 1, 1, 0, 10000),\n+(8510000, 2290024, 1, 1, 0, 10000),\n+(8510000, 2290025, 1, 1, 0, 10000),\n+(8510000, 2290026, 1, 1, 0, 10000),\n+(8510000, 2290027, 1, 1, 0, 10000),\n+(8510000, 2290052, 1, 1, 0, 10000),\n+(8510000, 2290053, 1, 1, 0, 10000),\n+(8510000, 2290054, 1, 1, 0, 10000),\n+(8510000, 2290055, 1, 1, 0, 10000),\n+(8510000, 2290076, 1, 1, 0, 10000),\n+(8510000, 2290077, 1, 1, 0, 10000),\n+(8510000, 2290082, 1, 1, 0, 10000),\n+(8510000, 2290083, 1, 1, 0, 10000),\n+(8510000, 2290097, 1, 1, 0, 10000),\n+(8510000, 2290099, 1, 1, 0, 10000),\n+(8510000, 2290106, 1, 1, 0, 10000),\n+(8510000, 2290108, 1, 1, 0, 10000),\n+(8510000, 2290112, 1, 1, 0, 10000),\n+(8510000, 2290114, 1, 1, 0, 10000),\n+(8510000, 2290122, 1, 1, 0, 10000),\n+(8510000, 2290124, 1, 1, 0, 10000),\n+(8510000, 2290132, 1, 1, 0, 30000),\n+(8520000, 2280007, 1, 1, 0, 10000),\n+(8520000, 2280008, 1, 1, 0, 10000),\n+(8520000, 2280009, 1, 1, 0, 10000),\n+(8520000, 2280010, 1, 1, 0, 10000),\n+(8520000, 2290000, 1, 1, 0, 10000),\n+(8520000, 2290001, 1, 1, 0, 10000),\n+(8520000, 2290004, 1, 1, 0, 10000),\n+(8520000, 2290005, 1, 1, 0, 10000),\n+(8520000, 2290024, 1, 1, 0, 10000),\n+(8520000, 2290025, 1, 1, 0, 10000),\n+(8520000, 2290026, 1, 1, 0, 10000),\n+(8520000, 2290027, 1, 1, 0, 10000),\n+(8520000, 2290052, 1, 1, 0, 10000),\n+(8520000, 2290053, 1, 1, 0, 10000),\n+(8520000, 2290054, 1, 1, 0, 10000),\n+(8520000, 2290055, 1, 1, 0, 10000),\n+(8520000, 2290076, 1, 1, 0, 10000),\n+(8520000, 2290077, 1, 1, 0, 10000),\n+(8520000, 2290082, 1, 1, 0, 10000),\n+(8520000, 2290083, 1, 1, 0, 10000),\n+(8520000, 2290097, 1, 1, 0, 10000),\n+(8520000, 2290099, 1, 1, 0, 10000),\n+(8520000, 2290106, 1, 1, 0, 10000),\n+(8520000, 2290108, 1, 1, 0, 10000),\n+(8520000, 2290112, 1, 1, 0, 10000),\n+(8520000, 2290114, 1, 1, 0, 10000),\n+(8520000, 2290122, 1, 1, 0, 10000),\n+(8520000, 2290124, 1, 1, 0, 10000),\n+(8520000, 2290132, 1, 1, 0, 30000),\n+(8800002, 2280007, 1, 1, 0, 20000),\n+(8800002, 2280008, 1, 1, 0, 20000),\n+(8800002, 2280009, 1, 1, 0, 20000),\n+(8800002, 2280010, 1, 1, 0, 20000),\n+(8800002, 2280013, 1, 1, 0, 60000),\n+(8800002, 2280014, 1, 1, 0, 60000),\n+(8800002, 2280015, 1, 1, 0, 60000),\n+(8800002, 2280016, 1, 1, 0, 60000),\n+(8800002, 2290006, 1, 1, 0, 20000),\n+(8800002, 2290007, 1, 1, 0, 20000),\n+(8800002, 2290016, 1, 1, 0, 20000),\n+(8800002, 2290020, 1, 1, 0, 20000),\n+(8800002, 2290022, 1, 1, 0, 20000),\n+(8800002, 2290024, 1, 1, 0, 20000),\n+(8800002, 2290028, 1, 1, 0, 20000),\n+(8800002, 2290029, 1, 1, 0, 20000),\n+(8800002, 2290040, 1, 1, 0, 20000),\n+(8800002, 2290046, 1, 1, 0, 20000),\n+(8800002, 2290048, 1, 1, 0, 20000),\n+(8800002, 2290056, 1, 1, 0, 20000),\n+(8800002, 2290057, 1, 1, 0, 20000),\n+(8800002, 2290058, 1, 1, 0, 20000),\n+(8800002, 2290064, 1, 1, 0, 20000),\n+(8800002, 2290067, 1, 1, 0, 20000),\n+(8800002, 2290074, 1, 1, 0, 20000),\n+(8800002, 2290079, 1, 1, 0, 20000),\n+(8800002, 2290084, 1, 1, 0, 20000),\n+(8800002, 2290094, 1, 1, 0, 20000),\n+(8800002, 2290110, 1, 1, 0, 20000),\n+(8800002, 2290115, 1, 1, 0, 20000),\n+(8810018, 2290017, 1, 1, 0, 25000),\n+(8810018, 2290021, 1, 1, 0, 25000),\n+(8810018, 2290023, 1, 1, 0, 25000),\n+(8810018, 2290041, 1, 1, 0, 25000),\n+(8810018, 2290047, 1, 1, 0, 25000),\n+(8810018, 2290049, 1, 1, 0, 25000),\n+(8810018, 2290065, 1, 1, 0, 25000),\n+(8810018, 2290075, 1, 1, 0, 25000),\n+(8810018, 2290085, 1, 1, 0, 25000),\n+(8810018, 2290095, 1, 1, 0, 25000),\n+(8810018, 2290096, 1, 1, 0, 25000),\n+(8810018, 2290111, 1, 1, 0, 25000),\n+(8810018, 2290116, 1, 1, 0, 25000),\n+(8810018, 2290125, 1, 1, 0, 25000),\n+(8810018, 2290133, 1, 1, 0, 75000),\n+(8810018, 2290137, 1, 1, 0, 75000),\n+(8810018, 2290139, 1, 1, 0, 75000),\n+(8820000, 2290010, 1, 1, 0, 30000),\n+(8820000, 2290022, 1, 1, 0, 30000),\n+(8820000, 2290040, 1, 1, 0, 30000),\n+(8820000, 2290046, 1, 1, 0, 30000),\n+(8820000, 2290048, 1, 1, 0, 30000),\n+(8820000, 2290052, 1, 1, 0, 30000),\n+(8820000, 2290084, 1, 1, 0, 30000),\n+(8820000, 2290090, 1, 1, 0, 30000),\n+(8820000, 2290106, 1, 1, 0, 30000),\n+(8820000, 2290119, 1, 1, 0, 30000),\n+(8820001, 2290010, 1, 1, 0, 30000),\n+(8820001, 2290022, 1, 1, 0, 30000),\n+(8820001, 2290040, 1, 1, 0, 30000),\n+(8820001, 2290046, 1, 1, 0, 30000),\n+(8820001, 2290048, 1, 1, 0, 30000),\n+(8820001, 2290052, 1, 1, 0, 30000),\n+(8820001, 2290084, 1, 1, 0, 30000),\n+(8820001, 2290090, 1, 1, 0, 30000),\n+(8820001, 2290106, 1, 1, 0, 30000),\n+(8820001, 2290119, 1, 1, 0, 30000),\n+(9300028, 2280015, 1, 1, 0, 30000),\n+(9300028, 2290026, 1, 1, 0, 10000),\n+(9300028, 2290064, 1, 1, 0, 10000),\n+(9300028, 2290075, 1, 1, 0, 10000),\n+(9300028, 2290093, 1, 1, 0, 10000),\n+(9300028, 2290111, 1, 1, 0, 10000),\n+(9300094, 2280004, 1, 1, 0, 10000),\n+(9300094, 2280005, 1, 1, 0, 10000),\n+(9300094, 2280006, 1, 1, 0, 10000),\n+(9300095, 2280004, 1, 1, 0, 500),\n+(9300095, 2280005, 1, 1, 0, 500),\n+(9300095, 2280006, 1, 1, 0, 500),\n+(9303016, 2290006, 1, 1, 0, 500),\n+(9303016, 2290030, 1, 1, 0, 500),\n+(9303016, 2290032, 1, 1, 0, 500),\n+(9303016, 2290060, 1, 1, 0, 500),\n+(9303016, 2290076, 1, 1, 0, 500),\n+(9303016, 2290104, 1, 1, 0, 500),\n+(9303016, 2290117, 1, 1, 0, 500),\n+(9400014, 2290053, 1, 1, 0, 10000),\n+(9400014, 2290087, 1, 1, 0, 10000),\n+(9400014, 2290112, 1, 1, 0, 10000),\n+(9400014, 2290122, 1, 1, 0, 10000),\n+(9400120, 2290045, 1, 1, 0, 10000),\n+(9400121, 2280014, 1, 1, 0, 45000),\n+(9400121, 2290081, 1, 1, 0, 15000),\n+(9400121, 2290087, 1, 1, 0, 15000),\n+(9400121, 2290101, 1, 1, 0, 15000),\n+(9400121, 2290103, 1, 1, 0, 15000),\n+(9400122, 2290007, 1, 1, 0, 10000),\n+(9400122, 2290062, 1, 1, 0, 10000),\n+(9400122, 2290116, 1, 1, 0, 10000),\n+(9400300, 2290045, 1, 1, 0, 30000),\n+(9400300, 2290055, 1, 1, 0, 30000),\n+(9400300, 2290063, 1, 1, 0, 30000),\n+(9400300, 2290079, 1, 1, 0, 30000),\n+(9400300, 2290081, 1, 1, 0, 30000),\n+(9400300, 2290096, 1, 1, 0, 30000),\n+(9400514, 2290023, 1, 1, 0, 10000),\n+(9400514, 2290057, 1, 1, 0, 10000),\n+(9400514, 2290088, 1, 1, 0, 10000),\n+(9400514, 2290095, 1, 1, 0, 10000),\n+(9400514, 2290115, 1, 1, 0, 10000),\n+(9400514, 2290139, 1, 1, 0, 30000),\n+(9400549, 2290001, 1, 1, 0, 10000),\n+(9400549, 2290020, 1, 1, 0, 10000),\n+(9400549, 2290045, 1, 1, 0, 10000),\n+(9400549, 2290057, 1, 1, 0, 10000),\n+(9400549, 2290086, 1, 1, 0, 10000),\n+(9400575, 2290009, 1, 1, 0, 10000),\n+(9400575, 2290051, 1, 1, 0, 10000),\n+(9400575, 2290081, 1, 1, 0, 10000),\n+(9400575, 2290087, 1, 1, 0, 10000),\n+(9400575, 2290107, 1, 1, 0, 10000),\n+(9400575, 2290123, 1, 1, 0, 10000),\n+(9400580, 2290004, 1, 1, 0, 500),\n+(9400580, 2290024, 1, 1, 0, 500),\n+(9400580, 2290083, 1, 1, 0, 500),\n+(9400580, 2290087, 1, 1, 0, 500),\n+(9400580, 2290103, 1, 1, 0, 500),\n+(9400580, 2290121, 1, 1, 0, 500),\n+(9400582, 2290005, 1, 1, 0, 500),\n+(9400582, 2290010, 1, 1, 0, 500),\n+(9400582, 2290029, 1, 1, 0, 500),\n+(9400582, 2290047, 1, 1, 0, 500),\n+(9400582, 2290049, 1, 1, 0, 500),\n+(9400582, 2290074, 1, 1, 0, 500),\n+(9400582, 2290079, 1, 1, 0, 500),\n+(9400582, 2290081, 1, 1, 0, 500),\n+(9400582, 2290135, 1, 1, 0, 1500),\n+(9400590, 2290088, 1, 1, 0, 15000),\n+(9400590, 2290125, 1, 1, 0, 15000),\n+(9400590, 2290135, 1, 1, 0, 45000),\n+(9400591, 2290039, 1, 1, 0, 15000),\n+(9400591, 2290074, 1, 1, 0, 15000),\n+(9400591, 2290113, 1, 1, 0, 15000),\n+(9400592, 2290047, 1, 1, 0, 15000),\n+(9400592, 2290123, 1, 1, 0, 15000),\n+(9400592, 2290131, 1, 1, 0, 45000),\n+(9400593, 2290069, 1, 1, 0, 15000),\n+(9400593, 2290093, 1, 1, 0, 15000),\n+(9400593, 2290138, 1, 1, 0, 45000),\n+(9420513, 2290039, 1, 1, 0, 10000),\n+(9420513, 2290100, 1, 1, 0, 10000),\n+(9420513, 2290108, 1, 1, 0, 10000),\n+(9420513, 2290118, 1, 1, 0, 10000),\n+(9420513, 2290138, 1, 1, 0, 30000),\n (9420514, 2290099, 1, 1, 0, 1287),\n (9420517, 2290000, 1, 1, 0, 1287),\n (9420517, 2290008, 1, 1, 0, 1287),\n@@ -24470,75 +24471,75 @@ SET minimum_quantity = CASE\n (9420522, 2290089, 1, 1, 0, 1287),\n (9420522, 2290091, 1, 1, 0, 1287),\n (9420522, 2290107, 1, 1, 0, 1287),\n-(9420540, 2280006, 1, 1, 0, 2000),\n-(9420540, 2290119, 1, 1, 0, 2000),\n-(9420540, 2290120, 1, 1, 0, 2000),\n-(9420544, 2280007, 1, 1, 0, 80000),\n-(9420544, 2280008, 1, 1, 0, 80000),\n-(9420544, 2280009, 1, 1, 0, 80000),\n-(9420544, 2280010, 1, 1, 0, 80000),\n-(9420544, 2290002, 1, 1, 0, 80000),\n-(9420544, 2290015, 1, 1, 0, 80000),\n-(9420544, 2290022, 1, 1, 0, 80000),\n-(9420544, 2290027, 1, 1, 0, 80000),\n-(9420544, 2290034, 1, 1, 0, 80000),\n-(9420544, 2290052, 1, 1, 0, 80000),\n-(9420544, 2290054, 1, 1, 0, 80000),\n-(9420544, 2290089, 1, 1, 0, 80000),\n-(9420544, 2290094, 1, 1, 0, 80000),\n-(9420544, 2290098, 1, 1, 0, 80000),\n-(9420544, 2290105, 1, 1, 0, 80000),\n-(9420544, 2290110, 1, 1, 0, 80000),\n-(9420544, 2290119, 1, 1, 0, 80000),\n-(9420549, 2280007, 1, 1, 0, 80000),\n-(9420549, 2280008, 1, 1, 0, 80000),\n-(9420549, 2280009, 1, 1, 0, 80000),\n-(9420549, 2280010, 1, 1, 0, 80000),\n-(9420549, 2290002, 1, 1, 0, 80000),\n-(9420549, 2290015, 1, 1, 0, 80000),\n-(9420549, 2290022, 1, 1, 0, 80000),\n-(9420549, 2290027, 1, 1, 0, 80000),\n-(9420549, 2290034, 1, 1, 0, 80000),\n-(9420549, 2290052, 1, 1, 0, 80000),\n-(9420549, 2290054, 1, 1, 0, 80000),\n-(9420549, 2290089, 1, 1, 0, 80000),\n-(9420549, 2290094, 1, 1, 0, 80000),\n-(9420549, 2290098, 1, 1, 0, 80000),\n-(9420549, 2290105, 1, 1, 0, 80000),\n-(9420549, 2290110, 1, 1, 0, 80000),\n-(9420549, 2290119, 1, 1, 0, 80000),\n-(9500166, 2290044, 1, 1, 0, 2000),\n-(9500173, 2290018, 1, 1, 0, 40000),\n-(9500173, 2290019, 1, 1, 0, 40000),\n-(9500173, 2290032, 1, 1, 0, 40000),\n-(9500173, 2290042, 1, 1, 0, 40000),\n-(9500173, 2290058, 1, 1, 0, 40000),\n-(9500173, 2290068, 1, 1, 0, 40000),\n-(9500173, 2290072, 1, 1, 0, 40000),\n-(9500173, 2290092, 1, 1, 0, 40000),\n-(9500173, 2290099, 1, 1, 0, 40000),\n-(9500173, 2290102, 1, 1, 0, 40000),\n-(9500173, 2290119, 1, 1, 0, 40000),\n-(9500173, 2290128, 1, 1, 0, 120000),\n-(9500174, 2290002, 1, 1, 0, 40000),\n-(9500174, 2290014, 1, 1, 0, 40000),\n-(9500174, 2290030, 1, 1, 0, 40000),\n-(9500174, 2290080, 1, 1, 0, 40000),\n-(9500174, 2290130, 1, 1, 0, 120000),\n-(9500180, 2290010, 1, 1, 0, 40000),\n-(9500180, 2290028, 1, 1, 0, 40000),\n-(9500180, 2290126, 1, 1, 0, 120000),\n-(9500181, 2290010, 1, 1, 0, 40000),\n-(9500181, 2290028, 1, 1, 0, 40000),\n-(9500181, 2290126, 1, 1, 0, 120000),\n-(9500331, 2290010, 1, 1, 0, 40000),\n-(9500331, 2290028, 1, 1, 0, 40000),\n-(9500331, 2290126, 1, 1, 0, 120000),\n-(9500332, 2290132, 1, 1, 0, 120000),\n-(9500333, 2290006, 1, 1, 0, 40000),\n-(9500333, 2290030, 1, 1, 0, 40000),\n-(9500333, 2290032, 1, 1, 0, 40000),\n-(9500333, 2290060, 1, 1, 0, 40000),\n-(9500333, 2290076, 1, 1, 0, 40000),\n-(9500333, 2290104, 1, 1, 0, 40000),\n-(9500333, 2290117, 1, 1, 0, 40000);\n\\ No newline at end of file\n+(9420540, 2280006, 1, 1, 0, 500),\n+(9420540, 2290119, 1, 1, 0, 500),\n+(9420540, 2290120, 1, 1, 0, 500),\n+(9420544, 2280007, 1, 1, 0, 20000),\n+(9420544, 2280008, 1, 1, 0, 20000),\n+(9420544, 2280009, 1, 1, 0, 20000),\n+(9420544, 2280010, 1, 1, 0, 20000),\n+(9420544, 2290002, 1, 1, 0, 20000),\n+(9420544, 2290015, 1, 1, 0, 20000),\n+(9420544, 2290022, 1, 1, 0, 20000),\n+(9420544, 2290027, 1, 1, 0, 20000),\n+(9420544, 2290034, 1, 1, 0, 20000),\n+(9420544, 2290052, 1, 1, 0, 20000),\n+(9420544, 2290054, 1, 1, 0, 20000),\n+(9420544, 2290089, 1, 1, 0, 20000),\n+(9420544, 2290094, 1, 1, 0, 20000),\n+(9420544, 2290098, 1, 1, 0, 20000),\n+(9420544, 2290105, 1, 1, 0, 20000),\n+(9420544, 2290110, 1, 1, 0, 20000),\n+(9420544, 2290119, 1, 1, 0, 20000),\n+(9420549, 2280007, 1, 1, 0, 20000),\n+(9420549, 2280008, 1, 1, 0, 20000),\n+(9420549, 2280009, 1, 1, 0, 20000),\n+(9420549, 2280010, 1, 1, 0, 20000),\n+(9420549, 2290002, 1, 1, 0, 20000),\n+(9420549, 2290015, 1, 1, 0, 20000),\n+(9420549, 2290022, 1, 1, 0, 20000),\n+(9420549, 2290027, 1, 1, 0, 20000),\n+(9420549, 2290034, 1, 1, 0, 20000),\n+(9420549, 2290052, 1, 1, 0, 20000),\n+(9420549, 2290054, 1, 1, 0, 20000),\n+(9420549, 2290089, 1, 1, 0, 20000),\n+(9420549, 2290094, 1, 1, 0, 20000),\n+(9420549, 2290098, 1, 1, 0, 20000),\n+(9420549, 2290105, 1, 1, 0, 20000),\n+(9420549, 2290110, 1, 1, 0, 20000),\n+(9420549, 2290119, 1, 1, 0, 20000),\n+(9500166, 2290044, 1, 1, 0, 500),\n+(9500173, 2290018, 1, 1, 0, 10000),\n+(9500173, 2290019, 1, 1, 0, 10000),\n+(9500173, 2290032, 1, 1, 0, 10000),\n+(9500173, 2290042, 1, 1, 0, 10000),\n+(9500173, 2290058, 1, 1, 0, 10000),\n+(9500173, 2290068, 1, 1, 0, 10000),\n+(9500173, 2290072, 1, 1, 0, 10000),\n+(9500173, 2290092, 1, 1, 0, 10000),\n+(9500173, 2290099, 1, 1, 0, 10000),\n+(9500173, 2290102, 1, 1, 0, 10000),\n+(9500173, 2290119, 1, 1, 0, 10000),\n+(9500173, 2290128, 1, 1, 0, 30000),\n+(9500174, 2290002, 1, 1, 0, 10000),\n+(9500174, 2290014, 1, 1, 0, 10000),\n+(9500174, 2290030, 1, 1, 0, 10000),\n+(9500174, 2290080, 1, 1, 0, 10000),\n+(9500174, 2290130, 1, 1, 0, 30000),\n+(9500180, 2290010, 1, 1, 0, 10000),\n+(9500180, 2290028, 1, 1, 0, 10000),\n+(9500180, 2290126, 1, 1, 0, 30000),\n+(9500181, 2290010, 1, 1, 0, 10000),\n+(9500181, 2290028, 1, 1, 0, 10000),\n+(9500181, 2290126, 1, 1, 0, 30000),\n+(9500331, 2290010, 1, 1, 0, 10000),\n+(9500331, 2290028, 1, 1, 0, 10000),\n+(9500331, 2290126, 1, 1, 0, 30000),\n+(9500332, 2290132, 1, 1, 0, 30000),\n+(9500333, 2290006, 1, 1, 0, 10000),\n+(9500333, 2290030, 1, 1, 0, 10000),\n+(9500333, 2290032, 1, 1, 0, 10000),\n+(9500333, 2290060, 1, 1, 0, 10000),\n+(9500333, 2290076, 1, 1, 0, 10000),\n+(9500333, 2290104, 1, 1, 0, 10000),\n+(9500333, 2290117, 1, 1, 0, 10000);\n\\ No newline at end of file"}, {"sha": "0a253cd9a88ee43ce239b2409fa5236180295cc8", "filename": "src/client/MapleCharacter.java", "status": "modified", "additions": 80, "deletions": 39, "changes": 119, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/client/MapleCharacter.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/client/MapleCharacter.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/MapleCharacter.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -22,6 +22,7 @@\n  */\n package client;\n \n+import server.minigame.MapleRockPaperScissor;\n import java.awt.Point;\n import java.lang.ref.WeakReference;\n import java.sql.Connection;\n@@ -94,11 +95,10 @@\n import server.maps.MapleMapObjectType;\n import server.maps.MapleMiniGame;\n import server.maps.MapleMiniGame.MiniGameResult;\n+import server.life.MaplePlayerNPC;\n import server.maps.MaplePlayerShop;\n import server.maps.MaplePlayerShopItem;\n import server.maps.MapleSummon;\n-import server.life.MaplePlayerNPC;\n-import server.life.MonsterDropEntry;\n import server.maps.SavedLocation;\n import server.maps.SavedLocationType;\n import server.partyquest.AriantColiseum;\n@@ -221,7 +221,7 @@\n     private AtomicInteger exp = new AtomicInteger();\n     private AtomicInteger gachaexp = new AtomicInteger();\n     private AtomicInteger meso = new AtomicInteger();\n-    private AtomicInteger chair = new AtomicInteger();\n+    private AtomicInteger chair = new AtomicInteger(-1);\n     private int merchantmeso;\n     private BuddyList buddylist;\n     private EventInstanceManager eventInstance = null;\n@@ -233,6 +233,7 @@\n     private MapleJob job = MapleJob.BEGINNER;\n     private MapleMessenger messenger = null;\n     private MapleMiniGame miniGame;\n+    private MapleRockPaperScissor rps;\n     private MapleMount maplemount;\n     private MapleParty party;\n     private MaplePet[] pets = new MaplePet[3];\n@@ -248,6 +249,7 @@\n     private SkillMacro[] skillMacros = new SkillMacro[5];\n     private List<Integer> lastmonthfameids;\n     private List<WeakReference<MapleMap>> lastVisitedMaps = new LinkedList<>();\n+    private WeakReference<MapleMap> ownedMap = new WeakReference<>(null);\n     private final Map<Short, MapleQuestStatus> quests;\n     private Set<MapleMonster> controlled = new LinkedHashSet<>();\n     private Map<Integer, String> entered = new LinkedHashMap<>();\n@@ -826,6 +828,26 @@ public int calculateMaxBaseDamage(int watk) {\n         }\n         return maxbasedamage;\n     }\n+    \n+    public int calculateMaxBaseMagicDamage() {\n+        int maxbasedamage = getTotalMagic();\n+        int totalint = getTotalInt();\n+        \n+        if (totalint > 2000) {\n+            maxbasedamage -= 2000;\n+            maxbasedamage += (int) ((0.09033024267 * totalint) + 3823.8038);\n+        } else {\n+            maxbasedamage -= totalint;\n+            \n+            if (totalint > 1700) {\n+                maxbasedamage += (int) (0.1996049769 * Math.pow(totalint, 1.300631341));\n+            } else {\n+                maxbasedamage += (int) (0.1996049769 * Math.pow(totalint, 1.290631341));\n+            }\n+        }\n+        \n+        return (maxbasedamage * 107) / 100;\n+    }\n \n     public void setCombo(short count) {\n         if (count < combocounter) {\n@@ -1664,6 +1686,14 @@ public void visitMap(MapleMap map) {\n             petLock.unlock();\n         }\n     }\n+    \n+    public void setOwnedMap(MapleMap map) {\n+        ownedMap = new WeakReference<>(map);\n+    }\n+    \n+    public MapleMap getOwnedMap() {\n+        return ownedMap.get();\n+    }\n \n     public void notifyMapTransferToPartner(int mapid) {\n         if(partnerId > 0) {\n@@ -2435,7 +2465,7 @@ private void updateChairHealStats() {\n     }\n     \n     private void startChairTask() {\n-        if (chair.get() == 0) {\n+        if (chair.get() < 0) {\n             return;\n         }\n         \n@@ -2644,8 +2674,8 @@ public void giveDebuff(final MapleDisease disease, MobSkill skill) {\n                 chrLock.unlock();\n             }\n             \n-            if (disease == MapleDisease.SEDUCE && chair.get() != 0) {\n-                sitChair(0);\n+            if (disease == MapleDisease.SEDUCE && chair.get() < 0) {\n+                sitChair(-1);\n             }\n             \n             final List<Pair<MapleDisease, Integer>> debuff = Collections.singletonList(new Pair<>(disease, Integer.valueOf(skill.getX())));\n@@ -5080,7 +5110,7 @@ public int getTotalLuk() {\n     public int getTotalMagic() {\n         return localmagic;\n     }\n-\n+    \n     public int getTotalWatk() {\n         return localwatk;\n     }\n@@ -5339,6 +5369,10 @@ public MaplePlayerShop getPlayerShop() {\n         return playerShop;\n     }\n     \n+    public MapleRockPaperScissor getRPS() { // thanks inhyuk for suggesting RPS addition\n+        return rps;\n+    }\n+    \n     public void setGMLevel(int level) {\n         this.gmLevel = Math.min(level, 6);\n         this.gmLevel = Math.max(level, 0);\n@@ -5356,6 +5390,7 @@ public void closePlayerInteractions() {\n         closeTrade();\n         closePlayerShop();\n         closeMiniGame(true);\n+        closeRPS();\n         closeHiredMerchant(false);\n         closePlayerMessenger();\n         \n@@ -5512,23 +5547,19 @@ public int getPossibleReports() {\n \n     public final byte getQuestStatus(final int quest) {\n         synchronized (quests) {\n-            for (final MapleQuestStatus q : quests.values()) {\n-                if (q.getQuest().getId() == quest) {\n-                    return (byte) q.getStatus().getId();\n-                }\n+            MapleQuestStatus mqs = quests.get((short) quest);\n+            if (mqs != null) {\n+                return (byte) mqs.getStatus().getId();\n+            } else {\n+                return 0;\n             }\n-            return 0;\n         }\n     }\n     \n     public final MapleQuestStatus getMapleQuestStatus(final int quest) {\n         synchronized (quests) {\n-            for (final MapleQuestStatus q : quests.values()) {\n-                if (q.getQuest().getId() == quest) {\n-                    return q;\n-                }\n-            }\n-            return null;\n+            MapleQuestStatus mqs = quests.get((short) quest);\n+            return mqs;\n         }\n     }\n \n@@ -6085,15 +6116,11 @@ public boolean attemptCatchFish(int baitLevel) {\n     public void leaveMap() {\n         releaseControlledMonsters();\n         visibleMapObjects.clear();\n-        setChair(0);\n+        setChair(-1);\n         if (hpDecreaseTask != null) {\n             hpDecreaseTask.cancel(false);\n         }\n         \n-        if (map.unclaimOwnership(this)) {\n-            map.dropMessage(5, \"This lawn is now free real estate.\");\n-        }\n-        \n         AriantColiseum arena = this.getAriantColiseum();\n         if (arena != null) {\n             arena.leaveArena(this);\n@@ -7411,12 +7438,12 @@ private void playerDead() {\n     \n     private void unsitChairInternal() {\n         int chairid = chair.get();\n-        if (chairid != 0) {\n+        if (chairid >= 0) {\n             if (ItemConstants.isFishingChair(chairid)) {\n                 this.getWorldServer().unregisterFisherPlayer(this);\n             }\n             \n-            setChair(0);\n+            setChair(-1);\n             if (unregisterChairBuff()) {\n                 getMap().broadcastMessage(this, MaplePacketCreator.cancelForeignChairSkillEffect(this.getId()), false);\n             }\n@@ -7430,22 +7457,24 @@ private void unsitChairInternal() {\n     public void sitChair(int itemId) {\n         if (client.tryacquireClient()) {\n             try {\n-                if (itemId >= 1000000) {    // sit on item chair\n-                    if (chair.get() == 0) {\n-                        setChair(itemId);\n-                        getMap().broadcastMessage(this, MaplePacketCreator.showChair(this.getId(), itemId), false);\n-                    }\n-                    announce(MaplePacketCreator.enableActions());\n-                } else if (itemId != 0) {    // sit on map chair\n-                    if (chair.get() == 0) {\n-                        setChair(itemId);\n-                        if (registerChairBuff()) {\n-                            getMap().broadcastMessage(this, MaplePacketCreator.giveForeignChairSkillEffect(this.getId()), false);\n+                if (this.isLoggedinWorld()) {\n+                    if (itemId >= 1000000) {    // sit on item chair\n+                        if (chair.get() < 0) {\n+                            setChair(itemId);\n+                            getMap().broadcastMessage(this, MaplePacketCreator.showChair(this.getId(), itemId), false);\n+                        }\n+                        announce(MaplePacketCreator.enableActions());\n+                    } else if (itemId >= 0) {    // sit on map chair\n+                        if (chair.get() < 0) {\n+                            setChair(itemId);\n+                            if (registerChairBuff()) {\n+                                getMap().broadcastMessage(this, MaplePacketCreator.giveForeignChairSkillEffect(this.getId()), false);\n+                            }\n+                            announce(MaplePacketCreator.cancelChair(itemId));\n                         }\n-                        announce(MaplePacketCreator.cancelChair(itemId));\n+                    } else {    // stand up\n+                        unsitChairInternal();\n                     }\n-                } else {    // stand up\n-                    unsitChairInternal();\n                 }\n             } finally {\n                 client.releaseClient();\n@@ -8955,6 +8984,18 @@ public void setMonsterBookCover(int bookCover) {\n     public void setName(String name) {\n         this.name = name;\n     }\n+    \n+    public void setRPS(MapleRockPaperScissor rps) {\n+        this.rps = rps;\n+    }\n+    \n+    public void closeRPS() {\n+        MapleRockPaperScissor rps = this.rps;\n+        if (rps != null) {\n+            rps.dispose(client);\n+            setRPS(null);\n+        }\n+    }\n \n     public void changeName(String name) {\n         FredrickProcessor.removeFredrickReminders(this.getId());"}, {"sha": "8f1a45514aa685275b1ab7e2a628fe339d762b76", "filename": "src/client/command/Command.java", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/client/command/Command.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/client/command/Command.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/command/Command.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -27,6 +27,7 @@\n \n public abstract class Command {\n \n+    protected int rank;\n     protected String description;\n \n     public abstract void execute(MapleClient client, String[] params);\n@@ -38,6 +39,14 @@ public String getDescription() {\n     protected void setDescription(String description) {\n         this.description = description;\n     }\n+    \n+    public int getRank() {\n+        return rank;\n+    }\n+\n+    public void setRank(int rank) {\n+        this.rank = rank;\n+    }\n \n     protected String joinStringFrom(String arr[], int start) {\n         StringBuilder builder = new StringBuilder();"}, {"sha": "b9d6e0fc6efc049f5aa53c50b4673fae1541255e", "filename": "src/client/command/CommandsExecutor.java", "status": "modified", "additions": 18, "deletions": 17, "changes": 35, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/client/command/CommandsExecutor.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/client/command/CommandsExecutor.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/command/CommandsExecutor.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -62,7 +62,7 @@ public static boolean isCommand(MapleClient client, String content){\n         return heading == USER_HEADING;\n     }\n \n-    private HashMap<String, RegisteredCommand> registeredCommands = new HashMap<>();\n+    private HashMap<String, Command> registeredCommands = new HashMap<>();\n     private Pair<List<String>, List<String>> levelCommandsCursor;\n     private List<Pair<List<String>, List<String>>> commandsNameDesc = new ArrayList<>();\n \n@@ -94,7 +94,7 @@ public void handle(MapleClient client, String message){\n     \n     private void handleInternal(MapleClient client, String message){\n         if (client.getPlayer().getMapId() == 300000012) {\n-            client.getPlayer().yellowMessage(\"You not have permission to use this command while in jail.\");\n+            client.getPlayer().yellowMessage(\"You do not have permission to use commands while in jail.\");\n             return;\n         }\n         final String splitRegex = \"[ ]\";\n@@ -107,13 +107,13 @@ private void handleInternal(MapleClient client, String message){\n         final String commandName = splitedMessage[0].toLowerCase();\n         final String[] lowercaseParams = splitedMessage[1].toLowerCase().split(splitRegex);\n         \n-        final RegisteredCommand command = registeredCommands.get(commandName);\n+        final Command command = registeredCommands.get(commandName);\n         if (command == null){\n             client.getPlayer().yellowMessage(\"Command '\" + commandName + \"' is not available. See @commands for a list of available commands.\");\n             return;\n         }\n         if (client.getPlayer().gmLevel() < command.getRank()){\n-            client.getPlayer().yellowMessage(\"You not have permission to use this command.\");\n+            client.getPlayer().yellowMessage(\"You do not have permission to use this command.\");\n             return;\n         }\n         String[] params;\n@@ -122,16 +122,9 @@ private void handleInternal(MapleClient client, String message){\n         } else {\n             params = new String[]{};\n         }\n-        try {\n-            Command commandInstance = command.getCommandClass().newInstance();\n-            commandInstance.execute(client, params);\n-            writeLog(client, message);\n-        } catch (InstantiationException e) {\n-            e.printStackTrace();\n-        } catch (IllegalAccessException e) {\n-            e.printStackTrace();\n-        }\n-\n+        \n+        command.execute(client, params);\n+        writeLog(client, message);\n     }\n \n     private void writeLog(MapleClient client, String command){\n@@ -172,11 +165,19 @@ private void addCommand(String syntax, int rank,  Class<? extends Command> comma\n             return;\n         }\n         \n-        RegisteredCommand registeredCommand = new RegisteredCommand(commandClass, rank);\n-        \n         String commandName = syntax.toLowerCase();\n         addCommandInfo(commandName, commandClass);\n-        registeredCommands.put(commandName, registeredCommand);\n+        \n+        try {\n+            Command commandInstance = commandClass.newInstance();     // thanks Halcyon for noticing commands getting reinstanced every call\n+            commandInstance.setRank(rank);\n+            \n+            registeredCommands.put(commandName, commandInstance);\n+        } catch (InstantiationException e) {\n+            e.printStackTrace();\n+        } catch (IllegalAccessException e) {\n+            e.printStackTrace();\n+        }\n     }\n \n     private void registerLv0Commands(){"}, {"sha": "1f6e5c0cdc8d7e3c40aeeb9c11a6d948b881efd7", "filename": "src/client/command/commands/gm0/MapOwnerClaimCommand.java", "status": "modified", "additions": 13, "deletions": 4, "changes": 17, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/client/command/commands/gm0/MapOwnerClaimCommand.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/client/command/commands/gm0/MapOwnerClaimCommand.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/command/commands/gm0/MapOwnerClaimCommand.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -27,6 +27,7 @@\n import client.MapleCharacter;\n import client.MapleClient;\n import constants.ServerConstants;\n+import server.maps.MapleMap;\n \n public class MapOwnerClaimCommand extends Command {\n     {\n@@ -41,12 +42,20 @@ public void execute(MapleClient c, String[] params) {\n                 \n                 if (ServerConstants.USE_MAP_OWNERSHIP_SYSTEM) {\n                     if (chr.getEventInstance() == null) {\n-                        if (chr.getMap().unclaimOwnership(chr)) {\n-                            chr.dropMessage(5, \"This lawn is now free real estate.\");\n-                        } else if (chr.getMap().claimOwnership(chr)) {\n+                        MapleMap ownedMap = chr.getOwnedMap();  // thanks Conrad for suggesting not unlease a map as soon as player exits it\n+                        if (ownedMap != null) {\n+                            ownedMap.unclaimOwnership(chr);\n+                            \n+                            if (chr.getMap() == ownedMap) {\n+                                chr.dropMessage(5, \"This lawn is now free real estate.\");\n+                                return;\n+                            }\n+                        }\n+                        \n+                        if (chr.getMap().claimOwnership(chr)) {\n                             chr.dropMessage(5, \"You have leased this lawn for a while, until you leave here or after 1 minute of inactivity.\");\n                         } else {\n-                            chr.dropMessage(5, \"This lawn has already been leased by another player.\");\n+                            chr.dropMessage(5, \"This lawn has already been leased by a player.\");\n                         }\n                     } else {\n                         chr.dropMessage(5, \"This lawn cannot be leased.\");"}, {"sha": "dcd3b7626446f99e2eefe9cbb44070e44241b2de", "filename": "src/client/command/commands/gm1/GotoCommand.java", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/client/command/commands/gm1/GotoCommand.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/client/command/commands/gm1/GotoCommand.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/command/commands/gm1/GotoCommand.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -105,7 +105,7 @@ public void execute(MapleClient c, String[] params) {\n             gotomaps = new HashMap<>(GameConstants.GOTO_AREAS);     // distinct map registry for GM/users suggested thanks to Vcoc\n             gotomaps.putAll(GameConstants.GOTO_TOWNS);  // thanks Halcyon for pointing out duplicates on listed entries functionality\n         } else {\n-            gotomaps = new HashMap<>(GameConstants.GOTO_TOWNS);\n+            gotomaps = GameConstants.GOTO_TOWNS;\n         }\n         \n         if (gotomaps.containsKey(params[0])) {"}, {"sha": "d1153fc8ce5500a9b91fd401994db43684b8823b", "filename": "src/client/command/commands/gm2/IdCommand.java", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/client/command/commands/gm2/IdCommand.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/client/command/commands/gm2/IdCommand.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/command/commands/gm2/IdCommand.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -55,7 +55,7 @@ public void run() {\n                         }\n                         sb.append(String.format(\"Results found: #r%d#k | Returned: #b%d#k/100 | Refine search query to improve time.\", resultList.size(), count) + \"\\r\\n\");\n                         \n-                        player.getClient().getAbstractPlayerInteraction().npcTalk(9010000, sb.toString());\n+                        player.getAbstractPlayerInteraction().npcTalk(9010000, sb.toString());\n                     } else {\n                         player.yellowMessage(String.format(\"Id not found for item: %s, of type: %s.\", queryItem, params[0]));\n                     }"}, {"sha": "3ea851b0f94662a5f95b8bcabbc32f7e78f9ed1f", "filename": "src/client/command/commands/gm3/QuestCompleteCommand.java", "status": "modified", "additions": 2, "deletions": 9, "changes": 11, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/client/command/commands/gm3/QuestCompleteCommand.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/client/command/commands/gm3/QuestCompleteCommand.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/command/commands/gm3/QuestCompleteCommand.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -26,7 +26,6 @@\n import client.command.Command;\n import client.MapleClient;\n import client.MapleCharacter;\n-import server.quest.MapleQuest;\n \n public class QuestCompleteCommand extends Command {\n     {\n@@ -45,14 +44,8 @@ public void execute(MapleClient c, String[] params) {\n         int questId = Integer.parseInt(params[0]);\n \n         if (player.getQuestStatus(questId) == 1) {\n-            MapleQuest quest = MapleQuest.getInstance(questId);\n-            if (quest != null) {\n-                int npcid = quest.getNpcRequirement(true);\n-                quest.forceComplete(player, npcid);\n-                player.dropMessage(5, \"QUEST \" + questId + \" completed.\");\n-            } else {    // should not occur\n-                player.dropMessage(5, \"QUESTID \" + questId + \" is invalid.\");\n-            }\n+            c.getAbstractPlayerInteraction().forceCompleteQuest(questId);\n+            player.dropMessage(5, \"QUEST \" + questId + \" completed.\");\n         } else {\n             player.dropMessage(5, \"QUESTID \" + questId + \" not started or already completed.\");\n         }"}, {"sha": "c609e66d64265dcc7230fdbf8cce2d3788bc32d9", "filename": "src/client/command/commands/gm3/QuestStartCommand.java", "status": "modified", "additions": 2, "deletions": 9, "changes": 11, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/client/command/commands/gm3/QuestStartCommand.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/client/command/commands/gm3/QuestStartCommand.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/command/commands/gm3/QuestStartCommand.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -26,7 +26,6 @@\n import client.command.Command;\n import client.MapleClient;\n import client.MapleCharacter;\n-import server.quest.MapleQuest;\n \n public class QuestStartCommand extends Command {\n     {\n@@ -45,14 +44,8 @@ public void execute(MapleClient c, String[] params) {\n         int questid = Integer.parseInt(params[0]);\n \n         if (player.getQuestStatus(questid) == 0) {\n-            MapleQuest quest = MapleQuest.getInstance(questid);\n-            if (quest != null) {\n-                int npcid = quest.getNpcRequirement(false);\n-                quest.forceStart(player, npcid);\n-                player.dropMessage(5, \"QUEST \" + questid + \" started.\");\n-            } else {\n-                player.dropMessage(5, \"QUESTID \" + questid + \" is invalid.\");\n-            }\n+            c.getAbstractPlayerInteraction().forceStartQuest(questid);\n+            player.dropMessage(5, \"QUEST \" + questid + \" started.\");\n         } else {\n             player.dropMessage(5, \"QUESTID \" + questid + \" already started/completed.\");\n         }"}, {"sha": "bb2cab3d6b7daa71d5a0daec0f2867f7ff1a5601", "filename": "src/client/command/commands/gm5/DebugCommand.java", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/client/command/commands/gm5/DebugCommand.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/client/command/commands/gm5/DebugCommand.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/command/commands/gm5/DebugCommand.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -34,7 +34,6 @@\n import server.maps.MapleMapObject;\n import server.maps.MapleMapObjectType;\n import server.maps.MapleReactor;\n-import tools.MaplePacketCreator;\n \n import java.awt.*;\n import java.util.Arrays;"}, {"sha": "c0490b64a64c7a236e3a143bb453adb5255bcb82", "filename": "src/client/processor/DueyProcessor.java", "status": "modified", "additions": 40, "deletions": 16, "changes": 56, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/client/processor/DueyProcessor.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/client/processor/DueyProcessor.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/processor/DueyProcessor.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -112,10 +112,14 @@ public byte getCode() {\n         return null;\n     }\n     \n-    private static String getCurrentDate() {\n+    private static String getCurrentDate(boolean quick) {\n         String date = \"\";\n         Calendar cal = Calendar.getInstance();\n-        int day = cal.get(Calendar.DATE) - 1; // instant duey ?\n+        if (!quick) {\n+            cal.add(Calendar.DATE, 1);\n+        }\n+        \n+        int day = cal.get(Calendar.DATE);\n         int month = cal.get(Calendar.MONTH) + 1; // its an array of months.\n         int year = cal.get(Calendar.YEAR);\n         date += day <= 9 ? \"0\" + day + \"-\" : \"\" + day + \"-\";\n@@ -132,7 +136,7 @@ private static void showDueyNotification(MapleClient c, MapleCharacter player) {\n         ResultSet rs = null;\n         try {\n             con = DatabaseConnection.getConnection();\n-            ps = con.prepareStatement(\"SELECT Mesos FROM dueypackages WHERE ReceiverId = ? and Checked = 1\");\n+            ps = con.prepareStatement(\"SELECT SenderName, Type FROM dueypackages WHERE ReceiverId = ? AND Checked = 1 ORDER BY Type DESC\");\n             ps.setInt(1, player.getId());\n             rs = ps.executeQuery();\n             if (rs.next()) {\n@@ -143,11 +147,11 @@ private static void showDueyNotification(MapleClient c, MapleCharacter player) {\n                     pss.executeUpdate();\n                     pss.close();\n                     con2.close();\n+                    \n+                    c.announce(MaplePacketCreator.sendDueyParcelReceived(rs.getString(\"SenderName\"), rs.getInt(\"Type\") == 1));\n                 } catch (SQLException e) {\n                     e.printStackTrace();\n                 }\n-\n-                c.announce(MaplePacketCreator.sendDueyNotification(false));\n             }\n         } catch (SQLException e) {\n             e.printStackTrace();\n@@ -241,24 +245,25 @@ private static DueyPackage getPackageFromDB(ResultSet rs) {\n         return packages;\n     }\n     \n-    private static int createPackage(int mesos, String message, String sender, int toCid) {\n+    private static int createPackage(int mesos, String message, String sender, int toCid, boolean quick) {\n         try {\n             Connection con = null;\n             PreparedStatement ps = null;\n             ResultSet rs = null;\n         \n             try {\n                 con = DatabaseConnection.getConnection();\n-                ps = con.prepareStatement(\"INSERT INTO `dueypackages` (ReceiverId, SenderName, Mesos, TimeStamp, Message, Checked) VALUES (?, ?, ?, ?, ?, 1)\", Statement.RETURN_GENERATED_KEYS);\n+                ps = con.prepareStatement(\"INSERT INTO `dueypackages` (ReceiverId, SenderName, Mesos, TimeStamp, Message, Type, Checked) VALUES (?, ?, ?, ?, ?, ?, 1)\", Statement.RETURN_GENERATED_KEYS);\n                 ps.setInt(1, toCid);\n                 ps.setString(2, sender);\n                 ps.setInt(3, mesos);\n-                ps.setString(4, getCurrentDate());\n+                ps.setString(4, getCurrentDate(quick));\n                 ps.setString(5, message);\n+                ps.setInt(6, quick ? 1 : 0);\n \n                 int updateRows = ps.executeUpdate();\n                 if (updateRows < 1) {\n-                    FilePrinter.printError(FilePrinter.INSERT_CHAR, \"Error trying to create package [mesos: \" + mesos + \", \" + sender + \", to CharacterId: \" + toCid + \"]\");\n+                    FilePrinter.printError(FilePrinter.INSERT_CHAR, \"Error trying to create package [mesos: \" + mesos + \", \" + sender + \", quick: \" + quick + \", to CharacterId: \" + toCid + \"]\");\n                     return -1;\n                 }\n                 \n@@ -267,7 +272,7 @@ private static int createPackage(int mesos, String message, String sender, int t\n                 if (rs.next()) {\n                     packageId = rs.getInt(1);\n                 } else {\n-                    FilePrinter.printError(FilePrinter.INSERT_CHAR, \"Failed inserting package [mesos: \" + mesos + \", \" + sender + \", to CharacterId: \" + toCid + \"]\");\n+                    FilePrinter.printError(FilePrinter.INSERT_CHAR, \"Failed inserting package [mesos: \" + mesos + \", \" + sender + \", quick: \" + quick + \", to CharacterId: \" + toCid + \"]\");\n                     return -1;\n                 }\n                 \n@@ -348,10 +353,18 @@ private static int addPackageItemFromInventory(int packageId, MapleClient c, byt\n         return 0;\n     }\n     \n-    public static void dueySendItem(MapleClient c, byte invTypeId, short itemPos, short amount, int sendMesos, String sendMessage, String recipient) {\n+    public static void dueySendItem(MapleClient c, byte invTypeId, short itemPos, short amount, int sendMesos, String sendMessage, String recipient, boolean quick) {\n         if (c.tryacquireClient()) {\n             try {\n-                final int fee = 5000 + MapleTrade.getFee(sendMesos);\n+                int fee = MapleTrade.getFee(sendMesos);\n+                if (!quick) {\n+                    fee += 5000;\n+                } else if (!c.getPlayer().haveItem(5330000)) {\n+                    AutobanFactory.PACKET_EDIT.alert(c.getPlayer(), c.getPlayer().getName() + \" tried to packet edit with Quick Delivery on duey.\");\n+                    FilePrinter.printError(FilePrinter.EXPLOITS + c.getPlayer().getName() + \".txt\", c.getPlayer().getName() + \" tried to use duey with Quick Delivery, mesos \" + sendMesos + \" and amount \" + amount);\n+                    c.disconnect(true, false);\n+                    return;\n+                }\n                 \n                 long finalcost = (long) sendMesos + fee;\n                 if (finalcost < 0 || finalcost > Integer.MAX_VALUE || (amount < 1 && sendMesos == 0)) {\n@@ -385,7 +398,11 @@ public static void dueySendItem(MapleClient c, byte invTypeId, short itemPos, sh\n                     return;\n                 }\n                 \n-                int packageId = createPackage(sendMesos, sendMessage, c.getPlayer().getName(), recipientCid);\n+                if (quick) {\n+                    MapleInventoryManipulator.removeById(c, MapleInventoryType.CASH, 5330000, (short) 1, false, false);\n+                }\n+                \n+                int packageId = createPackage(sendMesos, sendMessage, c.getPlayer().getName(), recipientCid, quick);\n                 if (packageId == -1) {\n                     c.announce(MaplePacketCreator.sendDueyMSG(DueyProcessor.Actions.TOCLIENT_SEND_ENABLE_ACTIONS.getCode()));\n                     return;\n@@ -490,18 +507,25 @@ public static void dueyClaimPackage(MapleClient c, int packageId) {\n         }\n     }\n     \n-    public static void dueySendTalk(MapleClient c) {\n+    public static void dueySendTalk(MapleClient c, boolean quickDelivery) {\n         if (c.tryacquireClient()) {\n             try {\n-                c.announce(MaplePacketCreator.sendDuey((byte) 8, loadPackages(c.getPlayer())));\n+                long timeNow = System.currentTimeMillis();\n+                if(timeNow - c.getPlayer().getNpcCooldown() < ServerConstants.BLOCK_NPC_RACE_CONDT) {\n+                    c.announce(MaplePacketCreator.enableActions());\n+                    return;\n+                }\n+                c.getPlayer().setNpcCooldown(timeNow);\n+                \n+                c.announce(MaplePacketCreator.sendDuey(quickDelivery ? 0x1A : 0x8, loadPackages(c.getPlayer())));\n             } finally {\n                 c.releaseClient();\n             }\n         }\n     }\n     \n     public static void dueyCreatePackage(Item item, int mesos, String sender, int recipientCid) {\n-        int packageId = createPackage(mesos, \"\", sender, recipientCid);\n+        int packageId = createPackage(mesos, \"\", sender, recipientCid, false);\n         if (packageId != -1) {\n             insertPackageItem(packageId, item);\n         }"}, {"sha": "7c4ec841dcff274741146090945018e7ec2645b8", "filename": "src/client/processor/MakerProcessor.java", "status": "modified", "additions": 86, "deletions": 48, "changes": 134, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/client/processor/MakerProcessor.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/client/processor/MakerProcessor.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/processor/MakerProcessor.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -33,6 +33,7 @@\n import java.util.List;\n import java.util.Map;\n import server.MakerItemFactory;\n+import server.MakerItemFactory.MakerItemCreateEntry;\n import server.MapleItemInformationProvider;\n import tools.FilePrinter;\n import tools.MaplePacketCreator;\n@@ -44,6 +45,7 @@\n  * @author Ronan\n  */\n public class MakerProcessor {\n+    \n     private static MapleItemInformationProvider ii = MapleItemInformationProvider.getInstance();\n \n     public static void makerAction(SeekableLittleEndianAccessor slea, MapleClient c) {\n@@ -54,37 +56,39 @@ public static void makerAction(SeekableLittleEndianAccessor slea, MapleClient c)\n                 int toDisassemble = -1, pos = -1;\n                 boolean makerSucceeded = true;\n \n-                MakerItemFactory.MakerItemCreateEntry recipe;\n+                MakerItemCreateEntry recipe;\n                 Map<Integer, Short> reagentids = new LinkedHashMap<>();\n                 int stimulantid = -1;\n \n                 if(type == 3) {    // building monster crystal\n                     int fromLeftover = toCreate;\n                     toCreate = ii.getMakerCrystalFromLeftover(toCreate);\n                     if(toCreate == -1) {\n-                        c.announce(MaplePacketCreator.serverNotice(1, ii.getName(toCreate) + \" is unavailable for Monster Crystal conversion.\"));\n+                        c.announce(MaplePacketCreator.serverNotice(1, ii.getName(fromLeftover) + \" is unavailable for Monster Crystal conversion.\"));\n+                        c.announce(MaplePacketCreator.makerEnableActions());\n                         return;\n                     }\n-\n-                    recipe = MakerItemFactory.generateLeftoverCrystalEntry(fromLeftover);\n+                    \n+                    recipe = MakerItemFactory.generateLeftoverCrystalEntry(fromLeftover, toCreate);\n                 } else if(type == 4) {  // disassembling\n                     slea.readInt(); // 1... probably inventory type\n                     pos = slea.readInt();\n \n                     Item it = c.getPlayer().getInventory(MapleInventoryType.EQUIP).getItem((short) pos);\n                     if(it != null && it.getItemId() == toCreate) {\n-                        Pair<Integer, Integer> p;\n-\n-                        if((p = generateDisassemblyInfo(toCreate)) != null) {\n-                            recipe = MakerItemFactory.generateDisassemblyCrystalEntry(p.getLeft(), p.getRight());\n-                            toDisassemble = toCreate;\n-                            toCreate = ii.getMakerCrystalFromEquip(toCreate);\n+                        toDisassemble = toCreate;\n+                        \n+                        Pair<Integer, List<Pair<Integer, Integer>>> p = generateDisassemblyInfo(toDisassemble);\n+                        if(p != null) {\n+                            recipe = MakerItemFactory.generateDisassemblyCrystalEntry(toDisassemble, p.getLeft(), p.getRight());\n                         } else {\n                             c.announce(MaplePacketCreator.serverNotice(1, ii.getName(toCreate) + \" is unavailable for Monster Crystal disassembly.\"));\n+                            c.announce(MaplePacketCreator.makerEnableActions());\n                             return;\n                         }\n                     } else {\n                         c.announce(MaplePacketCreator.serverNotice(1, \"An unknown error occurred when trying to apply that item for disassembly.\"));\n+                        c.announce(MaplePacketCreator.makerEnableActions());\n                         return;\n                     }\n                 } else {\n@@ -132,6 +136,7 @@ public static void makerAction(SeekableLittleEndianAccessor slea, MapleClient c)\n                         if(!reagentids.isEmpty()) {\n                             if(!removeOddMakerReagents(toCreate, reagentids)) {\n                                 c.announce(MaplePacketCreator.serverNotice(1, \"You can only use WATK and MATK Strengthening Gems on weapon items.\"));\n+                                c.announce(MaplePacketCreator.makerEnableActions());\n                                 return;\n                             }\n                         }\n@@ -146,65 +151,80 @@ public static void makerAction(SeekableLittleEndianAccessor slea, MapleClient c)\n                     case -1:// non-available for Maker itemid has been tried to forge\n                         FilePrinter.printError(FilePrinter.EXPLOITS, \"Player \" + c.getPlayer().getName() + \" tried to craft itemid \" + toCreate + \" using the Maker skill.\");\n                         c.announce(MaplePacketCreator.serverNotice(1, \"The requested item could not be crafted on this operation.\"));\n+                        c.announce(MaplePacketCreator.makerEnableActions());\n                         break;\n \n                     case 1: // no items\n-                        c.announce(MaplePacketCreator.serverNotice(1, \"You don't have all required items in your inventory to make \" + recipe.getRewardAmount() + \" \" + ii.getName(toCreate) + \".\"));\n+                        c.announce(MaplePacketCreator.serverNotice(1, \"You don't have all required items in your inventory to make \" + ii.getName(toCreate) + \".\"));\n+                        c.announce(MaplePacketCreator.makerEnableActions());\n                         break;\n \n                     case 2: // no meso\n                         c.announce(MaplePacketCreator.serverNotice(1, \"You don't have enough mesos (\" + GameConstants.numberWithCommas(recipe.getCost()) + \") to complete this operation.\"));\n+                        c.announce(MaplePacketCreator.makerEnableActions());\n                         break;\n \n                     case 3: // no req level\n                         c.announce(MaplePacketCreator.serverNotice(1, \"You don't have enough level to complete this operation.\"));\n+                        c.announce(MaplePacketCreator.makerEnableActions());\n                         break;\n \n                     case 4: // no req skill level\n                         c.announce(MaplePacketCreator.serverNotice(1, \"You don't have enough Maker level to complete this operation.\"));\n+                        c.announce(MaplePacketCreator.makerEnableActions());\n+                        break;\n+                        \n+                    case 5: // inventory full\n+                        c.announce(MaplePacketCreator.serverNotice(1, \"Your inventory is full.\"));\n+                        c.announce(MaplePacketCreator.makerEnableActions());\n                         break;\n \n                     default:\n-                        if (MapleInventoryManipulator.checkSpace(c, toCreate, (short) recipe.getRewardAmount(), \"\")) {\n+                        if(toDisassemble != -1) {\n+                            MapleInventoryManipulator.removeFromSlot(c, MapleInventoryType.EQUIP, (short) pos, (short) 1, false);\n+                        } else {\n                             for (Pair<Integer, Integer> p : recipe.getReqItems()) {\n-                                c.getAbstractPlayerInteraction().gainItem(p.getLeft(), (short) -p.getRight());\n+                                c.getAbstractPlayerInteraction().gainItem(p.getLeft(), (short) -p.getRight(), false);\n                             }\n+                        }\n \n-                            if(toDisassemble != -1) {\n-                                MapleInventoryManipulator.removeFromSlot(c, MapleInventoryType.EQUIP, (short) pos, (short) 1, false);\n-                                c.announce(MaplePacketCreator.getShowItemGain(toDisassemble, (short) -1, true));\n-                            }\n-\n-                            int cost = recipe.getCost();\n-                            if(stimulantid == -1 && reagentids.isEmpty()) {\n-                                if(cost > 0) c.getPlayer().gainMeso(-cost);\n-\n+                        int cost = recipe.getCost();\n+                        if(stimulantid == -1 && reagentids.isEmpty()) {\n+                            if(cost > 0) c.getPlayer().gainMeso(-cost, false);\n+                            \n+                            for (Pair<Integer, Integer> p : recipe.getGainItems()) {\n                                 c.getPlayer().setCS(true);\n-                                c.getAbstractPlayerInteraction().gainItem(toCreate, (short) recipe.getRewardAmount());\n+                                c.getAbstractPlayerInteraction().gainItem(p.getLeft(), p.getRight().shortValue(), false);\n                                 c.getPlayer().setCS(false);\n-                            } else {\n-                                if(stimulantid != -1) c.getAbstractPlayerInteraction().gainItem(stimulantid, (short) -1);\n-                                if(!reagentids.isEmpty()) {\n-                                    for(Map.Entry<Integer, Short> r : reagentids.entrySet()) {\n-                                        c.getAbstractPlayerInteraction().gainItem(r.getKey(), (short) (-1 * r.getValue()));\n-                                    }\n+                            }\n+                        } else {\n+                            toCreate = recipe.getGainItems().get(0).getLeft();\n+                            \n+                            if(stimulantid != -1) c.getAbstractPlayerInteraction().gainItem(stimulantid, (short) -1, false);\n+                            if(!reagentids.isEmpty()) {\n+                                for(Map.Entry<Integer, Short> r : reagentids.entrySet()) {\n+                                    c.getAbstractPlayerInteraction().gainItem(r.getKey(), (short) (-1 * r.getValue()), false);\n                                 }\n-\n-                                if(cost > 0) c.getPlayer().gainMeso(-cost);\n-                                makerSucceeded = addBoostedMakerItem(c, toCreate, stimulantid, reagentids);\n                             }\n \n-                            if(makerSucceeded) c.announce(MaplePacketCreator.serverNotice(1, \"You have successfully created \" + recipe.getRewardAmount() + \" \" + ii.getName(toCreate) + \".\"));\n-                            else c.getPlayer().dropMessage(5, \"The Maker skill lights up, but the skill winds up as if nothing happened.\");\n-\n-                            c.announce(MaplePacketCreator.showMakerEffect(makerSucceeded));\n-                            c.getPlayer().getMap().broadcastMessage(c.getPlayer(), MaplePacketCreator.showForeignMakerEffect(c.getPlayer().getId(), makerSucceeded), false);\n+                            if(cost > 0) c.getPlayer().gainMeso(-cost, false);\n+                            makerSucceeded = addBoostedMakerItem(c, toCreate, stimulantid, reagentids);\n+                        }\n \n-                            if(toCreate == 4260003 && type == 3 && c.getPlayer().getQuestStatus(6033) == 1) {\n-                                c.getAbstractPlayerInteraction().setQuestProgress(6033, 1);\n-                            }\n+                        // thanks inhyuk for noticing missing MAKER_RESULT packets\n+                        if (type == 3) {\n+                            c.announce(MaplePacketCreator.makerResultCrystal(recipe.getGainItems().get(0).getLeft(), recipe.getReqItems().get(0).getLeft()));\n+                        } else if (type == 4) {\n+                            c.announce(MaplePacketCreator.makerResultDesynth(recipe.getReqItems().get(0).getLeft(), recipe.getCost(), recipe.getGainItems()));\n                         } else {\n-                            c.announce(MaplePacketCreator.serverNotice(1, \"Your inventory is full.\"));\n+                            c.announce(MaplePacketCreator.makerResult(makerSucceeded, recipe.getGainItems().get(0).getLeft(), recipe.getGainItems().get(0).getRight(), recipe.getCost(), recipe.getReqItems(), stimulantid, new LinkedList<>(reagentids.keySet())));\n+                        }\n+                        \n+                        c.announce(MaplePacketCreator.showMakerEffect(makerSucceeded));\n+                        c.getPlayer().getMap().broadcastMessage(c.getPlayer(), MaplePacketCreator.showForeignMakerEffect(c.getPlayer().getId(), makerSucceeded), false);\n+\n+                        if(toCreate == 4260003 && type == 3 && c.getPlayer().getQuestStatus(6033) == 1) {\n+                            c.getAbstractPlayerInteraction().setQuestProgress(6033, 1);\n                         }\n                 }\n             } finally {\n@@ -271,12 +291,12 @@ private static int getMakerReagentSlots(int itemId) {\n         }\n     }\n     \n-    private static Pair<Integer, Integer> generateDisassemblyInfo(int itemId) {\n+    private static Pair<Integer, List<Pair<Integer, Integer>>> generateDisassemblyInfo(int itemId) {\n         int recvFee = ii.getMakerDisassembledFee(itemId);\n         if(recvFee > -1) {\n-            int recvQty = ii.getMakerDisassembledQuantity(itemId);\n-            if(recvQty > 0) {\n-                return new Pair<>(recvFee, recvQty);\n+            List<Pair<Integer, Integer>> gains = ii.getMakerDisassembledItems(itemId);\n+            if(!gains.isEmpty()) {\n+                return new Pair<>(recvFee, gains);\n             }\n         }\n         \n@@ -287,7 +307,7 @@ public static int getMakerSkillLevel(MapleCharacter chr) {\n         return chr.getSkillLevel((chr.getJob().getId() / 1000) * 10000000 + 1007);\n     }\n     \n-    private static short getCreateStatus(MapleClient c, MakerItemFactory.MakerItemCreateEntry recipe) {\n+    private static short getCreateStatus(MapleClient c, MakerItemCreateEntry recipe) {\n         if(recipe == null) {\n             return -1;\n         }\n@@ -308,10 +328,29 @@ private static short getCreateStatus(MapleClient c, MakerItemFactory.MakerItemCr\n             return 4;\n         }\n         \n+        List<Integer> addItemids = new LinkedList<>();\n+        List<Integer> addQuantity = new LinkedList<>();\n+        List<Integer> rmvItemids = new LinkedList<>();\n+        List<Integer> rmvQuantity = new LinkedList<>();\n+        \n+        for (Pair<Integer, Integer> p : recipe.getReqItems()) {\n+            rmvItemids.add(p.getLeft());\n+            rmvQuantity.add(p.getRight());\n+        }\n+        \n+        for (Pair<Integer, Integer> p : recipe.getGainItems()) {\n+            addItemids.add(p.getLeft());\n+            addQuantity.add(p.getRight());\n+        }\n+        \n+        if (!c.getAbstractPlayerInteraction().canHoldAllAfterRemoving(addItemids, addQuantity, rmvItemids, rmvQuantity)) {\n+            return 5;\n+        }\n+        \n         return 0;\n     }\n \n-    private static boolean hasItems(MapleClient c, MakerItemFactory.MakerItemCreateEntry recipe) {\n+    private static boolean hasItems(MapleClient c, MakerItemCreateEntry recipe) {\n         for (Pair<Integer, Integer> p : recipe.getReqItems()) {\n             int itemId = p.getLeft();\n             if (c.getPlayer().getInventory(ItemConstants.getInventoryType(itemId)).countById(itemId) < p.getRight()) {\n@@ -397,7 +436,6 @@ private static boolean addBoostedMakerItem(MapleClient c, int itemid, int stimul\n         }\n         \n         MapleInventoryManipulator.addFromDrop(c, item, false, -1);\n-        c.announce(MaplePacketCreator.getShowItemGain(itemid, (short) 1, true));\n         return true;\n     }\n }"}, {"sha": "ab7ea7d24065598bb2b063e6e4f64ea355c64c50", "filename": "src/constants/ItemConstants.java", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/constants/ItemConstants.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/constants/ItemConstants.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/constants/ItemConstants.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -247,4 +247,12 @@ public static boolean isFace(int itemId) {\n     public static boolean isHair(int itemId) {\n         return itemId >= 30000 && itemId < 35000;\n     }\n+    \n+    public static boolean isFaceExpression(int itemId) {\n+        return itemId / 10000 == 516;\n+    }\n+    \n+    public static boolean isChair(int itemId) {\n+        return itemId / 10000 == 301;\n+    }\n }"}, {"sha": "14c27aaf1ecd399d8bef32e6f9f1f864003348d2", "filename": "src/constants/ScriptableNPCConstants.java", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/constants/ScriptableNPCConstants.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/constants/ScriptableNPCConstants.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/constants/ScriptableNPCConstants.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -17,6 +17,7 @@\n     \n     public static final Set<Pair<Integer, String>> SCRIPTABLE_NPCS = new HashSet<Pair<Integer, String>>(){{\n         add(new Pair<>(9200000, \"Cody\"));\n+        add(new Pair<>(9001105, \"Grandpa Moon Bunny\"));\n     }};\n     \n }"}, {"sha": "8ebbe4537b00797eab882775a6f39ff5ed72036f", "filename": "src/constants/ServerConstants.java", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/constants/ServerConstants.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/constants/ServerConstants.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/constants/ServerConstants.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -94,7 +94,7 @@\n     public static final boolean USE_ENFORCE_JOB_LEVEL_RANGE = false;//Caps the player level on the minimum required to advance their current jobs.\n     public static final boolean USE_ENFORCE_JOB_SP_RANGE = false;   //Caps the player SP level on the total obtainable by their current jobs. After changing jobs, missing SP will be retrieved.\n     public static final boolean USE_ENFORCE_ITEM_SUGGESTION = false;//Forces the Owl of Minerva and the Cash Shop to always display the defined item array instead of those featured by the players.\n-    public static final boolean USE_ENFORCE_UNMERCHABLE_CASH = false;//Forces players to not sell CASH items via merchants.\n+    public static final boolean USE_ENFORCE_UNMERCHABLE_CASH = true;//Forces players to not sell CASH items via merchants.\n     public static final boolean USE_ENFORCE_UNMERCHABLE_PET = false; //Forces players to not sell pets via merchants. (since non-named pets gets dirty name and other possible DB-related issues)\n     public static final boolean USE_ENFORCE_MERCHANT_SAVE = true;   //Forces automatic DB save on merchant owners, at every item movement on shop.\n     public static final boolean USE_ENFORCE_MDOOR_POSITION = false; //Forces mystic door to be spawned near spawnpoints.\n@@ -112,7 +112,7 @@\n     public static final boolean USE_ENABLE_CHAT_LOG = false;        //Write in-game chat to log\n     public static final boolean USE_REBIRTH_SYSTEM = false;         //Flag to enable/disable rebirth system\n     public static final boolean USE_MAP_OWNERSHIP_SYSTEM = true;    //Flag to enable/disable map ownership system\n-    public static final boolean USE_FISHING_SYSTEM = true;          //Flag to enable/disable fishing system\n+    public static final boolean USE_FISHING_SYSTEM = true;          //Flag to enable/disable custom fishing system\n     public static final boolean USE_NPCS_SCRIPTABLE = true;         //Flag to enable/disable serverside predefined script NPCs.\n     \n     //Events/PQs Configuration"}, {"sha": "0112631ffff383056e5a962b72d0502381a97fa6", "filename": "src/net/PacketProcessor.java", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/PacketProcessor.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/PacketProcessor.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/PacketProcessor.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -163,6 +163,7 @@ public void reset(int channel) {\n             registerHandler(RecvOpcode.CANCEL_BUFF, new CancelBuffHandler());\n             registerHandler(RecvOpcode.CANCEL_ITEM_EFFECT, new CancelItemEffectHandler());\n             registerHandler(RecvOpcode.PLAYER_INTERACTION, new PlayerInteractionHandler());\n+            registerHandler(RecvOpcode.RPS_ACTION, new RPSActionHandler());\n             registerHandler(RecvOpcode.DISTRIBUTE_AP, new DistributeAPHandler());\n             registerHandler(RecvOpcode.DISTRIBUTE_SP, new DistributeSPHandler());\n             registerHandler(RecvOpcode.CHANGE_KEYMAP, new KeymapChangeHandler());"}, {"sha": "623728b1778c44db4149782314691ec595f2f167", "filename": "src/net/opcodes/SendOpcode.java", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/opcodes/SendOpcode.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/opcodes/SendOpcode.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/opcodes/SendOpcode.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -239,6 +239,7 @@\n     MESO_BAG_MESSAGE(0xD2),\n     UPDATE_QUEST_INFO(0xD3),\n     PLAYER_HINT(0xD6),\n+    MAKER_RESULT(0xD9),\n     KOREAN_EVENT(0xDB),\n     OPEN_UI(0xDC),\n     LOCK_UI(0xDD),"}, {"sha": "f20261411fc8b5a9b7946a34f34d3a9d0b631249", "filename": "src/net/server/Server.java", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/Server.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/Server.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/Server.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -57,6 +57,7 @@\n import net.server.guild.MapleAlliance;\n import net.server.guild.MapleGuild;\n import net.server.guild.MapleGuildCharacter;\n+import net.server.worker.BossLogWorker;\n import net.server.worker.CharacterDiseaseWorker;\n import net.server.worker.CouponWorker;\n import net.server.worker.EventRecallCoordinatorWorker;\n@@ -96,6 +97,7 @@\n import server.MapleSkillbookInformationProvider;\n import server.ThreadManager;\n import server.TimerManager;\n+import server.expeditions.MapleExpeditionBossLog;\n import server.life.MaplePlayerNPCFactory;\n import server.quest.MapleQuest;\n import tools.AutoJCE;\n@@ -527,6 +529,16 @@ private static long getTimeLeftForNextHour() {\n         return Math.max(0, nextHour.getTimeInMillis() - System.currentTimeMillis());\n     }\n     \n+    private static long getTimeLeftForNextDay() {\n+        Calendar nextDay = Calendar.getInstance();\n+        nextDay.add(Calendar.DAY_OF_MONTH, 1);\n+        nextDay.set(Calendar.HOUR, 0);\n+        nextDay.set(Calendar.MINUTE, 0);\n+        nextDay.set(Calendar.SECOND, 0);\n+        \n+        return Math.max(0, nextDay.getTimeInMillis() - System.currentTimeMillis());\n+    }\n+    \n     public Map<Integer, Integer> getCouponRates() {\n         return couponRates;\n     }\n@@ -895,6 +907,10 @@ public void init() {\n         tMan.register(new FredrickWorker(), 60 * 60 * 1000, 60 * 60 * 1000);\n         tMan.register(new InvitationWorker(), 30 * 1000, 30 * 1000);\n         \n+        timeLeft = getTimeLeftForNextDay();\n+        MapleExpeditionBossLog.resetBossLogTable();\n+        tMan.register(new BossLogWorker(), 24 * 60 * 60 * 1000, timeLeft);\n+        \n         long timeToTake = System.currentTimeMillis();\n         SkillFactory.loadAllSkills();\n         System.out.println(\"Skills loaded in \" + ((System.currentTimeMillis() - timeToTake) / 1000.0) + \" seconds\");"}, {"sha": "1c14e708b5cb35c4d32134f41f49bab213683448", "filename": "src/net/server/channel/Channel.java", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/channel/Channel.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/channel/Channel.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/Channel.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -199,12 +199,12 @@ public final void shutdown() {\n             disconnectAwayPlayers();\n             players.disconnectAll();\n             \n-            mapManager.dispose();\n-            mapManager = null;\n-            \n             eventSM.cancel();\n             eventSM = null;\n             \n+            mapManager.dispose();\n+            mapManager = null;\n+            \n             closeChannelSchedules();\n             players = null;\n             \n@@ -683,7 +683,7 @@ public boolean addMiniDungeon(int dungeonid) {\n             if(dungeons.containsKey(dungeonid)) return false;\n             \n             MapleMiniDungeonInfo mmdi = MapleMiniDungeonInfo.getDungeon(dungeonid);\n-            MapleMiniDungeon mmd = new MapleMiniDungeon(mmdi.getBase(), 30);    // all minidungeons timeout on 30 mins\n+            MapleMiniDungeon mmd = new MapleMiniDungeon(mmdi.getBase(), this.getMapFactory().getMap(mmdi.getDungeonId()).getTimeLimit());   // thanks Conrad for noticing hardcoded time limit for minidungeons\n             \n             dungeons.put(dungeonid, mmd);\n             return true;"}, {"sha": "e6672f5c444546cc31bdb9b22fd3c9160e4cf061", "filename": "src/net/server/channel/handlers/CancelChairHandler.java", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/channel/handlers/CancelChairHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/channel/handlers/CancelChairHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/CancelChairHandler.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -32,8 +32,11 @@\n     public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {\n         int id = slea.readShort();\n         MapleCharacter mc = c.getPlayer();\n-        if(!mc.isLoggedinWorld()) return;\n         \n-        mc.sitChair(id == -1 ? 0 : id);\n+        if (id >= mc.getMap().getSeats()) {\n+            return;\n+        }\n+        \n+        mc.sitChair(id);\n     }\n }"}, {"sha": "34a07e39451267f9428b66ddea11a245bca1c355", "filename": "src/net/server/channel/handlers/DueyHandler.java", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/channel/handlers/DueyHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/channel/handlers/DueyHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/DueyHandler.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -45,8 +45,9 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n             short amount = slea.readShort();\n             int mesos = slea.readInt();\n             String recipient = slea.readMapleAsciiString();\n-            String message = slea.readByte() != 0 ? slea.readMapleAsciiString() : \"\";\n-            DueyProcessor.dueySendItem(c, inventId, itemPos, amount, mesos, message, recipient);\n+            boolean quick = slea.readByte() != 0;\n+            String message = quick ? slea.readMapleAsciiString() : \"\";\n+            DueyProcessor.dueySendItem(c, inventId, itemPos, amount, mesos, message, recipient, quick);\n         } else if (operation == DueyProcessor.Actions.TOSERVER_REMOVE_PACKAGE.getCode()) {\n             int packageid = slea.readInt();\n             \n@@ -55,6 +56,8 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n             int packageid = slea.readInt();\n             \n             DueyProcessor.dueyClaimPackage(c, packageid);\n+        } else if (operation == DueyProcessor.Actions.TOSERVER_CLAIM_PACKAGE.getCode()) {\n+            DueyProcessor.dueySendTalk(c, false);\n         }\n     }\n }"}, {"sha": "b5be532a127c02b7f221cdf447589fad18585d68", "filename": "src/net/server/channel/handlers/FaceExpressionHandler.java", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/channel/handlers/FaceExpressionHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/channel/handlers/FaceExpressionHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/FaceExpressionHandler.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -34,15 +34,17 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n         int emote = slea.readInt();\n         \n         if (emote > 7) {\n-            int emoteid = 5159992 + emote;\n-            if (chr.getInventory(ItemConstants.getInventoryType(emoteid)).findById(emoteid) == null) {\n+            int itemid = 5159992 + emote;   // thanks Rajan (Darter) for reporting unchecked emote itemid\n+            if (!ItemConstants.isFaceExpression(itemid) || chr.getInventory(ItemConstants.getInventoryType(itemid)).findById(itemid) == null) {\n                 return;\n             }\n+        } else if (emote < 1) {\n+            return;\n         }\n         \n         if(c.tryacquireClient()) {\n             try {   // expecting players never intends to wear the emote 0 (default face, that changes back after 5sec timeout)\n-                if (emote != 0 && chr.isLoggedinWorld()) {\n+                if (chr.isLoggedinWorld()) {\n                     chr.changeFaceExpression(emote);\n                 }\n             } finally {"}, {"sha": "9146417f5a1d69d291fdaa07156b9a4f554e9794", "filename": "src/net/server/channel/handlers/MobDamageMobFriendlyHandler.java", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/channel/handlers/MobDamageMobFriendlyHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/channel/handlers/MobDamageMobFriendlyHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/MobDamageMobFriendlyHandler.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -72,8 +72,15 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                                 map.addBunnyHit();\n                         }\n                 }\n+                \n+                monster.applyAndGetHpDamage(damage, false);\n+                int remainingHp = monster.getHp();\n+                if(remainingHp <= 0) {\n+                    remainingHp = 0;\n+                    monster.getMap().removeMapObject(monster);\n+                }\n \n-\t\tc.getPlayer().getMap().broadcastMessage(MaplePacketCreator.MobDamageMobFriendly(monster, damage), monster.getPosition());\n+\t\tc.getPlayer().getMap().broadcastMessage(MaplePacketCreator.MobDamageMobFriendly(monster, damage, remainingHp), monster.getPosition());\n \t\tc.announce(MaplePacketCreator.enableActions());\n \t}\n }\n\\ No newline at end of file"}, {"sha": "f6d8ac7b0df12866e3ee6e175a57807880727679", "filename": "src/net/server/channel/handlers/MobDamageMobHandler.java", "status": "modified", "additions": 67, "deletions": 4, "changes": 71, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/channel/handlers/MobDamageMobHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/channel/handlers/MobDamageMobHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/MobDamageMobHandler.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -21,31 +21,94 @@\n */\n package net.server.channel.handlers;\n \n+import java.util.Map;\n import client.MapleClient;\n import client.MapleCharacter;\n+import client.autoban.AutobanFactory;\n+import client.status.MonsterStatus;\n+import client.status.MonsterStatusEffect;\n import net.AbstractMaplePacketHandler;\n+import server.life.MapleMonster;\n+import server.life.MapleMonsterInformationProvider;\n import server.maps.MapleMap;\n+import tools.FilePrinter;\n import tools.MaplePacketCreator;\n import tools.data.input.SeekableLittleEndianAccessor;\n \n /**\n  *\n  * @author Jay Estrella\n+ * @author Ronan\n  */\n public final class MobDamageMobHandler extends AbstractMaplePacketHandler {\n     @Override\n     public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {\n         int from = slea.readInt();\n         slea.readInt();\n         int to = slea.readInt();\n-        slea.readByte();\n+        boolean magic = slea.readByte() == 0;\n         int dmg = slea.readInt();\n         MapleCharacter chr = c.getPlayer();\n         \n         MapleMap map = chr.getMap();\n-        if (map.getMonsterByOid(from) != null && map.getMonsterByOid(to) != null) {\n-            map.damageMonster(chr, map.getMonsterByOid(to), dmg);\n-            map.broadcastMessage(MaplePacketCreator.damageMonster(to, dmg));\n+        MapleMonster attacker = map.getMonsterByOid(from);\n+        MapleMonster damaged = map.getMonsterByOid(to);\n+        \n+        if (attacker != null && damaged != null) {\n+            int maxDmg = calcMaxDamage(attacker, damaged, magic);     // thanks Darter (YungMoozi) for reporting unchecked dmg\n+            \n+            if (dmg > maxDmg) {\n+                AutobanFactory.DAMAGE_HACK.alert(c.getPlayer(), \"Possible packet editing hypnotize damage exploit.\");   // thanks Rien dev team\n+                \n+                FilePrinter.printError(FilePrinter.EXPLOITS + c.getPlayer().getName() + \".txt\", c.getPlayer().getName() + \" had hypnotized \" + MapleMonsterInformationProvider.getInstance().getMobNameFromId(attacker.getId()) + \" to attack \" + MapleMonsterInformationProvider.getInstance().getMobNameFromId(damaged.getId()) + \" with damage \" + dmg + \" (max: \" + maxDmg + \")\");\n+                dmg = maxDmg;\n+            }\n+            \n+            map.damageMonster(chr, damaged, dmg);\n+            map.broadcastMessage(chr, MaplePacketCreator.damageMonster(to, dmg), false);\n+        }\n+    }\n+    \n+    private static int calcMaxDamage(MapleMonster attacker, MapleMonster damaged, boolean magic) {\n+        int attackerAtk, damagedDef, attackerLevel = attacker.getLevel();\n+        double maxDamage;\n+        if (magic) {\n+            int atkRate = calcModifier(attacker, MonsterStatus.MAGIC_ATTACK_UP, MonsterStatus.MATK);\n+            attackerAtk = (attacker.getStats().getMADamage() * atkRate) / 100;\n+            \n+            int defRate = calcModifier(damaged, MonsterStatus.MAGIC_DEFENSE_UP, MonsterStatus.MDEF);\n+            damagedDef = (damaged.getStats().getMDDamage() * defRate) / 100;\n+            \n+            maxDamage = ((attackerAtk * (1.15 + (0.025 * attackerLevel))) - (0.75 * damagedDef)) * (Math.log(Math.abs(damagedDef - attackerAtk)) / Math.log(12));\n+        } else {\n+            int atkRate = calcModifier(attacker, MonsterStatus.WEAPON_ATTACK_UP, MonsterStatus.WATK);\n+            attackerAtk = (attacker.getStats().getPADamage() * atkRate) / 100;\n+            \n+            int defRate = calcModifier(damaged, MonsterStatus.WEAPON_DEFENSE_UP, MonsterStatus.WDEF);\n+            damagedDef = (damaged.getStats().getPDDamage() * defRate) / 100;\n+            \n+            maxDamage = ((attackerAtk * (1.15 + (0.025 * attackerLevel))) - (0.75 * damagedDef)) * (Math.log(Math.abs(damagedDef - attackerAtk)) / Math.log(17));\n+        }\n+        \n+        return (int) maxDamage;\n+    }\n+    \n+    private static int calcModifier(MapleMonster monster, MonsterStatus buff, MonsterStatus nerf) {\n+        int atkModifier;\n+        final Map<MonsterStatus, MonsterStatusEffect> monsterStati = monster.getStati();\n+        \n+        MonsterStatusEffect atkBuff = monsterStati.get(buff);\n+        if (atkBuff != null) {\n+            atkModifier = atkBuff.getStati().get(buff);\n+        } else {\n+            atkModifier = 100;\n         }\n+\n+        MonsterStatusEffect atkNerf = monsterStati.get(nerf);\n+        if (atkNerf != null) {\n+            atkModifier -= atkNerf.getStati().get(nerf);\n+        }\n+        \n+        return atkModifier;\n     }\n }"}, {"sha": "a9165d8ee23d9f335690ce94d0b65738af911821", "filename": "src/net/server/channel/handlers/NPCTalkHandler.java", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/channel/handlers/NPCTalkHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/channel/handlers/NPCTalkHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/NPCTalkHandler.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -53,8 +53,7 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n             if(ServerConstants.USE_DEBUG == true) c.getPlayer().dropMessage(5, \"Talking to NPC \" + npc.getId());\n             \n             if (npc.getId() == 9010009) {   //is duey\n-                c.getPlayer().setNpcCooldown(currentServerTime());\n-                DueyProcessor.dueySendTalk(c);\n+                DueyProcessor.dueySendTalk(c, false);\n             } else {\n                 if (c.getCM() != null || c.getQM() != null) {\n                     c.announce(MaplePacketCreator.enableActions());"}, {"sha": "b51161b6ce55181f3a3bdef51fa9d15294fbf172", "filename": "src/net/server/channel/handlers/PlayerLoggedinHandler.java", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/channel/handlers/PlayerLoggedinHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/channel/handlers/PlayerLoggedinHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/PlayerLoggedinHandler.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -424,22 +424,22 @@ private static void showDueyNotification(MapleClient c, MapleCharacter player) {\n         ResultSet rs = null;\n         try {\n             con = DatabaseConnection.getConnection();\n-            ps = con.prepareStatement(\"SELECT Mesos FROM dueypackages WHERE ReceiverId = ? and Checked = 1\");\n+            ps = con.prepareStatement(\"SELECT Type FROM dueypackages WHERE ReceiverId = ? AND Checked = 1 ORDER BY Type DESC\");\n             ps.setInt(1, player.getId());\n             rs = ps.executeQuery();\n             if (rs.next()) {\n                 try {\n                     Connection con2 = DatabaseConnection.getConnection();\n-                    pss = con2.prepareStatement(\"UPDATE dueypackages SET Checked = 0 where ReceiverId = ?\");\n+                    pss = con2.prepareStatement(\"UPDATE dueypackages SET Checked = 0 WHERE ReceiverId = ?\");\n                     pss.setInt(1, player.getId());\n                     pss.executeUpdate();\n                     pss.close();\n                     con2.close();\n+                    \n+                    c.announce(MaplePacketCreator.sendDueyParcelNotification(rs.getInt(\"Type\") == 1));\n                 } catch (SQLException e) {\n                     e.printStackTrace();\n                 }\n-\n-                c.announce(MaplePacketCreator.sendDueyNotification(false));\n             }\n         } catch (SQLException e) {\n             e.printStackTrace();"}, {"sha": "50f3547bfbde9fe85fba79f63be6b3bf571392b4", "filename": "src/net/server/channel/handlers/QuestActionHandler.java", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/channel/handlers/QuestActionHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/channel/handlers/QuestActionHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/QuestActionHandler.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -38,13 +38,19 @@\n     \n     // isNpcNearby credits to GabrielSin\n     private static boolean isNpcNearby(SeekableLittleEndianAccessor slea, MapleCharacter player, MapleQuest quest, int npcId) {\n-        Point playerP = null;\n+        Point playerP;\n+        Point pos = player.getPosition();\n         \n         if(slea.available() >= 4) {\n             playerP = new Point(slea.readShort(), slea.readShort());\n+            if (playerP.distance(pos) > 1000) {     // thanks Darter (YungMoozi) for reporting unchecked player position\n+                playerP = pos;\n+            }\n+        } else {\n+            playerP = pos;\n         }\n         \n-        if (playerP != null && !quest.isAutoStart() && !quest.isAutoComplete()) {\n+        if (!quest.isAutoStart() && !quest.isAutoComplete()) {\n             MapleNPC npc = player.getMap().getNPCById(npcId);\n             if(npc == null) {\n                 return false;"}, {"sha": "f3eea78053c2ee087d017cf587cef5c6b18152fb", "filename": "src/net/server/channel/handlers/RPSActionHandler.java", "status": "added", "additions": 71, "deletions": 0, "changes": 71, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/channel/handlers/RPSActionHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/channel/handlers/RPSActionHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/RPSActionHandler.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -0,0 +1,71 @@\n+package net.server.channel.handlers;\n+\n+import client.MapleCharacter;\n+import client.MapleClient;\n+import server.minigame.MapleRockPaperScissor;\n+import net.AbstractMaplePacketHandler;\n+import tools.MaplePacketCreator;\n+import tools.data.input.SeekableLittleEndianAccessor;\n+\n+/**\n+ * @Author Arnah\n+ * @Website http://Vertisy.ca/\n+ * @since Aug 15, 2016\n+ */\n+public final class RPSActionHandler extends AbstractMaplePacketHandler{\n+\n+\t@Override\n+\tpublic final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c){\n+                MapleCharacter chr = c.getPlayer();\n+                MapleRockPaperScissor rps = chr.getRPS();\n+                \n+                if (c.tryacquireClient()) {\n+                        try {\n+                                if(slea.available() == 0 || !chr.getMap().containsNPC(9000019)){\n+                                        if(rps != null){\n+                                                rps.dispose(c);\n+                                        }\n+                                        return;\n+                                }\n+                                final byte mode = slea.readByte();\n+                                switch (mode){\n+                                        case 0: // start game\n+                                        case 5: // retry\n+                                                if(rps != null){\n+                                                        rps.reward(c);\n+                                                }\n+                                                if(chr.getMeso() >= 1000){\n+                                                        chr.setRPS(new MapleRockPaperScissor(c, mode));\n+                                                }else{\n+                                                        c.announce(MaplePacketCreator.rpsMesoError(-1));\n+                                                }\n+                                                break;\n+                                        case 1: // answer\n+                                                if(rps == null || !rps.answer(c, slea.readByte())){\n+                                                        c.announce(MaplePacketCreator.rpsMode((byte) 0x0D));// 13\n+                                                }\n+                                                break;\n+                                        case 2: // time over\n+                                                if(rps == null || !rps.timeOut(c)){\n+                                                        c.announce(MaplePacketCreator.rpsMode((byte) 0x0D));\n+                                                }\n+                                                break;\n+                                        case 3: // continue\n+                                                if(rps == null || !rps.nextRound(c)){\n+                                                        c.announce(MaplePacketCreator.rpsMode((byte) 0x0D));\n+                                                }\n+                                                break;\n+                                        case 4: // leave\n+                                                if(rps != null){\n+                                                        rps.dispose(c);\n+                                                }else{\n+                                                        c.announce(MaplePacketCreator.rpsMode((byte) 0x0D));\n+                                                }\n+                                                break;\n+                                }\n+                        } finally {\n+                            c.releaseClient();\n+                        }\n+                }\n+\t}\n+}"}, {"sha": "9655473d5275ed91c2c2ab807ddcb71a10cef27e", "filename": "src/net/server/channel/handlers/ScrollHandler.java", "status": "modified", "additions": 16, "deletions": 4, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/channel/handlers/ScrollHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/channel/handlers/ScrollHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/ScrollHandler.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -78,17 +78,17 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                 if (ItemConstants.isCleanSlate(scroll.getItemId())) {\n                     Map<String, Integer> eqStats = ii.getEquipStats(toScroll.getItemId());  // clean slate issue found thanks to Masterrulax\n                     if (eqStats == null || eqStats.get(\"tuc\") == 0) {\n-                        c.announce(MaplePacketCreator.getInventoryFull());\n+                        announceCannotScroll(c, legendarySpirit);\n                         return;\n                     }\n                 } else if (!ItemConstants.isModifierScroll(scroll.getItemId()) && ((Equip) toScroll).getUpgradeSlots() < 1) {\n-                    c.announce(MaplePacketCreator.getInventoryFull());\n+                    announceCannotScroll(c, legendarySpirit);   // thanks onechord for noticing zero upgrade slots freezing Legendary Scroll UI\n                     return;\n                 }\n \n                 List<Integer> scrollReqs = ii.getScrollReqs(scroll.getItemId());\n                 if (scrollReqs.size() > 0 && !scrollReqs.contains(toScroll.getItemId())) {\n-                    c.announce(MaplePacketCreator.getInventoryFull());\n+                    announceCannotScroll(c, legendarySpirit);\n                     return;\n                 }\n                 if (whiteScroll) {\n@@ -100,11 +100,13 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n \n                 if (!ItemConstants.isChaosScroll(scroll.getItemId()) && !ItemConstants.isCleanSlate(scroll.getItemId())) {\n                     if (!canScroll(scroll.getItemId(), toScroll.getItemId())) {\n+                        announceCannotScroll(c, legendarySpirit);\n                         return;\n                     }\n                 }\n \n                 if (ItemConstants.isCleanSlate(scroll.getItemId()) && !ii.canUseCleanSlate(toScroll)) {\n+                    announceCannotScroll(c, legendarySpirit);\n                     return;\n                 }\n \n@@ -119,11 +121,13 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                 useInventory.lockInventory();\n                 try {\n                     if (scroll.getQuantity() < 1) {\n+                        announceCannotScroll(c, legendarySpirit);\n                         return;\n                     }\n                     \n                     if (whiteScroll && !ItemConstants.isCleanSlate(scroll.getItemId())) {\n                         if (wscroll.getQuantity() < 1) {\n+                            announceCannotScroll(c, legendarySpirit);\n                             return;\n                         }\n                         \n@@ -171,7 +175,7 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                     mods.add(new ModifyInventory(0, scrolled));\n                 }\n                 c.announce(MaplePacketCreator.modifyInventory(true, mods));\n-                chr.getMap().broadcastMessage(MaplePacketCreator.getScrollEffect(chr.getId(), scrollSuccess, legendarySpirit));\n+                chr.getMap().broadcastMessage(MaplePacketCreator.getScrollEffect(chr.getId(), scrollSuccess, legendarySpirit, whiteScroll));\n                 if (dst < 0 && (scrollSuccess == Equip.ScrollResult.SUCCESS || scrollSuccess == Equip.ScrollResult.CURSE)) {\n                     chr.equipChanged();\n                 }\n@@ -180,6 +184,14 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n             }\n         }\n     }\n+    \n+    private static void announceCannotScroll(MapleClient c, boolean legendarySpirit) {\n+        if (legendarySpirit) {\n+            c.announce(MaplePacketCreator.getScrollEffect(c.getPlayer().getId(), Equip.ScrollResult.FAIL, false, false));\n+        } else {\n+            c.announce(MaplePacketCreator.getInventoryFull());\n+        }\n+    }\n \n     private static boolean canScroll(int scrollid, int itemid) {\n         int sid = scrollid / 100;"}, {"sha": "aa0aeb1fa0a7175a8979154d2d573cceb2cd3910", "filename": "src/net/server/channel/handlers/SpecialMoveHandler.java", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/channel/handlers/SpecialMoveHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/channel/handlers/SpecialMoveHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/SpecialMoveHandler.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -101,7 +101,8 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                         monster.aggroClearDamages();\n                         monster.aggroMonsterDamage(chr, 1);\n                         \n-                        // thanks onechord for pointing out Magnet disconnecting the caster (issue would actually happen upon failing to catch mob)\n+                        // thanks onechord for pointing out Magnet crashing the caster (issue would actually happen upon failing to catch mob)\n+                        // thanks Conrad for noticing Magnet crashing when trying to pull bosses and fixed mobs\n                         monster.aggroSwitchController(chr, true);\n                     }\n                 }"}, {"sha": "0cebf49aa2823d0e1bc3a198bf84ca7b562f5f81", "filename": "src/net/server/channel/handlers/SummonDamageHandler.java", "status": "modified", "additions": 44, "deletions": 4, "changes": 48, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/channel/handlers/SummonDamageHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/channel/handlers/SummonDamageHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/SummonDamageHandler.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -25,24 +25,32 @@\n import client.MapleClient;\n import client.Skill;\n import client.SkillFactory;\n+import client.autoban.AutobanFactory;\n import client.status.MonsterStatusEffect;\n import java.util.ArrayList;\n+import java.util.HashMap;\n import java.util.List;\n+import java.util.Map;\n import server.MapleStatEffect;\n import server.life.MapleMonster;\n+import server.life.MapleMonsterInformationProvider;\n import server.maps.MapleSummon;\n+import tools.FilePrinter;\n import tools.MaplePacketCreator;\n import tools.data.input.SeekableLittleEndianAccessor;\n \n public final class SummonDamageHandler extends AbstractDealDamageHandler {\n+    \n     public final class SummonAttackEntry {\n \n         private int monsterOid;\n         private int damage;\n+        private boolean magic;\n \n-        public SummonAttackEntry(int monsterOid, int damage) {\n+        public SummonAttackEntry(int monsterOid, int damage, boolean magic) {\n             this.monsterOid = monsterOid;\n             this.damage = damage;\n+            this.magic = magic;\n         }\n \n         public int getMonsterOid() {\n@@ -52,6 +60,10 @@ public int getMonsterOid() {\n         public int getDamage() {\n             return damage;\n         }\n+        \n+        public boolean isMagic() {\n+            return magic;\n+        }\n     }\n \n     @Override\n@@ -79,18 +91,34 @@ public void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {\n         slea.skip(8); //Thanks Gerald :D, I failed lol (mob x,y and summon x,y)\n         for (int x = 0; x < numAttacked; x++) {\n             int monsterOid = slea.readInt(); // attacked oid\n-            slea.skip(18);\n+            slea.skip(17);\n+            boolean magic = slea.readByte() != 0;\n             int damage = slea.readInt();\n-            allDamage.add(new SummonAttackEntry(monsterOid, damage));\n+            allDamage.add(new SummonAttackEntry(monsterOid, damage, magic));\n         }\n         player.getMap().broadcastMessage(player, MaplePacketCreator.summonAttack(player.getId(), summon.getObjectId(), direction, allDamage), summon.getPosition());\n         if (player.getMap().isOwnershipRestricted(player)) {\n             return;\n         }\n+        \n+        Map<Integer, Integer> maxDmgEntries = new HashMap<>();\n         for (SummonAttackEntry attackEntry : allDamage) {\n             int damage = attackEntry.getDamage();\n             MapleMonster target = player.getMap().getMonsterByOid(attackEntry.getMonsterOid());\n             if (target != null) {\n+                Integer maxDmg = maxDmgEntries.get(attackEntry.getMonsterOid());\n+                if (maxDmg == null) {\n+                    maxDmg = calcMaxDamage(summonEffect, player, attackEntry.isMagic());    // thanks Darter (YungMoozi) for reporting unchecked max dmg\n+                    maxDmgEntries.put(attackEntry.getMonsterOid(), maxDmg);\n+                }\n+                \n+                if (damage > maxDmg) {\n+                    AutobanFactory.DAMAGE_HACK.alert(c.getPlayer(), \"Possible packet editing summon damage exploit.\");\n+\n+                    FilePrinter.printError(FilePrinter.EXPLOITS + c.getPlayer().getName() + \".txt\", c.getPlayer().getName() + \" used a summon of skillid \" + summon.getSkill() + \" to attack \" + MapleMonsterInformationProvider.getInstance().getMobNameFromId(target.getId()) + \" with damage \" + damage + \" (max: \" + maxDmg + \")\");\n+                    damage = maxDmg;\n+                }\n+                \n                 if (damage > 0 && summonEffect.getMonsterStati().size() > 0) {\n                     if (summonEffect.makeChanceResult()) {\n                         target.applyStatus(player, new MonsterStatusEffect(summonEffect.getMonsterStati(), summonSkill, null, false), summonEffect.isPoison(), 4000);\n@@ -100,4 +128,16 @@ public void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {\n             }\n         }\n     }\n-}\n\\ No newline at end of file\n+    \n+    private static int calcMaxDamage(MapleStatEffect summonEffect, MapleCharacter player, boolean magic) {\n+        double maxDamage;\n+        \n+        if (magic) {\n+            maxDamage = player.calculateMaxBaseMagicDamage() * (0.05 * summonEffect.getMatk());\n+        } else {\n+            maxDamage = player.calculateMaxBaseDamage(player.getTotalWatk()) * (0.021 * summonEffect.getWatk());\n+        }\n+        \n+        return (int) maxDamage;\n+    }\n+}"}, {"sha": "c1a4cb0ee27c637aca394196fbeb299fbbb505b7", "filename": "src/net/server/channel/handlers/TakeDamageHandler.java", "status": "modified", "additions": 8, "deletions": 17, "changes": 25, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/channel/handlers/TakeDamageHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/channel/handlers/TakeDamageHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/TakeDamageHandler.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -44,7 +44,6 @@\n import net.AbstractMaplePacketHandler;\n import client.inventory.manipulator.MapleInventoryManipulator;\n import server.MapleStatEffect;\n-import server.life.MapleLifeFactory;\n import server.life.MapleLifeFactory.loseItem;\n import server.life.MapleMonster;\n import server.life.MobAttackInfo;\n@@ -88,16 +87,6 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                     }\n                 }\n                 \n-                if (monsteridfrom == 9300166 && attacker == null) {\n-                    if (c.tryacquireClient()) {\n-                        try {\n-                            attacker = MapleLifeFactory.getMonster(monsteridfrom);\n-                        } finally {\n-                            c.releaseClient();\n-                        }\n-                    }\n-                }\n-                \n                 if (attacker != null) {\n                     if (attacker.isBuffed(MonsterStatus.NEUTRALISE)) {\n                         return;\n@@ -149,7 +138,7 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                             map.removeMapObject(attacker);\n                         }\n                     }\n-                } else {\n+                } else if (damagefrom != 0 || !map.removeSelfDestructive(oid)) {    // thanks inhyuk for noticing self-destruct damage not being handled properly\n                     return;\n                 }\n             } catch(ClassCastException e) {\n@@ -196,21 +185,23 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                     }\n \t        }\n         }\n+        \n         if (damage == -1) {\n             fake = 4020002 + (chr.getJob().getId() / 10 - 40) * 100000;\n         }\n         \n+        if (damage > 0) {\n+            chr.getAutobanManager().resetMisses();\n+        } else {\n+            chr.getAutobanManager().addMiss();\n+        }\n+        \n         //in dojo player cannot use pot, so deadly attacks should be turned off as well\n         if(is_deadly && chr.getMap().isDojoMap() && !ServerConstants.USE_DEADLY_DOJO) {\n             damage = 0;\n             mpattack = 0;\n         }\n         \n-        if (damage == 0) {\n-            chr.getAutobanManager().addMiss();\n-        } else {\n-            chr.getAutobanManager().resetMisses();\n-        }\n         if (damage > 0 && !chr.isHidden()) {\n             if (attacker != null) {\n                 if (damagefrom == -1) {"}, {"sha": "eba9f4be099c59147203e06c9f404cd38395c17d", "filename": "src/net/server/channel/handlers/UseCashItemHandler.java", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/channel/handlers/UseCashItemHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/channel/handlers/UseCashItemHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/UseCashItemHandler.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -294,11 +294,9 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                         if (item == null) //hack\n                         {\n                             return;\n-                        } else if (item.isUntradeable() || ii.isUnmerchable(item.getItemId())) {\n-                            player.dropMessage(1, \"You cannot trade this item.\");\n-                            c.announce(MaplePacketCreator.enableActions());\n-                            return;\n                         }\n+                        \n+                        // thanks Conrad for noticing that untradeable items should be allowed in megas\n                     }\n                     Server.getInstance().broadcastMessage(c.getWorld(), MaplePacketCreator.itemMegaphone(msg, whisper, c.getChannel(), item));\n                     break;\n@@ -398,7 +396,7 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n             ii.getItemEffect(itemId).applyTo(player);\n             remove(c, position, itemId);\n         } else if (itemType == 533) {\n-            DueyProcessor.dueySendTalk(c);\n+            DueyProcessor.dueySendTalk(c, true);\n         } else if (itemType == 537) {\n             if (GameConstants.isFreeMarketRoom(player.getMapId())) {\n                 player.dropMessage(5, \"You cannot use the chalkboard here.\");\n@@ -569,7 +567,7 @@ public void run() {\n                     client.announce(MaplePacketCreator.modifyInventory(true, mods));\n \n                     ScrollResult scrollResult = scrolled.getLevel() > curlevel ? ScrollResult.SUCCESS : ScrollResult.FAIL;\n-                    player.getMap().broadcastMessage(MaplePacketCreator.getScrollEffect(player.getId(), scrollResult, false));\n+                    player.getMap().broadcastMessage(MaplePacketCreator.getScrollEffect(player.getId(), scrollResult, false, false));\n                     if (eSlot < 0 && (scrollResult == ScrollResult.SUCCESS)) {\n                         player.equipChanged();\n                     }"}, {"sha": "353b36f08745cb366178152c93b6851658da833f", "filename": "src/net/server/channel/handlers/UseChairHandler.java", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/channel/handlers/UseChairHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/channel/handlers/UseChairHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/UseChairHandler.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -23,14 +23,17 @@\n \n import client.MapleClient;\n import client.inventory.MapleInventoryType;\n+import constants.ItemConstants;\n import net.AbstractMaplePacketHandler;\n import tools.data.input.SeekableLittleEndianAccessor;\n \n public final class UseChairHandler extends AbstractMaplePacketHandler {\n     @Override\n     public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {\n         int itemId = slea.readInt();\n-        if (c.getPlayer().getInventory(MapleInventoryType.SETUP).findById(itemId) == null) {\n+        \n+        // thanks Darter (YungMoozi) for reporting unchecked chair item\n+        if (!ItemConstants.isChair(itemId) || c.getPlayer().getInventory(MapleInventoryType.SETUP).findById(itemId) == null) {\n             return;\n         }\n         "}, {"sha": "0711e9d3b46ec38835fda4fd5249312eef194715", "filename": "src/net/server/worker/BossLogWorker.java", "status": "renamed", "additions": 13, "deletions": 23, "changes": 36, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/worker/BossLogWorker.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/net/server/worker/BossLogWorker.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/worker/BossLogWorker.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -1,5 +1,5 @@\n /*\n-    This file is part of the HeavenMS MapleStory Server, commands OdinMS-based\n+    This file is part of the HeavenMS MapleStory Server\n     Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n@@ -17,27 +17,17 @@\n     You should have received a copy of the GNU Affero General Public License\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n-\n-/*\n-   @Author: Arthur L - Refactored command content into modules\n-*/\n-package client.command;\n-\n-class RegisteredCommand {\n-\n-    private final Class<? extends Command> commandClass;\n-    private final int rank;\n-\n-    RegisteredCommand(Class<? extends Command> commandClass, int rank){\n-        this.commandClass = commandClass;\n-        this.rank = rank;\n-    }\n-\n-    public Class<? extends Command> getCommandClass() {\n-        return commandClass;\n-    }\n-\n-    public int getRank() {\n-        return rank;\n+package net.server.worker;\n+\n+import server.expeditions.MapleExpeditionBossLog;\n+\n+/**\n+ * @author Ronan\n+ */\n+public class BossLogWorker implements Runnable {\n+    \n+    @Override\n+    public void run() {\n+        MapleExpeditionBossLog.resetBossLogTable();\n     }\n }", "previous_filename": "src/client/command/RegisteredCommand.java"}, {"sha": "9d107b28ab76ba6b521dfae40e5e0064853d2e19", "filename": "src/scripting/AbstractPlayerInteraction.java", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/scripting/AbstractPlayerInteraction.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/scripting/AbstractPlayerInteraction.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/scripting/AbstractPlayerInteraction.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -1073,12 +1073,12 @@ public boolean createExpedition(MapleExpeditionType type) {\n         \n \tpublic boolean createExpedition(MapleExpeditionType type, boolean silent, int minPlayers, int maxPlayers) {\n \t\tMapleExpedition exped = new MapleExpedition(getPlayer(), type, silent, minPlayers, maxPlayers);\n-\t\treturn getPlayer().getClient().getChannelServer().addExpedition(exped);\n+\t\treturn exped.addChannelExpedition(getPlayer().getClient().getChannelServer());\n \t}\n \n \tpublic void endExpedition(MapleExpedition exped) {\n \t\texped.dispose(true);\n-\t\tgetPlayer().getClient().getChannelServer().removeExpedition(exped);\n+\t\texped.removeChannelExpedition(getPlayer().getClient().getChannelServer());\n \t}\n \n \tpublic MapleExpedition getExpedition(MapleExpeditionType type) {"}, {"sha": "9b0048c4a979d0b0c18eaa5408d004795ffc38e0", "filename": "src/scripting/event/EventInstanceManager.java", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/scripting/event/EventInstanceManager.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/scripting/event/EventInstanceManager.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/scripting/event/EventInstanceManager.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -1062,7 +1062,7 @@ private void disposeExpedition() {\n                         \n                         sL.lock();\n                         try {\n-                                em.getChannelServer().removeExpedition(expedition);\n+                                expedition.removeChannelExpedition(em.getChannelServer());\n                         } finally {\n                                 sL.unlock();\n                         }\n@@ -1127,8 +1127,8 @@ public final boolean isExpeditionTeamLackingNow(boolean leavingEventMap, int min\n                 if(eventCleared) {\n                         if(leavingEventMap && getPlayerCount() <= 1) return true;\n                 } else {\n-                        if(leavingEventMap && getLeaderId() == quitter.getId()) return true;\n-                        if(getPlayerCount() <= (ServerConstants.USE_ENABLE_SOLO_EXPEDITIONS ? 1 : minPlayers)) return true;\n+                        // thanks Conrad for noticing expeditions don't need to have neither the leader nor meet the minimum requirement inside the event\n+                        if(getPlayerCount() <= 1) return true;\n                 }\n                 \n                 return false;"}, {"sha": "ae61a27e786fff5b4e37e8f424345d3c8ddbdf6e", "filename": "src/server/DueyPackage.java", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/server/DueyPackage.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/server/DueyPackage.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/DueyPackage.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -78,6 +78,10 @@ public int getPackageId() {\n     public long sentTimeInMilliseconds() {\n         Calendar cal = Calendar.getInstance();\n         cal.set(year, month, day);\n+        cal.set(Calendar.HOUR, 0);\n+        cal.set(Calendar.MINUTE, 0);\n+        cal.set(Calendar.SECOND, 0);\n+        cal.set(Calendar.MILLISECOND, 0);\n         return cal.getTimeInMillis();\n     }\n "}, {"sha": "bdfaf6a38af2b7e8facb637f3270c1006fc649fd", "filename": "src/server/MakerItemFactory.java", "status": "modified", "additions": 23, "deletions": 12, "changes": 35, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/server/MakerItemFactory.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/server/MakerItemFactory.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/MakerItemFactory.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -57,14 +57,19 @@ public static MakerItemCreateEntry getItemCreateEntry(int toCreate, int stimulan\n         return makerEntry;\n     }\n     \n-    public static MakerItemCreateEntry generateLeftoverCrystalEntry(int fromLeftoverid) {\n-        MakerItemCreateEntry ret = new MakerItemCreateEntry(0, 0, 1, 1);\n+    public static MakerItemCreateEntry generateLeftoverCrystalEntry(int fromLeftoverid, int crystalId) {\n+        MakerItemCreateEntry ret = new MakerItemCreateEntry(0, 0, 1);\n         ret.addReqItem(fromLeftoverid, 100);\n+        ret.addGainItem(crystalId, 1);\n         return ret;\n     }\n \n-    public static MakerItemCreateEntry generateDisassemblyCrystalEntry(int cost, int crystalGain) {     // equipment at specific position already taken\n-        MakerItemCreateEntry ret = new MakerItemCreateEntry(cost, 0, 1, crystalGain);\n+    public static MakerItemCreateEntry generateDisassemblyCrystalEntry(int fromEquipid, int cost, List<Pair<Integer, Integer>> gains) {     // equipment at specific position already taken\n+        MakerItemCreateEntry ret = new MakerItemCreateEntry(cost, 0, 1);\n+        ret.addReqItem(fromEquipid, 1);\n+        for (Pair<Integer, Integer> p : gains) {\n+            ret.addGainItem(p.getLeft(), p.getRight());\n+        }\n         return ret;\n     }\n             \n@@ -143,33 +148,35 @@ private static double getMakerReagentFee(int itemid, int reagentLevel) {\n         private double cost;\n         private int reqCost;\n         private List<Pair<Integer, Integer>> reqItems = new ArrayList<>(); // itemId / amount\n-        private int toGive;\n+        private List<Pair<Integer, Integer>> gainItems = new ArrayList<>(); // itemId / amount\n \n-        public MakerItemCreateEntry(int cost, int reqLevel, int reqMakerLevel, int toGive) {\n+        public MakerItemCreateEntry(int cost, int reqLevel, int reqMakerLevel) {\n             this.cost = cost;\n             this.reqLevel = reqLevel;\n             this.reqMakerLevel = reqMakerLevel;\n-            this.toGive = toGive;\n         }\n         \n         public MakerItemCreateEntry(MakerItemCreateEntry mi) {\n             this.cost = mi.cost;\n             this.reqLevel = mi.reqLevel;\n             this.reqMakerLevel = mi.reqMakerLevel;\n-            this.toGive = mi.toGive;\n             \n             for(Pair<Integer, Integer> p : mi.reqItems) {\n                 reqItems.add(p);\n             }\n-        }\n-\n-        public int getRewardAmount() {\n-            return toGive;\n+            \n+            for(Pair<Integer, Integer> p : mi.gainItems) {\n+                gainItems.add(p);\n+            }\n         }\n \n         public List<Pair<Integer, Integer>> getReqItems() {\n             return reqItems;\n         }\n+        \n+        public List<Pair<Integer, Integer>> getGainItems() {\n+            return gainItems;\n+        }\n \n         public int getReqLevel() {\n             return reqLevel;\n@@ -191,6 +198,10 @@ protected void addReqItem(int itemId, int amount) {\n             reqItems.add(new Pair<>(itemId, amount));\n         }\n         \n+        protected void addGainItem(int itemId, int amount) {\n+            gainItems.add(new Pair<>(itemId, amount));\n+        }\n+        \n         public void trimCost() {\n             reqCost = (int) (cost / 1000);\n             reqCost *= 1000;"}, {"sha": "1547bd037128ba5eedc982f2772788d6b82fb0a7", "filename": "src/server/MapleItemInformationProvider.java", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/server/MapleItemInformationProvider.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/server/MapleItemInformationProvider.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/MapleItemInformationProvider.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -1968,7 +1968,8 @@ public MakerItemCreateEntry getMakerItemEntry(int toCreate) {\n                 }\n                 ps.close();\n                 rs.close();\n-                makerEntry = new MakerItemCreateEntry(cost, reqLevel, reqMakerLevel, toGive);\n+                makerEntry = new MakerItemCreateEntry(cost, reqLevel, reqMakerLevel);\n+                makerEntry.addGainItem(toCreate, toGive);\n                 ps = con.prepareStatement(\"SELECT req_item, count FROM makerrecipedata WHERE itemid = ?\");\n                 ps.setInt(1, toCreate);\n                 rs = ps.executeQuery();\n@@ -2008,17 +2009,18 @@ public int getMakerStimulantFromEquip(Integer equipId) {\n         return -1;\n     }\n \n-    public int getMakerDisassembledQuantity(Integer itemId) {\n-        int avail = 0;\n+    public List<Pair<Integer, Integer>> getMakerDisassembledItems(Integer itemId) {\n+        List<Pair<Integer, Integer>> items = new LinkedList<>();\n+        \n         Connection con;\n         try {\n             con = DatabaseConnection.getConnection();\n-            PreparedStatement ps = con.prepareStatement(\"SELECT count FROM makerrecipedata WHERE itemid = ? AND req_item >= 4260000 AND req_item <= 4260008 ORDER BY count DESC\");\n+            PreparedStatement ps = con.prepareStatement(\"SELECT req_item, count FROM makerrecipedata WHERE itemid = ? AND req_item >= 4260000 AND req_item < 4270000\");\n             ps.setInt(1, itemId);\n             ResultSet rs = ps.executeQuery();\n \n-            if(rs.next()) {\n-                avail = (int) Math.ceil(rs.getInt(\"count\") / 2);   // return to the player half of the crystals needed\n+            while (rs.next()) {\n+                items.add(new Pair<>(rs.getInt(\"req_item\"), rs.getInt(\"count\") / 2));   // return to the player half of the crystals needed\n             }\n \n             rs.close();\n@@ -2028,7 +2030,7 @@ public int getMakerDisassembledQuantity(Integer itemId) {\n             e.printStackTrace();\n         }\n \n-        return avail;\n+        return items;\n     }\n \n     public int getMakerDisassembledFee(Integer itemId) {"}, {"sha": "bd19544754938682bc800e31fec8210463d9148d", "filename": "src/server/events/RescueGaga.java", "status": "modified", "additions": 39, "deletions": 50, "changes": 89, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/server/events/RescueGaga.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/server/events/RescueGaga.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/events/RescueGaga.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -13,57 +13,46 @@\n  * @author kevintjuh93\n  */\n public class RescueGaga extends MapleEvents {\n-        private byte fallen;\n-        private int completed;\n-\n-        public RescueGaga(int completed) {\n-            super();\n-            this.completed = completed;\n-            this.fallen = 0;\n-        }\n-\n-        public int fallAndGet() {\n-            fallen++;\n-            if (fallen > 3) {\n-                fallen = 0;\n-                return 4;\n-            }\n-            return fallen;\n-        }\n-\n-        public byte getFallen() {\n-            return fallen;\n-        }\n-\n-        public int getCompleted() {\n-            return completed;\n-        }\n-\n-        public void complete() {\n-            completed++;\n+    \n+    private int completed;\n+    \n+    public RescueGaga(int completed) {\n+        super();\n+        this.completed = completed;\n+    }\n+\n+    public int getCompleted() {\n+        return completed;\n+    }\n+\n+    public void complete() {\n+        completed++;\n+    }\n+\n+    @Override\n+    public int getInfo() {\n+        return getCompleted();\n+    }\n+    \n+    public void giveSkill(MapleCharacter chr) {\n+        int skillid = 0;\n+        switch (chr.getJobType()) {\n+            case 0:\n+                skillid = 1013;\n+                break;\n+            case 1:\n+            case 2:\n+                skillid = 10001014;\n         }\n         \n-        public int getInfo() {\n-            return getCompleted();\n-        }\n-\n-        public void giveSkill(MapleCharacter chr) {\n-            int skillid = 0;\n-            switch (chr.getJobType()) {\n-                case 0:\n-                    skillid = 1013;\n-                    break;\n-                case 1:\n-                case 2:\n-                    skillid = 10001014;\n-            }\n-            long expiration = (System.currentTimeMillis() + (long) (3600 * 24 * 20 * 1000));//20 days\n-            if (completed < 20) {\n-                chr.changeSkillLevel(SkillFactory.getSkill(skillid), (byte) 1, 1, expiration);\n-                chr.changeSkillLevel(SkillFactory.getSkill(skillid + 1), (byte) 1, 1, expiration);\n-                chr.changeSkillLevel(SkillFactory.getSkill(skillid + 2), (byte) 1, 1, expiration);\n-            } else {\n-                chr.changeSkillLevel(SkillFactory.getSkill(skillid), (byte) 2, 2, chr.getSkillExpiration(skillid));\n-            }\n+        long expiration = (System.currentTimeMillis() + 3600 * 24 * 20 * 1000);//20 days\n+        if (completed < 20) {\n+            chr.changeSkillLevel(SkillFactory.getSkill(skillid), (byte) 1, 1, expiration);\n+            chr.changeSkillLevel(SkillFactory.getSkill(skillid + 1), (byte) 1, 1, expiration);\n+            chr.changeSkillLevel(SkillFactory.getSkill(skillid + 2), (byte) 1, 1, expiration);\n+        } else {\n+            chr.changeSkillLevel(SkillFactory.getSkill(skillid), (byte) 2, 2, chr.getSkillExpiration(skillid));\n         }\n+    }\n+    \n }"}, {"sha": "fef1ee2f15c62e1729a152e392b25ca45d727312", "filename": "src/server/expeditions/MapleExpedition.java", "status": "modified", "additions": 25, "deletions": 2, "changes": 27, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/server/expeditions/MapleExpedition.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/server/expeditions/MapleExpedition.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/expeditions/MapleExpedition.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -46,6 +46,7 @@\n import net.server.audit.locks.MonitoredLockType;\n import net.server.audit.locks.MonitoredReentrantLock;\n import net.server.audit.locks.factory.MonitoredReentrantLockFactory;\n+import net.server.channel.Channel;\n \n /**\n  *\n@@ -137,7 +138,7 @@ private void scheduleRegistrationEnd() {\n \t\t\t@Override\n \t\t\tpublic void run() {\n \t\t\t\tif (registering){\n-                                        startMap.getChannelServer().removeExpedition(exped);\n+                                        exped.removeChannelExpedition(startMap.getChannelServer());\n \t\t\t\t\tif (!silent) startMap.broadcastMessage(MaplePacketCreator.serverNotice(6, \"[Expedition] The time limit has been reached. Expedition has been disbanded.\"));\n                                         \n                                         dispose(false);\n@@ -163,6 +164,7 @@ public void finishRegistration() {\n \n \tpublic void start(){\n \t\tfinishRegistration();\n+                registerExpeditionAttempt();\n \t\tbroadcastExped(MaplePacketCreator.removeClock());\n \t\tif (!silent) broadcastExped(MaplePacketCreator.serverNotice(6, \"[Expedition] The expedition has started! Good luck, brave heroes!\"));\n \t\tstartTime = System.currentTimeMillis();\n@@ -180,6 +182,11 @@ public String addMember(MapleCharacter player) {\n \t\t\treturn \"Sorry, this expedition is full!\";\n \t\t}\n                 \n+                int channel = this.getRecruitingMap().getChannelServer().getId();\n+                if (!MapleExpeditionBossLog.attemptBoss(player.getId(), channel, this, false)) {    // thanks Conrad, Cato for noticing some expeditions have entry limit\n+                        return \"Sorry, you've already reached the quota of attempts for this expedition! Try again another day...\";\n+                }\n+                \n                 members.put(player.getId(), player.getName());\n                 player.announce(MaplePacketCreator.getClock((int)(startTime - System.currentTimeMillis()) / 1000));\n                 if (!silent) broadcastExped(MaplePacketCreator.serverNotice(6, \"[Expedition] \" + player.getName() + \" has joined the expedition!\"));\n@@ -202,13 +209,21 @@ public int addMemberInt(MapleCharacter player) {\n                 if (!silent) broadcastExped(MaplePacketCreator.serverNotice(6, \"[Expedition] \" + player.getName() + \" has joined the expedition!\"));\n                 return 0; //\"You have registered for the expedition successfully!\";\n         }\n+        \n+        private void registerExpeditionAttempt(){\n+                int channel = this.getRecruitingMap().getChannelServer().getId();\n \n+                for (MapleCharacter chr : getActiveMembers()){\n+                        MapleExpeditionBossLog.attemptBoss(chr.getId(), channel, this, true);\n+                }\n+        }\n+        \n \tprivate void broadcastExped(byte[] packet){\n \t\tfor (MapleCharacter chr : getActiveMembers()){\n                         chr.announce(packet);\n \t\t}\n \t}\n-\n+        \n \tpublic boolean removeMember(MapleCharacter chr) {\n \t\tif(members.remove(chr.getId()) != null) {\n                     chr.announce(MaplePacketCreator.removeClock());\n@@ -359,6 +374,14 @@ public final void warpExpeditionTeamToMapSpawnPoint(int warpTo, int toSp) {\n                         chr.changeMap(warpTo, toSp);\n                 }\n         }\n+        \n+        public final boolean addChannelExpedition(Channel ch) {\n+                return ch.addExpedition(this);\n+        }\n+        \n+        public final void removeChannelExpedition(Channel ch) {\n+                ch.removeExpedition(this);\n+        }\n \n \tpublic MapleCharacter getLeader(){\n \t\treturn leader;"}, {"sha": "3e4402b102015f0ed1e16b824fb55b8e64f7c77e", "filename": "src/server/expeditions/MapleExpeditionBossLog.java", "status": "added", "additions": 205, "deletions": 0, "changes": 205, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/server/expeditions/MapleExpeditionBossLog.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/server/expeditions/MapleExpeditionBossLog.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/expeditions/MapleExpeditionBossLog.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -0,0 +1,205 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+package server.expeditions;\n+\n+import java.sql.Connection;\n+import java.sql.PreparedStatement;\n+import java.sql.ResultSet;\n+import java.sql.SQLException;\n+import java.sql.Timestamp;\n+import java.util.Calendar;\n+import java.util.LinkedList;\n+import java.util.List;\n+import tools.DatabaseConnection;\n+import tools.Pair;\n+\n+/**\n+ *\n+ * @author Conrad\n+ * @author Ronan\n+ */\n+public class MapleExpeditionBossLog {\n+    \n+    public enum BossLogEntry {\n+        ZAKUM(2, 1, false),\n+        HORNTAIL(2, 1, false),\n+        PINKBEAN(1, 1, false),\n+        SCARGA(1, 1, false),\n+        PAPULATUS(2, 1, false);\n+        \n+        private int entries;\n+        private int timeLength;\n+        private int minChannel, maxChannel;\n+        private boolean week;\n+        \n+        private BossLogEntry(int entries, int timeLength, boolean week) {\n+            this(entries, 0, Integer.MAX_VALUE, timeLength, week);\n+        }\n+        \n+        private BossLogEntry(int entries, int minChannel, int maxChannel, int timeLength, boolean week) {\n+            this.entries = entries;\n+            this.minChannel = minChannel;\n+            this.maxChannel = maxChannel;\n+            this.timeLength = timeLength;\n+            this.week = week;\n+        }\n+        \n+        private static List<Pair<Timestamp, BossLogEntry>> getBossLogResetTimestamps(Calendar timeNow, boolean week) {\n+            List<Pair<Timestamp, BossLogEntry>> resetTimestamps = new LinkedList<>();\n+            \n+            for (BossLogEntry b : BossLogEntry.values()) {\n+                if (b.week == week) {\n+                    Calendar c = (Calendar) timeNow.clone();\n+                    c.roll(Calendar.DAY_OF_MONTH, -1 * (week ? 7 : 1) * b.timeLength);\n+                    Timestamp ts = new Timestamp(c.getTime().getTime());\n+                    \n+                    resetTimestamps.add(new Pair<>(ts, b));\n+                }\n+            }\n+            \n+            return resetTimestamps;\n+        }\n+        \n+        private static BossLogEntry getBossEntryByName(String name) {\n+            for (BossLogEntry b : BossLogEntry.values()) {\n+                if (name.contentEquals(b.name())) {\n+                    return b;\n+                }\n+            }\n+            \n+            return null;\n+        }\n+        \n+    }\n+    \n+    public static void resetBossLogTable() {\n+        /*\n+        Boss logs resets 12am, weekly thursday 12AM - thanks Smitty Werbenjagermanjensen (superadlez) - https://www.reddit.com/r/Maplestory/comments/61tiup/about_reset_time/\n+        */\n+        \n+        Calendar thursday = Calendar.getInstance();\n+        thursday.set(Calendar.DAY_OF_WEEK, Calendar.THURSDAY);\n+        thursday.set(Calendar.HOUR, 0);\n+        thursday.set(Calendar.MINUTE, 0);\n+        thursday.set(Calendar.SECOND, 0);\n+        \n+        Calendar now = Calendar.getInstance();\n+        \n+        long weekLength = 7 * 24 * 60 * 60 * 1000;\n+        long halfDayLength = 12 * 60 * 60 * 1000;\n+        \n+        long deltaTime = now.getTime().getTime() - thursday.getTime().getTime();    // 2x time: get Date into millis\n+        deltaTime += halfDayLength;\n+        deltaTime %= weekLength;\n+        deltaTime -= halfDayLength;\n+        \n+        if (deltaTime < halfDayLength) {\n+            MapleExpeditionBossLog.resetBossLogTable(true, thursday);\n+        }\n+        \n+        now.set(Calendar.HOUR, 0);\n+        now.set(Calendar.MINUTE, 0);\n+        now.set(Calendar.SECOND, 0);\n+        \n+        MapleExpeditionBossLog.resetBossLogTable(false, now);\n+    }\n+    \n+    private static void resetBossLogTable(boolean week, Calendar c) {\n+        List<Pair<Timestamp, BossLogEntry>> resetTimestamps = BossLogEntry.getBossLogResetTimestamps(c, week);\n+        \n+        try {\n+            Connection con = DatabaseConnection.getConnection();\n+            \n+            for (Pair<Timestamp, BossLogEntry> p : resetTimestamps) {\n+                PreparedStatement ps = con.prepareStatement(\"DELETE FROM \" + getBossLogTable(week) + \" WHERE attempttime <= ? AND bosstype LIKE ?\");\n+                ps.setTimestamp(1, p.getLeft());\n+                ps.setString(2, p.getRight().name());\n+                ps.executeUpdate();\n+                ps.close();\n+            }\n+            \n+            con.close();\n+        } catch (SQLException e) {\n+            e.printStackTrace();\n+        }\n+    }\n+    \n+    private static String getBossLogTable(boolean week) {\n+        return week ? \"bosslog_weekly\" : \"bosslog_daily\";\n+    }\n+\n+    private static int countPlayerEntries(int cid, BossLogEntry boss) {\n+        int ret_count = 0;\n+        try {\n+            Connection con = DatabaseConnection.getConnection();\n+            PreparedStatement ps;\n+            ps = con.prepareStatement(\"SELECT COUNT(*) FROM \" + getBossLogTable(boss.week) + \" WHERE characterid = ? AND bosstype LIKE ?\");\n+            ps.setInt(1, cid);\n+            ps.setString(2, boss.name());\n+            ResultSet rs = ps.executeQuery();\n+            if (rs.next()) {\n+                ret_count = rs.getInt(1);\n+            } else {\n+                ret_count = -1;\n+            }\n+            rs.close();\n+            ps.close();\n+            con.close();\n+            return ret_count;\n+        } catch (SQLException e) {\n+            e.printStackTrace();\n+            return -1;\n+        }\n+    }\n+\n+    private static void insertPlayerEntry(int cid, BossLogEntry boss) {\n+        try {\n+            Connection con = DatabaseConnection.getConnection();\n+            PreparedStatement ps = con.prepareStatement(\"INSERT INTO \" + getBossLogTable(boss.week) + \" (characterid, bosstype) VALUES (?,?)\");\n+            ps.setInt(1, cid);\n+            ps.setString(2, boss.name());\n+            ps.executeUpdate();\n+            ps.close();\n+            con.close();\n+        } catch (SQLException e) {\n+            e.printStackTrace();\n+        }\n+    }\n+    \n+    public static boolean attemptBoss(int cid, int channel, MapleExpedition exped, boolean log) {\n+        BossLogEntry boss = BossLogEntry.getBossEntryByName(exped.getType().name());\n+        if (boss == null) {\n+            return true;\n+        }\n+        \n+        if (channel < boss.minChannel || channel > boss.maxChannel) {\n+            return false;\n+        }\n+        \n+        if (countPlayerEntries(cid, boss) >= boss.entries) {\n+            return false;\n+        }\n+        \n+        if (log) {\n+            insertPlayerEntry(cid, boss);\n+        }\n+        return true;\n+    }\n+}"}, {"sha": "6df1bd320484c7e072e64a396e366bea81e02c6f", "filename": "src/server/life/MapleMonster.java", "status": "modified", "additions": 12, "deletions": 20, "changes": 32, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/server/life/MapleMonster.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/server/life/MapleMonster.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/life/MapleMonster.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -415,7 +415,7 @@ public boolean damage(MapleCharacter attacker, int damage, boolean stayAlive) {\n             */\n \n             if (damage > 0) {\n-                this.applyDamage(attacker, damage, stayAlive);\n+                this.applyDamage(attacker, damage, stayAlive, false);\n                 if (!this.isAlive()) {  // monster just died\n                     lastHit = true;\n                 }\n@@ -433,7 +433,7 @@ public boolean damage(MapleCharacter attacker, int damage, boolean stayAlive) {\n      * @param damage\n      * @param stayAlive\n      */\n-    private void applyDamage(MapleCharacter from, int damage, boolean stayAlive) {\n+    private void applyDamage(MapleCharacter from, int damage, boolean stayAlive, boolean fake) {\n         Integer trueDamage = applyAndGetHpDamage(damage, stayAlive);\n         if (trueDamage == null) {\n             return;\n@@ -442,8 +442,11 @@ private void applyDamage(MapleCharacter from, int damage, boolean stayAlive) {\n         if (ServerConstants.USE_DEBUG) {\n             from.dropMessage(5, \"Hitted MOB \" + this.getId() + \", OID \" + this.getObjectId());\n         }\n-        dispatchMonsterDamaged(from, trueDamage);\n-\n+        \n+        if (!fake) {\n+            dispatchMonsterDamaged(from, trueDamage);\n+        }\n+        \n         if (!takenDamage.containsKey(from.getId())) {\n             takenDamage.put(from.getId(), new AtomicLong(trueDamage));\n         } else {\n@@ -453,6 +456,10 @@ private void applyDamage(MapleCharacter from, int damage, boolean stayAlive) {\n         broadcastMobHpBar(from);\n     }\n     \n+    public void applyFakeDamage(MapleCharacter from, int damage, boolean stayAlive) {\n+        applyDamage(from, damage, stayAlive, true);\n+    }\n+    \n     public void heal(int hp, int mp) {\n         Integer hpHealed = applyAndGetHpDamage(-hp, false);\n         if (hpHealed == null) {\n@@ -744,21 +751,6 @@ public MapleCharacter killBy(final MapleCharacter killer) {\n                 if (toSpawn.contains(timeMob.getLeft())) {\n                     reviveMap.broadcastMessage(MaplePacketCreator.serverNotice(6, timeMob.getRight()));\n                 }\n-\n-                if (timeMob.getLeft() == 9300338 && (reviveMap.getId() >= 922240100 && reviveMap.getId() <= 922240119)) {\n-                    if (!reviveMap.containsNPC(9001108)) {\n-                        MapleNPC npc = MapleLifeFactory.getNPC(9001108);\n-                        npc.setPosition(new Point(172, 9));\n-                        npc.setCy(9);\n-                        npc.setRx0(172 + 50);\n-                        npc.setRx1(172 - 50);\n-                        npc.setFh(27);\n-                        reviveMap.addMapObject(npc);\n-                        reviveMap.broadcastMessage(MaplePacketCreator.spawnNPC(npc));\n-                    } else {\n-                        reviveMap.toggleHiddenNPC(9001108);\n-                    }\n-                }\n             }\n             \n             if(toSpawn.size() > 0) {\n@@ -1621,7 +1613,7 @@ public void run() {\n             if (damage > 0) {\n                 lockMonster();\n                 try {\n-                    applyDamage(chr, damage, true);\n+                    applyDamage(chr, damage, true, false);\n                 } finally {\n                     unlockMonster();\n                 }"}, {"sha": "58c80c194fc8cbf866bbc3b31ac99a3df6456d44", "filename": "src/server/maps/MapleMap.java", "status": "modified", "additions": 43, "deletions": 47, "changes": 90, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/server/maps/MapleMap.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/server/maps/MapleMap.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/maps/MapleMap.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -101,6 +101,7 @@\n     private static final Map<Integer, Pair<Integer, Integer>> dropBoundsCache = new HashMap<>(100);\n     \n     private Map<Integer, MapleMapObject> mapobjects = new LinkedHashMap<>();\n+    private Set<Integer> selfDestructives = new LinkedHashSet<>();\n     private Collection<SpawnPoint> monsterSpawn = Collections.synchronizedList(new LinkedList<SpawnPoint>());\n     private Collection<SpawnPoint> allMonsterSpawn = Collections.synchronizedList(new LinkedList<SpawnPoint>());\n     private AtomicInteger spawnedMonstersOnMap = new AtomicInteger(0);\n@@ -122,6 +123,7 @@\n     private AtomicInteger runningOid = new AtomicInteger(1000000001);\n     private int returnMapId;\n     private int channel, world;\n+    private int seats;\n     private byte monsterRate;\n     private boolean clock;\n     private boolean boat;\n@@ -132,7 +134,8 @@\n     private MapleMapEffect mapEffect = null;\n     private boolean everlast = false;\n     private int forcedReturnMap = 999999999;\n-    private long timeLimit;\n+    private int timeLimit;\n+    private long mapTimer;\n     private int decHP = 0;\n     private int protectItem = 0;\n     private boolean town;\n@@ -145,7 +148,6 @@\n     private int fieldLimit = 0;\n     private int mobCapacity = -1;\n     private MapleMonsterAggroCoordinator aggroMonitor = null;   // aggroMonitor activity in sync with itemMonitor\n-    private ScheduledFuture<?> mapMonitor = null;\n     private ScheduledFuture<?> itemMonitor = null;\n     private ScheduledFuture<?> expireItemsTask = null;\n     private ScheduledFuture<?> mobSpawnLootTask = null;\n@@ -307,7 +309,7 @@ public void setForcedReturnMap(int map) {\n         this.forcedReturnMap = map;\n     }\n \n-    public long getTimeLimit() {\n+    public int getTimeLimit() {\n         return timeLimit;\n     }\n \n@@ -316,7 +318,7 @@ public void setTimeLimit(int timeLimit) {\n     }\n \n     public int getTimeLeft() {\n-        return (int) ((timeLimit - System.currentTimeMillis()) / 1000);\n+        return (int) ((mapTimer - System.currentTimeMillis()) / 1000);\n     }\n     \n     public void setReactorState() {\n@@ -398,6 +400,16 @@ public void addMapObject(MapleMapObject mapobject) {\n         }\n     }\n     \n+    public void addSelfDestructive(MapleMonster mob) {\n+        if (mob.getStats().selfDestruction() != null) {\n+            this.selfDestructives.add(mob.getObjectId());\n+        }\n+    }\n+    \n+    public boolean removeSelfDestructive(int mapobjectid) {\n+        return this.selfDestructives.remove(mapobjectid);\n+    }\n+    \n     private void spawnAndAddRangedMapObject(MapleMapObject mapobject, DelayedPacketCreation packetbakery) {\n         spawnAndAddRangedMapObject(mapobject, packetbakery, null);\n     }\n@@ -1331,9 +1343,11 @@ public boolean damageMonster(final MapleCharacter chr, final MapleMonster monste\n         }\n         if (monster.isAlive()) {\n             boolean killed = monster.damage(chr, damage, false);\n-            if (monster.getStats().selfDestruction() != null && monster.getStats().selfDestruction().getHp() > -1) {// should work ;p\n-                if (monster.getHp() <= monster.getStats().selfDestruction().getHp()) {\n-                    killMonster(monster, chr, true, monster.getStats().selfDestruction().getAction());\n+            \n+            selfDestruction selfDestr = monster.getStats().selfDestruction();\n+            if (selfDestr != null && selfDestr.getHp() > -1) {// should work ;p\n+                if (monster.getHp() <= selfDestr.getHp()) {\n+                    killMonster(monster, chr, true, selfDestr.getAction());\n                     return true;\n                 }\n             }\n@@ -1907,7 +1921,6 @@ public void spawnRevives(final MapleMonster monster) {\n         spawnAndAddRangedMapObject(monster, new DelayedPacketCreation() {\n             @Override\n             public void sendPackets(MapleClient c) {\n-\n                 c.announce(MaplePacketCreator.spawnMonster(monster, false));\n             }\n         });\n@@ -1919,6 +1932,7 @@ public void sendPackets(MapleClient c) {\n         }\n         \n         spawnedMonstersOnMap.incrementAndGet();\n+        addSelfDestructive(monster);\n         applyRemoveAfter(monster);\n     }\n     \n@@ -2052,6 +2066,7 @@ public void sendPackets(MapleClient c) {\n         }\n         \n         spawnedMonstersOnMap.incrementAndGet();\n+        addSelfDestructive(monster);\n         applyRemoveAfter(monster);  // thanks LightRyuzaki for pointing issues with spawned CWKPQ mobs not applying this\n     }\n \n@@ -2088,6 +2103,7 @@ public void sendPackets(MapleClient c) {\n         }\n \n         spawnedMonstersOnMap.incrementAndGet();\n+        addSelfDestructive(monster);\n         applyRemoveAfter(monster);\n     }\n \n@@ -2102,6 +2118,7 @@ public void sendPackets(MapleClient c) {\n         });\n \n         spawnedMonstersOnMap.incrementAndGet();\n+        addSelfDestructive(monster);\n     }\n \n     public void makeMonsterReal(final MapleMonster monster) {\n@@ -3812,6 +3829,14 @@ public void setDocked(boolean isDocked) {\n     public boolean getDocked() {\n         return this.docked;\n     }\n+    \n+    public void setSeats(int seats) {\n+        this.seats = seats;\n+    }\n+    \n+    public int getSeats() {\n+        return seats;\n+    }\n \n     public void broadcastGMMessage(MapleCharacter source, final byte[] packet, boolean repeatToSource) {\n         broadcastGMMessage(repeatToSource ? null : source, packet, Double.POSITIVE_INFINITY, source.getPosition());\n@@ -3904,35 +3929,7 @@ public void clearDrops() {\n             this.broadcastMessage(MaplePacketCreator.removeItemFromMap(i.getObjectId(), 0, 0));\n         }\n     }\n-\n-    public void addMapTimer(int time) {\n-        timeLimit = System.currentTimeMillis() + (time * 1000);\n-        broadcastMessage(MaplePacketCreator.getClock(time));\n-        mapMonitor = TimerManager.getInstance().register(new Runnable() {\n-            @Override\n-            public void run() {\n-                if (timeLimit != 0 && timeLimit < System.currentTimeMillis()) {\n-                    warpEveryone(getForcedReturnId());\n-                }\n-                \n-                if (getCharacters().isEmpty()) {\n-                    resetReactors();\n-                    killAllMonsters();\n-                    clearDrops();\n-                    timeLimit = 0;\n-                    if (mapid >= 922240100 && mapid <= 922240119) {\n-                        toggleHiddenNPC(9001108);\n-                    }\n-                    \n-                    if (mapMonitor != null) {\n-                        mapMonitor.cancel(true);\n-                        mapMonitor = null;\n-                    }\n-                }\n-            }\n-        }, 1000);\n-    }\n-\n+    \n     public void setFieldLimit(int fieldLimit) {\n         this.fieldLimit = fieldLimit;\n     }\n@@ -4079,7 +4076,7 @@ public boolean isEventMap() {\n         return this.mapid >= 109010000 && this.mapid < 109050000 || this.mapid > 109050001 && this.mapid <= 109090000;\n     }\n \n-    public void timeMob(int id, String msg) {\n+    public void setTimeMob(int id, String msg) {\n         timeMob = new Pair<>(id, msg);\n     }\n \n@@ -4206,8 +4203,8 @@ public void monsterKilled(int aniTime) {}\n \n                 @Override\n                 public void monsterDamaged(MapleCharacter from, int trueDmg) {\n-                    ht.applyAndGetHpDamage(trueDmg, true);\n-                    ht.broadcastMobHpBar(from);\n+                    // thanks Halcyon for noticing HT not dropping loots due to propagated damage not registering attacker\n+                    ht.applyFakeDamage(from, trueDmg, true);\n                 }\n \n                 @Override\n@@ -4222,7 +4219,9 @@ public void monsterHealed(int trueHeal) {\n     \n     public boolean claimOwnership(MapleCharacter chr) {\n         if (mapOwner == null) {\n-            mapOwner = chr;\n+            this.mapOwner = chr;\n+            chr.setOwnedMap(this);\n+            \n             mapOwnerLastActivityTime = Server.getInstance().getCurrentTime();\n             \n             getChannelServer().registerOwnedMap(this);\n@@ -4234,7 +4233,9 @@ public boolean claimOwnership(MapleCharacter chr) {\n     \n     public boolean unclaimOwnership(MapleCharacter chr) {\n         if (mapOwner == chr) {\n-            mapOwner = null;\n+            this.mapOwner = null;\n+            chr.setOwnedMap(null);\n+            \n             mapOwnerLastActivityTime = Long.MAX_VALUE;\n             \n             getChannelServer().unregisterOwnedMap(this);\n@@ -4533,11 +4534,6 @@ public void dispose() {\n         portals.clear();\n         mapEffect = null;\n         \n-        if(mapMonitor != null) {\n-            mapMonitor.cancel(false);\n-            mapMonitor = null;\n-        }\n-        \n         chrWLock.lock();\n         try {\n             aggroMonitor.dispose();"}, {"sha": "761cda3931b1658ef2937d079bee3949eb29c63b", "filename": "src/server/maps/MapleMapFactory.java", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/server/maps/MapleMapFactory.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/server/maps/MapleMapFactory.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/maps/MapleMapFactory.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -172,8 +172,7 @@ public static MapleMap loadMapFromWz(int mapid, int world, int channel, EventIns\n         }\n         MapleData timeMob = infoData.getChildByPath(\"timeMob\");\n         if (timeMob != null) {\n-            map.timeMob(MapleDataTool.getInt(timeMob.getChildByPath(\"id\")),\n-            MapleDataTool.getString(timeMob.getChildByPath(\"message\")));\n+            map.setTimeMob(MapleDataTool.getInt(timeMob.getChildByPath(\"id\")), MapleDataTool.getString(timeMob.getChildByPath(\"message\")));\n         }\n \n         int bounds[] = new int[4];\n@@ -243,6 +242,10 @@ public static MapleMap loadMapFromWz(int mapid, int world, int channel, EventIns\n                 map.addMapleArea(new Rectangle(x1, y1, (x2 - x1), (y2 - y1)));\n             }\n         }\n+        if (mapData.getChildByPath(\"seat\") != null) {\n+            int seats = mapData.getChildByPath(\"seat\").getChildren().size();\n+            map.setSeats(seats);\n+        }\n         if (event == null) {\n             try {\n                 Connection con = DatabaseConnection.getConnection();"}, {"sha": "e4b653688f35b462c44b711ab0825119d78e52ea", "filename": "src/server/maps/MapleMiniDungeon.java", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/server/maps/MapleMiniDungeon.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/server/maps/MapleMiniDungeon.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/maps/MapleMiniDungeon.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -42,9 +42,9 @@\n     int baseMap;\n     long expireTime;\n     \n-    public MapleMiniDungeon(int base, int durationMin) {\n+    public MapleMiniDungeon(int base, long timeLimit) {\n         baseMap = base;\n-        expireTime = durationMin * 60 * 1000;\n+        expireTime = timeLimit * 1000;\n         \n         timeoutTask = TimerManager.getInstance().schedule(new Runnable() {\n             @Override"}, {"sha": "16832abcc0b8fc91d4a21a8296b64900c43a8fcb", "filename": "src/server/minigame/MapleRockPaperScissor.java", "status": "added", "additions": 84, "deletions": 0, "changes": 84, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/server/minigame/MapleRockPaperScissor.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/server/minigame/MapleRockPaperScissor.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/minigame/MapleRockPaperScissor.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -0,0 +1,84 @@\n+package server.minigame;\n+\n+import client.MapleClient;\n+import client.inventory.Item;\n+import client.inventory.manipulator.MapleInventoryManipulator;\n+import tools.MaplePacketCreator;\n+import tools.Randomizer;\n+\n+/**\n+ * @Author Arnah\n+ * @Website http://Vertisy.ca/\n+ * @since Aug 15, 2016\n+ */\n+public class MapleRockPaperScissor{\n+\n+\tprivate int round = 0;\n+\tprivate boolean ableAnswer = true;\n+\tprivate boolean win = false;\n+\n+\tpublic MapleRockPaperScissor(final MapleClient c, final byte mode){\n+\t\tc.announce(MaplePacketCreator.rpsMode((byte) (9 + mode)));\n+\t\tif(mode == 0){\n+\t\t\tc.getPlayer().gainMeso(-1000, true, true, true);\n+\t\t}\n+\t}\n+\n+\tpublic final boolean answer(final MapleClient c, final int answer){\n+\t\tif(ableAnswer && !win && answer >= 0 && answer <= 2){\n+\t\t\tfinal int response = Randomizer.nextInt(3);\n+\t\t\tif(response == answer){\n+\t\t\t\tc.announce(MaplePacketCreator.rpsSelection((byte) response, (byte) round));\n+\t\t\t\t// dont do anything. they can still answer once a draw\n+\t\t\t}else if((answer == 0 && response == 2) || (answer == 1 && response == 0) || (answer == 2 && response == 1)){ // they win\n+\t\t\t\tc.announce(MaplePacketCreator.rpsSelection((byte) response, (byte) (round + 1)));\n+\t\t\t\tableAnswer = false;\n+\t\t\t\twin = true;\n+\t\t\t}else{ // they lose\n+\t\t\t\tc.announce(MaplePacketCreator.rpsSelection((byte) response, (byte) -1));\n+\t\t\t\tableAnswer = false;\n+\t\t\t}\n+\t\t\treturn true;\n+\t\t}\n+\t\treward(c);\n+\t\treturn false;\n+\t}\n+\n+\tpublic final boolean timeOut(final MapleClient c){\n+\t\tif(ableAnswer && !win){\n+\t\t\tableAnswer = false;\n+\t\t\tc.announce(MaplePacketCreator.rpsMode((byte) 0x0A));\n+\t\t\treturn true;\n+\t\t}\n+\t\treward(c);\n+\t\treturn false;\n+\t}\n+\n+\tpublic final boolean nextRound(final MapleClient c){\n+\t\tif(win){\n+\t\t\tround++;\n+\t\t\tif(round < 10){\n+\t\t\t\twin = false;\n+\t\t\t\tableAnswer = true;\n+\t\t\t\tc.announce(MaplePacketCreator.rpsMode((byte) 0x0C));\n+\t\t\t\treturn true;\n+\t\t\t} else {\n+\t\t\t\tround = 10;\n+\t\t\t}\n+\t\t}\n+\t\treward(c);\n+\t\treturn false;\n+\t}\n+\n+\tpublic final void reward(final MapleClient c){\n+\t\tif(win){\n+\t\t\tMapleInventoryManipulator.addFromDrop(c, new Item(4031332 + round, (short) 0, (short) 1), true);\n+\t\t}\n+\t\tc.getPlayer().setRPS(null);\n+\t}\n+\n+\tpublic final void dispose(final MapleClient c){\n+\t\treward(c);\n+\t\tc.announce(MaplePacketCreator.rpsMode((byte) 0x0D));\n+\t}\n+}"}, {"sha": "4032332343e345ab47ab613465fa4330de149d2a", "filename": "src/server/partyquest/AriantColiseum.java", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/server/partyquest/AriantColiseum.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/server/partyquest/AriantColiseum.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/partyquest/AriantColiseum.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -272,7 +272,7 @@ private MapleExpeditionType getExpeditionType() {\n     }\n     \n     private void enterKingsRoom() {\n-        map.getChannelServer().removeExpedition(exped);\n+        exped.removeChannelExpedition(map.getChannelServer());\n         cancelAriantSchedules();\n         \n         for (MapleCharacter chr : map.getAllPlayers()) {"}, {"sha": "369f650273a23c9c2880086f2cb7b272444c1aed", "filename": "src/server/quest/MapleQuest.java", "status": "modified", "additions": 3, "deletions": 11, "changes": 14, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/server/quest/MapleQuest.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/server/quest/MapleQuest.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/quest/MapleQuest.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -73,9 +73,9 @@\n     private boolean repeatable = false;\n     private String name = \"\", parent = \"\";\n     private final static MapleDataProvider questData = MapleDataProviderFactory.getDataProvider(new File(System.getProperty(\"wzpath\") + \"/Quest.wz\"));\n-    private static MapleData questInfo;\n-    private static MapleData questAct;\n-    private static MapleData questReq;\n+    private final static MapleData questInfo = questData.getData(\"QuestInfo.img\");\n+    private final static MapleData questAct = questData.getData(\"Act.img\");\n+    private final static MapleData questReq = questData.getData(\"Check.img\");\n \t\n     private MapleQuest(int id) {\n         this.id = (short) id;\n@@ -186,10 +186,6 @@ public boolean isAutoStart() {\n     public static MapleQuest getInstance(int id) {\n         MapleQuest ret = quests.get(id);\n         if (ret == null) {\n-            questInfo = questData.getData(\"QuestInfo.img\");\n-            questReq = questData.getData(\"Check.img\");\n-            questAct = questData.getData(\"Act.img\");\n-\t\t\t\n             ret = new MapleQuest(id);\n             quests.put(id, ret);\n         }\n@@ -590,10 +586,6 @@ public String getParentName() {\n         }\n         \n \tpublic static void loadAllQuest() {\n-\t\tquestInfo = questData.getData(\"QuestInfo.img\");\n-\t\tquestReq = questData.getData(\"Check.img\");\n-\t\tquestAct = questData.getData(\"Act.img\");\n-\t\t\n \t\ttry {\n \t\t\tfor(MapleData quest : questInfo.getChildren()) {\n \t\t\t\tint questID = Integer.parseInt(quest.getName());"}, {"sha": "284c8599e8aa5b7f92591cf25e31c6718ba67fbf", "filename": "src/tools/MaplePacketCreator.java", "status": "modified", "additions": 161, "deletions": 33, "changes": 194, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/src/tools/MaplePacketCreator.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/src/tools/MaplePacketCreator.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/tools/MaplePacketCreator.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -110,6 +110,7 @@\n import constants.skills.Buccaneer;\n import constants.skills.Corsair;\n import constants.skills.ThunderBreaker;\n+import scripting.npc.NPCConversationManager;\n import server.maps.AbstractMapleMapObject;\n \n /**\n@@ -479,8 +480,7 @@ private static void addInventoryInfo(final MaplePacketLittleEndianWriter mplew,\n                                 equipped.add((Item) item);\n                         }\n                 }\n-                Collections.sort(equipped);\n-                for (Item item : equipped) {\n+                for (Item item : equipped) {    // equipped doesn't actually need sorting, thanks Pllsz\n                         addItemInfo(mplew, item);\n                 }\n                 mplew.writeShort(0); // start of equip cash\n@@ -1194,7 +1194,7 @@ public int compare(Pair<MapleStat, Integer> o1, Pair<MapleStat, Integer> o2) {\n                 return mplew.getPacket();\n         }\n \n-\tpublic static byte[] removeKite(int objectid, int animationType) {    // thanks to Arnah\n+\tpublic static byte[] removeKite(int objectid, int animationType) {    // thanks to Arnah (Vertisy)\n \t\tMaplePacketLittleEndianWriter mplew = new MaplePacketLittleEndianWriter();\n \t\tmplew.writeShort(SendOpcode.REMOVE_KITE.getValue());\n \t\tmplew.write(animationType); // 0 is 10/10, 1 just vanishes\n@@ -2511,25 +2511,14 @@ private static int doubleToShortBits(double d) {\n                 return mplew.getPacket();\n         }\n \n-        public static byte[] getScrollEffect(int chr, ScrollResult scrollSuccess, boolean legendarySpirit) {\n+        public static byte[] getScrollEffect(int chr, ScrollResult scrollSuccess, boolean legendarySpirit, boolean whiteScroll) {   // thanks to Rien dev team\n                 final MaplePacketLittleEndianWriter mplew = new MaplePacketLittleEndianWriter();\n                 mplew.writeShort(SendOpcode.SHOW_SCROLL_EFFECT.getValue());\n                 mplew.writeInt(chr);\n-                switch (scrollSuccess) {\n-                case SUCCESS:\n-                        mplew.writeShort(1);\n-                        mplew.writeShort(legendarySpirit ? 1 : 0);\n-                        break;\n-                case FAIL:\n-                        mplew.writeShort(0);\n-                        mplew.writeShort(legendarySpirit ? 1 : 0);\n-                        break;\n-                case CURSE:\n-                        mplew.write(0);\n-                        mplew.write(1);\n-                        mplew.writeShort(legendarySpirit ? 1 : 0);\n-                        break;\n-                }\n+                mplew.writeBool(scrollSuccess == ScrollResult.SUCCESS);\n+                mplew.writeBool(scrollSuccess == ScrollResult.CURSE);\n+                mplew.writeBool(legendarySpirit);\n+                mplew.writeBool(whiteScroll);\n                 return mplew.getPacket();\n         }\n \n@@ -3441,6 +3430,44 @@ private static void writeLongMaskChair(final MaplePacketLittleEndianWriter mplew\n                 mplew.writeInt(0);\n                 return mplew.getPacket();\n         }\n+        \n+        // thanks NPC Quiz packets thanks to Eric\n+        public static byte[] OnAskQuiz(int nSpeakerTypeID, int nSpeakerTemplateID, int nResCode, String sTitle, String sProblemText, String sHintText, int nMinInput, int nMaxInput, int tRemainInitialQuiz) { \n+                MaplePacketLittleEndianWriter mplew = new MaplePacketLittleEndianWriter(); \n+                mplew.writeShort(SendOpcode.NPC_TALK.getValue()); \n+                mplew.write(nSpeakerTypeID); \n+                mplew.writeInt(nSpeakerTemplateID); \n+                mplew.write(0x6); \n+                mplew.write(0); \n+                mplew.write(nResCode); \n+                if (nResCode == 0x0) {//fail has no bytes <3 \n+                        mplew.writeMapleAsciiString(sTitle); \n+                        mplew.writeMapleAsciiString(sProblemText); \n+                        mplew.writeMapleAsciiString(sHintText); \n+                        mplew.writeShort(nMinInput); \n+                        mplew.writeShort(nMaxInput); \n+                        mplew.writeInt(tRemainInitialQuiz); \n+                } \n+                return mplew.getPacket(); \n+        } \n+\n+        public static byte[] OnAskSpeedQuiz(int nSpeakerTypeID, int nSpeakerTemplateID, int nResCode, int nType, int dwAnswer, int nCorrect, int nRemain, int tRemainInitialQuiz) { \n+                MaplePacketLittleEndianWriter mplew = new MaplePacketLittleEndianWriter(); \n+                mplew.writeShort(SendOpcode.NPC_TALK.getValue()); \n+                mplew.write(nSpeakerTypeID); \n+                mplew.writeInt(nSpeakerTemplateID); \n+                mplew.write(0x7); \n+                mplew.write(0); \n+                mplew.write(nResCode); \n+                if (nResCode == 0x0) {//fail has no bytes <3 \n+                        mplew.writeInt(nType); \n+                        mplew.writeInt(dwAnswer); \n+                        mplew.writeInt(nCorrect); \n+                        mplew.writeInt(nRemain); \n+                        mplew.writeInt(tRemainInitialQuiz); \n+                } \n+                return mplew.getPacket(); \n+        }\n \n         public static byte[] showBuffeffect(int cid, int skillid, int effectid) {\n                 return showBuffeffect(cid, skillid, effectid, (byte) 3);\n@@ -4246,7 +4273,7 @@ private static void writeIntMask(final MaplePacketLittleEndianWriter mplew, Map<\n         public static byte[] cancelChair(int id) {\n                 final MaplePacketLittleEndianWriter mplew = new MaplePacketLittleEndianWriter();\n                 mplew.writeShort(SendOpcode.CANCEL_CHAIR.getValue());\n-                if (id == -1) {\n+                if (id < 0) {\n                         mplew.write(0);\n                 } else {\n                         mplew.write(1);\n@@ -5414,6 +5441,41 @@ private static void addPetInfo(final MaplePacketLittleEndianWriter mplew, MapleP\n                 }\n                 return mplew.getPacket();\n         }\n+        \n+        // RPS_GAME packets thanks to Arnah (Vertisy)\n+        public static byte[] openRPSNPC() {\n+                MaplePacketLittleEndianWriter mplew = new MaplePacketLittleEndianWriter();\n+                mplew.writeShort(SendOpcode.RPS_GAME.getValue());\n+                mplew.write(8);// open npc\n+                mplew.writeInt(9000019);\n+                return mplew.getPacket();\n+        }\n+\n+        public static byte[] rpsMesoError(int mesos) {\n+                MaplePacketLittleEndianWriter mplew = new MaplePacketLittleEndianWriter();\n+                mplew.writeShort(SendOpcode.RPS_GAME.getValue());\n+                mplew.write(0x06);\n+                if (mesos != -1) {\n+                        mplew.writeInt(mesos);\n+                }\n+                return mplew.getPacket();\n+        }\n+\n+        public static byte[] rpsSelection(byte selection, byte answer) {\n+                MaplePacketLittleEndianWriter mplew = new MaplePacketLittleEndianWriter();\n+                mplew.writeShort(SendOpcode.RPS_GAME.getValue());\n+                mplew.write(0x0B);// 11l\n+                mplew.write(selection);\n+                mplew.write(answer);\n+                return mplew.getPacket();\n+        }\n+\n+        public static byte[] rpsMode(byte mode) {\n+                MaplePacketLittleEndianWriter mplew = new MaplePacketLittleEndianWriter();\n+                mplew.writeShort(SendOpcode.RPS_GAME.getValue());\n+                mplew.write(mode);\n+                return mplew.getPacket();\n+        }\n \n         public static byte[] fredrickMessage(byte operation) {\n                 final MaplePacketLittleEndianWriter mplew = new MaplePacketLittleEndianWriter();\n@@ -6678,6 +6740,72 @@ private static void addPetInfo(final MaplePacketLittleEndianWriter mplew, MapleP\n                 mplew.writeShort(quest);\n                 return mplew.getPacket();\n         }\n+        \n+        // MAKER_RESULT packets thanks to Arnah (Vertisy)\n+        public static byte[] makerResult(boolean success, int itemMade, int itemCount, int mesos, List<Pair<Integer, Integer>> itemsLost, int catalystID, List<Integer> INCBuffGems) {\n+                final MaplePacketLittleEndianWriter mplew = new MaplePacketLittleEndianWriter();\n+                mplew.writeShort(SendOpcode.MAKER_RESULT.getValue());\n+                mplew.writeInt(success ? 0 : 1); // 0 = success, 1 = fail\n+                mplew.writeInt(1); // 1 or 2 doesn't matter, same methods\n+                mplew.writeBool(!success);\n+                if (success) {\n+                        mplew.writeInt(itemMade);\n+                        mplew.writeInt(itemCount);\n+                }\n+                mplew.writeInt(itemsLost.size()); // Loop\n+                for (Pair<Integer, Integer> item : itemsLost) {\n+                        mplew.writeInt(item.getLeft());\n+                        mplew.writeInt(item.getRight());\n+                }\n+                mplew.writeInt(INCBuffGems.size());\n+                for (Integer gem : INCBuffGems) {\n+                        mplew.writeInt(gem);\n+                }\n+                if (catalystID != -1) {\n+                    mplew.write(1); // stimulator\n+                    mplew.writeInt(catalystID);\n+                } else {\n+                    mplew.write(0);\n+                }\n+                \n+                mplew.writeInt(mesos);\n+                return mplew.getPacket();\n+        }\n+\n+        public static byte[] makerResultCrystal(int itemIdGained, int itemIdLost) {\n+                final MaplePacketLittleEndianWriter mplew = new MaplePacketLittleEndianWriter();\n+                mplew.writeShort(SendOpcode.MAKER_RESULT.getValue());\n+                mplew.writeInt(0); // Always successful!\n+                mplew.writeInt(3); // Monster Crystal\n+                mplew.writeInt(itemIdGained);\n+                mplew.writeInt(itemIdLost);\n+                return mplew.getPacket();\n+        }\n+\n+        public static byte[] makerResultDesynth(int itemId, int mesos, List<Pair<Integer, Integer>> itemsGained) {\n+                final MaplePacketLittleEndianWriter mplew = new MaplePacketLittleEndianWriter();\n+                mplew.writeShort(SendOpcode.MAKER_RESULT.getValue());\n+                mplew.writeInt(0); // Always successful!\n+                mplew.writeInt(4); // Mode Desynth\n+                mplew.writeInt(itemId); // Item desynthed\n+                mplew.writeInt(itemsGained.size()); // Loop of items gained, (int, int)\n+                for (Pair<Integer, Integer> item : itemsGained) {\n+                        mplew.writeInt(item.getLeft());\n+                        mplew.writeInt(item.getRight());\n+                }\n+                mplew.writeInt(mesos); // Mesos spent.\n+                return mplew.getPacket();\n+        }\n+        \n+        public static byte[] makerEnableActions() {\n+                final MaplePacketLittleEndianWriter mplew = new MaplePacketLittleEndianWriter();\n+                mplew.writeShort(SendOpcode.MAKER_RESULT.getValue());\n+                mplew.writeInt(0); // Always successful!\n+                mplew.writeInt(0); // Monster Crystal\n+                mplew.writeInt(0);\n+                mplew.writeInt(0);\n+                return mplew.getPacket();\n+        }\n \n         public static byte[] getMultiMegaphone(String[] messages, int channel, boolean showEar) {\n                 final MaplePacketLittleEndianWriter mplew = new MaplePacketLittleEndianWriter();\n@@ -7025,21 +7153,29 @@ private static void getGuildInfo(final MaplePacketLittleEndianWriter mplew, Mapl\n                 mplew.write(remove ? 3 : 4);\n                 return mplew.getPacket();\n         }\n+        \n+        public static byte[] sendDueyParcelReceived(String from, boolean quick) {    // thanks inhyuk\n+                MaplePacketLittleEndianWriter mplew = new MaplePacketLittleEndianWriter();\n+                mplew.writeShort(SendOpcode.PARCEL.getValue());\n+                mplew.write(0x19);\n+                mplew.writeMapleAsciiString(from);\n+                mplew.writeBool(quick);\n+                return mplew.getPacket();\n+        }\n \n-        public static byte[] sendDueyNotification(boolean quickDelivery) {\n+        public static byte[] sendDueyParcelNotification(boolean quick) {\n                 final MaplePacketLittleEndianWriter mplew = new MaplePacketLittleEndianWriter();\n                 mplew.writeShort(SendOpcode.PARCEL.getValue());\n                 mplew.write(0x1B);\n-                mplew.writeBool(quickDelivery);  // 0 : package received, 1 : quick delivery package\n-                \n+                mplew.writeBool(quick);  // 0 : package received, 1 : quick delivery package\n                 return mplew.getPacket();\n         }\n         \n         public static byte[] sendDueyMSG(byte operation) {\n                 return sendDuey(operation, null);\n         }\n \n-        public static byte[] sendDuey(byte operation, List<DueyPackage> packages) {\n+        public static byte[] sendDuey(int operation, List<DueyPackage> packages) {\n                 final MaplePacketLittleEndianWriter mplew = new MaplePacketLittleEndianWriter();\n                 mplew.writeShort(SendOpcode.PARCEL.getValue());\n                 mplew.write(operation);\n@@ -7261,20 +7397,12 @@ private static String getRightPaddedStr(String in, char padchar, int length) {\n                 return builder.toString();\n         }\n \n-        public static byte[] MobDamageMobFriendly(MapleMonster mob, int damage) {\n+        public static byte[] MobDamageMobFriendly(MapleMonster mob, int damage, int remainingHp) {\n                 final MaplePacketLittleEndianWriter mplew = new MaplePacketLittleEndianWriter();\n                 mplew.writeShort(SendOpcode.DAMAGE_MONSTER.getValue());\n                 mplew.writeInt(mob.getObjectId());\n                 mplew.write(1); // direction ?\n                 mplew.writeInt(damage);\n-                \n-                mob.applyAndGetHpDamage(damage, false);\n-                int remainingHp = mob.getHp();\n-                if(remainingHp <= 0) {\n-                    remainingHp = 0;\n-                    mob.getMap().removeMapObject(mob);\n-                }\n-                \n                 mplew.writeInt(remainingHp);\n                 mplew.writeInt(mob.getMaxHp());\n                 return mplew.getPacket();"}, {"sha": "72806f71b6566197d8476a97c8bebc0580f67c92", "filename": "tools/MapleSkillMakerFetcher/lib/MakerData.sql", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/tools/MapleSkillMakerFetcher/lib/MakerData.sql", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/tools/MapleSkillMakerFetcher/lib/MakerData.sql", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/tools/MapleSkillMakerFetcher/lib/MakerData.sql?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -62,6 +62,8 @@ INSERT IGNORE INTO `makercreatedata` (`id`, `itemid`, `req_level`, `req_maker_le\n   (0, 4032312, 70, 1, 0, 0, 0, 0, 1, 0),\n   (0, 2041058, 50, 1, 55000, 0, 1122013, 0, 1, 0),\n   (0, 2040727, 50, 1, 55000, 0, 1122013, 0, 1, 0),\n+  (0, 4260007, 105, 3, 2200000, 4001126, 0, 0, 5, 0),\n+  (0, 4260008, 105, 3, 5500000, 4001126, 0, 0, 10, 0),\n   (1, 1002028, 45, 1, 55000, 0, 0, 4130018, 1, 1),\n   (1, 1002085, 45, 1, 50000, 0, 0, 4130018, 1, 1),\n   (1, 1002086, 45, 1, 41000, 0, 0, 4130018, 1, 1),\n@@ -945,6 +947,10 @@ INSERT IGNORE INTO `makerrecipedata` (`itemid`, `req_item`, `count`) VALUES\n   (2041058, 4000299, 10),\n   (2040727, 4000159, 50),\n   (2040727, 4000299, 10),\n+  (4260007, 4260006, 100),\n+  (4260007, 4001126, 5),\n+  (4260008, 4260007, 50),\n+  (4260008, 4001126, 5),\n   (1002028, 4007001, 5),\n   (1002028, 4260000, 5),\n   (1002085, 4007002, 5),\n@@ -1790,7 +1796,7 @@ INSERT IGNORE INTO `makerrecipedata` (`itemid`, `req_item`, `count`) VALUES\n   (1372016, 4011002, 3),\n   (1372016, 4260003, 26),\n   (1382008, 4011002, 3),\n-  (1382008, 4260003, 26),\n+  (1382008, 4260004, 26),\n   (1372009, 4011002, 4),\n   (1372009, 4260004, 28),\n   (1382035, 4011002, 4),\n@@ -2432,7 +2438,7 @@ INSERT IGNORE INTO `makerrecipedata` (`itemid`, `req_item`, `count`) VALUES\n   (1072194, 4260004, 9),\n   (1072195, 4007006, 9),\n   (1072195, 4260004, 9),\n-  (1072213, 4007001, 10),\n+  (1072213, 4007003, 10),\n   (1072213, 4260005, 10),\n   (1072214, 4007002, 10),\n   (1072214, 4260005, 10),"}, {"sha": "41b45f95223ef5827281f3191a5d4a85871cde34", "filename": "tools/MapleSkillbookChanceFetcher/lib/meso_drop_data.sql", "status": "removed", "additions": 0, "deletions": 447, "changes": 447, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/a39a210c1f6993a8747ba43f160c5b8dbfe761f2/tools/MapleSkillbookChanceFetcher/lib/meso_drop_data.sql", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/a39a210c1f6993a8747ba43f160c5b8dbfe761f2/tools/MapleSkillbookChanceFetcher/lib/meso_drop_data.sql", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/tools/MapleSkillbookChanceFetcher/lib/meso_drop_data.sql?ref=a39a210c1f6993a8747ba43f160c5b8dbfe761f2", "patch": "@@ -1,447 +0,0 @@\n- # SQL File autogenerated from the MapleMesoFetcher feature by Ronan Lana.\n- # Generated data takes into account mob stats such as level and boss for the meso ranges.\n- # Only mobs with 4 or more items with no meso entry on the DB it was compiled are presented here.\n-\n-  INSERT IGNORE INTO drop_data (`dropperid`, `itemid`, `minimum_quantity`, `maximum_quantity`, `questid`, `chance`) VALUES\n-(100122, 0, 35, 52, 0, 400000),\n-(100123, 0, 38, 55, 0, 400000),\n-(100124, 0, 40, 59, 0, 400000),\n-(100130, 0, 31, 45, 0, 400000),\n-(100131, 0, 33, 49, 0, 400000),\n-(100132, 0, 35, 52, 0, 400000),\n-(100133, 0, 38, 55, 0, 400000),\n-(100134, 0, 40, 59, 0, 400000),\n-(1110130, 0, 49, 72, 0, 400000),\n-(1140130, 0, 56, 83, 0, 400000),\n-(2100100, 0, 58, 85, 0, 400000),\n-(2100101, 0, 60, 88, 0, 400000),\n-(2100106, 0, 66, 97, 0, 400000),\n-(2100107, 0, 73, 108, 0, 400000),\n-(2100108, 0, 78, 115, 0, 400000),\n-(2110300, 0, 66, 97, 0, 400000),\n-(2110301, 0, 78, 115, 0, 400000),\n-(2230105, 0, 64, 94, 0, 400000),\n-(2230107, 0, 66, 97, 0, 400000),\n-(2230110, 0, 64, 94, 0, 400000),\n-(2230111, 0, 66, 97, 0, 400000),\n-(2230131, 0, 66, 97, 0, 400000),\n-(3000005, 0, 81, 119, 0, 400000),\n-(3100101, 0, 86, 127, 0, 400000),\n-(3100102, 0, 81, 119, 0, 400000),\n-(3110301, 0, 86, 127, 0, 400000),\n-(3110302, 0, 95, 140, 0, 400000),\n-(3110303, 0, 105, 155, 0, 400000),\n-(3220000, 0, 285, 1400, 0, 400000),\n-(3220001, 0, 315, 1550, 0, 400000),\n-(3300000, 0, 81, 119, 0, 400000),\n-(3300001, 0, 81, 119, 0, 400000),\n-(3300002, 0, 83, 123, 0, 400000),\n-(3300003, 0, 86, 127, 0, 400000),\n-(3300004, 0, 89, 131, 0, 400000),\n-(3300005, 0, 95, 140, 0, 400000),\n-(3300006, 0, 95, 140, 0, 400000),\n-(3300007, 0, 95, 140, 0, 400000),\n-(3300008, 0, 315, 1550, 0, 400000),\n-(4110300, 0, 120, 177, 0, 400000),\n-(4110301, 0, 132, 195, 0, 400000),\n-(4130103, 0, 423, 2080, 0, 400000),\n-(4220000, 0, 396, 1950, 0, 400000),\n-(4230122, 0, 120, 177, 0, 400000),\n-(4230125, 0, 128, 189, 0, 400000),\n-(4230400, 0, 132, 195, 0, 400000),\n-(4230502, 0, 124, 182, 0, 400000),\n-(4230503, 0, 132, 195, 0, 400000),\n-(4230504, 0, 132, 195, 0, 400000),\n-(4230600, 0, 112, 165, 0, 400000),\n-(4240000, 0, 151, 222, 0, 400000),\n-(4250000, 0, 120, 177, 0, 400000),\n-(4250001, 0, 137, 201, 0, 400000),\n-(5110300, 0, 156, 230, 0, 400000),\n-(5120500, 0, 190, 280, 0, 400000),\n-(5120501, 0, 172, 254, 0, 400000),\n-(5120502, 0, 178, 262, 0, 400000),\n-(5120505, 0, 203, 299, 0, 400000),\n-(5120506, 0, 184, 271, 0, 400000),\n-(5130105, 0, 190, 280, 0, 400000),\n-(5130108, 0, 196, 289, 0, 400000),\n-(5220000, 0, 552, 2710, 0, 400000),\n-(5220002, 0, 468, 2300, 0, 400000),\n-(5220003, 0, 630, 3090, 0, 400000),\n-(5220004, 0, 468, 2300, 0, 400000),\n-(5250000, 0, 184, 271, 0, 400000),\n-(5250001, 0, 161, 237, 0, 400000),\n-(5250002, 0, 196, 289, 0, 400000),\n-(6110300, 0, 255, 377, 0, 400000),\n-(6130102, 0, 217, 320, 0, 400000),\n-(6130103, 0, 217, 320, 0, 400000),\n-(6130203, 0, 217, 320, 0, 400000),\n-(6130207, 0, 231, 341, 0, 400000),\n-(6130209, 0, 264, 389, 0, 400000),\n-(6220000, 0, 765, 3770, 0, 400000),\n-(6220001, 0, 765, 3770, 0, 400000),\n-(6230100, 0, 231, 341, 0, 400000),\n-(6230401, 0, 239, 353, 0, 400000),\n-(6300005, 0, 765, 3770, 0, 400000),\n-(6400006, 0, 384, 1890, 0, 400000),\n-(6400008, 0, 552, 2710, 0, 400000),\n-(6400009, 0, 552, 2710, 0, 400000),\n-(7110300, 0, 355, 524, 0, 400000),\n-(7110301, 0, 332, 490, 0, 400000),\n-(7120103, 0, 301, 444, 0, 400000),\n-(7120104, 0, 311, 459, 0, 400000),\n-(7120106, 0, 355, 524, 0, 400000),\n-(7120107, 0, 355, 524, 0, 400000),\n-(7120108, 0, 379, 559, 0, 400000),\n-(7120109, 0, 405, 597, 0, 400000),\n-(7130000, 0, 332, 490, 0, 400000),\n-(7130002, 0, 321, 474, 0, 400000),\n-(7130003, 0, 367, 541, 0, 400000),\n-(7130004, 0, 391, 578, 0, 400000),\n-(7130102, 0, 391, 578, 0, 400000),\n-(7130103, 0, 332, 490, 0, 400000),\n-(7130400, 0, 903, 4440, 0, 400000),\n-(7130401, 0, 903, 4440, 0, 400000),\n-(7130402, 0, 903, 4440, 0, 400000),\n-(7130601, 0, 367, 541, 0, 400000),\n-(7220000, 0, 933, 4590, 0, 400000),\n-(7220001, 0, 903, 4440, 0, 400000),\n-(7220002, 0, 1137, 5590, 0, 400000),\n-(8110300, 0, 418, 617, 0, 400000),\n-(8120102, 0, 446, 659, 0, 400000),\n-(8120103, 0, 477, 704, 0, 400000),\n-(8120104, 0, 509, 752, 0, 400000),\n-(8120105, 0, 544, 803, 0, 400000),\n-(8120106, 0, 562, 830, 0, 400000),\n-(8120107, 0, 562, 830, 0, 400000),\n-(8140000, 0, 418, 617, 0, 400000),\n-(8140100, 0, 446, 659, 0, 400000),\n-(8140511, 0, 581, 871, 0, 400000),\n-(8140512, 0, 608, 908, 0, 400000),\n-(8140600, 0, 594, 889, 0, 400000),\n-(8140702, 0, 637, 946, 0, 400000),\n-(8140703, 0, 666, 986, 0, 400000),\n-(8141300, 0, 622, 927, 0, 400000),\n-(8150000, 0, 2142, 10490, 0, 400000),\n-(8150100, 0, 714, 1049, 0, 400000),\n-(8150101, 0, 747, 1093, 0, 400000),\n-(8150200, 0, 714, 1049, 0, 400000),\n-(8150201, 0, 800, 1162, 0, 400000),\n-(8150300, 0, 666, 986, 0, 400000),\n-(8150301, 0, 730, 1070, 0, 400000),\n-(8150302, 0, 764, 1115, 0, 400000),\n-(8190001, 0, 800, 1162, 0, 400000),\n-(8220003, 0, 3381, 15830, 0, 400000),\n-(8220005, 0, 4350, 19860, 0, 400000),\n-(8220006, 0, 5466, 24400, 0, 400000),\n-(8220007, 0, 1704, 8530, 0, 400000),\n-(8220009, 0, 1479, 7280, 0, 400000),\n-(8830000, 0, 2400, 11620, 0, 400000),\n-(9001009, 0, 1254, 6170, 0, 400000),\n-(9001011, 0, 95, 140, 0, 400000),\n-(9200016, 0, 81, 119, 0, 400000),\n-(9200019, 0, 203, 299, 0, 400000),\n-(9300011, 0, 109, 160, 0, 400000),\n-(9300058, 0, 38, 55, 0, 400000),\n-(9300059, 0, 42, 61, 0, 400000),\n-(9300060, 0, 120, 177, 0, 400000),\n-(9300078, 0, 800, 1162, 0, 400000),\n-(9300080, 0, 282, 416, 0, 400000),\n-(9300096, 0, 544, 803, 0, 400000),\n-(9300105, 0, 717, 3530, 0, 400000),\n-(9300106, 0, 846, 4160, 0, 400000),\n-(9300127, 0, 81, 119, 0, 400000),\n-(9300129, 0, 81, 119, 0, 400000),\n-(9300131, 0, 109, 160, 0, 400000),\n-(9300132, 0, 81, 119, 0, 400000),\n-(9300133, 0, 81, 119, 0, 400000),\n-(9300134, 0, 81, 119, 0, 400000),\n-(9300136, 0, 243, 1190, 0, 400000),\n-(9300139, 0, 1296, 6380, 0, 400000),\n-(9300155, 0, 38, 55, 0, 400000),\n-(9300160, 0, 396, 1950, 0, 400000),\n-(9300161, 0, 396, 1950, 0, 400000),\n-(9300163, 0, 1127, 1583, 0, 400000),\n-(9300164, 0, 1127, 1583, 0, 400000),\n-(9300165, 0, 1127, 1583, 0, 400000),\n-(9300182, 0, 1479, 7280, 0, 400000),\n-(9300184, 0, 174, 850, 0, 400000),\n-(9300185, 0, 285, 1400, 0, 400000),\n-(9300186, 0, 315, 1550, 0, 400000),\n-(9300187, 0, 336, 1650, 0, 400000),\n-(9300188, 0, 468, 2300, 0, 400000),\n-(9300189, 0, 468, 2300, 0, 400000),\n-(9300190, 0, 552, 2710, 0, 400000),\n-(9300191, 0, 651, 3200, 0, 400000),\n-(9300192, 0, 570, 2800, 0, 400000),\n-(9300193, 0, 630, 3090, 0, 400000),\n-(9300194, 0, 765, 3770, 0, 400000),\n-(9300195, 0, 765, 3770, 0, 400000),\n-(9300196, 0, 765, 3770, 0, 400000),\n-(9300197, 0, 765, 3770, 0, 400000),\n-(9300198, 0, 651, 3200, 0, 400000),\n-(9300199, 0, 903, 4440, 0, 400000),\n-(9300200, 0, 933, 4590, 0, 400000),\n-(9300201, 0, 1479, 7280, 0, 400000),\n-(9300202, 0, 1137, 5590, 0, 400000),\n-(9300203, 0, 1254, 6170, 0, 400000),\n-(9300204, 0, 1383, 6810, 0, 400000),\n-(9300205, 0, 1296, 6380, 0, 400000),\n-(9300206, 0, 1479, 7280, 0, 400000),\n-(9300207, 0, 1479, 7280, 0, 400000),\n-(9300208, 0, 1704, 8530, 0, 400000),\n-(9300209, 0, 1704, 8530, 0, 400000),\n-(9300210, 0, 2142, 10490, 0, 400000),\n-(9300211, 0, 2400, 11620, 0, 400000),\n-(9300212, 0, 2400, 11620, 0, 400000),\n-(9300213, 0, 3381, 15830, 0, 400000),\n-(9300214, 0, 3792, 17550, 0, 400000),\n-(9300215, 0, 6714, 29370, 0, 400000),\n-(9300217, 0, 32, 47, 0, 400000),\n-(9300218, 0, 34, 50, 0, 400000),\n-(9300219, 0, 34, 50, 0, 400000),\n-(9300220, 0, 52, 77, 0, 400000),\n-(9300221, 0, 68, 101, 0, 400000),\n-(9300222, 0, 75, 111, 0, 400000),\n-(9300223, 0, 36, 54, 0, 400000),\n-(9300224, 0, 102, 150, 0, 400000),\n-(9300225, 0, 102, 150, 0, 400000),\n-(9300226, 0, 112, 165, 0, 400000),\n-(9300227, 0, 102, 150, 0, 400000),\n-(9300228, 0, 146, 215, 0, 400000),\n-(9300229, 0, 39, 57, 0, 400000),\n-(9300230, 0, 116, 171, 0, 400000),\n-(9300231, 0, 137, 201, 0, 400000),\n-(9300232, 0, 92, 136, 0, 400000),\n-(9300233, 0, 112, 165, 0, 400000),\n-(9300234, 0, 86, 127, 0, 400000),\n-(9300235, 0, 167, 245, 0, 400000),\n-(9300236, 0, 190, 280, 0, 400000),\n-(9300237, 0, 210, 309, 0, 400000),\n-(9300238, 0, 66, 97, 0, 400000),\n-(9300239, 0, 120, 177, 0, 400000),\n-(9300240, 0, 132, 195, 0, 400000),\n-(9300241, 0, 282, 416, 0, 400000),\n-(9300242, 0, 301, 444, 0, 400000),\n-(9300243, 0, 190, 280, 0, 400000),\n-(9300244, 0, 190, 280, 0, 400000),\n-(9300245, 0, 217, 320, 0, 400000),\n-(9300246, 0, 231, 341, 0, 400000),\n-(9300247, 0, 255, 377, 0, 400000),\n-(9300248, 0, 264, 389, 0, 400000),\n-(9300249, 0, 301, 444, 0, 400000),\n-(9300250, 0, 355, 524, 0, 400000),\n-(9300251, 0, 332, 490, 0, 400000),\n-(9300252, 0, 132, 195, 0, 400000),\n-(9300253, 0, 156, 230, 0, 400000),\n-(9300254, 0, 332, 490, 0, 400000),\n-(9300255, 0, 141, 208, 0, 400000),\n-(9300256, 0, 217, 320, 0, 400000),\n-(9300257, 0, 217, 320, 0, 400000),\n-(9300258, 0, 255, 377, 0, 400000),\n-(9300259, 0, 58, 85, 0, 400000),\n-(9300260, 0, 418, 617, 0, 400000),\n-(9300261, 0, 544, 803, 0, 400000),\n-(9300262, 0, 544, 803, 0, 400000),\n-(9300263, 0, 544, 803, 0, 400000),\n-(9300264, 0, 764, 1115, 0, 400000),\n-(9300265, 0, 730, 1070, 0, 400000),\n-(9300266, 0, 933, 4590, 0, 400000),\n-(9300267, 0, 1254, 6170, 0, 400000),\n-(9300268, 0, 933, 4590, 0, 400000),\n-(9300269, 0, 174, 850, 0, 400000),\n-(9300270, 0, 418, 617, 0, 400000),\n-(9300274, 0, 39, 57, 0, 400000),\n-(9300289, 0, 1704, 8530, 0, 400000),\n-(9300294, 0, 2142, 10490, 0, 400000),\n-(9300315, 0, 483, 2370, 0, 400000),\n-(9300316, 0, 516, 2540, 0, 400000),\n-(9300317, 0, 552, 2710, 0, 400000),\n-(9300318, 0, 588, 2890, 0, 400000),\n-(9300319, 0, 630, 3090, 0, 400000),\n-(9300320, 0, 672, 3300, 0, 400000),\n-(9300321, 0, 717, 3530, 0, 400000),\n-(9300322, 0, 765, 3770, 0, 400000),\n-(9300332, 0, 112, 165, 0, 400000),\n-(9300334, 0, 151, 222, 0, 400000),\n-(9300335, 0, 116, 171, 0, 400000),\n-(9300336, 0, 137, 201, 0, 400000),\n-(9300337, 0, 137, 201, 0, 400000),\n-(9300367, 0, 126, 610, 0, 400000),\n-(9300368, 0, 174, 850, 0, 400000),\n-(9300369, 0, 243, 1190, 0, 400000),\n-(9300370, 0, 336, 1650, 0, 400000),\n-(9300371, 0, 468, 2300, 0, 400000),\n-(9300372, 0, 651, 3200, 0, 400000),\n-(9300373, 0, 903, 4440, 0, 400000),\n-(9300374, 0, 1254, 6170, 0, 400000),\n-(9300375, 0, 1704, 8530, 0, 400000),\n-(9300376, 0, 1704, 8530, 0, 400000),\n-(9300377, 0, 2691, 12890, 0, 400000),\n-(9303000, 0, 42, 61, 0, 400000),\n-(9303001, 0, 42, 61, 0, 400000),\n-(9303003, 0, 42, 61, 0, 400000),\n-(9303004, 0, 42, 61, 0, 400000),\n-(9303005, 0, 71, 104, 0, 400000),\n-(9303006, 0, 71, 104, 0, 400000),\n-(9303007, 0, 71, 104, 0, 400000),\n-(9303008, 0, 71, 104, 0, 400000),\n-(9303009, 0, 161, 237, 0, 400000),\n-(9303010, 0, 161, 237, 0, 400000),\n-(9303011, 0, 161, 237, 0, 400000),\n-(9303013, 0, 432, 638, 0, 400000),\n-(9303014, 0, 432, 638, 0, 400000),\n-(9303016, 0, 432, 638, 0, 400000),\n-(9400009, 0, 7014, 8225, 0, 400000),\n-(9400012, 0, 217, 320, 0, 400000),\n-(9400120, 0, 1911, 9460, 0, 400000),\n-(9400122, 0, 1911, 9460, 0, 400000),\n-(9400200, 0, 184, 271, 0, 400000),\n-(9400203, 0, 112, 165, 0, 400000),\n-(9400205, 0, 1704, 8530, 0, 400000),\n-(9400238, 0, 81, 119, 0, 400000),\n-(9400239, 0, 66, 97, 0, 400000),\n-(9400241, 0, 38, 55, 0, 400000),\n-(9400242, 0, 42, 61, 0, 400000),\n-(9400243, 0, 184, 271, 0, 400000),\n-(9400244, 0, 210, 309, 0, 400000),\n-(9400245, 0, 66, 97, 0, 400000),\n-(9400246, 0, 62, 91, 0, 400000),\n-(9400247, 0, 81, 119, 0, 400000),\n-(9400248, 0, 66, 97, 0, 400000),\n-(9400500, 0, 93, 450, 0, 400000),\n-(9400501, 0, 35, 52, 0, 400000),\n-(9400502, 0, 105, 520, 0, 400000),\n-(9400503, 0, 105, 520, 0, 400000),\n-(9400504, 0, 31, 45, 0, 400000),\n-(9400538, 0, 56, 83, 0, 400000),\n-(9400539, 0, 60, 88, 0, 400000),\n-(9400540, 0, 68, 101, 0, 400000),\n-(9400541, 0, 68, 101, 0, 400000),\n-(9400542, 0, 98, 145, 0, 400000),\n-(9400543, 0, 116, 171, 0, 400000),\n-(9400544, 0, 156, 230, 0, 400000),\n-(9400546, 0, 128, 189, 0, 400000),\n-(9400547, 0, 73, 108, 0, 400000),\n-(9400548, 0, 81, 119, 0, 400000),\n-(9400550, 0, 73, 108, 0, 400000),\n-(9400556, 0, 60, 88, 0, 400000),\n-(9400558, 0, 81, 119, 0, 400000),\n-(9400560, 0, 156, 230, 0, 400000),\n-(9400561, 0, 217, 320, 0, 400000),\n-(9400562, 0, 217, 320, 0, 400000),\n-(9400563, 0, 112, 165, 0, 400000),\n-(9400565, 0, 60, 88, 0, 400000),\n-(9400570, 0, 49, 72, 0, 400000),\n-(9400571, 0, 468, 2300, 0, 400000),\n-(9400573, 0, 112, 165, 0, 400000),\n-(9400574, 0, 714, 1049, 0, 400000),\n-(9400576, 0, 301, 444, 0, 400000),\n-(9400578, 0, 568, 853, 0, 400000),\n-(9400579, 0, 714, 1049, 0, 400000),\n-(9400580, 0, 637, 946, 0, 400000),\n-(9400581, 0, 418, 617, 0, 400000),\n-(9400582, 0, 1127, 1583, 0, 400000),\n-(9400609, 0, 204, 1010, 0, 400000),\n-(9400612, 0, 204, 1010, 0, 400000),\n-(9400633, 0, 258, 1270, 0, 400000),\n-(9400644, 0, 42, 61, 0, 400000),\n-(9410014, 0, 493, 728, 0, 400000),\n-(9410015, 0, 1479, 7280, 0, 400000),\n-(9420507, 0, 146, 215, 0, 400000),\n-(9420527, 0, 132, 195, 0, 400000),\n-(9420528, 0, 141, 208, 0, 400000),\n-(9420529, 0, 167, 245, 0, 400000),\n-(9420530, 0, 190, 280, 0, 400000),\n-(9420531, 0, 210, 309, 0, 400000),\n-(9420532, 0, 210, 309, 0, 400000),\n-(9420533, 0, 224, 330, 0, 400000),\n-(9420534, 0, 255, 377, 0, 400000),\n-(9420535, 0, 282, 416, 0, 400000),\n-(9420536, 0, 321, 474, 0, 400000),\n-(9420537, 0, 355, 524, 0, 400000),\n-(9420538, 0, 446, 659, 0, 400000),\n-(9420539, 0, 526, 777, 0, 400000),\n-(9420545, 0, 210, 309, 0, 400000),\n-(9420550, 0, 210, 309, 0, 400000),\n-(9500101, 0, 38, 55, 0, 400000),\n-(9500102, 0, 39, 57, 0, 400000),\n-(9500103, 0, 49, 72, 0, 400000),\n-(9500104, 0, 44, 65, 0, 400000),\n-(9500105, 0, 49, 72, 0, 400000),\n-(9500106, 0, 62, 91, 0, 400000),\n-(9500107, 0, 81, 119, 0, 400000),\n-(9500108, 0, 86, 127, 0, 400000),\n-(9500109, 0, 86, 127, 0, 400000),\n-(9500110, 0, 95, 140, 0, 400000),\n-(9500111, 0, 95, 140, 0, 400000),\n-(9500112, 0, 95, 140, 0, 400000),\n-(9500113, 0, 98, 145, 0, 400000),\n-(9500115, 0, 102, 150, 0, 400000),\n-(9500116, 0, 112, 165, 0, 400000),\n-(9500117, 0, 98, 145, 0, 400000),\n-(9500118, 0, 109, 160, 0, 400000),\n-(9500119, 0, 109, 160, 0, 400000),\n-(9500120, 0, 132, 195, 0, 400000),\n-(9500121, 0, 146, 215, 0, 400000),\n-(9500122, 0, 151, 222, 0, 400000),\n-(9500123, 0, 210, 309, 0, 400000),\n-(9500124, 0, 651, 3200, 0, 400000),\n-(9500125, 0, 217, 320, 0, 400000),\n-(9500126, 0, 247, 365, 0, 400000),\n-(9500127, 0, 273, 402, 0, 400000),\n-(9500128, 0, 282, 416, 0, 400000),\n-(9500129, 0, 301, 444, 0, 400000),\n-(9500130, 0, 903, 4440, 0, 400000),\n-(9500131, 0, 332, 490, 0, 400000),\n-(9500132, 0, 355, 524, 0, 400000),\n-(9500134, 0, 418, 617, 0, 400000),\n-(9500135, 0, 493, 728, 0, 400000),\n-(9500136, 0, 682, 1006, 0, 400000),\n-(9500137, 0, 637, 946, 0, 400000),\n-(9500138, 0, 568, 853, 0, 400000),\n-(9500139, 0, 1254, 6170, 0, 400000),\n-(9500140, 0, 2142, 10490, 0, 400000),\n-(9500156, 0, 146, 215, 0, 400000),\n-(9500157, 0, 95, 140, 0, 400000),\n-(9500158, 0, 903, 4440, 0, 400000),\n-(9500159, 0, 903, 4440, 0, 400000),\n-(9500160, 0, 903, 4440, 0, 400000),\n-(9500161, 0, 418, 617, 0, 400000),\n-(9500162, 0, 418, 617, 0, 400000),\n-(9500163, 0, 461, 681, 0, 400000),\n-(9500164, 0, 544, 803, 0, 400000),\n-(9500165, 0, 544, 803, 0, 400000),\n-(9500166, 0, 544, 803, 0, 400000),\n-(9500178, 0, 112, 165, 0, 400000),\n-(9500180, 0, 1704, 8530, 0, 400000),\n-(9500181, 0, 1704, 8530, 0, 400000),\n-(9500306, 0, 174, 850, 0, 400000),\n-(9500307, 0, 285, 1400, 0, 400000),\n-(9500308, 0, 468, 2300, 0, 400000),\n-(9500309, 0, 552, 2710, 0, 400000),\n-(9500310, 0, 630, 3090, 0, 400000),\n-(9500311, 0, 765, 3770, 0, 400000),\n-(9500312, 0, 903, 4440, 0, 400000),\n-(9500313, 0, 933, 4590, 0, 400000),\n-(9500314, 0, 1137, 5590, 0, 400000),\n-(9500317, 0, 126, 610, 0, 400000),\n-(9500318, 0, 336, 1650, 0, 400000),\n-(9500319, 0, 903, 4440, 0, 400000),\n-(9500321, 0, 42, 61, 0, 400000),\n-(9500326, 0, 396, 1950, 0, 400000),\n-(9500327, 0, 243, 1190, 0, 400000),\n-(9500328, 0, 285, 1400, 0, 400000),\n-(9500331, 0, 552, 2710, 0, 400000),\n-(9500332, 0, 396, 1950, 0, 400000),\n-(9500333, 0, 468, 2300, 0, 400000),\n-(9500334, 0, 552, 2710, 0, 400000),\n-(9500335, 0, 468, 2300, 0, 400000),\n-(9500366, 0, 49, 72, 0, 400000),\n-(9500367, 0, 49, 72, 0, 400000),\n-(9500368, 0, 49, 72, 0, 400000),\n-(9500369, 0, 49, 72, 0, 400000),\n-(9500370, 0, 49, 72, 0, 400000),\n-(9500371, 0, 49, 72, 0, 400000),\n-(9500372, 0, 49, 72, 0, 400000);\n-\n-  DELETE FROM drop_data WHERE dropperid >= 9300184 AND dropperid <= 9300215 AND itemid = 0;"}, {"sha": "01a6890faf6d5d0e3809598dcd8debb013237d30", "filename": "tools/MapleSkillbookChanceFetcher/lib/skillbook_drop_data.sql", "status": "modified", "additions": 591, "deletions": 591, "changes": 1182, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/tools/MapleSkillbookChanceFetcher/lib/skillbook_drop_data.sql", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/tools/MapleSkillbookChanceFetcher/lib/skillbook_drop_data.sql", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/tools/MapleSkillbookChanceFetcher/lib/skillbook_drop_data.sql?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -3,525 +3,525 @@\n \n   REPLACE INTO drop_data (`dropperid`, `itemid`, `minimum_quantity`, `maximum_quantity`, `questid`, `chance`) VALUES\n (851000, 2290132, 1, 1, 0, 3861),\n-(7090000, 2290087, 1, 1, 0, 40000),\n-(8090000, 2290045, 1, 1, 0, 40000),\n-(8140103, 2290044, 1, 1, 0, 2000),\n-(8140511, 2290009, 1, 1, 0, 2000),\n-(8140511, 2290050, 1, 1, 0, 2000),\n-(8140511, 2290083, 1, 1, 0, 2000),\n-(8140511, 2290134, 1, 1, 0, 6000),\n-(8140512, 2290013, 1, 1, 0, 2000),\n-(8140512, 2290067, 1, 1, 0, 2000),\n-(8140512, 2290082, 1, 1, 0, 2000),\n-(8140512, 2290097, 1, 1, 0, 2000),\n-(8140512, 2290116, 1, 1, 0, 2000),\n-(8140512, 2290131, 1, 1, 0, 6000),\n-(8140600, 2290132, 1, 1, 0, 6000),\n-(8140700, 2290106, 1, 1, 0, 2000),\n-(8140700, 2290126, 1, 1, 0, 6000),\n-(8140701, 2290122, 1, 1, 0, 2000),\n-(8140702, 2290112, 1, 1, 0, 2000),\n-(8140703, 2290088, 1, 1, 0, 2000),\n-(8140703, 2290099, 1, 1, 0, 2000),\n-(8141000, 2290082, 1, 1, 0, 2000),\n-(8141000, 2290097, 1, 1, 0, 2000),\n-(8141100, 2280005, 1, 1, 0, 2000),\n-(8141300, 2290098, 1, 1, 0, 2000),\n-(8142100, 2290032, 1, 1, 0, 2000),\n-(8142100, 2290082, 1, 1, 0, 2000),\n-(8142100, 2290114, 1, 1, 0, 2000),\n-(8143000, 2280004, 1, 1, 0, 2000),\n-(8150000, 2280013, 1, 1, 0, 120000),\n-(8150000, 2290070, 1, 1, 0, 40000),\n-(8150000, 2290091, 1, 1, 0, 40000),\n-(8150100, 2290042, 1, 1, 0, 2000),\n-(8150100, 2290053, 1, 1, 0, 2000),\n-(8150100, 2290073, 1, 1, 0, 2000),\n-(8150100, 2290102, 1, 1, 0, 2000),\n-(8150100, 2290118, 1, 1, 0, 2000),\n-(8150101, 2290017, 1, 1, 0, 2000),\n-(8150101, 2290021, 1, 1, 0, 2000),\n-(8150101, 2290035, 1, 1, 0, 2000),\n-(8150101, 2290042, 1, 1, 0, 2000),\n-(8150101, 2290052, 1, 1, 0, 2000),\n-(8150101, 2290102, 1, 1, 0, 2000),\n-(8150200, 2290024, 1, 1, 0, 2000),\n-(8150200, 2290100, 1, 1, 0, 2000),\n-(8150200, 2290135, 1, 1, 0, 6000),\n-(8150201, 2290004, 1, 1, 0, 2000),\n-(8150201, 2290006, 1, 1, 0, 2000),\n-(8150201, 2290024, 1, 1, 0, 2000),\n-(8150201, 2290036, 1, 1, 0, 2000),\n-(8150201, 2290056, 1, 1, 0, 2000),\n-(8150201, 2290072, 1, 1, 0, 2000),\n-(8150201, 2290078, 1, 1, 0, 2000),\n-(8150201, 2290117, 1, 1, 0, 2000),\n-(8150300, 2290003, 1, 1, 0, 2000),\n-(8150300, 2290033, 1, 1, 0, 2000),\n-(8150300, 2290111, 1, 1, 0, 2000),\n-(8150300, 2290120, 1, 1, 0, 2000),\n-(8150300, 2290127, 1, 1, 0, 6000),\n-(8150301, 2290023, 1, 1, 0, 2000),\n-(8150301, 2290029, 1, 1, 0, 2000),\n-(8150301, 2290101, 1, 1, 0, 2000),\n-(8150301, 2290107, 1, 1, 0, 2000),\n-(8150302, 2290010, 1, 1, 0, 2000),\n-(8150302, 2290019, 1, 1, 0, 2000),\n-(8150302, 2290026, 1, 1, 0, 2000),\n-(8150302, 2290076, 1, 1, 0, 2000),\n-(8150302, 2290085, 1, 1, 0, 2000),\n-(8150302, 2290096, 1, 1, 0, 2000),\n-(8150302, 2290113, 1, 1, 0, 2000),\n-(8150302, 2290119, 1, 1, 0, 2000),\n-(8150302, 2290128, 1, 1, 0, 6000),\n-(8160000, 2290017, 1, 1, 0, 2000),\n-(8160000, 2290045, 1, 1, 0, 2000),\n-(8160000, 2290065, 1, 1, 0, 2000),\n-(8160000, 2290067, 1, 1, 0, 2000),\n-(8160000, 2290081, 1, 1, 0, 2000),\n-(8170000, 2290012, 1, 1, 0, 2000),\n-(8170000, 2290086, 1, 1, 0, 2000),\n-(8170000, 2290087, 1, 1, 0, 2000),\n-(8170000, 2290134, 1, 1, 0, 6000),\n-(8180000, 2290002, 1, 1, 0, 40000),\n-(8180000, 2290003, 1, 1, 0, 40000),\n-(8180000, 2290014, 1, 1, 0, 40000),\n-(8180000, 2290015, 1, 1, 0, 40000),\n-(8180000, 2290030, 1, 1, 0, 40000),\n-(8180000, 2290035, 1, 1, 0, 40000),\n-(8180000, 2290036, 1, 1, 0, 40000),\n-(8180000, 2290063, 1, 1, 0, 40000),\n-(8180000, 2290080, 1, 1, 0, 40000),\n-(8180000, 2290098, 1, 1, 0, 40000),\n-(8180000, 2290101, 1, 1, 0, 40000),\n-(8180000, 2290117, 1, 1, 0, 40000),\n-(8180000, 2290130, 1, 1, 0, 120000),\n-(8180001, 2290018, 1, 1, 0, 40000),\n-(8180001, 2290019, 1, 1, 0, 40000),\n-(8180001, 2290032, 1, 1, 0, 40000),\n-(8180001, 2290042, 1, 1, 0, 40000),\n-(8180001, 2290058, 1, 1, 0, 40000),\n-(8180001, 2290059, 1, 1, 0, 40000),\n-(8180001, 2290068, 1, 1, 0, 40000),\n-(8180001, 2290069, 1, 1, 0, 40000),\n-(8180001, 2290072, 1, 1, 0, 40000),\n-(8180001, 2290092, 1, 1, 0, 40000),\n-(8180001, 2290099, 1, 1, 0, 40000),\n-(8180001, 2290100, 1, 1, 0, 40000),\n-(8180001, 2290102, 1, 1, 0, 40000),\n-(8180001, 2290119, 1, 1, 0, 40000),\n-(8180001, 2290128, 1, 1, 0, 120000),\n-(8190000, 2280016, 1, 1, 0, 6000),\n-(8190000, 2290030, 1, 1, 0, 2000),\n-(8190000, 2290044, 1, 1, 0, 2000),\n-(8190000, 2290054, 1, 1, 0, 2000),\n-(8190000, 2290066, 1, 1, 0, 2000),\n-(8190000, 2290075, 1, 1, 0, 2000),\n-(8190000, 2290092, 1, 1, 0, 2000),\n-(8190000, 2290103, 1, 1, 0, 2000),\n-(8190002, 2290000, 1, 1, 0, 2000),\n-(8190002, 2290008, 1, 1, 0, 2000),\n-(8190002, 2290018, 1, 1, 0, 2000),\n-(8190002, 2290038, 1, 1, 0, 2000),\n-(8190002, 2290060, 1, 1, 0, 2000),\n-(8190002, 2290080, 1, 1, 0, 2000),\n-(8190002, 2290124, 1, 1, 0, 2000),\n-(8190003, 2280013, 1, 1, 0, 6000),\n-(8190003, 2290007, 1, 1, 0, 2000),\n-(8190003, 2290012, 1, 1, 0, 2000),\n-(8190003, 2290014, 1, 1, 0, 2000),\n-(8190003, 2290033, 1, 1, 0, 2000),\n-(8190003, 2290045, 1, 1, 0, 2000),\n-(8190003, 2290050, 1, 1, 0, 2000),\n-(8190003, 2290055, 1, 1, 0, 2000),\n-(8190003, 2290062, 1, 1, 0, 2000),\n-(8190003, 2290063, 1, 1, 0, 2000),\n-(8190003, 2290070, 1, 1, 0, 2000),\n-(8190003, 2290086, 1, 1, 0, 2000),\n-(8190003, 2290108, 1, 1, 0, 2000),\n-(8190003, 2290133, 1, 1, 0, 6000),\n-(8190004, 2290002, 1, 1, 0, 2000),\n-(8190004, 2290009, 1, 1, 0, 2000),\n-(8190004, 2290021, 1, 1, 0, 2000),\n-(8190004, 2290034, 1, 1, 0, 2000),\n-(8190004, 2290041, 1, 1, 0, 2000),\n-(8190004, 2290052, 1, 1, 0, 2000),\n-(8190004, 2290053, 1, 1, 0, 2000),\n-(8190004, 2290058, 1, 1, 0, 2000),\n-(8190004, 2290068, 1, 1, 0, 2000),\n-(8190004, 2290071, 1, 1, 0, 2000),\n-(8190004, 2290073, 1, 1, 0, 2000),\n-(8190004, 2290090, 1, 1, 0, 2000),\n-(8190004, 2290112, 1, 1, 0, 2000),\n-(8190004, 2290121, 1, 1, 0, 2000),\n-(8190004, 2290130, 1, 1, 0, 6000),\n-(8190005, 2290000, 1, 1, 0, 2000),\n-(8190005, 2290008, 1, 1, 0, 2000),\n-(8190005, 2290018, 1, 1, 0, 2000),\n-(8190005, 2290038, 1, 1, 0, 2000),\n-(8190005, 2290060, 1, 1, 0, 2000),\n-(8190005, 2290080, 1, 1, 0, 2000),\n-(8190005, 2290124, 1, 1, 0, 2000),\n-(8200000, 2290005, 1, 1, 0, 2000),\n-(8200000, 2290011, 1, 1, 0, 2000),\n-(8200000, 2290114, 1, 1, 0, 2000),\n-(8200001, 2280015, 1, 1, 0, 6000),\n-(8200001, 2290050, 1, 1, 0, 2000),\n-(8200001, 2290059, 1, 1, 0, 2000),\n-(8200001, 2290065, 1, 1, 0, 2000),\n-(8200001, 2290129, 1, 1, 0, 6000),\n-(8200002, 2290062, 1, 1, 0, 2000),\n-(8200002, 2290066, 1, 1, 0, 2000),\n-(8200002, 2290070, 1, 1, 0, 2000),\n-(8200002, 2290131, 1, 1, 0, 6000),\n-(8200002, 2290139, 1, 1, 0, 6000),\n-(8200003, 2290012, 1, 1, 0, 2000),\n-(8200003, 2290056, 1, 1, 0, 2000),\n-(8200003, 2290071, 1, 1, 0, 2000),\n-(8200003, 2290101, 1, 1, 0, 2000),\n-(8200003, 2290136, 1, 1, 0, 6000),\n-(8200004, 2280016, 1, 1, 0, 6000),\n-(8200004, 2290069, 1, 1, 0, 2000),\n-(8200004, 2290072, 1, 1, 0, 2000),\n-(8200004, 2290073, 1, 1, 0, 2000),\n-(8200004, 2290127, 1, 1, 0, 6000),\n-(8200004, 2290134, 1, 1, 0, 6000),\n-(8200005, 2280014, 1, 1, 0, 6000),\n-(8200005, 2290078, 1, 1, 0, 2000),\n-(8200005, 2290079, 1, 1, 0, 2000),\n-(8200005, 2290095, 1, 1, 0, 2000),\n-(8200006, 2290003, 1, 1, 0, 2000),\n-(8200006, 2290064, 1, 1, 0, 2000),\n-(8200006, 2290076, 1, 1, 0, 2000),\n-(8200006, 2290077, 1, 1, 0, 2000),\n-(8200006, 2290129, 1, 1, 0, 6000),\n-(8200006, 2290138, 1, 1, 0, 6000),\n-(8200007, 2290006, 1, 1, 0, 2000),\n-(8200007, 2290007, 1, 1, 0, 2000),\n-(8200007, 2290011, 1, 1, 0, 2000),\n-(8200007, 2290016, 1, 1, 0, 2000),\n-(8200007, 2290125, 1, 1, 0, 2000),\n-(8200007, 2290136, 1, 1, 0, 6000),\n-(8200008, 2290006, 1, 1, 0, 2000),\n-(8200008, 2290051, 1, 1, 0, 2000),\n-(8200008, 2290121, 1, 1, 0, 2000),\n-(8200008, 2290122, 1, 1, 0, 2000),\n-(8200008, 2290133, 1, 1, 0, 6000),\n-(8200009, 2290013, 1, 1, 0, 2000),\n-(8200009, 2290016, 1, 1, 0, 2000),\n-(8200009, 2290031, 1, 1, 0, 2000),\n-(8200009, 2290039, 1, 1, 0, 2000),\n-(8200010, 2290026, 1, 1, 0, 2000),\n-(8200010, 2290059, 1, 1, 0, 2000),\n-(8200010, 2290088, 1, 1, 0, 2000),\n-(8200010, 2290089, 1, 1, 0, 2000),\n-(8200010, 2290127, 1, 1, 0, 6000),\n-(8200011, 2290001, 1, 1, 0, 3000),\n-(8200011, 2290040, 1, 1, 0, 3000),\n-(8200011, 2290046, 1, 1, 0, 3000),\n-(8200011, 2290048, 1, 1, 0, 3000),\n-(8200011, 2290049, 1, 1, 0, 3000),\n-(8200011, 2290114, 1, 1, 0, 3000),\n-(8200011, 2290137, 1, 1, 0, 9000),\n-(8200012, 2290041, 1, 1, 0, 3000),\n-(8200012, 2290092, 1, 1, 0, 3000),\n-(8200012, 2290093, 1, 1, 0, 3000),\n-(8200012, 2290115, 1, 1, 0, 3000),\n-(8200012, 2290137, 1, 1, 0, 9000),\n-(8200012, 2290139, 1, 1, 0, 9000),\n-(8220002, 2290020, 1, 1, 0, 40000),\n-(8220002, 2290081, 1, 1, 0, 40000),\n-(8220002, 2290085, 1, 1, 0, 40000),\n-(8220002, 2290133, 1, 1, 0, 120000),\n-(8220003, 2290006, 1, 1, 0, 40000),\n-(8220003, 2290030, 1, 1, 0, 40000),\n-(8220003, 2290031, 1, 1, 0, 40000),\n-(8220003, 2290032, 1, 1, 0, 40000),\n-(8220003, 2290033, 1, 1, 0, 40000),\n-(8220003, 2290060, 1, 1, 0, 40000),\n-(8220003, 2290061, 1, 1, 0, 40000),\n-(8220003, 2290076, 1, 1, 0, 40000),\n-(8220003, 2290077, 1, 1, 0, 40000),\n-(8220003, 2290104, 1, 1, 0, 40000),\n-(8220003, 2290105, 1, 1, 0, 40000),\n-(8220003, 2290117, 1, 1, 0, 40000),\n-(8220003, 2290118, 1, 1, 0, 40000),\n-(8220004, 2290018, 1, 1, 0, 40000),\n-(8220004, 2290019, 1, 1, 0, 40000),\n-(8220004, 2290024, 1, 1, 0, 40000),\n-(8220004, 2290025, 1, 1, 0, 40000),\n-(8220004, 2290058, 1, 1, 0, 40000),\n-(8220004, 2290059, 1, 1, 0, 40000),\n-(8220004, 2290076, 1, 1, 0, 40000),\n-(8220004, 2290077, 1, 1, 0, 40000),\n-(8220004, 2290106, 1, 1, 0, 40000),\n-(8220004, 2290127, 1, 1, 0, 120000),\n-(8220004, 2290134, 1, 1, 0, 120000),\n-(8220005, 2290002, 1, 1, 0, 60000),\n-(8220005, 2290003, 1, 1, 0, 60000),\n-(8220005, 2290036, 1, 1, 0, 60000),\n-(8220005, 2290037, 1, 1, 0, 60000),\n-(8220005, 2290055, 1, 1, 0, 60000),\n-(8220005, 2290080, 1, 1, 0, 60000),\n-(8220005, 2290099, 1, 1, 0, 60000),\n-(8220005, 2290131, 1, 1, 0, 180000),\n-(8220005, 2290136, 1, 1, 0, 180000),\n-(8220006, 2290012, 1, 1, 0, 80000),\n-(8220006, 2290013, 1, 1, 0, 80000),\n-(8220006, 2290042, 1, 1, 0, 80000),\n-(8220006, 2290043, 1, 1, 0, 80000),\n-(8220006, 2290060, 1, 1, 0, 80000),\n-(8220006, 2290061, 1, 1, 0, 80000),\n-(8220006, 2290090, 1, 1, 0, 80000),\n-(8220006, 2290119, 1, 1, 0, 80000),\n-(8220006, 2290120, 1, 1, 0, 80000),\n-(8220006, 2290135, 1, 1, 0, 240000),\n-(8220006, 2290138, 1, 1, 0, 240000),\n-(8220007, 2290035, 1, 1, 0, 40000),\n-(8220007, 2290091, 1, 1, 0, 40000),\n-(8220007, 2290108, 1, 1, 0, 40000),\n-(8220009, 2290031, 1, 1, 0, 40000),\n-(8220009, 2290129, 1, 1, 0, 120000),\n-(8220015, 2280004, 1, 1, 0, 40000),\n-(8220015, 2280005, 1, 1, 0, 40000),\n-(8220015, 2280006, 1, 1, 0, 40000),\n-(8500002, 2280007, 1, 1, 0, 60000),\n-(8500002, 2280008, 1, 1, 0, 60000),\n-(8500002, 2280009, 1, 1, 0, 60000),\n-(8500002, 2280010, 1, 1, 0, 60000),\n-(8500002, 2290006, 1, 1, 0, 60000),\n-(8500002, 2290010, 1, 1, 0, 60000),\n-(8500002, 2290011, 1, 1, 0, 60000),\n-(8500002, 2290013, 1, 1, 0, 60000),\n-(8500002, 2290028, 1, 1, 0, 60000),\n-(8500002, 2290037, 1, 1, 0, 60000),\n-(8500002, 2290043, 1, 1, 0, 60000),\n-(8500002, 2290051, 1, 1, 0, 60000),\n-(8500002, 2290056, 1, 1, 0, 60000),\n-(8500002, 2290061, 1, 1, 0, 60000),\n-(8500002, 2290066, 1, 1, 0, 60000),\n-(8500002, 2290071, 1, 1, 0, 60000),\n-(8500002, 2290078, 1, 1, 0, 60000),\n-(8500002, 2290089, 1, 1, 0, 60000),\n-(8500002, 2290091, 1, 1, 0, 60000),\n-(8500002, 2290104, 1, 1, 0, 60000),\n-(8500002, 2290107, 1, 1, 0, 60000),\n-(8500002, 2290121, 1, 1, 0, 60000),\n-(8500002, 2290123, 1, 1, 0, 60000),\n-(8500002, 2290126, 1, 1, 0, 180000),\n-(8500002, 2290129, 1, 1, 0, 180000),\n-(8510000, 2280007, 1, 1, 0, 40000),\n-(8510000, 2280008, 1, 1, 0, 40000),\n-(8510000, 2280009, 1, 1, 0, 40000),\n-(8510000, 2280010, 1, 1, 0, 40000),\n-(8510000, 2290000, 1, 1, 0, 40000),\n-(8510000, 2290001, 1, 1, 0, 40000),\n-(8510000, 2290004, 1, 1, 0, 40000),\n-(8510000, 2290005, 1, 1, 0, 40000),\n-(8510000, 2290024, 1, 1, 0, 40000),\n-(8510000, 2290025, 1, 1, 0, 40000),\n-(8510000, 2290026, 1, 1, 0, 40000),\n-(8510000, 2290027, 1, 1, 0, 40000),\n-(8510000, 2290052, 1, 1, 0, 40000),\n-(8510000, 2290053, 1, 1, 0, 40000),\n-(8510000, 2290054, 1, 1, 0, 40000),\n-(8510000, 2290055, 1, 1, 0, 40000),\n-(8510000, 2290076, 1, 1, 0, 40000),\n-(8510000, 2290077, 1, 1, 0, 40000),\n-(8510000, 2290082, 1, 1, 0, 40000),\n-(8510000, 2290083, 1, 1, 0, 40000),\n-(8510000, 2290097, 1, 1, 0, 40000),\n-(8510000, 2290099, 1, 1, 0, 40000),\n-(8510000, 2290106, 1, 1, 0, 40000),\n-(8510000, 2290108, 1, 1, 0, 40000),\n-(8510000, 2290112, 1, 1, 0, 40000),\n-(8510000, 2290114, 1, 1, 0, 40000),\n-(8510000, 2290122, 1, 1, 0, 40000),\n-(8510000, 2290124, 1, 1, 0, 40000),\n-(8510000, 2290132, 1, 1, 0, 120000),\n-(8520000, 2280007, 1, 1, 0, 40000),\n-(8520000, 2280008, 1, 1, 0, 40000),\n-(8520000, 2280009, 1, 1, 0, 40000),\n-(8520000, 2280010, 1, 1, 0, 40000),\n-(8520000, 2290000, 1, 1, 0, 40000),\n-(8520000, 2290001, 1, 1, 0, 40000),\n-(8520000, 2290004, 1, 1, 0, 40000),\n-(8520000, 2290005, 1, 1, 0, 40000),\n-(8520000, 2290024, 1, 1, 0, 40000),\n-(8520000, 2290025, 1, 1, 0, 40000),\n-(8520000, 2290026, 1, 1, 0, 40000),\n-(8520000, 2290027, 1, 1, 0, 40000),\n-(8520000, 2290052, 1, 1, 0, 40000),\n-(8520000, 2290053, 1, 1, 0, 40000),\n-(8520000, 2290054, 1, 1, 0, 40000),\n-(8520000, 2290055, 1, 1, 0, 40000),\n-(8520000, 2290076, 1, 1, 0, 40000),\n-(8520000, 2290077, 1, 1, 0, 40000),\n-(8520000, 2290082, 1, 1, 0, 40000),\n-(8520000, 2290083, 1, 1, 0, 40000),\n-(8520000, 2290097, 1, 1, 0, 40000),\n-(8520000, 2290099, 1, 1, 0, 40000),\n-(8520000, 2290106, 1, 1, 0, 40000),\n-(8520000, 2290108, 1, 1, 0, 40000),\n-(8520000, 2290112, 1, 1, 0, 40000),\n-(8520000, 2290114, 1, 1, 0, 40000),\n-(8520000, 2290122, 1, 1, 0, 40000),\n-(8520000, 2290124, 1, 1, 0, 40000),\n-(8520000, 2290132, 1, 1, 0, 120000),\n-(8800002, 2280007, 1, 1, 0, 80000),\n-(8800002, 2280008, 1, 1, 0, 80000),\n-(8800002, 2280009, 1, 1, 0, 80000),\n-(8800002, 2280010, 1, 1, 0, 80000),\n-(8800002, 2280013, 1, 1, 0, 240000),\n-(8800002, 2280014, 1, 1, 0, 240000),\n-(8800002, 2280015, 1, 1, 0, 240000),\n-(8800002, 2280016, 1, 1, 0, 240000),\n-(8800002, 2290006, 1, 1, 0, 80000),\n-(8800002, 2290007, 1, 1, 0, 80000),\n-(8800002, 2290016, 1, 1, 0, 80000),\n-(8800002, 2290020, 1, 1, 0, 80000),\n-(8800002, 2290022, 1, 1, 0, 80000),\n-(8800002, 2290024, 1, 1, 0, 80000),\n-(8800002, 2290028, 1, 1, 0, 80000),\n-(8800002, 2290029, 1, 1, 0, 80000),\n-(8800002, 2290040, 1, 1, 0, 80000),\n-(8800002, 2290046, 1, 1, 0, 80000),\n-(8800002, 2290048, 1, 1, 0, 80000),\n-(8800002, 2290056, 1, 1, 0, 80000),\n-(8800002, 2290057, 1, 1, 0, 80000),\n-(8800002, 2290058, 1, 1, 0, 80000),\n-(8800002, 2290064, 1, 1, 0, 80000),\n-(8800002, 2290067, 1, 1, 0, 80000),\n-(8800002, 2290074, 1, 1, 0, 80000),\n-(8800002, 2290079, 1, 1, 0, 80000),\n-(8800002, 2290084, 1, 1, 0, 80000),\n-(8800002, 2290094, 1, 1, 0, 80000),\n-(8800002, 2290110, 1, 1, 0, 80000),\n-(8800002, 2290115, 1, 1, 0, 80000),\n-(8810018, 2290017, 1, 1, 0, 100000),\n-(8810018, 2290021, 1, 1, 0, 100000),\n-(8810018, 2290023, 1, 1, 0, 100000),\n-(8810018, 2290041, 1, 1, 0, 100000),\n-(8810018, 2290047, 1, 1, 0, 100000),\n-(8810018, 2290049, 1, 1, 0, 100000),\n-(8810018, 2290065, 1, 1, 0, 100000),\n-(8810018, 2290075, 1, 1, 0, 100000),\n-(8810018, 2290085, 1, 1, 0, 100000),\n-(8810018, 2290095, 1, 1, 0, 100000),\n-(8810018, 2290096, 1, 1, 0, 100000),\n-(8810018, 2290111, 1, 1, 0, 100000),\n-(8810018, 2290116, 1, 1, 0, 100000),\n-(8810018, 2290125, 1, 1, 0, 100000),\n-(8810018, 2290133, 1, 1, 0, 300000),\n-(8810018, 2290137, 1, 1, 0, 300000),\n-(8810018, 2290139, 1, 1, 0, 300000),\n-(8820000, 2290010, 1, 1, 0, 120000),\n-(8820000, 2290022, 1, 1, 0, 120000),\n-(8820000, 2290040, 1, 1, 0, 120000),\n-(8820000, 2290046, 1, 1, 0, 120000),\n-(8820000, 2290048, 1, 1, 0, 120000),\n-(8820000, 2290052, 1, 1, 0, 120000),\n-(8820000, 2290084, 1, 1, 0, 120000),\n-(8820000, 2290090, 1, 1, 0, 120000),\n-(8820000, 2290106, 1, 1, 0, 120000),\n-(8820000, 2290119, 1, 1, 0, 120000),\n-(8820001, 2290010, 1, 1, 0, 120000),\n-(8820001, 2290022, 1, 1, 0, 120000),\n-(8820001, 2290040, 1, 1, 0, 120000),\n-(8820001, 2290046, 1, 1, 0, 120000),\n-(8820001, 2290048, 1, 1, 0, 120000),\n-(8820001, 2290052, 1, 1, 0, 120000),\n-(8820001, 2290084, 1, 1, 0, 120000),\n-(8820001, 2290090, 1, 1, 0, 120000),\n-(8820001, 2290106, 1, 1, 0, 120000),\n-(8820001, 2290119, 1, 1, 0, 120000),\n-(9300028, 2280015, 1, 1, 0, 120000),\n-(9300028, 2290026, 1, 1, 0, 40000),\n-(9300028, 2290064, 1, 1, 0, 40000),\n-(9300028, 2290075, 1, 1, 0, 40000),\n-(9300028, 2290093, 1, 1, 0, 40000),\n-(9300028, 2290111, 1, 1, 0, 40000),\n-(9300094, 2280004, 1, 1, 0, 40000),\n-(9300094, 2280005, 1, 1, 0, 40000),\n-(9300094, 2280006, 1, 1, 0, 40000),\n-(9300095, 2280004, 1, 1, 0, 2000),\n-(9300095, 2280005, 1, 1, 0, 2000),\n-(9300095, 2280006, 1, 1, 0, 2000),\n-(9303016, 2290006, 1, 1, 0, 2000),\n-(9303016, 2290030, 1, 1, 0, 2000),\n-(9303016, 2290032, 1, 1, 0, 2000),\n-(9303016, 2290060, 1, 1, 0, 2000),\n-(9303016, 2290076, 1, 1, 0, 2000),\n-(9303016, 2290104, 1, 1, 0, 2000),\n-(9303016, 2290117, 1, 1, 0, 2000),\n-(9400014, 2290053, 1, 1, 0, 40000),\n-(9400014, 2290087, 1, 1, 0, 40000),\n-(9400014, 2290112, 1, 1, 0, 40000),\n-(9400014, 2290122, 1, 1, 0, 40000),\n-(9400120, 2290045, 1, 1, 0, 40000),\n-(9400121, 2280014, 1, 1, 0, 180000),\n-(9400121, 2290081, 1, 1, 0, 60000),\n-(9400121, 2290087, 1, 1, 0, 60000),\n-(9400121, 2290101, 1, 1, 0, 60000),\n-(9400121, 2290103, 1, 1, 0, 60000),\n-(9400122, 2290007, 1, 1, 0, 40000),\n-(9400122, 2290062, 1, 1, 0, 40000),\n-(9400122, 2290116, 1, 1, 0, 40000),\n-(9400300, 2290045, 1, 1, 0, 120000),\n-(9400300, 2290055, 1, 1, 0, 120000),\n-(9400300, 2290063, 1, 1, 0, 120000),\n-(9400300, 2290079, 1, 1, 0, 120000),\n-(9400300, 2290081, 1, 1, 0, 120000),\n-(9400300, 2290096, 1, 1, 0, 120000),\n-(9400514, 2290023, 1, 1, 0, 40000),\n-(9400514, 2290057, 1, 1, 0, 40000),\n-(9400514, 2290088, 1, 1, 0, 40000),\n-(9400514, 2290095, 1, 1, 0, 40000),\n-(9400514, 2290115, 1, 1, 0, 40000),\n-(9400514, 2290139, 1, 1, 0, 120000),\n-(9400549, 2290001, 1, 1, 0, 40000),\n-(9400549, 2290020, 1, 1, 0, 40000),\n-(9400549, 2290045, 1, 1, 0, 40000),\n-(9400549, 2290057, 1, 1, 0, 40000),\n-(9400549, 2290086, 1, 1, 0, 40000),\n-(9400575, 2290009, 1, 1, 0, 40000),\n-(9400575, 2290051, 1, 1, 0, 40000),\n-(9400575, 2290081, 1, 1, 0, 40000),\n-(9400575, 2290087, 1, 1, 0, 40000),\n-(9400575, 2290107, 1, 1, 0, 40000),\n-(9400575, 2290123, 1, 1, 0, 40000),\n-(9400580, 2290004, 1, 1, 0, 2000),\n-(9400580, 2290024, 1, 1, 0, 2000),\n-(9400580, 2290083, 1, 1, 0, 2000),\n-(9400580, 2290087, 1, 1, 0, 2000),\n-(9400580, 2290103, 1, 1, 0, 2000),\n-(9400580, 2290121, 1, 1, 0, 2000),\n-(9400582, 2290005, 1, 1, 0, 2000),\n-(9400582, 2290010, 1, 1, 0, 2000),\n-(9400582, 2290029, 1, 1, 0, 2000),\n-(9400582, 2290047, 1, 1, 0, 2000),\n-(9400582, 2290049, 1, 1, 0, 2000),\n-(9400582, 2290074, 1, 1, 0, 2000),\n-(9400582, 2290079, 1, 1, 0, 2000),\n-(9400582, 2290081, 1, 1, 0, 2000),\n-(9400582, 2290135, 1, 1, 0, 6000),\n-(9400590, 2290088, 1, 1, 0, 60000),\n-(9400590, 2290125, 1, 1, 0, 60000),\n-(9400590, 2290135, 1, 1, 0, 180000),\n-(9400591, 2290039, 1, 1, 0, 60000),\n-(9400591, 2290074, 1, 1, 0, 60000),\n-(9400591, 2290113, 1, 1, 0, 60000),\n-(9400592, 2290047, 1, 1, 0, 60000),\n-(9400592, 2290123, 1, 1, 0, 60000),\n-(9400592, 2290131, 1, 1, 0, 180000),\n-(9400593, 2290069, 1, 1, 0, 60000),\n-(9400593, 2290093, 1, 1, 0, 60000),\n-(9400593, 2290138, 1, 1, 0, 180000),\n-(9420513, 2290039, 1, 1, 0, 40000),\n-(9420513, 2290100, 1, 1, 0, 40000),\n-(9420513, 2290108, 1, 1, 0, 40000),\n-(9420513, 2290118, 1, 1, 0, 40000),\n-(9420513, 2290138, 1, 1, 0, 120000),\n+(7090000, 2290087, 1, 1, 0, 10000),\n+(8090000, 2290045, 1, 1, 0, 10000),\n+(8140103, 2290044, 1, 1, 0, 500),\n+(8140511, 2290009, 1, 1, 0, 500),\n+(8140511, 2290050, 1, 1, 0, 500),\n+(8140511, 2290083, 1, 1, 0, 500),\n+(8140511, 2290134, 1, 1, 0, 1500),\n+(8140512, 2290013, 1, 1, 0, 500),\n+(8140512, 2290067, 1, 1, 0, 500),\n+(8140512, 2290082, 1, 1, 0, 500),\n+(8140512, 2290097, 1, 1, 0, 500),\n+(8140512, 2290116, 1, 1, 0, 500),\n+(8140512, 2290131, 1, 1, 0, 1500),\n+(8140600, 2290132, 1, 1, 0, 1500),\n+(8140700, 2290106, 1, 1, 0, 500),\n+(8140700, 2290126, 1, 1, 0, 1500),\n+(8140701, 2290122, 1, 1, 0, 500),\n+(8140702, 2290112, 1, 1, 0, 500),\n+(8140703, 2290088, 1, 1, 0, 500),\n+(8140703, 2290099, 1, 1, 0, 500),\n+(8141000, 2290082, 1, 1, 0, 500),\n+(8141000, 2290097, 1, 1, 0, 500),\n+(8141100, 2280005, 1, 1, 0, 500),\n+(8141300, 2290098, 1, 1, 0, 500),\n+(8142100, 2290032, 1, 1, 0, 500),\n+(8142100, 2290082, 1, 1, 0, 500),\n+(8142100, 2290114, 1, 1, 0, 500),\n+(8143000, 2280004, 1, 1, 0, 500),\n+(8150000, 2280013, 1, 1, 0, 30000),\n+(8150000, 2290070, 1, 1, 0, 10000),\n+(8150000, 2290091, 1, 1, 0, 10000),\n+(8150100, 2290042, 1, 1, 0, 500),\n+(8150100, 2290053, 1, 1, 0, 500),\n+(8150100, 2290073, 1, 1, 0, 500),\n+(8150100, 2290102, 1, 1, 0, 500),\n+(8150100, 2290118, 1, 1, 0, 500),\n+(8150101, 2290017, 1, 1, 0, 500),\n+(8150101, 2290021, 1, 1, 0, 500),\n+(8150101, 2290035, 1, 1, 0, 500),\n+(8150101, 2290042, 1, 1, 0, 500),\n+(8150101, 2290052, 1, 1, 0, 500),\n+(8150101, 2290102, 1, 1, 0, 500),\n+(8150200, 2290024, 1, 1, 0, 500),\n+(8150200, 2290100, 1, 1, 0, 500),\n+(8150200, 2290135, 1, 1, 0, 1500),\n+(8150201, 2290004, 1, 1, 0, 500),\n+(8150201, 2290006, 1, 1, 0, 500),\n+(8150201, 2290024, 1, 1, 0, 500),\n+(8150201, 2290036, 1, 1, 0, 500),\n+(8150201, 2290056, 1, 1, 0, 500),\n+(8150201, 2290072, 1, 1, 0, 500),\n+(8150201, 2290078, 1, 1, 0, 500),\n+(8150201, 2290117, 1, 1, 0, 500),\n+(8150300, 2290003, 1, 1, 0, 500),\n+(8150300, 2290033, 1, 1, 0, 500),\n+(8150300, 2290111, 1, 1, 0, 500),\n+(8150300, 2290120, 1, 1, 0, 500),\n+(8150300, 2290127, 1, 1, 0, 1500),\n+(8150301, 2290023, 1, 1, 0, 500),\n+(8150301, 2290029, 1, 1, 0, 500),\n+(8150301, 2290101, 1, 1, 0, 500),\n+(8150301, 2290107, 1, 1, 0, 500),\n+(8150302, 2290010, 1, 1, 0, 500),\n+(8150302, 2290019, 1, 1, 0, 500),\n+(8150302, 2290026, 1, 1, 0, 500),\n+(8150302, 2290076, 1, 1, 0, 500),\n+(8150302, 2290085, 1, 1, 0, 500),\n+(8150302, 2290096, 1, 1, 0, 500),\n+(8150302, 2290113, 1, 1, 0, 500),\n+(8150302, 2290119, 1, 1, 0, 500),\n+(8150302, 2290128, 1, 1, 0, 1500),\n+(8160000, 2290017, 1, 1, 0, 500),\n+(8160000, 2290045, 1, 1, 0, 500),\n+(8160000, 2290065, 1, 1, 0, 500),\n+(8160000, 2290067, 1, 1, 0, 500),\n+(8160000, 2290081, 1, 1, 0, 500),\n+(8170000, 2290012, 1, 1, 0, 500),\n+(8170000, 2290086, 1, 1, 0, 500),\n+(8170000, 2290087, 1, 1, 0, 500),\n+(8170000, 2290134, 1, 1, 0, 1500),\n+(8180000, 2290002, 1, 1, 0, 10000),\n+(8180000, 2290003, 1, 1, 0, 10000),\n+(8180000, 2290014, 1, 1, 0, 10000),\n+(8180000, 2290015, 1, 1, 0, 10000),\n+(8180000, 2290030, 1, 1, 0, 10000),\n+(8180000, 2290035, 1, 1, 0, 10000),\n+(8180000, 2290036, 1, 1, 0, 10000),\n+(8180000, 2290063, 1, 1, 0, 10000),\n+(8180000, 2290080, 1, 1, 0, 10000),\n+(8180000, 2290098, 1, 1, 0, 10000),\n+(8180000, 2290101, 1, 1, 0, 10000),\n+(8180000, 2290117, 1, 1, 0, 10000),\n+(8180000, 2290130, 1, 1, 0, 30000),\n+(8180001, 2290018, 1, 1, 0, 10000),\n+(8180001, 2290019, 1, 1, 0, 10000),\n+(8180001, 2290032, 1, 1, 0, 10000),\n+(8180001, 2290042, 1, 1, 0, 10000),\n+(8180001, 2290058, 1, 1, 0, 10000),\n+(8180001, 2290059, 1, 1, 0, 10000),\n+(8180001, 2290068, 1, 1, 0, 10000),\n+(8180001, 2290069, 1, 1, 0, 10000),\n+(8180001, 2290072, 1, 1, 0, 10000),\n+(8180001, 2290092, 1, 1, 0, 10000),\n+(8180001, 2290099, 1, 1, 0, 10000),\n+(8180001, 2290100, 1, 1, 0, 10000),\n+(8180001, 2290102, 1, 1, 0, 10000),\n+(8180001, 2290119, 1, 1, 0, 10000),\n+(8180001, 2290128, 1, 1, 0, 30000),\n+(8190000, 2280016, 1, 1, 0, 1500),\n+(8190000, 2290030, 1, 1, 0, 500),\n+(8190000, 2290044, 1, 1, 0, 500),\n+(8190000, 2290054, 1, 1, 0, 500),\n+(8190000, 2290066, 1, 1, 0, 500),\n+(8190000, 2290075, 1, 1, 0, 500),\n+(8190000, 2290092, 1, 1, 0, 500),\n+(8190000, 2290103, 1, 1, 0, 500),\n+(8190002, 2290000, 1, 1, 0, 500),\n+(8190002, 2290008, 1, 1, 0, 500),\n+(8190002, 2290018, 1, 1, 0, 500),\n+(8190002, 2290038, 1, 1, 0, 500),\n+(8190002, 2290060, 1, 1, 0, 500),\n+(8190002, 2290080, 1, 1, 0, 500),\n+(8190002, 2290124, 1, 1, 0, 500),\n+(8190003, 2280013, 1, 1, 0, 1500),\n+(8190003, 2290007, 1, 1, 0, 500),\n+(8190003, 2290012, 1, 1, 0, 500),\n+(8190003, 2290014, 1, 1, 0, 500),\n+(8190003, 2290033, 1, 1, 0, 500),\n+(8190003, 2290045, 1, 1, 0, 500),\n+(8190003, 2290050, 1, 1, 0, 500),\n+(8190003, 2290055, 1, 1, 0, 500),\n+(8190003, 2290062, 1, 1, 0, 500),\n+(8190003, 2290063, 1, 1, 0, 500),\n+(8190003, 2290070, 1, 1, 0, 500),\n+(8190003, 2290086, 1, 1, 0, 500),\n+(8190003, 2290108, 1, 1, 0, 500),\n+(8190003, 2290133, 1, 1, 0, 1500),\n+(8190004, 2290002, 1, 1, 0, 500),\n+(8190004, 2290009, 1, 1, 0, 500),\n+(8190004, 2290021, 1, 1, 0, 500),\n+(8190004, 2290034, 1, 1, 0, 500),\n+(8190004, 2290041, 1, 1, 0, 500),\n+(8190004, 2290052, 1, 1, 0, 500),\n+(8190004, 2290053, 1, 1, 0, 500),\n+(8190004, 2290058, 1, 1, 0, 500),\n+(8190004, 2290068, 1, 1, 0, 500),\n+(8190004, 2290071, 1, 1, 0, 500),\n+(8190004, 2290073, 1, 1, 0, 500),\n+(8190004, 2290090, 1, 1, 0, 500),\n+(8190004, 2290112, 1, 1, 0, 500),\n+(8190004, 2290121, 1, 1, 0, 500),\n+(8190004, 2290130, 1, 1, 0, 1500),\n+(8190005, 2290000, 1, 1, 0, 500),\n+(8190005, 2290008, 1, 1, 0, 500),\n+(8190005, 2290018, 1, 1, 0, 500),\n+(8190005, 2290038, 1, 1, 0, 500),\n+(8190005, 2290060, 1, 1, 0, 500),\n+(8190005, 2290080, 1, 1, 0, 500),\n+(8190005, 2290124, 1, 1, 0, 500),\n+(8200000, 2290005, 1, 1, 0, 500),\n+(8200000, 2290011, 1, 1, 0, 500),\n+(8200000, 2290114, 1, 1, 0, 500),\n+(8200001, 2280015, 1, 1, 0, 1500),\n+(8200001, 2290050, 1, 1, 0, 500),\n+(8200001, 2290059, 1, 1, 0, 500),\n+(8200001, 2290065, 1, 1, 0, 500),\n+(8200001, 2290129, 1, 1, 0, 1500),\n+(8200002, 2290062, 1, 1, 0, 500),\n+(8200002, 2290066, 1, 1, 0, 500),\n+(8200002, 2290070, 1, 1, 0, 500),\n+(8200002, 2290131, 1, 1, 0, 1500),\n+(8200002, 2290139, 1, 1, 0, 1500),\n+(8200003, 2290012, 1, 1, 0, 500),\n+(8200003, 2290056, 1, 1, 0, 500),\n+(8200003, 2290071, 1, 1, 0, 500),\n+(8200003, 2290101, 1, 1, 0, 500),\n+(8200003, 2290136, 1, 1, 0, 1500),\n+(8200004, 2280016, 1, 1, 0, 1500),\n+(8200004, 2290069, 1, 1, 0, 500),\n+(8200004, 2290072, 1, 1, 0, 500),\n+(8200004, 2290073, 1, 1, 0, 500),\n+(8200004, 2290127, 1, 1, 0, 1500),\n+(8200004, 2290134, 1, 1, 0, 1500),\n+(8200005, 2280014, 1, 1, 0, 1500),\n+(8200005, 2290078, 1, 1, 0, 500),\n+(8200005, 2290079, 1, 1, 0, 500),\n+(8200005, 2290095, 1, 1, 0, 500),\n+(8200006, 2290003, 1, 1, 0, 500),\n+(8200006, 2290064, 1, 1, 0, 500),\n+(8200006, 2290076, 1, 1, 0, 500),\n+(8200006, 2290077, 1, 1, 0, 500),\n+(8200006, 2290129, 1, 1, 0, 1500),\n+(8200006, 2290138, 1, 1, 0, 1500),\n+(8200007, 2290006, 1, 1, 0, 500),\n+(8200007, 2290007, 1, 1, 0, 500),\n+(8200007, 2290011, 1, 1, 0, 500),\n+(8200007, 2290016, 1, 1, 0, 500),\n+(8200007, 2290125, 1, 1, 0, 500),\n+(8200007, 2290136, 1, 1, 0, 1500),\n+(8200008, 2290006, 1, 1, 0, 500),\n+(8200008, 2290051, 1, 1, 0, 500),\n+(8200008, 2290121, 1, 1, 0, 500),\n+(8200008, 2290122, 1, 1, 0, 500),\n+(8200008, 2290133, 1, 1, 0, 1500),\n+(8200009, 2290013, 1, 1, 0, 500),\n+(8200009, 2290016, 1, 1, 0, 500),\n+(8200009, 2290031, 1, 1, 0, 500),\n+(8200009, 2290039, 1, 1, 0, 500),\n+(8200010, 2290026, 1, 1, 0, 500),\n+(8200010, 2290059, 1, 1, 0, 500),\n+(8200010, 2290088, 1, 1, 0, 500),\n+(8200010, 2290089, 1, 1, 0, 500),\n+(8200010, 2290127, 1, 1, 0, 1500),\n+(8200011, 2290001, 1, 1, 0, 750),\n+(8200011, 2290040, 1, 1, 0, 750),\n+(8200011, 2290046, 1, 1, 0, 750),\n+(8200011, 2290048, 1, 1, 0, 750),\n+(8200011, 2290049, 1, 1, 0, 750),\n+(8200011, 2290114, 1, 1, 0, 750),\n+(8200011, 2290137, 1, 1, 0, 2250),\n+(8200012, 2290041, 1, 1, 0, 750),\n+(8200012, 2290092, 1, 1, 0, 750),\n+(8200012, 2290093, 1, 1, 0, 750),\n+(8200012, 2290115, 1, 1, 0, 750),\n+(8200012, 2290137, 1, 1, 0, 2250),\n+(8200012, 2290139, 1, 1, 0, 2250),\n+(8220002, 2290020, 1, 1, 0, 10000),\n+(8220002, 2290081, 1, 1, 0, 10000),\n+(8220002, 2290085, 1, 1, 0, 10000),\n+(8220002, 2290133, 1, 1, 0, 30000),\n+(8220003, 2290006, 1, 1, 0, 10000),\n+(8220003, 2290030, 1, 1, 0, 10000),\n+(8220003, 2290031, 1, 1, 0, 10000),\n+(8220003, 2290032, 1, 1, 0, 10000),\n+(8220003, 2290033, 1, 1, 0, 10000),\n+(8220003, 2290060, 1, 1, 0, 10000),\n+(8220003, 2290061, 1, 1, 0, 10000),\n+(8220003, 2290076, 1, 1, 0, 10000),\n+(8220003, 2290077, 1, 1, 0, 10000),\n+(8220003, 2290104, 1, 1, 0, 10000),\n+(8220003, 2290105, 1, 1, 0, 10000),\n+(8220003, 2290117, 1, 1, 0, 10000),\n+(8220003, 2290118, 1, 1, 0, 10000),\n+(8220004, 2290018, 1, 1, 0, 10000),\n+(8220004, 2290019, 1, 1, 0, 10000),\n+(8220004, 2290024, 1, 1, 0, 10000),\n+(8220004, 2290025, 1, 1, 0, 10000),\n+(8220004, 2290058, 1, 1, 0, 10000),\n+(8220004, 2290059, 1, 1, 0, 10000),\n+(8220004, 2290076, 1, 1, 0, 10000),\n+(8220004, 2290077, 1, 1, 0, 10000),\n+(8220004, 2290106, 1, 1, 0, 10000),\n+(8220004, 2290127, 1, 1, 0, 30000),\n+(8220004, 2290134, 1, 1, 0, 30000),\n+(8220005, 2290002, 1, 1, 0, 15000),\n+(8220005, 2290003, 1, 1, 0, 15000),\n+(8220005, 2290036, 1, 1, 0, 15000),\n+(8220005, 2290037, 1, 1, 0, 15000),\n+(8220005, 2290055, 1, 1, 0, 15000),\n+(8220005, 2290080, 1, 1, 0, 15000),\n+(8220005, 2290099, 1, 1, 0, 15000),\n+(8220005, 2290131, 1, 1, 0, 45000),\n+(8220005, 2290136, 1, 1, 0, 45000),\n+(8220006, 2290012, 1, 1, 0, 20000),\n+(8220006, 2290013, 1, 1, 0, 20000),\n+(8220006, 2290042, 1, 1, 0, 20000),\n+(8220006, 2290043, 1, 1, 0, 20000),\n+(8220006, 2290060, 1, 1, 0, 20000),\n+(8220006, 2290061, 1, 1, 0, 20000),\n+(8220006, 2290090, 1, 1, 0, 20000),\n+(8220006, 2290119, 1, 1, 0, 20000),\n+(8220006, 2290120, 1, 1, 0, 20000),\n+(8220006, 2290135, 1, 1, 0, 60000),\n+(8220006, 2290138, 1, 1, 0, 60000),\n+(8220007, 2290035, 1, 1, 0, 10000),\n+(8220007, 2290091, 1, 1, 0, 10000),\n+(8220007, 2290108, 1, 1, 0, 10000),\n+(8220009, 2290031, 1, 1, 0, 10000),\n+(8220009, 2290129, 1, 1, 0, 30000),\n+(8220015, 2280004, 1, 1, 0, 10000),\n+(8220015, 2280005, 1, 1, 0, 10000),\n+(8220015, 2280006, 1, 1, 0, 10000),\n+(8500002, 2280007, 1, 1, 0, 15000),\n+(8500002, 2280008, 1, 1, 0, 15000),\n+(8500002, 2280009, 1, 1, 0, 15000),\n+(8500002, 2280010, 1, 1, 0, 15000),\n+(8500002, 2290006, 1, 1, 0, 15000),\n+(8500002, 2290010, 1, 1, 0, 15000),\n+(8500002, 2290011, 1, 1, 0, 15000),\n+(8500002, 2290013, 1, 1, 0, 15000),\n+(8500002, 2290028, 1, 1, 0, 15000),\n+(8500002, 2290037, 1, 1, 0, 15000),\n+(8500002, 2290043, 1, 1, 0, 15000),\n+(8500002, 2290051, 1, 1, 0, 15000),\n+(8500002, 2290056, 1, 1, 0, 15000),\n+(8500002, 2290061, 1, 1, 0, 15000),\n+(8500002, 2290066, 1, 1, 0, 15000),\n+(8500002, 2290071, 1, 1, 0, 15000),\n+(8500002, 2290078, 1, 1, 0, 15000),\n+(8500002, 2290089, 1, 1, 0, 15000),\n+(8500002, 2290091, 1, 1, 0, 15000),\n+(8500002, 2290104, 1, 1, 0, 15000),\n+(8500002, 2290107, 1, 1, 0, 15000),\n+(8500002, 2290121, 1, 1, 0, 15000),\n+(8500002, 2290123, 1, 1, 0, 15000),\n+(8500002, 2290126, 1, 1, 0, 45000),\n+(8500002, 2290129, 1, 1, 0, 45000),\n+(8510000, 2280007, 1, 1, 0, 10000),\n+(8510000, 2280008, 1, 1, 0, 10000),\n+(8510000, 2280009, 1, 1, 0, 10000),\n+(8510000, 2280010, 1, 1, 0, 10000),\n+(8510000, 2290000, 1, 1, 0, 10000),\n+(8510000, 2290001, 1, 1, 0, 10000),\n+(8510000, 2290004, 1, 1, 0, 10000),\n+(8510000, 2290005, 1, 1, 0, 10000),\n+(8510000, 2290024, 1, 1, 0, 10000),\n+(8510000, 2290025, 1, 1, 0, 10000),\n+(8510000, 2290026, 1, 1, 0, 10000),\n+(8510000, 2290027, 1, 1, 0, 10000),\n+(8510000, 2290052, 1, 1, 0, 10000),\n+(8510000, 2290053, 1, 1, 0, 10000),\n+(8510000, 2290054, 1, 1, 0, 10000),\n+(8510000, 2290055, 1, 1, 0, 10000),\n+(8510000, 2290076, 1, 1, 0, 10000),\n+(8510000, 2290077, 1, 1, 0, 10000),\n+(8510000, 2290082, 1, 1, 0, 10000),\n+(8510000, 2290083, 1, 1, 0, 10000),\n+(8510000, 2290097, 1, 1, 0, 10000),\n+(8510000, 2290099, 1, 1, 0, 10000),\n+(8510000, 2290106, 1, 1, 0, 10000),\n+(8510000, 2290108, 1, 1, 0, 10000),\n+(8510000, 2290112, 1, 1, 0, 10000),\n+(8510000, 2290114, 1, 1, 0, 10000),\n+(8510000, 2290122, 1, 1, 0, 10000),\n+(8510000, 2290124, 1, 1, 0, 10000),\n+(8510000, 2290132, 1, 1, 0, 30000),\n+(8520000, 2280007, 1, 1, 0, 10000),\n+(8520000, 2280008, 1, 1, 0, 10000),\n+(8520000, 2280009, 1, 1, 0, 10000),\n+(8520000, 2280010, 1, 1, 0, 10000),\n+(8520000, 2290000, 1, 1, 0, 10000),\n+(8520000, 2290001, 1, 1, 0, 10000),\n+(8520000, 2290004, 1, 1, 0, 10000),\n+(8520000, 2290005, 1, 1, 0, 10000),\n+(8520000, 2290024, 1, 1, 0, 10000),\n+(8520000, 2290025, 1, 1, 0, 10000),\n+(8520000, 2290026, 1, 1, 0, 10000),\n+(8520000, 2290027, 1, 1, 0, 10000),\n+(8520000, 2290052, 1, 1, 0, 10000),\n+(8520000, 2290053, 1, 1, 0, 10000),\n+(8520000, 2290054, 1, 1, 0, 10000),\n+(8520000, 2290055, 1, 1, 0, 10000),\n+(8520000, 2290076, 1, 1, 0, 10000),\n+(8520000, 2290077, 1, 1, 0, 10000),\n+(8520000, 2290082, 1, 1, 0, 10000),\n+(8520000, 2290083, 1, 1, 0, 10000),\n+(8520000, 2290097, 1, 1, 0, 10000),\n+(8520000, 2290099, 1, 1, 0, 10000),\n+(8520000, 2290106, 1, 1, 0, 10000),\n+(8520000, 2290108, 1, 1, 0, 10000),\n+(8520000, 2290112, 1, 1, 0, 10000),\n+(8520000, 2290114, 1, 1, 0, 10000),\n+(8520000, 2290122, 1, 1, 0, 10000),\n+(8520000, 2290124, 1, 1, 0, 10000),\n+(8520000, 2290132, 1, 1, 0, 30000),\n+(8800002, 2280007, 1, 1, 0, 20000),\n+(8800002, 2280008, 1, 1, 0, 20000),\n+(8800002, 2280009, 1, 1, 0, 20000),\n+(8800002, 2280010, 1, 1, 0, 20000),\n+(8800002, 2280013, 1, 1, 0, 60000),\n+(8800002, 2280014, 1, 1, 0, 60000),\n+(8800002, 2280015, 1, 1, 0, 60000),\n+(8800002, 2280016, 1, 1, 0, 60000),\n+(8800002, 2290006, 1, 1, 0, 20000),\n+(8800002, 2290007, 1, 1, 0, 20000),\n+(8800002, 2290016, 1, 1, 0, 20000),\n+(8800002, 2290020, 1, 1, 0, 20000),\n+(8800002, 2290022, 1, 1, 0, 20000),\n+(8800002, 2290024, 1, 1, 0, 20000),\n+(8800002, 2290028, 1, 1, 0, 20000),\n+(8800002, 2290029, 1, 1, 0, 20000),\n+(8800002, 2290040, 1, 1, 0, 20000),\n+(8800002, 2290046, 1, 1, 0, 20000),\n+(8800002, 2290048, 1, 1, 0, 20000),\n+(8800002, 2290056, 1, 1, 0, 20000),\n+(8800002, 2290057, 1, 1, 0, 20000),\n+(8800002, 2290058, 1, 1, 0, 20000),\n+(8800002, 2290064, 1, 1, 0, 20000),\n+(8800002, 2290067, 1, 1, 0, 20000),\n+(8800002, 2290074, 1, 1, 0, 20000),\n+(8800002, 2290079, 1, 1, 0, 20000),\n+(8800002, 2290084, 1, 1, 0, 20000),\n+(8800002, 2290094, 1, 1, 0, 20000),\n+(8800002, 2290110, 1, 1, 0, 20000),\n+(8800002, 2290115, 1, 1, 0, 20000),\n+(8810018, 2290017, 1, 1, 0, 25000),\n+(8810018, 2290021, 1, 1, 0, 25000),\n+(8810018, 2290023, 1, 1, 0, 25000),\n+(8810018, 2290041, 1, 1, 0, 25000),\n+(8810018, 2290047, 1, 1, 0, 25000),\n+(8810018, 2290049, 1, 1, 0, 25000),\n+(8810018, 2290065, 1, 1, 0, 25000),\n+(8810018, 2290075, 1, 1, 0, 25000),\n+(8810018, 2290085, 1, 1, 0, 25000),\n+(8810018, 2290095, 1, 1, 0, 25000),\n+(8810018, 2290096, 1, 1, 0, 25000),\n+(8810018, 2290111, 1, 1, 0, 25000),\n+(8810018, 2290116, 1, 1, 0, 25000),\n+(8810018, 2290125, 1, 1, 0, 25000),\n+(8810018, 2290133, 1, 1, 0, 75000),\n+(8810018, 2290137, 1, 1, 0, 75000),\n+(8810018, 2290139, 1, 1, 0, 75000),\n+(8820000, 2290010, 1, 1, 0, 30000),\n+(8820000, 2290022, 1, 1, 0, 30000),\n+(8820000, 2290040, 1, 1, 0, 30000),\n+(8820000, 2290046, 1, 1, 0, 30000),\n+(8820000, 2290048, 1, 1, 0, 30000),\n+(8820000, 2290052, 1, 1, 0, 30000),\n+(8820000, 2290084, 1, 1, 0, 30000),\n+(8820000, 2290090, 1, 1, 0, 30000),\n+(8820000, 2290106, 1, 1, 0, 30000),\n+(8820000, 2290119, 1, 1, 0, 30000),\n+(8820001, 2290010, 1, 1, 0, 30000),\n+(8820001, 2290022, 1, 1, 0, 30000),\n+(8820001, 2290040, 1, 1, 0, 30000),\n+(8820001, 2290046, 1, 1, 0, 30000),\n+(8820001, 2290048, 1, 1, 0, 30000),\n+(8820001, 2290052, 1, 1, 0, 30000),\n+(8820001, 2290084, 1, 1, 0, 30000),\n+(8820001, 2290090, 1, 1, 0, 30000),\n+(8820001, 2290106, 1, 1, 0, 30000),\n+(8820001, 2290119, 1, 1, 0, 30000),\n+(9300028, 2280015, 1, 1, 0, 30000),\n+(9300028, 2290026, 1, 1, 0, 10000),\n+(9300028, 2290064, 1, 1, 0, 10000),\n+(9300028, 2290075, 1, 1, 0, 10000),\n+(9300028, 2290093, 1, 1, 0, 10000),\n+(9300028, 2290111, 1, 1, 0, 10000),\n+(9300094, 2280004, 1, 1, 0, 10000),\n+(9300094, 2280005, 1, 1, 0, 10000),\n+(9300094, 2280006, 1, 1, 0, 10000),\n+(9300095, 2280004, 1, 1, 0, 500),\n+(9300095, 2280005, 1, 1, 0, 500),\n+(9300095, 2280006, 1, 1, 0, 500),\n+(9303016, 2290006, 1, 1, 0, 500),\n+(9303016, 2290030, 1, 1, 0, 500),\n+(9303016, 2290032, 1, 1, 0, 500),\n+(9303016, 2290060, 1, 1, 0, 500),\n+(9303016, 2290076, 1, 1, 0, 500),\n+(9303016, 2290104, 1, 1, 0, 500),\n+(9303016, 2290117, 1, 1, 0, 500),\n+(9400014, 2290053, 1, 1, 0, 10000),\n+(9400014, 2290087, 1, 1, 0, 10000),\n+(9400014, 2290112, 1, 1, 0, 10000),\n+(9400014, 2290122, 1, 1, 0, 10000),\n+(9400120, 2290045, 1, 1, 0, 10000),\n+(9400121, 2280014, 1, 1, 0, 45000),\n+(9400121, 2290081, 1, 1, 0, 15000),\n+(9400121, 2290087, 1, 1, 0, 15000),\n+(9400121, 2290101, 1, 1, 0, 15000),\n+(9400121, 2290103, 1, 1, 0, 15000),\n+(9400122, 2290007, 1, 1, 0, 10000),\n+(9400122, 2290062, 1, 1, 0, 10000),\n+(9400122, 2290116, 1, 1, 0, 10000),\n+(9400300, 2290045, 1, 1, 0, 30000),\n+(9400300, 2290055, 1, 1, 0, 30000),\n+(9400300, 2290063, 1, 1, 0, 30000),\n+(9400300, 2290079, 1, 1, 0, 30000),\n+(9400300, 2290081, 1, 1, 0, 30000),\n+(9400300, 2290096, 1, 1, 0, 30000),\n+(9400514, 2290023, 1, 1, 0, 10000),\n+(9400514, 2290057, 1, 1, 0, 10000),\n+(9400514, 2290088, 1, 1, 0, 10000),\n+(9400514, 2290095, 1, 1, 0, 10000),\n+(9400514, 2290115, 1, 1, 0, 10000),\n+(9400514, 2290139, 1, 1, 0, 30000),\n+(9400549, 2290001, 1, 1, 0, 10000),\n+(9400549, 2290020, 1, 1, 0, 10000),\n+(9400549, 2290045, 1, 1, 0, 10000),\n+(9400549, 2290057, 1, 1, 0, 10000),\n+(9400549, 2290086, 1, 1, 0, 10000),\n+(9400575, 2290009, 1, 1, 0, 10000),\n+(9400575, 2290051, 1, 1, 0, 10000),\n+(9400575, 2290081, 1, 1, 0, 10000),\n+(9400575, 2290087, 1, 1, 0, 10000),\n+(9400575, 2290107, 1, 1, 0, 10000),\n+(9400575, 2290123, 1, 1, 0, 10000),\n+(9400580, 2290004, 1, 1, 0, 500),\n+(9400580, 2290024, 1, 1, 0, 500),\n+(9400580, 2290083, 1, 1, 0, 500),\n+(9400580, 2290087, 1, 1, 0, 500),\n+(9400580, 2290103, 1, 1, 0, 500),\n+(9400580, 2290121, 1, 1, 0, 500),\n+(9400582, 2290005, 1, 1, 0, 500),\n+(9400582, 2290010, 1, 1, 0, 500),\n+(9400582, 2290029, 1, 1, 0, 500),\n+(9400582, 2290047, 1, 1, 0, 500),\n+(9400582, 2290049, 1, 1, 0, 500),\n+(9400582, 2290074, 1, 1, 0, 500),\n+(9400582, 2290079, 1, 1, 0, 500),\n+(9400582, 2290081, 1, 1, 0, 500),\n+(9400582, 2290135, 1, 1, 0, 1500),\n+(9400590, 2290088, 1, 1, 0, 15000),\n+(9400590, 2290125, 1, 1, 0, 15000),\n+(9400590, 2290135, 1, 1, 0, 45000),\n+(9400591, 2290039, 1, 1, 0, 15000),\n+(9400591, 2290074, 1, 1, 0, 15000),\n+(9400591, 2290113, 1, 1, 0, 15000),\n+(9400592, 2290047, 1, 1, 0, 15000),\n+(9400592, 2290123, 1, 1, 0, 15000),\n+(9400592, 2290131, 1, 1, 0, 45000),\n+(9400593, 2290069, 1, 1, 0, 15000),\n+(9400593, 2290093, 1, 1, 0, 15000),\n+(9400593, 2290138, 1, 1, 0, 45000),\n+(9420513, 2290039, 1, 1, 0, 10000),\n+(9420513, 2290100, 1, 1, 0, 10000),\n+(9420513, 2290108, 1, 1, 0, 10000),\n+(9420513, 2290118, 1, 1, 0, 10000),\n+(9420513, 2290138, 1, 1, 0, 30000),\n (9420514, 2290099, 1, 1, 0, 1287),\n (9420517, 2290000, 1, 1, 0, 1287),\n (9420517, 2290008, 1, 1, 0, 1287),\n@@ -545,75 +545,75 @@\n (9420522, 2290089, 1, 1, 0, 1287),\n (9420522, 2290091, 1, 1, 0, 1287),\n (9420522, 2290107, 1, 1, 0, 1287),\n-(9420540, 2280006, 1, 1, 0, 2000),\n-(9420540, 2290119, 1, 1, 0, 2000),\n-(9420540, 2290120, 1, 1, 0, 2000),\n-(9420544, 2280007, 1, 1, 0, 80000),\n-(9420544, 2280008, 1, 1, 0, 80000),\n-(9420544, 2280009, 1, 1, 0, 80000),\n-(9420544, 2280010, 1, 1, 0, 80000),\n-(9420544, 2290002, 1, 1, 0, 80000),\n-(9420544, 2290015, 1, 1, 0, 80000),\n-(9420544, 2290022, 1, 1, 0, 80000),\n-(9420544, 2290027, 1, 1, 0, 80000),\n-(9420544, 2290034, 1, 1, 0, 80000),\n-(9420544, 2290052, 1, 1, 0, 80000),\n-(9420544, 2290054, 1, 1, 0, 80000),\n-(9420544, 2290089, 1, 1, 0, 80000),\n-(9420544, 2290094, 1, 1, 0, 80000),\n-(9420544, 2290098, 1, 1, 0, 80000),\n-(9420544, 2290105, 1, 1, 0, 80000),\n-(9420544, 2290110, 1, 1, 0, 80000),\n-(9420544, 2290119, 1, 1, 0, 80000),\n-(9420549, 2280007, 1, 1, 0, 80000),\n-(9420549, 2280008, 1, 1, 0, 80000),\n-(9420549, 2280009, 1, 1, 0, 80000),\n-(9420549, 2280010, 1, 1, 0, 80000),\n-(9420549, 2290002, 1, 1, 0, 80000),\n-(9420549, 2290015, 1, 1, 0, 80000),\n-(9420549, 2290022, 1, 1, 0, 80000),\n-(9420549, 2290027, 1, 1, 0, 80000),\n-(9420549, 2290034, 1, 1, 0, 80000),\n-(9420549, 2290052, 1, 1, 0, 80000),\n-(9420549, 2290054, 1, 1, 0, 80000),\n-(9420549, 2290089, 1, 1, 0, 80000),\n-(9420549, 2290094, 1, 1, 0, 80000),\n-(9420549, 2290098, 1, 1, 0, 80000),\n-(9420549, 2290105, 1, 1, 0, 80000),\n-(9420549, 2290110, 1, 1, 0, 80000),\n-(9420549, 2290119, 1, 1, 0, 80000),\n-(9500166, 2290044, 1, 1, 0, 2000),\n-(9500173, 2290018, 1, 1, 0, 40000),\n-(9500173, 2290019, 1, 1, 0, 40000),\n-(9500173, 2290032, 1, 1, 0, 40000),\n-(9500173, 2290042, 1, 1, 0, 40000),\n-(9500173, 2290058, 1, 1, 0, 40000),\n-(9500173, 2290068, 1, 1, 0, 40000),\n-(9500173, 2290072, 1, 1, 0, 40000),\n-(9500173, 2290092, 1, 1, 0, 40000),\n-(9500173, 2290099, 1, 1, 0, 40000),\n-(9500173, 2290102, 1, 1, 0, 40000),\n-(9500173, 2290119, 1, 1, 0, 40000),\n-(9500173, 2290128, 1, 1, 0, 120000),\n-(9500174, 2290002, 1, 1, 0, 40000),\n-(9500174, 2290014, 1, 1, 0, 40000),\n-(9500174, 2290030, 1, 1, 0, 40000),\n-(9500174, 2290080, 1, 1, 0, 40000),\n-(9500174, 2290130, 1, 1, 0, 120000),\n-(9500180, 2290010, 1, 1, 0, 40000),\n-(9500180, 2290028, 1, 1, 0, 40000),\n-(9500180, 2290126, 1, 1, 0, 120000),\n-(9500181, 2290010, 1, 1, 0, 40000),\n-(9500181, 2290028, 1, 1, 0, 40000),\n-(9500181, 2290126, 1, 1, 0, 120000),\n-(9500331, 2290010, 1, 1, 0, 40000),\n-(9500331, 2290028, 1, 1, 0, 40000),\n-(9500331, 2290126, 1, 1, 0, 120000),\n-(9500332, 2290132, 1, 1, 0, 120000),\n-(9500333, 2290006, 1, 1, 0, 40000),\n-(9500333, 2290030, 1, 1, 0, 40000),\n-(9500333, 2290032, 1, 1, 0, 40000),\n-(9500333, 2290060, 1, 1, 0, 40000),\n-(9500333, 2290076, 1, 1, 0, 40000),\n-(9500333, 2290104, 1, 1, 0, 40000),\n-(9500333, 2290117, 1, 1, 0, 40000),\n+(9420540, 2280006, 1, 1, 0, 500),\n+(9420540, 2290119, 1, 1, 0, 500),\n+(9420540, 2290120, 1, 1, 0, 500),\n+(9420544, 2280007, 1, 1, 0, 20000),\n+(9420544, 2280008, 1, 1, 0, 20000),\n+(9420544, 2280009, 1, 1, 0, 20000),\n+(9420544, 2280010, 1, 1, 0, 20000),\n+(9420544, 2290002, 1, 1, 0, 20000),\n+(9420544, 2290015, 1, 1, 0, 20000),\n+(9420544, 2290022, 1, 1, 0, 20000),\n+(9420544, 2290027, 1, 1, 0, 20000),\n+(9420544, 2290034, 1, 1, 0, 20000),\n+(9420544, 2290052, 1, 1, 0, 20000),\n+(9420544, 2290054, 1, 1, 0, 20000),\n+(9420544, 2290089, 1, 1, 0, 20000),\n+(9420544, 2290094, 1, 1, 0, 20000),\n+(9420544, 2290098, 1, 1, 0, 20000),\n+(9420544, 2290105, 1, 1, 0, 20000),\n+(9420544, 2290110, 1, 1, 0, 20000),\n+(9420544, 2290119, 1, 1, 0, 20000),\n+(9420549, 2280007, 1, 1, 0, 20000),\n+(9420549, 2280008, 1, 1, 0, 20000),\n+(9420549, 2280009, 1, 1, 0, 20000),\n+(9420549, 2280010, 1, 1, 0, 20000),\n+(9420549, 2290002, 1, 1, 0, 20000),\n+(9420549, 2290015, 1, 1, 0, 20000),\n+(9420549, 2290022, 1, 1, 0, 20000),\n+(9420549, 2290027, 1, 1, 0, 20000),\n+(9420549, 2290034, 1, 1, 0, 20000),\n+(9420549, 2290052, 1, 1, 0, 20000),\n+(9420549, 2290054, 1, 1, 0, 20000),\n+(9420549, 2290089, 1, 1, 0, 20000),\n+(9420549, 2290094, 1, 1, 0, 20000),\n+(9420549, 2290098, 1, 1, 0, 20000),\n+(9420549, 2290105, 1, 1, 0, 20000),\n+(9420549, 2290110, 1, 1, 0, 20000),\n+(9420549, 2290119, 1, 1, 0, 20000),\n+(9500166, 2290044, 1, 1, 0, 500),\n+(9500173, 2290018, 1, 1, 0, 10000),\n+(9500173, 2290019, 1, 1, 0, 10000),\n+(9500173, 2290032, 1, 1, 0, 10000),\n+(9500173, 2290042, 1, 1, 0, 10000),\n+(9500173, 2290058, 1, 1, 0, 10000),\n+(9500173, 2290068, 1, 1, 0, 10000),\n+(9500173, 2290072, 1, 1, 0, 10000),\n+(9500173, 2290092, 1, 1, 0, 10000),\n+(9500173, 2290099, 1, 1, 0, 10000),\n+(9500173, 2290102, 1, 1, 0, 10000),\n+(9500173, 2290119, 1, 1, 0, 10000),\n+(9500173, 2290128, 1, 1, 0, 30000),\n+(9500174, 2290002, 1, 1, 0, 10000),\n+(9500174, 2290014, 1, 1, 0, 10000),\n+(9500174, 2290030, 1, 1, 0, 10000),\n+(9500174, 2290080, 1, 1, 0, 10000),\n+(9500174, 2290130, 1, 1, 0, 30000),\n+(9500180, 2290010, 1, 1, 0, 10000),\n+(9500180, 2290028, 1, 1, 0, 10000),\n+(9500180, 2290126, 1, 1, 0, 30000),\n+(9500181, 2290010, 1, 1, 0, 10000),\n+(9500181, 2290028, 1, 1, 0, 10000),\n+(9500181, 2290126, 1, 1, 0, 30000),\n+(9500331, 2290010, 1, 1, 0, 10000),\n+(9500331, 2290028, 1, 1, 0, 10000),\n+(9500331, 2290126, 1, 1, 0, 30000),\n+(9500332, 2290132, 1, 1, 0, 30000),\n+(9500333, 2290006, 1, 1, 0, 10000),\n+(9500333, 2290030, 1, 1, 0, 10000),\n+(9500333, 2290032, 1, 1, 0, 10000),\n+(9500333, 2290060, 1, 1, 0, 10000),\n+(9500333, 2290076, 1, 1, 0, 10000),\n+(9500333, 2290104, 1, 1, 0, 10000),\n+(9500333, 2290117, 1, 1, 0, 10000),"}, {"sha": "1129561163f0585f5a138e20287e44c70ffe27d2", "filename": "tools/MapleSkillbookChanceFetcher/src/mapleskillbookchancefetcher/MapleSkillbookChanceFetcher.java", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/tools/MapleSkillbookChanceFetcher/src/mapleskillbookchancefetcher/MapleSkillbookChanceFetcher.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/tools/MapleSkillbookChanceFetcher/src/mapleskillbookchancefetcher/MapleSkillbookChanceFetcher.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/tools/MapleSkillbookChanceFetcher/src/mapleskillbookchancefetcher/MapleSkillbookChanceFetcher.java?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -93,7 +93,7 @@ private static void fetchSkillbookDropChances() {\n                 int mobid = rs.getInt(\"dropperid\");\n                 int itemid = rs.getInt(\"itemid\");\n                 \n-                int expectedChance = 1000;\n+                int expectedChance = 250;\n                 \n                 if (mobStats.get(mobid) != null) {\n                     int level = mobStats.get(mobid).getLevel();"}, {"sha": "f12a74ee565c8eeb63c059407a788e973720021d", "filename": "wz/Map.wz/Map/Map9/922240200.img.xml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/fba27fb3b1018b205431dd8b83e8e50edc594095/wz/Map.wz/Map/Map9/922240200.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/fba27fb3b1018b205431dd8b83e8e50edc594095/wz/Map.wz/Map/Map9/922240200.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Map.wz/Map/Map9/922240200.img.xml?ref=fba27fb3b1018b205431dd8b83e8e50edc594095", "patch": "@@ -3,7 +3,7 @@\n   <imgdir name=\"info\">\n     <int name=\"version\" value=\"10\"/>\n     <int name=\"cloud\" value=\"0\"/>\n-    <int name=\"town\" value=\"0\"/>\n+    <int name=\"town\" value=\"1\"/>\n     <int name=\"swim\" value=\"0\"/>\n     <int name=\"returnMap\" value=\"922240200\"/>\n     <int name=\"forcedReturn\" value=\"999999999\"/>"}]}]},
