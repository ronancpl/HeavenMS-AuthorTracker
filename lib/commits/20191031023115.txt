{"fetchDate": "2019-12-19", "content": [{"sha": "d9f87f18a11415355af866e48f61f926532bc688", "node_id": "MDY6Q29tbWl0NDUwODIwMjM6ZDlmODdmMThhMTE0MTUzNTVhZjg2NmU0OGY2MWY5MjY1MzJiYzY4OA==", "commit": {"author": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2019-10-31T02:31:15Z"}, "committer": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2019-10-31T02:31:15Z"}, "message": "Script references patch\n\nCleared issue in a few scripts which would be trying to access Java Math library methods with unexpected parameter types.\nFixed EllinPQ rewarder NPC handing out an unexpected itemid to the player.\nCleared SQL foreign key constraint statement no longer supposed to be used.", "tree": {"sha": "ce7598eb424c2ef9dfa095182e48856acd0c2214", "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/trees/ce7598eb424c2ef9dfa095182e48856acd0c2214"}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/commits/d9f87f18a11415355af866e48f61f926532bc688", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/d9f87f18a11415355af866e48f61f926532bc688", "html_url": "https://github.com/ronancpl/HeavenMS/commit/d9f87f18a11415355af866e48f61f926532bc688", "comments_url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/d9f87f18a11415355af866e48f61f926532bc688/comments", "author": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7d8d4691daa9a956e4662687c0c970c6c7cd62f2", "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/7d8d4691daa9a956e4662687c0c970c6c7cd62f2", "html_url": "https://github.com/ronancpl/HeavenMS/commit/7d8d4691daa9a956e4662687c0c970c6c7cd62f2"}], "stats": {"total": 73, "additions": 39, "deletions": 34}, "files": [{"sha": "1f41bb8dff5088892d6d8c6cade8a203223641d0", "filename": "config.yaml", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d9f87f18a11415355af866e48f61f926532bc688/config.yaml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d9f87f18a11415355af866e48f61f926532bc688/config.yaml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/config.yaml?ref=d9f87f18a11415355af866e48f61f926532bc688", "patch": "@@ -214,6 +214,7 @@ server:\n     USE_DEBUG_SHOW_PACKET: false\n     USE_SUPPLY_RATE_COUPONS: true       #Allows rate coupons to be sold through the Cash Shop.\n     USE_IP_VALIDATION: true             #Enables IP checking when logging in.\n+    USE_CHARACTER_ACCOUNT_CHECK: false  #Enables one-character-per-account check when logging in. This might be resource intensive.\n \n     USE_MAXRANGE: true                  #Will send and receive packets from all events on a map, rather than those of only view range.\n     USE_MAXRANGE_ECHO_OF_HERO: true"}, {"sha": "d0663f13ab9736474ee6c426364867626e092a4e", "filename": "docs/mychanges_ptbr.txt", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d9f87f18a11415355af866e48f61f926532bc688/docs/mychanges_ptbr.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d9f87f18a11415355af866e48f61f926532bc688/docs/mychanges_ptbr.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/docs/mychanges_ptbr.txt?ref=d9f87f18a11415355af866e48f61f926532bc688", "patch": "@@ -2233,4 +2233,8 @@ Revisado l\u00f3gica booleana na detec\u00e7\u00e3o de foothold abaixo, n\u00e3o realizando m\u00fal\n Revisado l\u00f3gica recente de uso de petid \u00fanico levando a lan\u00e7amento de exce\u00e7\u00e3o (transa\u00e7\u00f5es de DB implica retirada de item de pet do CS storage na DB antes de colocar o mesmo no invent\u00e1rio).\n Corrigido portal relacionado a quest em Ariant inesperadamente levando jogadores \u00e0 passagem secreta de Sleepywood, em caso de conclus\u00e3o de questline da mesma.\n Corrigido loop em scripts de quest de associa\u00e7\u00e3o a Alcadno/Zenumist em Magatia.\n-Adicionado utiliza\u00e7\u00e3o de dispose em quest scripts para o comando hom\u00f4nimo.\n\\ No newline at end of file\n+Adicionado utiliza\u00e7\u00e3o de dispose em quest scripts para o comando hom\u00f4nimo.\n+\n+30 Outubro 2019,\n+Corrigido bug em scripts (que possivelmente passou a ocorrer ao utilizar Java8) relacionado ao tentar utilizar m\u00e9todos da biblioteca Math sem corresponder par\u00e2metros com a assinatura adequada.\n+Corrigido entrega de itemid inesperado em script relacionado a EllinPQ.\n\\ No newline at end of file"}, {"sha": "c4fd175836a0809d156e61d74a8d5d6fd9bded98", "filename": "scripts/npc/2090004.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d9f87f18a11415355af866e48f61f926532bc688/scripts/npc/2090004.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d9f87f18a11415355af866e48f61f926532bc688/scripts/npc/2090004.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2090004.js?ref=d9f87f18a11415355af866e48f61f926532bc688", "patch": "@@ -217,7 +217,7 @@ function action(mode, type, selection) {\n                                         complete = false;\n \t\t\t}\n                         \n-                        if(java.lang.Math.random() >= 0.9) //A lucky find! Scroll 60%\n+                        if(Math.random() >= 0.9) //A lucky find! Scroll 60%\n                             item += 1;\n \n \t\t\tif (!complete || !cm.canHold(item, 1))\n@@ -251,7 +251,7 @@ function action(mode, type, selection) {\n                         var reward;\n                         if (rewdSet[selectedItem] instanceof Array) {\n                                 var length = rewdSet[selectedItem][1] - rewdSet[selectedItem][0];\n-                                reward = rewdSet[selectedItem][0] + java.lang.Math.round(java.lang.Math.random() * length);\n+                                reward = rewdSet[selectedItem][0] + Math.round(Math.random() * length);\n                         }\n                         else reward = rewdSet[selectedItem];\n "}, {"sha": "0c5ed72e01de1cde0c58da9e64c62f4c79c1fcb3", "filename": "scripts/npc/2131001.js", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d9f87f18a11415355af866e48f61f926532bc688/scripts/npc/2131001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d9f87f18a11415355af866e48f61f926532bc688/scripts/npc/2131001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2131001.js?ref=d9f87f18a11415355af866e48f61f926532bc688", "patch": "@@ -13,13 +13,14 @@ function action(mode, type, selection) {\n \treturn;\n     }\n     if (status == 0) {\n-        cm.sendSimple(\"My name is Pergen, I am the strongest magician around these parts.#b\\r\\n#L0#Hey, take these rubbles. You can perform your magic on them.#l\");\n+        cm.sendSimple(\"My name is #p2131001#, I am the strongest magician around these parts.#b\\r\\n#L0#Hey, take these rubbles. You can perform your magic on them.#l\");\n     } else if (status == 1) {\n \tif (!cm.haveItem(exchangeItem, 100)) {\n \t    cm.sendNext(\"You don't have enough... I need at least 100.\");\n \t    cm.dispose();\n \t} else {\n-\t    cm.sendGetNumber(\"Hey, that's a good idea! I can give you #i4310000#Perfect Pitch for each 100 #i\" + exchangeItem + \"##t\" + exchangeItem + \"# you give me. How many do you want? (Current Items: \" + cm.itemQuantity(exchangeItem) + \")\", java.lang.Math.min(300, cm.itemQuantity(exchangeItem) / 100), 1, java.lang.Math.min(300, cm.itemQuantity(exchangeItem) / 100));\n+            // thanks yuxaij for noticing a few methods having parameters not matching the expected Math library function parameter types\n+\t    cm.sendGetNumber(\"Hey, that's a good idea! I can give you #i4310000#Perfect Pitch for each 100 #i\" + exchangeItem + \"##t\" + exchangeItem + \"# you give me. How many do you want? (Current Items: \" + cm.itemQuantity(exchangeItem) + \")\", Math.min(300, cm.itemQuantity(exchangeItem) / 100), 1, Math.min(300, cm.itemQuantity(exchangeItem) / 100));\n \t}\n     } else if (status == 2) { \n \tif (selection >= 1 && selection <= cm.itemQuantity(exchangeItem) / 100) {"}, {"sha": "6a7cff98f62e3efcd575901ea3cbe48dcb997b55", "filename": "scripts/npc/2131002.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d9f87f18a11415355af866e48f61f926532bc688/scripts/npc/2131002.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d9f87f18a11415355af866e48f61f926532bc688/scripts/npc/2131002.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2131002.js?ref=d9f87f18a11415355af866e48f61f926532bc688", "patch": "@@ -5,6 +5,6 @@\n */\n \n function start(){\n-\tcm.sendOk(\"My name is Euryth... As you can see, I am a fairy. People tell me I do not act fairy-like, but... I like making things out of metal objects. Shhh, don't tell this to anyone, but I also like MMA.\");\n+\tcm.sendOk(\"My name is #p2131002#... As you can see, I am a fairy. People tell me I do not act fairy-like, but... I like making things out of metal objects. Shhh, don't tell this to anyone, but I also like MMA.\");\n \tcm.dispose();\n \t}\n\\ No newline at end of file"}, {"sha": "dd5be16d121a7ee866fb0bd26b03b3d9ddb7b364", "filename": "scripts/npc/2131003.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d9f87f18a11415355af866e48f61f926532bc688/scripts/npc/2131003.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d9f87f18a11415355af866e48f61f926532bc688/scripts/npc/2131003.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2131003.js?ref=d9f87f18a11415355af866e48f61f926532bc688", "patch": "@@ -19,7 +19,7 @@ function action(mode, type, selection) {\n \t    cm.sendNext(\"You don't have enough... I need at least 100.\");\n \t    cm.dispose();\n \t} else {\n-\t    cm.sendGetNumber(\"Hey, that's a good idea! I can give you #i4310000#Perfect Pitch for each 100 #i\" + exchangeItem + \"##t\" + exchangeItem + \"# you give me. How many do you want? (Current Items: \" + cm.itemQuantity(exchangeItem) + \")\", java.lang.Math.min(300, cm.itemQuantity(exchangeItem) / 100), 1, java.lang.Math.min(300, cm.itemQuantity(exchangeItem) / 100));\n+\t    cm.sendGetNumber(\"Hey, that's a good idea! I can give you #i4310000#Perfect Pitch for each 100 #i\" + exchangeItem + \"##t\" + exchangeItem + \"# you give me. How many do you want? (Current Items: \" + cm.itemQuantity(exchangeItem) + \")\", Math.min(300, cm.itemQuantity(exchangeItem) / 100), 1, Math.min(300, cm.itemQuantity(exchangeItem) / 100));\n \t}\n     } else if (status == 2) { \n \tif (selection >= 1 && selection <= cm.itemQuantity(exchangeItem) / 100) {"}, {"sha": "e51c35030a4282edc8222031cb572f04afbbd5dc", "filename": "scripts/npc/2131005.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d9f87f18a11415355af866e48f61f926532bc688/scripts/npc/2131005.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d9f87f18a11415355af866e48f61f926532bc688/scripts/npc/2131005.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2131005.js?ref=d9f87f18a11415355af866e48f61f926532bc688", "patch": "@@ -19,7 +19,7 @@ function action(mode, type, selection) {\n \t    cm.sendNext(\"You don't have enough... I need at least 100.\");\n \t    cm.dispose();\n \t} else {\n-\t    cm.sendGetNumber(\"Hey, that's a good idea! I can give you #i4310000#Perfect Pitch for each 100 #i\" + exchangeItem + \"##t\" + exchangeItem + \"# you give me. How many do you want? (Current Items: \" + cm.itemQuantity(exchangeItem) + \")\", java.lang.Math.min(300, cm.itemQuantity(exchangeItem) / 100), 1, java.lang.Math.min(300, cm.itemQuantity(exchangeItem) / 100));\n+\t    cm.sendGetNumber(\"Hey, that's a good idea! I can give you #i4310000#Perfect Pitch for each 100 #i\" + exchangeItem + \"##t\" + exchangeItem + \"# you give me. How many do you want? (Current Items: \" + cm.itemQuantity(exchangeItem) + \")\", Math.min(300, cm.itemQuantity(exchangeItem) / 100), 1, Math.min(300, cm.itemQuantity(exchangeItem) / 100));\n \t}\n     } else if (status == 2) { \n \tif (selection >= 1 && selection <= cm.itemQuantity(exchangeItem) / 100) {"}, {"sha": "a19b093243220987e5b58175a5ec16006953e8ca", "filename": "scripts/npc/2131006.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d9f87f18a11415355af866e48f61f926532bc688/scripts/npc/2131006.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d9f87f18a11415355af866e48f61f926532bc688/scripts/npc/2131006.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2131006.js?ref=d9f87f18a11415355af866e48f61f926532bc688", "patch": "@@ -19,7 +19,7 @@ function action(mode, type, selection) {\n \t    cm.sendNext(\"You don't have enough... I need at least 100.\");\n \t    cm.dispose();\n \t} else {\n-\t    cm.sendGetNumber(\"Hey, that's a good idea! I can give you #i4310000#Perfect Pitch for each 100 #i\" + exchangeItem + \"##t\" + exchangeItem + \"# you give me. How many do you want? (Current Items: \" + cm.itemQuantity(exchangeItem) + \")\", java.lang.Math.min(300, cm.itemQuantity(exchangeItem) / 100), 1, java.lang.Math.min(300, cm.itemQuantity(exchangeItem) / 100));\n+\t    cm.sendGetNumber(\"Hey, that's a good idea! I can give you #i4310000#Perfect Pitch for each 100 #i\" + exchangeItem + \"##t\" + exchangeItem + \"# you give me. How many do you want? (Current Items: \" + cm.itemQuantity(exchangeItem) + \")\", Math.min(300, cm.itemQuantity(exchangeItem) / 100), 1, Math.min(300, cm.itemQuantity(exchangeItem) / 100));\n \t}\n     } else if (status == 2) { \n \tif (selection >= 1 && selection <= cm.itemQuantity(exchangeItem) / 100) {"}, {"sha": "fffc7fb56201c0ef5ba73494653456282106b389", "filename": "scripts/npc/2131007.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d9f87f18a11415355af866e48f61f926532bc688/scripts/npc/2131007.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d9f87f18a11415355af866e48f61f926532bc688/scripts/npc/2131007.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2131007.js?ref=d9f87f18a11415355af866e48f61f926532bc688", "patch": "@@ -19,7 +19,7 @@ function action(mode, type, selection) {\n \t    cm.sendNext(\"You don't have enough... I need at least 100.\");\n \t    cm.dispose();\n \t} else {\n-\t    cm.sendGetNumber(\"Hey, that's a good idea! I can give you #i4310000#Perfect Pitch for each 100 #i\" + exchangeItem + \"##t\" + exchangeItem + \"# you give me. How many do you want? (Current Items: \" + cm.itemQuantity(exchangeItem) + \")\", java.lang.Math.min(300, cm.itemQuantity(exchangeItem) / 100), 1, java.lang.Math.min(300, cm.itemQuantity(exchangeItem) / 100));\n+\t    cm.sendGetNumber(\"Hey, that's a good idea! I can give you #i4310000#Perfect Pitch for each 100 #i\" + exchangeItem + \"##t\" + exchangeItem + \"# you give me. How many do you want? (Current Items: \" + cm.itemQuantity(exchangeItem) + \")\", Math.min(300, cm.itemQuantity(exchangeItem) / 100), 1, Math.min(300, cm.itemQuantity(exchangeItem) / 100));\n \t}\n     } else if (status == 2) { \n \tif (selection >= 1 && selection <= cm.itemQuantity(exchangeItem) / 100) {"}, {"sha": "e5b3de290b3bb74027e84200d18cb7a4f498ef01", "filename": "scripts/npc/2133000.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d9f87f18a11415355af866e48f61f926532bc688/scripts/npc/2133000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d9f87f18a11415355af866e48f61f926532bc688/scripts/npc/2133000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2133000.js?ref=d9f87f18a11415355af866e48f61f926532bc688", "patch": "@@ -111,9 +111,9 @@ function action(mode, type, selection) {\n                                        cm.dispose();\n                                 }\n                         } else if (selection == 2){\n-                                if (cm.haveItem(1032061) && !cm.haveItem(1032101) && cm.haveItem(4001198, 10)) {\n+                                if (cm.haveItem(1032061) && !cm.haveItem(1032072) && cm.haveItem(4001198, 10)) {\n                                         cm.gainItem(1032061,-1);\n-                                        cm.gainItem(1032101, 1);\n+                                        cm.gainItem(1032072, 1);    // thanks yuxaij for noticing unexpected itemid here\n                                         cm.gainItem(4001198, -10);\n                                         cm.dispose();\n                                 } else {"}, {"sha": "67dbb825bdd17f43a8e9104cf2bae7e2e1b39406", "filename": "scripts/npc/9000011.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d9f87f18a11415355af866e48f61f926532bc688/scripts/npc/9000011.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d9f87f18a11415355af866e48f61f926532bc688/scripts/npc/9000011.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9000011.js?ref=d9f87f18a11415355af866e48f61f926532bc688", "patch": "@@ -127,7 +127,7 @@ function action(mode, type, selection) {\n \t\t\t\t\tcm.dispose();\n \t\t\t\t\treturn;\n \t\t\t}\n-\t\t\tvar rand = java.lang.Math.floor(java.lang.Math.random() * pri.length);\n+\t\t\tvar rand = Math.floor(Math.random() * pri.length);\n \t\t\tif (!cm.haveItem(ite, quan)) {\n \t\t\t\tcm.sendOk(\"You need #b\" + quan + \" #t\" + ite + \"##k to exchange it with item.\");\n \t\t\t} else if (cm.getInventory(1).getNextFreeSlot() <= -1 || cm.getInventory(2).getNextFreeSlot() <= -1 || cm.getInventory(3).getNextFreeSlot() <= -1 || cm.getInventory(4).getNextFreeSlot() <= -1) {"}, {"sha": "a8c036ad816d0818aa04a89d62948af085549fed", "filename": "scripts/npc/9201115.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d9f87f18a11415355af866e48f61f926532bc688/scripts/npc/9201115.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d9f87f18a11415355af866e48f61f926532bc688/scripts/npc/9201115.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9201115.js?ref=d9f87f18a11415355af866e48f61f926532bc688", "patch": "@@ -35,11 +35,11 @@ function action(mode, type, selection) {\n                                 cm.mapMessage(6, \"Engarde! Master Guardians approach!\");\n                                 for (var i = 0; i < 10; i++) {\n                                         var mob = eim.getMonster(9400594);\n-                                        cm.getMap().spawnMonsterOnGroundBelow(mob, new java.awt.Point(-1337 + (java.lang.Math.random() * 1337), 276));\n+                                        cm.getMap().spawnMonsterOnGroundBelow(mob, new java.awt.Point(-1337 + (Math.random() * 1337), 276));\n                                 }\n                                 for (var i = 0; i < 20; i++) {\n                                         var mob = eim.getMonster(9400582);\n-                                        cm.getMap().spawnMonsterOnGroundBelow(mob, new java.awt.Point(-1337 + (java.lang.Math.random() * 1337), 276));\n+                                        cm.getMap().spawnMonsterOnGroundBelow(mob, new java.awt.Point(-1337 + (Math.random() * 1337), 276));\n                                 }\n                                 eim.setIntProperty(\"glpq6\", 1);\n                                 cm.dispose();"}, {"sha": "2788e39c89f882f91b6334a34816aca402be78b0", "filename": "scripts/portal/party6_stage501.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d9f87f18a11415355af866e48f61f926532bc688/scripts/portal/party6_stage501.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d9f87f18a11415355af866e48f61f926532bc688/scripts/portal/party6_stage501.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/party6_stage501.js?ref=d9f87f18a11415355af866e48f61f926532bc688", "patch": "@@ -1,5 +1,5 @@\n function enter(pi) {\n-    if (java.lang.Math.random() < 0.1) {\n+    if (Math.random() < 0.1) {\n \tpi.playPortalSound(); pi.warp(930000300,\"16st\");\n     } else {\n \tpi.playPortalSound(); pi.warp(930000300, \"02st\");"}, {"sha": "2b9dc73d03a4464aec304037d9fec562d1fda8d5", "filename": "scripts/portal/party6_stage502.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d9f87f18a11415355af866e48f61f926532bc688/scripts/portal/party6_stage502.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d9f87f18a11415355af866e48f61f926532bc688/scripts/portal/party6_stage502.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/party6_stage502.js?ref=d9f87f18a11415355af866e48f61f926532bc688", "patch": "@@ -1,5 +1,5 @@\n function enter(pi) {\n-    if (java.lang.Math.random() < 0.1) {\n+    if (Math.random() < 0.1) {\n \tpi.playPortalSound(); pi.warp(930000300,\"16st\");\n     } else {\n \tpi.playPortalSound(); pi.warp(930000300, \"03st\");"}, {"sha": "29706f649b003d318532bc7949c8879317bf56df", "filename": "scripts/portal/party6_stage503.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d9f87f18a11415355af866e48f61f926532bc688/scripts/portal/party6_stage503.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d9f87f18a11415355af866e48f61f926532bc688/scripts/portal/party6_stage503.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/party6_stage503.js?ref=d9f87f18a11415355af866e48f61f926532bc688", "patch": "@@ -1,5 +1,5 @@\n function enter(pi) {\n-    if (java.lang.Math.random() < 0.1) {\n+    if (Math.random() < 0.1) {\n \tpi.playPortalSound(); pi.warp(930000300,\"16st\");\n     } else {\n \tpi.playPortalSound(); pi.warp(930000300, \"04st\");"}, {"sha": "94b7f6d513582e3f51cfa8e67371ff2a11ea16ff", "filename": "scripts/portal/party6_stage504.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d9f87f18a11415355af866e48f61f926532bc688/scripts/portal/party6_stage504.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d9f87f18a11415355af866e48f61f926532bc688/scripts/portal/party6_stage504.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/party6_stage504.js?ref=d9f87f18a11415355af866e48f61f926532bc688", "patch": "@@ -1,5 +1,5 @@\n function enter(pi) {\n-    if (java.lang.Math.random() < 0.1) {\n+    if (Math.random() < 0.1) {\n \tpi.playPortalSound(); pi.warp(930000300,\"16st\");\n     } else {\n \tpi.playPortalSound(); pi.warp(930000300, \"05st\");"}, {"sha": "5ae1c318da1f749f68516014fa71dc0dd79ce8a0", "filename": "scripts/portal/party6_stage505.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d9f87f18a11415355af866e48f61f926532bc688/scripts/portal/party6_stage505.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d9f87f18a11415355af866e48f61f926532bc688/scripts/portal/party6_stage505.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/party6_stage505.js?ref=d9f87f18a11415355af866e48f61f926532bc688", "patch": "@@ -1,5 +1,5 @@\n function enter(pi) {\n-    if (java.lang.Math.random() < 0.1) {\n+    if (Math.random() < 0.1) {\n \tpi.playPortalSound(); pi.warp(930000300,\"16st\");\n     } else {\n \tpi.playPortalSound(); pi.warp(930000300, \"06st\");"}, {"sha": "1078adff06cc143dfae1dec6838a9a63aafba65d", "filename": "scripts/portal/party6_stage506.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d9f87f18a11415355af866e48f61f926532bc688/scripts/portal/party6_stage506.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d9f87f18a11415355af866e48f61f926532bc688/scripts/portal/party6_stage506.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/party6_stage506.js?ref=d9f87f18a11415355af866e48f61f926532bc688", "patch": "@@ -1,5 +1,5 @@\n function enter(pi) {\n-    if (java.lang.Math.random() < 0.1) {\n+    if (Math.random() < 0.1) {\n \tpi.playPortalSound(); pi.warp(930000300,\"16st\");\n     } else {\n \tpi.playPortalSound(); pi.warp(930000300, \"07st\");"}, {"sha": "e8f41aa0accafa826281a9b8a8f34576bda4aeef", "filename": "scripts/portal/party6_stage507.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d9f87f18a11415355af866e48f61f926532bc688/scripts/portal/party6_stage507.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d9f87f18a11415355af866e48f61f926532bc688/scripts/portal/party6_stage507.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/party6_stage507.js?ref=d9f87f18a11415355af866e48f61f926532bc688", "patch": "@@ -1,5 +1,5 @@\n function enter(pi) {\n-    if (java.lang.Math.random() < 0.1) {\n+    if (Math.random() < 0.1) {\n \tpi.playPortalSound(); pi.warp(930000300,\"16st\");\n     } else {\n \tpi.playPortalSound(); pi.warp(930000300, \"08st\");"}, {"sha": "acade52b735baf93e2aa7efc3f45a2ff9d044f0c", "filename": "scripts/portal/party6_stage508.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d9f87f18a11415355af866e48f61f926532bc688/scripts/portal/party6_stage508.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d9f87f18a11415355af866e48f61f926532bc688/scripts/portal/party6_stage508.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/party6_stage508.js?ref=d9f87f18a11415355af866e48f61f926532bc688", "patch": "@@ -1,5 +1,5 @@\n function enter(pi) {\n-    if (java.lang.Math.random() < 0.1) {\n+    if (Math.random() < 0.1) {\n \tpi.playPortalSound(); pi.warp(930000300,\"16st\");\n     } else {\n \tpi.playPortalSound(); pi.warp(930000300, \"09st\");"}, {"sha": "57c8694fcbaa1a234e1d9359709046dd1e2cd6c0", "filename": "scripts/portal/party6_stage509.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d9f87f18a11415355af866e48f61f926532bc688/scripts/portal/party6_stage509.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d9f87f18a11415355af866e48f61f926532bc688/scripts/portal/party6_stage509.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/party6_stage509.js?ref=d9f87f18a11415355af866e48f61f926532bc688", "patch": "@@ -1,5 +1,5 @@\n function enter(pi) {\n-    if (java.lang.Math.random() < 0.1) {\n+    if (Math.random() < 0.1) {\n \tpi.playPortalSound(); pi.warp(930000300,\"16st\");\n     } else {\n \tpi.playPortalSound(); pi.warp(930000300, \"10st\");"}, {"sha": "6632bbd4d16e3d7fb1ae7f3442a8731e8746b6a6", "filename": "scripts/portal/party6_stage510.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d9f87f18a11415355af866e48f61f926532bc688/scripts/portal/party6_stage510.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d9f87f18a11415355af866e48f61f926532bc688/scripts/portal/party6_stage510.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/party6_stage510.js?ref=d9f87f18a11415355af866e48f61f926532bc688", "patch": "@@ -1,5 +1,5 @@\n function enter(pi) {\n-    if (java.lang.Math.random() < 0.1) {\n+    if (Math.random() < 0.1) {\n \tpi.playPortalSound(); pi.warp(930000300,\"16st\");\n     } else {\n \tpi.playPortalSound(); pi.warp(930000300, \"11st\");"}, {"sha": "93c7f56cfbc22ebf0d63df7df4f6af2f43e125b7", "filename": "scripts/portal/party6_stage511.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d9f87f18a11415355af866e48f61f926532bc688/scripts/portal/party6_stage511.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d9f87f18a11415355af866e48f61f926532bc688/scripts/portal/party6_stage511.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/party6_stage511.js?ref=d9f87f18a11415355af866e48f61f926532bc688", "patch": "@@ -1,5 +1,5 @@\n function enter(pi) {\n-    if (java.lang.Math.random() < 0.1) {\n+    if (Math.random() < 0.1) {\n \tpi.playPortalSound(); pi.warp(930000300,\"16st\");\n     } else {\n \tpi.playPortalSound(); pi.warp(930000300, \"12st\");"}, {"sha": "8c91b29407526660ab8aa023c9c19b0cfa0c5c9c", "filename": "scripts/portal/party6_stage512.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d9f87f18a11415355af866e48f61f926532bc688/scripts/portal/party6_stage512.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d9f87f18a11415355af866e48f61f926532bc688/scripts/portal/party6_stage512.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/party6_stage512.js?ref=d9f87f18a11415355af866e48f61f926532bc688", "patch": "@@ -1,5 +1,5 @@\n function enter(pi) {\n-    if (java.lang.Math.random() < 0.1) {\n+    if (Math.random() < 0.1) {\n \tpi.playPortalSound(); pi.warp(930000300,\"16st\");\n     } else {\n \tpi.playPortalSound(); pi.warp(930000300, \"13st\");"}, {"sha": "a27b6cb44e0d8047b2596e1ebcfa908c23bc9af5", "filename": "scripts/portal/party6_stage513.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d9f87f18a11415355af866e48f61f926532bc688/scripts/portal/party6_stage513.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d9f87f18a11415355af866e48f61f926532bc688/scripts/portal/party6_stage513.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/party6_stage513.js?ref=d9f87f18a11415355af866e48f61f926532bc688", "patch": "@@ -1,5 +1,5 @@\n function enter(pi) {\n-    if (java.lang.Math.random() < 0.1) {\n+    if (Math.random() < 0.1) {\n \tpi.playPortalSound(); pi.warp(930000300,\"16st\");\n     } else {\n \tpi.playPortalSound(); pi.warp(930000300, \"14st\");"}, {"sha": "903971ec187b61369bdba4f25c0425432f4a90b3", "filename": "scripts/portal/party6_stage514.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d9f87f18a11415355af866e48f61f926532bc688/scripts/portal/party6_stage514.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d9f87f18a11415355af866e48f61f926532bc688/scripts/portal/party6_stage514.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/party6_stage514.js?ref=d9f87f18a11415355af866e48f61f926532bc688", "patch": "@@ -1,5 +1,5 @@\n function enter(pi) {\n-    if (java.lang.Math.random() < 0.1) {\n+    if (Math.random() < 0.1) {\n \tpi.playPortalSound(); pi.warp(930000300,\"16st\");\n     } else {\n \tpi.playPortalSound(); pi.warp(930000300, \"15st\");"}, {"sha": "4c3f689ad4f187cd21ae08b2ebb18c748b24ae76", "filename": "scripts/portal/party6_stage515.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d9f87f18a11415355af866e48f61f926532bc688/scripts/portal/party6_stage515.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d9f87f18a11415355af866e48f61f926532bc688/scripts/portal/party6_stage515.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/party6_stage515.js?ref=d9f87f18a11415355af866e48f61f926532bc688", "patch": "@@ -1,5 +1,5 @@\n function enter(pi) {\n-    if (java.lang.Math.random() < 0.1) {\n+    if (Math.random() < 0.1) {\n \tpi.playPortalSound(); pi.warp(930000300,\"16st\");\n     } else {\n \tpi.playPortalSound(); pi.warp(930000300, \"01st\");"}, {"sha": "868307b067c8713a88b1684094def3e31a512800", "filename": "sql/db_database.sql", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d9f87f18a11415355af866e48f61f926532bc688/sql/db_database.sql", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d9f87f18a11415355af866e48f61f926532bc688/sql/db_database.sql", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/sql/db_database.sql?ref=d9f87f18a11415355af866e48f61f926532bc688", "patch": "@@ -16473,14 +16473,13 @@ CREATE TABLE IF NOT EXISTS `pets` (\n   PRIMARY KEY (`petid`)\n ) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;\n \n-ALTER TABLE `inventoryitems` ADD CONSTRAINT `fk_itempetid` FOREIGN KEY (`petid`) REFERENCES `pets` (`petid`) ON DELETE SET NULL ;  # thanks Optimist for noticing queries over petid taking too long, shavit for pointing out an improvement using foreign key\n \n CREATE TABLE IF NOT EXISTS `petignores` (\n   `id` int(11) unsigned NOT NULL AUTO_INCREMENT,\n   `petid` int(11) unsigned NOT NULL ,\n   `itemid` int(10) unsigned NOT NULL ,\n   PRIMARY KEY (`id`),\n-  CONSTRAINT `fk_petignorepetid` FOREIGN KEY (`petid`) REFERENCES `pets` (`petid`) ON DELETE CASCADE\n+  CONSTRAINT `fk_petignorepetid` FOREIGN KEY (`petid`) REFERENCES `pets` (`petid`) ON DELETE CASCADE    # thanks Optimist for noticing queries over petid taking too long, shavit for pointing out an improvement using foreign key\n ) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;\n \n CREATE TABLE IF NOT EXISTS `playerdiseases` ("}, {"sha": "84ed70721909cecab9656b3741c3ddb849733b73", "filename": "src/client/MapleClient.java", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d9f87f18a11415355af866e48f61f926532bc688/src/client/MapleClient.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d9f87f18a11415355af866e48f61f926532bc688/src/client/MapleClient.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/MapleClient.java?ref=d9f87f18a11415355af866e48f61f926532bc688", "patch": "@@ -1233,7 +1233,7 @@ public boolean acceptToS() {\n \t}\n         \n         public void checkChar(int accid) {  /// issue with multiple chars from same account login found by shavit, resinate\n-            if (true) {\n+            if (!YamlConfig.config.server.USE_CHARACTER_ACCOUNT_CHECK) {\n                 return;\n             }\n             "}, {"sha": "9ad310a292bfb2119b07d0bc0d85819827878d98", "filename": "src/config/ServerConfig.java", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d9f87f18a11415355af866e48f61f926532bc688/src/config/ServerConfig.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d9f87f18a11415355af866e48f61f926532bc688/src/config/ServerConfig.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/config/ServerConfig.java?ref=d9f87f18a11415355af866e48f61f926532bc688", "patch": "@@ -58,6 +58,7 @@\n     public boolean USE_DEBUG_SHOW_PACKET;\n     public boolean USE_SUPPLY_RATE_COUPONS;\n     public boolean USE_IP_VALIDATION;\n+    public boolean USE_CHARACTER_ACCOUNT_CHECK;\n \n     public boolean USE_MAXRANGE;\n     public boolean USE_MAXRANGE_ECHO_OF_HERO;"}, {"sha": "e66377b9fd5739b34465d16806920c9058f9d09d", "filename": "src/net/MapleServerHandler.java", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/d9f87f18a11415355af866e48f61f926532bc688/src/net/MapleServerHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/d9f87f18a11415355af866e48f61f926532bc688/src/net/MapleServerHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/MapleServerHandler.java?ref=d9f87f18a11415355af866e48f61f926532bc688", "patch": "@@ -28,7 +28,6 @@\n import java.util.Calendar;\n import java.util.concurrent.atomic.AtomicLong;\n \n-import config.ServerConfig;\n import config.YamlConfig;\n import org.apache.mina.core.service.IoHandlerAdapter;\n import org.apache.mina.core.session.IdleStatus;"}]}]},
