{"fetchDate": "2019-12-19", "content": [{"sha": "bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "node_id": "MDY6Q29tbWl0NDUwODIwMjM6YmJkMmRlYmMwOGZjOGFkZThjZmJjMGZhNWM3NGE2YjBmNDQ3NDhiOA==", "commit": {"author": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2018-03-06T00:23:50Z"}, "committer": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2018-03-06T00:23:50Z"}, "message": "Reactor drops & Looting & Mob HP overhaul + TreasurePQ\n\nModified coupon rates buff icon to not show up as expirable.\nReactor drops now also drops quest items at the border of the dropped items.\nAdded themed drop data for the Cake boss.\nReworked the Balrog expedition.\nAdded quest script for the Assassinate skill.\nFixed looting system blocking the killer's party from retrieving a loot until the FFA timeout.\nFixed a deadlock with the MapleMap class.\nRefactored damage/heal contabilization on mobs.\nFixed issues with HT and status-based damage, providing weird issues with mob HP.\nNew PQ: TreasurePQ, for level 140+.", "tree": {"sha": "52792939fce4b4ad54cac19ff14f196da0d6453b", "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/trees/52792939fce4b4ad54cac19ff14f196da0d6453b"}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/commits/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "html_url": "https://github.com/ronancpl/HeavenMS/commit/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "comments_url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/comments", "author": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f40a7fa2f862a0aec3878868f8a12fe60b797045", "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/f40a7fa2f862a0aec3878868f8a12fe60b797045", "html_url": "https://github.com/ronancpl/HeavenMS/commit/f40a7fa2f862a0aec3878868f8a12fe60b797045"}], "stats": {"total": 41383, "additions": 21820, "deletions": 19563}, "files": [{"sha": "83c13e2af5f6519d490d073977fd40ffd7f8590a", "filename": "docs/feature_list.md", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/docs/feature_list.md", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/docs/feature_list.md", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/docs/feature_list.md?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -22,13 +22,12 @@ Feature list:\n \n PQs:\n \n-* HPQ/KPQ/LPQ/LMPQ/OPQ/EllinPQ/PiratePQ/MagatiaPQ/HorntailPQ/AmoriaPQ.\n+* HPQ/KPQ/LPQ/LMPQ/OPQ/EllinPQ/PiratePQ/MagatiaPQ/HorntailPQ/AmoriaPQ/TreasurePQ.\n * CWKPQ as Expedition-based event.\n-* Expeditions: Scarga/Horntail/Showa/Zakum/Pinkbean.\n+* Expeditions: Scarga/Horntail/Showa/Balrog/Zakum/Pinkbean.\n * GuildPQ 100% + Guild queue with multi-lobby systems available.\n * Brand-new PQs: BossRushPQ, CafePQ.\n * Mu Lung Dojo.\n-* BalrogPQ semi-functional.\n * Capt. Latanica remade as an event (parties can now fight the boss).\n \n Skills:\n@@ -76,6 +75,7 @@ Monsters, Maps & Reactors:\n * PQs, Taxis and other event-driven situations warps players at random spawnpoints, GMS-like.\n * Some reactors (PQ bonus boxes) now sprays items on the map, instead of dropping everything at once.\n * Updated Crimsonwood, World Tour, Nihal Desert and Neo City, enabling quest completion and game progression in these areas.\n+* Giant Cake (anniversary-themed boss) drops Maple equipments, Maple scrolls, summoning bags and many more interesting items.\n \n PQ potentials:\n "}, {"sha": "c80f1f7462125dd074c7f87fbef4500315d25d5a", "filename": "docs/mychanges_ptbr.txt", "status": "modified", "additions": 18, "deletions": 2, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/docs/mychanges_ptbr.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/docs/mychanges_ptbr.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/docs/mychanges_ptbr.txt?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -17,7 +17,7 @@ Inclui constante SCROLL_CHANCE_RATE: repete resultados na tentativa de scrolls.\n Inclui constantes ADD_SLOTS_BY_LEVEL + ADD_RATES_BY_LEVEL: muda rates do gameplay de um personagem com a evolucao dele.\n Alterei APs podendo aumentar ate 32767.\n Corrigi alguns XMLs dos mapas de Omega Sector, tinham ordem dos portais invertidas.\n-AUTOBAN eh uma constante setavel do server agora.\n+AUTOBAN eh uma constante set\u00e1vel do server agora.\n \n 17 Julho 2015,\n Adaptei todos os scripts de 2nd job adv. Nao testado ainda!\n@@ -805,4 +805,20 @@ Novo comando: reach. Transporta o usu\u00e1rio do comando a um ponto pr\u00f3ximo ao jog\n \n 20 Fevereiro 2018,\n Corrigido skill Steal n\u00e3o agindo corretamente. Ratio de drops agora segue conformante ao determinado pelas chances de sair cada item (itens comuns cair\u00e3o com mais frequ\u00eancia).\n-Modificado skill Steal para n\u00e3o dropar mais itens de PQ nem de quest.\n\\ No newline at end of file\n+Modificado skill Steal para n\u00e3o dropar mais itens de PQ nem de quest.\n+\n+22 - 24 Fevereiro 2018,\n+Modificado atributo \"time\" dos buffs de rate cupons para ser n\u00e3o-expir\u00e1vel a curto prazo.\n+Melhorado drops de itens de reatores agora centralizando e n\u00e3o deixando \"espa\u00e7os vazios\" (ocupados por itens de quest n\u00e3o-vis\u00edveis pelo jogador).\n+Corrigido portal mal-posicionado em Herb Town.\n+Adicionado drop data para Giant Cake.\n+Implementado expedi\u00e7\u00e3o Balrog.\n+\n+01 - 05 Mar\u00e7o 2018,\n+Implementado miss\u00e3o da skill Assassinate.\n+Resolvido bug com jogador em party tendo que esperar um tempo antes de pegar loot.\n+Resolvido problemas com loots n\u00e3o diferenciando partyids de playerids, al\u00e9m de permitir exploits para a\u00e7\u00f5es de pickup dos jogadores e autoloot de pets.\n+Resolvido caso de deadlock no MapleMap (uso de broadcastMessage, que usa chrLock, ap\u00f3s adquirido objectLock).\n+Refatorado dano/cura em mobs, agora encapsulando atomicamente as mudan\u00e7as de HP. Resolvido tamb\u00e9m problemas de acesso concorrente quanto a isso.\n+Resolvido problemas com HT e danos de status poison, bagun\u00e7ando as contabiliza\u00e7\u00f5es de HP de vez em quando.\n+Nova PQ: TreasurePQ, level 140+, acess\u00edvel via portal em NLC.\n\\ No newline at end of file"}, {"sha": "a5d43df729681f3013968b7571caa3eee9f1ed92", "filename": "handbook/Map.txt", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/handbook/Map.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/handbook/Map.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/handbook/Map.txt?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -2175,10 +2175,10 @@ etc\n 680100001 - Maple 7th Day Market - Maple 7th Day Market\n 680100002 - Maple 7th Day Market - Maple 7th Day Market\n 680100003 - Maple 7th Day Market - Maple 7th Day Market\n-674030300 - Treasure Dungeon - (no map name)\n 674030000 - Initiation - (no map name)\n 674030100 - Entrance to MV's Lair - (no map name)\n 674030200 - The Lair of MV - (no map name)\n+674030300 - Treasure Dungeon - (no map name)\n 910020000 - Hidden Street - Nest of a Baby Bird\n 910100000 - Hidden Street - The Cursed Forest\n 910100001 - Hidden Street - The Cursed Forest"}, {"sha": "6dbac5ec5fac70c5ed99ad775552517d15f7c543", "filename": "handbook/Use.txt", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/handbook/Use.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/handbook/Use.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/handbook/Use.txt?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -580,10 +580,10 @@\n 2040717 - Dark scroll for Shoes for Speed - Improves speed on shoes.\\nSuccess rate:30%, speed+3nIf failed, the item will be destroyed at a 50% rate.\n 2040718 - Scroll for Shoes for DEX - Improves dexterity on shoes.\\nSuccess rate:65%, avoidability+2, accuracy+1\n 2040719 - Scroll for Shoes for DEX - Improves dexterity on shoes.\\nSuccess rate:15%, avoidability+5, accuracy+3, speed+1\n-2040720 - Scroll for Jump for DEX - Improves jump on shoes.\\nSuccess rate:65%, jump+2, DEX+1\n-2040721 - Scroll for Jump for DEX - Improves jump on shoes.\\nSuccess rate:15%, jump+5, DEX+3, speed+1\n-2040722 - Scroll for Speed for DEX - Improves speed on shoes.\\nSuccess rate:65%, speed+2\n-2040723 - Scroll for Speed for DEX - Improves speed on shoes.\\nSuccess rate:15%, speed+3\n+2040720 - Scroll for Shoes for Jump - Improves jump on shoes.\\nSuccess rate:65%, jump+2, DEX+1\n+2040721 - Scroll for Shoes for Jump - Improves jump on shoes.\\nSuccess rate:15%, jump+5, DEX+3, speed+1\n+2040722 - Scroll for Shoes for Speed - Improves speed on shoes.\\nSuccess rate:65%, speed+2\n+2040723 - Scroll for Shoes for Speed - Improves speed on shoes.\\nSuccess rate:15%, speed+3\n 2040727 - Scroll for Spikes on Shoes 10% - Adds traction to the shoes, which prevents the shoes from slipping on slippery surface.\\nSuccess rate:10%, Does not affect the number of upgrades available. The success rate of this scroll can be enhanced by Vega's Spell.\n 2040800 - Scroll for Gloves for DEX - Improves dexterity on gloves.\\nSuccess rate:100%, accurcacy +1\n 2040801 - Scroll for Gloves for DEX - Improves dexterity on gloves.\\nSuccess rate: 60%, accuracy+2, DEX+1. The success rate of this scroll can be enhanced by Vega's Spell."}, {"sha": "1880dd8b58967327c185d0ec58d0f9ec61dad0a7", "filename": "posix-compile.sh", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/posix-compile.sh", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/posix-compile.sh", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/posix-compile.sh?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "previous_filename": "compile-posix.sh"}, {"sha": "9222538da7a613f3f2e48f372de1435bc0970d23", "filename": "posix-launch.sh", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/posix-launch.sh", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/posix-launch.sh", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/posix-launch.sh?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "previous_filename": "launch.sh"}, {"sha": "e3d81de4e8c921e4773363596ca4eecd41989fc7", "filename": "scripts/REACT Base.js", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/REACT%20Base.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/REACT%20Base.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/REACT%20Base.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -0,0 +1,28 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+/* @Author Ronan\n+ * \n+ * REACTORID.js: sample text\n+*/\n+\n+function act() {\n+    \n+}\n\\ No newline at end of file"}, {"sha": "9a49d92092463fff966b02b91b62092dcb600c59", "filename": "scripts/event/BalrogBattle.js", "status": "added", "additions": 258, "deletions": 0, "changes": 258, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/event/BalrogBattle.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/event/BalrogBattle.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/BalrogBattle.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -0,0 +1,258 @@\n+/**\n+ * @author: Ronan\n+ * @event: Vs Balrog\n+*/\n+\n+importPackage(Packages.server.life);\n+\n+var isPq = true;\n+var minPlayers = 6, maxPlayers = 30;\n+var minLevel = 50, maxLevel = 255;\n+var entryMap = 105100300;\n+var exitMap = 105100100;\n+var recruitMap = 105100100;\n+var clearMap = 105100301;\n+\n+var minMapId = 105100300;\n+var maxMapId = 105100301;\n+\n+var minMobId = 8830000;\n+var maxMobId = 8830006;\n+var bossMobId = 8830003;\n+\n+var eventTime = 60;         // 60 minutes\n+var releaseClawTime = 1;\n+\n+var lobbyRange = [0, 0];\n+\n+function init() {\n+        setEventRequirements();\n+}\n+\n+function setLobbyRange() {\n+        return lobbyRange;\n+}\n+\n+function setEventRequirements() {\n+        var reqStr = \"\";\n+        \n+        reqStr += \"\\r\\n    Number of players: \";\n+        if(maxPlayers - minPlayers >= 1) reqStr += minPlayers + \" ~ \" + maxPlayers;\n+        else reqStr += minPlayers;\n+        \n+        reqStr += \"\\r\\n    Level range: \";\n+        if(maxLevel - minLevel >= 1) reqStr += minLevel + \" ~ \" + maxLevel;\n+        else reqStr += minLevel;\n+        \n+        reqStr += \"\\r\\n    Time limit: \";\n+        reqStr += eventTime + \" minutes\";\n+        \n+        em.setProperty(\"party\", reqStr);\n+}\n+\n+function setEventExclusives(eim) {\n+        var itemSet = [];\n+        eim.setExclusiveItems(itemSet);\n+}\n+\n+function setEventRewards(eim) {\n+        var itemSet, itemQty, evLevel, expStages;\n+\n+        evLevel = 1;    //Rewards at clear PQ\n+        itemSet = [];\n+        itemQty = [];\n+        eim.setEventRewards(evLevel, itemSet, itemQty);\n+        \n+        expStages = [];    //bonus exp given on CLEAR stage signal\n+        eim.setEventClearStageExp(expStages);\n+}\n+\n+function getEligibleParty(party) {      //selects, from the given party, the team that is allowed to attempt this event\n+        var eligible = [];\n+        var hasLeader = false;\n+        \n+        if(party.size() > 0) {\n+                var partyList = party.toArray();\n+\n+                for(var i = 0; i < party.size(); i++) {\n+                        var ch = partyList[i];\n+\n+                        if(ch.getMapId() == recruitMap && ch.getLevel() >= minLevel && ch.getLevel() <= maxLevel) {\n+                                if(ch.isLeader()) hasLeader = true;\n+                                eligible.push(ch);\n+                        }\n+                }\n+        }\n+        \n+        if(!(hasLeader && eligible.length >= minPlayers && eligible.length <= maxPlayers)) eligible = [];\n+        return eligible;\n+}\n+\n+function setup(level, lobbyid) {\n+        var eim = em.newInstance(\"Balrog\" + lobbyid);\n+        eim.setProperty(\"level\", level);\n+        eim.setProperty(\"boss\", \"0\");\n+        \n+        eim.getInstanceMap(105100300).resetPQ(level);\n+        eim.getInstanceMap(105100301).resetPQ(level);\n+        eim.schedule(\"releaseLeftClaw\", releaseClawTime * 60000);\n+        \n+        respawnStages(eim);\n+        eim.startEventTimer(eventTime * 60000);\n+        setEventRewards(eim);\n+        setEventExclusives(eim);\n+        return eim;\n+}\n+\n+function afterSetup(eim) {\n+        spawnBalrog(eim);\n+}\n+\n+function respawnStages(eim) {}\n+\n+function releaseLeftClaw(eim) {\n+        eim.getInstanceMap(entryMap).killMonster(8830006);\n+}\n+\n+function spawnBalrog(eim) {\n+        var mapObj = eim.getInstanceMap(entryMap);\n+    \n+        mapObj.spawnMonsterOnGroundBelow(MapleLifeFactory.getMonster(8830000), new Packages.java.awt.Point(412, 258));\n+        mapObj.spawnMonsterOnGroundBelow(MapleLifeFactory.getMonster(8830002), new Packages.java.awt.Point(412, 258));\n+        mapObj.spawnMonsterOnGroundBelow(MapleLifeFactory.getMonster(8830006), new Packages.java.awt.Point(412, 258));\n+}\n+\n+function spawnSealedBalrog(eim) {\n+        eim.getInstanceMap(entryMap).spawnMonsterOnGroundBelow(MapleLifeFactory.getMonster(8830003), new Packages.java.awt.Point(412, 258));\n+}\n+\n+function playerEntry(eim, player) {\n+        var map = eim.getMapInstance(entryMap);\n+        player.changeMap(map, map.getPortal(0));\n+}\n+\n+function scheduledTimeout(eim) {\n+        end(eim);\n+}\n+\n+function playerUnregistered(eim, player) {}\n+\n+function playerExit(eim, player) {\n+        eim.unregisterPlayer(player);\n+        player.changeMap(exitMap, 0);\n+}\n+\n+function playerLeft(eim, player) {\n+        if(!eim.isEventCleared()) {\n+                playerExit(eim, player);\n+        }\n+}\n+\n+function changedMap(eim, player, mapid) {\n+        if (mapid < minMapId || mapid > maxMapId) {\n+                if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+                        eim.unregisterPlayer(player);\n+                        end(eim);\n+                }\n+                else\n+                        eim.unregisterPlayer(player);\n+        }\n+}\n+\n+function changedLeader(eim, leader) {\n+        var mapid = leader.getMapId();\n+        if (!eim.isEventCleared() && (mapid < minMapId || mapid > maxMapId)) {\n+                end(eim);\n+        }\n+}\n+\n+function playerDead(eim, player) {}\n+\n+function playerRevive(eim, player) { // player presses ok on the death pop up.\n+        if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+                eim.unregisterPlayer(player);\n+                end(eim);\n+        }\n+        else\n+                eim.unregisterPlayer(player);\n+}\n+\n+function playerDisconnected(eim, player) {\n+        if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+                eim.unregisterPlayer(player);\n+                end(eim);\n+        }\n+        else\n+                eim.unregisterPlayer(player);\n+}\n+\n+function leftParty(eim, player) {\n+        if (eim.isEventTeamLackingNow(false, minPlayers, player)) {\n+                end(eim);\n+        }\n+        else\n+                playerLeft(eim, player);\n+}\n+\n+function disbandParty(eim) {\n+        if (!eim.isEventCleared()) {\n+                end(eim);\n+        }\n+}\n+\n+function monsterValue(eim, mobId) {\n+        return 1;\n+}\n+\n+function end(eim) {\n+        var party = eim.getPlayers();\n+        \n+        for (var i = 0; i < party.size(); i++) {\n+                playerExit(eim, party.get(i));\n+        }\n+        eim.dispose();\n+}\n+\n+function giveRandomEventReward(eim, player) {\n+        eim.giveEventReward(player);\n+}\n+\n+function clearPQ(eim) {\n+        eim.stopEventTimer();\n+        eim.setEventCleared();\n+}\n+\n+function isUnsealedBalrog(mob) {\n+        var balrogid = mob.getId() - 8830000;\n+        return balrogid >= 0 && balrogid <= 2;\n+}\n+\n+function isBalrogBody(mob) {\n+        return mob.getId() == minMobId;\n+}\n+\n+function monsterKilled(mob, eim) {\n+        if(isUnsealedBalrog(mob)) {\n+                var count = eim.getIntProperty(\"boss\");\n+            \n+                if(count == 2) {\n+                        eim.showClearEffect();\n+                        eim.clearPQ();\n+\n+                        mob.getMap().broadcastBalrogVictory(eim.getLeader().getName());\n+                } else {\n+                        eim.setIntProperty(\"boss\", count + 1);\n+                }\n+                \n+                if(isBalrogBody(mob)) {\n+                        eim.schedule(\"spawnSealedBalrog\", 10 * 1000);\n+                }\n+        }\n+}\n+\n+function allMonstersDead(eim) {}\n+\n+function cancelSchedule() {}\n+\n+function dispose(eim) {}\n+"}, {"sha": "c33f170cb2239fb559a9061650323037ce8fce3f", "filename": "scripts/event/BalrogBattle_Easy.js", "status": "added", "additions": 258, "deletions": 0, "changes": 258, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/event/BalrogBattle_Easy.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/event/BalrogBattle_Easy.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/BalrogBattle_Easy.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -0,0 +1,258 @@\n+/**\n+ * @author: Ronan\n+ * @event: Vs Balrog\n+*/\n+\n+importPackage(Packages.server.life);\n+\n+var isPq = true;\n+var minPlayers = 3, maxPlayers = 30;\n+var minLevel = 50, maxLevel = 255;\n+var entryMap = 105100400;\n+var exitMap = 105100100;\n+var recruitMap = 105100100;\n+var clearMap = 105100401;\n+\n+var minMapId = 105100400;\n+var maxMapId = 105100401;\n+\n+var minMobId = 8830007;\n+var maxMobId = 8830013;\n+var bossMobId = 8830010;\n+\n+var eventTime = 60;         // 60 minutes\n+var releaseClawTime = 1;\n+\n+var lobbyRange = [0, 0];\n+\n+function init() {\n+        setEventRequirements();\n+}\n+\n+function setLobbyRange() {\n+        return lobbyRange;\n+}\n+\n+function setEventRequirements() {\n+        var reqStr = \"\";\n+        \n+        reqStr += \"\\r\\n    Number of players: \";\n+        if(maxPlayers - minPlayers >= 1) reqStr += minPlayers + \" ~ \" + maxPlayers;\n+        else reqStr += minPlayers;\n+        \n+        reqStr += \"\\r\\n    Level range: \";\n+        if(maxLevel - minLevel >= 1) reqStr += minLevel + \" ~ \" + maxLevel;\n+        else reqStr += minLevel;\n+        \n+        reqStr += \"\\r\\n    Time limit: \";\n+        reqStr += eventTime + \" minutes\";\n+        \n+        em.setProperty(\"party\", reqStr);\n+}\n+\n+function setEventExclusives(eim) {\n+        var itemSet = [];\n+        eim.setExclusiveItems(itemSet);\n+}\n+\n+function setEventRewards(eim) {\n+        var itemSet, itemQty, evLevel, expStages;\n+\n+        evLevel = 1;    //Rewards at clear PQ\n+        itemSet = [];\n+        itemQty = [];\n+        eim.setEventRewards(evLevel, itemSet, itemQty);\n+        \n+        expStages = [];    //bonus exp given on CLEAR stage signal\n+        eim.setEventClearStageExp(expStages);\n+}\n+\n+function getEligibleParty(party) {      //selects, from the given party, the team that is allowed to attempt this event\n+        var eligible = [];\n+        var hasLeader = false;\n+        \n+        if(party.size() > 0) {\n+                var partyList = party.toArray();\n+\n+                for(var i = 0; i < party.size(); i++) {\n+                        var ch = partyList[i];\n+\n+                        if(ch.getMapId() == recruitMap && ch.getLevel() >= minLevel && ch.getLevel() <= maxLevel) {\n+                                if(ch.isLeader()) hasLeader = true;\n+                                eligible.push(ch);\n+                        }\n+                }\n+        }\n+        \n+        if(!(hasLeader && eligible.length >= minPlayers && eligible.length <= maxPlayers)) eligible = [];\n+        return eligible;\n+}\n+\n+function setup(level, lobbyid) {\n+        var eim = em.newInstance(\"Balrog\" + lobbyid);\n+        eim.setProperty(\"level\", level);\n+        eim.setProperty(\"boss\", \"0\");\n+        \n+        eim.getInstanceMap(105100400).resetPQ(level);\n+        eim.getInstanceMap(105100401).resetPQ(level);\n+        eim.schedule(\"releaseLeftClaw\", releaseClawTime * 60000);\n+        \n+        respawnStages(eim);\n+        eim.startEventTimer(eventTime * 60000);\n+        setEventRewards(eim);\n+        setEventExclusives(eim);\n+        return eim;\n+}\n+\n+function afterSetup(eim) {\n+        spawnBalrog(eim);\n+}\n+\n+function respawnStages(eim) {}\n+\n+function releaseLeftClaw(eim) {\n+        eim.getInstanceMap(entryMap).killMonster(8830013);\n+}\n+\n+function spawnBalrog(eim) {\n+        var mapObj = eim.getInstanceMap(entryMap);\n+    \n+        mapObj.spawnMonsterOnGroundBelow(MapleLifeFactory.getMonster(8830007), new Packages.java.awt.Point(412, 258));\n+        mapObj.spawnMonsterOnGroundBelow(MapleLifeFactory.getMonster(8830009), new Packages.java.awt.Point(412, 258));\n+        mapObj.spawnMonsterOnGroundBelow(MapleLifeFactory.getMonster(8830013), new Packages.java.awt.Point(412, 258));\n+}\n+\n+function spawnSealedBalrog(eim) {\n+        eim.getInstanceMap(entryMap).spawnMonsterOnGroundBelow(MapleLifeFactory.getMonster(8830010), new Packages.java.awt.Point(412, 258));\n+}\n+\n+function playerEntry(eim, player) {\n+        var map = eim.getMapInstance(entryMap);\n+        player.changeMap(map, map.getPortal(0));\n+}\n+\n+function scheduledTimeout(eim) {\n+        end(eim);\n+}\n+\n+function playerUnregistered(eim, player) {}\n+\n+function playerExit(eim, player) {\n+        eim.unregisterPlayer(player);\n+        player.changeMap(exitMap, 0);\n+}\n+\n+function playerLeft(eim, player) {\n+        if(!eim.isEventCleared()) {\n+                playerExit(eim, player);\n+        }\n+}\n+\n+function changedMap(eim, player, mapid) {\n+        if (mapid < minMapId || mapid > maxMapId) {\n+                if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+                        eim.unregisterPlayer(player);\n+                        end(eim);\n+                }\n+                else\n+                        eim.unregisterPlayer(player);\n+        }\n+}\n+\n+function changedLeader(eim, leader) {\n+        var mapid = leader.getMapId();\n+        if (!eim.isEventCleared() && (mapid < minMapId || mapid > maxMapId)) {\n+                end(eim);\n+        }\n+}\n+\n+function playerDead(eim, player) {}\n+\n+function playerRevive(eim, player) { // player presses ok on the death pop up.\n+        if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+                eim.unregisterPlayer(player);\n+                end(eim);\n+        }\n+        else\n+                eim.unregisterPlayer(player);\n+}\n+\n+function playerDisconnected(eim, player) {\n+        if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+                eim.unregisterPlayer(player);\n+                end(eim);\n+        }\n+        else\n+                eim.unregisterPlayer(player);\n+}\n+\n+function leftParty(eim, player) {\n+        if (eim.isEventTeamLackingNow(false, minPlayers, player)) {\n+                end(eim);\n+        }\n+        else\n+                playerLeft(eim, player);\n+}\n+\n+function disbandParty(eim) {\n+        if (!eim.isEventCleared()) {\n+                end(eim);\n+        }\n+}\n+\n+function monsterValue(eim, mobId) {\n+        return 1;\n+}\n+\n+function end(eim) {\n+        var party = eim.getPlayers();\n+        \n+        for (var i = 0; i < party.size(); i++) {\n+                playerExit(eim, party.get(i));\n+        }\n+        eim.dispose();\n+}\n+\n+function giveRandomEventReward(eim, player) {\n+        eim.giveEventReward(player);\n+}\n+\n+function clearPQ(eim) {\n+        eim.stopEventTimer();\n+        eim.setEventCleared();\n+}\n+\n+function isUnsealedBalrog(mob) {\n+        var balrogid = mob.getId() - 8830007;\n+        return balrogid >= 0 && balrogid <= 2;\n+}\n+\n+function isBalrogBody(mob) {\n+        return mob.getId() == minMobId;\n+}\n+\n+function monsterKilled(mob, eim) {\n+        if(isUnsealedBalrog(mob)) {\n+                var count = eim.getIntProperty(\"boss\");\n+            \n+                if(count == 2) {\n+                        eim.showClearEffect();\n+                        eim.clearPQ();\n+\n+                        mob.getMap().broadcastBalrogVictory(eim.getLeader().getName());\n+                } else {\n+                        eim.setIntProperty(\"boss\", count + 1);\n+                }\n+                \n+                if(isBalrogBody(mob)) {\n+                        eim.schedule(\"spawnSealedBalrog\", 10 * 1000);\n+                }\n+        }\n+}\n+\n+function allMonstersDead(eim) {}\n+\n+function cancelSchedule() {}\n+\n+function dispose(eim) {}\n+"}, {"sha": "242286a26571351962048cd1c8f585700856f173", "filename": "scripts/event/TreasurePQ.js", "status": "added", "additions": 225, "deletions": 0, "changes": 225, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/event/TreasurePQ.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/event/TreasurePQ.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/TreasurePQ.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -0,0 +1,225 @@\n+/**\n+ * @author: Ronan\n+ * @event: Treasure PQ\n+*/\n+\n+var isPq = true;\n+var minPlayers = 4, maxPlayers = 6;\n+var minLevel = 140, maxLevel = 255;\n+var entryMap = 674030000;\n+var exitMap = 674030100;\n+var recruitMap = 674030100;\n+var clearMap = 674030300;\n+\n+var minMapId = 674030000;\n+var maxMapId = 674030300;\n+\n+var eventTime = 45;     // 45 minutes\n+var bonusTime = 10;     // 10 minutes\n+\n+var lobbyRange = [0, 0];\n+\n+function init() {\n+        setEventRequirements();\n+}\n+\n+function setLobbyRange() {\n+        return lobbyRange;\n+}\n+\n+function setEventRequirements() {\n+        var reqStr = \"\";\n+        \n+        reqStr += \"\\r\\n    Number of players: \";\n+        if(maxPlayers - minPlayers >= 1) reqStr += minPlayers + \" ~ \" + maxPlayers;\n+        else reqStr += minPlayers;\n+        \n+        reqStr += \"\\r\\n    Level range: \";\n+        if(maxLevel - minLevel >= 1) reqStr += minLevel + \" ~ \" + maxLevel;\n+        else reqStr += minLevel;\n+        \n+        reqStr += \"\\r\\n    Time limit: \";\n+        reqStr += eventTime + \" minutes\";\n+        \n+        em.setProperty(\"party\", reqStr);\n+}\n+\n+function setEventExclusives(eim) {\n+        var itemSet = [4032118];\n+        eim.setExclusiveItems(itemSet);\n+}\n+\n+function setEventRewards(eim) {\n+        var itemSet, itemQty, evLevel, expStages;\n+\n+        evLevel = 1;    //Rewards at clear PQ\n+        itemSet = [];\n+        itemQty = [];\n+        eim.setEventRewards(evLevel, itemSet, itemQty);\n+        \n+        expStages = [60000, 100000];    //bonus exp given on CLEAR stage signal\n+        eim.setEventClearStageExp(expStages);\n+}\n+\n+function getEligibleParty(party) {      //selects, from the given party, the team that is allowed to attempt this event\n+        var eligible = [];\n+        var hasLeader = false;\n+        \n+        if(party.size() > 0) {\n+                var partyList = party.toArray();\n+\n+                for(var i = 0; i < party.size(); i++) {\n+                        var ch = partyList[i];\n+\n+                        if(ch.getMapId() == recruitMap && ch.getLevel() >= minLevel && ch.getLevel() <= maxLevel) {\n+                                if(ch.isLeader()) hasLeader = true;\n+                                eligible.push(ch);\n+                        }\n+                }\n+        }\n+        \n+        if(!(hasLeader && eligible.length >= minPlayers && eligible.length <= maxPlayers)) eligible = [];\n+        return eligible;\n+}\n+\n+function setup(level, lobbyid) {\n+        var eim = em.newInstance(\"Treasure\" + lobbyid);\n+        eim.setProperty(\"level\", level);\n+        \n+        eim.setProperty(\"statusStg1\", \"0\");\n+        \n+        eim.getInstanceMap(674030000).shuffleReactors();\n+        \n+        respawnStages(eim);\n+        eim.startEventTimer(eventTime * 60000);\n+        setEventRewards(eim);\n+        setEventExclusives(eim);\n+        return eim;\n+}\n+\n+function afterSetup(eim) {}\n+\n+function respawnStages(eim) {    \n+        eim.getMapInstance(674030000).instanceMapRespawn();\n+        eim.schedule(\"respawnStages\", 15 * 1000);\n+}\n+\n+function playerEntry(eim, player) {\n+        var map = eim.getMapInstance(entryMap);\n+        player.changeMap(map, map.getPortal(0));\n+}\n+\n+function scheduledTimeout(eim) {\n+        end(eim);\n+}\n+\n+function playerUnregistered(eim, player) {}\n+\n+function playerExit(eim, player) {\n+        eim.unregisterPlayer(player);\n+        player.changeMap(exitMap, 0);\n+}\n+\n+function playerLeft(eim, player) {\n+        if(!eim.isEventCleared()) {\n+                playerExit(eim, player);\n+        }\n+}\n+\n+function changedMap(eim, player, mapid) {\n+        if (mapid < minMapId || mapid > maxMapId || mapid == 674030100) {\n+                if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+                        eim.unregisterPlayer(player);\n+                        end(eim);\n+                }\n+                else\n+                        eim.unregisterPlayer(player);\n+        }\n+}\n+\n+function changedLeader(eim, leader) {\n+        var mapid = leader.getMapId();\n+        if (!eim.isEventCleared() && (mapid < minMapId || mapid > maxMapId || mapid == 674030100)) {\n+                end(eim);\n+        }\n+}\n+\n+function playerDead(eim, player) {}\n+\n+function playerRevive(eim, player) { // player presses ok on the death pop up.\n+        if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+                eim.unregisterPlayer(player);\n+                end(eim);\n+        }\n+        else\n+                eim.unregisterPlayer(player);\n+}\n+\n+function playerDisconnected(eim, player) {\n+        if (eim.isEventTeamLackingNow(true, minPlayers, player)) {\n+                eim.unregisterPlayer(player);\n+                end(eim);\n+        }\n+        else\n+                eim.unregisterPlayer(player);\n+}\n+\n+function leftParty(eim, player) {\n+        if (eim.isEventTeamLackingNow(false, minPlayers, player)) {\n+                end(eim);\n+        }\n+        else\n+                playerLeft(eim, player);\n+}\n+\n+function disbandParty(eim) {\n+        if (!eim.isEventCleared()) {\n+                end(eim);\n+        }\n+}\n+\n+function monsterValue(eim, mobId) {\n+        return 1;\n+}\n+\n+function end(eim) {\n+        var party = eim.getPlayers();\n+        for (var i = 0; i < party.size(); i++) {\n+                playerExit(eim, party.get(i));\n+        }\n+        eim.dispose();\n+}\n+\n+function giveRandomEventReward(eim, player) {\n+        eim.giveEventReward(player);\n+}\n+\n+function warpBonus(eim) {\n+        eim.startEventTimer(bonusTime * 60000);\n+        eim.warpEventTeam(674030300);\n+}\n+\n+function clearPQ(eim) {\n+        eim.stopEventTimer();\n+        eim.setEventCleared();\n+        \n+        eim.schedule(\"warpBonus\", 10 * 1000);\n+}\n+\n+function isMV(mob) {\n+        var mobid = mob.getId();\n+        return (mobid == 9400589);\n+}\n+\n+function monsterKilled(mob, eim) {\n+        if(isMV(mob)) {\n+                eim.showClearEffect();\n+                eim.clearPQ();\n+        }\n+}\n+\n+function allMonstersDead(eim) {}\n+\n+function cancelSchedule() {}\n+\n+function dispose(eim) {}"}, {"sha": "a11306b3c8960972562f137b2864e416f2ba9733", "filename": "scripts/map/onFirstUserEnter/balog_summon.js", "status": "removed", "additions": 0, "deletions": 13, "changes": 13, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/f40a7fa2f862a0aec3878868f8a12fe60b797045/scripts/map/onFirstUserEnter/balog_summon.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/f40a7fa2f862a0aec3878868f8a12fe60b797045/scripts/map/onFirstUserEnter/balog_summon.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/map/onFirstUserEnter/balog_summon.js?ref=f40a7fa2f862a0aec3878868f8a12fe60b797045", "patch": "@@ -1,13 +0,0 @@\n-importPackage(Packages.server.life);\n-importPackage(Packages.tools);\n-importPackage(Packages.server.events);\n-\n-function start(ms) {\n-    try {\n-        ms.getPlayer().resetEnteredScript();\n-        ms.getPlayer().getClient().getSession().write(MaplePacketCreator.getClock(BalrogPQ.getSecondsLeft())); // 60 mins(1hr)\n-        BalrogPQ.spawnBalrog(1, ms.getPlayer());\n-    } catch(err) {\n-        ms.getPlayer().dropMessage(err);\n-    }\n-}\n\\ No newline at end of file"}, {"sha": "7c71b507cf15114622c5b4ede8f2c80218ec143f", "filename": "scripts/npc/1002004.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/npc/1002004.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/npc/1002004.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1002004.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -41,7 +41,7 @@ function action(mode, type, selection) {\n     if (mode == -1){\n         cm.dispose();\n         return;\n-    }else if(mode == 0) {\n+    } else if (mode == 0) {\n         cm.sendOk(\"This town also has a lot to offer. Find us if and when you feel the need to go to the Ant Tunnel Park.\");\n     \tcm.dispose();\n     \treturn;"}, {"sha": "21d68f7bc68a8cac6620511cb5f444319433eebb", "filename": "scripts/npc/1032005.js", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/npc/1032005.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/npc/1032005.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1032005.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -39,10 +39,12 @@ function start() {\n function action(mode, type, selection) {\n     status++;\n     if (mode == -1){\n-        if(mode == 0)\n-            cm.sendNext(\"This town also has a lot to offer. Find us if and when you feel the need to go to the Ant Tunnel Park.\");\n         cm.dispose();\n         return;\n+    } else if (mode == 0) {\n+        cm.sendOk(\"This town also has a lot to offer. Find us if and when you feel the need to go to the Ant Tunnel Park.\");\n+    \tcm.dispose();\n+    \treturn;\n     }\n     if (status == 1) {\n         cm.sendYesNo(cm.getJobId() == 0 ? \"We have a special 90% discount for beginners. The Ant Tunnel is located deep inside in the dungeon that's placed at the center of the Victoria Island, where the 24 Hr Mobile Store is. Would you like to go there for #b1,000 mesos#k?\" : \"The regular fee applies for all non-beginners. The Ant Tunnel is located deep inside in the dungeon that's placed at the center of the Victoria Island, where 24 Hr Mobile Store is. Would you like to go there for #b10,000 mesos#k?\");"}, {"sha": "8d6e5b4932b655614b1d3cba91ae2d86d5d07129", "filename": "scripts/npc/1061014.js", "status": "modified", "additions": 173, "deletions": 42, "changes": 215, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/npc/1061014.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/npc/1061014.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1061014.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -1,55 +1,186 @@\n-importPackage(Packages.server.events);\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc> \n+                       Matthias Butz <matze@odinms.de>\n+                       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License version 3\n+    as published by the Free Software Foundation. You may not use, modify\n+    or distribute this program under any other version of the\n+    GNU Affero General Public License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+/*\n+ *\n+ *@author Ronan\n+ */\n+\n+importPackage(Packages.server.expeditions);\n+importPackage(Packages.tools);\n+importPackage(Packages.scripting.event);\n+\n var status = 0;\n+var expedition;\n+var player;\n+var em;\n+var exped = MapleExpeditionType.BALROG_NORMAL;\n+var expedName = \"Balrog\";\n+var expedBoss = \"Balrog\";\n+var expedMap = \"Balrog's Tomb\";\n+\n+var list = \"What would you like to do?#b\\r\\n\\r\\n#L1#View current Expedition members#l\\r\\n#L2#Start the fight!#l\\r\\n#L3#Stop the expedition.#l\";\n \n-function start(){\n-    status = 0;\n+function start() {\n     action(1, 0, 0);\n }\n \n-function action(mode, type, selection){\n-    if(mode <= 0){\n+function action(mode, type, selection) {\n+\n+    player = cm.getPlayer();\n+    expedition = cm.getExpedition(exped);\n+    em = cm.getEventManager(\"BalrogBattle\");\n+\n+    if (mode == -1) {\n         cm.dispose();\n-    } else if(status == 0){\n-        cm.sendNext(\"Hi there. I am #b#nMu Young#n#k, the temple Keeper.\");\n-        status++;\n-    } else if(BalrogPQ.partyLeader == \"undefined\"){\n-        if(status == 1){\n-        var text = \"This temple is currently under siege by the Balrog troops. We currently do not know who gave the orders. \" +\n-            \"For a few weeks now, the #e#b Order of the Altair#n#k has been sending mercenaries, but they were eliminated every time.\" +\n-            \" So, traveler, would you like to try your luck at defeating this unspeakable horror? \\r\\n\\r\\n \" +\n-            \"#L0#Yes. Please register me as party leader\\r\\n#L1#What is the #eOrder of the Altair?\";\n-        cm.sendSimple(text);\n-        status++;\n-        } else if(selection == 0){\n-            if(cm.getPlayer().getLevel() >= 70){\n-                BalrogPQ.partyLeader = cm.getPlayer().getName();\n-                cm.sendOk(\"Success. Your name has been registered and you may enter the battlefield. Come speak to me when you're ready!\");\n-                cm.getPlayer().getMap().broadcastMessage(Packages.tools.MaplePacketCreator.serverNotice(0, cm.getPlayer().getName() + \" is currently fighting the balrog on CH\" + cm.getPlayer().getClient().getChannel() + \". To join, do @balrogpq.\"))\n-                BalrogPQ.open(cm.getPlayer());\n-                cm.dispose();\n-            } else if(cm.getPlayer().getLevel() < 70){\n-                cm.sendOk(\"You must be at least level 70 to even consider battling the monster.\");\n-                cm.dispose();\n-            }\n-        } else if(selection == 1){\n-            cm.sendOk(\"The Order of the Altair is a group of elite mercenaries that oversee the world's economy and battle operations. It was founded 40 years ago right after Black Mage was defeated in hopes of forseeing the next possible attack.\");\n-            cm.dispose();\n-        } else if(status == 3){\n-            cm.warp(105100300, 0);\n+    } else {\n+        if (mode == 0) {\n             cm.dispose();\n+            return;\n         }\n-        } else {\n-            if(status == 1){\n-            cm.sendYesNo(BalrogPQ.partyLeader + \"'s party is currently battling the Balrog. Would you like to assist?\");\n-            status++;\n-            } else if(status == 2){\n-                if(cm.getPlayer().getLevel() > 60 && cm.getPlayer().getClient().getChannel() == BalrogPQ.channel){\n-                cm.warp(105100300, 0);\n+\n+        if (status == 0) {\n+            if (player.getLevel() < exped.getMinLevel() && player.getLevel() > exped.getMaxLevel()) { //Don't fit requirement\n+                cm.sendOk(\"You do not meet the criteria to battle \" + expedBoss + \"!\");\n                 cm.dispose();\n-                } else {\n-                    cm.sendOk(\"You may not battle the balrog when you are below Lv60! \\r\\n\\r\\n Or maybe you are not on the right channel.. Try CH\" + BalrogPQ.channel + \".\");\n+            } else if (expedition == null) { //Start an expedition\n+                cm.sendSimple(\"#e#b<Expedition: \" + expedName + \">\\r\\n#k#n\" + em.getProperty(\"party\") + \"\\r\\n\\r\\nWould you like to assemble a team to take on #r\" + expedBoss + \"#k?\\r\\n#b#L1#Lets get this going!#l\\r\\n\\#L2#No, I think I'll wait a bit...#l\\r\\n\\#L3#I would like to see info about this expedition...#l\");\n+                status = 1;\n+            } else if (expedition.isLeader(player)) { //If you're the leader, manage the exped\n+                cm.sendSimple(list);\n+                status = 2;\n+            } else if (expedition.isRegistering()) { //If the expedition is registering\n+                if (expedition.contains(player)) { //If you're in it but it hasn't started, be patient\n+                    cm.sendOk(\"You have already registered for the expedition. Please wait for #r\" + expedition.getLeader().getName() + \"#k to begin the expedition.\");\n+                    cm.dispose();\n+                } else { //If you aren't in it, you're going to get added\n+                    cm.sendOk(expedition.addMember(cm.getPlayer()));\n+                    cm.dispose();\n+                }\n+            } else if (expedition.isInProgress()) { //Only if the expedition is in progress\n+                if (expedition.contains(player)) { //If you're registered, warp you in\n+                    var eim = em.getInstance(expedName + player.getClient().getChannel());\n+                    if(eim.getIntProperty(\"canJoin\") == 1) {\n+                        eim.registerPlayer(player);\n+                    } else {\n+                        cm.sendOk(\"Your expedition already started the battle against \" + expedBoss + \". Lets pray for those brave souls.\");\n+                    }\n+                    \n+                    cm.dispose();\n+                } else { //If you're not in by now, tough luck\n+                    cm.sendOk(\"Another expedition has taken the initiative to challenge \" + expedBoss + \", lets pray for those brave souls.\");\n                     cm.dispose();\n                 }\n             }\n+        } else if (status == 1) {\n+            if (selection == 1) {\n+                expedition = cm.getExpedition(exped);\n+                if(expedition != null) {\n+                    cm.sendOk(\"Someone already taken the initiative to be the leader of the expedition. Try joining them!\");\n+                    cm.dispose();\n+                    return;\n+                }\n+                \n+                cm.createExpedition(exped);\n+                cm.sendOk(\"The #r\" + expedBoss + \" Expedition#k has been created.\\r\\n\\r\\nTalk to me again to view the current team, or start the fight!\");\n+                cm.dispose();\n+                return;\n+            } else if (selection == 2) {\n+                cm.sendOk(\"Sure, not everyone's up to challenging \" + expedBoss + \".\");\n+                cm.dispose();\n+                return;\n+            } else {\n+                cm.sendSimple(\"Hi there. I am #b#nMu Young#n#k, the temple Keeper. This temple is currently under siege by the Balrog troops. We currently do not know who gave the orders. \" +\n+                            \"For a few weeks now, the #e#b Order of the Altair#n#k has been sending mercenaries, but they were eliminated every time.\" +\n+                            \" So, traveler, would you like to try your luck at defeating this unspeakable horror?\\r\\n  #L1#What is the #eOrder of the Altair?\");\n+                    \n+                status = 10;\n+            }\n+        } else if (status == 2) {\n+            if (selection == 1) {\n+                if (expedition == null) {\n+                    cm.sendOk(\"The expedition could not be loaded.\");\n+                    cm.dispose();\n+                    return;\n+                }\n+                var size = expedition.getMembers().size();\n+                if (size == 1) {\n+                    cm.sendOk(\"You are the only member of the expedition.\");\n+                    cm.dispose();\n+                    return;\n+                }\n+                var text = \"The following members make up your expedition (Click on them to expel them):\\r\\n\";\n+                text += \"\\r\\n\\t\\t1.\" + expedition.getLeader().getName();\n+                for (var i = 1; i < size; i++) {\n+                    text += \"\\r\\n#b#L\" + (i + 1) + \"#\" + (i + 1) + \". \" + expedition.getMembers().get(i).getName() + \"#l\\n\";\n+                }\n+                cm.sendSimple(text);\n+                status = 6;\n+            } else if (selection == 2) {\n+                var min = exped.getMinSize();\n+                var size = expedition.getMembers().size();\n+                if (size < min) {\n+                    cm.sendOk(\"You need at least \" + min + \" players registered in your expedition.\");\n+                    cm.dispose();\n+                    return;\n+                }\n+                \n+                cm.sendOk(\"The expedition will begin and you will now be escorted to the #b\" + expedMap + \"#k.\");\n+                status = 4;\n+            } else if (selection == 3) {\n+                player.getMap().broadcastMessage(MaplePacketCreator.serverNotice(6, expedition.getLeader().getName() + \" has ended the expedition.\"));\n+                cm.endExpedition(expedition);\n+                cm.sendOk(\"The expedition has now ended. Sometimes the best strategy is to run away.\");\n+                cm.dispose();\n+                return;\n+            }\n+        } else if (status == 4) {\n+            if (em == null) {\n+                cm.sendOk(\"The event could not be initialized, please report this on the forum.\");\n+                cm.dispose();\n+                return;\n+            }\n+\n+            em.setProperty(\"leader\", player.getName());\n+            em.setProperty(\"channel\", player.getClient().getChannel());\n+            if(!em.startInstance(expedition)) {\n+                cm.sendOk(\"Another expedition has taken the initiative to challenge \" + expedBoss + \", lets pray for those brave souls.\");\n+                cm.dispose();\n+                return;\n+            }\n+            \n+            cm.dispose();\n+            return;\n+        } else if (status == 6) {\n+            if (selection > 0) {\n+                var banned = expedition.getMembers().get(selection - 1);\n+                expedition.ban(banned);\n+                cm.sendOk(\"You have banned \" + banned.getName() + \" from the expedition.\");\n+                cm.dispose();\n+            } else {\n+                cm.sendSimple(list);\n+                status = 2;\n+            }\n+        } else if (status == 10) {\n+            cm.sendOk(\"The Order of the Altair is a group of elite mercenaries that oversee the world's economy and battle operations. It was founded 40 years ago right after Black Mage was defeated in hopes of forseeing the next possible attack.\");\n+            cm.dispose();\n         }\n-}\n\\ No newline at end of file\n+    }\n+}"}, {"sha": "1fd6b88c239c4a2cac04166287d37d205c11180f", "filename": "scripts/npc/1061018.js", "status": "modified", "additions": 35, "deletions": 37, "changes": 72, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/npc/1061018.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/npc/1061018.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1061018.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -1,41 +1,39 @@\n-importPackage(Packages.server.events);\n-\n-var status = 0;\n-var dispose = false;\n-function start(){\n-    action(1, 0, 0);\n+var status;\n+ \n+function start() {\n+        status = -1;\n+        action(1, 0, 0);\n }\n \n-function action(mode, type, selection){\n-    if(mode <= 0){\n-        cm.dispose();\n-        return;\n-    } else if(status == 0){\n-        if(cm.getPlayer().getMap().getMonsters().size() == 0){\n-            cm.sendOk(\"Wow! You defeated the balrog.\");\n-            dispose = true;\n-            cm.getPlayer().getClient().getChannelServer().broadcastPacket(Packages.tools.MaplePacketCreator.serverNotice(0, BalrogPQ.partyLeader + \"'s party has successfully defeated the Balrog! Praise to them, they finished with \" + cm.getPlayer().getMap().getCharacters().size() + \" players.\"));\n-            status++;\n-        } else if(cm.getPlayer().getMap().getCharacters().size() > 1){\n-            cm.sendYesNo(\"Are you really going to leave this battle and leave your fellow travelers to die?\");\n-            dispose = false;\n-            status++;\n-        } else if(cm.getPlayer().getMap().getCharacters().size() <= 1){\n-            cm.sendYesNo(\"If you're a coward, you will leave.\");\n-            dispose = true;\n-            status++;\n+function action(mode, type, selection) {\n+        if (mode == -1) {\n+                cm.dispose();\n         } else {\n-            cm.sendYesNo(\"So you are really going to leave?\");\n-            status++;\n-        }\n-    } else if(status == 1){\n-        if(dispose){\n-            cm.getPlayer().getMap().killAllMonsters();\n-            BalrogPQ.partyLeader = \"undefined\";\n-            BalrogPQ.balrogSpawned = false;\n-            BalrogPQ.close();\n+                if (mode == 0 && type > 0) {\n+                        cm.dispose();\n+                        return;\n+                }\n+                if (mode == 1)\n+                        status++;\n+                else\n+                        status--;\n+    \n+                if(status == 0){\n+                        if(cm.getEventInstance().isEventCleared()) {\n+                                cm.sendOk(\"Wow! You defeated the balrog.\");\n+                        } else if(cm.getPlayer().getMap().getCharacters().size() > 1) {\n+                                cm.sendYesNo(\"Are you really going to leave this battle and leave your fellow travelers to die?\");\n+                        } else {\n+                                cm.sendYesNo(\"If you're a coward, you will leave.\");\n+                        }\n+                } else if(status == 1){\n+                        if(cm.getEventInstance().isEventCleared()) {\n+                                cm.warp(cm.getMapId() == 105100300 ? 105100301 : 105100401);\n+                        } else {\n+                                cm.warp(105100100);\n+                        }\n+\n+                        cm.dispose();\n+                }\n         }\n-        cm.warp(105100100);\n-        cm.dispose();\n-    }\n-}\n\\ No newline at end of file\n+}"}, {"sha": "eccfb0a6aefd70732b1024ba0593ce6f4e29bf6d", "filename": "scripts/npc/2060009.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/npc/2060009.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/npc/2060009.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2060009.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -4,7 +4,7 @@ var payment = false;\n var atHerbTown = false;\n \n function start() {\n-\tif(cm.getPlayer().getMap().getId() == 251000100)atHerbTown = true;\n+    if(cm.getPlayer().getMap().getId() == 251000100) atHerbTown = true;\n \t\n     if (cm.haveItem(4031242)){\n \t\tif(atHerbTown)"}, {"sha": "4a1e895741926d3c3fb3f6cdf9eb9317c1b1e20e", "filename": "scripts/npc/2081000.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/npc/2081000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/npc/2081000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2081000.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -42,7 +42,7 @@ function action(mode, type, selection) {\n         if(selection == 0) {\n             cm.sendSimple(\"You don't seem to be from out town. How can I help you?#L0##bI would like some #t4031346#.#k#l\");\n         } else {\n-            cm.sendNext(\"Under developing...\");\n+            cm.sendNext(\"Under development...\");\n             cm.dispose();\n         }\n     } else if(status == 2) {"}, {"sha": "0d8efd7ae4b133fa4919ecb1c1c63553855ea0a7", "filename": "scripts/npc/9201056.js", "status": "modified", "additions": 19, "deletions": 4, "changes": 23, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/npc/9201056.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/npc/9201056.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9201056.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -21,6 +21,7 @@\n */\n var status = 0;\n var goToMansion = false;\n+var fee = 15000;\n \n function start() {\n     status = -1;\n@@ -37,7 +38,7 @@ function action(mode, type, selection) {\n         status++;\n         if (cm.getPlayer().getMapId() == 682000000) {\n             if (status == 0)\n-                cm.sendSimple(\"Where to, boss? \\r\\n#L0#New Leaf City#l\\r\\n#L1#Haunted Mansion#l\");\n+                cm.sendSimple(\"Where to, boss? \\r\\n#b#L0#New Leaf City (\" + fee + \" mesos)#l\\r\\n#L1#Haunted Mansion#l#k\");\n             else if (status == 1) {\n                 if (selection == 0)\n                     cm.sendYesNo(\"You want to go to New Leaf City?\");\n@@ -46,14 +47,28 @@ function action(mode, type, selection) {\n                     cm.sendYesNo(\"You're sure you want to enter the Mansion?\");\n                 }\n             } else if (status == 2) {\n-                cm.warp(goToMansion ? 682000100 : 600000000, 0);\n+                if(goToMansion) {\n+                    cm.warp(682000100, 0);\n+                } else if(cm.getMeso() >= fee) {\n+                    cm.gainMeso(-fee);\n+                    cm.warp(600000000);\n+                } else {\n+                    cm.sendOk(\"Hey, what are you trying to pull on? You don't have enough meso to pay the fee.\");\n+                }\n+                \n                 cm.dispose();\n             }\n         } else {\n             if (status == 0) {\n-                cm.sendYesNo(\"Would you like to go to the Haunted Mansion?\");\n+                cm.sendYesNo(\"Would you like to go to the #bHaunted Mansion#k? The fee is \" + fee + \" mesos.\");\n             } else if (status == 1) {\n-                cm.warp(682000000, 0);\n+                if(cm.getMeso() >= fee) {\n+                    cm.gainMeso(-fee);\n+                    cm.warp(682000000, 0);\n+                } else {\n+                    cm.sendOk(\"Hey, what are you trying to pull on? You don't have enough meso to pay the fee.\");\n+                }\n+                \n                 cm.dispose();\n             }\n         }"}, {"sha": "bfd3747e9b284f49a10fb4177d8465b1bb644bf4", "filename": "scripts/npc/9209000.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/npc/9209000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/npc/9209000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9209000.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -86,7 +86,7 @@ function action(mode, type, selection) {\n                 }\n             }\n \n-            cm.sendOk(sendStr);\n+            cm.sendSimple(sendStr);\n             cm.dispose();\n         }\n     }"}, {"sha": "cf240a09597a307e5721b37db1f8242bab34c562", "filename": "scripts/npc/9220018.js", "status": "added", "additions": 67, "deletions": 0, "changes": 67, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/npc/9220018.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/npc/9220018.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9220018.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -0,0 +1,67 @@\n+/**\n+ * @author: Ronan\n+ * @npc: Charles\n+ * @func: Treasure PQ\n+*/\n+\n+var status = 0;\n+var em = null;\n+\n+function start() {\n+\tstatus = -1;\n+\taction(1, 0, 0);\n+}\n+\n+function action(mode, type, selection) {\n+        if (mode == -1) {\n+                cm.dispose();\n+        } else {\n+                if (mode == 0 && status == 0) {\n+                        cm.dispose();\n+                        return;\n+                }\n+                if (mode == 1)\n+                        status++;\n+                else\n+                        status--;\n+                \n+                if (status == 0) {\n+                        em = cm.getEventManager(\"TreasurePQ\");\n+                        if(em == null) {\n+                                cm.sendOk(\"The Treasure PQ has encountered an error.\");\n+                                cm.dispose();\n+                                return;\n+                        }\n+                    \n+                        cm.sendSimple(\"#e#b<Party Quest: MV's Lair>\\r\\n#k#n\" + em.getProperty(\"party\") + \"\\r\\n\\r\\nYou can't go any further because of the extremely dangerous creatures lying ahead. Would you like to collaborate with party members to complete the quest? If so, please have your #bparty leader#k talk to me.#b\\r\\n#L0#I want to participate in the party quest.\\r\\n#L1#I want to find party members.\\r\\n#L2#I would like to hear more details.\");\n+                } else if (status == 1) {\n+                        if (selection == 0) {\n+                                if (cm.getParty() == null) {\n+                                        cm.sendOk(\"You can participate in the party quest only if you are in a party.\");\n+                                        cm.dispose();\n+                                } else if(!cm.isLeader()) {\n+                                        cm.sendOk(\"Your party leader must talk to me to start this party quest.\");\n+                                        cm.dispose();\n+                                } else {\n+                                        var eli = em.getEligibleParty(cm.getParty());\n+                                        if(eli.size() > 0) {\n+                                                if(!em.startInstance(cm.getParty(), cm.getPlayer().getMap(), 1)) {\n+                                                        cm.sendOk(\"Another party has already entered the #rParty Quest#k in this channel. Please try another channel, or wait for the current party to finish.\");                            \n+                                                }\n+                                        }\n+                                        else {\n+                                                cm.sendOk(\"You cannot start this party quest yet, because either your party is not in the range size, some of your party members are not eligible to attempt it or they are not in this map. If you're having trouble finding party members, try Party Search.\");\n+                                        }\n+                                        \n+                                        cm.dispose();\n+                                }\n+                        } else if (selection == 1) {\n+                                cm.sendOk(\"Try using a Super Megaphone or asking your buddies or guild to join!\");\n+                                cm.dispose();\n+                        } else {\n+                                cm.sendOk(\"#e#b<Party Quest: MV's Lair>#k#n\\r\\nMV appeared once more, disrupting the welfare of the people of New Leaf City. Join forces with other maplers to fend off this sudden attack. After defeating MV and his minions, fetch your prizes at MV's treasure room.\");\n+                                cm.dispose();\n+                        }\n+                }\n+        }\n+}\n\\ No newline at end of file"}, {"sha": "48778a7398ba212f9025a79886df67a9813372cb", "filename": "scripts/npc/9220019.js", "status": "added", "additions": 59, "deletions": 0, "changes": 59, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/npc/9220019.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/npc/9220019.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9220019.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -0,0 +1,59 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+var status;\n+ \n+function start() {\n+        status = -1;\n+        action(1, 0, 0);\n+}\n+\n+function action(mode, type, selection) {\n+        if (mode == -1) {\n+                cm.dispose();\n+        } else {\n+                if (mode == 0 && type > 0) {\n+                        cm.dispose();\n+                        return;\n+                }\n+                if (mode == 1)\n+                        status++;\n+                else\n+                        status--;\n+    \n+                if(status == 0) {\n+                        var mapid = cm.getMapId();\n+                        if(mapid == 674030100) {\n+                                cm.sendNext(\"Hi, I'm #p9220019#.\");\n+                                cm.dispose();\n+                                return;\n+                        } else if(mapid == 674030300) {\n+                                cm.sendNext(\"Hi there, #h0#. This is the MV's treasure room. Use the time you have here to do whatever you want, there are a lot of things to uncover here, actually. Or else you can use the portal here to #rgo back#k to the entrance.\");\n+                                cm.dispose();\n+                                return;\n+                        }\n+                    \n+                        cm.sendYesNo(\"Are you sure you want to return? By returning now you are leaving your partners behind, do you really want to do it?\");\n+                } else if(status == 1) {\n+                        cm.warp(674030100);\n+                        cm.dispose();\n+                }\n+        }\n+}\n\\ No newline at end of file"}, {"sha": "8d0be4d585f252b4aaffce81b3cc7ce5999043de", "filename": "scripts/npc/9220020.js", "status": "added", "additions": 68, "deletions": 0, "changes": 68, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/npc/9220020.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/npc/9220020.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9220020.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -0,0 +1,68 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+var status;\n+ \n+function start() {\n+        status = -1;\n+        action(1, 0, 0);\n+}\n+\n+function action(mode, type, selection) {\n+        if (mode == -1) {\n+                cm.dispose();\n+        } else {\n+                if (mode == 0 && type > 0) {\n+                        cm.dispose();\n+                        return;\n+                }\n+                if (mode == 1)\n+                        status++;\n+                else\n+                        status--;\n+    \n+                if(status == 0) {\n+                        if(!cm.isEventLeader()) {\n+                                cm.sendNext(\"Please let your party leader talk to me for further instructions to proceed to the next stage.\");\n+                                cm.dispose();\n+                                return;\n+                        }\n+                        \n+                        var eim = cm.getEventInstance();\n+                        if(cm.haveItem(4032118, 15)) {\n+                                cm.gainItem(4032118, -15);\n+                                \n+                                eim.setIntProperty(\"statusStg1\", 1);\n+                                eim.showClearEffect();\n+                                \n+                                cm.sendNext(\"You got the letters, great! Now, you can proceed to the room MV is through this tunnel. Be prepared!\");\n+                                cm.dispose();\n+                        } else {\n+                                if(eim.getIntProperty(\"statusStg1\") == 1) {\n+                                        cm.sendNext(\"Go through this tunnel for the boss battle.\");\n+                                } else {\n+                                        cm.sendNext(\"Please hand me #r15 secret letters#k.\");\n+                                }\n+                                \n+                                cm.dispose();\n+                        }\n+                }\n+        }\n+}\n\\ No newline at end of file"}, {"sha": "4a59b2a76c2e7525dc5e82775c4ee6b2ef2d5dd2", "filename": "scripts/portal/MD_cakeEnter.js", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/portal/MD_cakeEnter.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/portal/MD_cakeEnter.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/MD_cakeEnter.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -0,0 +1,4 @@\n+function enter(pi) {\n+    pi.playPortalSound(); pi.warp(674030100,\"in00\");\n+    return true;\n+}\n\\ No newline at end of file"}, {"sha": "1e5d5694406d22a1afa6012b692f8d0a50b53aaf", "filename": "scripts/portal/enter_td.js", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/portal/enter_td.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/portal/enter_td.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/enter_td.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -0,0 +1,4 @@\n+function enter(pi) {\n+    pi.playPortalSound(); pi.warp(600000000,\"yn00\");\n+    return true;\n+}\n\\ No newline at end of file"}, {"sha": "1ce0bd996c3d422cff5021e744809a74d5ef4014", "filename": "scripts/portal/guyfawkes0_esc.js", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/portal/guyfawkes0_esc.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/portal/guyfawkes0_esc.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/guyfawkes0_esc.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -0,0 +1,28 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+function enter(pi) {\n+        if(pi.getEventInstance().getIntProperty(\"statusStg1\") == 1) {\n+                pi.playPortalSound(); pi.warp(674030200, 0);\n+                return true;\n+        } else {\n+                pi.message(\"The tunnel is currently blocked.\");\n+                return false;\n+        }\n+}\n\\ No newline at end of file"}, {"sha": "6ecc924162ecb3f76b6ab8eb5cd6bb0f1c909eb9", "filename": "scripts/portal/guyfawkes0_floor.js", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/portal/guyfawkes0_floor.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/portal/guyfawkes0_floor.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/guyfawkes0_floor.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -0,0 +1,23 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+function enter(pi) {\n+        pi.warp(674030000, 0);\n+        return true;\n+}\n\\ No newline at end of file"}, {"sha": "2098cf3cf58416233354204b4399983760d88318", "filename": "scripts/portal/nets_in.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/portal/nets_in.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/portal/nets_in.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/nets_in.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -1,5 +1,5 @@\n function enter(pi) {\n-\tpi.saveLocation(\"MIRROR\");\n-\tpi.playPortalSound(); pi.warp(926010000, 0);\n+\tpi.getPlayer().saveLocation(\"MIRROR\");\n+\tpi.playPortalSound(); pi.warp(926010000, 4);\n \treturn true;\n }\n\\ No newline at end of file"}, {"sha": "64c55d18f08a44d2722e83495fa84e7bd5d0f1f2", "filename": "scripts/portal/nets_out.js", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/portal/nets_out.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/portal/nets_out.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/nets_out.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -23,6 +23,10 @@ Author: kevintjuh93\n */ \n \n function enter(pi) {\n-    pi.playPortalSound(); pi.warp(pi.getPlayer().getSavedLocation(\"MIRROR\"));\n+    var mapid = pi.getPlayer().getSavedLocation(\"MIRROR\");\n+    \n+    pi.playPortalSound();\n+    if(mapid == 260020500) pi.warp(mapid, 3);\n+    else pi.warp(mapid);\n     return true;\n }\n\\ No newline at end of file"}, {"sha": "5bdda666d1f7fb9a144ed27ad4c291f91bdff6ea", "filename": "scripts/portal/s4hitman.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/portal/s4hitman.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/portal/s4hitman.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/s4hitman.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -21,10 +21,10 @@\n */\n /**\n  * @author BubblesDev v83 (Moogra)\n- * @purpose Warps to the Junior Balrog map for the Rush Skill.\n+ * @purpose Warps to the Relic map for the Assassinate Skill.\n  */\n function enter(pi) {\n-    if(pi.isQuestStarted(6202)) {\n+    if(pi.isQuestStarted(6201)) {\n         if(pi.getWarpMap(910200000).countPlayers() == 0) {\n             pi.resetMapObjects(910200000);\n             pi.playPortalSound(); pi.warp(910200000, 0);"}, {"sha": "339a856c787d2755098b170bdee19d717e0f03c0", "filename": "scripts/quest/3108.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/quest/3108.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/quest/3108.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/3108.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -35,7 +35,7 @@ function start(mode, type, selection) {\n             status--;\n         \n         if (status == 0) {\n-            qm.sendNext(\"(As you peek into the shattered statue, you might have found a clue about what happened. Better talk with #rScadur#k about this.)\");\n+            qm.sendNext(\"(As you peek into the shattered statue, you might have found a clue about what happened. Better talk to #rScadur#k about this.)\");\n             qm.forceCompleteQuest();\n             \n             qm.dispose();"}, {"sha": "010625cc00cd13e48b0c722bd306876157630d42", "filename": "scripts/reactor/1020000.js", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/reactor/1020000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/reactor/1020000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/1020000.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -0,0 +1,28 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+/* @Author Ronan\n+ * \n+ * 1020000.js: relic room next floor\n+*/\n+\n+function act() {\n+    rm.warp(910200000, \"pt00\");\n+}\n\\ No newline at end of file"}, {"sha": "12408528708b509efe3a3b07d9e024b6fea136a1", "filename": "scripts/reactor/1020001.js", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/reactor/1020001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/reactor/1020001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/1020001.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -0,0 +1,28 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+/* @Author Ronan\n+ * \n+ * 1020001.js: relic room next floor\n+*/\n+\n+function act() {\n+    rm.warp(910200000, \"pt01\");\n+}\n\\ No newline at end of file"}, {"sha": "ecab666900ba98ff3f15516ad0c3cca8e6dc042b", "filename": "scripts/reactor/1020002.js", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/reactor/1020002.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/reactor/1020002.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/1020002.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -0,0 +1,28 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+/* @Author Ronan\n+ * \n+ * 1020002.js: relic room next floor\n+*/\n+\n+function act() {\n+    rm.warp(910200000, \"pt02\");\n+}\n\\ No newline at end of file"}, {"sha": "6d181e4ff68c5d64bbb5c300ddde44fd2ccf9d1e", "filename": "scripts/reactor/1021000.js", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/reactor/1021000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/reactor/1021000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/1021000.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -0,0 +1,28 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+/* @Author Ronan\n+ * \n+ * 1021000.js: relic room fail\n+*/\n+\n+function act() {\n+    rm.spawnMonster(9300091);\n+}\n\\ No newline at end of file"}, {"sha": "ec4e6e43eefe3b2dde02d8ab48160ea45d8e8c37", "filename": "scripts/reactor/1021001.js", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/reactor/1021001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/reactor/1021001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/1021001.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -0,0 +1,28 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+/* @Author Ronan\n+ * \n+ * 1021001.js: relic room fail\n+*/\n+\n+function act() {\n+    rm.spawnMonster(9300091);\n+}\n\\ No newline at end of file"}, {"sha": "5ae54c93c247167cd97d7d6f7dd7448907024a32", "filename": "scripts/reactor/1021002.js", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/reactor/1021002.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/reactor/1021002.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/1021002.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -0,0 +1,28 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+/* @Author Ronan\n+ * \n+ * 1021002.js: relic room fail\n+*/\n+\n+function act() {\n+    rm.spawnMonster(9300091);\n+}\n\\ No newline at end of file"}, {"sha": "5ae3a13613392ecd4acd19a39fbdf7feda203b67", "filename": "scripts/reactor/1022000.js", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/reactor/1022000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/reactor/1022000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/1022000.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -0,0 +1,28 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+/* @Author Ronan\n+ * \n+ * 1022000.js: relic complete\n+*/\n+\n+function act() {\n+    rm.dropItems();\n+}\n\\ No newline at end of file"}, {"sha": "1dcc195f359f8c9b12d8f185e3728c93280f002a", "filename": "scripts/reactor/1052001.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/reactor/1052001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/reactor/1052001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/1052001.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -1,3 +1,3 @@\n function act() {\n-\trm.dropItems();\n+\trm.sprayItems(true, 1, 500, 1000, 15);\n }\n\\ No newline at end of file"}, {"sha": "1dcc195f359f8c9b12d8f185e3728c93280f002a", "filename": "scripts/reactor/1052002.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/reactor/1052002.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/reactor/1052002.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/1052002.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -1,3 +1,3 @@\n function act() {\n-\trm.dropItems();\n+\trm.sprayItems(true, 1, 500, 1000, 15);\n }\n\\ No newline at end of file"}, {"sha": "088d9bea75b091c7d1fb590742be6eebe2ca98d2", "filename": "scripts/reactor/6741001.js", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/reactor/6741001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/reactor/6741001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/6741001.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -0,0 +1,23 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+function act() {\n+    rm.spawnMonster(9400589);\n+}\n\\ No newline at end of file"}, {"sha": "193b5bfd7faab8c82e1b28222b06eab88398e653", "filename": "scripts/reactor/6741015.js", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/reactor/6741015.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/reactor/6741015.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/6741015.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -0,0 +1,23 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+function act() {\n+    rm.dropItems();\n+}\n\\ No newline at end of file"}, {"sha": "b343b07cde5e666621fa563f6ae3f5aed4613908", "filename": "scripts/reactor/6742014.js", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/reactor/6742014.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/scripts/reactor/6742014.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/6742014.js?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -0,0 +1,23 @@\n+/*\n+    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    Copyleft (L) 2017 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+function act() {\n+    rm.sprayItems(true, 1, 5, 25, 15);\n+}\n\\ No newline at end of file"}, {"sha": "11e0ebe93cfcaae46d78da714a000854295eb362", "filename": "sql/db_database.sql", "status": "modified", "additions": 46, "deletions": 46, "changes": 92, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/sql/db_database.sql", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/sql/db_database.sql", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/sql/db_database.sql?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -9896,7 +9896,7 @@ INSERT IGNORE INTO `temp_data` (`id`, `dropperid`, `itemid`, `minimum_quantity`,\n (9674, 5150000, 2383043, 1, 1, 0, 1000),\n (9675, 6130100, 2383044, 1, 1, 0, 1000),\n (9676, 6130103, 2383045, 1, 1, 0, 1000),\n-(9677, 6130201, 2383046, 1, 1, 0, 1000),\n+(9677, 6130202, 2383046, 1, 1, 0, 20000),\n (9678, 6130203, 2383047, 1, 1, 0, 1000),\n (9679, 5090000, 2383048, 1, 1, 0, 25000),\n (9680, 5090001, 2383049, 1, 1, 0, 25000),\n@@ -10416,10 +10416,10 @@ INSERT IGNORE INTO `temp_data` (`id`, `dropperid`, `itemid`, `minimum_quantity`,\n (10194, 8500002, 4031196, 1, 1, 0, 1000000),\n (10195, 8500002, 4031196, 1, 1, 0, 187500),\n (10196, 8500002, 4031196, 1, 1, 0, 125000),\n-(10197, 3000006, 4031209, 1, 1, 0, 500000),\n-(10198, 2230109, 4031209, 1, 1, 0, 500000),\n-(10199, 2230200, 4031209, 1, 1, 0, 500000),\n-(10200, 3230104, 4031209, 1, 1, 0, 500000),\n+(10197, 3000006, 4031209, 1, 1, 3072, 500000),\n+(10198, 2230109, 4031209, 1, 1, 3072, 500000),\n+(10199, 2230200, 4031209, 1, 1, 3072, 500000),\n+(10200, 3230104, 4031209, 1, 1, 3072, 500000),\n (10201, 3230306, 4031159, 1, 1, 2074, 500000),\n (10202, 9500400, 4031224, 1, 1, 3607, 1000000),\n (10203, 9500400, 4031223, 1, 1, 3607, 1000000),\n@@ -16168,7 +16168,7 @@ INSERT INTO `monstercarddata` (`id`, `cardid`, `mobid`) VALUES\n (152, 2383043, 5150000),\n (153, 2383044, 6130100),\n (154, 2383045, 6130103),\n-(155, 2383046, 6130201),\n+(155, 2383046, 6130202),\n (156, 2383047, 6130203),\n (157, 2383048, 5090000),\n (158, 2383049, 5090001),\n@@ -16591,7 +16591,7 @@ INSERT INTO `reactordrops` (`reactordropid`, `reactorid`, `itemid`, `chance`, `q\n (41, 2212004, 4031116, 2, -1),\n (42, 2212004, 2000001, 2, -1),\n (43, 2212005, 4031136, 8, 3439),\n-(44, 2222000, 4031231, 2, -1),\n+(44, 2222000, 4031231, 2, 3620),\n (45, 2222000, 4031258, 2, -1),\n (46, 2222000, 2000002, 3, -1),\n (47, 2302000, 2000001, 3, -1),\n@@ -16667,7 +16667,7 @@ INSERT INTO `reactordrops` (`reactordropid`, `reactorid`, `itemid`, `chance`, `q\n (117, 1302000, 4032267, 1, 20013),\n (118, 1052000, 4031471, 1, 6153),\n (119, 2112015, 2280000, 1, -1),\n-(120, 1022000, 4031452, 1, -1),\n+(120, 1022000, 4031452, 1, 6201),\n (121, 2202003, 4001022, 1, -1),\n (122, 2201001, 4001022, 1, -1),\n (123, 1402000, 4032309, 1, 21013),\n@@ -16728,44 +16728,44 @@ INSERT INTO `reactordrops` (`reactordropid`, `reactorid`, `itemid`, `chance`, `q\n (178, 1052001, 1412039, 3, -1),\n (179, 1052001, 1422042, 3, -1),\n (180, 1052001, 1422043, 3, -1),\n-(181, 1052002, 1072375, 3, -1),\n-(182, 1052002, 1072376, 3, -1),\n-(183, 1052002, 2040728, 3, -1),\n-(184, 1052002, 2040729, 3, -1),\n-(185, 1052002, 2040730, 3, -1),\n-(186, 1052002, 2040731, 3, -1),\n-(187, 1052002, 2040732, 3, -1),\n-(188, 1052002, 2040733, 3, -1),\n-(189, 1052002, 2040734, 3, -1),\n-(190, 1052002, 2040735, 3, -1),\n-(191, 1052002, 2040736, 3, -1),\n-(192, 1052002, 2040737, 3, -1),\n-(193, 1052002, 2040738, 3, -1),\n-(194, 1052002, 2040739, 3, -1),\n-(195, 1052002, 1302112, 3, -1),\n-(196, 1052002, 1302113, 3, -1),\n-(197, 1052002, 1312042, 3, -1),\n-(198, 1052002, 1312043, 3, -1),\n-(199, 1052002, 1322068, 3, -1),\n-(200, 1052002, 1322069, 3, -1),\n-(201, 1052002, 1332084, 3, -1),\n-(202, 1052002, 1332085, 3, -1),\n-(203, 1052002, 1332086, 3, -1),\n-(204, 1052002, 1332087, 3, -1),\n-(205, 1052002, 1342019, 3, -1),\n-(206, 1052002, 1342020, 3, -1),\n-(207, 1052002, 1372050, 3, -1),\n-(208, 1052002, 1372051, 3, -1),\n-(209, 1052002, 1382066, 3, -1),\n-(210, 1052002, 1382067, 3, -1),\n-(211, 1052002, 1402056, 3, -1),\n-(212, 1052002, 1402057, 3, -1),\n-(213, 1052002, 1402058, 3, -1),\n-(214, 1052002, 1402059, 3, -1),\n-(215, 1052002, 1412038, 3, -1),\n-(216, 1052002, 1412039, 3, -1),\n-(217, 1052002, 1422042, 3, -1),\n-(218, 1052002, 1422043, 3, -1),\n+(181, 1052002, 1072375, 5, -1),\n+(182, 1052002, 1072376, 5, -1),\n+(183, 1052002, 2040728, 5, -1),\n+(184, 1052002, 2040729, 5, -1),\n+(185, 1052002, 2040730, 5, -1),\n+(186, 1052002, 2040731, 5, -1),\n+(187, 1052002, 2040732, 5, -1),\n+(188, 1052002, 2040733, 5, -1),\n+(189, 1052002, 2040734, 5, -1),\n+(190, 1052002, 2040735, 5, -1),\n+(191, 1052002, 2040736, 5, -1),\n+(192, 1052002, 2040737, 5, -1),\n+(193, 1052002, 2040738, 5, -1),\n+(194, 1052002, 2040739, 5, -1),\n+(195, 1052002, 1302112, 5, -1),\n+(196, 1052002, 1302113, 5, -1),\n+(197, 1052002, 1312042, 5, -1),\n+(198, 1052002, 1312043, 5, -1),\n+(199, 1052002, 1322068, 5, -1),\n+(200, 1052002, 1322069, 5, -1),\n+(201, 1052002, 1332084, 5, -1),\n+(202, 1052002, 1332085, 5, -1),\n+(203, 1052002, 1332086, 5, -1),\n+(204, 1052002, 1332087, 5, -1),\n+(205, 1052002, 1342019, 5, -1),\n+(206, 1052002, 1342020, 5, -1),\n+(207, 1052002, 1372050, 5, -1),\n+(208, 1052002, 1372051, 5, -1),\n+(209, 1052002, 1382066, 5, -1),\n+(210, 1052002, 1382067, 5, -1),\n+(211, 1052002, 1402056, 5, -1),\n+(212, 1052002, 1402057, 5, -1),\n+(213, 1052002, 1402058, 5, -1),\n+(214, 1052002, 1402059, 5, -1),\n+(215, 1052002, 1412038, 5, -1),\n+(216, 1052002, 1412039, 5, -1),\n+(217, 1052002, 1422042, 5, -1),\n+(218, 1052002, 1422043, 5, -1),\n (219, 1002008, 4032452, 1, 22502),\n (220, 6102001, 4001260, 1, -1),\n (221, 6102002, 1472051, 25, -1),"}, {"sha": "0812abb51136c15d7bc98bc465b7327e0d9164a3", "filename": "sql/db_drops.sql", "status": "modified", "additions": 307, "deletions": 22, "changes": 329, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/sql/db_drops.sql", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/sql/db_drops.sql", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/sql/db_drops.sql?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -2261,8 +2261,8 @@ USE `heavenms`;\n (2230104, 1082043, 1, 1, 0, 700), \n (2230104, 1332010, 1, 1, 0, 700), \n (2230104, 1052104, 1, 1, 0, 700), \n-(2230109, 4031209, 1, 1, 0, 7000), \n-(9410016, 4031209, 1, 1, 0, 7000), \n+(2230109, 4031209, 1, 1, 3072, 7000), \n+(9410016, 4031209, 1, 1, 3072, 7000), \n (2230109, 4131010, 1, 1, 0, 3000), \n (9410016, 4131010, 1, 1, 0, 3000), \n (2230109, 2000002, 1, 1, 0, 40000), \n@@ -2308,7 +2308,7 @@ USE `heavenms`;\n (2230109, 1002619, 1, 1, 0, 700), \n (9410016, 1002619, 1, 1, 0, 700), \n (2230200, 4000165, 1, 1, 0, 200000), \n-(2230200, 4031209, 1, 1, 0, 7000), \n+(2230200, 4031209, 1, 1, 3072, 7000), \n (2230200, 4006000, 1, 1, 0, 7000), \n (2230200, 2000001, 1, 1, 0, 40000), \n (2230200, 2040501, 1, 1, 0, 750), \n@@ -2642,7 +2642,7 @@ USE `heavenms`;\n (9400247, 1492004, 1, 1, 0, 700), \n (9500107, 1492004, 1, 1, 0, 700),\n (3000006, 4000166, 1, 1, 0, 200000), \n-(3000006, 4031209, 1, 1, 0, 7000),\n+(3000006, 4031209, 1, 1, 3072, 7000),\n (3000006, 4131003, 1, 1, 0, 3000), \n (3000006, 2000002, 1, 1, 0, 40000), \n (3000006, 2000003, 1, 1, 0, 40000), \n@@ -2958,7 +2958,7 @@ USE `heavenms`;\n (3210100, 1002178, 1, 1, 0, 700), \n (3210100, 1052107, 1, 1, 0, 700), \n (3230104, 4000167, 1, 1, 0, 200000),\n-(3230104, 4031209, 1, 1, 0, 7000), \n+(3230104, 4031209, 1, 1, 3072, 7000), \n (3230104, 4030012, 1, 1, 0, 10000), \n (3230104, 2000002, 1, 1, 0, 40000), \n (3230104, 2022040, 1, 1, 0, 3000), \n@@ -4473,8 +4473,8 @@ USE `heavenms`;\n (3230303, 1482005, 1, 1, 0, 700), \n (3230405, 4000154, 1, 1, 0, 200000),\n (9410020, 4000154, 1, 1, 0, 200000), \n-(3230405, 4031209, 1, 1, 0, 7000), \n-(9410020, 4031209, 1, 1, 0, 7000), \n+(3230405, 4031209, 1, 1, 3072, 7000), \n+(9410020, 4031209, 1, 1, 3072, 7000), \n (3230405, 2002005, 1, 1, 0, 10000), \n (9410020, 2002005, 1, 1, 0, 10000), \n (3230405, 2022040, 1, 1, 0, 3000), \n@@ -5135,8 +5135,8 @@ USE `heavenms`;\n (9300233, 1052113, 1, 1, 0, 700), \n (4230200, 4000158, 1, 1, 0, 200000), \n (9410018, 4000158, 1, 1, 0, 200000), \n-(4230200, 4031209, 1, 1, 0, 7000), \n-(9410018, 4031209, 1, 1, 0, 7000), \n+(4230200, 4031209, 1, 1, 3072, 7000), \n+(9410018, 4031209, 1, 1, 3072, 7000), \n (4230200, 2022040, 1, 1, 0, 3000), \n (9410018, 2022040, 1, 1, 0, 3000), \n (4230200, 2040707, 1, 1, 0, 750), \n@@ -5167,8 +5167,8 @@ USE `heavenms`;\n (9410018, 1072110, 1, 1, 0, 700), \n (4230200, 1472014, 1, 1, 0, 700), \n (9410018, 1472014, 1, 1, 0, 700), \n-(4230201, 4031209, 1, 1, 0, 7000), \n-(4230201, 2022040, 1, 1, 0, 3000), \n+(4230201, 4031209, 1, 1, 3072, 7000), \n+(4230201, 2022040, 1, 1, 3072, 3000), \n (4230201, 2000002, 1, 1, 0, 40000), \n (4230201, 2000003, 1, 1, 0, 40000), \n (4230201, 2002004, 1, 1, 0, 10000), \n@@ -5815,9 +5815,9 @@ USE `heavenms`;\n (4230124, 4000157, 1, 1, 0, 200000), \n (9300090, 4000157, 1, 1, 0, 200000), \n (9420501, 4000157, 1, 1, 0, 200000), \n-(4230124, 4031209, 1, 1, 0, 7000), \n-(9300090, 4031209, 1, 1, 0, 7000), \n-(9420501, 4031209, 1, 1, 0, 7000), \n+(4230124, 4031209, 1, 1, 3072, 7000), \n+(9300090, 4031209, 1, 1, 3072, 7000), \n+(9420501, 4031209, 1, 1, 3072, 7000), \n (4230124, 4030012, 1, 1, 0, 10000), \n (9300090, 4030012, 1, 1, 0, 10000), \n (9420501, 4030012, 1, 1, 0, 10000), \n@@ -6047,7 +6047,7 @@ USE `heavenms`;\n (4230108, 1472018, 1, 1, 0, 700), \n (4230123, 4000156, 1, 1, 0, 200000), \n (4230123, 4000157, 1, 1, 0, 200000), \n-(4230123, 4031209, 1, 1, 0, 7000), \n+(4230123, 4031209, 1, 1, 3072, 7000), \n (4230123, 4030012, 1, 1, 0, 10000), \n (4230123, 4003004, 1, 1, 0, 7000), \n (4230123, 4130015, 1, 1, 0, 3000), \n@@ -10055,7 +10055,6 @@ USE `heavenms`;\n (6130202, 2040004, 1, 1, 0, 750), \n (6130202, 2040501, 1, 1, 0, 750), \n (6130202, 2040401, 1, 1, 0, 750), \n-(6130202, 2383046, 1, 1, 0, 20000), \n (6130202, 4004002, 1, 1, 0, 3000), \n (6130202, 4010001, 1, 1, 0, 7000),\n (6130202, 4020008, 1, 1, 0, 7000), \n@@ -19559,7 +19558,6 @@ USE `heavenms`;\n (9400583, 2041030, 1, 1, 0, 5000),\n (9400583, 4006000, 1, 1, 0, 20000),\n (9400583, 2070005, 1, 1, 0, 400),\n-(9400583, 1042013, 1, 1, 0, 2000),\n (9400583, 1002391, 1, 1, 0, 2000),\n (9400583, 1302096, 1, 1, 0, 2000),\n (9400583, 1041099, 1, 1, 0, 2000),\n@@ -19770,8 +19768,8 @@ USE `heavenms`;\n (1120100, 4001361, 1, 1, 28250, 70000),\n (2230110, 4032146, 1, 1, 20722, 40000),\n (2230111, 4032147, 1, 1, 20723, 40000),\n-(9300378, 4001272, 1, 1, 0, 400000),\n-(9300378, 4032324, 1, 1, 21736, 40000),\n+(9300347, 4001272, 1, 1, 0, 400000),\n+(9300347, 4032324, 1, 1, 21736, 40000),\n (9300344, 4032322, 1, 1, 21731, 999999),\n (3400008, 1302008, 1, 1, 0, 8500),\n (3400008, 1412004, 1, 1, 0, 8500),\n@@ -20024,7 +20022,86 @@ USE `heavenms`;\n (7220002, 4031789, 1, 1, 3844, 999999),\n (9300102, 4031507, 1, 1, 6002, 999999),\n (9300061, 4001101, 1, 1, 0, 999999),\n-(9300093, 4031495, 1, 1, 6192, 999999);\n+(9300093, 4031495, 1, 1, 6192, 999999),\n+(8830007, 1302112, 1, 1, 0, 4000),\n+(8830007, 1302113, 1, 1, 0, 4000),\n+(8830007, 1312042, 1, 1, 0, 4000),\n+(8830007, 1312043, 1, 1, 0, 4000),\n+(8830007, 1322068, 1, 1, 0, 4000),\n+(8830007, 1322069, 1, 1, 0, 4000),\n+(8830007, 1332084, 1, 1, 0, 3000),\n+(8830007, 1332085, 1, 1, 0, 3000),\n+(8830007, 1332086, 1, 1, 0, 3000),\n+(8830007, 1332087, 1, 1, 0, 3000),\n+(8830007, 1372050, 1, 1, 0, 4000),\n+(8830007, 1382066, 1, 1, 0, 4000),\n+(8830007, 1382067, 1, 1, 0, 4000),\n+(8830007, 1402056, 1, 1, 0, 4000),\n+(8830007, 1402057, 1, 1, 0, 4000),\n+(8830007, 1402058, 1, 1, 0, 4000),\n+(8830007, 1402059, 1, 1, 0, 4000),\n+(8830007, 1412038, 1, 1, 0, 4000),\n+(8830007, 1412039, 1, 1, 0, 4000),\n+(8830007, 1422042, 1, 1, 0, 4000),\n+(8830007, 1422043, 1, 1, 0, 4000),\n+(8830007, 1432054, 1, 1, 0, 3000),\n+(8830007, 1432055, 1, 1, 0, 3000),\n+(8830007, 1442074, 1, 1, 0, 4000),\n+(8830007, 1442075, 1, 1, 0, 4000),\n+(8830007, 1452066, 1, 1, 0, 3000),\n+(8830007, 1452067, 1, 1, 0, 3000),\n+(8830007, 1452068, 1, 1, 0, 3000),\n+(8830007, 1452069, 1, 1, 0, 3000),\n+(8830007, 1452070, 1, 1, 0, 3000),\n+(8830007, 1462059, 1, 1, 0, 3000),\n+(8830007, 1462060, 1, 1, 0, 3000),\n+(8830007, 1462061, 1, 1, 0, 3000),\n+(8830007, 1462062, 1, 1, 0, 3000),\n+(8830007, 1462063, 1, 1, 0, 3000),\n+(8830007, 1472083, 1, 1, 0, 3000),\n+(8830007, 1472084, 1, 1, 0, 3000),\n+(8830007, 1482031, 1, 1, 0, 3000),\n+(8830007, 1482032, 1, 1, 0, 3000),\n+(8830007, 1492035, 1, 1, 0, 3000),\n+(8830007, 1492036, 1, 1, 0, 3000),\n+(8830007, 2000004, 1, 1, 0, 999999),\n+(8830007, 2000005, 1, 1, 0, 999999),\n+(8830007, 2000006, 1, 1, 0, 999999),\n+(8830007, 2030000, 1, 1, 0, 100000),\n+(8830007, 2050004, 1, 1, 0, 300000),\n+(8830007, 2020001, 1, 1, 0, 100000),\n+(8830007, 2020000, 1, 1, 0, 100000),\n+(8830007, 2000002, 1, 1, 0, 100000),\n+(8830007, 2020005, 1, 1, 0, 100000),\n+(8830007, 2020003, 1, 1, 0, 100000),\n+(8830007, 2020009, 1, 1, 0, 100000),\n+(8830007, 2020006, 1, 1, 0, 100000),\n+(8830007, 2020007, 1, 1, 0, 100000),\n+(8830007, 2022000, 1, 1, 0, 100000),\n+(8830007, 2020010, 1, 1, 0, 100000),\n+(8830007, 2001000, 1, 1, 0, 100000),\n+(8830007, 2001002, 1, 1, 0, 100000),\n+(8830007, 2020012, 1, 1, 0, 100000),\n+(8830007, 2020013, 1, 1, 0, 999999),\n+(8830007, 2020014, 1, 1, 0, 100000),\n+(8830007, 2020015, 1, 1, 0, 999999),\n+(8830007, 2049100, 1, 1, 0, 2000),\n+(8830007, 2049000, 1, 1, 0, 1000),\n+(8830007, 2040739, 1, 1, 0, 2000),\n+(8830007, 1072376, 1, 1, 0, 6000),\n+(8830007, 4001261, 1, 1, 0, 400000),\n+(8830007, 2330005, 1, 1, 0, 3000),\n+(8830007, 1382068, 1, 1, 0, 5000),\n+(8830007, 1402062, 1, 1, 0, 5000),\n+(8830007, 1472086, 1, 1, 0, 3000),\n+(8830007, 1442078, 1, 1, 0, 5000),\n+(8830007, 1452071, 1, 1, 0, 3000),\n+(8830007, 1492037, 1, 1, 0, 3000),\n+(8830007, 2388055, 1, 1, 0, 25000),\n+(9400748, 1002858, 1, 1, 0, 40000),\n+(9400748, 1002859, 1, 1, 0, 40000),\n+(9400748, 1002860, 1, 1, 0, 40000),\n+(9400748, 1002861, 1, 1, 0, 80000);\n \n # (dropperid, itemid, minqty, maxqty, questid, chance)\n \n@@ -20315,7 +20392,7 @@ USE `heavenms`;\n   UPDATE IGNORE temp_data SET questid=0 WHERE dropperid=2022354;\n   UPDATE IGNORE temp_data SET chance=600000 WHERE itemid=4000058;\n \n-  #update USE drops that were supposed to be ETC\n+  # update USE drops that were supposed to be ETC\n   INSERT IGNORE INTO temp_data (dropperid, itemid, minimum_quantity, maximum_quantity, questid, chance)\n     SELECT dropperid, 4001006, 1, 1, 0, 10000\n     FROM   temp_data\n@@ -20326,6 +20403,169 @@ USE `heavenms`;\n     FROM   temp_data\n     WHERE  itemid = 2011000;  #Poisonous Mushroom\n \n+  # add Giant Cake anniversary-themed drops\n+  INSERT IGNORE INTO temp_data (`dropperid`, `itemid`, `minimum_quantity`, `maximum_quantity`, `questid`, `chance`) VALUES\n+(9400606, 1012098, 1, 1, 0, 120000),\n+(9400606, 1012101, 1, 1, 0, 120000),\n+(9400606, 1012102, 1, 1, 0, 120000),\n+(9400606, 1012103, 1, 1, 0, 120000),\n+(9400606, 1032040, 1, 1, 0, 120000),\n+(9400606, 1032041, 1, 1, 0, 120000),\n+(9400606, 1032042, 1, 1, 0, 120000),\n+(9400606, 1002508, 1, 1, 0, 120000),\n+(9400606, 1002509, 1, 1, 0, 120000),\n+(9400606, 1002510, 1, 1, 0, 120000),\n+(9400606, 1002511, 1, 1, 0, 120000),\n+(9400606, 1002758, 1, 1, 0, 120000),\n+(9400606, 1102166, 1, 1, 0, 120000),\n+(9400606, 1102167, 1, 1, 0, 120000),\n+(9400606, 1102168, 1, 1, 0, 120000),\n+(9400606, 1082252, 1, 1, 0, 120000),\n+(9400606, 1092030, 1, 1, 0, 120000),\n+(9400606, 1092045, 1, 1, 0, 120000),\n+(9400606, 1092046, 1, 1, 0, 120000),\n+(9400606, 1092047, 1, 1, 0, 120000),\n+(9400606, 1302020, 1, 1, 0, 120000),\n+(9400606, 1302030, 1, 1, 0, 120000),\n+(9400606, 1302033, 1, 1, 0, 120000),\n+(9400606, 1302058, 1, 1, 0, 120000),\n+(9400606, 1302065, 1, 1, 0, 120000),\n+(9400606, 1312032, 1, 1, 0, 120000),\n+(9400606, 1322054, 1, 1, 0, 120000),\n+(9400606, 1332025, 1, 1, 0, 120000),\n+(9400606, 1332055, 1, 1, 0, 120000),\n+(9400606, 1332056, 1, 1, 0, 120000),\n+(9400606, 1372034, 1, 1, 0, 120000),\n+(9400606, 1382009, 1, 1, 0, 120000),\n+(9400606, 1382012, 1, 1, 0, 120000),\n+(9400606, 1382039, 1, 1, 0, 120000),\n+(9400606, 1402039, 1, 1, 0, 120000),\n+(9400606, 1412011, 1, 1, 0, 120000),\n+(9400606, 1412027, 1, 1, 0, 120000),\n+(9400606, 1422014, 1, 1, 0, 120000),\n+(9400606, 1422029, 1, 1, 0, 120000),\n+(9400606, 1432012, 1, 1, 0, 120000),\n+(9400606, 1432040, 1, 1, 0, 120000),\n+(9400606, 1442024, 1, 1, 0, 120000),\n+(9400606, 1442030, 1, 1, 0, 120000),\n+(9400606, 1442051, 1, 1, 0, 120000),\n+(9400606, 1452016, 1, 1, 0, 120000),\n+(9400606, 1452022, 1, 1, 0, 120000),\n+(9400606, 1452045, 1, 1, 0, 120000),\n+(9400606, 1462014, 1, 1, 0, 120000),\n+(9400606, 1462019, 1, 1, 0, 120000),\n+(9400606, 1462040, 1, 1, 0, 120000),\n+(9400606, 1472030, 1, 1, 0, 120000),\n+(9400606, 1472032, 1, 1, 0, 120000),\n+(9400606, 1472055, 1, 1, 0, 120000),\n+(9400606, 1482020, 1, 1, 0, 120000),\n+(9400606, 1482021, 1, 1, 0, 120000),\n+(9400606, 1482022, 1, 1, 0, 120000),\n+(9400606, 1492020, 1, 1, 0, 120000),\n+(9400606, 1492021, 1, 1, 0, 120000),\n+(9400606, 1492022, 1, 1, 0, 120000),\n+(9400606, 2020002, 1, 3, 0, 600000),\n+(9400606, 2010005, 1, 1, 0, 120000),\n+(9400606, 2010006, 1, 1, 0, 120000),\n+(9400606, 2012001, 1, 1, 0, 120000),\n+(9400606, 2020003, 1, 3, 0, 600000),\n+(9400606, 2020004, 1, 3, 0, 600000),\n+(9400606, 2020005, 1, 3, 0, 600000),\n+(9400606, 2020006, 1, 3, 0, 600000),\n+(9400606, 2020009, 1, 3, 0, 600000),\n+(9400606, 2020010, 1, 3, 0, 600000),\n+(9400606, 2020011, 1, 3, 0, 600000),\n+(9400606, 2020012, 1, 3, 0, 600000),\n+(9400606, 2020013, 1, 3, 0, 600000),\n+(9400606, 2020014, 1, 3, 0, 600000),\n+(9400606, 2020015, 1, 3, 0, 600000),\n+(9400606, 2020016, 1, 3, 0, 600000),\n+(9400606, 2020017, 1, 3, 0, 600000),\n+(9400606, 2020018, 1, 3, 0, 600000),\n+(9400606, 2020019, 1, 3, 0, 600000),\n+(9400606, 2020022, 1, 3, 0, 600000),\n+(9400606, 2020023, 1, 3, 0, 600000),\n+(9400606, 2020024, 1, 3, 0, 600000),\n+(9400606, 2020025, 1, 3, 0, 600000),\n+(9400606, 2020026, 1, 3, 0, 600000),\n+(9400606, 2020027, 1, 3, 0, 600000),\n+(9400606, 2020028, 1, 3, 0, 600000),\n+(9400606, 2020032, 1, 3, 0, 600000),\n+(9400606, 2022004, 1, 3, 0, 600000),\n+(9400606, 2022005, 1, 3, 0, 600000),\n+(9400606, 2022006, 1, 3, 0, 600000),\n+(9400606, 2022015, 1, 3, 0, 600000),\n+(9400606, 2022016, 1, 3, 0, 600000),\n+(9400606, 2022031, 1, 3, 0, 600000),\n+(9400606, 2022043, 1, 3, 0, 600000),\n+(9400606, 2022044, 1, 3, 0, 600000),\n+(9400606, 2022045, 1, 3, 0, 600000),\n+(9400606, 2022047, 1, 3, 0, 600000),\n+(9400606, 2022058, 1, 3, 0, 600000),\n+(9400606, 2022068, 1, 3, 0, 600000),\n+(9400606, 2022069, 1, 3, 0, 600000),\n+(9400606, 2022071, 1, 3, 0, 600000),\n+(9400606, 2022072, 1, 3, 0, 600000),\n+(9400606, 2022075, 1, 3, 0, 600000),\n+(9400606, 2022079, 1, 3, 0, 600000),\n+(9400606, 2022117, 1, 3, 0, 600000),\n+(9400606, 2022189, 1, 3, 0, 600000),\n+(9400606, 2022190, 1, 3, 0, 600000),\n+(9400606, 2022191, 1, 3, 0, 600000),\n+(9400606, 2022195, 1, 3, 0, 600000),\n+(9400606, 2022276, 1, 3, 0, 600000),\n+(9400606, 2022310, 1, 3, 0, 600000),\n+(9400606, 2040315, 2, 3, 0, 200000),\n+(9400606, 2040912, 2, 3, 0, 200000),\n+(9400606, 2041059, 2, 3, 0, 200000),\n+(9400606, 2041060, 2, 3, 0, 200000),\n+(9400606, 2041061, 2, 3, 0, 200000),\n+(9400606, 2041062, 2, 3, 0, 200000),\n+(9400606, 2043013, 2, 3, 0, 200000),\n+(9400606, 2043108, 2, 3, 0, 200000),\n+(9400606, 2043208, 2, 3, 0, 200000),\n+(9400606, 2043308, 2, 3, 0, 200000),\n+(9400606, 2043708, 2, 3, 0, 200000),\n+(9400606, 2043808, 2, 3, 0, 200000),\n+(9400606, 2044008, 2, 3, 0, 200000),\n+(9400606, 2044108, 2, 3, 0, 200000),\n+(9400606, 2044208, 2, 3, 0, 200000),\n+(9400606, 2044308, 2, 3, 0, 200000),\n+(9400606, 2044408, 2, 3, 0, 200000),\n+(9400606, 2044508, 2, 3, 0, 200000),\n+(9400606, 2044608, 2, 3, 0, 200000),\n+(9400606, 2044708, 2, 3, 0, 200000),\n+(9400606, 2044810, 2, 3, 0, 200000),\n+(9400606, 2044905, 2, 3, 0, 200000),\n+(9400606, 2100120, 1, 2, 0, 120000),\n+(9400606, 2100121, 1, 2, 0, 120000),\n+(9400606, 2101023, 1, 2, 0, 120000),\n+(9400606, 2101000, 1, 2, 0, 120000),\n+(9400606, 2101001, 1, 2, 0, 120000),\n+(9400606, 2101013, 1, 2, 0, 120000),\n+(9400606, 2101110, 1, 2, 0, 120000),\n+(9400606, 3010025, 1, 1, 0, 120000),\n+(9400606, 4003000, 7, 14, 0, 400000),\n+(9400606, 4011000, 1, 1, 0, 240000),\n+(9400606, 4011001, 1, 1, 0, 240000),\n+(9400606, 4011002, 1, 1, 0, 240000),\n+(9400606, 4011003, 1, 1, 0, 240000),\n+(9400606, 4011004, 1, 1, 0, 240000),\n+(9400606, 4011005, 1, 1, 0, 240000),\n+(9400606, 4011006, 1, 1, 0, 240000),\n+(9400606, 4011008, 1, 1, 0, 240000),\n+(9400606, 4021000, 1, 1, 0, 240000),\n+(9400606, 4021001, 1, 1, 0, 240000),\n+(9400606, 4021002, 1, 1, 0, 240000),\n+(9400606, 4021003, 1, 1, 0, 240000),\n+(9400606, 4021004, 1, 1, 0, 240000),\n+(9400606, 4021005, 1, 1, 0, 240000),\n+(9400606, 4021006, 1, 1, 0, 240000),\n+(9400606, 4021007, 1, 1, 0, 240000),\n+(9400606, 4021008, 1, 1, 0, 240000),\n+(9400606, 4031348, 1, 1, 0, 100000),\n+(9400606, 0, 25000, 30000, 0, 600000);\n+\n   CREATE TABLE IF NOT EXISTS `drop_data` (\n     `id` bigint(20) NOT NULL AUTO_INCREMENT,\n     `dropperid` int(11) NOT NULL,\n@@ -21637,7 +21877,52 @@ USE `heavenms`;\n     (2402008, 4032512, 5, 3720),\n     (2602000, 4031574, 1, 3935),\n     (2619000, 4031709, 1, 3310),\n-    (2612005, 4031798, 1, 3366);\n+    (2612005, 4031798, 1, 3366),\n+    (6741015, 4032118, 1, -1),\n+    (6742014, 2041100, 2, -1),\n+    (6742014, 2041103, 2, -1),\n+    (6742014, 2041106, 2, -1),\n+    (6742014, 2041109, 2, -1),\n+    (6742014, 2022278, 2, -1),\n+    (6742014, 2022103, 2, -1),\n+    (6742014, 2022098, 2, -1),\n+    (6742014, 2022097, 2, -1),\n+    (6742014, 2022055, 2, -1),\n+    (6742014, 2022056, 2, -1),\n+    (6742014, 2022063, 5, -1),\n+    (6742014, 2022064, 5, -1),\n+    (6742014, 2040803, 5, -1),\n+    (6742014, 2040818, 5, -1),\n+    (6742014, 2040909, 5, -1),\n+    (6742014, 2049000, 5, -1),\n+    (6742014, 2022014, 5, -1),\n+    (6742014, 2022016, 5, -1),\n+    (6742014, 2022020, 5, -1),\n+    (6742014, 2022021, 5, -1),\n+    (6742014, 2022024, 5, -1),\n+    (6742014, 2022026, 5, -1),\n+    (6742014, 2040823, 5, -1),\n+    (6742014, 2022185, 5, -1),\n+    (6742014, 1122001, 10, -1),\n+    (6742014, 1122002, 25, -1),\n+    (6742014, 1122003, 10, -1),\n+    (6742014, 1122004, 15, -1),\n+    (6742014, 1122005, 25, -1),\n+    (6742014, 1122006, 15, -1),\n+    (6742014, 1002527, 10, -1),\n+    (6742014, 1442026, 10, -1),\n+    (6742014, 1332053, 15, -1),\n+    (6742014, 1102046, 15, -1),\n+    (6742014, 1102047, 15, -1),\n+    (6742014, 1102048, 15, -1),\n+    (6742014, 1132005, 15, -1),\n+    (6742014, 1132006, 25, -1),\n+    (6742014, 1112407, 25, -1),\n+    (6742014, 1112408, 25, -1),\n+    (6742014, 1132007, 40, -1),\n+    (6742014, 1132008, 40, -1),\n+    (6742014, 1082223, 50, -1),\n+    (6742014, 1132009, 50, -1);\n \n   # adding wish tickets on APQ boxes\n   INSERT INTO `reactordrops` (`reactorid`, `itemid`, `chance`, `questid`) VALUES"}, {"sha": "2666a31d9d683bae51bb91153245a838f88d64d8", "filename": "src/client/MapleCharacter.java", "status": "modified", "additions": 9, "deletions": 6, "changes": 15, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/src/client/MapleCharacter.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/src/client/MapleCharacter.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/MapleCharacter.java?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -1476,7 +1476,7 @@ public final void pickupItem(MapleMapObject ob, int petIndex) {     // yes, one\n \t\t\n         if (ob instanceof MapleMapItem) {\n             MapleMapItem mapitem = (MapleMapItem) ob;\n-            if(System.currentTimeMillis() - mapitem.getDropTime() < 900) {\n+            if(System.currentTimeMillis() - mapitem.getDropTime() < 900 || !mapitem.canBePickedBy(this)) {\n                 client.announce(MaplePacketCreator.enableActions());\n                 return;\n             }\n@@ -5629,8 +5629,8 @@ public static String makeMapleReadable(String in) {\n         i = i.replace(\"rn\", \"Rn\");\n         i = i.replace(\"vv\", \"Vv\");\n         i = i.replace(\"VV\", \"Vv\");\n+        \n         return i;\n-\n     }\n \n     private static class MapleBuffStatValueHolder {\n@@ -7452,11 +7452,14 @@ public void updateQuest(MapleQuestStatus quest) {\n             }\n             announce(MaplePacketCreator.updateQuestInfo((short) quest.getQuest().getId(), quest.getNpc()));\n         } else if (quest.getStatus().equals(MapleQuestStatus.Status.COMPLETED)) {\n-            quest_fame += 1;\n-            if(ServerConstants.FAME_GAIN_BY_QUEST > 0)\n-                fameGainByQuest();\n+            short questid = quest.getQuest().getId();\n+            if(questid != 3637) {\n+                quest_fame += 1;\n+                if(ServerConstants.FAME_GAIN_BY_QUEST > 0)\n+                    fameGainByQuest();\n+            }\n             \n-            announce(MaplePacketCreator.completeQuest((short) quest.getQuest().getId(), quest.getCompletionTime()));\n+            announce(MaplePacketCreator.completeQuest(questid, quest.getCompletionTime()));\n         } else if (quest.getStatus().equals(MapleQuestStatus.Status.NOT_STARTED)) {\n             announce(MaplePacketCreator.updateQuest(quest, false));\n             if (quest.getQuest().getInfoNumber() > 0) {"}, {"sha": "ba4a20ff04dafeacf2d651911cda89f2bac573eb", "filename": "src/client/command/Commands.java", "status": "modified", "additions": 4, "deletions": 8, "changes": 12, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/src/client/command/Commands.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/src/client/command/Commands.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/command/Commands.java?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -1844,8 +1844,9 @@ public static boolean executeHeavenMsCommandLv3(Channel cserv, Server srv, Maple\n                         break;\n                     \n \t\tcase \"killall\":\n-\t\t\tList<MapleMapObject> monsters = player.getMap().getMapObjectsInRange(player.getPosition(), Double.POSITIVE_INFINITY, Arrays.asList(MapleMapObjectType.MONSTER));\n \t\t\tMapleMap map = player.getMap();\n+                        List<MapleMapObject> monsters = map.getMapObjectsInRange(player.getPosition(), Double.POSITIVE_INFINITY, Arrays.asList(MapleMapObjectType.MONSTER));\n+                        \n \t\t\tfor (MapleMapObject monstermo : monsters) {\n \t\t\t\tmonster = (MapleMonster) monstermo;\n \t\t\t\tif (!monster.getStats().isFriendly()) {\n@@ -2287,12 +2288,7 @@ public static boolean executeHeavenMsCommandLv4(Channel cserv, Server srv, Maple\n                     case \"itemvac\":\n                             List<MapleMapObject> list = player.getMap().getMapObjectsInRange(player.getPosition(), Double.POSITIVE_INFINITY, Arrays.asList(MapleMapObjectType.ITEM));\n                             for (MapleMapObject item : list) {\n-                                MapleMapItem mapItem = (MapleMapItem) item;\n-                                int ownerId = mapItem.getOwner();\n-                                \n-                                if(ownerId <= 0 || player.getId() == ownerId || player.isPartyMember(ownerId) || System.currentTimeMillis() - mapItem.getDropTime() >= 15 * 1000) {\n-                                    player.pickupItem(item);\n-                                }\n+                                player.pickupItem(item);\n                             }\n                         break;\n                             \n@@ -2352,7 +2348,7 @@ public static boolean executeHeavenMsCommandLv4(Channel cserv, Server srv, Maple\n                             if(newHp < 0) newHp = Integer.MAX_VALUE;\n                             \n                             monster.getStats().setHp(newHp);\n-                            monster.setHp(newHp);\n+                            monster.setStartingHp(newHp);\n                         }\n                         \n                         player.getMap().spawnMonsterOnGroundBelow(monster, player.getPosition());"}, {"sha": "dc07d326269fbdafef3b0f04cc2f855c9fdc1d70", "filename": "src/net/server/channel/handlers/PetLootHandler.java", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/src/net/server/channel/handlers/PetLootHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/src/net/server/channel/handlers/PetLootHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/PetLootHandler.java?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -39,6 +39,7 @@\n  * @author Ronan\n  */\n public final class PetLootHandler extends AbstractMaplePacketHandler {\n+    @Override\n     public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {\n         MapleCharacter chr = c.getPlayer();\n         if(System.currentTimeMillis() - chr.getPetLootCd() < ServerConstants.PET_LOOT_UPON_ATTACK) {"}, {"sha": "d462fcb1f89ce62def9670437292b0ea993d52cb", "filename": "src/scripting/event/EventInstanceManager.java", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/src/scripting/event/EventInstanceManager.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/src/scripting/event/EventInstanceManager.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/scripting/event/EventInstanceManager.java?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -660,6 +660,7 @@ public synchronized void dispose() {\n                 \n                 cancelSchedule();\n                 killCount.clear();\n+                mapIds.clear();\n                 \n                 disposeExpedition();\n                 "}, {"sha": "76282c1bae15f8ffb9c1cc9ecbea286ab797570c", "filename": "src/scripting/reactor/ReactorActionManager.java", "status": "modified", "additions": 46, "deletions": 25, "changes": 71, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/src/scripting/reactor/ReactorActionManager.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/src/scripting/reactor/ReactorActionManager.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/scripting/reactor/ReactorActionManager.java?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -28,8 +28,7 @@\n import client.inventory.MapleInventoryType;\n import constants.ItemConstants;\n import java.awt.Point;\n-import java.util.Iterator;\n-import java.util.LinkedList;\n+import java.util.ArrayList;\n import java.util.List;\n import java.util.concurrent.ScheduledFuture;\n import java.util.logging.Level;\n@@ -107,33 +106,19 @@ public void dropItems(int posX, int posY, boolean meso, int mesoChance, int minM\n     public void dropItems(boolean delayed, int posX, int posY, boolean meso, int mesoChance, final int minMeso, final int maxMeso, int minItems) {\n         if(c.getPlayer() == null) return;\n         \n-        List<ReactorDropEntry> chances = getDropChances();\n-        List<ReactorDropEntry> items = new LinkedList<>();\n-        int numItems = 0;\n-        if (meso && Math.random() < (1 / (double) mesoChance)) {\n-            items.add(new ReactorDropEntry(0, mesoChance, -1));\n-        }\n-        Iterator<ReactorDropEntry> iter = chances.iterator();\n-        while (iter.hasNext()) {\n-            ReactorDropEntry d = iter.next();\n-            if (Math.random() < (c.getPlayer().getDropRate() / (double) d.chance)) {\n-                numItems++;\n-                items.add(d);\n-            }\n-        }\n-        while (items.size() < minItems) {\n-            items.add(new ReactorDropEntry(0, mesoChance, -1));\n-            numItems++;\n-        }\n-        java.util.Collections.shuffle(items);\n+        List<ReactorDropEntry> items = generateDropList(getDropChances(), c.getPlayer().getDropRate(), meso, mesoChance, minItems);\n         \n+        if(items.size() % 2 == 0) posX -= 12;\n         final Point dropPos = new Point(posX, posY);\n-        dropPos.x -= (12 * numItems);\n         \n         if(!delayed) {\n             MapleItemInformationProvider ii = MapleItemInformationProvider.getInstance();\n             \n+            byte p = 1;\n             for (ReactorDropEntry d : items) {\n+                dropPos.x = (int) (posX + ((p % 2 == 0) ? (25 * ((p + 1) / 2)) : -(25 * (p / 2))));\n+                p++;\n+                \n                 if (d.itemId == 0) {\n                     int range = maxMeso - minMeso;\n                     int displayDrop = (int) (Math.random() * range) + minMeso;\n@@ -148,16 +133,17 @@ public void dropItems(boolean delayed, int posX, int posY, boolean meso, int mes\n                         drop = ii.randomizeStats((Equip) ii.getEquipById(d.itemId));\n                     }\n \n-                    reactor.getMap().dropFromReactor(getPlayer(), reactor, drop, dropPos, (short)d.questid);\n+                    reactor.getMap().dropFromReactor(getPlayer(), reactor, drop, dropPos, (short) d.questid);\n                 }\n-                dropPos.x += 25;\n             }\n         } else {\n             final MapleCharacter chr = client.getPlayer();\n             final MapleReactor r = reactor;\n             final List<ReactorDropEntry> dropItems = items;\n             final int worldMesoRate = client.getWorldServer().getMesoRate();\n             \n+            dropPos.x -= (12 * items.size());\n+            \n             sprayTask = TimerManager.getInstance().register(new Runnable() {\n                 @Override\n                 public void run() {\n@@ -182,7 +168,7 @@ public void run() {\n                             drop = ii.randomizeStats((Equip) ii.getEquipById(d.itemId));\n                         }\n \n-                        r.getMap().dropFromReactor(getPlayer(), r, drop, dropPos, (short)d.questid);\n+                        r.getMap().dropFromReactor(getPlayer(), r, drop, dropPos, (short) d.questid);\n                     }\n                     \n                     dropPos.x += 25;\n@@ -194,6 +180,41 @@ public void run() {\n     private List<ReactorDropEntry> getDropChances() {\n         return ReactorScriptManager.getInstance().getDrops(reactor.getId());\n     }\n+    \n+    private static List<ReactorDropEntry> generateDropList(List<ReactorDropEntry> drops, int dropRate, boolean meso, int mesoChance, int minItems) {\n+        MapleItemInformationProvider ii = MapleItemInformationProvider.getInstance();\n+        \n+        List<ReactorDropEntry> items = new ArrayList<>();\n+        List<ReactorDropEntry> questItems = new ArrayList<>();\n+        int numItems = 0;\n+        \n+        if (meso && Math.random() < (1 / (double) mesoChance)) {\n+            items.add(new ReactorDropEntry(0, mesoChance, -1));\n+        }\n+        \n+        for(ReactorDropEntry mde : drops) {\n+            if (Math.random() < (dropRate / (double) mde.chance)) {\n+                if(!ii.isQuestItem(mde.itemId)) {\n+                    items.add(mde);\n+                } else {\n+                    questItems.add(mde);\n+                }\n+                \n+                numItems++;\n+            }\n+        }\n+        \n+        while (numItems < minItems) {\n+            items.add(new ReactorDropEntry(0, mesoChance, -1));\n+            numItems++;\n+        }\n+        \n+        java.util.Collections.shuffle(items);\n+        java.util.Collections.shuffle(questItems);\n+        \n+        items.addAll(questItems);\n+        return items;\n+    }\n \n     public void spawnMonster(int id) {\n         spawnMonster(id, 1, getPosition());"}, {"sha": "3776582afd176b35b7d7b4c861595009614fc4da", "filename": "src/server/events/BalrogPQ.java", "status": "removed", "additions": 0, "deletions": 112, "changes": 112, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/f40a7fa2f862a0aec3878868f8a12fe60b797045/src/server/events/BalrogPQ.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/f40a7fa2f862a0aec3878868f8a12fe60b797045/src/server/events/BalrogPQ.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/events/BalrogPQ.java?ref=f40a7fa2f862a0aec3878868f8a12fe60b797045", "patch": "@@ -1,112 +0,0 @@\n-package server.events;\n-import client.MapleCharacter;\n-import java.util.*;\n-import server.life.MapleLifeFactory;\n-import java.awt.Point;\n-import server.maps.MapleMap;\n-import server.TimerManager;\n-\n-/**\n- *\n- * @author FateJiki\n- * @Mapid 105100300\n- */\n-public class BalrogPQ {\n-    public static final int[] EasyBalrogParts = {8830002, 8830003, 8830000};\n-    public static final int[] HardBalrogParts = {8830000, 8830001, 8830002};\n-    public static List<MapleCharacter> candidates = new ArrayList<>();\n-    public static boolean hasStarted = false;\n-    public static String partyLeader = \"undefined\";\n-    public static boolean balrogSpawned = false;\n-    public static long timeStamp = 0;\n-    public static byte channel = 1;\n-    \n-    public static void addCandidate(MapleCharacter chr){\n-        synchronized(candidates){\n-            candidates.add(chr);\n-        }\n-    }\n-\n-    public static void warpAllCandidates(){\n-        synchronized(candidates){\n-            for(MapleCharacter c : candidates){\n-                c.changeMap(105100300);\n-            }\n-        }\n-    }\n-\n-    public static boolean isFull(MapleCharacter chr){\n-        return chr.getClient().getChannelServer().getMapFactory().getMap(105100300).getCharacters().size() > 0;\n-    }\n-\n-    public static void warpIn(MapleCharacter chr){\n-        if(hasStarted){\n-            chr.changeMap(105100300);\n-        }\n-    }\n-\n-    public static void scheduleChecks(MapleMap map){\n-        final MapleMap fmap = map;\n-        TimerManager tMan = TimerManager.getInstance();\n-        tMan.schedule(new Runnable(){\n-            @Override\n-            public void run(){\n-                for(MapleCharacter chrs : fmap.getCharacters()){\n-                    chrs.changeMap(105100100);\n-                    chrs.message(\"You did not defeat the balrog in time..\");\n-                    close();\n-                }\n-            }\n-        } , 60 * 60 * 1000);\n-\n-        tMan.schedule(new Runnable(){\n-            @Override\n-            public void run(){\n-                if(fmap.getCharacters().size() <= 3){\n-                    if(fmap.getCharacters().size() > 0){\n-                        for(MapleCharacter chrs : fmap.getCharacters()){\n-                            chrs.message(\"[The Order]: What? You're down to that many mercenaries? I need to get you out of there.\");\n-                            chrs.changeMap(105100100);\n-                        }\n-                    }\n-                    fmap.killAllMonsters();\n-                    close();\n-                }\n-            }\n-        } , 60 * 1000);\n-    }\n-\n-    public static void open(MapleCharacter chr){\n-        channel = (byte)chr.getClient().getChannel();\n-        hasStarted = true;\n-        timeStamp = System.currentTimeMillis();\n-        scheduleChecks(chr.getClient().getChannelServer().getMapFactory().getMap(105100300));\n-    }\n-\n-    public static int getSecondsLeft(){ // assuming the thing lasts 60 minutes\n-        int hour = 60 * 60; // 3600 seconds = 1hr\n-        long elapsed = System.currentTimeMillis() - timeStamp;\n-        int secondsLeft = (int)(hour - (elapsed / 1000));\n-        return secondsLeft;\n-    }\n-\n-    public static void close(){\n-        hasStarted = false;\n-        balrogSpawned = false;\n-        partyLeader = \"undefined\";\n-        synchronized(candidates){\n-            candidates.clear();\n-        }\n-        timeStamp = 0;\n-    }\n-    public static void spawnBalrog(int mode, MapleCharacter chr){\n-        if(!balrogSpawned){\n-            for(int i = 0; i < HardBalrogParts.length; i++){\n-                chr.getClient().getChannelServer().getMapFactory().getMap(105100300).spawnMonsterOnGroundBelow(MapleLifeFactory.getMonster(HardBalrogParts[i]), new Point(412, 258));\n-                balrogSpawned = true;\n-            }\n-        } else {\n-            // DO NUFFIN'\n-        }\n-    }\n-}  \n\\ No newline at end of file"}, {"sha": "3cc4034333af0cb506083cad4f66d6651424c36c", "filename": "src/server/life/MapleMonster.java", "status": "modified", "additions": 92, "deletions": 40, "changes": 132, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/src/server/life/MapleMonster.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/src/server/life/MapleMonster.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/life/MapleMonster.java?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -132,8 +132,12 @@ public void setMap(MapleMap map) {\n     public int getHp() {\n         return hp.get();\n     }\n-\n-    public void setHp(int hp) {\n+    \n+    public void addHp(int hp) {\n+        this.hp.addAndGet(hp);\n+    }\n+    \n+    public void setStartingHp(int hp) {\n         this.hp.set(hp);\n     }\n \n@@ -208,28 +212,37 @@ private byte getTagBgColor() {\n         return stats.getTagBgColor();\n     }\n \n-    /**\n-     *\n-     * @param from the player that dealt the damage\n-     * @param damage\n-     */\n-    public synchronized void damage(MapleCharacter from, int damage) { // may be pointless synchronization\n-        if (!isAlive()) {\n-            return;\n-        }\n+    public void setHpZero() {     // force HP = 0\n+        applyAndGetHpDamage(Integer.MAX_VALUE, false);\n+    }\n+    \n+    public synchronized Integer applyAndGetHpDamage(int delta, boolean stayAlive) {\n         int curHp = hp.get();\n-        int trueDamage = Math.min(curHp, damage); // since magic happens otherwise B^)\n+        if (curHp <= 0) {       // this monster is already dead\n+            return null;\n+        }\n         \n-        if(ServerConstants.USE_DEBUG == true) from.dropMessage(5, \"Hitted MOB \" + this.getId() + \", OID \" + this.getObjectId());\n-        dispatchMonsterDamaged(from, trueDamage);\n-\n-        hp.set(curHp - trueDamage);\n-        if (!takenDamage.containsKey(from.getId())) {\n-            takenDamage.put(from.getId(), new AtomicInteger(trueDamage));\n+        if(delta >= 0) {\n+            if(stayAlive) curHp--;\n+            int trueDamage = Math.min(curHp, delta);\n+            \n+            hp.addAndGet(-trueDamage);\n+            return trueDamage;\n         } else {\n-            takenDamage.get(from.getId()).addAndGet(trueDamage);\n+            int trueHeal = -delta;\n+            int hp2Heal = curHp + trueHeal;\n+            int maxHp = getMaxHp();\n+            \n+            if (hp2Heal > maxHp) {\n+                trueHeal -= (hp2Heal - maxHp);\n+            }\n+            \n+            hp.addAndGet(trueHeal);\n+            return trueHeal;\n         }\n-\n+    }\n+    \n+    public void broadcastMobHpBar(MapleCharacter from) {\n         if (hasBossHPBar()) {\n             from.setPlayerAggro(this.hashCode());\n             from.getMap().broadcastBossHpMessage(this, this.hashCode(), makeBossHPBarPacket(), getPosition());\n@@ -248,26 +261,45 @@ public synchronized void damage(MapleCharacter from, int damage) { // may be poi\n             }\n         }\n     }\n+    \n+    /**\n+     *\n+     * @param from the player that dealt the damage\n+     * @param damage\n+     */\n+    public synchronized void damage(MapleCharacter from, int damage, boolean stayAlive) {\n+        Integer trueDamage = applyAndGetHpDamage(damage, stayAlive);\n+        if (trueDamage == null) {\n+            return;\n+        }\n+        \n+        if(ServerConstants.USE_DEBUG) from.dropMessage(5, \"Hitted MOB \" + this.getId() + \", OID \" + this.getObjectId());\n+        dispatchMonsterDamaged(from, trueDamage);\n+\n+        if (!takenDamage.containsKey(from.getId())) {\n+            takenDamage.put(from.getId(), new AtomicInteger(trueDamage));\n+        } else {\n+            takenDamage.get(from.getId()).addAndGet(trueDamage);\n+        }\n+\n+        broadcastMobHpBar(from);\n+    }\n \n     public void heal(int hp, int mp) {\n-        int hpHealed = hp;\n-        int hp2Heal = getHp() + hp;\n-        int mp2Heal = getMp() + mp;\n+        Integer hpHealed = applyAndGetHpDamage(-hp, false);\n+        if(hpHealed == null) return;\n         \n-        int maxHp = getMaxHp();\n+        int mp2Heal = getMp() + mp;\n         int maxMp = getMaxMp();\n-        if (hp2Heal >= maxHp) {\n-            hpHealed = hp2Heal - maxHp;\n-            hp2Heal = maxHp;\n-        }\n         if (mp2Heal >= maxMp) {\n             mp2Heal = maxMp;\n         }\n-        setHp(hp2Heal);\n         setMp(mp2Heal);\n-        getMap().broadcastMessage(MaplePacketCreator.healMonster(getObjectId(), hp));\n+        \n+        if(hp > 0) getMap().broadcastMessage(MaplePacketCreator.healMonster(getObjectId(), hp));\n         \n         maxHpPlusHeal.addAndGet(hpHealed);\n+        dispatchMonsterHealed(hpHealed);\n     }\n \n     public boolean isAttackedBy(MapleCharacter chr) {\n@@ -471,7 +503,25 @@ public void run() {\n                             reviveMap.spawnMonster(mob);\n \n                             if(mob.getId() >= 8810010 && mob.getId() <= 8810017 && reviveMap.isHorntailDefeated()) {\n-                                for(int i = 8810018; i >= 8810010; i--)\n+                                boolean htKilled = false;\n+                                MapleMonster ht = reviveMap.getMonsterById(8810018);\n+                                \n+                                if(ht != null) {\n+                                    ht.lockMonster();\n+                                    try {\n+                                        htKilled = ht.isAlive();\n+                                        ht.setHpZero();\n+                                    } finally {\n+                                        ht.unlockMonster();\n+                                    }\n+                                    \n+                                    if(htKilled) {\n+                                        reviveMap.killMonster(ht, killer, true);\n+                                        ht.broadcastMobHpBar(killer);\n+                                    }\n+                                }\n+                                \n+                                for(int i = 8810017; i >= 8810010; i--)\n                                     reviveMap.killMonster(reviveMap.getMonsterById(i), killer, true);\n                             }\n                         }\n@@ -506,6 +556,12 @@ private void dispatchMonsterDamaged(MapleCharacter from, int trueDmg) {\n             listener.monsterDamaged(from, trueDmg);\n         }\n     }\n+    \n+    private void dispatchMonsterHealed(int trueHeal) {\n+        for (MonsterListener listener : listeners.toArray(new MonsterListener[listeners.size()])) {\n+            listener.monsterHealed(trueHeal);\n+        }\n+    }\n \n     // should only really be used to determine drop owner\n     private int getHighestDamagerId() {\n@@ -837,10 +893,7 @@ public void run() {\n             final Skill skill = SkillFactory.getSkill(status.getSkill().getId());\n             final byte level = from.getSkillLevel(skill);\n             final int damage = (int) ((from.getStr() + from.getLuk()) * (1.5 + (level * 0.05)) * skill.getEffect(level).getDamage());\n-            /*if (getHp() - damage <= 1)  { make hp 1 betch\n-             damage = getHp() - (getHp() - 1);\n-             }*/\n-\n+            \n             status.setValue(MonsterStatus.NINJA_AMBUSH, Integer.valueOf(damage));\n             animationTime = broadcastStatusEffect(status);\n             status.setDamageSchedule(timerManager.register(new DamageTask(damage, from, status, cancelTask, 2), 1000, 1000));\n@@ -1092,20 +1145,19 @@ private DamageTask(int dealDamage, MapleCharacter chr, MonsterStatusEffect statu\n         @Override\n         public void run() {\n             int curHp = hp.get();\n-            if(curHp <= 0) return;\n+            if(curHp <= 1) return;\n             \n             int damage = dealDamage;\n             if (damage >= curHp) {\n                 damage = curHp - 1;\n                 if (type == 1 || type == 2) {\n-                    map.broadcastMessage(MaplePacketCreator.damageMonster(getObjectId(), damage), getPosition());\n                     cancelTask.run();\n                     status.getCancelTask().cancel(false);\n                 }\n             }\n-            if (curHp > 1 && damage > 0) {\n-                damage(chr, damage);\n-                if (type == 1) {\n+            if (damage > 0) {\n+                damage(chr, damage, true);\n+                if (type == 1 || type == 2) {\n                     map.broadcastMessage(MaplePacketCreator.damageMonster(getObjectId(), damage), getPosition());\n                 }\n             }"}, {"sha": "f16f2103c389de23a95184de05dee507affeb32c", "filename": "src/server/life/MonsterListener.java", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/src/server/life/MonsterListener.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/src/server/life/MonsterListener.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/life/MonsterListener.java?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -5,4 +5,5 @@\n     \n     public void monsterKilled(int aniTime);\n     public void monsterDamaged(MapleCharacter from, int trueDmg);\n+    public void monsterHealed(int trueHeal);\n }"}, {"sha": "caa8b85a42e9f8aa1087ae9560a5acd9a32dfae1", "filename": "src/server/life/SpawnPoint.java", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/src/server/life/SpawnPoint.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/src/server/life/SpawnPoint.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/life/SpawnPoint.java?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -93,6 +93,9 @@ public void monsterKilled(int aniTime) {\n             \n             @Override\n             public void monsterDamaged(MapleCharacter from, int trueDmg) {}\n+            \n+            @Override\n+            public void monsterHealed(int trueHeal) {}\n         });\n         if (mobTime == 0) {\n             nextPossibleSpawn = System.currentTimeMillis() + mobInterval;"}, {"sha": "fd6173105a06cb94eca97848eb2ccb5dc9b682ac", "filename": "src/server/maps/MapleMap.java", "status": "modified", "additions": 66, "deletions": 39, "changes": 105, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/src/server/maps/MapleMap.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/src/server/maps/MapleMap.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/maps/MapleMap.java?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -254,6 +254,7 @@ public int getReturnMapId() {\n     }\n \n     public void setReactorState() {\n+        chrRLock.lock();\n         objectRLock.lock();\n         try {\n             for (MapleMapObject o : mapobjects.values()) {\n@@ -272,6 +273,7 @@ public void setReactorState() {\n             }\n         } finally {\n             objectRLock.unlock();\n+            chrRLock.unlock();\n         }\n     }\n     \n@@ -564,7 +566,7 @@ private static void sortDropEntries(List<MonsterDropEntry> from, List<MonsterDro\n         MapleItemInformationProvider ii = MapleItemInformationProvider.getInstance();\n         \n         for(MonsterDropEntry mde : from) {\n-            if(mde.itemId == 0 || !ii.isQuestItem(mde.itemId)) {\n+            if(!ii.isQuestItem(mde.itemId)) {\n                 item.add(mde);\n             } else {\n                 quest.add(mde);\n@@ -585,9 +587,9 @@ private byte dropItemsFromMonsterOnMap(List<MonsterDropEntry> dropEntry, Point p\n         for (final MonsterDropEntry de : dropEntry) {\n             if (Randomizer.nextInt(999999) < (long) de.chance * chRate) {\n                 if (droptype == 3) {\n-                    pos.x = (int) (mobpos + (d % 2 == 0 ? (40 * (d + 1) / 2) : -(40 * (d / 2))));\n+                    pos.x = (int) (mobpos + ((d % 2 == 0) ? (40 * ((d + 1) / 2)) : -(40 * (d / 2))));\n                 } else {\n-                    pos.x = (int) (mobpos + ((d % 2 == 0) ? (25 * (d + 1) / 2) : -(25 * (d / 2))));\n+                    pos.x = (int) (mobpos + ((d % 2 == 0) ? (25 * ((d + 1) / 2)) : -(25 * (d / 2))));\n                 }\n                 if (de.itemId == 0) { // meso\n                     int mesos = Randomizer.nextInt(de.Maximum - de.Minimum) + de.Minimum;\n@@ -1014,21 +1016,10 @@ public boolean damageMonster(final MapleCharacter chr, final MapleMonster monste\n                 */\n                 \n                 if (damage > 0) {\n-                    monster.damage(chr, damage);\n+                    monster.damage(chr, damage, false);\n                     if (!monster.isAlive()) {  // monster just died\n                         killed = true;\n                     }\n-                } else if (monster.getId() >= 8810002 && monster.getId() <= 8810009) {\n-                    for (MapleMapObject object : chr.getMap().getMapObjects()) {\n-                        MapleMonster mons = chr.getMap().getMonsterByOid(object.getObjectId());\n-                        if (mons != null) {\n-                            if (monster.isAlive() && (monster.getId() >= 8810010 && monster.getId() <= 8810017)) {\n-                                if (mons.getId() == 8810018) {\n-                                    killMonster(mons, chr, true);\n-                                }\n-                            }\n-                        }\n-                    }\n                 }\n             } finally {\n                 monster.unlockMonster();\n@@ -1055,6 +1046,14 @@ public boolean damageMonster(final MapleCharacter chr, final MapleMonster monste\n         return mobs;\n     }\n     \n+    public void broadcastBalrogVictory(String leaderName) {\n+        for (Channel cserv : Server.getInstance().getWorld(world).getChannels()) {\n+            for (MapleCharacter player : cserv.getPlayerStorage().getAllCharacters()) {\n+                player.dropMessage(6, \"[VICTORY] \" + leaderName + \"'s party has successfully defeated the Balrog! Praise to them, they finished with \" + countAlivePlayers() + \" players alive.\");\n+            }\n+        }\n+    }\n+    \n     public void broadcastHorntailVictory() {\n         for (Channel cserv : Server.getInstance().getWorld(world).getChannels()) {\n             for (MapleCharacter player : cserv.getPlayerStorage().getAllCharacters()) {\n@@ -1088,8 +1087,9 @@ public void killMonster(final MapleMonster monster, final MapleCharacter chr, fi\n         \n         if (chr == null) {\n             spawnedMonstersOnMap.decrementAndGet();\n-            monster.setHp(0);\n+            monster.setHpZero();\n             removeMapObject(monster);\n+            \n             monster.dispatchMonsterKilled(false);\n             broadcastMessage(MaplePacketCreator.killMonster(monster.getObjectId(), animation), monster.getPosition());\n             return;\n@@ -1118,10 +1118,9 @@ public void killMonster(final MapleMonster monster, final MapleCharacter chr, fi\n         }\n         \n         spawnedMonstersOnMap.decrementAndGet();\n-        monster.setHp(0);\n-        //if (monster.getStats().selfDestruction() == null) {//FUU BOMBS D:\n+        monster.setHpZero();\n         removeMapObject(monster);\n-        //}\n+        \n         if (monster.getCP() > 0 && chr.getCarnival() != null) {\n             chr.getCarnivalParty().addCP(chr, monster.getCP());\n             chr.announce(MaplePacketCreator.updateCP(chr.getCP(), chr.getObtainedCP()));\n@@ -1141,8 +1140,10 @@ public void killMonster(final MapleMonster monster, final MapleCharacter chr, fi\n                 }\n             }\n             if (makeZakReal) {\n+                MapleMap map = chr.getMap();\n+                \n                 for (MapleMapObject object : objects) {\n-                    MapleMonster mons = chr.getMap().getMonsterByOid(object.getObjectId());\n+                    MapleMonster mons = map.getMonsterByOid(object.getObjectId());\n                     if (mons != null) {\n                         if (mons.getId() == 8800000) {\n                             makeMonsterReal(mons);\n@@ -1178,12 +1179,12 @@ public void killFriendlies(MapleMonster mob) {\n         this.killMonster(mob, (MapleCharacter) getPlayers().get(0), false);\n     }\n \n-    public void killMonster(int monsId) {\n+    public void killMonster(int mobId) {\n         List<MapleMapObject> mmoL = new LinkedList(getMapObjects());\n         \n         for (MapleMapObject mmo : mmoL) {\n             if (mmo instanceof MapleMonster) {\n-                if (((MapleMonster) mmo).getId() == monsId) {\n+                if (((MapleMonster) mmo).getId() == mobId) {\n                     this.killMonster((MapleMonster) mmo, (MapleCharacter) getPlayers().get(0), false);\n                 }\n             }\n@@ -1205,9 +1206,12 @@ public void softKillAllMonsters() {\n             if (monster.getStats().isFriendly()) {\n                 continue;\n             }\n+            \n             spawnedMonstersOnMap.decrementAndGet();\n-            monster.setHp(0);\n+            monster.setHpZero();\n             removeMapObject(monster);\n+            \n+            monster.dispatchMonsterKilled(false);\n         }\n     }\n \n@@ -1415,10 +1419,10 @@ public void updateMonsterController(MapleMonster monster) {\n         }\n     }\n \n-    public Collection<MapleMapObject> getMapObjects() {\n+    public List<MapleMapObject> getMapObjects() {\n         objectRLock.lock();\n         try {\n-            return Collections.unmodifiableCollection(mapobjects.values());\n+            return new LinkedList(mapobjects.values());\n         }\n         finally {\n             objectRLock.unlock();\n@@ -1446,7 +1450,8 @@ public boolean containsNPC(int npcid) {\n     \n     public void destroyNPC(int npcid) {\n         List<MapleMapObject> npcs = getMapObjectsInRange(new Point(0, 0), Double.POSITIVE_INFINITY, Arrays.asList(MapleMapObjectType.NPC));\n-        \n+\n+        chrRLock.lock();\n         objectWLock.lock();\n         try {\n             for (MapleMapObject obj : npcs) {\n@@ -1459,6 +1464,7 @@ public void destroyNPC(int npcid) {\n             }\n         } finally {\n             objectWLock.unlock();\n+            chrRLock.unlock();\n         }\n     }\n \n@@ -1582,7 +1588,7 @@ public void run() {\n                     \n                     if (m.getId() == 9300061) {\n                         MapleMap.this.riceCakes++;\n-                        MapleMap.this.broadcastMessage(MaplePacketCreator.serverNotice(6, \"The Moon Bunny made rice cake number \" + (MapleMap.this.riceCakes)));\n+                        MapleMap.this.broadcastMessage(MaplePacketCreator.serverNotice(6, \"The Moon Bunny made rice cake number \" + (MapleMap.this.riceCakes) + \".\"));\n                     }\n                     \n                     dropFromFriendlyMonster(chr, m);\n@@ -3240,11 +3246,10 @@ public void setFieldType(int fieldType) {\n     }\n \n     public void clearDrops(MapleCharacter player) {\n-        List<MapleMapObject> items = player.getMap().getMapObjectsInRange(player.getPosition(), Double.POSITIVE_INFINITY, Arrays.asList(MapleMapObjectType.ITEM));\n-        for (MapleMapObject i : items) {\n+        for (MapleMapObject i : getMapObjectsInRange(player.getPosition(), Double.POSITIVE_INFINITY, Arrays.asList(MapleMapObjectType.ITEM))) {\n             droppedItemCount.decrementAndGet();\n-            player.getMap().removeMapObject(i);\n-            player.getMap().broadcastMessage(MaplePacketCreator.removeItemFromMap(i.getObjectId(), 0, player.getId()));\n+            removeMapObject(i);\n+            this.broadcastMessage(MaplePacketCreator.removeItemFromMap(i.getObjectId(), 0, player.getId()));\n         }\n     }\n \n@@ -3436,6 +3441,7 @@ public void timeMob(int id, String msg) {\n     }\n \n     public void toggleHiddenNPC(int id) {\n+        chrRLock.lock();\n         objectRLock.lock();\n         try {\n             for (MapleMapObject obj : mapobjects.values()) {\n@@ -3452,6 +3458,7 @@ public void toggleHiddenNPC(int id) {\n             }\n         } finally {\n             objectRLock.unlock();\n+            chrRLock.unlock();\n         }\n     }\n     \n@@ -3531,23 +3538,43 @@ public void spawnHorntailOnGroundBelow(final Point targetPoint) {   // ayy lmao\n         TimerManager.getInstance().schedule(new Runnable() {\n             @Override\n             public void run() {\n-                for (int x = 8810002; x <= 8810009; x++) {\n-                    spawnMonsterOnGroundBelow(MapleLifeFactory.getMonster(x), targetPoint);\n-                }\n+                final MapleMonster ht = MapleLifeFactory.getMonster(8810018);\n+                ht.addListener(new MonsterListener() {\n+                    @Override\n+                    public void monsterKilled(int aniTime) {}\n+\n+                    @Override\n+                    public void monsterDamaged(MapleCharacter from, int trueDmg) {\n+                        ht.addHp(trueDmg);\n+                    }\n \n-                spawnMonsterOnGroundBelow(MapleLifeFactory.getMonster(8810018), targetPoint);\n+                    @Override\n+                    public void monsterHealed(int trueHeal) {\n+                        ht.addHp(-trueHeal);\n+                    }\n+                });\n+                spawnMonsterOnGroundBelow(ht, targetPoint);\n                 \n-                final MapleMonster ht = getMonsterById(8810018);\n-                for(int mobId = 8810002; mobId <= 8810009; mobId++) {\n-                    getMonsterById(mobId).addListener(new MonsterListener() {\n+                for (int x = 8810002; x <= 8810009; x++) {\n+                    MapleMonster m = MapleLifeFactory.getMonster(x);\n+                    \n+                    m.addListener(new MonsterListener() {\n                         @Override\n                         public void monsterKilled(int aniTime) {}\n \n                         @Override\n                         public void monsterDamaged(MapleCharacter from, int trueDmg) {\n-                            ht.damage(from, trueDmg);\n+                            ht.applyAndGetHpDamage(trueDmg, true);\n+                            ht.broadcastMobHpBar(from);\n+                        }\n+\n+                        @Override\n+                        public void monsterHealed(int trueHeal) {\n+                            ht.addHp(trueHeal);\n                         }\n                     });\n+                    \n+                    spawnMonsterOnGroundBelow(m, targetPoint);\n                 }\n             }\n "}, {"sha": "a3356eed8141864eb200d1177cfaa692882810b3", "filename": "src/server/maps/MapleMapFactory.java", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/src/server/maps/MapleMapFactory.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/src/server/maps/MapleMapFactory.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/maps/MapleMapFactory.java?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -379,13 +379,21 @@ private String getMapStringName(int mapid) {\n         } else if (mapid >= 677000000 && mapid < 677100000) {\n             builder.append(\"Episode1GL\");\n         } else if (mapid >= 670000000 && mapid < 682000000) {\n-            builder.append(\"weddingGL\");\n+            if((mapid >= 674030000 && mapid < 674040000) || (mapid >= 680100000 && mapid < 680200000)) {\n+                builder.append(\"etc\");\n+            } else {\n+                builder.append(\"weddingGL\");\n+            }\n         } else if (mapid >= 682000000 && mapid < 683000000) {\n             builder.append(\"HalloweenGL\");\n         } else if (mapid >= 683000000 && mapid < 684000000) {\n             builder.append(\"event\");\n         } else if (mapid >= 800000000 && mapid < 900000000) {\n-            builder.append(\"jp\");\n+            if((mapid >= 889100000 && mapid < 889200000)) {\n+                builder.append(\"etc\");\n+            } else {\n+                builder.append(\"jp\");\n+            }\n         } else {\n             builder.append(\"etc\");\n         }"}, {"sha": "01fa8cce23cb75e5cd6cec8d23b9ed33edf0000f", "filename": "src/server/maps/MapleMapItem.java", "status": "modified", "additions": 31, "deletions": 6, "changes": 37, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/src/server/maps/MapleMapItem.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/src/server/maps/MapleMapItem.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/server/maps/MapleMapItem.java?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -33,7 +33,7 @@\n     protected MapleClient ownerClient;\n     protected Item item;\n     protected MapleMapObject dropper;\n-    protected int character_ownerid, meso, questid = -1;\n+    protected int character_ownerid, party_ownerid, meso, questid = -1;\n     protected byte type;\n     protected boolean pickedUp = false, playerDrop;\n     protected long dropTime;\n@@ -43,7 +43,8 @@ public MapleMapItem(Item item, Point position, MapleMapObject dropper, MapleChar\n \tsetPosition(position);\n \tthis.item = item;\n \tthis.dropper = dropper;\n-\tthis.character_ownerid = owner.getId();\n+        this.character_ownerid = owner.getId();\n+        this.party_ownerid = owner.getPartyId();\n         this.ownerClient = owner.getClient();\n \tthis.meso = 0;\n \tthis.type = type;\n@@ -54,7 +55,8 @@ public MapleMapItem(Item item, Point position, MapleMapObject dropper, MapleChar\n \tsetPosition(position);\n \tthis.item = item;\n \tthis.dropper = dropper;\n-\tthis.character_ownerid = owner.getParty() == null ? owner.getId() : owner.getPartyId();\n+        this.character_ownerid = owner.getId();\n+        this.party_ownerid = owner.getPartyId();\n \tthis.ownerClient = owner.getClient();\n         this.meso = 0;\n \tthis.type = type;\n@@ -66,8 +68,9 @@ public MapleMapItem(int meso, Point position, MapleMapObject dropper, MapleChara\n \tsetPosition(position);\n \tthis.item = null;\n \tthis.dropper = dropper;\n-\tthis.character_ownerid = owner.getParty() == null ? owner.getId() : owner.getPartyId();\n-\tthis.ownerClient = owner.getClient();\n+\tthis.character_ownerid = owner.getId();\n+        this.party_ownerid = owner.getPartyId();\n+        this.ownerClient = owner.getClient();\n         this.meso = meso;\n \tthis.type = type;\n \tthis.playerDrop = playerDrop;\n@@ -90,10 +93,32 @@ public final MapleMapObject getDropper() {\n \treturn dropper;\n     }\n \n-    public final int getOwner() {\n+    public final int getOwnerId() {\n \treturn character_ownerid;\n     }\n     \n+    public final boolean canBePickedBy(MapleCharacter chr) {\n+        if (character_ownerid <= 0) return true;\n+        \n+        if (party_ownerid == -1) {\n+            if (chr.getId() == character_ownerid) {\n+                return true;\n+            } else if (chr.isPartyMember(character_ownerid)) {\n+                party_ownerid = chr.getPartyId();\n+                return true;\n+            }\n+        } else {\n+            if (chr.getPartyId() == party_ownerid) {\n+                return true;\n+            } else if (chr.getId() == character_ownerid) {\n+                party_ownerid = chr.getPartyId();\n+                return true;\n+            }\n+        }\n+        \n+        return System.currentTimeMillis() - dropTime >= 15 * 1000;\n+    }\n+    \n     public final MapleClient getOwnerClient() {\n \treturn (ownerClient.isLoggedIn() && !ownerClient.getPlayer().isAwayFromWorld()) ? ownerClient : null;\n     }"}, {"sha": "d1dbe88c9b1bbb5c2146ae385e9b1ed2f89e3c73", "filename": "src/tools/MaplePacketCreator.java", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/src/tools/MaplePacketCreator.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/src/tools/MaplePacketCreator.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/tools/MaplePacketCreator.java?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -1711,10 +1711,10 @@ public int compare(Pair<MapleStat, Integer> o1, Pair<MapleStat, Integer> o2) {\n                 mplew.writeInt(drop.getObjectId());\n                 mplew.writeBool(drop.getMeso() > 0); // 1 mesos, 0 item, 2 and above all item meso bag,\n                 mplew.writeInt(drop.getItemId()); // drop object ID\n-                mplew.writeInt(drop.getOwner()); // owner charid/paryid :)\n+                mplew.writeInt(drop.getOwnerId()); // owner charid/partyid :)\n                 mplew.write(drop.getDropType()); // 0 = timeout for non-owner, 1 = timeout for non-owner's party, 2 = FFA, 3 = explosive/FFA\n                 mplew.writePos(dropto);\n-                mplew.writeInt(drop.getDropType() == 0 ? drop.getOwner() : 0); //test\n+                mplew.writeInt(drop.getDropType() == 0 ? drop.getOwnerId() : 0); //test\n \n                 if (mod != 2) {\n                         mplew.writePos(dropfrom);\n@@ -6668,12 +6668,14 @@ private static String getRightPaddedStr(String in, char padchar, int length) {\n                 mplew.writeInt(mob.getObjectId());\n                 mplew.write(1); // direction ?\n                 mplew.writeInt(damage);\n-                int remainingHp = mob.getHp() - damage;\n-                if (remainingHp <= 1) {\n-                        remainingHp = 0;\n-                        mob.getMap().removeMapObject(mob);\n+                \n+                mob.applyAndGetHpDamage(damage, false);\n+                int remainingHp = mob.getHp();\n+                if(remainingHp <= 0) {\n+                    remainingHp = 0;\n+                    mob.getMap().removeMapObject(mob);\n                 }\n-                mob.setHp(remainingHp);\n+                \n                 mplew.writeInt(remainingHp);\n                 mplew.writeInt(mob.getMaxHp());\n                 return mplew.getPacket();"}, {"sha": "5d8309d3fc4fa34a97c3c5a0bc16d6b3eb7d0699", "filename": "wz/Item.wz/Cash/0521.img.xml", "status": "modified", "additions": 30, "deletions": 30, "changes": 60, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Item.wz/Cash/0521.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Item.wz/Cash/0521.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Item.wz/Cash/0521.img.xml?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -22,7 +22,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"expR\" value=\"2\"/>\n     </imgdir>\n   </imgdir>\n@@ -46,7 +46,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"expR\" value=\"1\"/>\n     </imgdir>\n   </imgdir>\n@@ -70,7 +70,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"expR\" value=\"1\"/>\n     </imgdir>\n   </imgdir>\n@@ -94,7 +94,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"expR\" value=\"1\"/>\n     </imgdir>\n   </imgdir>\n@@ -118,7 +118,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"expR\" value=\"1\"/>\n     </imgdir>\n   </imgdir>\n@@ -142,7 +142,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"expR\" value=\"1\"/>\n     </imgdir>\n   </imgdir>\n@@ -163,7 +163,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"expR\" value=\"1\"/>\n     </imgdir>\n   </imgdir>\n@@ -184,7 +184,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"expR\" value=\"1\"/>\n     </imgdir>\n   </imgdir>\n@@ -205,7 +205,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"expR\" value=\"1\"/>\n     </imgdir>\n   </imgdir>\n@@ -226,7 +226,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"expR\" value=\"1\"/>\n     </imgdir>\n   </imgdir>\n@@ -247,7 +247,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"expR\" value=\"1\"/>\n     </imgdir>\n   </imgdir>\n@@ -273,7 +273,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"expR\" value=\"2\"/>\n     </imgdir>\n   </imgdir>\n@@ -299,7 +299,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"expR\" value=\"2\"/>\n     </imgdir>\n   </imgdir>\n@@ -325,7 +325,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"expR\" value=\"2\"/>\n     </imgdir>\n   </imgdir>\n@@ -351,7 +351,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"expR\" value=\"2\"/>\n     </imgdir>\n   </imgdir>\n@@ -377,7 +377,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"expR\" value=\"2\"/>\n     </imgdir>\n   </imgdir>\n@@ -401,7 +401,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"expR\" value=\"1\"/>\n     </imgdir>\n   </imgdir>\n@@ -422,7 +422,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"expR\" value=\"1\"/>\n     </imgdir>\n   </imgdir>\n@@ -448,7 +448,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"expR\" value=\"2\"/>\n     </imgdir>\n   </imgdir>\n@@ -472,7 +472,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"expR\" value=\"1\"/>\n     </imgdir>\n   </imgdir>\n@@ -493,7 +493,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"expR\" value=\"1\"/>\n     </imgdir>\n   </imgdir>\n@@ -519,7 +519,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"expR\" value=\"2\"/>\n     </imgdir>\n   </imgdir>\n@@ -543,7 +543,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"expR\" value=\"1\"/>\n     </imgdir>\n   </imgdir>\n@@ -564,7 +564,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"expR\" value=\"1\"/>\n     </imgdir>\n   </imgdir>\n@@ -590,7 +590,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"expR\" value=\"2\"/>\n     </imgdir>\n   </imgdir>\n@@ -616,7 +616,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"expR\" value=\"3\"/>\n     </imgdir>\n   </imgdir>\n@@ -642,7 +642,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"expR\" value=\"3\"/>\n     </imgdir>\n   </imgdir>\n@@ -668,7 +668,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"expR\" value=\"3\"/>\n     </imgdir>\n   </imgdir>\n@@ -695,7 +695,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"expR\" value=\"3\"/>\n     </imgdir>\n   </imgdir>\n@@ -722,7 +722,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"172800000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"expR\" value=\"4\"/>\n     </imgdir>\n   </imgdir>"}, {"sha": "7647112844f2361de85d83bf3b96fcf13916d5d3", "filename": "wz/Item.wz/Cash/0536.img.xml", "status": "modified", "additions": 10, "deletions": 10, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Item.wz/Cash/0536.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Item.wz/Cash/0536.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Item.wz/Cash/0536.img.xml?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -22,7 +22,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"drpR\" value=\"1\"/>\n     </imgdir>\n   </imgdir>\n@@ -48,7 +48,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"drpR\" value=\"2\"/>\n     </imgdir>\n   </imgdir>\n@@ -74,7 +74,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"drpR\" value=\"2\"/>\n     </imgdir>\n   </imgdir>\n@@ -100,7 +100,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"drpR\" value=\"2\"/>\n     </imgdir>\n   </imgdir>\n@@ -126,7 +126,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"drpR\" value=\"2\"/>\n     </imgdir>\n   </imgdir>\n@@ -152,7 +152,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"drpR\" value=\"2\"/>\n     </imgdir>\n   </imgdir>\n@@ -178,7 +178,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"drpR\" value=\"2\"/>\n     </imgdir>\n   </imgdir>\n@@ -204,7 +204,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"drpR\" value=\"2\"/>\n     </imgdir>\n   </imgdir>\n@@ -230,7 +230,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"drpR\" value=\"2\"/>\n     </imgdir>\n   </imgdir>\n@@ -256,7 +256,7 @@\n       </imgdir>\n     </imgdir>\n     <imgdir name=\"spec\">\n-      <int name=\"time\" value=\"2100000\"/>\n+      <int name=\"time\" value=\"2147483647\"/>\n       <int name=\"drpR\" value=\"3\"/>\n     </imgdir>\n   </imgdir>"}, {"sha": "12e942053d34b73c82081dc20b50b0a10e1c4997", "filename": "wz/Item.wz/Etc/0403.img.xml", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Item.wz/Etc/0403.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Item.wz/Etc/0403.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Item.wz/Etc/0403.img.xml?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -2769,6 +2769,7 @@\n         <vector name=\"origin\" x=\"-9\" y=\"31\"/>\n       </canvas>\n       <int name=\"price\" value=\"1\"/>\n+      <int name=\"quest\" value=\"1\"/>\n     </imgdir>\n   </imgdir>\n   <imgdir name=\"04031210\">\n@@ -11404,6 +11405,7 @@\n         <vector name=\"origin\" x=\"-1\" y=\"32\"/>\n       </canvas>\n       <int name=\"price\" value=\"1\"/>\n+      <int name=\"pquest\" value=\"1\"/>\n     </imgdir>\n   </imgdir>\n   <imgdir name=\"04032119\">"}, {"sha": "59c270b1c4f91f0913228db4dace2d489066f5b6", "filename": "wz/Map.wz/Map/Map1/102000000.img.xml", "status": "modified", "additions": 9113, "deletions": 9126, "changes": 18239, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Map.wz/Map/Map1/102000000.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Map.wz/Map/Map1/102000000.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Map.wz/Map/Map1/102000000.img.xml?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8"}, {"sha": "ef18f2b7914a2caa01cd372a138c7e1aa4c3c73a", "filename": "wz/Map.wz/Map/Map2/251000000.img.xml", "status": "modified", "additions": 3049, "deletions": 3079, "changes": 6128, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Map.wz/Map/Map2/251000000.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Map.wz/Map/Map2/251000000.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Map.wz/Map/Map2/251000000.img.xml?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8"}, {"sha": "d990285740c15a1e92c69e5dfc7380da73d46d53", "filename": "wz/Map.wz/Map/Map6/674030000.img.xml", "status": "modified", "additions": 7274, "deletions": 6747, "changes": 14021, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Map.wz/Map/Map6/674030000.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Map.wz/Map/Map6/674030000.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Map.wz/Map/Map6/674030000.img.xml?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8"}, {"sha": "da1254d0d4e410ef385422380c9e63cc39c6b448", "filename": "wz/Mob.wz/9400589.img.xml", "status": "modified", "additions": 17, "deletions": 14, "changes": 31, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Mob.wz/9400589.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Mob.wz/9400589.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Mob.wz/9400589.img.xml?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -2,20 +2,20 @@\n <imgdir name=\"9400589.img\">\n   <imgdir name=\"info\">\n     <int name=\"bodyAttack\" value=\"1\"/>\n-    <int name=\"level\" value=\"30\"/>\n-    <int name=\"maxHP\" value=\"400000\"/>\n-    <int name=\"maxMP\" value=\"200\"/>\n+    <int name=\"level\" value=\"180\"/>\n+    <int name=\"maxHP\" value=\"17000000\"/>\n+    <int name=\"maxMP\" value=\"2000\"/>\n     <int name=\"speed\" value=\"-10\"/>\n-    <int name=\"PADamage\" value=\"150\"/>\n-    <int name=\"PDDamage\" value=\"500\"/>\n-    <int name=\"MADamage\" value=\"20\"/>\n-    <int name=\"MDDamage\" value=\"450\"/>\n-    <int name=\"acc\" value=\"1000\"/>\n-    <int name=\"eva\" value=\"10\"/>\n-    <int name=\"exp\" value=\"500\"/>\n+    <int name=\"PADamage\" value=\"650\"/>\n+    <int name=\"PDDamage\" value=\"1000\"/>\n+    <int name=\"MADamage\" value=\"780\"/>\n+    <int name=\"MDDamage\" value=\"1100\"/>\n+    <int name=\"acc\" value=\"300\"/>\n+    <int name=\"eva\" value=\"50\"/>\n+    <int name=\"exp\" value=\"60000\"/>\n     <int name=\"undead\" value=\"0\"/>\n-    <int name=\"pushed\" value=\"3000\"/>\n-    <int name=\"hpRecovery\" value=\"2000\"/>\n+    <int name=\"pushed\" value=\"42000\"/>\n+    <int name=\"hpRecovery\" value=\"20000\"/>\n     <int name=\"boss\" value=\"1\"/>\n     <float name=\"fs\" value=\"20.0\"/>\n     <int name=\"summonType\" value=\"2\"/>\n@@ -27,6 +27,9 @@\n         <int name=\"effectAfter\" value=\"900\"/>\n       </imgdir>\n     </imgdir>\n+    <int name=\"HPgaugeHide\" value=\"1\"/>\n+    <int name=\"hpTagBgcolor\" value=\"5\"/>\n+    <int name=\"hpTagColor\" value=\"1\"/>\n   </imgdir>\n   <imgdir name=\"move\">\n     <canvas name=\"0\" width=\"287\" height=\"259\">\n@@ -250,7 +253,7 @@\n       <int name=\"effectAfter\" value=\"0\"/>\n       <int name=\"attackAfter\" value=\"1380\"/>\n       <int name=\"jumpAttack\" value=\"1\"/>\n-      <int name=\"PADamage\" value=\"180\"/>\n+      <int name=\"PADamage\" value=\"700\"/>\n       <int name=\"knockback\" value=\"1\"/>\n       <int name=\"tremble\" value=\"1\"/>\n     </imgdir>\n@@ -407,7 +410,7 @@\n       <int name=\"type\" value=\"0\"/>\n       <int name=\"effectAfter\" value=\"0\"/>\n       <int name=\"attackAfter\" value=\"2250\"/>\n-      <int name=\"PADamage\" value=\"200\"/>\n+      <int name=\"PADamage\" value=\"620\"/>\n       <int name=\"tremble\" value=\"1\"/>\n     </imgdir>\n     <canvas name=\"0\" width=\"287\" height=\"255\">"}, {"sha": "fb7270ff605e2a736b2597ebd721b323242a5f92", "filename": "wz/Mob.wz/9400739.img.xml", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Mob.wz/9400739.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Mob.wz/9400739.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Mob.wz/9400739.img.xml?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -2,20 +2,20 @@\n <imgdir name=\"9400739.img\">\n   <imgdir name=\"info\">\n     <int name=\"bodyAttack\" value=\"1\"/>\n-    <int name=\"level\" value=\"8\"/>\n-    <int name=\"maxHP\" value=\"2000\"/>\n-    <int name=\"maxMP\" value=\"100\"/>\n+    <int name=\"level\" value=\"140\"/>\n+    <int name=\"maxHP\" value=\"200000\"/>\n+    <int name=\"maxMP\" value=\"1000\"/>\n     <int name=\"speed\" value=\"20\"/>\n-    <int name=\"PADamage\" value=\"100\"/>\n-    <int name=\"PDDamage\" value=\"100\"/>\n-    <int name=\"MADamage\" value=\"10\"/>\n-    <int name=\"MDDamage\" value=\"70\"/>\n-    <int name=\"acc\" value=\"1000\"/>\n-    <int name=\"eva\" value=\"15\"/>\n-    <string name=\"exp\" value=\"50\"/>\n+    <int name=\"PADamage\" value=\"200\"/>\n+    <int name=\"PDDamage\" value=\"1000\"/>\n+    <int name=\"MADamage\" value=\"400\"/>\n+    <int name=\"MDDamage\" value=\"500\"/>\n+    <int name=\"acc\" value=\"210\"/>\n+    <int name=\"eva\" value=\"45\"/>\n+    <string name=\"exp\" value=\"5000\"/>\n     <int name=\"undead\" value=\"0\"/>\n-    <int name=\"pushed\" value=\"500\"/>\n-    <int name=\"hpRecovery\" value=\"10\"/>\n+    <int name=\"pushed\" value=\"5000\"/>\n+    <int name=\"hpRecovery\" value=\"1000\"/>\n     <int name=\"boss\" value=\"0\"/>\n     <float name=\"fs\" value=\"20.0\"/>\n     <int name=\"summonType\" value=\"0\"/>"}, {"sha": "94d623f5ea175f6b7f9bb96dbb2eecb60352d19a", "filename": "wz/Mob.wz/9400740.img.xml", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Mob.wz/9400740.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Mob.wz/9400740.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Mob.wz/9400740.img.xml?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -2,20 +2,20 @@\n <imgdir name=\"9400740.img\">\n   <imgdir name=\"info\">\n     <int name=\"bodyAttack\" value=\"1\"/>\n-    <int name=\"level\" value=\"8\"/>\n-    <int name=\"maxHP\" value=\"2000\"/>\n-    <int name=\"maxMP\" value=\"100\"/>\n+    <int name=\"level\" value=\"140\"/>\n+    <int name=\"maxHP\" value=\"200000\"/>\n+    <int name=\"maxMP\" value=\"1000\"/>\n     <int name=\"speed\" value=\"50\"/>\n-    <int name=\"PADamage\" value=\"100\"/>\n-    <int name=\"PDDamage\" value=\"100\"/>\n-    <int name=\"MADamage\" value=\"10\"/>\n-    <int name=\"MDDamage\" value=\"75\"/>\n-    <int name=\"acc\" value=\"1000\"/>\n-    <int name=\"eva\" value=\"20\"/>\n-    <string name=\"exp\" value=\"50\"/>\n+    <int name=\"PADamage\" value=\"400\"/>\n+    <int name=\"PDDamage\" value=\"500\"/>\n+    <int name=\"MADamage\" value=\"200\"/>\n+    <int name=\"MDDamage\" value=\"1000\"/>\n+    <int name=\"acc\" value=\"210\"/>\n+    <int name=\"eva\" value=\"50\"/>\n+    <string name=\"exp\" value=\"5000\"/>\n     <int name=\"undead\" value=\"0\"/>\n-    <int name=\"pushed\" value=\"300\"/>\n-    <int name=\"hpRecovery\" value=\"20\"/>\n+    <int name=\"pushed\" value=\"3000\"/>\n+    <int name=\"hpRecovery\" value=\"2000\"/>\n     <int name=\"boss\" value=\"0\"/>\n     <float name=\"fs\" value=\"20.0\"/>\n     <int name=\"summonType\" value=\"1\"/>"}, {"sha": "d431ccad06acf98a9c8d195ba57da6fdaa020014", "filename": "wz/Mob.wz/9400741.img.xml", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Mob.wz/9400741.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Mob.wz/9400741.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Mob.wz/9400741.img.xml?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -2,19 +2,19 @@\n <imgdir name=\"9400741.img\">\n   <imgdir name=\"info\">\n     <int name=\"bodyAttack\" value=\"1\"/>\n-    <int name=\"level\" value=\"10\"/>\n-    <int name=\"maxHP\" value=\"1200\"/>\n+    <int name=\"level\" value=\"140\"/>\n+    <int name=\"maxHP\" value=\"120000\"/>\n     <int name=\"maxMP\" value=\"0\"/>\n     <int name=\"speed\" value=\"20\"/>\n-    <int name=\"PADamage\" value=\"60\"/>\n-    <int name=\"PDDamage\" value=\"85\"/>\n+    <int name=\"PADamage\" value=\"420\"/>\n+    <int name=\"PDDamage\" value=\"650\"/>\n     <int name=\"MADamage\" value=\"0\"/>\n-    <int name=\"MDDamage\" value=\"95\"/>\n-    <int name=\"acc\" value=\"60\"/>\n-    <int name=\"eva\" value=\"9\"/>\n-    <int name=\"exp\" value=\"50\"/>\n+    <int name=\"MDDamage\" value=\"500\"/>\n+    <int name=\"acc\" value=\"180\"/>\n+    <int name=\"eva\" value=\"30\"/>\n+    <int name=\"exp\" value=\"5000\"/>\n     <int name=\"undead\" value=\"1\"/>\n-    <int name=\"pushed\" value=\"50\"/>\n+    <int name=\"pushed\" value=\"5000\"/>\n     <float name=\"fs\" value=\"10.0\"/>\n     <int name=\"summonType\" value=\"1\"/>\n     <string name=\"elemAttr\" value=\"H3\"/>"}, {"sha": "01cc202bdf86e562b087c399d27762026006b442", "filename": "wz/Mob.wz/9400742.img.xml", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Mob.wz/9400742.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Mob.wz/9400742.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Mob.wz/9400742.img.xml?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -2,19 +2,19 @@\n <imgdir name=\"9400742.img\">\n   <imgdir name=\"info\">\n     <int name=\"bodyAttack\" value=\"1\"/>\n-    <int name=\"level\" value=\"10\"/>\n-    <int name=\"maxHP\" value=\"1400\"/>\n+    <int name=\"level\" value=\"140\"/>\n+    <int name=\"maxHP\" value=\"140000\"/>\n     <int name=\"maxMP\" value=\"0\"/>\n     <int name=\"speed\" value=\"20\"/>\n-    <int name=\"PADamage\" value=\"65\"/>\n-    <int name=\"PDDamage\" value=\"90\"/>\n+    <int name=\"PADamage\" value=\"440\"/>\n+    <int name=\"PDDamage\" value=\"770\"/>\n     <int name=\"MADamage\" value=\"0\"/>\n-    <int name=\"MDDamage\" value=\"98\"/>\n-    <int name=\"acc\" value=\"65\"/>\n-    <int name=\"eva\" value=\"9\"/>\n-    <int name=\"exp\" value=\"60\"/>\n+    <int name=\"MDDamage\" value=\"700\"/>\n+    <int name=\"acc\" value=\"180\"/>\n+    <int name=\"eva\" value=\"30\"/>\n+    <int name=\"exp\" value=\"6000\"/>\n     <int name=\"undead\" value=\"1\"/>\n-    <int name=\"pushed\" value=\"50\"/>\n+    <int name=\"pushed\" value=\"5000\"/>\n     <float name=\"fs\" value=\"10.0\"/>\n     <int name=\"summonType\" value=\"1\"/>\n     <string name=\"elemAttr\" value=\"H3\"/>"}, {"sha": "bbd4d88fb2a3837eee03c9b0051ce4892de26d95", "filename": "wz/Mob.wz/9400743.img.xml", "status": "modified", "additions": 10, "deletions": 10, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Mob.wz/9400743.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Mob.wz/9400743.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Mob.wz/9400743.img.xml?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -2,16 +2,16 @@\n <imgdir name=\"9400743.img\">\n   <imgdir name=\"info\">\n     <int name=\"bodyAttack\" value=\"1\"/>\n-    <int name=\"level\" value=\"10\"/>\n-    <int name=\"maxHP\" value=\"1600\"/>\n-    <int name=\"maxMP\" value=\"30\"/>\n+    <int name=\"level\" value=\"140\"/>\n+    <int name=\"maxHP\" value=\"160000\"/>\n+    <int name=\"maxMP\" value=\"300\"/>\n     <int name=\"speed\" value=\"15\"/>\n-    <int name=\"PADamage\" value=\"80\"/>\n-    <int name=\"PDDamage\" value=\"80\"/>\n-    <int name=\"MADamage\" value=\"75\"/>\n-    <int name=\"MDDamage\" value=\"55\"/>\n-    <int name=\"acc\" value=\"80\"/>\n-    <int name=\"eva\" value=\"10\"/>\n+    <int name=\"PADamage\" value=\"500\"/>\n+    <int name=\"PDDamage\" value=\"700\"/>\n+    <int name=\"MADamage\" value=\"160\"/>\n+    <int name=\"MDDamage\" value=\"800\"/>\n+    <int name=\"acc\" value=\"300\"/>\n+    <int name=\"eva\" value=\"35\"/>\n     <int name=\"exp\" value=\"70\"/>\n     <int name=\"undead\" value=\"0\"/>\n     <int name=\"pushed\" value=\"1\"/>\n@@ -154,7 +154,7 @@\n       </imgdir>\n       <int name=\"type\" value=\"0\"/>\n       <int name=\"attackAfter\" value=\"840\"/>\n-      <string name=\"PADamage\" value=\"150\"/>\n+      <string name=\"PADamage\" value=\"550\"/>\n     </imgdir>\n     <canvas name=\"0\" width=\"90\" height=\"50\">\n       <vector name=\"origin\" x=\"36\" y=\"50\"/>"}, {"sha": "bcf179c734497f7a5ec4139bb3fda015a254059c", "filename": "wz/Mob.wz/9400744.img.xml", "status": "modified", "additions": 13, "deletions": 13, "changes": 26, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Mob.wz/9400744.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Mob.wz/9400744.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Mob.wz/9400744.img.xml?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -2,20 +2,20 @@\n <imgdir name=\"9400744.img\">\n   <imgdir name=\"info\">\n     <int name=\"bodyAttack\" value=\"1\"/>\n-    <int name=\"level\" value=\"10\"/>\n-    <int name=\"maxHP\" value=\"100000\"/>\n-    <int name=\"maxMP\" value=\"500\"/>\n+    <int name=\"level\" value=\"168\"/>\n+    <int name=\"maxHP\" value=\"10000000\"/>\n+    <int name=\"maxMP\" value=\"5000\"/>\n     <int name=\"flySpeed\" value=\"10\"/>\n-    <int name=\"PADamage\" value=\"100\"/>\n-    <int name=\"PDDamage\" value=\"400\"/>\n-    <int name=\"MADamage\" value=\"200\"/>\n-    <int name=\"MDDamage\" value=\"400\"/>\n-    <int name=\"acc\" value=\"90\"/>\n+    <int name=\"PADamage\" value=\"750\"/>\n+    <int name=\"PDDamage\" value=\"600\"/>\n+    <int name=\"MADamage\" value=\"700\"/>\n+    <int name=\"MDDamage\" value=\"800\"/>\n+    <int name=\"acc\" value=\"190\"/>\n     <int name=\"eva\" value=\"20\"/>\n-    <int name=\"exp\" value=\"2500\"/>\n+    <int name=\"exp\" value=\"250000\"/>\n     <int name=\"undead\" value=\"0\"/>\n-    <int name=\"pushed\" value=\"2000\"/>\n-    <int name=\"hpRecovery\" value=\"100\"/>\n+    <int name=\"pushed\" value=\"20000\"/>\n+    <int name=\"hpRecovery\" value=\"10000\"/>\n     <int name=\"mpRecovery\" value=\"5\"/>\n     <string name=\"elemAttr\" value=\"S1H3\"/>\n     <int name=\"boss\" value=\"1\"/>\n@@ -163,7 +163,7 @@\n         </canvas>\n       </imgdir>\n       <int name=\"type\" value=\"2\"/>\n-      <int name=\"conMP\" value=\"2\"/>\n+      <int name=\"conMP\" value=\"40\"/>\n       <int name=\"attackAfter\" value=\"400\"/>\n       <int name=\"magic\" value=\"1\"/>\n     </imgdir>\n@@ -345,7 +345,7 @@\n         <uol name=\"8\" value=\"1\"/>\n       </imgdir>\n       <int name=\"type\" value=\"0\"/>\n-      <int name=\"conMP\" value=\"2\"/>\n+      <int name=\"conMP\" value=\"40\"/>\n       <int name=\"effectAfter\" value=\"0\"/>\n       <int name=\"attackAfter\" value=\"720\"/>\n       <int name=\"magic\" value=\"1\"/>"}, {"sha": "658f32b691f014c65c7b1817695758e361132e6b", "filename": "wz/Mob.wz/9400745.img.xml", "status": "modified", "additions": 14, "deletions": 14, "changes": 28, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Mob.wz/9400745.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Mob.wz/9400745.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Mob.wz/9400745.img.xml?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -2,20 +2,20 @@\n <imgdir name=\"9400745.img\">\n   <imgdir name=\"info\">\n     <int name=\"bodyAttack\" value=\"1\"/>\n-    <int name=\"level\" value=\"10\"/>\n-    <int name=\"maxHP\" value=\"50000\"/>\n-    <int name=\"maxMP\" value=\"500\"/>\n+    <int name=\"level\" value=\"160\"/>\n+    <int name=\"maxHP\" value=\"5000000\"/>\n+    <int name=\"maxMP\" value=\"5000\"/>\n     <int name=\"speed\" value=\"-20\"/>\n-    <int name=\"PADamage\" value=\"90\"/>\n-    <int name=\"PDDamage\" value=\"220\"/>\n-    <int name=\"MADamage\" value=\"150\"/>\n+    <int name=\"PADamage\" value=\"700\"/>\n+    <int name=\"PDDamage\" value=\"880\"/>\n+    <int name=\"MADamage\" value=\"550\"/>\n     <int name=\"MDDamage\" value=\"220\"/>\n-    <int name=\"acc\" value=\"75\"/>\n-    <int name=\"eva\" value=\"15\"/>\n-    <int name=\"exp\" value=\"1000\"/>\n+    <int name=\"acc\" value=\"180\"/>\n+    <int name=\"eva\" value=\"55\"/>\n+    <int name=\"exp\" value=\"100000\"/>\n     <int name=\"undead\" value=\"0\"/>\n-    <int name=\"pushed\" value=\"1500\"/>\n-    <int name=\"hpRecovery\" value=\"50\"/>\n+    <int name=\"pushed\" value=\"15000\"/>\n+    <int name=\"hpRecovery\" value=\"5000\"/>\n     <int name=\"mpRecovery\" value=\"5\"/>\n     <string name=\"elemAttr\" value=\"S1H3\"/>\n     <int name=\"boss\" value=\"1\"/>\n@@ -187,7 +187,7 @@\n         </canvas>\n       </imgdir>\n       <int name=\"type\" value=\"1\"/>\n-      <int name=\"conMP\" value=\"2\"/>\n+      <int name=\"conMP\" value=\"40\"/>\n       <int name=\"effectAfter\" value=\"700\"/>\n       <int name=\"attackAfter\" value=\"1300\"/>\n       <int name=\"magic\" value=\"1\"/>\n@@ -356,7 +356,7 @@\n         </canvas>\n       </imgdir>\n       <int name=\"type\" value=\"2\"/>\n-      <int name=\"conMP\" value=\"2\"/>\n+      <int name=\"conMP\" value=\"40\"/>\n       <int name=\"effectAfter\" value=\"100\"/>\n       <int name=\"attackAfter\" value=\"400\"/>\n       <int name=\"magic\" value=\"1\"/>\n@@ -463,7 +463,7 @@\n         </canvas>\n       </imgdir>\n       <int name=\"type\" value=\"0\"/>\n-      <int name=\"conMP\" value=\"2\"/>\n+      <int name=\"conMP\" value=\"40\"/>\n       <int name=\"effectAfter\" value=\"500\"/>\n       <int name=\"attackAfter\" value=\"400\"/>\n       <int name=\"magic\" value=\"1\"/>"}, {"sha": "0a55a28eced05e23b279b14ea9ad7da579dd597a", "filename": "wz/Mob.wz/9400746.img.xml", "status": "modified", "additions": 11, "deletions": 11, "changes": 22, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Mob.wz/9400746.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Mob.wz/9400746.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Mob.wz/9400746.img.xml?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -2,19 +2,19 @@\n <imgdir name=\"9400746.img\">\n   <imgdir name=\"info\">\n     <int name=\"bodyAttack\" value=\"1\"/>\n-    <int name=\"level\" value=\"10\"/>\n-    <int name=\"maxHP\" value=\"20000\"/>\n-    <int name=\"maxMP\" value=\"100\"/>\n+    <int name=\"level\" value=\"170\"/>\n+    <int name=\"maxHP\" value=\"2000000\"/>\n+    <int name=\"maxMP\" value=\"1000\"/>\n     <int name=\"speed\" value=\"-60\"/>\n-    <int name=\"PADamage\" value=\"85\"/>\n-    <int name=\"PDDamage\" value=\"200\"/>\n+    <int name=\"PADamage\" value=\"650\"/>\n+    <int name=\"PDDamage\" value=\"800\"/>\n     <int name=\"MADamage\" value=\"0\"/>\n-    <int name=\"MDDamage\" value=\"250\"/>\n-    <int name=\"acc\" value=\"140\"/>\n-    <int name=\"eva\" value=\"23\"/>\n-    <int name=\"exp\" value=\"300\"/>\n+    <int name=\"MDDamage\" value=\"750\"/>\n+    <int name=\"acc\" value=\"200\"/>\n+    <int name=\"eva\" value=\"56\"/>\n+    <int name=\"exp\" value=\"30000\"/>\n     <int name=\"undead\" value=\"0\"/>\n-    <int name=\"pushed\" value=\"2500\"/>\n+    <int name=\"pushed\" value=\"25000\"/>\n     <string name=\"elemAttr\" value=\"I2F2L2S2\"/>\n     <int name=\"boss\" value=\"1\"/>\n     <float name=\"fs\" value=\"10.0\"/>\n@@ -146,7 +146,7 @@\n       </imgdir>\n       <int name=\"type\" value=\"1\"/>\n       <int name=\"attackAfter\" value=\"720\"/>\n-      <int name=\"PADamage\" value=\"135\"/>\n+      <int name=\"PADamage\" value=\"560\"/>\n     </imgdir>\n     <canvas name=\"0\" width=\"123\" height=\"107\">\n       <vector name=\"origin\" x=\"61\" y=\"107\"/>"}, {"sha": "e7d3f95b20d2f2fbe067a357feb9273e008cb562", "filename": "wz/Mob.wz/9400747.img.xml", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Mob.wz/9400747.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Mob.wz/9400747.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Mob.wz/9400747.img.xml?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -2,19 +2,19 @@\n <imgdir name=\"9400747.img\">\n   <imgdir name=\"info\">\n     <int name=\"bodyAttack\" value=\"1\"/>\n-    <int name=\"level\" value=\"10\"/>\n-    <int name=\"maxHP\" value=\"45000\"/>\n-    <int name=\"maxMP\" value=\"190\"/>\n+    <int name=\"level\" value=\"170\"/>\n+    <int name=\"maxHP\" value=\"4500000\"/>\n+    <int name=\"maxMP\" value=\"1900\"/>\n     <int name=\"speed\" value=\"-20\"/>\n-    <int name=\"PADamage\" value=\"80\"/>\n-    <int name=\"PDDamage\" value=\"100\"/>\n-    <int name=\"MADamage\" value=\"80\"/>\n-    <int name=\"MDDamage\" value=\"100\"/>\n-    <int name=\"acc\" value=\"70\"/>\n-    <int name=\"eva\" value=\"15\"/>\n-    <int name=\"exp\" value=\"250\"/>\n+    <int name=\"PADamage\" value=\"700\"/>\n+    <int name=\"PDDamage\" value=\"750\"/>\n+    <int name=\"MADamage\" value=\"650\"/>\n+    <int name=\"MDDamage\" value=\"500\"/>\n+    <int name=\"acc\" value=\"210\"/>\n+    <int name=\"eva\" value=\"70\"/>\n+    <int name=\"exp\" value=\"25000\"/>\n     <int name=\"undead\" value=\"0\"/>\n-    <int name=\"pushed\" value=\"1000\"/>\n+    <int name=\"pushed\" value=\"10000\"/>\n     <string name=\"elemAttr\" value=\"F2I3\"/>\n     <int name=\"boss\" value=\"1\"/>\n     <float name=\"fs\" value=\"10.0\"/>\n@@ -141,7 +141,7 @@\n         </canvas>\n       </imgdir>\n       <int name=\"type\" value=\"2\"/>\n-      <int name=\"conMP\" value=\"3\"/>\n+      <int name=\"conMP\" value=\"50\"/>\n       <int name=\"attackAfter\" value=\"665\"/>\n       <int name=\"bulletSpeed\" value=\"200\"/>\n       <string name=\"elemAttr\" value=\"F\"/>"}, {"sha": "b014e1622751517ecf31180e30cb0f0037ed8af3", "filename": "wz/Mob.wz/9400748.img.xml", "status": "modified", "additions": 17, "deletions": 14, "changes": 31, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Mob.wz/9400748.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Mob.wz/9400748.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Mob.wz/9400748.img.xml?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -2,20 +2,9 @@\n <imgdir name=\"9400748.img\">\n   <imgdir name=\"info\">\n     <int name=\"bodyAttack\" value=\"1\"/>\n-    <int name=\"level\" value=\"10\"/>\n-    <int name=\"maxHP\" value=\"400000\"/>\n-    <int name=\"maxMP\" value=\"100\"/>\n     <int name=\"speed\" value=\"-10\"/>\n-    <int name=\"PADamage\" value=\"150\"/>\n-    <int name=\"PDDamage\" value=\"500\"/>\n-    <int name=\"MADamage\" value=\"20\"/>\n-    <int name=\"MDDamage\" value=\"450\"/>\n-    <int name=\"acc\" value=\"1000\"/>\n-    <int name=\"eva\" value=\"10\"/>\n-    <int name=\"exp\" value=\"1000\"/>\n     <int name=\"undead\" value=\"0\"/>\n-    <int name=\"pushed\" value=\"3000\"/>\n-    <int name=\"hpRecovery\" value=\"2000\"/>\n+    <int name=\"hpRecovery\" value=\"20000\"/>\n     <int name=\"boss\" value=\"1\"/>\n     <float name=\"fs\" value=\"20.0\"/>\n     <int name=\"summonType\" value=\"2\"/>\n@@ -27,6 +16,20 @@\n         <int name=\"effectAfter\" value=\"900\"/>\n       </imgdir>\n     </imgdir>\n+    <int name=\"acc\" value=\"270\"/>\n+    <int name=\"eva\" value=\"50\"/>\n+    <int name=\"exp\" value=\"60000\"/>\n+    <int name=\"level\" value=\"180\"/>\n+    <int name=\"MADamage\" value=\"780\"/>\n+    <int name=\"maxHP\" value=\"17000000\"/>\n+    <int name=\"maxMP\" value=\"2000\"/>\n+    <int name=\"MDDamage\" value=\"1100\"/>\n+    <int name=\"PADamage\" value=\"650\"/>\n+    <int name=\"PDDamage\" value=\"1000\"/>\n+    <int name=\"pushed\" value=\"42000\"/>\n+    <int name=\"HPgaugeHide\" value=\"1\"/>\n+    <int name=\"hpTagBgcolor\" value=\"5\"/>\n+    <int name=\"hpTagColor\" value=\"1\"/>\n   </imgdir>\n   <imgdir name=\"move\">\n     <canvas name=\"0\" width=\"287\" height=\"259\">\n@@ -250,7 +253,7 @@\n       <int name=\"effectAfter\" value=\"0\"/>\n       <int name=\"attackAfter\" value=\"1380\"/>\n       <int name=\"jumpAttack\" value=\"1\"/>\n-      <int name=\"PADamage\" value=\"180\"/>\n+      <int name=\"PADamage\" value=\"720\"/>\n       <int name=\"knockback\" value=\"1\"/>\n       <int name=\"tremble\" value=\"1\"/>\n     </imgdir>\n@@ -407,7 +410,7 @@\n       <int name=\"type\" value=\"0\"/>\n       <int name=\"effectAfter\" value=\"0\"/>\n       <int name=\"attackAfter\" value=\"2250\"/>\n-      <int name=\"PADamage\" value=\"200\"/>\n+      <int name=\"PADamage\" value=\"640\"/>\n       <int name=\"tremble\" value=\"1\"/>\n     </imgdir>\n     <canvas name=\"0\" width=\"287\" height=\"255\">"}, {"sha": "ab2c2978b784bc22975f9d7df397fb14b7089fca", "filename": "wz/Mob.wz/9400749.img.xml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Mob.wz/9400749.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/Mob.wz/9400749.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Mob.wz/9400749.img.xml?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -10,7 +10,7 @@\n     <int name=\"PDDamage\" value=\"90\"/>\n     <int name=\"MADamage\" value=\"0\"/>\n     <int name=\"MDDamage\" value=\"90\"/>\n-    <int name=\"acc\" value=\"75\"/>\n+    <int name=\"acc\" value=\"300\"/>\n     <int name=\"eva\" value=\"12\"/>\n     <int name=\"exp\" value=\"120\"/>\n     <int name=\"undead\" value=\"0\"/>"}, {"sha": "0cc87d72223ecbc4906fdde45cf1a5eb287b02ae", "filename": "wz/String.wz/Consume.img.xml", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/String.wz/Consume.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/String.wz/Consume.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/String.wz/Consume.img.xml?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -2312,19 +2312,19 @@\n     <string name=\"desc\" value=\"Improves dexterity on shoes.\\nSuccess rate:15%, avoidability+5, accuracy+3, speed+1\"/>\n   </imgdir>\n   <imgdir name=\"2040720\">\n-    <string name=\"name\" value=\"Scroll for Jump for DEX\"/>\n+    <string name=\"name\" value=\"Scroll for Shoes for Jump\"/>\n     <string name=\"desc\" value=\"Improves jump on shoes.\\nSuccess rate:65%, jump+2, DEX+1\"/>\n   </imgdir>\n   <imgdir name=\"2040721\">\n-    <string name=\"name\" value=\"Scroll for Jump for DEX\"/>\n+    <string name=\"name\" value=\"Scroll for Shoes for Jump\"/>\n     <string name=\"desc\" value=\"Improves jump on shoes.\\nSuccess rate:15%, jump+5, DEX+3, speed+1\"/>\n   </imgdir>\n   <imgdir name=\"2040722\">\n-    <string name=\"name\" value=\"Scroll for Speed for DEX\"/>\n+    <string name=\"name\" value=\"Scroll for Shoes for Speed\"/>\n     <string name=\"desc\" value=\"Improves speed on shoes.\\nSuccess rate:65%, speed+2\"/>\n   </imgdir>\n   <imgdir name=\"2040723\">\n-    <string name=\"name\" value=\"Scroll for Speed for DEX\"/>\n+    <string name=\"name\" value=\"Scroll for Shoes for Speed\"/>\n     <string name=\"desc\" value=\"Improves speed on shoes.\\nSuccess rate:15%, speed+3\"/>\n   </imgdir>\n   <imgdir name=\"2040727\">"}, {"sha": "3ccb978c4f75ac5158584343214284a477253992", "filename": "wz/String.wz/Map.img.xml", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/String.wz/Map.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/String.wz/Map.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/String.wz/Map.img.xml?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -8660,16 +8660,19 @@\n     </imgdir>\n     <imgdir name=\"674030300\">\n       <string name=\"streetName\" value=\"Treasure Dungeon\"/>\n+      <string name=\"mapName\" value=\"Treasure Dungeon\"/>\n     </imgdir>\n     <imgdir name=\"914090011\">\n       <string name=\"streetName\" value=\"Aran Tuto\"/>\n       <string name=\"mapName\" value=\"Aran Tuto 2\"/>\n     </imgdir>\n     <imgdir name=\"674030100\">\n-      <string name=\"streetName\" value=\"Entrance to MV&apos;s Lair\"/>\n+      <string name=\"streetName\" value=\"Treasure Dungeon\"/>\n+      <string name=\"mapName\" value=\"Entrance to MV&apos;s Lair\"/>\n     </imgdir>\n     <imgdir name=\"674030200\">\n-      <string name=\"streetName\" value=\"The Lair of MV\"/>\n+      <string name=\"streetName\" value=\"Treasure Dungeon\"/>\n+      <string name=\"mapName\" value=\"The Lair of MV\"/>\n     </imgdir>\n     <imgdir name=\"910020000\">\n       <string name=\"streetName\" value=\"Hidden Street\"/>\n@@ -17304,7 +17307,8 @@\n       <string name=\"mapName\" value=\"Aran Tuto 4\"/>\n     </imgdir>\n     <imgdir name=\"674030000\">\n-      <string name=\"streetName\" value=\"Initiation\"/>\n+      <string name=\"streetName\" value=\"Treasure Dungeon\"/>\n+      <string name=\"mapName\" value=\"Initiation\"/>\n     </imgdir>\n   </imgdir>\n   <imgdir name=\"singapore\">"}, {"sha": "55aa59798f4d0af025f254d5331e7353dff656ef", "filename": "wz/UI.wz/UIWindow.img.xml", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/UI.wz/UIWindow.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8/wz/UI.wz/UIWindow.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/UI.wz/UIWindow.img.xml?ref=bbd2debc08fc8ade8cfbc0fa5c74a6b0f44748b8", "patch": "@@ -10246,10 +10246,18 @@\n         <int name=\"delay\" value=\"500\"/>\n         <vector name=\"origin\" x=\"0\" y=\"0\"/>\n       </canvas>\n+      <canvas name=\"9400748\" width=\"25\" height=\"25\">\n+        <int name=\"delay\" value=\"500\"/>\n+        <vector name=\"origin\" x=\"0\" y=\"0\"/>\n+      </canvas>\n       <canvas name=\"2220000\" width=\"25\" height=\"25\">\n         <int name=\"delay\" value=\"500\"/>\n         <vector name=\"origin\" x=\"0\" y=\"0\"/>\n       </canvas>\n+      <canvas name=\"9400589\" width=\"25\" height=\"25\">\n+        <int name=\"delay\" value=\"500\"/>\n+        <vector name=\"origin\" x=\"0\" y=\"0\"/>\n+      </canvas>\n     </imgdir>\n     <imgdir name=\"Gage\">\n       <imgdir name=\"1\">"}]}]},
