{"fetchDate": "2019-12-19", "content": [{"sha": "1d8caff63f5a62738df0889413251013c98797be", "node_id": "MDY6Q29tbWl0NDUwODIwMjM6MWQ4Y2FmZjYzZjVhNjI3MzhkZjA4ODk0MTMyNTEwMTNjOTg3OTdiZQ==", "commit": {"author": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2017-04-29T15:05:26Z"}, "committer": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2017-04-29T15:05:26Z"}, "message": "Boss Rush PQ Rewarding System + minor patches\n\nIntroducing BRPQ rewarding system (KPQ/LPQ clear-like) and patched\nissues regarding \"no apparent party leader\" after party leader\ndisconnects and reconnects.", "tree": {"sha": "015459388428317be1264a1dbec8eaea79d7f74e", "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/trees/015459388428317be1264a1dbec8eaea79d7f74e"}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/commits/1d8caff63f5a62738df0889413251013c98797be", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/1d8caff63f5a62738df0889413251013c98797be", "html_url": "https://github.com/ronancpl/HeavenMS/commit/1d8caff63f5a62738df0889413251013c98797be", "comments_url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/1d8caff63f5a62738df0889413251013c98797be/comments", "author": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7942dde1a1a79ff5e2523a812532b5c169ed09c5", "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/7942dde1a1a79ff5e2523a812532b5c169ed09c5", "html_url": "https://github.com/ronancpl/HeavenMS/commit/7942dde1a1a79ff5e2523a812532b5c169ed09c5"}], "stats": {"total": 1037, "additions": 645, "deletions": 392}, "files": [{"sha": "37a641d83f401d16e4466acfdcede6f6a54f0a8c", "filename": ".gitignore", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/.gitignore", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/.gitignore", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/.gitignore?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -1,2 +1,3 @@\n /build/\n-/dist/\n\\ No newline at end of file\n+/dist/\n+/logs/\n\\ No newline at end of file"}, {"sha": "ca81abf2c1c60edf7da6f56f59fd69f23857a829", "filename": "README.txt", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/README.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/README.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/README.txt?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -74,6 +74,8 @@ Configure the IP you want to use for your MapleStory server in \"configuration.in\n \n Now open NetBeans, and choose to Open a project... Select then the \"MapleSolaxia\" folder, that should already be a project recognizable by NetBeans. If it doesn't, you have a problem.\n \n+Inside the project, you may encounter some code errors. These happens because you have not set yet the \"cores\" of the project. From the project hierarchy, right-click the project and select \"Resolve Project Problems\". Locate the \"cores\" folder inside the root directory of this project and manually configure the missing files with the files that are there.\n+\n Finally, select \"Clean and Build project\" to build the JAR file for the MapleStory server. Once done, make sure both WampServer and Hamachi are on and functioning, and then execute \"launch.bat\" on the root of the project. If no errors were raised from this action, your MapleStory server is now online.\n \n ---- Installing the CLIENT ----"}, {"sha": "2948abe44aeec02b4affeca7643c635a5c32d951", "filename": "nbproject/private/private.properties", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/nbproject/private/private.properties", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/nbproject/private/private.properties", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/nbproject/private/private.properties?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -1,10 +1,10 @@\n compile.on.save=true\n do.depend=false\n do.jar=true\n-file.reference.mina-core-2.0.7.jar=C:\\\\Nexon\\\\MapleSolaxia\\\\cores\\\\mina-core-2.0.7.jar\n-file.reference.mysql-connector-java-bin.jar=C:\\\\Nexon\\\\MapleSolaxia\\\\cores\\\\mysql-connector-java-bin.jar\n-file.reference.slf4j-api-1.6.6.jar=C:\\\\Nexon\\\\MapleSolaxia\\\\cores\\\\slf4j-api-1.6.6.jar\n-file.reference.slf4j-jdk14-1.7.5.jar=C:\\\\Nexon\\\\MapleSolaxia\\\\cores\\\\slf4j-jdk14-1.7.5.jar\n+file.reference.mina-core-2.0.7.jar=C:\\\\Nexon\\\\MapleSolaxia\\\\MapleSolaxiaV2\\\\cores\\\\mina-core-2.0.7.jar\n+file.reference.mysql-connector-java-bin.jar=C:\\\\Nexon\\\\MapleSolaxia\\\\MapleSolaxiaV2\\\\cores\\\\mysql-connector-java-bin.jar\n+file.reference.slf4j-api-1.6.6.jar=C:\\\\Nexon\\\\MapleSolaxia\\\\MapleSolaxiaV2\\\\cores\\\\slf4j-api-1.6.6.jar\n+file.reference.slf4j-jdk14-1.7.5.jar=C:\\\\Nexon\\\\MapleSolaxia\\\\MapleSolaxiaV2\\\\cores\\\\slf4j-jdk14-1.7.5.jar\n javac.debug=true\n javadoc.preview=true\n user.properties.file=C:\\\\Users\\\\RonanLana\\\\AppData\\\\Roaming\\\\NetBeans\\\\8.0.2\\\\build.properties"}, {"sha": "d67be8ac01011cb94b774f628588221eec9c5624", "filename": "nbproject/private/private.xml", "status": "modified", "additions": 20, "deletions": 5, "changes": 25, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/nbproject/private/private.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/nbproject/private/private.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/nbproject/private/private.xml?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -3,11 +3,26 @@\n     <editor-bookmarks xmlns=\"http://www.netbeans.org/ns/editor-bookmarks/2\" lastBookmarkId=\"0\"/>\n     <open-files xmlns=\"http://www.netbeans.org/ns/projectui-open-files/2\">\n         <group>\n-            <file>file:/C:/Nexon/MapleSolaxia/scripts/npc/world0/2133000.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/src/client/MapleCharacter.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/scripts/npc/world0/9020000.js</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/src/constants/ServerConstants.java</file>\n-            <file>file:/C:/Nexon/MapleSolaxia/src/server/maps/MapleReactor.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/command/Commands.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/server/expeditions/MapleExpedition.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/portal/raid_stage.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/scripting/AbstractPlayerInteraction.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/constants/ServerConstants.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/net/server/channel/handlers/PartyOperationHandler.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/net/server/world/MapleParty.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/tools/MaplePacketCreator.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/portal/raid_rest.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/net/server/world/MaplePartyCharacter.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/scripting/event/EventInstanceManager.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/event/BossRushPQ.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/scripting/npc/NPCConversationManager.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/MapleCharacter.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/npc/world0/9000037.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/server/maps/MapleMap.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/portal/raidout.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/scripts/event/PiratePQ.js</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/client/MapleClient.java</file>\n+            <file>file:/C:/Nexon/MapleSolaxia/MapleSolaxiaV2/src/scripting/event/EventManager.java</file>\n         </group>\n     </open-files>\n </project-private>"}, {"sha": "bcbfa6dc910e9c54cdf44df11a95b70f1856c750", "filename": "scripts/event/BossRushPQ.js", "status": "modified", "additions": 54, "deletions": 21, "changes": 75, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/scripts/event/BossRushPQ.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/scripts/event/BossRushPQ.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/BossRushPQ.js?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -11,6 +11,40 @@ function init() {\n \tem.setProperty(\"leader\", \"true\");\n }\n \n+function setEventRewards(eim) {\n+        var itemSet, itemQty, evLevel;\n+\n+        evLevel = 6;    //Rewards at event completion\n+        itemSet = [1122018, 1122005, 1022088, 1402013, 1032048, 1032070, 1102046, 2330004, 2041013, 2041016, 2041019, 2041022, 2049100, 2049003, 2020012, 2020013, 2020014, 2020015, 2022029, 2022045, 2022068, 2022069, 2022179, 2022180, 4004000, 4004001, 4004002, 4004003, 4004004, 4003000];\n+        itemQty = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 25, 25, 25, 25, 25, 25, 25, 25, 25, 4, 12, 12, 12, 12, 12, 25];\n+        eim.setEventRewards(evLevel, itemSet, itemQty);\n+\n+        evLevel = 5;    //Rewards at Rest Spot V\n+        itemSet = [1122018, 1122005, 1022088, 1402013, 1032048, 1032070, 1102046, 2330004, 2041013, 2041016, 2041019, 2041022, 2049100, 2049003, 2020012, 2020013, 2020014, 2020015, 2022029, 2022045, 2022068, 2022069, 2022179, 2022180, 4004000, 4004001, 4004002, 4004003, 4004004, 4003000];\n+        itemQty = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 15, 15, 15, 15, 15, 15, 15, 15, 15, 2, 8, 8, 8, 8, 8, 12];\n+        eim.setEventRewards(evLevel, itemSet, itemQty);\n+        \n+        evLevel = 4;    //Rewards at Rest Spot IV\n+        itemSet = [1122001, 1122006, 1022103, 1442065, 1032042, 1032021, 1102168, 2070005, 2040025, 2040029, 2040301, 2040413, 2040701, 2040817, 2002028, 2020009, 2020010, 2020011, 2022004, 2022005, 2022025, 2022027, 2022048, 2022049, 4020000, 4020001, 4020002, 4020003, 4020004, 4020005, 4020006, 4020007, 4020008, 4003000];\n+        itemQty = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8];\n+        eim.setEventRewards(evLevel, itemSet, itemQty);\n+        \n+        evLevel = 3;    //Rewards at Rest Spot III\n+        itemSet = [1122002, 1022088, 1012076, 1402029, 1032041, 1032044, 1102167, 2070011, 2040026, 2040030, 2040302, 2040412, 2040702, 2040818, 2002028, 2020009, 2020010, 2020011, 2022004, 2022005, 2022025, 2022027, 2022048, 2022049, 4010000, 4010001, 4010002, 4010003, 4010004, 4010005, 4010006, 4010007, 4003000];\n+        itemQty = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 5, 5, 5, 5, 5, 5, 5, 5, 5];\n+        eim.setEventRewards(evLevel, itemSet, itemQty);\n+        \n+        evLevel = 2;    //Rewards at Rest Spot II\n+        itemSet = [1122003, 1012077, 1012079, 1432014, 1032059, 1032002, 1102191, 2330002, 2040001, 2040311, 2040401, 2040601, 2040824, 2040901, 2010000, 2010001, 2010002, 2010003, 2010004, 2020001, 2020002, 2020003, 2022020, 2022022, 4020000, 4020001, 4020002, 4020003, 4020004, 4020005, 4020006, 4020007, 4020008, 4003000];\n+        itemQty = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 60, 60, 60, 60, 60, 60, 60, 60, 60, 60, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3];\n+        eim.setEventRewards(evLevel, itemSet, itemQty);\n+        \n+        evLevel = 1;    //Rewards at Rest Spot I\n+        itemSet = [1122004, 1012078, 1432008, 1432009, 1032040, 1032009, 1102166, 2070001, 2040002, 2040310, 2040400, 2040600, 2040825, 2040902, 2010000, 2010001, 2010002, 2010003, 2010004, 2020001, 2020002, 2020003, 2022020, 2022022, 4003000];\n+        itemQty = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 2, 2, 2, 2, 2, 2, 2, 2, 2];\n+        eim.setEventRewards(evLevel, itemSet, itemQty);\n+}\n+\n function getEligibleParty(party) {      //selects, from the given party, the team that is allowed to attempt this event\n         var eligible = [];\n         var hasLeader = false;\n@@ -28,6 +62,10 @@ function getEligibleParty(party) {      //selects, from the given party, the tea\n             }\n         }\n         \n+        if(!hasLeader) print(\"no leader\");\n+        else if(eligible.length < minPlayers) print(\"no min\");\n+        else if(eligible.length < minPlayers) print(\"no max\");\n+        \n         if(!(hasLeader && eligible.length >= minPlayers && eligible.length <= maxPlayers)) eligible = [];\n         return eligible;\n }\n@@ -39,6 +77,7 @@ function setup(level, leaderid) {\n \t\n         em.setProperty(\"level\", level);\n         eim.startEventTimer(45 * 60000); //45 mins\n+        setEventRewards(eim);\n         return eim;\n }\n \n@@ -51,26 +90,21 @@ function scheduledTimeout(eim) {\n         end(eim);\n }\n \n-function removePlayer(eim, player) {\n-        eim.unregisterPlayer(player);\n-        player.changeMap(exitMap, 0);\n-}\n-\n function playerExit(eim, player) {\n         eim.unregisterPlayer(player);\n         player.changeMap(exitMap, 0);\n }\n \n function changedMap(eim, player, mapid) {\n-    if (mapid < 970030001 || mapid > 970042711) {\n-            var party = eim.getPlayers();\n-            if (eim.isLeader(player) || party.size() <= minPlayers) {\n-                    eim.unregisterPlayer(player);\n-                    end(eim);\n-            }\n-            else\n-                    eim.unregisterPlayer(player);\n-    }\n+        if (mapid < 970030001 || mapid > 970042711) {\n+                var party = eim.getPlayers();\n+                if (eim.isLeader(player) || party.size() <= minPlayers) {\n+                        eim.unregisterPlayer(player);\n+                        end(eim);\n+                }\n+                else\n+                        eim.unregisterPlayer(player);\n+        }\n }\n \n function playerDead(eim, player) {}\n@@ -88,12 +122,10 @@ function playerRevive(eim, player) { // player presses ok on the death pop up.\n \n function playerDisconnected(eim, player) {\n         var party = eim.getPlayers();\n-        if (eim.isLeader(player) || party.size() <= minPlayers) {\n-                eim.unregisterPlayer(player);\n+        if (eim.isLeader(player) || party.size() <= minPlayers)\n                 end(eim);\n-        }\n         else\n-                removePlayer(eim, player);\n+                playerExit(eim, player);\n }\n \n function leftParty(eim, player) {\n@@ -122,9 +154,6 @@ function end(eim) {\n \n function playerClear(eim, player, toMap) {\n     eim.unregisterPlayer(player);\n-    \n-    if(toMap != null) player.changeMap(toMap);\n-    else player.changeMap(clearMap, 0);\n }\n \n function complete(eim, toMap) {\n@@ -139,6 +168,10 @@ function clearPQ(eim, toMap) {\n     complete(eim, toMap);\n }\n \n+function giveRandomEventReward(eim, player) {\n+    eim.giveEventReward(player);\n+}\n+\n function monsterKilled(mob, eim) {}\n \n function allMonstersDead(eim) {}"}, {"sha": "9b440945cb13f1d74935c785b17bf062c3e14db4", "filename": "scripts/npc/world0/9000008.js", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/scripts/npc/world0/9000008.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/scripts/npc/world0/9000008.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/9000008.js?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -0,0 +1,26 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+function start() {\n+    cm.sendOk(\"Should you have a locked box you want to open, bring it to me.\");\n+    cm.dispose();\n+}\n\\ No newline at end of file"}, {"sha": "5f38731de483d6251ca0d2089d889da016b463b5", "filename": "scripts/npc/world0/9000037.js", "status": "modified", "additions": 59, "deletions": 3, "changes": 62, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/scripts/npc/world0/9000037.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/scripts/npc/world0/9000037.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/world0/9000037.js?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -12,9 +12,17 @@ var minPartySize = 1;\n var maxPartySize = 6;\n var state;\n \n+function onRestingSpot() {\n+    return cm.getMapId() >= 970030001 && cm.getMapId() <= 970030010;\n+}\n+\n+function isFinalBossDone() {\n+    return cm.getMapId() >= 970032700 && cm.getMapId() < 970032800 && cm.getMap().getMonsters().isEmpty();\n+}\n+\n function start() {\n \tstatus = -1;\n-        state = (cm.getMapId() >= 970030001 && cm.getMapId() <= 970042711) ? 1 : 0;\n+        state = (cm.getMapId() >= 970030001 && cm.getMapId() <= 970042711) ? (!onRestingSpot() ? (isFinalBossDone() ? 3 : 1) : 2) : 0;\n \taction(1, 0, 0);\n }\n \n@@ -32,14 +40,62 @@ function action(mode, type, selection) {\n                         status--;\n \n                 if (status == 0) {\n-                        if(state) {\n+                        if(state == 3) {\n+                                if(cm.getPlayer().getEventInstance() != null) {\n+                                        if(!cm.isLeader()) {\n+                                                cm.sendOk(\"Your party leader has not spoken to me yet, please wait him/her talk to me.\");\n+                                                cm.dispose();\n+                                                return;\n+                                        }\n+                                        else {\n+                                                cm.getPlayer().getEventInstance().finishPQ();\n+                                        }\n+                                }\n+                            \n+                                if(cm.isLeader()) {\n+                                        cm.sendOk(\"Your party completed such an astounding feat coming this far, #byou have defeated all the bosses#k, congratulations! Now, tell your party I will be warping everyone out and rewarding them as they talk to me.\");\n+                                }\n+                                else {\n+                                        cm.sendOk(\"For completing all stages in this event, congratulations! Now you will receive a prize that matches your performance here as I warp you out.\");\n+                                }\n+                        }\n+                        else if(state == 2) {\n+                                if(cm.isLeader()) {\n+                                        if(cm.getPlayer().getEventInstance().isEventTeamTogether()) {\n+                                                cm.sendYesNo(\"Is your party ready to proceed to the next stages? Walk through the portal if you think you're done, the time is now.. Now, do you guys REALLY want to proceed?\");\n+                                        }\n+                                        else {\n+                                                cm.sendOk(\"Please wait for your party to reassemble before proceeding.\");\n+                                                cm.dispose();\n+                                                return;\n+                                        }\n+                                }\n+                                else {\n+                                        cm.sendOk(\"Wait for your party leader to give me the signal to proceed. If you're not feeling too well and want to quit, walk through the portal and you will be transported out, you will receive a prize for coming this far.\");\n+                                        cm.dispose();\n+                                        return;\n+                                }\n+                        } else if(state == 1) {\n                                 cm.sendYesNo(\"Do you wish to abandon this event?\");\n                         }\n                         else {\n                                 cm.sendSimple(\"#b<Party Quest: Boss Rush>#k\\r\\n\\r\\nWould you like to collaborate with party members to complete the expedition, or are you brave enough to take it on all by yourself? Have your #bparty leader#k talk to me or make yourself a party.#b\\r\\n#L0#I want to participate in the party quest.\\r\\n#L1#I want to find party members.\\r\\n#L2#I would like to hear more details.\");\n                         }\n                 } else if (status == 1) {\n-                        if(state) {\n+                        if(state == 3) {\n+                                if(!cm.getPlayer().getEventInstance().giveEventReward(cm.getPlayer(), 6)) {\n+                                        cm.sendOk(\"Please arrange a slot in all tabs of your inventory beforehand.\");\n+                                        cm.dispose();\n+                                        return;\n+                                }\n+                                \n+                                cm.warp(970030000);\n+                                cm.dispose();\n+                        } else if(state == 2) {\n+                                var restSpot = ((cm.getMapId() - 1) % 5) + 1;\n+                                cm.getPlayer().getEventInstance().warpEventTeam(970030100 + (500 * restSpot));     //oh well, other maps won't be used anyway\n+                                cm.dispose();\n+                        } else if(state == 1) {\n                                 cm.warp(970030000);\n                                 cm.dispose();\n                         }"}, {"sha": "66c44846febdab29a66b48119e2ef5b60746cbc3", "filename": "scripts/portal/raid_rest.js", "status": "added", "additions": 38, "deletions": 0, "changes": 38, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/scripts/portal/raid_rest.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/scripts/portal/raid_rest.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/raid_rest.js?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -0,0 +1,38 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc> \n+                       Matthias Butz <matze@odinms.de>\n+                       Jan Christian Meyer <vimes@odinms.de>\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License version 3\n+    as published by the Free Software Foundation. You may not use, modify\n+    or distribute this program under any other version of the\n+    GNU Affero General Public License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+/*\n+BossRushPQ - Rest Spot portal\n+@author Ronan\n+*/\n+\n+function enter(pi) {\n+        var evLevel = ((pi.getMapId() - 1) % 5) + 1;\n+        \n+        if(pi.getPlayer().getEventInstance().giveEventReward(pi.getPlayer(), evLevel)) {\n+                pi.warp(970030000);\n+                return true;\n+        }\n+        else {\n+                pi.message(\"You cannot receive an event prize without having an empty room in your EQUIP, USE, SET-UP or ETC inventory.\");\n+                return false;\n+        }\n+}\n\\ No newline at end of file"}, {"sha": "3dff60be1bb798d65a22ba0e63e3db297a4a5f6f", "filename": "scripts/portal/raid_stage.js", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/scripts/portal/raid_stage.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/scripts/portal/raid_stage.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/raid_stage.js?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -25,11 +25,11 @@ BossRushPQ - Next Stage\n */\n \n function enter(pi) {\n-    if(pi.getMap().getMonsters().size() == 0) {\n+    if(pi.getMap().getMonsters().isEmpty()) {\n         var nextStage;\n         \n-        if(pi.getMapId() % 5 == 0) nextStage = pi.getMapId() + 100;\n-        else nextStage = 970030001 + (pi.getMapId() - 970030100 / 500);\n+        if(pi.getMapId() % 500 != 0) nextStage = pi.getMapId() + 100;\n+        else nextStage = 970030001 + ((pi.getMapId() - 970030100) / 500);\n         \n         pi.warp(nextStage);\n         return true;"}, {"sha": "640594508c91b2ca6a6dfc25bb8d4219c5508ecc", "filename": "sql/db_drops.sql", "status": "modified", "additions": 200, "deletions": 200, "changes": 400, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/sql/db_drops.sql", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/sql/db_drops.sql", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/sql/db_drops.sql?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -18798,206 +18798,206 @@\n (9500355, 2388015, 1, 1, 0, 24000),\n (9500356, 2388032, 1, 1, 0, 24000),\n (9500357, 2388016, 1, 1, 0, 24000),\n-(9500357, 4003000, 5, 20, 0, 40000),\n-(9500357, 4003001, 5, 20, 0, 40000),\n-(9500357, 4003002, 5, 20, 0, 40000),\n-(9500357, 4003003, 5, 20, 0, 40000),\n-(9500357, 4004000, 5, 20, 0, 40000),\n-(9500357, 4004001, 5, 20, 0, 40000),\n-(9500357, 4004002, 5, 20, 0, 40000),\n-(9500357, 4004003, 5, 20, 0, 40000),\n-(9500357, 4004004, 5, 20, 0, 40000),\n-(9500357, 4010000, 5, 20, 0, 40000),\n-(9500357, 4010001, 5, 20, 0, 40000),\n-(9500357, 4010002, 5, 20, 0, 40000),\n-(9500357, 4010003, 5, 20, 0, 40000),\n-(9500357, 4010004, 5, 20, 0, 40000),\n-(9500357, 4010005, 5, 20, 0, 40000),\n-(9500357, 4010006, 5, 20, 0, 40000),\n-(9500357, 4010007, 5, 20, 0, 40000),\n-(9500357, 4020000, 5, 20, 0, 40000),\n-(9500357, 4020001, 5, 20, 0, 40000),\n-(9500357, 4020002, 5, 20, 0, 40000),\n-(9500357, 4020003, 5, 20, 0, 40000),\n-(9500357, 4020004, 5, 20, 0, 40000),\n-(9500357, 4020005, 5, 20, 0, 40000),\n-(9500357, 4020006, 5, 20, 0, 40000),\n-(9500357, 4020007, 5, 20, 0, 40000),\n-(9500357, 4020008, 5, 20, 0, 40000),\n-(9500357, 2020001, 5, 20, 0, 40000),\n-(9500357, 2020002, 5, 20, 0, 40000),\n-(9500357, 2020003, 5, 20, 0, 40000),\n-(9500357, 2020004, 5, 20, 0, 40000),\n-(9500357, 2020005, 5, 20, 0, 40000),\n-(9500357, 2020006, 5, 20, 0, 40000),\n-(9500357, 2020007, 5, 20, 0, 40000),\n-(9500357, 2020008, 5, 20, 0, 40000),\n-(9500357, 2020009, 5, 20, 0, 40000),\n-(9500357, 2020010, 5, 20, 0, 40000),\n-(9500357, 2020011, 5, 20, 0, 40000),\n-(9500357, 2020012, 5, 20, 0, 40000),\n-(9500357, 2020013, 5, 20, 0, 40000),\n-(9500357, 2020014, 5, 20, 0, 40000),\n-(9500357, 2020015, 5, 20, 0, 40000),\n-(9500357, 2020016, 5, 20, 0, 40000),\n-(9500357, 2020017, 5, 20, 0, 40000),\n-(9500357, 2020018, 5, 20, 0, 40000),\n-(9500357, 2020019, 5, 20, 0, 40000),\n-(9500357, 2020020, 5, 20, 0, 40000),\n-(9500357, 1092022, 1, 1, 0, 4000),\n-(9500357, 1092030, 1, 1, 0, 4000),\n-(9500357, 1092045, 1, 1, 0, 4000),\n-(9500357, 1092046, 1, 1, 0, 4000),\n-(9500357, 1092047, 1, 1, 0, 4000),\n-(9500357, 1112407, 1, 1, 0, 4000),\n-(9500357, 1112408, 1, 1, 0, 4000),\n-(9500358, 4003000, 5, 20, 0, 40000),\n-(9500358, 4003001, 5, 20, 0, 40000),\n-(9500358, 4003002, 5, 20, 0, 40000),\n-(9500358, 4003003, 5, 20, 0, 40000),\n-(9500358, 4004000, 5, 20, 0, 40000),\n-(9500358, 4004001, 5, 20, 0, 40000),\n-(9500358, 4004002, 5, 20, 0, 40000),\n-(9500358, 4004003, 5, 20, 0, 40000),\n-(9500358, 4004004, 5, 20, 0, 40000),\n-(9500358, 4010000, 5, 20, 0, 40000),\n-(9500358, 4010001, 5, 20, 0, 40000),\n-(9500358, 4010002, 5, 20, 0, 40000),\n-(9500358, 4010003, 5, 20, 0, 40000),\n-(9500358, 4010004, 5, 20, 0, 40000),\n-(9500358, 4010005, 5, 20, 0, 40000),\n-(9500358, 4010006, 5, 20, 0, 40000),\n-(9500358, 4010007, 5, 20, 0, 40000),\n-(9500358, 4020000, 5, 20, 0, 40000),\n-(9500358, 4020001, 5, 20, 0, 40000),\n-(9500358, 4020002, 5, 20, 0, 40000),\n-(9500358, 4020003, 5, 20, 0, 40000),\n-(9500358, 4020004, 5, 20, 0, 40000),\n-(9500358, 4020005, 5, 20, 0, 40000),\n-(9500358, 4020006, 5, 20, 0, 40000),\n-(9500358, 4020007, 5, 20, 0, 40000),\n-(9500358, 4020008, 5, 20, 0, 40000),\n-(9500358, 2020001, 5, 20, 0, 40000),\n-(9500358, 2020002, 5, 20, 0, 40000),\n-(9500358, 2020003, 5, 20, 0, 40000),\n-(9500358, 2020004, 5, 20, 0, 40000),\n-(9500358, 2020005, 5, 20, 0, 40000),\n-(9500358, 2020006, 5, 20, 0, 40000),\n-(9500358, 2020007, 5, 20, 0, 40000),\n-(9500358, 2020008, 5, 20, 0, 40000),\n-(9500358, 2020009, 5, 20, 0, 40000),\n-(9500358, 2020010, 5, 20, 0, 40000),\n-(9500358, 2020011, 5, 20, 0, 40000),\n-(9500358, 2020012, 5, 20, 0, 40000),\n-(9500358, 2020013, 5, 20, 0, 40000),\n-(9500358, 2020014, 5, 20, 0, 40000),\n-(9500358, 2020015, 5, 20, 0, 40000),\n-(9500358, 2020016, 5, 20, 0, 40000),\n-(9500358, 2020017, 5, 20, 0, 40000),\n-(9500358, 2020018, 5, 20, 0, 40000),\n-(9500358, 2020019, 5, 20, 0, 40000),\n-(9500358, 2020020, 5, 20, 0, 40000),\n-(9500358, 1052166, 1, 1, 0, 4000),\n-(9500358, 2330002, 1, 1, 0, 4000),\n-(9500358, 2070011, 1, 1, 0, 4000),\n-(9500358, 1102021, 1, 1, 0, 4000),\n-(9500358, 1102022, 1, 1, 0, 4000),\n-(9500358, 1102023, 1, 1, 0, 4000),\n-(9500358, 1102024, 1, 1, 0, 4000),\n-(9500358, 1102078, 1, 1, 0, 4000),\n-(9500358, 1122001, 1, 1, 0, 4000),\n-(9500358, 1122002, 1, 1, 0, 4000),\n-(9500358, 1122003, 1, 1, 0, 4000),\n-(9500358, 1122004, 1, 1, 0, 4000),\n-(9500358, 1122005, 1, 1, 0, 4000),\n-(9500358, 1122006, 1, 1, 0, 4000),\n-(9500358, 1082175, 1, 1, 0, 4000),\n-(9500358, 1082176, 1, 1, 0, 4000),\n-(9500358, 1082177, 1, 1, 0, 4000),\n-(9500358, 1082178, 1, 1, 0, 4000),\n-(9500358, 1082179, 1, 1, 0, 4000),\n-(9500359, 4003000, 5, 20, 0, 40000),\n-(9500359, 4003001, 5, 20, 0, 40000),\n-(9500359, 4003002, 5, 20, 0, 40000),\n-(9500359, 4003003, 5, 20, 0, 40000),\n-(9500359, 4004000, 5, 20, 0, 40000),\n-(9500359, 4004001, 5, 20, 0, 40000),\n-(9500359, 4004002, 5, 20, 0, 40000),\n-(9500359, 4004003, 5, 20, 0, 40000),\n-(9500359, 4004004, 5, 20, 0, 40000),\n-(9500359, 4010000, 5, 20, 0, 40000),\n-(9500359, 4010001, 5, 20, 0, 40000),\n-(9500359, 4010002, 5, 20, 0, 40000),\n-(9500359, 4010003, 5, 20, 0, 40000),\n-(9500359, 4010004, 5, 20, 0, 40000),\n-(9500359, 4010005, 5, 20, 0, 40000),\n-(9500359, 4010006, 5, 20, 0, 40000),\n-(9500359, 4010007, 5, 20, 0, 40000),\n-(9500359, 4020000, 5, 20, 0, 40000),\n-(9500359, 4020001, 5, 20, 0, 40000),\n-(9500359, 4020002, 5, 20, 0, 40000),\n-(9500359, 4020003, 5, 20, 0, 40000),\n-(9500359, 4020004, 5, 20, 0, 40000),\n-(9500359, 4020005, 5, 20, 0, 40000),\n-(9500359, 4020006, 5, 20, 0, 40000),\n-(9500359, 4020007, 5, 20, 0, 40000),\n-(9500359, 4020008, 5, 20, 0, 40000),\n-(9500359, 2020001, 5, 20, 0, 40000),\n-(9500359, 2020002, 5, 20, 0, 40000),\n-(9500359, 2020003, 5, 20, 0, 40000),\n-(9500359, 2020004, 5, 20, 0, 40000),\n-(9500359, 2020005, 5, 20, 0, 40000),\n-(9500359, 2020006, 5, 20, 0, 40000),\n-(9500359, 2020007, 5, 20, 0, 40000),\n-(9500359, 2020008, 5, 20, 0, 40000),\n-(9500359, 2020009, 5, 20, 0, 40000),\n-(9500359, 2020010, 5, 20, 0, 40000),\n-(9500359, 2020011, 5, 20, 0, 40000),\n-(9500359, 2020012, 5, 20, 0, 40000),\n-(9500359, 2020013, 5, 20, 0, 40000),\n-(9500359, 2020014, 5, 20, 0, 40000),\n-(9500359, 2020015, 5, 20, 0, 40000),\n-(9500359, 2020016, 5, 20, 0, 40000),\n-(9500359, 2020017, 5, 20, 0, 40000),\n-(9500359, 2020018, 5, 20, 0, 40000),\n-(9500359, 2020019, 5, 20, 0, 40000),\n-(9500359, 2020020, 5, 20, 0, 40000),\n-(9500359, 1052166, 1, 1, 0, 4000),\n-(9500359, 2280000, 1, 1, 0, 4000),\n-(9500359, 2280001, 1, 1, 0, 4000),\n-(9500359, 2280002, 1, 1, 0, 4000),\n-(9500359, 2280003, 1, 1, 0, 4000),\n-(9500359, 2280004, 1, 1, 0, 4000),\n-(9500359, 2280005, 1, 1, 0, 4000),\n-(9500359, 2280006, 1, 1, 0, 4000),\n-(9500359, 2280007, 1, 1, 0, 4000),\n-(9500359, 2280008, 1, 1, 0, 4000),\n-(9500359, 2280009, 1, 1, 0, 4000),\n-(9500359, 2280010, 1, 1, 0, 4000),\n-(9500359, 2280011, 1, 1, 0, 4000),\n-(9500359, 2280012, 1, 1, 0, 4000),\n-(9500359, 2044712, 1, 1, 0, 4000),\n-(9500359, 2044612, 1, 1, 0, 4000),\n-(9500359, 2044512, 1, 1, 0, 4000),\n-(9500359, 2044417, 1, 1, 0, 4000),\n-(9500359, 2044317, 1, 1, 0, 4000),\n-(9500359, 2044217, 1, 1, 0, 4000),\n-(9500359, 2044117, 1, 1, 0, 4000),\n-(9500359, 2044025, 1, 1, 0, 4000),\n-(9500359, 2043812, 1, 1, 0, 4000),\n-(9500359, 2043712, 1, 1, 0, 4000),\n-(9500359, 2043312, 1, 1, 0, 4000),\n-(9500359, 2043217, 1, 1, 0, 4000),\n-(9500359, 2043117, 1, 1, 0, 4000),\n-(9500359, 2043023, 1, 1, 0, 4000),\n-(9500359, 1132005, 1, 1, 0, 4000),\n-(9500359, 1132006, 1, 1, 0, 4000),\n-(9500359, 1132007, 1, 1, 0, 4000),\n-(9500359, 1132008, 1, 1, 0, 4000),\n-(9500359, 1132009, 1, 1, 0, 4000),\n-(9500359, 1422011, 1, 1, 0, 4000),\n-(9500359, 1432046, 1, 1, 0, 4000),\n-(9500359, 1332030, 1, 1, 0, 4000);\n+(9500317, 4003000, 5, 20, 0, 40000),\n+(9500317, 4003001, 5, 20, 0, 40000),\n+(9500317, 4003002, 5, 20, 0, 40000),\n+(9500317, 4003003, 5, 20, 0, 40000),\n+(9500317, 4004000, 5, 20, 0, 40000),\n+(9500317, 4004001, 5, 20, 0, 40000),\n+(9500317, 4004002, 5, 20, 0, 40000),\n+(9500317, 4004003, 5, 20, 0, 40000),\n+(9500317, 4004004, 5, 20, 0, 40000),\n+(9500317, 4010000, 5, 20, 0, 40000),\n+(9500317, 4010001, 5, 20, 0, 40000),\n+(9500317, 4010002, 5, 20, 0, 40000),\n+(9500317, 4010003, 5, 20, 0, 40000),\n+(9500317, 4010004, 5, 20, 0, 40000),\n+(9500317, 4010005, 5, 20, 0, 40000),\n+(9500317, 4010006, 5, 20, 0, 40000),\n+(9500317, 4010007, 5, 20, 0, 40000),\n+(9500317, 4020000, 5, 20, 0, 40000),\n+(9500317, 4020001, 5, 20, 0, 40000),\n+(9500317, 4020002, 5, 20, 0, 40000),\n+(9500317, 4020003, 5, 20, 0, 40000),\n+(9500317, 4020004, 5, 20, 0, 40000),\n+(9500317, 4020005, 5, 20, 0, 40000),\n+(9500317, 4020006, 5, 20, 0, 40000),\n+(9500317, 4020007, 5, 20, 0, 40000),\n+(9500317, 4020008, 5, 20, 0, 40000),\n+(9500317, 2020001, 5, 20, 0, 40000),\n+(9500317, 2020002, 5, 20, 0, 40000),\n+(9500317, 2020003, 5, 20, 0, 40000),\n+(9500317, 2020004, 5, 20, 0, 40000),\n+(9500317, 2020005, 5, 20, 0, 40000),\n+(9500317, 2020006, 5, 20, 0, 40000),\n+(9500317, 2020007, 5, 20, 0, 40000),\n+(9500317, 2020008, 5, 20, 0, 40000),\n+(9500317, 2020009, 5, 20, 0, 40000),\n+(9500317, 2020010, 5, 20, 0, 40000),\n+(9500317, 2020011, 5, 20, 0, 40000),\n+(9500317, 2020012, 5, 20, 0, 40000),\n+(9500317, 2020013, 5, 20, 0, 40000),\n+(9500317, 2020014, 5, 20, 0, 40000),\n+(9500317, 2020015, 5, 20, 0, 40000),\n+(9500317, 2020016, 5, 20, 0, 40000),\n+(9500317, 2020017, 5, 20, 0, 40000),\n+(9500317, 2020018, 5, 20, 0, 40000),\n+(9500317, 2020019, 5, 20, 0, 40000),\n+(9500317, 2020020, 5, 20, 0, 40000),\n+(9500317, 1092022, 1, 1, 0, 4000),\n+(9500317, 1092030, 1, 1, 0, 4000),\n+(9500317, 1092045, 1, 1, 0, 4000),\n+(9500317, 1092046, 1, 1, 0, 4000),\n+(9500317, 1092047, 1, 1, 0, 4000),\n+(9500317, 1112407, 1, 1, 0, 4000),\n+(9500317, 1112408, 1, 1, 0, 4000),\n+(9500318, 4003000, 5, 20, 0, 40000),\n+(9500318, 4003001, 5, 20, 0, 40000),\n+(9500318, 4003002, 5, 20, 0, 40000),\n+(9500318, 4003003, 5, 20, 0, 40000),\n+(9500318, 4004000, 5, 20, 0, 40000),\n+(9500318, 4004001, 5, 20, 0, 40000),\n+(9500318, 4004002, 5, 20, 0, 40000),\n+(9500318, 4004003, 5, 20, 0, 40000),\n+(9500318, 4004004, 5, 20, 0, 40000),\n+(9500318, 4010000, 5, 20, 0, 40000),\n+(9500318, 4010001, 5, 20, 0, 40000),\n+(9500318, 4010002, 5, 20, 0, 40000),\n+(9500318, 4010003, 5, 20, 0, 40000),\n+(9500318, 4010004, 5, 20, 0, 40000),\n+(9500318, 4010005, 5, 20, 0, 40000),\n+(9500318, 4010006, 5, 20, 0, 40000),\n+(9500318, 4010007, 5, 20, 0, 40000),\n+(9500318, 4020000, 5, 20, 0, 40000),\n+(9500318, 4020001, 5, 20, 0, 40000),\n+(9500318, 4020002, 5, 20, 0, 40000),\n+(9500318, 4020003, 5, 20, 0, 40000),\n+(9500318, 4020004, 5, 20, 0, 40000),\n+(9500318, 4020005, 5, 20, 0, 40000),\n+(9500318, 4020006, 5, 20, 0, 40000),\n+(9500318, 4020007, 5, 20, 0, 40000),\n+(9500318, 4020008, 5, 20, 0, 40000),\n+(9500318, 2020001, 5, 20, 0, 40000),\n+(9500318, 2020002, 5, 20, 0, 40000),\n+(9500318, 2020003, 5, 20, 0, 40000),\n+(9500318, 2020004, 5, 20, 0, 40000),\n+(9500318, 2020005, 5, 20, 0, 40000),\n+(9500318, 2020006, 5, 20, 0, 40000),\n+(9500318, 2020007, 5, 20, 0, 40000),\n+(9500318, 2020008, 5, 20, 0, 40000),\n+(9500318, 2020009, 5, 20, 0, 40000),\n+(9500318, 2020010, 5, 20, 0, 40000),\n+(9500318, 2020011, 5, 20, 0, 40000),\n+(9500318, 2020012, 5, 20, 0, 40000),\n+(9500318, 2020013, 5, 20, 0, 40000),\n+(9500318, 2020014, 5, 20, 0, 40000),\n+(9500318, 2020015, 5, 20, 0, 40000),\n+(9500318, 2020016, 5, 20, 0, 40000),\n+(9500318, 2020017, 5, 20, 0, 40000),\n+(9500318, 2020018, 5, 20, 0, 40000),\n+(9500318, 2020019, 5, 20, 0, 40000),\n+(9500318, 2020020, 5, 20, 0, 40000),\n+(9500318, 1052166, 1, 1, 0, 4000),\n+(9500318, 2330002, 1, 1, 0, 4000),\n+(9500318, 2070011, 1, 1, 0, 4000),\n+(9500318, 1102021, 1, 1, 0, 4000),\n+(9500318, 1102022, 1, 1, 0, 4000),\n+(9500318, 1102023, 1, 1, 0, 4000),\n+(9500318, 1102024, 1, 1, 0, 4000),\n+(9500318, 1102078, 1, 1, 0, 4000),\n+(9500318, 1122001, 1, 1, 0, 4000),\n+(9500318, 1122002, 1, 1, 0, 4000),\n+(9500318, 1122003, 1, 1, 0, 4000),\n+(9500318, 1122004, 1, 1, 0, 4000),\n+(9500318, 1122005, 1, 1, 0, 4000),\n+(9500318, 1122006, 1, 1, 0, 4000),\n+(9500318, 1082175, 1, 1, 0, 4000),\n+(9500318, 1082176, 1, 1, 0, 4000),\n+(9500318, 1082177, 1, 1, 0, 4000),\n+(9500318, 1082178, 1, 1, 0, 4000),\n+(9500318, 1082179, 1, 1, 0, 4000),\n+(9500319, 4003000, 5, 20, 0, 40000),\n+(9500319, 4003001, 5, 20, 0, 40000),\n+(9500319, 4003002, 5, 20, 0, 40000),\n+(9500319, 4003003, 5, 20, 0, 40000),\n+(9500319, 4004000, 5, 20, 0, 40000),\n+(9500319, 4004001, 5, 20, 0, 40000),\n+(9500319, 4004002, 5, 20, 0, 40000),\n+(9500319, 4004003, 5, 20, 0, 40000),\n+(9500319, 4004004, 5, 20, 0, 40000),\n+(9500319, 4010000, 5, 20, 0, 40000),\n+(9500319, 4010001, 5, 20, 0, 40000),\n+(9500319, 4010002, 5, 20, 0, 40000),\n+(9500319, 4010003, 5, 20, 0, 40000),\n+(9500319, 4010004, 5, 20, 0, 40000),\n+(9500319, 4010005, 5, 20, 0, 40000),\n+(9500319, 4010006, 5, 20, 0, 40000),\n+(9500319, 4010007, 5, 20, 0, 40000),\n+(9500319, 4020000, 5, 20, 0, 40000),\n+(9500319, 4020001, 5, 20, 0, 40000),\n+(9500319, 4020002, 5, 20, 0, 40000),\n+(9500319, 4020003, 5, 20, 0, 40000),\n+(9500319, 4020004, 5, 20, 0, 40000),\n+(9500319, 4020005, 5, 20, 0, 40000),\n+(9500319, 4020006, 5, 20, 0, 40000),\n+(9500319, 4020007, 5, 20, 0, 40000),\n+(9500319, 4020008, 5, 20, 0, 40000),\n+(9500319, 2020001, 5, 20, 0, 40000),\n+(9500319, 2020002, 5, 20, 0, 40000),\n+(9500319, 2020003, 5, 20, 0, 40000),\n+(9500319, 2020004, 5, 20, 0, 40000),\n+(9500319, 2020005, 5, 20, 0, 40000),\n+(9500319, 2020006, 5, 20, 0, 40000),\n+(9500319, 2020007, 5, 20, 0, 40000),\n+(9500319, 2020008, 5, 20, 0, 40000),\n+(9500319, 2020009, 5, 20, 0, 40000),\n+(9500319, 2020010, 5, 20, 0, 40000),\n+(9500319, 2020011, 5, 20, 0, 40000),\n+(9500319, 2020012, 5, 20, 0, 40000),\n+(9500319, 2020013, 5, 20, 0, 40000),\n+(9500319, 2020014, 5, 20, 0, 40000),\n+(9500319, 2020015, 5, 20, 0, 40000),\n+(9500319, 2020016, 5, 20, 0, 40000),\n+(9500319, 2020017, 5, 20, 0, 40000),\n+(9500319, 2020018, 5, 20, 0, 40000),\n+(9500319, 2020019, 5, 20, 0, 40000),\n+(9500319, 2020020, 5, 20, 0, 40000),\n+(9500319, 1052166, 1, 1, 0, 4000),\n+(9500319, 2280000, 1, 1, 0, 4000),\n+(9500319, 2280001, 1, 1, 0, 4000),\n+(9500319, 2280002, 1, 1, 0, 4000),\n+(9500319, 2280003, 1, 1, 0, 4000),\n+(9500319, 2280004, 1, 1, 0, 4000),\n+(9500319, 2280005, 1, 1, 0, 4000),\n+(9500319, 2280006, 1, 1, 0, 4000),\n+(9500319, 2280007, 1, 1, 0, 4000),\n+(9500319, 2280008, 1, 1, 0, 4000),\n+(9500319, 2280009, 1, 1, 0, 4000),\n+(9500319, 2280010, 1, 1, 0, 4000),\n+(9500319, 2280011, 1, 1, 0, 4000),\n+(9500319, 2280012, 1, 1, 0, 4000),\n+(9500319, 2044712, 1, 1, 0, 4000),\n+(9500319, 2044612, 1, 1, 0, 4000),\n+(9500319, 2044512, 1, 1, 0, 4000),\n+(9500319, 2044417, 1, 1, 0, 4000),\n+(9500319, 2044317, 1, 1, 0, 4000),\n+(9500319, 2044217, 1, 1, 0, 4000),\n+(9500319, 2044117, 1, 1, 0, 4000),\n+(9500319, 2044025, 1, 1, 0, 4000),\n+(9500319, 2043812, 1, 1, 0, 4000),\n+(9500319, 2043712, 1, 1, 0, 4000),\n+(9500319, 2043312, 1, 1, 0, 4000),\n+(9500319, 2043217, 1, 1, 0, 4000),\n+(9500319, 2043117, 1, 1, 0, 4000),\n+(9500319, 2043023, 1, 1, 0, 4000),\n+(9500319, 1132005, 1, 1, 0, 4000),\n+(9500319, 1132006, 1, 1, 0, 4000),\n+(9500319, 1132007, 1, 1, 0, 4000),\n+(9500319, 1132008, 1, 1, 0, 4000),\n+(9500319, 1132009, 1, 1, 0, 4000),\n+(9500319, 1422011, 1, 1, 0, 4000),\n+(9500319, 1432046, 1, 1, 0, 4000),\n+(9500319, 1332030, 1, 1, 0, 4000);\n \n # (dropperid, itemid, minqty, maxqty, questid, chance)\n "}, {"sha": "9588f49755662ef6f13c387d7f12862e7d622b52", "filename": "src/client/MapleCharacter.java", "status": "modified", "additions": 13, "deletions": 1, "changes": 14, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/src/client/MapleCharacter.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/src/client/MapleCharacter.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/MapleCharacter.java?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -1667,6 +1667,10 @@ public void gainGachaExp() {\n     public void gainGachaExp(int gain) {\n         updateSingleStat(MapleStat.GACHAEXP, gachaexp.addAndGet(gain));\n     }\n+    \n+    public void gainExp(int gain) {\n+        gainExp(gain, true, true);\n+    }\n \n     public void gainExp(int gain, boolean show, boolean inChat) {\n         gainExp(gain, 0, show, inChat, true);\n@@ -2730,6 +2734,14 @@ public boolean hasMerchant() {\n     public boolean haveItem(int itemid) {\n         return getItemQuantity(itemid, false) > 0;\n     }\n+    \n+    public boolean hasEmptySlot(int itemId) {\n+        return getInventory(MapleItemInformationProvider.getInstance().getInventoryType(itemId)).getNextFreeSlot() > -1;\n+    }\n+    \n+    public boolean hasEmptySlot(byte invType) {\n+        return getInventory(MapleInventoryType.getByType(invType)).getNextFreeSlot() > -1;\n+    }\n \n     public void increaseGuildCapacity() { //hopefully nothing is null\n         if (getMeso() < getGuild().getIncreaseGuildCost(getGuild().getCapacity())) {\n@@ -2787,7 +2799,7 @@ public boolean isMapObjectVisible(MapleMapObject mo) {\n     }\n \n     public boolean isPartyLeader() {\n-        return party.getLeader() == party.getMemberById(getId());\n+        return party.getLeaderId() == getId();\n     }\n \n     public void leaveMap() {"}, {"sha": "651b6fbd7f525657bd6b6f0f0c113ac9f97573a2", "filename": "src/client/MapleClient.java", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/src/client/MapleClient.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/src/client/MapleClient.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/MapleClient.java?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -803,10 +803,12 @@ public final void disconnect(boolean shutdown, boolean cashshop) {//once per Map\n \t\t\t\t\t\tif (messengerid > 0) {\n \t\t\t\t\t\t\tworlda.leaveMessenger(messengerid, chrm);\n \t\t\t\t\t\t}\n-\t\t\t\t\t\t/*    if (fid > 0) {\n-\t                \t   final MapleFamily family = worlda.getFamily(fid);\n-\t                \t   family.\n-\t                   }*/                  \n+                                                /*      \n+\t\t\t\t\t\tif (fid > 0) {\n+                                                        final MapleFamily family = worlda.getFamily(fid);\n+                                                        family.\n+                                                }\n+                                                */                  \n \t\t\t\t\t\tfor (MapleQuestStatus status : player.getStartedQuests()) { //This is for those quests that you have to stay logged in for a certain amount of time\n \t\t\t\t\t\t\tMapleQuest quest = status.getQuest();\n \t\t\t\t\t\t\tif (quest.getTimeLimit() > 0) {"}, {"sha": "01e675e0febae2dbfe47bdb44afdb42dbc43f8e1", "filename": "src/constants/ServerConstants.java", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/src/constants/ServerConstants.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/src/constants/ServerConstants.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/constants/ServerConstants.java?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -37,6 +37,7 @@\n     public static final boolean USE_REFRESH_RANK_MOVE = true;\n     \n     public static final int MAX_AP = 999;\n+    public static final int MAX_EVENT_LEVELS = 8;               //event has different levels of rewarding system\n     public static final long BLOCK_DUEY_RACE_COND = (long)(0.5 * 1000);\n     public static final long PET_LOOT_UPON_ATTACK = (long)(0.7 * 1000);            //time the pet must wait before trying to pick items up.\n     \n@@ -57,8 +58,7 @@\n     public static final double PET_AUTOHP_RATIO = 0.99;         //will automatically consume potions until given ratio of the MaxHP/MaxMP is reached.\n     public static final double PET_AUTOMP_RATIO = 0.99;\n     \n-    //Should bosses really use 1HP,1MP attacks in dojo?\n-    public static final boolean USE_DEADLY_DOJO = false;\n+    public static final boolean USE_DEADLY_DOJO = false;        //Should bosses really use 1HP,1MP attacks in dojo?\n     \n     //Rates\n     public static final int EXP_RATE = 10;"}, {"sha": "beea9bd0f22247129b81005c5380f298eaddb139", "filename": "src/net/server/world/MapleParty.java", "status": "modified", "additions": 15, "deletions": 5, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/src/net/server/world/MapleParty.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/src/net/server/world/MapleParty.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/world/MapleParty.java?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -27,14 +27,14 @@\n import java.util.List;\n \n public class MapleParty {\n-    private MaplePartyCharacter leader;\n+    private int leaderId;\n     private List<MaplePartyCharacter> members = new LinkedList<MaplePartyCharacter>();\n     private List<MaplePartyCharacter> pqMembers = null;\n     private int id;\n \n     public MapleParty(int id, MaplePartyCharacter chrfor) {\n-        this.leader = chrfor;\n-        this.members.add(this.leader);\n+        this.leaderId = chrfor.getId();\n+        this.members.add(chrfor);\n         this.id = id;\n     }\n \n@@ -51,7 +51,7 @@ public void removeMember(MaplePartyCharacter member) {\n     }\n \n     public void setLeader(MaplePartyCharacter victim) {\n-        this.leader = victim;\n+        this.leaderId = victim.getId();\n     }\n \n     public void updateMember(MaplePartyCharacter member) {\n@@ -95,9 +95,19 @@ public int getId() {\n     public void setId(int id) {\n         this.id = id;\n     }\n+    \n+    public int getLeaderId() {\n+        return leaderId;\n+    }\n \n     public MaplePartyCharacter getLeader() {\n-        return leader;\n+        for(MaplePartyCharacter mpc: members) {\n+            if(mpc.getId() == leaderId) {\n+                return mpc;\n+            }\n+        }\n+        \n+        return null;\n     }\n     \n     @Override"}, {"sha": "b7c9d0d6125830f4dd498bdd8a2c00918dc6fb30", "filename": "src/scripting/AbstractPlayerInteraction.java", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/src/scripting/AbstractPlayerInteraction.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/src/scripting/AbstractPlayerInteraction.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/scripting/AbstractPlayerInteraction.java?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -531,7 +531,7 @@ public boolean isLeader() {\n \t\tif(getParty() == null)\n \t\t\treturn false;\n \t\t\n-\t\treturn getParty().getLeader().equals(getPlayer().getMPC());\n+                return getParty().getLeaderId() == getPlayer().getId();\n \t}\n \n \tpublic void givePartyItems(int id, short quantity, List<MapleCharacter> party) {"}, {"sha": "4ada709f290136eada195482ab5ef22e6d6fe12b", "filename": "src/scripting/event/EventInstanceManager.java", "status": "modified", "additions": 159, "deletions": 14, "changes": 173, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/src/scripting/event/EventInstanceManager.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/src/scripting/event/EventInstanceManager.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/scripting/event/EventInstanceManager.java?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -46,13 +46,16 @@\n import server.maps.MapleMapFactory;\n import tools.DatabaseConnection;\n import client.MapleCharacter;\n+import constants.ItemConstants;\n+import constants.ServerConstants;\n import java.util.concurrent.ScheduledFuture;\n import java.util.logging.Level;\n import java.util.logging.Logger;\n+import scripting.AbstractPlayerInteraction;\n \n /**\n  *\n- * @author Matze\n+ * @author Matze, Ronan\n  */\n public class EventInstanceManager {\n \tprivate List<MapleCharacter> chars = new ArrayList<>();\n@@ -72,7 +75,12 @@\n         private final WriteLock wL = mutex.writeLock();\n         private ScheduledFuture<?> event_schedule = null;\n         private boolean disposed = false;\n-\n+        \n+        // multi-leveled PQ rewards!\n+        private Map<Integer, List<Integer>> collectionSet = new HashMap<>(ServerConstants.MAX_EVENT_LEVELS);\n+        private Map<Integer, List<Integer>> collectionQty = new HashMap<>(ServerConstants.MAX_EVENT_LEVELS);\n+        private Map<Integer, Integer> collectionExp = new HashMap<>(ServerConstants.MAX_EVENT_LEVELS);\n+        \n \tpublic EventInstanceManager(EventManager em, String name) {\n \t\tthis.em = em;\n \t\tthis.name = name;\n@@ -144,16 +152,51 @@ public void startEventTimer(long time) {\n \t\teventTime = time;\n                 \n                 event_schedule = TimerManager.getInstance().schedule(new Runnable() {\n-                    public void run() {\n-                        try {\n-                            em.getIv().invokeFunction(\"scheduledTimeout\", EventInstanceManager.this);\n-                        } catch (ScriptException | NoSuchMethodException ex) {\n-                            Logger.getLogger(EventManager.class.getName()).log(Level.SEVERE, null, ex);\n+                        public void run() {\n+                                try {\n+                                        em.getIv().invokeFunction(\"scheduledTimeout\", EventInstanceManager.this);\n+                                        dismissEventTimer();\n+                                } catch (ScriptException | NoSuchMethodException ex) {\n+                                        Logger.getLogger(EventManager.class.getName()).log(Level.SEVERE, null, ex);\n+                                }\n                         }\n-                    }\n                 }, time);\n \t}\n-\n+        \n+        public void addEventTimer(long time) {\n+                if(event_schedule != null) {\n+                        if(event_schedule.cancel(false)) {\n+                                long nextTime = getTimeLeft() + time;\n+                                eventTime += time;\n+\n+                                event_schedule = TimerManager.getInstance().schedule(new Runnable() {\n+                                        public void run() {\n+                                                try {\n+                                                        em.getIv().invokeFunction(\"scheduledTimeout\", EventInstanceManager.this);\n+                                                        dismissEventTimer();\n+                                                } catch (ScriptException | NoSuchMethodException ex) {\n+                                                        Logger.getLogger(EventManager.class.getName()).log(Level.SEVERE, null, ex);\n+                                                }\n+                                        }\n+                                }, nextTime);\n+                        }\n+                }\n+                else {\n+                        startEventTimer(time);\n+                }\n+        }\n+        \n+        public void cancelEventTimer() {\n+                if(event_schedule != null) event_schedule.cancel(false);\n+                dismissEventTimer();\n+        }\n+        \n+        private void dismissEventTimer() {\n+                event_schedule = null;\n+                eventTime = 0;\n+                timeStarted = 0;\n+        }\n+        \n \tpublic boolean isTimerStarted() {\n \t\treturn eventTime > 0 && timeStarted > 0;\n \t}\n@@ -318,7 +361,7 @@ public void dispose() {\n                 wL.unlock();\n             }\n             \n-            if(event_schedule != null) event_schedule.cancel(true);\n+            if(event_schedule != null) event_schedule.cancel(false);\n \n             mobs.clear();\n             killCount.clear();\n@@ -388,9 +431,9 @@ public String getProperty(String key) {\n \t\treturn props.getProperty(key);\n \t}\n \n-    public Properties getProperties(){\n-    \treturn props;\n-    }\n+        public Properties getProperties(){\n+            return props;\n+        }\n \t\n \tpublic void leftParty(MapleCharacter chr) {\n \t\ttry {\n@@ -425,7 +468,7 @@ public void removePlayer(MapleCharacter chr) {\n \t}\n \n \tpublic boolean isLeader(MapleCharacter chr) {\n-\t\treturn (chr.getParty().getLeader().getId() == chr.getId());\n+\t\treturn (chr.getParty().getLeaderId() == chr.getId());\n \t}\n         \n         public final MapleMap setInstanceMap(final int mapid) { //gets instance map from the channelserv\n@@ -468,4 +511,106 @@ public final boolean disposeIfPlayerBelow(final byte size, final int towarp) {\n             }\n             return false;\n         }\n+        \n+        private List<Integer> convertToIntegerArray(List<Double> list) {\n+            List<Integer> intList = new ArrayList<>();\n+            for(Double d: list) intList.add(d.intValue());\n+            \n+            return intList;\n+        }\n+        \n+        public final void setEventRewards(List<Double> rwds, List<Double> qtys) {\n+            setEventRewards(1, rwds, qtys);\n+        }\n+        \n+        public final void setEventRewards(int eventLevel, List<Double> rwds, List<Double> qtys) {\n+            setEventRewards(eventLevel, rwds, qtys, 0);\n+        }\n+        \n+        public final void setEventRewards(int eventLevel, List<Double> rwds, List<Double> qtys, int expGiven) {\n+            // fixed EXP will be rewarded at the same time the random item is given\n+            \n+            if(eventLevel <= 0 || eventLevel > ServerConstants.MAX_EVENT_LEVELS) return;\n+            eventLevel--;    //event level starts from 1\n+            \n+            List<Integer> rewardIds = convertToIntegerArray(rwds);\n+            List<Integer> rewardQtys = convertToIntegerArray(qtys);\n+            \n+            //rewardsSet and rewardsQty hold temporary values\n+            collectionSet.put(eventLevel, rewardIds);\n+            collectionQty.put(eventLevel, rewardQtys);\n+            collectionExp.put(eventLevel, expGiven);\n+        }\n+        \n+        private byte getRewardListRequirements(int level) {\n+            if(level >= collectionSet.size()) return 0;\n+            \n+            byte rewardTypes = 0;\n+            List<Integer> list = collectionSet.get(level);\n+            \n+            for (Integer itemId : list) {\n+                rewardTypes |= (1 << ItemConstants.getInventoryType(itemId).getType());\n+            }\n+            \n+            return rewardTypes;\n+        }\n+        \n+        private boolean hasRewardSlot(MapleCharacter player, int eventLevel) {\n+            byte listReq = getRewardListRequirements(eventLevel);   //gets all types of items present in the event reward list\n+            \n+            //iterating over all valid inventory types\n+            for(byte type = 1; type <= 5; type++) {\n+                if((listReq >> type) % 2 == 1 && !player.hasEmptySlot(type))\n+                    return false;\n+            }\n+            \n+            return true;\n+        }\n+        \n+        public final boolean giveEventReward(MapleCharacter player) {\n+            return giveEventReward(player, 1);\n+        }\n+        \n+        //gives out EXP & a random item in a similar fashion of when clearing KPQ, LPQ, etc.\n+        public final boolean giveEventReward(MapleCharacter player, int eventLevel) {\n+            eventLevel--;       //event level starts counting from 1\n+            if(eventLevel >= collectionSet.size()) return true;\n+            \n+            List<Integer> rewardsSet = collectionSet.get(eventLevel);\n+            List<Integer> rewardsQty = collectionQty.get(eventLevel);\n+            \n+            Integer rewardExp = collectionExp.get(eventLevel);\n+            if(rewardExp == null) rewardExp = 0;\n+            \n+            if(rewardsSet == null || rewardsSet.isEmpty()) {\n+                if(rewardExp > 0) player.gainExp(rewardExp);\n+                return true;\n+            }\n+            \n+            if(!hasRewardSlot(player, eventLevel)) return false;\n+\n+            AbstractPlayerInteraction api = new AbstractPlayerInteraction(player.getClient());\n+            int rnd = (int)Math.floor(Math.random() * rewardsSet.size());\n+            \n+            api.gainItem(rewardsSet.get(rnd), rewardsQty.get(rnd).shortValue());\n+            if(rewardExp > 0) player.gainExp(rewardExp);\n+            return true;\n+        }\n+        \n+        public final boolean isEventTeamTogether() {\n+            if(chars.size() <= 1) return true;\n+            \n+            int mapId = chars.get(0).getMapId();\n+            for(int i = 1; i < chars.size(); i++) {\n+                if(chars.get(i).getMapId() != mapId) return false;\n+            }\n+            \n+            return true;\n+        }\n+        \n+        public final void warpEventTeam(int warpTo) {\n+            for (MapleCharacter chr : chars) {\n+                chr.changeMap(warpTo);\n+            }\n+        }\n }"}, {"sha": "44cefb7ea8747d4da302456b3129b5f1e056e798", "filename": "src/scripting/event/EventManager.java", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/src/scripting/event/EventManager.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/src/scripting/event/EventManager.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/scripting/event/EventManager.java?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -92,7 +92,7 @@ public void run() {\n \n     public void cancelSchedule() {\n         if(schedule != null)\n-            schedule.cancel(true);\n+            schedule.cancel(false);\n     }\n \n     public ScheduledFuture<?> scheduleAtTimestamp(final String methodName, long timestamp) {"}, {"sha": "1a1bde6ac8e6707ad803774233d648a421a7ad72", "filename": "wz/Map.wz/Map/Map9/970030001.img.xml", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970030001.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970030001.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Map.wz/Map/Map9/970030001.img.xml?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -946,11 +946,12 @@\n     </imgdir>\n     <imgdir name=\"1\">\n       <string name=\"pn\" value=\"out00\"/>\n-      <int name=\"pt\" value=\"2\"/>\n+      <int name=\"pt\" value=\"7\"/>\n       <int name=\"x\" value=\"731\"/>\n       <int name=\"y\" value=\"2199\"/>\n-      <int name=\"tm\" value=\"970030000\"/>\n-      <string name=\"tn\" value=\"out00\"/>\n+      <int name=\"tm\" value=\"999999999\"/>\n+      <string name=\"tn\" value=\"\"/>\n+      <string name=\"script\" value=\"raid_rest\"/>\n     </imgdir>\n   </imgdir>\n </imgdir>"}, {"sha": "c50f9a6633ba12e37acb847a93aae3e47a94aabd", "filename": "wz/Map.wz/Map/Map9/970030002.img.xml", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970030002.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970030002.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Map.wz/Map/Map9/970030002.img.xml?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -946,12 +946,12 @@\n     </imgdir>\n     <imgdir name=\"1\">\n       <string name=\"pn\" value=\"out00\"/>\n-      <int name=\"pt\" value=\"2\"/>\n+      <int name=\"pt\" value=\"7\"/>\n       <int name=\"x\" value=\"731\"/>\n       <int name=\"y\" value=\"2202\"/>\n-      <int name=\"tm\" value=\"970030000\"/>\n-      <string name=\"tn\" value=\"out00\"/>\n-      <string name=\"script\" value=\"\"/>\n+      <int name=\"tm\" value=\"999999999\"/>\n+      <string name=\"tn\" value=\"\"/>\n+      <string name=\"script\" value=\"raid_rest\"/>\n       <int name=\"hideTooltip\" value=\"0\"/>\n       <int name=\"onlyOnce\" value=\"0\"/>\n       <int name=\"delay\" value=\"0\"/>"}, {"sha": "bea8b53e4cd927f6bdf03425ca6bfdf78f4ae420", "filename": "wz/Map.wz/Map/Map9/970030003.img.xml", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970030003.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970030003.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Map.wz/Map/Map9/970030003.img.xml?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -946,11 +946,12 @@\n     </imgdir>\n     <imgdir name=\"1\">\n       <string name=\"pn\" value=\"out00\"/>\n-      <int name=\"pt\" value=\"2\"/>\n+      <int name=\"pt\" value=\"7\"/>\n       <int name=\"x\" value=\"723\"/>\n       <int name=\"y\" value=\"2201\"/>\n-      <int name=\"tm\" value=\"970030000\"/>\n-      <string name=\"tn\" value=\"out00\"/>\n+      <int name=\"tm\" value=\"999999999\"/>\n+      <string name=\"tn\" value=\"\"/>\n+      <string name=\"script\" value=\"raid_rest\"/>\n     </imgdir>\n   </imgdir>\n </imgdir>"}, {"sha": "99fca005d53b21d00add3d26f922988a3950e202", "filename": "wz/Map.wz/Map/Map9/970030004.img.xml", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970030004.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970030004.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Map.wz/Map/Map9/970030004.img.xml?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -946,11 +946,12 @@\n     </imgdir>\n     <imgdir name=\"1\">\n       <string name=\"pn\" value=\"out00\"/>\n-      <int name=\"pt\" value=\"2\"/>\n+      <int name=\"pt\" value=\"7\"/>\n       <int name=\"x\" value=\"724\"/>\n       <int name=\"y\" value=\"2202\"/>\n-      <int name=\"tm\" value=\"970030000\"/>\n-      <string name=\"tn\" value=\"out00\"/>\n+      <int name=\"tm\" value=\"999999999\"/>\n+      <string name=\"tn\" value=\"\"/>\n+      <string name=\"script\" value=\"raid_rest\"/>\n     </imgdir>\n   </imgdir>\n </imgdir>"}, {"sha": "a8abdc5909c48fd8c026b4bd642fb72928eac285", "filename": "wz/Map.wz/Map/Map9/970030005.img.xml", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970030005.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970030005.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Map.wz/Map/Map9/970030005.img.xml?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -946,11 +946,12 @@\n     </imgdir>\n     <imgdir name=\"1\">\n       <string name=\"pn\" value=\"out00\"/>\n-      <int name=\"pt\" value=\"2\"/>\n+      <int name=\"pt\" value=\"7\"/>\n       <int name=\"x\" value=\"727\"/>\n       <int name=\"y\" value=\"2203\"/>\n-      <int name=\"tm\" value=\"970030000\"/>\n-      <string name=\"tn\" value=\"out00\"/>\n+      <int name=\"tm\" value=\"999999999\"/>\n+      <string name=\"tn\" value=\"\"/>\n+      <string name=\"script\" value=\"raid_rest\"/>\n     </imgdir>\n   </imgdir>\n </imgdir>"}, {"sha": "3fb1c0cafa56393dc6453e6c19685b0ceee323ab", "filename": "wz/Map.wz/Map/Map9/970030006.img.xml", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970030006.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970030006.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Map.wz/Map/Map9/970030006.img.xml?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -946,11 +946,12 @@\n     </imgdir>\n     <imgdir name=\"1\">\n       <string name=\"pn\" value=\"out00\"/>\n-      <int name=\"pt\" value=\"2\"/>\n+      <int name=\"pt\" value=\"7\"/>\n       <int name=\"x\" value=\"726\"/>\n       <int name=\"y\" value=\"2203\"/>\n-      <int name=\"tm\" value=\"970030000\"/>\n-      <string name=\"tn\" value=\"out00\"/>\n+      <int name=\"tm\" value=\"999999999\"/>\n+      <string name=\"tn\" value=\"\"/>\n+      <string name=\"script\" value=\"raid_rest\"/>\n     </imgdir>\n   </imgdir>\n </imgdir>"}, {"sha": "535cb56f514085a4ce8e411fea021f308ef06cf6", "filename": "wz/Map.wz/Map/Map9/970030007.img.xml", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970030007.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970030007.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Map.wz/Map/Map9/970030007.img.xml?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -946,11 +946,12 @@\n     </imgdir>\n     <imgdir name=\"1\">\n       <string name=\"pn\" value=\"out00\"/>\n-      <int name=\"pt\" value=\"2\"/>\n+      <int name=\"pt\" value=\"7\"/>\n       <int name=\"x\" value=\"728\"/>\n       <int name=\"y\" value=\"2202\"/>\n-      <int name=\"tm\" value=\"970030000\"/>\n-      <string name=\"tn\" value=\"out00\"/>\n+      <int name=\"tm\" value=\"999999999\"/>\n+      <string name=\"tn\" value=\"\"/>\n+      <string name=\"script\" value=\"raid_rest\"/>\n     </imgdir>\n   </imgdir>\n </imgdir>"}, {"sha": "c6acbee9c2c1a088c7aa1e813eea40378b06c4d3", "filename": "wz/Map.wz/Map/Map9/970030008.img.xml", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970030008.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970030008.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Map.wz/Map/Map9/970030008.img.xml?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -946,11 +946,12 @@\n     </imgdir>\n     <imgdir name=\"1\">\n       <string name=\"pn\" value=\"out00\"/>\n-      <int name=\"pt\" value=\"2\"/>\n+      <int name=\"pt\" value=\"7\"/>\n       <int name=\"x\" value=\"731\"/>\n       <int name=\"y\" value=\"2202\"/>\n-      <int name=\"tm\" value=\"970030000\"/>\n-      <string name=\"tn\" value=\"out00\"/>\n+      <int name=\"tm\" value=\"999999999\"/>\n+      <string name=\"tn\" value=\"\"/>\n+      <string name=\"script\" value=\"raid_rest\"/>\n     </imgdir>\n   </imgdir>\n </imgdir>"}, {"sha": "a4c3bed0411f8b5febb89ac70b64694361e9c70a", "filename": "wz/Map.wz/Map/Map9/970030009.img.xml", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970030009.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970030009.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Map.wz/Map/Map9/970030009.img.xml?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -946,11 +946,12 @@\n     </imgdir>\n     <imgdir name=\"1\">\n       <string name=\"pn\" value=\"out00\"/>\n-      <int name=\"pt\" value=\"2\"/>\n+      <int name=\"pt\" value=\"7\"/>\n       <int name=\"x\" value=\"731\"/>\n       <int name=\"y\" value=\"2203\"/>\n-      <int name=\"tm\" value=\"970030000\"/>\n-      <string name=\"tn\" value=\"out00\"/>\n+      <int name=\"tm\" value=\"999999999\"/>\n+      <string name=\"tn\" value=\"\"/>\n+      <string name=\"script\" value=\"raid_rest\"/>\n     </imgdir>\n   </imgdir>\n </imgdir>"}, {"sha": "1d649e1f105a6571021a88b64eab7bf77968fa1f", "filename": "wz/Map.wz/Map/Map9/970030010.img.xml", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970030010.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970030010.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Map.wz/Map/Map9/970030010.img.xml?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -946,11 +946,12 @@\n     </imgdir>\n     <imgdir name=\"1\">\n       <string name=\"pn\" value=\"out00\"/>\n-      <int name=\"pt\" value=\"2\"/>\n+      <int name=\"pt\" value=\"7\"/>\n       <int name=\"x\" value=\"729\"/>\n       <int name=\"y\" value=\"2204\"/>\n-      <int name=\"tm\" value=\"970030000\"/>\n-      <string name=\"tn\" value=\"out00\"/>\n+      <int name=\"tm\" value=\"999999999\"/>\n+      <string name=\"tn\" value=\"\"/>\n+      <string name=\"script\" value=\"raid_rest\"/>\n     </imgdir>\n   </imgdir>\n </imgdir>"}, {"sha": "d00e56baa1bb8805982f8233700742364dae2649", "filename": "wz/Map.wz/Map/Map9/970032700.img.xml", "status": "modified", "additions": 0, "deletions": 12, "changes": 12, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970032700.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970032700.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Map.wz/Map/Map9/970032700.img.xml?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -1534,17 +1534,5 @@\n       <int name=\"tm\" value=\"999999999\"/>\n       <string name=\"tn\" value=\"\"/>\n     </imgdir>\n-    <imgdir name=\"4\">\n-      <string name=\"pn\" value=\"clear\"/>\n-      <int name=\"pt\" value=\"7\"/>\n-      <int name=\"x\" value=\"-505\"/>\n-      <int name=\"y\" value=\"165\"/>\n-      <int name=\"tm\" value=\"999999999\"/>\n-      <string name=\"tn\" value=\"\"/>\n-      <string name=\"script\" value=\"raid_stage\"/>\n-      <int name=\"hideTooltip\" value=\"0\"/>\n-      <int name=\"onlyOnce\" value=\"0\"/>\n-      <int name=\"delay\" value=\"0\"/>\n-    </imgdir>\n   </imgdir>\n </imgdir>"}, {"sha": "e6e5a81f27ca0caa93ccd66fe67a6c109d5b9a0d", "filename": "wz/Map.wz/Map/Map9/970032701.img.xml", "status": "modified", "additions": 0, "deletions": 12, "changes": 12, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970032701.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970032701.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Map.wz/Map/Map9/970032701.img.xml?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -1534,17 +1534,5 @@\n       <int name=\"tm\" value=\"999999999\"/>\n       <string name=\"tn\" value=\"\"/>\n     </imgdir>\n-    <imgdir name=\"4\">\n-      <string name=\"pn\" value=\"clear\"/>\n-      <int name=\"pt\" value=\"7\"/>\n-      <int name=\"x\" value=\"-505\"/>\n-      <int name=\"y\" value=\"165\"/>\n-      <int name=\"tm\" value=\"999999999\"/>\n-      <string name=\"tn\" value=\"\"/>\n-      <string name=\"script\" value=\"raid_stage\"/>\n-      <int name=\"hideTooltip\" value=\"0\"/>\n-      <int name=\"onlyOnce\" value=\"0\"/>\n-      <int name=\"delay\" value=\"0\"/>\n-    </imgdir>\n   </imgdir>\n </imgdir>"}, {"sha": "b6d535ae93aaa324c06a690235e1f10cb85a8f73", "filename": "wz/Map.wz/Map/Map9/970032702.img.xml", "status": "modified", "additions": 0, "deletions": 12, "changes": 12, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970032702.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970032702.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Map.wz/Map/Map9/970032702.img.xml?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -1534,17 +1534,5 @@\n       <int name=\"tm\" value=\"999999999\"/>\n       <string name=\"tn\" value=\"\"/>\n     </imgdir>\n-    <imgdir name=\"4\">\n-      <string name=\"pn\" value=\"clear\"/>\n-      <int name=\"pt\" value=\"7\"/>\n-      <int name=\"x\" value=\"-505\"/>\n-      <int name=\"y\" value=\"165\"/>\n-      <int name=\"tm\" value=\"999999999\"/>\n-      <string name=\"tn\" value=\"\"/>\n-      <string name=\"script\" value=\"raid_stage\"/>\n-      <int name=\"hideTooltip\" value=\"0\"/>\n-      <int name=\"onlyOnce\" value=\"0\"/>\n-      <int name=\"delay\" value=\"0\"/>\n-    </imgdir>\n   </imgdir>\n </imgdir>"}, {"sha": "195c8fee368587e60eecfc2a1f13cac6ec6b63f1", "filename": "wz/Map.wz/Map/Map9/970032703.img.xml", "status": "modified", "additions": 0, "deletions": 12, "changes": 12, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970032703.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970032703.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Map.wz/Map/Map9/970032703.img.xml?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -1534,17 +1534,5 @@\n       <int name=\"tm\" value=\"999999999\"/>\n       <string name=\"tn\" value=\"\"/>\n     </imgdir>\n-    <imgdir name=\"4\">\n-      <string name=\"pn\" value=\"clear\"/>\n-      <int name=\"pt\" value=\"7\"/>\n-      <int name=\"x\" value=\"-505\"/>\n-      <int name=\"y\" value=\"165\"/>\n-      <int name=\"tm\" value=\"999999999\"/>\n-      <string name=\"tn\" value=\"\"/>\n-      <string name=\"script\" value=\"raid_stage\"/>\n-      <int name=\"hideTooltip\" value=\"0\"/>\n-      <int name=\"onlyOnce\" value=\"0\"/>\n-      <int name=\"delay\" value=\"0\"/>\n-    </imgdir>\n   </imgdir>\n </imgdir>"}, {"sha": "402d9bf13e79e5c30019f8180d0929dc0031eef5", "filename": "wz/Map.wz/Map/Map9/970032704.img.xml", "status": "modified", "additions": 0, "deletions": 12, "changes": 12, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970032704.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970032704.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Map.wz/Map/Map9/970032704.img.xml?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -1534,17 +1534,5 @@\n       <int name=\"tm\" value=\"999999999\"/>\n       <string name=\"tn\" value=\"\"/>\n     </imgdir>\n-    <imgdir name=\"4\">\n-      <string name=\"pn\" value=\"clear\"/>\n-      <int name=\"pt\" value=\"7\"/>\n-      <int name=\"x\" value=\"-505\"/>\n-      <int name=\"y\" value=\"165\"/>\n-      <int name=\"tm\" value=\"999999999\"/>\n-      <string name=\"tn\" value=\"\"/>\n-      <string name=\"script\" value=\"raid_stage\"/>\n-      <int name=\"hideTooltip\" value=\"0\"/>\n-      <int name=\"onlyOnce\" value=\"0\"/>\n-      <int name=\"delay\" value=\"0\"/>\n-    </imgdir>\n   </imgdir>\n </imgdir>"}, {"sha": "b9cd2e4b5b8b0614800b96b9f4246c3f3535d027", "filename": "wz/Map.wz/Map/Map9/970032705.img.xml", "status": "modified", "additions": 0, "deletions": 12, "changes": 12, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970032705.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970032705.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Map.wz/Map/Map9/970032705.img.xml?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -1534,17 +1534,5 @@\n       <int name=\"tm\" value=\"999999999\"/>\n       <string name=\"tn\" value=\"\"/>\n     </imgdir>\n-    <imgdir name=\"4\">\n-      <string name=\"pn\" value=\"clear\"/>\n-      <int name=\"pt\" value=\"7\"/>\n-      <int name=\"x\" value=\"-505\"/>\n-      <int name=\"y\" value=\"165\"/>\n-      <int name=\"tm\" value=\"999999999\"/>\n-      <string name=\"tn\" value=\"\"/>\n-      <string name=\"script\" value=\"raid_stage\"/>\n-      <int name=\"hideTooltip\" value=\"0\"/>\n-      <int name=\"onlyOnce\" value=\"0\"/>\n-      <int name=\"delay\" value=\"0\"/>\n-    </imgdir>\n   </imgdir>\n </imgdir>"}, {"sha": "316b7560e2492552ba5599079cfffb458e5d91fe", "filename": "wz/Map.wz/Map/Map9/970032706.img.xml", "status": "modified", "additions": 0, "deletions": 12, "changes": 12, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970032706.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970032706.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Map.wz/Map/Map9/970032706.img.xml?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -1534,17 +1534,5 @@\n       <int name=\"tm\" value=\"999999999\"/>\n       <string name=\"tn\" value=\"\"/>\n     </imgdir>\n-    <imgdir name=\"4\">\n-      <string name=\"pn\" value=\"clear\"/>\n-      <int name=\"pt\" value=\"7\"/>\n-      <int name=\"x\" value=\"-505\"/>\n-      <int name=\"y\" value=\"165\"/>\n-      <int name=\"tm\" value=\"999999999\"/>\n-      <string name=\"tn\" value=\"\"/>\n-      <string name=\"script\" value=\"raid_stage\"/>\n-      <int name=\"hideTooltip\" value=\"0\"/>\n-      <int name=\"onlyOnce\" value=\"0\"/>\n-      <int name=\"delay\" value=\"0\"/>\n-    </imgdir>\n   </imgdir>\n </imgdir>"}, {"sha": "768c288219f3698507b2b659672d156765c01e29", "filename": "wz/Map.wz/Map/Map9/970032707.img.xml", "status": "modified", "additions": 0, "deletions": 12, "changes": 12, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970032707.img.xml", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/1d8caff63f5a62738df0889413251013c98797be/wz/Map.wz/Map/Map9/970032707.img.xml", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/wz/Map.wz/Map/Map9/970032707.img.xml?ref=1d8caff63f5a62738df0889413251013c98797be", "patch": "@@ -1534,17 +1534,5 @@\n       <int name=\"tm\" value=\"999999999\"/>\n       <string name=\"tn\" value=\"\"/>\n     </imgdir>\n-    <imgdir name=\"4\">\n-      <string name=\"pn\" value=\"clear\"/>\n-      <int name=\"pt\" value=\"7\"/>\n-      <int name=\"x\" value=\"-505\"/>\n-      <int name=\"y\" value=\"165\"/>\n-      <int name=\"tm\" value=\"999999999\"/>\n-      <string name=\"tn\" value=\"\"/>\n-      <string name=\"script\" value=\"raid_stage\"/>\n-      <int name=\"hideTooltip\" value=\"0\"/>\n-      <int name=\"onlyOnce\" value=\"0\"/>\n-      <int name=\"delay\" value=\"0\"/>\n-    </imgdir>\n   </imgdir>\n </imgdir>"}]}]},
