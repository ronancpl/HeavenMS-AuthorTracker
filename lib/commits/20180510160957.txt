{"fetchDate": "2019-12-19", "content": [{"sha": "80b1776ad362f28e5abab52bea073c7dbf4eca54", "node_id": "MDY6Q29tbWl0NDUwODIwMjM6ODBiMTc3NmFkMzYyZjI4ZTVhYmFiNTJiZWEwNzNjN2RiZjRlY2E1NA==", "commit": {"author": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2018-05-10T16:09:57Z"}, "committer": {"name": "ronancpl", "email": "rcpl2010@gmail.com", "date": "2018-05-10T16:09:57Z"}, "message": "Player/NPC Shop patch + Fredrick/Duey patch + Loot w. time GMS-like\n\nReading approximated unitPrice value from WZ in such a fashion that the new double value can be represented in float point without losing too much data.\nFixed rechargeables with quantity 0 set on the playershop/hiredmerchant being handed back to the owner with quantity 1.\nSolved many concurrecy issues related with items on the field and playershop/hiredmerchant.\nFixed anomalies with waiting time before picking up other players items, now acting GMS-like.\nAdded/patched copyleft claims in files that are from my own authorship. Please see backtrack_licenses/readme.txt for more info about this move.\nFixed issues with item retrieval when using bundles on playershop/hiredmerchant.\nFixed some exploits with playershop/hiredmerchant.\nFixed a glitch with npcshop when trying to recharge/buy items without having enough mesos.\nAdded portal sound effect for some scripted portals that still lacked it.\nFixed some exploits with NPCs Fredrick and Duey.\nFixed Body Pressure not displaying damage to other players.\nAdded a flag that permits town scrolls to act like a \"banish\" for players. This renders the antibanish scroll effect available.", "tree": {"sha": "825a151b4a067692958d373fe0f0b02d3e4c9e7f", "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/trees/825a151b4a067692958d373fe0f0b02d3e4c9e7f"}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/git/commits/80b1776ad362f28e5abab52bea073c7dbf4eca54", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/80b1776ad362f28e5abab52bea073c7dbf4eca54", "html_url": "https://github.com/ronancpl/HeavenMS/commit/80b1776ad362f28e5abab52bea073c7dbf4eca54", "comments_url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/80b1776ad362f28e5abab52bea073c7dbf4eca54/comments", "author": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ronancpl", "id": 9257761, "node_id": "MDQ6VXNlcjkyNTc3NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9257761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronancpl", "html_url": "https://github.com/ronancpl", "followers_url": "https://api.github.com/users/ronancpl/followers", "following_url": "https://api.github.com/users/ronancpl/following{/other_user}", "gists_url": "https://api.github.com/users/ronancpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronancpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronancpl/subscriptions", "organizations_url": "https://api.github.com/users/ronancpl/orgs", "repos_url": "https://api.github.com/users/ronancpl/repos", "events_url": "https://api.github.com/users/ronancpl/events{/privacy}", "received_events_url": "https://api.github.com/users/ronancpl/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "727dfb2d62f12a5a2ceac90d52c1815ab1b9db63", "url": "https://api.github.com/repos/ronancpl/HeavenMS/commits/727dfb2d62f12a5a2ceac90d52c1815ab1b9db63", "html_url": "https://github.com/ronancpl/HeavenMS/commit/727dfb2d62f12a5a2ceac90d52c1815ab1b9db63"}], "stats": {"total": 5548, "additions": 3957, "deletions": 1591}, "files": [{"sha": "a5cb2bd5fdb70908400dd64fe9b13a8f981028bb", "filename": "README.md", "status": "modified", "additions": 11, "deletions": 5, "changes": 16, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/README.md", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/README.md", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/README.md?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,4 +1,4 @@\n-# HeavenMS (MapleSolaxiaV2)\n+# HeavenMS\n ---\n \n ## Head developer: Ronan C. P. Lana\n@@ -22,11 +22,17 @@ Client files & general tools: https://drive.google.com/drive/folders/0BzDsHSr-0V\n \n **Important note about localhosts**: these executables are red-flagged by antivirus tools as __potentially malicious softwares__, this happens due to the reverse engineering methods that were applied onto these software artifacts. Those depicted here have been put to use for years already and posed no harm so far, so they are soundly assumed to be safe.\n \n-Recommended localhost: https://hostr.co/fuzm4X9j7TWh\n+Recommended localhost: https://hostr.co/MluJQNtzAnV9\n \n-* Current revision: 'n' problem fixed and removed caps for WATK, WDEF, MDEF, ACC, AVOID.\n+**Change log:**\n \n-  * 'n' problem fixed https://hostr.co/r5QDmhlxpp8M\n+  * Removed \"AP excess\" popup and limited actions on Admin/MWLB, credits to kevintjuh93.\n+\n+  * Removed \"You've gained a level!\" popup, credits to PrinceReborn.\n+\n+  * Removed caps for WATK, WDEF, MDEF, ACC, AVOID\n+\n+  * 'n' problem fixed\n \n   * Fraysa's https://hostr.co/gJbLZITRVHmv\n \n@@ -127,7 +133,7 @@ The client's set-up is quite straightforward:\n 2. Once done, erase these files: \"HShield\" (folder), \"ASPLauncher.exe\", \"MapleStory.exe\" and \"patcher.exe\".\n 3. Extract into the client folder the \"localhost.exe\" from the provided link.\n 4. Overwrite the original WZ files with the ones provided from either one of those folders on the Google Drive:\n-\t- \"rev???_wz\" (last published RELEASE, source update of same number).\n+\t- \"rev???_wz\" (last published RELEASE, referring to commit of same number).\n \t- \"current_wz\" (latest source update).\n \n #### Editing localhost IP target"}, {"sha": "c74cfc0823e63bbf5374b4cc8fa9e7ffa30666a5", "filename": "docs/backtrack_licenses/CafePQ NPCs/old_npc_source.bmp", "status": "added", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/docs/backtrack_licenses/CafePQ%20NPCs/old_npc_source.bmp", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/docs/backtrack_licenses/CafePQ%20NPCs/old_npc_source.bmp", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/docs/backtrack_licenses/CafePQ%20NPCs/old_npc_source.bmp?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54"}, {"sha": "2fcdddd6addd3a5f37b07396355ea71100b1c059", "filename": "docs/backtrack_licenses/CafePQ NPCs/origin.txt", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/docs/backtrack_licenses/CafePQ%20NPCs/origin.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/docs/backtrack_licenses/CafePQ%20NPCs/origin.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/docs/backtrack_licenses/CafePQ%20NPCs/origin.txt?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -0,0 +1,3 @@\n+Change reason: New NPC files uploaded in with misleading header.\n+\n+Committed 2017-09-01 (Reworked Autoassigner & Hero's Will & Trade + Visual NX + New commands)\n\\ No newline at end of file"}, {"sha": "53846485d6d578309a62b4315e23c459988a07dd", "filename": "docs/backtrack_licenses/Custom NPCs/origin.txt", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/docs/backtrack_licenses/Custom%20NPCs/origin.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/docs/backtrack_licenses/Custom%20NPCs/origin.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/docs/backtrack_licenses/Custom%20NPCs/origin.txt?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -0,0 +1,5 @@\n+Change reason: New NPC files uploaded in with misleading/missing header.\n+\n+9000017.js: Introduced before repository started, around 2015-08-05 (extracted from mychanges_ptbr.txt @ \"source\" commit)\n+9000036.js: Introduced before repository started, around 2015-07-25 (extracted from mychanges_ptbr.txt @ \"source\" commit)\n+9000041.js: Committed 2016-07-18 (Instant sell NPC + new features)\n\\ No newline at end of file"}, {"sha": "3cb811accc9a6d9c87205bae6eb21c96e40f4266", "filename": "docs/backtrack_licenses/GuildQuest/GuildQuest_new.js", "status": "added", "additions": 281, "deletions": 0, "changes": 281, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/docs/backtrack_licenses/GuildQuest/GuildQuest_new.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/docs/backtrack_licenses/GuildQuest/GuildQuest_new.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/docs/backtrack_licenses/GuildQuest/GuildQuest_new.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -0,0 +1,281 @@\n+/* \n+ * This file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc> \n+                       Matthias Butz <matze@odinms.de>\n+                       Jan Christian Meyer <vimes@odinms.de>\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License version 3\n+    as published by the Free Software Foundation. You may not use, modify\n+    or distribute this program under any other version of the\n+    GNU Affero General Public License.\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+\n+/**\n+ * @author: Ronan\n+ * @event: Sharenian Guild PQ\n+*/\n+\n+var isPq = true;\n+var minPlayers = 1, maxPlayers = 30;\n+var minLevel = 1, maxLevel = 200;\n+var entryMap = 990000000;\n+var exitMap = 990001100;\n+var recruitMap = 101030104;\n+var clearMap = 990001101;\n+\n+var minMapId = 990000000;\n+var maxMapId = 990001101;\n+\n+var waitTime = 3;\n+var eventTime = 90;     // 90 minutes\n+\n+var lobbyRange = [0, 0];\n+\n+function init() {\n+        setEventRequirements();\n+}\n+\n+function setLobbyRange() {\n+        return lobbyRange;\n+}\n+\n+function setEventRequirements() {\n+        var reqStr = \"\";\n+        \n+        reqStr += \"\\r\\n    Number of players: \";\n+        if(maxPlayers - minPlayers >= 1) reqStr += minPlayers + \" ~ \" + maxPlayers;\n+        else reqStr += minPlayers;\n+        \n+        reqStr += \"\\r\\n    Level range: \";\n+        if(maxLevel - minLevel >= 1) reqStr += minLevel + \" ~ \" + maxLevel;\n+        else reqStr += minLevel;\n+        \n+        reqStr += \"\\r\\n    Time limit: \";\n+        reqStr += eventTime + \" minutes\";\n+        \n+        em.setProperty(\"party\", reqStr);\n+}\n+\n+function setEventExclusives(eim) {\n+        var itemSet = [1032033, 4001024, 4001025, 4001026, 4001027, 4001028, 4001029, 4001030, 4001031, 4001032, 4001033, 4001034, 4001035, 4001037];\n+        eim.setExclusiveItems(itemSet);\n+}\n+\n+function setEventRewards(eim) {\n+        var itemSet, itemQty, evLevel, expStages;\n+\n+        evLevel = 1;    //Rewards at clear PQ\n+        itemSet = [];\n+        itemQty = [];\n+        eim.setEventRewards(evLevel, itemSet, itemQty);\n+        \n+        expStages = [];    //bonus exp given on CLEAR stage signal\n+        eim.setEventClearStageExp(expStages);\n+}\n+\n+function getEligibleParty(party) {      //selects, from the given party, the team that is allowed to attempt this event\n+        var eligible = [];\n+        var hasLeader = false;\n+        \n+        var guildId = 0;\n+        \n+        if(party.size() > 0) {\n+                var partyList = party.toArray();\n+                \n+                for(var i = 0; i < party.size(); i++) {\n+                        var ch = partyList[i];\n+                        if(ch.isLeader()) {\n+                                guildId = ch.getGuildId();\n+                                break;\n+                        }\n+                }\n+\n+                for(var i = 0; i < party.size(); i++) {\n+                        var ch = partyList[i];\n+\n+                        if(ch.getMapId() == recruitMap && ch.getLevel() >= minLevel && ch.getLevel() <= maxLevel && ch.getGuildId() == guildId) {\n+                                if(ch.isLeader()) hasLeader = true;\n+                                eligible.push(ch);\n+                        }\n+                }\n+        }\n+        \n+        if(!(hasLeader)) eligible = [];\n+        return eligible;\n+}\n+\n+function setup(level, lobbyid) {\n+        var eim = em.newInstance(\"Guild\" + lobbyid);\n+        eim.setProperty(\"level\", level);\n+        \n+        eim.setProperty(\"guild\", 0);\n+        eim.setProperty(\"canJoin\", 1);\n+        eim.setProperty(\"statusStg1\", -1);\n+        \n+        eim.getInstanceMap(990000000).resetPQ(level);\n+        eim.getInstanceMap(990000100).resetPQ(level);\n+        eim.getInstanceMap(990000200).resetPQ(level);\n+        eim.getInstanceMap(990000300).resetPQ(level);\n+        eim.getInstanceMap(990000301).resetPQ(level);\n+        eim.getInstanceMap(990000400).resetPQ(level);\n+        eim.getInstanceMap(990000401).resetPQ(level);\n+        eim.getInstanceMap(990000410).resetPQ(level);\n+        eim.getInstanceMap(990000420).resetPQ(level);\n+        eim.getInstanceMap(990000430).resetPQ(level);\n+        eim.getInstanceMap(990000431).resetPQ(level);\n+        eim.getInstanceMap(990000440).resetPQ(level);\n+        eim.getInstanceMap(990000500).resetPQ(level);\n+        eim.getInstanceMap(990000501).resetPQ(level);\n+        eim.getInstanceMap(990000502).resetPQ(level);\n+        eim.getInstanceMap(990000600).resetPQ(level);\n+        eim.getInstanceMap(990000610).resetPQ(level);\n+        eim.getInstanceMap(990000611).resetPQ(level);\n+        eim.getInstanceMap(990000620).resetPQ(level);\n+        eim.getInstanceMap(990000630).resetPQ(level);\n+        eim.getInstanceMap(990000631).resetPQ(level);\n+        eim.getInstanceMap(990000640).resetPQ(level);\n+        eim.getInstanceMap(990000641).resetPQ(level);\n+        eim.getInstanceMap(990000700).resetPQ(level);\n+        eim.getInstanceMap(990000800).resetPQ(level);\n+        eim.getInstanceMap(990000900).resetPQ(level);\n+        eim.getInstanceMap(990001000).resetPQ(level);\n+        eim.getInstanceMap(990001100).resetPQ(level);\n+        eim.getInstanceMap(990001101).resetPQ(level);\n+        \n+        respawnStages(eim);\n+        \n+        var ts = Date.now();\n+        ts += (60000 * waitTime);\n+        eim.setProperty(\"entryTimestamp\", \"\" + ts);\n+        \n+        eim.startEventTimer(waitTime * 60000);    \n+        \n+        setEventRewards(eim);\n+        setEventExclusives(eim);\n+        \n+        return eim;\n+}\n+\n+/*\n+function isTeamAllJobs(eim) {\n+        var eventJobs = eim.getEventPlayersJobs();\n+        var rangeJobs = parseInt('111110', 2);\n+        \n+        return ((eventJobs & rangeJobs) == rangeJobs);\n+}\n+*/\n+\n+function afterSetup(eim) {\n+        eim.setProperty(\"guild\", \"\" + eim.getLeader().getGuildId());\n+}\n+\n+function respawnStages(eim) {}\n+\n+function playerEntry(eim, player) {\n+        var map = eim.getMapInstance(entryMap);\n+        player.changeMap(map, map.getPortal(0));\n+        \n+        var texttt = \"So, here is the brief. You guys should be warned that, once out on the fortress outskirts, anyone that would not be equipping the #b#t1032033##k will die instantly due to the deteriorated state of the air around there. That being said, once your team move out to the next stage, make sure to #bhit the glowing rocks#k in that region and #bequip the dropped item#k before advancing stages. That will protect you thoroughly from the air sickness. Good luck!\";\n+        player.getClient().getSession().write(Packages.tools.MaplePacketCreator.getNPCTalk(9040000, /*(byte)*/ 0, texttt, \"00 00\", /*(byte)*/ 0));\n+}\n+\n+function scheduledTimeout(eim) {\n+        if(eim.getIntProperty(\"canJoin\") == 1) {\n+                eim.setProperty(\"canJoin\", 0);\n+    \n+                if(eim.checkEventTeamLacking(true, minPlayers)) {\n+                        end(eim);\n+                } else {\n+                        eim.startEventTimer(eventTime * 60000);\n+                }\n+        } else {\n+                end(eim);\n+        }\n+}\n+\n+function playerUnregistered(eim, player) {}\n+\n+function playerExit(eim, player) {\n+        eim.unregisterPlayer(player);\n+        player.changeMap(exitMap, 0);\n+}\n+\n+function changedMap(eim, player, mapid) {\n+        if (mapid < minMapId || mapid > maxMapId) {\n+                if (eim.isEventTeamLackingNow(true, minPlayers, player) && eim.getIntProperty(\"canJoin\") == 0) {\n+                        eim.unregisterPlayer(player);\n+                        end(eim);\n+                }\n+                else\n+                        eim.unregisterPlayer(player);\n+        }\n+}\n+\n+function changedLeader(eim, leader) {}\n+\n+function playerDead(eim, player) {}\n+\n+function playerRevive(eim, player) { // player presses ok on the death pop up.\n+        if (eim.isEventTeamLackingNow(true, minPlayers, player) && eim.getIntProperty(\"canJoin\") == 0) {\n+                eim.unregisterPlayer(player);\n+                end(eim);\n+        }\n+        else\n+                eim.unregisterPlayer(player);\n+}\n+\n+function playerDisconnected(eim, player) {\n+        if (eim.isEventTeamLackingNow(true, minPlayers, player) && eim.getIntProperty(\"canJoin\") == 0) {\n+                eim.unregisterPlayer(player);\n+                end(eim);\n+        }\n+        else\n+                eim.unregisterPlayer(player);\n+}\n+\n+function leftParty(eim, player) {}\n+\n+function disbandParty(eim) {\n+        end(eim);\n+}\n+\n+function monsterValue(eim, mobId) {\n+        return 1;\n+}\n+\n+function end(eim) {\n+        var party = eim.getPlayers();\n+        for (var i = 0; i < party.size(); i++) {\n+                playerExit(eim, party.get(i));\n+        }\n+        eim.dispose();\n+}\n+\n+function giveRandomEventReward(eim, player) {\n+        eim.giveEventReward(player);\n+}\n+\n+function clearPQ(eim) {\n+        eim.stopEventTimer();\n+        eim.setEventCleared();\n+}\n+\n+function monsterKilled(mob, eim) {}\n+\n+function allMonstersDead(eim) {}\n+\n+function cancelSchedule() {}\n+\n+function dispose(eim) {\n+        em.schedule(\"reopenGuildQuest\", em.getLobbyDelay() * 1.5 * 1000);\n+}\n+\n+function reopenGuildQuest() {\n+        em.attemptStartGuildInstance();\n+}\n\\ No newline at end of file"}, {"sha": "60e7a4cba2147d50435798f8bb0392121cdc2da3", "filename": "docs/backtrack_licenses/GuildQuest/GuildQuest_old.js", "status": "added", "additions": 208, "deletions": 0, "changes": 208, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/docs/backtrack_licenses/GuildQuest/GuildQuest_old.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/docs/backtrack_licenses/GuildQuest/GuildQuest_old.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/docs/backtrack_licenses/GuildQuest/GuildQuest_old.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -0,0 +1,208 @@\n+/* \n+ * This file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc> \n+                       Matthias Butz <matze@odinms.de>\n+                       Jan Christian Meyer <vimes@odinms.de>\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License version 3\n+    as published by the Free Software Foundation. You may not use, modify\n+    or distribute this program under any other version of the\n+    GNU Affero General Public License.\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+\n+/*\n+ * @Author Lerk\n+ * \n+ * Guild Quest \n+ */\n+\n+var exitMap;\n+var waitingListCurrent = 0;\n+ \n+importPackage(Packages.world);\n+importPackage(Packages.client);\n+importPackage(Packages.server.maps);\n+importPackage(java.lang);\n+\n+function init() {\n+    em.setProperty(\"shuffleReactors\",\"false\");\n+\tem.setProperty(\"canEnter\", \"true\");\n+\tem.setProperty(\"gpqOpen\", \"true\");\n+}\n+\n+function monsterValue(eim, mobId) { //should only trigger on ergoth\n+    if (mobId == 9300028) { //but, just to be safe...\n+        var rubian = new Packages.client.inventory.Item(4001024, 0, 1);\n+        var map = eim.getMapInstance(990000900);\n+        var reactor = map.getReactorByName(\"boss\");\n+        map.spawnItemDrop(reactor, eim.getPlayers().get(0), rubian, reactor.getPosition(), true, false);\n+    }\n+    return -1;\n+}\n+\n+\n+\n+function setup(eim) {\n+    exitMap = em.getChannelServer().getMapFactory().getMap(990001100); //returning path\n+        \n+    //shuffle reactors in two maps for stage 3\n+    eim.getMapInstance(990000501).shuffleReactors();\n+    eim.getMapInstance(990000502).shuffleReactors();\n+        \n+    //force no-respawn on certain map reactors\n+    eim.getMapInstance(990000611).getReactorByName(\"\").setDelay(-1);\n+    eim.getMapInstance(990000620).getReactorByName(\"\").setDelay(-1);\n+    eim.getMapInstance(990000631).getReactorByName(\"\").setDelay(-1);\n+    eim.getMapInstance(990000641).getReactorByName(\"\").setDelay(-1);\n+        \n+    //activate three minutes after start\n+\teim.setProperty(\"entryTimestamp\", Packages.java.lang.System.currentTimeMillis());\n+    eim.setProperty(\"canEnter\",\"true\");\n+    eim.schedule(\"begin\", 60000);\n+\teim.startEventTimer(60000);\n+}\n+\n+function begin(eim) {\n+    eim.setProperty(\"canEnter\",\"false\");\n+    var party = eim.getPlayers();\n+    //if (party.size() < 6) { //not enough to start\n+    //        end(eim,\"There are no longer enough players to continue, and those remaining shall be warped out.\");\n+    //} else {\n+    var iter = party.iterator();\n+    while (iter.hasNext()) {\n+        iter.next().dropMessage(6,\"The quest has begun.\");\n+    }\n+\t\n+\teim.startEventTimer(1000 * 60 * 90);\n+\teim.schedule(\"timeOut\", 1000 * 60 * 90);\n+//}\n+}\n+\n+function timeOut(eim) {\n+\tend(eim, \"Your allotted time to finish the quest has passed.\");\n+}\n+\n+function playerEntry(eim, player) {\n+    var map = eim.getMapInstance(990000000);\n+    player.changeMap(map, map.getPortal(0));\n+}\n+\n+function playerRevive(eim, player) {\n+    var returnMap = 990000200;\n+    if (eim.getProperty(\"canEnter\").equals(\"true\")) {\n+        returnMap = 990000000;\n+    }\n+    player.setHp(50);\n+    player.setStance(0);\n+    player.changeMap(eim.getMapInstance(returnMap), eim.getMapInstance(returnMap).getPortal(0));\n+    return false;\n+}\n+\n+function playerDead(eim, player) {\n+}\n+\n+function playerDisconnected(eim, player) {\n+    var party = eim.getPlayers();\n+    if (player.getName().equals(eim.getProperty(\"leader\"))) { //check for party leader\n+        //boot all players and end\n+        var iter = party.iterator();\n+        while (iter.hasNext()) {\n+            var pl = iter.next();\n+            pl.dropMessage(6,\"The leader of the instance has disconnected, and the remaining players shall be warped out.\");\n+            if (pl.equals(player)) {\n+                removePlayer(eim, pl);\n+            }\n+            else {\n+                eim.unregisterPlayer(pl);\n+                pl.changeMap(exitMap, exitMap.getPortal(0));\n+            }\n+        }\n+        eim.dispose();\n+    }\n+    else { //boot d/ced player and check if enough players left\n+        removePlayer(eim, player);\n+        if (party.size() < 6) { //five after player booted\n+            end(eim,\"There are no longer enough players to continue, and those remaining shall be warped out.\");\n+        }\n+    }\n+}\n+\n+function leftParty(eim, player) { //ignore for GQ\n+}\n+\n+function disbandParty(eim) { //ignore for GQ\n+}\n+\n+function playerExit(eim, player) {\n+    eim.unregisterPlayer(player);\n+    player.changeMap(exitMap, exitMap.getPortal(0));\n+    var party = eim.getPlayers();\n+    if (party.size() < 6) { //five after player booted\n+        end(eim,\"There are no longer enough players to continue, and those remaining shall be warped out.\");\n+    }\n+}\n+\n+function end(eim, msg) {\n+    var iter = eim.getPlayers().iterator();\n+    while (iter.hasNext()) {\n+        var player = iter.next();\n+        player.dropMessage(6,msg);\n+        eim.unregisterPlayer(player);\n+        player.changeMap(exitMap, exitMap.getPortal(0));\n+    }\n+    eim.dispose();\n+}\n+\n+//for offline players\n+function removePlayer(eim, player) {\n+    eim.unregisterPlayer(player);\n+    player.getMap().removePlayer(player);\n+    player.setMap(exitMap);\n+}\n+\n+function clearPQ(eim) {\n+    var iter = eim.getPlayers().iterator();\n+    var bonusMap = eim.getMapInstance(990001000);\n+\teim.startEventTimer(40000);\n+    while (iter.hasNext()) {\n+        var player = iter.next();\n+        player.changeMap(bonusMap, bonusMap.getPortal(0));\n+    }\n+    eim.schedule(\"finish\", 40000)\n+}\n+\n+function finish(eim) {\n+    var iter = eim.getPlayers().iterator();\n+    while (iter.hasNext()) {\n+        var player = iter.next();\n+        eim.unregisterPlayer(player);\n+        player.changeMap(exitMap, exitMap.getPortal(0));\n+    }\n+    eim.dispose();\n+}\n+\n+function allMonstersDead(eim) {\n+//do nothing; GQ has nothing to do with monster killing\n+}\n+\n+function cancelSchedule() {\n+}\n+\n+function dispose(eim) {\n+\tem.schedule(\"openGPQ\", 5000);\n+}\n+\n+function openGPQ() {\n+\tem.setProperty(\"gpqOpen\", \"true\");\n+}\n+\n+\n+function timeOut() {\n+\t\n+}\n\\ No newline at end of file"}, {"sha": "baf90cfe9ca751ed703eab77379ddb54180e2849", "filename": "docs/backtrack_licenses/GuildQuest/origin.txt", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/docs/backtrack_licenses/GuildQuest/origin.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/docs/backtrack_licenses/GuildQuest/origin.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/docs/backtrack_licenses/GuildQuest/origin.txt?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -0,0 +1,3 @@\n+Change reason: Rewrote script file as a whole, now using methods suitable for the server's improved EventManager (queue system and such).\n+\n+Committed 2017-06-13 (GuildPQ Queue system + revamped Warp mechanic)\n\\ No newline at end of file"}, {"sha": "426b9d1efd28b48b01dd62d9c4ba967126a0144e", "filename": "docs/backtrack_licenses/readme.txt", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/docs/backtrack_licenses/readme.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/docs/backtrack_licenses/readme.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/docs/backtrack_licenses/readme.txt?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -0,0 +1,14 @@\n+[COMMIT 198]\n+\n+Licenses for the following files are being changed due to misleading authorship:\n+\t- CafePQ NPCs: those NPC script files were not around on OdinMS server, neither before HeavenMS.\n+\t- GuildQuest.js: that event script file was completely rewritten to suit well the underlying EIM of HeavenMS.\n+\t- Custom NPCs 9000017, 9000036, 9000041: those NPC script files were not around on OdinMS server, neither on Solaxia.\n+\n+Original dates are summarized on the subfolders, for steadfast conference.\n+\n+Licenses for the following files are being added:\n+\t- Several PQs and boss battles: those event scripts are authored by myself, all following similar pattern and using\n+common functions introduced on this server (such as getEligibleParty, startEventTimer or isEventTeamLackingNow).\n+\n+I am expecting no infringements from this action, should any issues arise contact me asap.\n\\ No newline at end of file"}, {"sha": "08d2b3b2d461587e0cad689949768c8c2869a06e", "filename": "docs/feature_list.md", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/docs/feature_list.md", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/docs/feature_list.md", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/docs/feature_list.md?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,8 +1,8 @@\n-#**HeavenMS _(MapleSolaxiaV2)_**\n+#**HeavenMS**\n \n Credits:\n \n-Ronan - Developer\n+Ronan - Head Developer\n \n Vcoc - Freelance Developer\n \n@@ -51,6 +51,7 @@ Player Social Network:\n * Beginners can create and join a \"beginner-only\" party (characters up to level 10).\n * Enhanced synchronization on Player Shops and Hired Merchants. Transactions made are instantly informed to the owner.\n * Game minirooms such as match cards and omok now has semi-functional password system.\n+* Item pickup cooldown on non-owned/non-partyowned items functional.\n \n Cash & Items:\n \n@@ -158,5 +159,7 @@ Localhost:\n \n * Removed the 'n' problem within NPC dialog.\n * Removed caps for MATK, WDEF, MDEF, ACC and AVOID.\n+* Removed \"AP excess\" popup and \"Admin/MWLB\" action block, original credits to kevintjuh93.\n+* Removed \"You've gained a level!\" popup, original credits to PrinceReborn.\n \n ---------------------------\n\\ No newline at end of file"}, {"sha": "0cac0338fbdf64eebed0b78a64e0ce58c9a3f5c0", "filename": "docs/issues.txt", "status": "renamed", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/docs/issues.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/docs/issues.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/docs/issues.txt?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,25 +1,27 @@\n ========== HeavenMS ==========\n Credits:\n-Ronan - Freelance Developer\n+Ronan - Head Developer\n Vcoc - Freelance Developer\n \n ---------------------------\n Known issues:\n - Everytime two people click on an npc at the same time, one of them dcs and the other needs to @dispose to talk to the npc.\n - If multiple people hit boxes/reactors at the same time, they both dc with invalid pointer error.\n - Passwords on minirooms are not encoded for players entering/logging into the map.\n+- Some criticals (e.g. from Aran skills) will not show up as crit for other players.\n+- Deadlocks may start appearing if the server stays online long enough with many players logged in.\n ---------------------------\n \n ---------------------------\n Missing features list:\n - Miniroom tooltips (such as number of players in store/host awaiting game) not showing up properly.\n-- Disease POISON appears MISSES to other players.\n ---------------------------\n \n \n ---------------------------\n ** Others **\n - Marriage\n+- Family system\n ---------------------------\n \n \n@@ -44,7 +46,7 @@ Missing features list:\n \n ---------------------------\n ** Skills **\n-Check autoban system\n+- Check autoban system\n ---------------------------\n \n ", "previous_filename": "docs/todo.txt"}, {"sha": "62575a02f7dbedc708e82e2f70f49bb14676ef0f", "filename": "docs/mychanges_ptbr.txt", "status": "modified", "additions": 20, "deletions": 1, "changes": 21, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/docs/mychanges_ptbr.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/docs/mychanges_ptbr.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/docs/mychanges_ptbr.txt?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -919,4 +919,23 @@ Adicionado efeito visual relacionado ao map chair skill sendo usado por um jogad\n Status de diseases agora s\u00e3o vis\u00edveis para outros jogadores, mesmo trocando de mapas.\n Dano de poison agora \u00e9 vis\u00edvel para outros jogadores.\n Corrigido pre\u00e7o contabilizado incorretamente para itens recarreg\u00e1veis.\n-Corrigido recarreg\u00e1veis com quantidade zero n\u00e3o sendo vendidos pelo NPC shop.\n\\ No newline at end of file\n+Corrigido recarreg\u00e1veis com quantidade zero n\u00e3o sendo vendidos pelo NPC shop.\n+\n+03 - 07 Maio 2018,\n+Modificado unitPrice para aproximar o valor do WZ, de forma que possa ser representado num ponto flutuante sem perda de dados.\n+Corrigido rechargeables com quantidade 0 colocados no player shop/hired merchant retornando ao dono ou ao comprador com quantidade 1.\n+Resolvido v\u00e1rios problemas de acesso concorrente com itens no mapa.\n+Corrigido anomalias com tempo de espera para pegar drops de outros jogadores, agora atuando de forma mais parecida com o GMS-like.\n+Adicionado/corrigido direitos de copyleft em arquivos de PQs de minha pr\u00f3pria autoria.\n+Revisto acesso concorrente com m\u00f3dulos de playershop/hiredmerchant.\n+Corrigido problemas com recupera\u00e7\u00e3o de itens quando usando bundles em playershop/hiredmerchant.\n+Corrigido alguns exploits com playershop/hiredmerchant.\n+Corrigido mensagem de falta de meso numa sess\u00e3o de compra/venda com NPC travando novas transa\u00e7\u00f5es naquela sess\u00e3o.\n+Corrigido tempo de espera para pegar drops de outros jogadores sempre que se muda de mapa.\n+Adicionado efeito sonoro para alguns portais scriptados que ainda n\u00e3o o tinham implementado.\n+Corrigido alguns exploits envolvendo acesso em rajada com NPC Fredrick e Duey.\n+Corrigido Body Pressure n\u00e3o mostrando valor de dano para outros jogadores.\n+Adicionado flag que permite town scrolls atuarem como se fossem \"player banishes\", permitindo ativa\u00e7\u00e3o do antibanish scroll.\n+\n+09 Maio 2018,\n+Corrigido autopot handler consumindo mais pots que o necess\u00e1rio para pots com ganhos percentuais.\n\\ No newline at end of file"}, {"sha": "3bfcd153716e9a417901d06ab16e621f81a56828", "filename": "docs/wzchanges_gist.txt", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/docs/wzchanges_gist.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/docs/wzchanges_gist.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/docs/wzchanges_gist.txt?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "previous_filename": "docs/README_wzchanges.txt"}, {"sha": "7faa63289000eebadd5466e3f32c5392b730a20b", "filename": "nbproject/licenseheader.txt", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/nbproject/licenseheader.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/nbproject/licenseheader.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/nbproject/licenseheader.txt?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,7 +1,7 @@\n <#if licenseFirst??>\n ${licenseFirst}\n </#if>\n-${licensePrefix}This file is part of the HeavenMS (MapleSolaxiaV2) Maple Story Server\n+${licensePrefix}This file is part of the HeavenMS Maple Story Server\n ${licensePrefix?replace(\" +$\", \"\", \"r\")}\n ${licensePrefix}Copyright (C) ${date?date?string(\"yyyy\")} ${project.organization!user}\n ${licensePrefix?replace(\" +$\", \"\", \"r\")}"}, {"sha": "fdd33d0fffec4ebc5f18e11a76f69707d5c245fa", "filename": "scripts/NPC Base.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/NPC%20Base.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/NPC%20Base.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/NPC%20Base.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "e8f88444acfae2059ce56a6099b9c32d407bcf92", "filename": "scripts/QUEST Base.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/QUEST%20Base.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/QUEST%20Base.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/QUEST%20Base.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "8771d047c6f3f27c07066a8b7a95fdabf77b7698", "filename": "scripts/REACT Base.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/REACT%20Base.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/REACT%20Base.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/REACT%20Base.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "78db216aeab25cf40cb557b4b67f3837c850bb62", "filename": "scripts/event/3rdJob_bowman.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/3rdJob_bowman.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/3rdJob_bowman.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/3rdJob_bowman.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "fa57fb4476aced8ebfa8815bc8e06e4c644d74b3", "filename": "scripts/event/3rdJob_magician.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/3rdJob_magician.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/3rdJob_magician.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/3rdJob_magician.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "0abd5af7cd5327f104f08780baca0c03f83b5e24", "filename": "scripts/event/3rdJob_mount.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/3rdJob_mount.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/3rdJob_mount.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/3rdJob_mount.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "3f1d8f7c65fdea8cbdc2ad775569f2e2eb98b78e", "filename": "scripts/event/3rdJob_pirate.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/3rdJob_pirate.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/3rdJob_pirate.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/3rdJob_pirate.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "774c87326a0a3efe9b08970d4e4b7b0f46c687e6", "filename": "scripts/event/3rdJob_thief.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/3rdJob_thief.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/3rdJob_thief.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/3rdJob_thief.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "e683c5f7b1bef036acaaa3a2575b83f33ca4e475", "filename": "scripts/event/3rdJob_warrior.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/3rdJob_warrior.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/3rdJob_warrior.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/3rdJob_warrior.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "369f54d1bff8fd561311620df39912f8a005202f", "filename": "scripts/event/AmoriaPQ.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/AmoriaPQ.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/AmoriaPQ.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/AmoriaPQ.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Amoria PQ"}, {"sha": "fa2bfcd3d2937e2206fb8e5efb62d7d41a537477", "filename": "scripts/event/Aran_2ndmount.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/Aran_2ndmount.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/Aran_2ndmount.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/Aran_2ndmount.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "fce9b80a1666f217a9b923f867936e516be9709e", "filename": "scripts/event/Aran_3rdmount.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/Aran_3rdmount.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/Aran_3rdmount.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/Aran_3rdmount.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "6c6c426cb5b09acf2358dbbe299d932a79c262a2", "filename": "scripts/event/BalrogBattle.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/BalrogBattle.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/BalrogBattle.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/BalrogBattle.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Vs Balrog"}, {"sha": "40cfb3cc14f715e2e59b8cc7acee0cdb9bde110e", "filename": "scripts/event/BalrogBattle_Easy.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/BalrogBattle_Easy.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/BalrogBattle_Easy.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/BalrogBattle_Easy.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Vs Balrog"}, {"sha": "67e9a3c6f81214798744d894a6fac5dfcc89e5c0", "filename": "scripts/event/BalrogQuest.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/BalrogQuest.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/BalrogQuest.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/BalrogQuest.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "aefed0ef344a345a4ba1178e86146cc03cd79058", "filename": "scripts/event/BossRushPQ.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/BossRushPQ.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/BossRushPQ.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/BossRushPQ.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Boss Rush PQ"}, {"sha": "5977548e5ca93c4ad1c581b7ab6fed7e1cee2806", "filename": "scripts/event/CWKPQ.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/CWKPQ.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/CWKPQ.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/CWKPQ.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Crimsonwood Keep PQ"}, {"sha": "47d9a747b61727942b1bcfc139f39ad0943f7558", "filename": "scripts/event/CafePQ_1.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/CafePQ_1.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/CafePQ_1.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/CafePQ_1.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Cafe PQ 1"}, {"sha": "3f3d7a9737be754ea42bb68a197bc15c84a32ca2", "filename": "scripts/event/CafePQ_2.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/CafePQ_2.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/CafePQ_2.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/CafePQ_2.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Cafe PQ 2"}, {"sha": "3912da0f27523d212b20ed22bb7e0523d393f399", "filename": "scripts/event/CafePQ_3.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/CafePQ_3.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/CafePQ_3.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/CafePQ_3.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Cafe PQ 3"}, {"sha": "d342f2ae60f11eb3eca533326d9dbcd273b37237", "filename": "scripts/event/CafePQ_4.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/CafePQ_4.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/CafePQ_4.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/CafePQ_4.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Cafe PQ 4"}, {"sha": "b6b3c6867b13a43ef8650ce34455fbec6d85c497", "filename": "scripts/event/CafePQ_5.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/CafePQ_5.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/CafePQ_5.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/CafePQ_5.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Cafe PQ 5"}, {"sha": "ce7a70e0f70baff52f8bf226cd9e6995f00d7b00", "filename": "scripts/event/CafePQ_6.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/CafePQ_6.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/CafePQ_6.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/CafePQ_6.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Cafe PQ 6"}, {"sha": "00a2a18dee8ceef8bc4fa87b0ae68023be7524b9", "filename": "scripts/event/ElementalBattle.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/ElementalBattle.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/ElementalBattle.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/ElementalBattle.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Vs Elemental Thanatos"}, {"sha": "0ca98f1161e1e4f211fef75d7b0bcc8e245b11fa", "filename": "scripts/event/EllinPQ.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/EllinPQ.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/EllinPQ.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/EllinPQ.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Ellin PQ"}, {"sha": "d64683e0647f846821f93ea24a2566edf7ce88b5", "filename": "scripts/event/GuildQuest.js", "status": "modified", "additions": 9, "deletions": 10, "changes": 19, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/GuildQuest.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/GuildQuest.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/GuildQuest.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,14 +1,13 @@\n-/* \n- * This file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc> \n-                       Matthias Butz <matze@odinms.de>\n-                       Jan Christian Meyer <vimes@odinms.de>\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU Affero General Public License version 3\n-    as published by the Free Software Foundation. You may not use, modify\n-    or distribute this program under any other version of the\n-    GNU Affero General Public License.\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n \n     This program is distributed in the hope that it will be useful,\n     but WITHOUT ANY WARRANTY; without even the implied warranty of\n@@ -17,7 +16,7 @@\n \n     You should have received a copy of the GNU Affero General Public License\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n- */\n+*/\n \n /**\n  * @author: Ronan"}, {"sha": "cbbab892a08ab5743494cb1c49aed5c33162623e", "filename": "scripts/event/HenesysPQ.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/HenesysPQ.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/HenesysPQ.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/HenesysPQ.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Henesys PQ"}, {"sha": "8805e159b6870f1e18961773525ce29266ceac7c", "filename": "scripts/event/HorntailBattle.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/HorntailBattle.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/HorntailBattle.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/HorntailBattle.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Horntail Battle"}, {"sha": "ccc5fdfe97f1dee0dde8f4c07108f6d7982d7359", "filename": "scripts/event/HorntailPQ.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/HorntailPQ.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/HorntailPQ.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/HorntailPQ.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Horntail PQ"}, {"sha": "c57817fde98196ff54ccb28ec6e8f0455b3f4e62", "filename": "scripts/event/KerningPQ.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/KerningPQ.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/KerningPQ.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/KerningPQ.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Kerning PQ"}, {"sha": "b953335aff8f584c4c4bfc74b6929269906af259", "filename": "scripts/event/LatanicaBattle.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/LatanicaBattle.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/LatanicaBattle.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/LatanicaBattle.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Vs Latanica"}, {"sha": "a7a1df4665789434f7b172d6d4370759f6f38f06", "filename": "scripts/event/LudiMazePQ.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/LudiMazePQ.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/LudiMazePQ.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/LudiMazePQ.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Ludibrium Maze PQ"}, {"sha": "4a4079ba064d923adbef1619eaeb00343659c7a2", "filename": "scripts/event/LudiPQ.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/LudiPQ.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/LudiPQ.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/LudiPQ.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Ludibrium PQ"}, {"sha": "b26b7376ac3717ab9ef8c9c4aafe5d23ac6b00c4", "filename": "scripts/event/MagatiaPQ_A.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/MagatiaPQ_A.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/MagatiaPQ_A.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/MagatiaPQ_A.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Magatia PQ (Alcadno)"}, {"sha": "ca62cb3fcca74eb0e9a8c8d578b004096e44fce8", "filename": "scripts/event/MagatiaPQ_Z.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/MagatiaPQ_Z.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/MagatiaPQ_Z.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/MagatiaPQ_Z.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Magatia PQ (Zenumist)"}, {"sha": "c7bce48ab71fe21fd2a206cdefd712534c2c5cac", "filename": "scripts/event/OrbisPQ.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/OrbisPQ.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/OrbisPQ.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/OrbisPQ.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Orbis PQ"}, {"sha": "3a1528a296c50ccb6958fa447762e514805d58ec", "filename": "scripts/event/PapulatusBattle.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/PapulatusBattle.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/PapulatusBattle.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/PapulatusBattle.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Vs Papulatus"}, {"sha": "ee61b5f6d5f31fcb387fdc1b1f951a144a4e9ddf", "filename": "scripts/event/PinkBeanBattle.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/PinkBeanBattle.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/PinkBeanBattle.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/PinkBeanBattle.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Pink Bean Battle"}, {"sha": "2f116e00eeb3a460e66e6ea6d7634a7ca3f22252", "filename": "scripts/event/PiratePQ.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/PiratePQ.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/PiratePQ.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/PiratePQ.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Pirate PQ"}, {"sha": "c59de35d8c8fadd31909994d186b46d6a2830262", "filename": "scripts/event/ScargaBattle.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/ScargaBattle.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/ScargaBattle.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/ScargaBattle.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Scarga Battle"}, {"sha": "15818174c8bedd4be84b555cc1aaeca31826ffb3", "filename": "scripts/event/ShowaBattle.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/ShowaBattle.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/ShowaBattle.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/ShowaBattle.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Showa Boss Battle"}, {"sha": "b76ff75d6ea57b411b9137732a040bcd78044e31", "filename": "scripts/event/TD_Battle1.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/TD_Battle1.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/TD_Battle1.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/TD_Battle1.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Vs Bergamot"}, {"sha": "13dff5306b9fb299b38d50d2ccc23bf28f36de2a", "filename": "scripts/event/TD_Battle2.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/TD_Battle2.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/TD_Battle2.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/TD_Battle2.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Vs Dunas"}, {"sha": "8531792fc8cecfeee825d58bc3e21dea4b83afce", "filename": "scripts/event/TD_Battle3.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/TD_Battle3.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/TD_Battle3.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/TD_Battle3.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Vs Aufheben"}, {"sha": "8c501f64db7b108cefe9bdc04cdd967f29287246", "filename": "scripts/event/TD_Battle4.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/TD_Battle4.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/TD_Battle4.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/TD_Battle4.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Vs Oberon"}, {"sha": "7628080374978fd0c7d06901dcf192c541d1166b", "filename": "scripts/event/TD_Battle5.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/TD_Battle5.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/TD_Battle5.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/TD_Battle5.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Vs Nibelung"}, {"sha": "235343424924597f6ea4d82f26f0b44e1be1a027", "filename": "scripts/event/TreasurePQ.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/TreasurePQ.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/TreasurePQ.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/TreasurePQ.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Treasure PQ"}, {"sha": "f1da74768a88380edf20adc8a7bd9af1eb92f214", "filename": "scripts/event/ZakumBattle.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/ZakumBattle.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/ZakumBattle.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/ZakumBattle.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Zakum Battle"}, {"sha": "1c5b2c36d9969976e81b55f3a1494436712e24b5", "filename": "scripts/event/ZakumPQ.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/ZakumPQ.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/event/ZakumPQ.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/event/ZakumPQ.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @event: Zakum PQ"}, {"sha": "2b1b2c622792bae14c62921515072db6ea5dc00d", "filename": "scripts/map/onUserEnter/108010600.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/map/onUserEnter/108010600.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/map/onUserEnter/108010600.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/map/onUserEnter/108010600.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "da3af187196a65b21da153758d8b119786864591", "filename": "scripts/map/onUserEnter/108010610.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/map/onUserEnter/108010610.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/map/onUserEnter/108010610.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/map/onUserEnter/108010610.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "ae0f7dbf4a4d727a14739526f5e50190a049ce85", "filename": "scripts/map/onUserEnter/108010620.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/map/onUserEnter/108010620.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/map/onUserEnter/108010620.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/map/onUserEnter/108010620.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "9cc91eaa62f9ee5c03165eee7fd34264d4ff4e1a", "filename": "scripts/map/onUserEnter/108010630.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/map/onUserEnter/108010630.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/map/onUserEnter/108010630.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/map/onUserEnter/108010630.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "0d02abcd9975005345e2ddbfd0658ddd031ebac9", "filename": "scripts/map/onUserEnter/108010640.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/map/onUserEnter/108010640.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/map/onUserEnter/108010640.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/map/onUserEnter/108010640.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "aecec3cd4880229c2c54d98c3df00d350473a949", "filename": "scripts/map/onUserEnter/926000010.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/map/onUserEnter/926000010.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/map/onUserEnter/926000010.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/map/onUserEnter/926000010.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "73d17d4f89c0a5469d58b190f3e1edf66f226560", "filename": "scripts/npc/1002007.js", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1002007.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1002007.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1002007.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -6,7 +6,7 @@ var mesos;\n \n function start() {\n \tif (cm.hasItem(4032313,1)) {\n-\t\tcm.sendOk(\"I see that you have a coupon to go to Henesys. One moment while I bring you right over!\");\n+\t\tcm.sendNext(\"I see that you have a coupon to go to Henesys. One moment, I'll bring you there right over!\");\n \t} else {\n \t\tcm.sendNext(\"Hello, I drive the Regular Cab. If you want to go from town to town safely and fast, then ride our cab. We'll glady take you to your destination with an affordable price.\");\n \t}\n@@ -29,12 +29,13 @@ function action(mode, type, selection) {\n         else\n             status--;\n         if (status == 1) {\n-        \tif (cm.hasItem(4032313,1)) {\n-        \t\tcm.gainItem(4032313, -1);\n+            if (cm.hasItem(4032313,1)) {\n+                cm.gainItem(4032313, -1);\n                 cm.warp(maps[0], 0);\n                 cm.dispose();\n                 return;\n-        \t}\n+            }\n+            \n             var selStr = \"\";\n             if (cm.getJobId() == 0)\n                 selStr += \"We have a special 90% discount for beginners.\";"}, {"sha": "543d0cd9a30d98e55d516cd56182b39df61f370e", "filename": "scripts/npc/1022101.js", "status": "modified", "additions": 29, "deletions": 20, "changes": 49, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1022101.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1022101.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1022101.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -22,24 +22,33 @@ Jan Christian Meyer <vimes@odinms.de>\n /**  \n Rooney - Happyville Warp NPC\n **/   \n-   \n-var status = 0;   \n-   \n-function start() {   \n-    action(1, 0, 0);   \n-}   \n-   \n-function action(mode, type, selection) {   \n-    if (status == 0) {   \n-        cm.sendYesNo(\"Santa told me to go to here, only he didn't told me when...  I hope i'm here on the right time! Oh! By the way, I'm Rooney, I can take you to #bHappyVille#k. Are you ready to go?\");\n-        status++;   \n-    } else {   \n-        if ((status == 1 && type == 1 && selection == -1 && mode == 0) || mode == -1) {   \n-            cm.dispose();   \n+\n+var status;\n+ \n+function start() {\n+        status = -1;\n+        action(1, 0, 0);\n+}\n+\n+function action(mode, type, selection) {\n+        if (mode == -1) {\n+                cm.dispose();\n         } else {\n-            cm.getPlayer().saveLocation(\"HAPPYVILLE\");\n-            cm.warp(209000000, 0);\n-            cm.dispose();   \n-        }   \n-    }   \n-}\n\\ No newline at end of file\n+                if (mode == 0 && type > 0) {\n+                        cm.dispose();\n+                        return;\n+                }\n+                if (mode == 1)\n+                        status++;\n+                else\n+                        status--;\n+    \n+                if(status == 0) {\n+                        cm.sendYesNo(\"Santa told me to go to here, only he didn't told me when...  I hope I'm here on the right time! Oh! By the way, I'm Rooney, I can take you to #bHappyVille#k. Are you ready to go?\");\n+                } else {\n+                        cm.getPlayer().saveLocation(\"HAPPYVILLE\");\n+                        cm.warp(209000000, 0);\n+                        cm.dispose();\n+                }\n+        }\n+}"}, {"sha": "cf6a84799a8a2e8c8804ab3b81a70fe4b257be16", "filename": "scripts/npc/1040000.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1040000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1040000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1040000.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "4800732a10e081faba60f64effe8885bb9ca7ff6", "filename": "scripts/npc/1052013.js", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1052013.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1052013.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1052013.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,8 +1,6 @@\n /*\n-    This file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n-    Matthias Butz <matze@odinms.de>\n-    Jan Christian Meyer <vimes@odinms.de>\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as\n@@ -13,8 +11,8 @@\n \n     This program is distributed in the hope that it will be useful,\n     but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n-    See the GNU Affero General Public License for more details.\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n \n     You should have received a copy of the GNU Affero General Public License\n     along with this program.  If not, see <http://www.gnu.org/licenses/>."}, {"sha": "315221803f2f2ef5859de519d02b5b9b673c3d35", "filename": "scripts/npc/1052014.js", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1052014.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1052014.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1052014.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,8 +1,6 @@\n /*\n-    This file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n-    Matthias Butz <matze@odinms.de>\n-    Jan Christian Meyer <vimes@odinms.de>\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as\n@@ -13,8 +11,8 @@\n \n     This program is distributed in the hope that it will be useful,\n     but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n-    See the GNU Affero General Public License for more details.\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n \n     You should have received a copy of the GNU Affero General Public License\n     along with this program.  If not, see <http://www.gnu.org/licenses/>."}, {"sha": "461f0299b800cd1d8c24d7528be644e0d4a869e3", "filename": "scripts/npc/1052015.js", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1052015.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1052015.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1052015.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,8 +1,6 @@\n /*\n-    This file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n-    Matthias Butz <matze@odinms.de>\n-    Jan Christian Meyer <vimes@odinms.de>\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as\n@@ -13,8 +11,8 @@\n \n     This program is distributed in the hope that it will be useful,\n     but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n-    See the GNU Affero General Public License for more details.\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n \n     You should have received a copy of the GNU Affero General Public License\n     along with this program.  If not, see <http://www.gnu.org/licenses/>."}, {"sha": "0bdbb4222d03c742eccb76ae51725c19f077c337", "filename": "scripts/npc/1092008.js", "status": "added", "additions": 46, "deletions": 0, "changes": 46, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1092008.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1092008.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1092008.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -0,0 +1,46 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+var status;\n+ \n+function start() {\n+        status = -1;\n+        action(1, 0, 0);\n+}\n+\n+function action(mode, type, selection) {\n+        if (mode == -1) {\n+                cm.dispose();\n+        } else {\n+                if (mode == 0 && type > 0) {\n+                        cm.dispose();\n+                        return;\n+                }\n+                if (mode == 1)\n+                        status++;\n+                else\n+                        status--;\n+    \n+                if(status == 0) {\n+                        cm.sendOk(\"Hey, do you have any business with me?\");\n+                        cm.dispose();\n+                }\n+        }\n+}"}, {"sha": "f08dbb0c95442517b0a7878d596951ec9ea4b268", "filename": "scripts/npc/1092015.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1092015.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1092015.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1092015.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "0f2a3c6ee9a73fb931c270d5b9e0e9e11e2518aa", "filename": "scripts/npc/1092018.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1092018.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1092018.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1092018.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "f2f73935a226da3f97e713a9b602baa526c69b7c", "filename": "scripts/npc/11000.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/11000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/11000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/11000.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "415c1d44b3b9cfb7b966c94cd1d04adbd047e022", "filename": "scripts/npc/1104100.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1104100.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1104100.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1104100.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "2f38b06e3328136ff4d2bd9f396cef9016ac27d5", "filename": "scripts/npc/1104101.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1104101.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1104101.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1104101.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "3d7b1af5f0a21efbbfd18c5991ae99b3fedf774d", "filename": "scripts/npc/1104102.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1104102.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1104102.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1104102.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "ff07de9beac41420521b8e87c4828a91c2ebe9cb", "filename": "scripts/npc/1104103.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1104103.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1104103.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1104103.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "f00f9d9107e7aa4383b60fd1968068845b60efd5", "filename": "scripts/npc/1104104.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1104104.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1104104.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1104104.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "6478b9c7e0c09253e83719966e4d1fc2bf93ac8b", "filename": "scripts/npc/1300001.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1300001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1300001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1300001.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "ad16701629ba573ea44cbceb1cf20598d35e5e31", "filename": "scripts/npc/1300006.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1300006.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1300006.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1300006.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "0290ddf1b1f51792b7983a79298bd327b7dfad12", "filename": "scripts/npc/1300012.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1300012.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/1300012.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/1300012.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "f909e9dbea2adf8459b7b3bea60ac7b656eb1644", "filename": "scripts/npc/2013000.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2013000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2013000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2013000.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @npc: Wonky"}, {"sha": "dc9a8714edcd198c7a117ae6a23c5e5dbdafa1b7", "filename": "scripts/npc/2030006.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2030006.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2030006.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2030006.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,5 +1,5 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n+    This file is part of the HeavenMS MapleStory Server\n     Copyleft (L) 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify"}, {"sha": "de64516268417eca6b721a4335062518a5a04d64", "filename": "scripts/npc/2041024.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2041024.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2041024.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2041024.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "b28b51b1de597af9e337247ebafda4bb2c34e847", "filename": "scripts/npc/2041026.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2041026.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2041026.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2041026.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "c4a11e0c895ecec6a6985e36548631c03c7f864f", "filename": "scripts/npc/2041029.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2041029.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2041029.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2041029.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -21,7 +21,7 @@\n */\n \n function start() {\n-    cm.sendOk(\"Up ahead is the mysterious forest of Elin. Go through #bthe portal of time#k if you are ready to unveil some of the mysteries of the past of Victoria Island, as how it used to be at it's dawn.\");\n+    cm.sendOk(\"Up ahead is the mysterious forest of #bEllin#k. Go through #bthe portal of time#k if you are ready to unveil some of the mysteries of the past of Victoria Island, as how it used to be at it's dawn.\");\n     cm.dispose();\n }\n \t\n\\ No newline at end of file"}, {"sha": "d8ebe345d2fb278e41c6c5b7af31ee8ce7fb9cb3", "filename": "scripts/npc/2042000.js", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2042000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2042000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2042000.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -22,6 +22,10 @@\n var status = 0;\n \n function start() {\n+    cm.sendOk(\"The Monster Carnival is currently unavailable.\");\n+    cm.dispose();\n+    \n+    /*\n     if (cm.getPlayer().getParty() != null)\n         cm.sendCPQMapLists();\n     else {\n@@ -49,5 +53,5 @@ function action(mode, type, selection) {\n                 cm.dispose();\n             }\n         }\n-    }\n+    }*/\n }\n\\ No newline at end of file"}, {"sha": "44fd4e6dccd741a3e4780de585a6b354756c2b01", "filename": "scripts/npc/2082004.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2082004.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2082004.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2082004.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "9aa191d460464817b88e693ee4ad53a717766932", "filename": "scripts/npc/2083001.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2083001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2083001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2083001.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @npc: Mark of the Squad"}, {"sha": "80f03e062234508e960ae45af3a7e87ea687f3da", "filename": "scripts/npc/2091005.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2091005.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2091005.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2091005.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -3,7 +3,7 @@\n     Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n \t\t       Matthias Butz <matze@odinms.de>\n \t\t       Jan Christian Meyer <vimes@odinms.de>\n-    Copyleft (L) 2017 RonanLana (HeavenMS)\n+    Copyleft (L) 2016 - 2018 RonanLana (HeavenMS)\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "478a611f7e1d6a0fcfa3e6cc917dc9194059d660", "filename": "scripts/npc/2094000.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2094000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2094000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2094000.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @npc: Guon"}, {"sha": "f64485569ecc948070cf1a633ac67e2a0c009c86", "filename": "scripts/npc/2103000.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2103000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2103000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2103000.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "f9a51575b0e5ad6c2fe82559563035f50d8f1b3e", "filename": "scripts/npc/2103002.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2103002.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2103002.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2103002.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "9b8040167f9c99f0f92403bd16df24adc3448ad9", "filename": "scripts/npc/2103003.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2103003.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2103003.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2103003.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "5891f00078e70f8bd7c2c171f0c42f101e357613", "filename": "scripts/npc/2103004.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2103004.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2103004.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2103004.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "01dc956858fc47feb610778f25051fec69ffef5a", "filename": "scripts/npc/2103005.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2103005.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2103005.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2103005.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "a25d62b4ac14f3c4ec71f45631d91efeb1c804a2", "filename": "scripts/npc/2103006.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2103006.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2103006.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2103006.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "12d3129e1a774ffe2ccad90b73379bd4403ed5fc", "filename": "scripts/npc/2103009.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2103009.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2103009.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2103009.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "80f599e5bd06b983cb29f7659963ca53eae6d1c6", "filename": "scripts/npc/2103010.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2103010.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2103010.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2103010.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "fdbb1a86eefc10373c101c4dfca62ec71461af4e", "filename": "scripts/npc/2103011.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2103011.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2103011.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2103011.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "13a9f0bc9dd5f187892f4d3977c14d1e64c55ae2", "filename": "scripts/npc/2103012.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2103012.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2103012.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2103012.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "2a072de25b8706fb1bac0b819a94661fa2d83d31", "filename": "scripts/npc/2111010.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2111010.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2111010.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2111010.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "3d897e4788a79e4313a2b68ec9912210b752e917", "filename": "scripts/npc/2111013.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2111013.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2111013.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2111013.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "503554188ac38088fc27f8189d9f67565ca26da3", "filename": "scripts/npc/2111014.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2111014.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2111014.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2111014.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "502d617075919ca30a8885d81f5bfb7ec111f28c", "filename": "scripts/npc/2111015.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2111015.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2111015.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2111015.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "f5ac4961fd90b48d52148ac1d4b63fb56dfbc337", "filename": "scripts/npc/2111017.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2111017.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2111017.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2111017.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "baf03db33db003a35a8fb16787cc2bf67e182a31", "filename": "scripts/npc/2111018.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2111018.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2111018.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2111018.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "71da66886d5d8f35c460d1f64860e7f8c8295de2", "filename": "scripts/npc/2111019.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2111019.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2111019.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2111019.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "f9f07e7b0990f1fe7e6530904e2d29150f6559c7", "filename": "scripts/npc/2111020.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2111020.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2111020.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2111020.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "7b8336eb759a3f8509ce10443b3fc03beef57166", "filename": "scripts/npc/2111021.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2111021.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2111021.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2111021.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "a6cca05dc7ac0169006d7d758ad43b9a98116d8d", "filename": "scripts/npc/2111022.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2111022.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2111022.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2111022.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "0ea72a461e091bf76dd7002f331d7a57c004e299", "filename": "scripts/npc/2111023.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2111023.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2111023.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2111023.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "419372d9b3c07e1981d4b2f306c8216c44db8681", "filename": "scripts/npc/2112003.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2112003.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2112003.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2112003.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @npc: Juliet"}, {"sha": "d889eca094dad4cb8474e326a61e87e58c6760d3", "filename": "scripts/npc/2112004.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2112004.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2112004.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2112004.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @npc: Romeo"}, {"sha": "b834919a47b876ff2eecdc70b04083051580eb9f", "filename": "scripts/npc/2112007.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2112007.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2112007.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2112007.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "d0f7d16d83699445576b70b26e376b54f3f8031b", "filename": "scripts/npc/2112016.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2112016.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2112016.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2112016.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "51644eac1f3f7d9b25c4f175d25372a7269c033f", "filename": "scripts/npc/2133000.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2133000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/2133000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/2133000.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @npc: Ellin"}, {"sha": "b250fb2838724f515c73c1c88ae1aaa9f7affe42", "filename": "scripts/npc/9000007.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/9000007.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/9000007.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9000007.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "08e5211ad91c4d109fa518a6a8bf2163102de584", "filename": "scripts/npc/9000017.js", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/9000017.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/9000017.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9000017.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,22 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n /* Coco\n         Refining NPC: \n \t* Chaos scroll SYNTHETIZER (rofl)"}, {"sha": "6968b76936c09ba4f33306573e41d856365b8260", "filename": "scripts/npc/9000036.js", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/9000036.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/9000036.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9000036.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,8 +1,6 @@\n /*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n-\t\t       Matthias Butz <matze@odinms.de>\n-\t\t       Jan Christian Meyer <vimes@odinms.de>\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "3a23e3e1290f417c5391d64ba59a46d644bf0880", "filename": "scripts/npc/9000037.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/9000037.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/9000037.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9000037.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @npc: Agent Meow"}, {"sha": "fb3a27d29c4f063f85cbd511532fc1f7bdc05edc", "filename": "scripts/npc/9000038.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/9000038.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/9000038.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9000038.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @npc: Agent Kitty"}, {"sha": "c515697958d0bf5dbb9b35bfc5101294136d3e5f", "filename": "scripts/npc/9000041.js", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/9000041.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/9000041.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9000041.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,8 +1,6 @@\n /*\n-\tThis file is part of the OdinMS Maple Story Server\n-    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n-\t\t       Matthias Butz <matze@odinms.de>\n-\t\t       Jan Christian Meyer <vimes@odinms.de>\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "a162a371c56f41b7bb0735b323eca6f1129bd714", "filename": "scripts/npc/9020000.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/9020000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/9020000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9020000.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @npc: Lakelis"}, {"sha": "5b8c60d19993cee0745693e001c9916aa63099ef", "filename": "scripts/npc/9040000.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/9040000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/9040000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9040000.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @npc: Shuang"}, {"sha": "afbb84c1a8de2dab4a85722245201a7f0debd556", "filename": "scripts/npc/9201048.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/9201048.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/9201048.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9201048.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @npc: Amos"}, {"sha": "54be6df326f8327972536a69defb74c3e3f7e2a3", "filename": "scripts/npc/9201106.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/9201106.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/9201106.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9201106.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "f9a05d59e5675e38bc63df68b5fa1cc50eb8bfc0", "filename": "scripts/npc/9209000.js", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/9209000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/9209000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9209000.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -31,6 +31,12 @@ function action(mode, type, selection) {\n         if (status == 0) {\n             var greeting = \"Hello, I'm #p9209000#, the Skill & Mastery Book announcer! \";\n             \n+            if(cm.getPlayer().isCygnus()) {\n+                cm.sendOk(greeting + \"There are no skill or mastery books available for Cygnus Knights.\");\n+                cm.dispose();\n+                return;\n+            }\n+            \n             var jobrank = cm.getJob().getId() % 10;\n             if(jobrank < 2) {\n                 cm.sendOk(greeting + \"Keep training yourself until you reach the #r4th job#k of your class. New opportunities for improvement will arrive when you reach that feat!\");"}, {"sha": "b56964533031f08643d559756f660e22fb2e5669", "filename": "scripts/npc/9220018.js", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/9220018.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/9220018.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9220018.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,3 +1,23 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n /**\n  * @author: Ronan\n  * @npc: Charles"}, {"sha": "77cfc95eb3100b7aa4c6b02c7b85d062e90f5175", "filename": "scripts/npc/9220019.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/9220019.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/9220019.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9220019.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "6c712c30a0d336d29c934f45c04df65f2c6552ea", "filename": "scripts/npc/9220020.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/9220020.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/9220020.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/9220020.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "716f82e74881c155e9cc8d45353ca06a6785da5f", "filename": "scripts/npc/credits.js", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/credits.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/npc/credits.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/npc/credits.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -11,6 +11,7 @@ var name_tree = [];\n var role_tree = [];\n var name_cursor, role_cursor;\n \n+// make sure the server names are lexicograffically EQUALS to the correspondent function.\n var servers = [\"HeavenMS\", \"MapleSolaxia\", \"MoopleDEV\", \"MetroMS\", \"BubblesDEV\", \"ThePackII\", \"OdinMS\", \"Contributors\"];\n var servers_history = [];\n \n@@ -93,7 +94,7 @@ function writeAllServerStaffs() {\n                 role_cursor = [];\n \n                 var srvName = servers[i];\n-                eval(\"writeServerStaff_\" + srvName)();  // make sure the server names are lexicograffically EQUALS to the correspondent function.\n+                eval(\"writeServerStaff_\" + srvName)();\n         \n                 name_tree.push(name_cursor);\n                 role_tree.push(role_cursor);"}, {"sha": "f7c94e246bfb1ad70212bbf6f2b2b7e350a71507", "filename": "scripts/portal/Depart_goFoward0.js", "status": "modified", "additions": 11, "deletions": 9, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/Depart_goFoward0.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/Depart_goFoward0.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/Depart_goFoward0.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,25 +1,27 @@\n-function enter(pi) { \n-\tif (pi.getPlayer().getMap().getId() == 103040410 && pi.isQuestCompleted(2287)) {\n+function enter(pi) {\n+    var mapid = pi.getPlayer().getMap().getId();\n+    \n+    if (mapid == 103040410 && pi.isQuestCompleted(2287)) {\n     \tpi.playPortalSound();\n     \tpi.warp(103040420, \"right00\");\n     \treturn true;\n-\t} else if (pi.getPlayer().getMap().getId() == 103040420 && pi.isQuestCompleted(2288)) {\n+    } else if (mapid == 103040420 && pi.isQuestCompleted(2288)) {\n     \tpi.playPortalSound();\n     \tpi.warp(103040430, \"right00\");\n     \treturn true;\n-\t} else if (pi.getPlayer().getMap().getId() == 103040410 && pi.isQuestStarted(2287)) {\n+    } else if (mapid == 103040410 && pi.isQuestStarted(2287)) {\n     \tpi.playPortalSound();\n     \tpi.warp(103040420, \"right00\");\n     \treturn true;\n-    } else if (pi.getPlayer().getMap().getId() == 103040420 && pi.isQuestStarted(2288)) {\n+    } else if (mapid == 103040420 && pi.isQuestStarted(2288)) {\n     \tpi.playPortalSound();\n     \tpi.warp(103040430, \"right00\");\n     \treturn true; \t\n     } else {\n-    \tif (pi.getPlayer().getMap().getId() == 103040440 || pi.getPlayer().getMap().getId() == 103040450) {\n-        \tpi.playPortalSound();\n-\t    \tpi.warp(pi.getPlayer().getMap().getId() + 10, \"right00\");\n-\t    \treturn true;\n+    \tif (mapid == 103040440 || mapid == 103040450) {\n+            pi.playPortalSound();\n+            pi.warp(mapid + 10, \"right00\");\n+            return true;\n     \t}\n     \tpi.getPlayer().dropMessage(5, \"You cannot access this area.\");\n     \treturn false;"}, {"sha": "68d1b7f2d3746d18ab01313bdee6275d44fa81df", "filename": "scripts/portal/Depart_goFoward1.js", "status": "modified", "additions": 11, "deletions": 9, "changes": 20, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/Depart_goFoward1.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/Depart_goFoward1.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/Depart_goFoward1.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,25 +1,27 @@\n-function enter(pi) { \n-\tif (pi.getPlayer().getMap().getId() == 103040410 && pi.isQuestCompleted(2287)) {\n+function enter(pi) {\n+    var mapid = pi.getPlayer().getMap().getId();\n+    \n+    if (mapid == 103040410 && pi.isQuestCompleted(2287)) {\n     \tpi.playPortalSound();\n     \tpi.warp(103040420, \"right01\");\n     \treturn true;\n-\t} else if (pi.getPlayer().getMap().getId() == 103040420 && pi.isQuestCompleted(2288)) {\n+    } else if (mapid == 103040420 && pi.isQuestCompleted(2288)) {\n     \tpi.playPortalSound();\n     \tpi.warp(103040430, \"right01\");\n     \treturn true;\n-\t} else if (pi.getPlayer().getMap().getId() == 103040410 && pi.isQuestStarted(2287)) {\n+    } else if (mapid == 103040410 && pi.isQuestStarted(2287)) {\n     \tpi.playPortalSound();\n     \tpi.warp(103040420, \"right01\");\n     \treturn true;\n-    } else if (pi.getPlayer().getMap().getId() == 103040420 && pi.isQuestStarted(2288)) {\n+    } else if (mapid == 103040420 && pi.isQuestStarted(2288)) {\n     \tpi.playPortalSound();\n     \tpi.warp(103040430, \"right01\");\n     \treturn true; \t\n     } else {\n-    \tif (pi.getPlayer().getMap().getId() == 103040440 || pi.getPlayer().getMap().getId() == 103040450) {\n-        \tpi.playPortalSound();\n-\t    \tpi.warp(pi.getPlayer().getMap().getId() + 10, \"right01\");\n-\t    \treturn true;\n+    \tif (mapid == 103040440 || mapid == 103040450) {\n+            pi.playPortalSound();\n+            pi.warp(mapid + 10, \"right01\");\n+            return true;\n     \t}\n     \tpi.getPlayer().dropMessage(5, \"You cannot access this area.\");\n     \treturn false;"}, {"sha": "3a1e669fedc7b71ea24bb8017f9ffe02c49a9650", "filename": "scripts/portal/PPinkOut.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/PPinkOut.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/PPinkOut.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/PPinkOut.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "08e1b26048f802d6b8bd41ef9b2f54b0ea60b991", "filename": "scripts/portal/Pinkin.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/Pinkin.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/Pinkin.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/Pinkin.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "4b9dedd287e92c67781aef4ed3c0a674bc54db4d", "filename": "scripts/portal/ariant_Agit.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/ariant_Agit.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/ariant_Agit.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/ariant_Agit.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "8092d4c1c166223c76f454b5223f06ea02bf11ae", "filename": "scripts/portal/ariant_queens.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/ariant_queens.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/ariant_queens.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/ariant_queens.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "9f8874863d54651190fca216c9325955898547c7", "filename": "scripts/portal/end_cow.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/end_cow.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/end_cow.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/end_cow.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -7,7 +7,7 @@\n function enter(pi){\n \tif (pi.isQuestStarted(2180) && (pi.hasItem(4031847) || pi.hasItem(4031848) || pi.hasItem(4031849) || pi.hasItem(4031850))){\n \t\tif (pi.hasItem(4031850)){\n-\t\t\tpi.warp(120000103);\n+\t\t\tpi.playPortalSound(); pi.warp(120000103);\n \t\t\treturn true;\n \t\t}\n \t\telse{"}, {"sha": "ebc4163775eaf470e021ed1cc83ee2e1b0154e73", "filename": "scripts/portal/enterDisguise1.js", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/enterDisguise1.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/enterDisguise1.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/enterDisguise1.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as\n@@ -37,7 +37,7 @@ function enter(pi) {\n                         return false;\n                 }\n                 \n-\t\tpi.warp(108010600 + (10 * jobtype), \"out00\");\n+\t\tpi.playPortalSound(); pi.warp(108010600 + (10 * jobtype), \"out00\");\n \t} else {\n \t\tpi.playPortalSound(); pi.warp(130010010, \"out00\");\n \t}"}, {"sha": "7eb70ac6bf9099fa5aeb3ea7c7e2b615519ea7d2", "filename": "scripts/portal/enterDisguise2.js", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/enterDisguise2.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/enterDisguise2.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/enterDisguise2.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as\n@@ -37,7 +37,7 @@ function enter(pi) {\n                         return false;\n                 }\n                 \n-\t\tpi.warp(108010600 + (10 * jobtype), \"out00\");\n+\t\tpi.playPortalSound(); pi.warp(108010600 + (10 * jobtype), \"out00\");\n \t} else {\n \t\tpi.playPortalSound(); pi.warp(130010020, \"out00\");\n \t}"}, {"sha": "06fad66acae5d356f6c3fa9d7fcea764c1cd3f6d", "filename": "scripts/portal/enterDisguise3.js", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/enterDisguise3.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/enterDisguise3.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/enterDisguise3.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as\n@@ -37,7 +37,7 @@ function enter(pi) {\n                         return false;\n                 }\n                 \n-\t\tpi.warp(108010600 + (10 * jobtype), \"out00\");\n+\t\tpi.playPortalSound(); pi.warp(108010600 + (10 * jobtype), \"out00\");\n \t} else {\n \t\tpi.playPortalSound(); pi.warp(130010110, \"out00\");\n \t}"}, {"sha": "7b74961145faf859521a6e3baa93cd548e55e207", "filename": "scripts/portal/enterDisguise4.js", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/enterDisguise4.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/enterDisguise4.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/enterDisguise4.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as\n@@ -37,7 +37,7 @@ function enter(pi) {\n                         return false;\n                 }\n                 \n-\t\tpi.warp(108010600 + (10 * jobtype), \"out00\");\n+\t\tpi.playPortalSound(); pi.warp(108010600 + (10 * jobtype), \"out00\");\n \t} else {\n \t\tpi.playPortalSound(); pi.warp(130010120, \"out00\");\n \t}"}, {"sha": "8982871680a4826619b62f221f559e9544a008d7", "filename": "scripts/portal/enterDisguise5.js", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/enterDisguise5.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/enterDisguise5.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/enterDisguise5.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as\n@@ -37,7 +37,7 @@ function enter(pi) {\n                         return false;\n                 }\n                 \n-\t\tpi.warp(108010600 + (10 * jobtype), \"east00\");\n+\t\tpi.playPortalSound(); pi.warp(108010600 + (10 * jobtype), \"east00\");\n \t} else {\n \t\tpi.playPortalSound(); pi.warp(130020000, \"east00\");\n \t}"}, {"sha": "dc2052f0e5eea70716c76f8c94bc6907fc873ae7", "filename": "scripts/portal/enterMCave.js", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/enterMCave.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/enterMCave.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/enterMCave.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -13,11 +13,11 @@ function enter(pi) {\n \t\t\t//pi.getPlayer().announce(Packages.tools.MaplePacketCreator.questProgress(21203, \"21203\"));\n \t\t\treturn true;\n \t\t}\n-\t\tpi.message(\"The mirror is blank due to all the players currently recalling their memories. Please wait and try again.\");\n+\t\tpi.message(\"The mirror is blank due to many players recalling their memories. Please wait and try again.\");\n \t\treturn false;\n-\t} else if(pi.isQuestStarted(21302)) { // Third Job\n+\t} else if(pi.isQuestStarted(21302) && !pi.isQuestCompleted(21303)) { // Third Job\n \t\tif(pi.getPlayerCount(108010701) > 0 || pi.getPlayerCount(108010702) > 0) {\n-\t\t\tpi.message(\"The mirror is blank due to all the players currently recalling their memories. Please wait and try again.\");\n+\t\t\tpi.message(\"The mirror is blank due to many players recalling their memories. Please wait and try again.\");\n \t\t\treturn false;\n \t\t} else {\n \t\t\tvar map = pi.getClient().getChannelServer().getMapFactory().getMap(108010702);"}, {"sha": "58147bee61f35c23c3779260601be23f79dd3356", "filename": "scripts/portal/enterPort.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/enterPort.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/enterPort.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/enterPort.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -22,7 +22,7 @@\n importPackage(Packages.server.life);\n \n function enter(pi) {\n-\tif(pi.isQuestStarted(21301)) {\n+\tif(pi.isQuestStarted(21301) && pi.getQuestProgress(21301, 9001013) == 0) {\n \t\tif(pi.getPlayerCount(108010700) != 0) {\n \t\t\tpi.message(\"The portal is blocked from the other side. I wonder if someone is already fighting the Thief Crow?\");\n \t\t\treturn false;\n@@ -34,7 +34,7 @@ function enter(pi) {\n \t\t\tpi.warp(108010700, \"west00\");\n \t\t}\n \t} else {\n-\t\tpi.warp(140020300, 1);\n+\t\tpi.playPortalSound(); pi.warp(140020300, 1);\n \t}\n \treturn true;\n }"}, {"sha": "6f295bf25f3ce225f3b612e756c50c47609231ea", "filename": "scripts/portal/enterRienFirst.js", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/enterRienFirst.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/enterRienFirst.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/enterRienFirst.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -20,9 +20,11 @@\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n function enter(pi) {\n-\tif (pi.getPlayer().getJob().getId() == 2000 && !pi.isQuestCompleted(21014))\n-\t\tpi.warp(140000000, 1);\n-\telse\n+\tif (pi.getPlayer().getJob().getId() == 2000 && !pi.isQuestCompleted(21014)) {\n+\t\tpi.playPortalSound(); pi.warp(140000000, \"st00\");\n+        } else {\n \t\tpi.playPortalSound(); pi.warp(140000000, \"west00\");\n+        }\n+        \n \treturn true;\n }\n\\ No newline at end of file"}, {"sha": "f4e3770f0538522dbe6e93c3cac09ab266f2baba", "filename": "scripts/portal/enterWitch.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/enterWitch.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/enterWitch.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/enterWitch.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,9 +1,9 @@\n function enter(pi) {\n     if (pi.getQuestStatus(20407) == 2) {\n-\tpi.warp(924010200,0);\n+\tpi.playPortalSound(); pi.warp(924010200,0);\n         return true;\n     } else if (pi.getQuestStatus(20406) == 2) {\n-\tpi.warp(924010100,0);\n+\tpi.playPortalSound(); pi.warp(924010100,0);\n         return true;\n     } else if (pi.getQuestStatus(20404) == 2) {\n \tpi.playPortalSound(); pi.warp(924010000,0);"}, {"sha": "3548d865a77a9c1a4292833bc3f1bda66fb24bcb", "filename": "scripts/portal/guyfawkes0_esc.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/guyfawkes0_esc.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/guyfawkes0_esc.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/guyfawkes0_esc.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "0628329f264cf290892280d325c4541107ac28d8", "filename": "scripts/portal/guyfawkes0_floor.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/guyfawkes0_floor.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/guyfawkes0_floor.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/guyfawkes0_floor.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "676ca05ab452a9eba6726d7c652777455f715662", "filename": "scripts/portal/inDragonEgg.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/inDragonEgg.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/inDragonEgg.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/inDragonEgg.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,9 +1,9 @@\n function enter(pi) {\n \tpi.playPortalSound();\n \tif(pi.isQuestStarted(22005)){\n-\t\tpi.warp(900020100, 0);\n+\t\tpi.playPortalSound(); pi.warp(900020100, 0);\n \t} else{\n-\t\tpi.warp(100030301, 0);\n+\t\tpi.playPortalSound(); pi.warp(100030301, 0);\n     }\n \treturn true;\n }  \n\\ No newline at end of file"}, {"sha": "1ebccfa85d0da545ccb6e261f6e4aa20a1193059", "filename": "scripts/portal/magatia_alc0.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/magatia_alc0.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/magatia_alc0.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/magatia_alc0.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "cf2f265716ef6e312f73eb2350e2ade993f9d866", "filename": "scripts/portal/obstacle.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/obstacle.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/obstacle.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/obstacle.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -11,7 +11,7 @@\n                         pi.message(\"You have used the Killer Mushroom Spore to open the way.\");\n  \t\t}\n  \n- \t\tpi.warp(106020400, 2);\n+ \t\tpi.playPortalSound(); pi.warp(106020400, 2);\n  \t\treturn true;\n  \t} else if (pi.hasItem(2430015)) {\n                 pi.gainItem(2430015, -1 * pi.getPlayer().getItemQuantity(2430015, false));"}, {"sha": "13a08057c3e7e830bdb2152e85013d76b4c28a0f", "filename": "scripts/portal/outChild.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/outChild.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/outChild.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/outChild.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -23,7 +23,7 @@\n */\n function enter(pi) {\n \tif (!pi.isQuestStarted(21001)) {\n-\t\tpi.warp(914000220, 2);\n+\t\tpi.playPortalSound(); pi.warp(914000220, 2);\n \t\treturn true;\n \t} else {\n \t\tpi.playPortalSound(); pi.warp(914000400, 2);"}, {"sha": "0434ca4921c4039ac8daf5166a1a1f891bc64d41", "filename": "scripts/portal/party6_stage.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/party6_stage.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/party6_stage.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/party6_stage.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,12 +1,12 @@\n function enter(pi) {\n \tswitch(pi.getMapId()) {\n \t\tcase 930000000:\n-\t\t\tpi.warp(930000100,0);\n+\t\t\tpi.playPortalSound(); pi.warp(930000100,0);\n                         return true;\n \t\t\tbreak;\n \t\tcase 930000100:\n \t\t\tif (pi.getMap().getMonsters().size() == 0) {\n-\t\t\t\tpi.warp(930000200,0);\n+\t\t\t\tpi.playPortalSound(); pi.warp(930000200,0);\n                                 return true;\n \t\t\t} else {\n \t\t\t\tpi.playerMessage(5, \"Eliminate all the monsters.\");"}, {"sha": "039c87b3dcc6b32aea18a82d6e3ad4fe42e467d7", "filename": "scripts/portal/q3366in.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/q3366in.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/q3366in.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/q3366in.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "6bd3d529efbdfbff9a045b7a3ee22810fada6be5", "filename": "scripts/portal/q3366out.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/q3366out.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/q3366out.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/q3366out.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "05ec7966d10d945c25aafcfb25a359e9c4771d3c", "filename": "scripts/portal/q3367in.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/q3367in.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/q3367in.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/q3367in.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "eecf2db3032532635cfd0b38b3fbf9cc6d4c7fce", "filename": "scripts/portal/q3367out.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/q3367out.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/q3367out.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/q3367out.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "f532878608626962596f317afc05f97c906b63b5", "filename": "scripts/portal/q3368in.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/q3368in.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/q3368in.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/q3368in.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "96b36725f554f1dbe344489859001e5939c3d0d8", "filename": "scripts/portal/q3368out.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/q3368out.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/q3368out.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/q3368out.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "1d320d926b1a7ca0736a04e3330c2c28f5995c24", "filename": "scripts/portal/rankRoom.js", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/rankRoom.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/rankRoom.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/rankRoom.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -9,16 +9,16 @@ function enter(pi) {\n \t    pi.warp(130000100, 4); //or 130000101\n \t    break;\n \tcase 140010100:\n-            pi.warp(140010110, 0); //or 140010111\n+            pi.warp(140010110, 1); //or 140010111\n             break;\n \tcase 120000101:\n-            pi.warp(120000105, 0);\n+            pi.warp(120000105, 1);\n             break;\n \tcase 103000003:\n-            pi.warp(103000008, 0); //or 103000009\n+            pi.warp(103000008, 1); //or 103000009\n             break;\n \tcase 100000201:\n-            pi.warp(100000204, 0); //or 100000205\n+            pi.warp(100000204, 1); //or 100000205\n             break;\n \tdefault:\n             pi.warp(pi.getMapId() + 1, 0); //or + 2"}, {"sha": "9748d0d367c9b81d9adc993d5d6a165d1d850233", "filename": "scripts/portal/secretDoor.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/secretDoor.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/secretDoor.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/secretDoor.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "6473e4e4587532183afe49edbf16c4d0ab29ad09", "filename": "scripts/portal/skyrom.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/skyrom.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/skyrom.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/skyrom.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "c1c10393929c8a8f98e1ea39bff1ac50b4bcff22", "filename": "scripts/portal/timeQuest.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/timeQuest.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/timeQuest.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/timeQuest.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -27,7 +27,7 @@ function enter(pi) {\n \tpi.playPortalSound();\n \tvar map = (mapid - 270010000) / 100;\n \t//pi.getPlayer().dropMessage(5, map + \" \" + pi.isQuestCompleted(3534));\n-    if(map < 5 && pi.isQuestCompleted(3500 + map)) {\n+        if(map < 5 && pi.isQuestCompleted(3500 + map)) {\n \t\tpi.warp(mapid + 10, \"out00\");\n \t} else if(map == 5 && pi.isQuestCompleted(3502 + map)) {\n \t\tpi.warp(270020000, \"out00\");"}, {"sha": "9b7d26068560dbbec13c66422b33e98ad040ede3", "filename": "scripts/portal/tutorquest.js", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/tutorquest.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/portal/tutorquest.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/portal/tutorquest.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,21 +1,21 @@\n function enter(pi) {\n \tif(pi.getPlayer().getMapId() == 130030001){\n \t\tif(pi.isQuestStarted(20010)){\n-\t\t\tpi.warp(130030002, 0);\n+\t\t\tpi.playPortalSound(); pi.warp(130030002, 0);\n                         return true;\n \t\t} else {\n \t\t\tpi.message(\"Please click on the NPC first to receive a quest.\");\n \t\t}\n \t} else if(pi.getPlayer().getMapId() == 130030002){\n                 if(pi.isQuestCompleted(20011)){\n-\t\t\tpi.warp(130030003, 0);\n+\t\t\tpi.playPortalSound(); pi.warp(130030003, 0);\n                         return true;\n \t\t} else {\n \t\t\tpi.message(\"Please complete the required quest before proceeding.\");\n \t\t}\n \t} else if(pi.getPlayer().getMapId() == 130030003){\n \t\tif(pi.isQuestCompleted(20012)){\n-\t\t\tpi.warp(130030004, 0);\n+\t\t\tpi.playPortalSound(); pi.warp(130030004, 0);\n                         return true;\n \t\t} else {\n \t\t\tpi.message(\"Please complete the required quest before proceeding.\");"}, {"sha": "eb3d98ac80cefcf4c04b6e4fe54766bb85314829", "filename": "scripts/quest/20010.js", "status": "modified", "additions": 14, "deletions": 13, "changes": 27, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/20010.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/20010.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/20010.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -2,7 +2,7 @@ var status = -1;\n \n function start(mode, type, selection) {\n     if (mode == -1) {\n-\t\tqm.sendNext(\"Whoa, whoa! Are you really declining my offer? Well, you'll be able to #blevel-up quicker #kwith our help, so let me know if you change your mind. Even if you've declined a Quest, you can receive the Quest again if you just come and talk to me.\");\n+        qm.sendNext(\"Whoa, whoa! Are you really declining my offer? Well, you'll be able to #blevel-up quicker #kwith our help, so let me know if you change your mind. Even if you've declined a Quest, you can receive the Quest again if you just come and talk to me.\");\n         qm.dispose();\n     } else {\n         if (mode == 1)\n@@ -33,18 +33,19 @@ function end(mode, type, selection) {\n         if (status == 0) {\n             qm.sendNext(\"Are you the Noblesse my brother Kimu sent? Nice to meet you! I'm Kizan. I'll give you the reward Kimu asked me to give you. Remember, you can check your Inventory by pressing the #bI key#k. Red potions help you recover HP, and blue ones help recover MP. It's a good idea to learn how to use them beforehand so you'll be ready with them when you're in danger. \\r\\n\\r\\n#fUI/UIWindow.img/Quest/reward# \\r\\n\\r\\n#v2000020# #z2000020# \\r\\n#v2000021# #z2000021# \\r\\n\\r\\n#fUI/UIWindow.img/QuestIcon/8/0#15 exp\");\n         } else if (status == 1) {\n-           if(qm.canHold(2000022) && qm.canHold(2000023)){\n-\t\t\t\tif(!qm.isQuestCompleted(21010)) {\t\t\n-\t\t\t\t\tqm.gainItem(2000020, 5);\n-\t\t\t\t\tqm.gainItem(2000021, 5);\n-\t\t\t\t\tqm.gainExp(15);\n-\t\t\t\t}\n-\t\t\t\tqm.guideHint(3);\n-\t\t\t\tqm.forceCompleteQuest();\n-\t\t\t} else \n-\t\t\t\tqm.dropMessage(1, \"Your inventory is full\");\n-\t\t\t\t\n-\t\t\t\tqm.dispose();        \n+            if(qm.canHold(2000022) && qm.canHold(2000023)){\n+                if(!qm.isQuestCompleted(21010)) {\t\t\n+                    qm.gainItem(2000020, 5);\n+                    qm.gainItem(2000021, 5);\n+                    qm.gainExp(15);\n+                }\n+                qm.guideHint(3);\n+                qm.forceCompleteQuest();\n+            } else {\n+                qm.dropMessage(1, \"Your inventory is full\");\n+            }\n+\n+            qm.dispose();        \n         }\n     }\n }\n\\ No newline at end of file"}, {"sha": "feaf651d3a8a83d57dcf32e157f201d764a1d307", "filename": "scripts/quest/20527.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/20527.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/20527.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/20527.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "e166b792e89e6b09899e6f150bd3fd2767472268", "filename": "scripts/quest/21201.js", "status": "modified", "additions": 47, "deletions": 38, "changes": 85, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21201.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21201.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21201.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -24,44 +24,53 @@ importPackage(Packages.client);\n var status = -1;\n \n function end(mode, type, selection) {\n-    status++;\n-    if (mode != 1){\n-        if (mode == 0 && type == 1)\n-            qm.sendNext(\"Hey! At least say you tried!\");\n+    if (mode == -1) {\n+        qm.sendNext(\"Hey! At least say you tried!\");\n         qm.dispose();\n-        return;\n+    } else {\n+        if(mode == 0 && type > 0) {\n+            qm.sendNext(\"Hey! At least say you tried!\");\n+            qm.dispose();\n+            return;\n+        }\n+        \n+        if (mode == 1)\n+            status++;\n+        else\n+            status--;\n+        \n+        if (status == 0)\n+            qm.sendNext(\"First you promise to defeat the Black Mage and make me a famous weapon, then you abandon me for hundreds of years, and now you're telling me you don't remember who I am? What the...?! Do you think I will let you get away with that? You're the one who begged and pined for me!\"); //Giant Polearm\n+        else if (status == 1)\n+            qm.sendNextPrev(\"I did tell #p1203000# to make a pole arm for me if I could prove my worth.\", 2);\n+        else if (status == 2)\n+            qm.sendNextPrev(\"After all that begging, shouldn't you treat me with a little more love and respect? Ya know, a weapon like me's a rare and wonderful thing. I am the ultimate #p1201001# that can help you defeat the Black Mage. How could you ditch me for hundreds of years?\");\n+        else if (status == 3)\n+            qm.sendNextPrev(\"Hey, I never begged for you.\", 2);\n+        else if (status == 4)\n+            qm.sendNextPrev(\"What? You never begged for me? Ha! #p1203000# told me you got on your knees, begged for me in tears, and... Wait a sec. Aran! Did you just remember who I am?\");\n+        else if (status == 5)\n+            qm.sendNextPrev(\"Maybe a little bit...\", 2);\n+        else if (status == 6)\n+            qm.sendNextPrev(\"Aran, it is you! *Sniff sniff* Wait, *ahem* I didn't get emotional, it's just allergies. I know the Black Mage has stripped you of your abilities so you probably don't even have the strength to lift me... but at least you remember me! I'm glad that your memory's starting to return.\");\n+        else if (status == 7)\n+            qm.sendAcceptDecline(\"Even though you've lost your memory, you're still my master. You endured some very tough training in the past, and I'm sure your body still remembers the skills you got through those hard times. Alright, I'll restore your abilities!\");\n+        else if (status == 8) {\n+            if(!qm.isQuestCompleted(21201)) {\n+                if(!qm.canHold(1142130)) {\n+                    cm.sendOk(\"Wow, your #bequip#k inventory is full. I need you to make at least 1 empty slot to complete this quest.\");\n+                    qm.dispose();\n+                    return;\n+                }\n+\n+                qm.gainItem(1142130, true);\n+                qm.changeJobById(2110);\n+\n+                qm.completeQuest();\n+            }\n+\n+            qm.sendNext(\"Your level isn't what it used to be back in your glory days, so I can't restore all of your old abilities. But the few I can restore should help you level up faster. Now hurry up and train so you can return to the old you.\");    \n+            qm.dispose();\n+        }\n     }\n-    if (status == 0)\n-        qm.sendNext(\"First you promise to defeat the Black Mage and make me a famous weapon, then you abandon me for hundreds of years, and now you're telling me you don't remember who I am? What the...?! Do you think I will let you get away with that? You're the one who begged and pined for me!\"); //Giant Polearm\n-    else if (status == 1)\n-        qm.sendNextPrev(\"I did tell #p1203000# to make a pole arm for me if I could prove my worth.\", 2);\n-\telse if (status == 2)\n-\t\tqm.sendNextPrev(\"After all that begging, shouldn't you treat me with a little more love and respect? Ya know, a weapon like me's a rare and wonderful thing. I am the ultimate #p1201001# that can help you defeat the Black Mage. How could you ditch me for hundreds of years?\");\n-\telse if (status == 3)\n-\t\tqm.sendNextPrev(\"Hey, I never begged for you.\", 2);\n-\telse if (status == 4)\n-\t\tqm.sendNextPrev(\"What? You never begged for me? Ha! #p1203000# told me you got on your knees, begged for me in tears, and... Wait a sec. Aran! Did you just remember who I am?\");\n-\telse if (status == 5)\n-\t\tqm.sendNextPrev(\"Maybe a little bit...\", 2);\n-\telse if (status == 6)\n-\t\tqm.sendNextPrev(\"Aran, it is you! *Sniff sniff* Wait, *ahem* I didn't get emotional, it's just allergies. I know the Black Mage has stripped you of your abilities so you probably don't even have the strength to lift me... but at least you remember me! I'm glad that your memory's starting to return.\");\n-\telse if (status == 7)\n-\t\tqm.sendAcceptDecline(\"Even though you've lost your memory, you're still my master. You endured some very tough training in the past, and I'm sure your body still remembers the skills you got through those hard times. Alright, I'll restore your abilities!\");\n-\telse if (status == 8) {\n-\t\tif(!qm.isQuestCompleted(21201)) {\n-\t\t\tif(!qm.canHold(1142130)) {\n-\t\t\t\tcm.sendOk(\"Wow, your #bequip#k inventory is full. I need you to make at least 1 empty slot to complete this quest.\");\n-\t\t\t\tqm.dispose();\n-\t\t\t\treturn;\n-\t\t\t}\n-\t\t\t\n-\t\t\tqm.gainItem(1142130, true);\n-\t\t\tqm.changeJobById(2110);\n-                        \n-\t\t\tqm.completeQuest();\n-\t\t}\n-                \n-\t\tqm.sendNext(\"Your level isn't what it used to be back in your glory days, so I can't restore all of your old abilities. But the few I can restore should help you level up faster. Now hurry up and train so you can return to the old you.\");    \n-\t\tqm.dispose();\n-\t}\n }\n\\ No newline at end of file"}, {"sha": "bddef9d7328825fe092946fdb7a4cba7f362c169", "filename": "scripts/quest/21202.js", "status": "modified", "additions": 15, "deletions": 14, "changes": 29, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21202.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21202.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21202.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -31,20 +31,21 @@ function start(mode, type, selection) {\n         return;\n     }\n     if (status == 0) {\n-\t\tqm.sendNext(\"Hmm.. What's a young person like you doing in this secluded place?\");\n-\t} else if(status == 1) {\n-\t\tqm.sendNextPrev(\"I've come to get the best Polearm there is!\", 2);\n-\t} else if(status == 2) {\n-\t\tqm.sendNextPrev(\"The best Polearm? You should be able to purchase it in some town or other place..\");\n-\t} else if(status == 3) {\n-\t\tqm.sendNextPrev(\"I hear you are the best blacksmith in all of Maple World! I want nothing less than a weapon made by you!\", 2);\n-\t} else if(status == 4) {\n-\t\tqm.sendAcceptDecline(\"I'm too old to make weapons now, but.. I do have a Polearm that I made way back when. It's still in excellent shape. But I can't give it to you because that Polearm is extremely sharp, so sharp it could hurt its master. Do you still want it?\");\n-\t} else if(status == 5) {\n-\t\tqm.sendOk(\"Well, if you say so.. I can't object to that. I'll tell you what. I'll give you a quick test, and if you pass it, the Giant Polearm is yours. Head over to the #bTraining Center#k and take on the #rScarred Bears#k that are there. Your job is to bring back #b30 Sign of Acceptances#k.\");\n-\t\tqm.startQuest();\n-\t\tqm.dispose();\n-\t}\n+        qm.sendNext(\"Hmm.. What's a young person like you doing in this secluded place?\");\n+    } else if(status == 1) {\n+        qm.sendNextPrev(\"I've come to get the best Polearm there is!\", 2);\n+    } else if(status == 2) {\n+        qm.sendNextPrev(\"The best Polearm? You should be able to purchase it in some town or other place..\");\n+    } else if(status == 3) {\n+        qm.sendNextPrev(\"I hear you are the best blacksmith in all of Maple World! I want nothing less than a weapon made by you!\", 2);\n+    } else if(status == 4) {\n+        qm.sendAcceptDecline(\"I'm too old to make weapons now, but.. I do have a Polearm that I made way back when. It's still in excellent shape. But I can't give it to you because that Polearm is extremely sharp, so sharp it could hurt its master. Do you still want it?\");\n+    } else if(status == 5) {\n+        qm.sendOk(\"Well, if you say so.. I can't object to that. I'll tell you what. I'll give you a quick test, and if you pass it, the Giant Polearm is yours. Head over to the #bTraining Center#k and take on the #rScarred Bears#k that are there. Your job is to bring back #b30 Sign of Acceptances#k.\");\n+    } else {\n+        qm.startQuest();\n+        qm.dispose();\n+    }\n }\n \n function end(mode, type, selection) {"}, {"sha": "46f6bc1f5dad508dd2964ceac6479583b66066a5", "filename": "scripts/quest/21302.js", "status": "modified", "additions": 23, "deletions": 18, "changes": 41, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21302.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21302.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21302.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -31,24 +31,29 @@ function end(mode, type, selection) {\n         qm.dispose();\n         return;\n     }\n-    if (status == 0)\n+    if (status == 0) {\n         qm.sendNext(\"Wait.. Isn't that.. Did you remember how to make Red Jade?\\r\\nWow... you may be stupid and prone to amnesia, but this is why I can't abandon you. Now give me the jade!\"); //Giant Polearm\n-    else if (status == 1)\n+    } else if (status == 1) {\n         qm.sendNextPrev(\"Okay, now that I have the Red Jade back on, let me work on reawakening more of your abilities. I mean, your level's gone much higher since the last time we met, so I am sure I can work my magic a bit more this time!\");\n-\telse if (status == 2) {\n-\t\tif(!qm.isQuestCompleted(21302)) {\n-\t\t\tif(!qm.canHold(1142131)) {\n-\t\t\t\tcm.sendOk(\"Wow, your #bequip#k inventory is full. I need you to make at least 1 empty slot to complete this quest.\");\n-\t\t\t\tqm.dispose();\n-\t\t\t\treturn;\n-\t\t\t}\n-\t\t\t\n-\t\t\tqm.gainItem(1142131, true);\n-\t\t\tqm.changeJobById(2111);\n-                        \n-\t\t\tqm.completeQuest();\n-\t\t}\n-\t\tqm.sendNext(\"Come on, keep training so you can get all your abilities back, and that way we can explore together once more!\");    \n-\t\tqm.dispose();\n-\t}\n+    } else if (status == 2) {\n+        if(!qm.isQuestCompleted(21302)) {\n+            if(!qm.canHold(1142131)) {\n+                cm.sendOk(\"Wow, your #bequip#k inventory is full. I need you to make at least 1 empty slot to complete this quest.\");\n+                qm.dispose();\n+                return;\n+            }\n+            \n+            if(qm.haveItem(4032312, 1)) {\n+                qm.gainItem(4032312, -1);\n+            }\n+            \n+            qm.gainItem(1142131, true);\n+            qm.changeJobById(2111);\n+\n+            qm.completeQuest();\n+        }\n+        \n+        qm.sendNext(\"Come on, keep training so you can get all your abilities back, and that way we can explore together once more!\");    \n+        qm.dispose();\n+    }\n }\n\\ No newline at end of file"}, {"sha": "f55376b1d3c8c2dd812a577af00c2b3e9eba27ce", "filename": "scripts/quest/21303.js", "status": "added", "additions": 50, "deletions": 0, "changes": 50, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21303.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21303.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21303.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -0,0 +1,50 @@\n+/*\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+\n+var status = -1;\n+\n+function start(mode, type, selection) {\n+    if (mode == -1) {\n+        qm.dispose();\n+    } else {\n+        if(mode == 0 && type > 0) {\n+            qm.dispose();\n+            return;\n+        }\n+        \n+        if (mode == 1)\n+            status++;\n+        else\n+            status--;\n+        \n+        if (status == 0) {\n+            qm.sendNext(\"Aaaargh... Yeti's #b#t4032339##k has just been stolen! How frustrating, Yeti worked hard to get it, just to have it stolen by that #rThief Crow#k...\", 9);\n+        } else if (status == 1) {\n+            qm.sendNextPrev(\"Hey, I was just passing by and could not refrain from hearing you just now. I can lend you my strength, where did the thief go?\", 3);\n+        } else if (status == 2) {\n+            qm.sendNextPrev(\"Oh, how nice of you... Thief has passed #rthrough the gate at west#k. Bring back the #b#t4032339##k, Yeti needs it to give to beloved one.\", 9);\n+        } else if (status == 3) {\n+            qm.sendNextPrev(\"Ok, wait there. I will return it back to you in no time!\", 3);\n+        } else if (status == 4) {\n+            qm.forceStartQuest();\n+            qm.dispose();\n+        }\n+    }\n+}"}, {"sha": "7d5f2e1c3d3e750b37f43fbf19127d37c4b46aba", "filename": "scripts/quest/21600.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21600.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21600.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21600.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "611ebbd6edef2196cbe419f6d2ccff7b9cbe13ff", "filename": "scripts/quest/21604.js", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21604.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21604.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21604.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as\n@@ -38,7 +38,7 @@ function start(mode, type, selection) {\n             qm.sendNext(\"You want to use a Wolf as a mount, but you don't have a #bWolf saddle#k? Why, I have just the fine solution for you! Come here in #bEl Nath#k first, I shall teach you how to mount a wolf as an extra.\");\n         } else if (status == 1) {\n             qm.sendNext(\"Once here, hunt for #r50 #t4000048##k then bring them to me.\");\n-            \n+        } else if (status == 2) {\n             qm.forceStartQuest();\n             qm.dispose();\n         }"}, {"sha": "b0d80f11bb70fa6cf144fddc1403abfa5296f8ba", "filename": "scripts/quest/21613.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21613.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21613.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21613.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "1f606ef1cd024a95bbb2dd29dcef626b1261b840", "filename": "scripts/quest/21618.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21618.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21618.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21618.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "b212bb7c2fbc0c6d2f6df2f9d28d0ec801a2f76a", "filename": "scripts/quest/21728.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21728.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21728.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21728.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "cdb2afab672858f7fe058851d8412dcd2afd409f", "filename": "scripts/quest/21729.js", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21729.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21729.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21729.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as\n@@ -36,8 +36,8 @@ function start(mode, type, selection) {\n         \n         if (status == 0) {\n             qm.sendNext(\"Okay, you should not return to #bTru#k for further details on your next steps. ... Oh wait!! I remembered something. See the #rMysterious Statue#k over there? That statue has it's origins unknwown, and there's something scribbled onto it that resembles something big, it probably is the password for the cave? #rGet the password there#k, it may help you on your journey.\");\n+        } else if (status == 1) {\n             qm.forceStartQuest();\n-            \n             qm.dispose();\n         }\n     }"}, {"sha": "198d31a29604f9a79c546e0b9c935fbccc2af05a", "filename": "scripts/quest/21733.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21733.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21733.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21733.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "109068e345b5bc6af98e4de935c2488b59d68d6c", "filename": "scripts/quest/21734.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21734.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21734.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21734.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "2ce1c84b517363180edbd07b5bf4ecb9a7ada2f0", "filename": "scripts/quest/21735.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21735.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21735.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21735.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "b9bda8727ca1f444e2cbf6cb0a91f1d439df6580", "filename": "scripts/quest/21736.js", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21736.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21736.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21736.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as\n@@ -39,10 +39,10 @@ function start(mode, type, selection) {\n         } else if(status == 1) {\n             qm.sendNextPrev(\"Anyway, enough small talk. I realized that it might be more effective to search for information in places outside Victoria Island as well, so I've begun investigating in Ossyria. I began with #bOrbis#k and immediately hit the jackpot.\");\n         } else if(status == 2) {\n-            qm.sendAcceptDecline(\"It seems like something strange is happening in Orbis in Ossyria. It's a bit different from when we were dealing with the puppeteer, but my instincts tell me it has to do with the Black Wings. Please head over to Orbis.\");\n+            qm.sendNextPrev(\"It seems like something strange is happening in Orbis in Ossyria. It's a bit different from when we were dealing with the puppeteer, but my instincts tell me it has to do with the Black Wings. Please head over to Orbis.\");\n+        } else if(status == 3) {\n+            qm.sendAcceptDecline(\"#bLisa the Fairy#k in Orbis should know a thing or two. Go see Lisa first, she knows someone that knows the whereabouts of the sealing stone. That person #rwill require a password from you#k, when requested use the #bThere's something strange going on in Orbis....#k keyword to talk to her. Understood?\");\n         } else {\n-            qm.sendNext(\"#bLisa the Fairy#k in Orbis should know a thing or two. Go see Lisa first, when requested use the #bThere's something strange going on in Orbis....#k keyword to talk to her.\");\n-\n             qm.forceStartQuest();\n             qm.dispose();\n         }"}, {"sha": "5e19fd7a27e0a533d38ac39d09faf79ca00658c4", "filename": "scripts/quest/21738.js", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21738.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21738.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21738.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as\n@@ -34,20 +34,20 @@ function start(mode, type, selection) {\n         else\n             status--;\n         \n-        if(status == 0) {\n+        if (status == 0) {\n             qm.sendGetText(\"Hm, what do you want?\");\n-        } else {\n+        } else if (status == 1) {\n             var text = qm.getText();\n             \n             if(text != \"There's something strange going on in Orbis....\") {\n                 qm.sendNext(\"No business to deal with? I won't brook loitering around here, go away.\");\n                 qm.dispose();\n             } else {\n                 qm.sendNext(\"Oh, that's right. I can sense the power emanating from you, as well. So I shall entrust something to you.\");\n-                \n-                qm.forceStartQuest();\n-                qm.dispose();\n             }\n+        } else {\n+            qm.forceStartQuest();\n+            qm.dispose();\n         }\n     }\n }"}, {"sha": "c8e3d0dbdde5539719e81cee3a61a72e5de07071", "filename": "scripts/quest/21739.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21739.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21739.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21739.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "f5f4fd3b8a96e17b3a747e09f93ecfd4877e6acd", "filename": "scripts/quest/21740.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21740.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21740.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21740.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "e5918009886f10956a5194465a2610190c801f0c", "filename": "scripts/quest/21741.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21741.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21741.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21741.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "01cb2d398873c0c38cc27c30ad7d97e70194a851", "filename": "scripts/quest/21742.js", "status": "modified", "additions": 14, "deletions": 12, "changes": 26, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21742.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21742.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21742.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as\n@@ -53,16 +53,18 @@ function start(mode, type, selection) {\n         } else if (status == 8) {\n             qm.sendNextPrev(\"So then I thought, well what's the point of delivering it to Mu Gong? I must first restore the writing on Hanging Scroll. That's why I need you to do something for me. The guy down there writing on Hanging Scroll... is #bJin Jin#k, the greatest artist on all of Mu Lung. I'm sure he'd be able to restore the writing on Hanging Scroll.\", 9);\n         } else {\n-            if(qm.canHold(4220151)) {\n-                qm.gainItem(4220151, 1);\n+            if(!qm.haveItem(4220151, 1)) {\n+                if(!qm.canHold(4220151, 1)) {\n+                    qm.sendOk(\"Please free a room on your ETC inventory.\", 9);\n+                    qm.dispose();\n+                    return;\n+                }\n                 \n-                qm.forceStartQuest();\n-                qm.dispose();\n-            } else {\n-                qm.sendOk(\"Please free a room on your ETC inventory.\", 9);\n-                qm.dispose();\n-                return;\n+                qm.gainItem(4220151, 1);\n             }\n+            \n+            qm.forceStartQuest();\n+            qm.dispose();\n         }\n     }\n }\n@@ -83,12 +85,12 @@ function end(mode, type, selection) {\n         \n         if (status == 0) {\n             qm.sendNext(\"Oh, you brought the ink. Now let me pour it, cautiously.... Almost there, almost. ... ..... Kyaaa! Th-the letter. It says: 'I'll be there to take your Seal Rock of Mu Lung.'\");\n-            \n+        } else if (status == 1) {\n             qm.gainItem(4032342, -8);\n             qm.gainItem(4220151, -1);\n             qm.gainExp(10000 * qm.getPlayer().getExpRate());\n-            qm.forceCompleteQuest();\n             \n+            qm.forceCompleteQuest();\n             qm.dispose();\n         }\n     }"}, {"sha": "cf701c1bd44f4268f2dd2a390f3d41141fcee15a", "filename": "scripts/quest/21746.js", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21746.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21746.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21746.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as\n@@ -70,12 +70,12 @@ function end(mode, type, selection) {\n         \n         if (status == 0) {\n             qm.sendNext(\"Oh, you brought the ink. Now let me pour it, cautiously.... Almost there, almost. ... ..... Kyaaa! Th-the letter. It says: 'I'll be there to take your Seal Rock of Mu Lung.'\");\n-            \n+        } else if (status == 1) {\n             qm.gainItem(4032342, -8);\n             qm.gainItem(4220151, -1);\n             qm.gainExp(10000 * qm.getPlayer().getExpRate());\n-            qm.forceCompleteQuest();\n             \n+            qm.forceCompleteQuest();\n             qm.dispose();\n         }\n     }"}, {"sha": "c3d701502e438472eab6cf1519f47fe99cf17423", "filename": "scripts/quest/21747.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21747.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21747.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21747.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "bb84505fa2be63359e91a5829d195f60ee168ffe", "filename": "scripts/quest/21748.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21748.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21748.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21748.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "24e7a4d4887309d5da43fcfb3cd457015a26a685", "filename": "scripts/quest/21749.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21749.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21749.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21749.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "ea2dd7cd7f75e3c5de0d377b736dc177bcc88e19", "filename": "scripts/quest/21750.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21750.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21750.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21750.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "e59a01ca8a8f0e08cd13538a486c5464a9b6dd70", "filename": "scripts/quest/21753.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21753.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21753.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21753.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "b38f50f135a0cc56e55f2dcb9fe46a504d3ae241", "filename": "scripts/quest/21754.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21754.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21754.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21754.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "d5001fce1b7a089fb62f07e629f6c1f21f81a98e", "filename": "scripts/quest/21757.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21757.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/21757.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/21757.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "78a1845db67318b5c21f6ccf060ceeab4ec10f0d", "filename": "scripts/quest/2214.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/2214.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/2214.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2214.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "4f0070edbeb29252853105ad65b226e144425036", "filename": "scripts/quest/2215.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/2215.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/2215.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2215.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "18b854e063ceb14d78d3ba71e3f943303beae3bb", "filename": "scripts/quest/2216.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/2216.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/2216.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2216.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "ccd59d8d95f4d85933c528fc9e6c01488f40b057", "filename": "scripts/quest/2217.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/2217.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/2217.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2217.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "7dcee42f48664f99f2db134c0103f8cfee153937", "filename": "scripts/quest/2218.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/2218.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/2218.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2218.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "d6ed9ec845085bfa0a358b1b545892525a41ed31", "filename": "scripts/quest/2219.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/2219.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/2219.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2219.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "fe7a66086cf558410283d2614d6fd5721ef8253e", "filename": "scripts/quest/2228.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/2228.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/2228.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2228.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "7ea10eb4405c0b678e097da9218410ab6fc38748", "filename": "scripts/quest/2238.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/2238.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/2238.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2238.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "c14537e296e934785cd98aa7548c400e163f9f23", "filename": "scripts/quest/2245.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/2245.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/2245.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2245.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "94a483926f966c4e9c9c15cddd4069e2bb805b25", "filename": "scripts/quest/2257.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/2257.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/2257.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2257.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "78ae3952176f16212edfd5c937c6b5e2fbb6ba0e", "filename": "scripts/quest/2258.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/2258.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/2258.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2258.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "ac59e7278ff65c6d1029a3a5c925416035300ea3", "filename": "scripts/quest/2259.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/2259.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/2259.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2259.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "0603161acd594119b4dedb59c3e79017e4716f46", "filename": "scripts/quest/2260.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/2260.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/2260.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2260.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "48b8daa124ae35acc1121d5d08c77a9e48c19e9e", "filename": "scripts/quest/2291.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/2291.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/2291.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2291.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "b2d909564d2df786ada245b870a72b71a5e6d101", "filename": "scripts/quest/2338.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/2338.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/2338.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/2338.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "bd73b2f22d2159869881b934a811228a1230df1f", "filename": "scripts/quest/29924.js", "status": "modified", "additions": 30, "deletions": 4, "changes": 34, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/29924.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/29924.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/29924.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -2,19 +2,45 @@\n var status = -1;\n \n function start(mode, type, selection) {\n-\tif (qm.canHold(1142129) && !qm.haveItem(1142129) && qm.getPlayer().getLevel() >= 10 && ((qm.getPlayer().getJob().getId() / 100) | 0) == 21) {\n-\t\tqm.gainItem(1142129,1);\n+\tif (qm.getPlayer().getLevel() >= 10 && ((qm.getPlayer().getJob().getId() / 100) | 0) == 21) {\n+                if(!qm.haveItem(1142129)) {\n+                        if(qm.canHold(1142129)) {\n+                                qm.gainItem(1142129,1);\n+                        } else {\n+                                qm.dispose();\n+                                return;\n+                        }\n+                }\n+                \n+                var medalname = qm.getMedalName();\n+                qm.message(\"<\" + medalname + \"> has been awarded.\");\n+                qm.earnTitle(\"<\" + medalname + \"> has been awarded.\");\n+                \n \t\tqm.forceStartQuest();\n \t\tqm.forceCompleteQuest();\n \t}\n+        \n \tqm.dispose();\n }\n \n function end(mode, type, selection) {\n-\tif (qm.canHold(1142129) && !qm.haveItem(1142129) && qm.getPlayer().getLevel() >= 10 && ((qm.getPlayer().getJob().getId() / 100) | 0) == 21) {\n-\t\tqm.gainItem(1142129,1);\n+\tif (qm.getPlayer().getLevel() >= 10 && ((qm.getPlayer().getJob().getId() / 100) | 0) == 21) {\n+                if(!qm.haveItem(1142129)) {\n+                        if(qm.canHold(1142129)) {\n+                                qm.gainItem(1142129,1);\n+                        } else {\n+                                qm.dispose();\n+                                return;\n+                        }\n+                }\n+            \n+                var medalname = qm.getMedalName();\n+                qm.message(\"<\" + medalname + \"> has been awarded.\");\n+                qm.earnTitle(\"<\" + medalname + \"> has been awarded.\");\n+            \n \t\tqm.forceStartQuest();\n \t\tqm.forceCompleteQuest();\n \t}\n+        \n \tqm.dispose();\n }\n\\ No newline at end of file"}, {"sha": "71e60da7c9831700ab727d36487ac67d1946d4af", "filename": "scripts/quest/3108.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/3108.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/3108.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/3108.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "5f382b58c0cbab101c3a2eb62d23d87e460ca853", "filename": "scripts/quest/3311.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/3311.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/3311.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/3311.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "ba26a7611b0680edeb2cd77ef5785b5cd4eb7763", "filename": "scripts/quest/3314.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/3314.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/3314.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/3314.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "107d5c19efcd0f5130553d2ea66c3fe0b266b6ae", "filename": "scripts/quest/3320.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/3320.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/3320.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/3320.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "577995ea742b0241fa66458aadc28559db997a94", "filename": "scripts/quest/3321.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/3321.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/3321.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/3321.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "a136643d35497446269ec2e18a074f60870dcc27", "filename": "scripts/quest/3345.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/3345.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/3345.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/3345.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "62498918b45fa0cac39f47ad42087f9612abb181", "filename": "scripts/quest/3353.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/3353.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/3353.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/3353.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "64721224b5d19e43488d1ed5705a86f6e1533a59", "filename": "scripts/quest/3354.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/3354.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/3354.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/3354.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "7e2c07ba543bbef0a1b95a24e5e81dfbd3992db2", "filename": "scripts/quest/3529.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/3529.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/3529.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/3529.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "fce4608172d9dd44a08f5057022f3d43572fd5d0", "filename": "scripts/quest/3714.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/3714.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/3714.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/3714.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "e0ecac3644beddf5a399f0e2d3446cab12d2f91c", "filename": "scripts/quest/3926.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/3926.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/3926.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/3926.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "463bcc2335284173a0ed891a6ff3e0d372bbd9d6", "filename": "scripts/quest/3929.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/3929.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/3929.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/3929.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "86dc1022992b2f38a600638b8dfa871a33a1d4f4", "filename": "scripts/quest/3933.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/3933.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/3933.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/3933.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "93be8f435f422f75b87685441afe1b1eff39222b", "filename": "scripts/quest/3941.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/3941.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/3941.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/3941.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "78f7af11d87ced3551d9f38ecd6ca591c7907d50", "filename": "scripts/quest/3953.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/3953.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/3953.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/3953.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "b82fe1822e4cc473555595e19812594daf2eb06e", "filename": "scripts/quest/6030.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/6030.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/6030.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/6030.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "0372bffbd092b24e7009d41e5b4a99b69443e35d", "filename": "scripts/quest/6031.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/6031.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/6031.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/6031.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "0a7a52ee17cf2e19d0919fdbe8f8019d3bf77337", "filename": "scripts/quest/6032.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/6032.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/6032.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/6032.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "090401b06592b37175136281af3b7da933572c21", "filename": "scripts/quest/6033.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/6033.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/6033.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/6033.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "b1bab49ef21da86dfe8f0b5d5f402ecb7b50c761", "filename": "scripts/quest/6036.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/6036.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/quest/6036.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/quest/6036.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "a68d191a7f298dd6cb94f5f139b8fb8fe952b8e1", "filename": "scripts/reactor/1020000.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/1020000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/1020000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/1020000.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "e429663b33a079f1e8bf905c1a929a76ffea6caf", "filename": "scripts/reactor/1020001.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/1020001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/1020001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/1020001.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "72cde245011d00e7a5a5b932629121fd8cda4b9f", "filename": "scripts/reactor/1020002.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/1020002.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/1020002.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/1020002.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "ed9383ef782f1651d77dfd292678a28656e1253b", "filename": "scripts/reactor/1021000.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/1021000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/1021000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/1021000.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "36c87614803ca5da533710e83e70e6548b25e9fe", "filename": "scripts/reactor/1021001.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/1021001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/1021001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/1021001.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "a57e1cf1765a873fd0b20bd96e47b987cf41cc07", "filename": "scripts/reactor/1021002.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/1021002.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/1021002.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/1021002.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "0039d5fffbd2017704685b950ccf91d0a79cc45d", "filename": "scripts/reactor/1022000.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/1022000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/1022000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/1022000.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "aba1ec101fa4ea86787a531845d2722dcd459648", "filename": "scripts/reactor/1022001.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/1022001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/1022001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/1022001.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "aba1ec101fa4ea86787a531845d2722dcd459648", "filename": "scripts/reactor/1032000.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/1032000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/1032000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/1032000.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "aba1ec101fa4ea86787a531845d2722dcd459648", "filename": "scripts/reactor/200000.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/200000.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/200000.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/200000.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "aba1ec101fa4ea86787a531845d2722dcd459648", "filename": "scripts/reactor/200001.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/200001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/200001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/200001.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "aba1ec101fa4ea86787a531845d2722dcd459648", "filename": "scripts/reactor/200002.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/200002.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/200002.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/200002.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "aba1ec101fa4ea86787a531845d2722dcd459648", "filename": "scripts/reactor/200003.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/200003.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/200003.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/200003.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "aba1ec101fa4ea86787a531845d2722dcd459648", "filename": "scripts/reactor/200004.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/200004.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/200004.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/200004.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "aba1ec101fa4ea86787a531845d2722dcd459648", "filename": "scripts/reactor/200005.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/200005.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/200005.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/200005.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "aba1ec101fa4ea86787a531845d2722dcd459648", "filename": "scripts/reactor/200006.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/200006.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/200006.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/200006.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "aba1ec101fa4ea86787a531845d2722dcd459648", "filename": "scripts/reactor/200007.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/200007.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/200007.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/200007.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "aba1ec101fa4ea86787a531845d2722dcd459648", "filename": "scripts/reactor/200008.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/200008.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/200008.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/200008.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "aba1ec101fa4ea86787a531845d2722dcd459648", "filename": "scripts/reactor/200009.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/200009.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/200009.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/200009.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "aba1ec101fa4ea86787a531845d2722dcd459648", "filename": "scripts/reactor/2052001.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/2052001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/2052001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2052001.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "aba1ec101fa4ea86787a531845d2722dcd459648", "filename": "scripts/reactor/2112015.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/2112015.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/2112015.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/2112015.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "2d1a4b5df5dba43fcad93411d157f005f5b2e010", "filename": "scripts/reactor/6741001.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/6741001.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/6741001.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/6741001.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "72ff27e2eafa4eba269660815333d97a3f30c853", "filename": "scripts/reactor/6741015.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/6741015.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/6741015.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/6741015.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "6ea47b163f91a07365864e4675acc168810a8ee8", "filename": "scripts/reactor/6742014.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/6742014.js", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/scripts/reactor/6742014.js", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/scripts/reactor/6742014.js?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "d23b666677ef46f0ebdd252b63fb4be1f6e2780f", "filename": "sql/db_database.sql", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/sql/db_database.sql", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/sql/db_database.sql", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/sql/db_database.sql?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -11432,7 +11432,6 @@ INSERT IGNORE INTO `temp_data` (`id`, `dropperid`, `itemid`, `minimum_quantity`,\n (11213, 9001005, 4031857, 1, 1, 2192, 300000),\n (11214, 9001012, 4032311, 1, 1, 0, 300000),\n (11215, 9001012, 4032311, 1, 1, 0, 300000),\n-(11216, 9001013, 4032312, 1, 1, 0, 999999),\n (11217, 9001013, 4032339, 1, 1, 21303, 999999),\n (11219, 4230113, 1452016, 1, 1, 0, 700),\n (11220, 4230103, 1452016, 1, 1, 0, 700),"}, {"sha": "ad4f8bcc27606035e688d0ba87b2c9ea50140577", "filename": "sql/db_drops.sql", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/sql/db_drops.sql", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/sql/db_drops.sql", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/sql/db_drops.sql?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -20093,9 +20093,6 @@ USE `heavenms`;\n (1210100, 4032379, 1, 1, 2409, 40000),\n (2130100, 4001344, 1, 1, 0, 7000),\n (7220002, 4031789, 1, 1, 3844, 999999),\n-(9300102, 4031507, 1, 1, 6002, 999999),\n-(9300061, 4001101, 1, 1, 0, 999999),\n-(9300093, 4031495, 1, 1, 6192, 999999),\n (8830007, 1302112, 1, 1, 0, 4000),\n (8830007, 1302113, 1, 1, 0, 4000),\n (8830007, 1312042, 1, 1, 0, 4000),\n@@ -21497,7 +21494,10 @@ USE `heavenms`;\n (9300343, 4030012, 1, 1, 0, 10000),\n (9300343, 4031846, 1, 1, 2173, 50000),\n (9300343, 4032130, 1, 1, 20707, 10000),\n-(9300343, 4032340, 1, 1, 21710, 200000);\n+(9300343, 4032340, 1, 1, 21710, 200000),\n+(9300102, 4031507, 1, 1, 6002, 999999),\n+(9300061, 4001101, 1, 1, 0, 999999),\n+(9300093, 4031495, 1, 1, 6192, 999999);\n \n  -- Copying drops from some mobs to other versions of them\n "}, {"sha": "4134491a5323149ebf59d844da95514aa1a08488", "filename": "sql/readme.txt", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/sql/readme.txt", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/sql/readme.txt", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/sql/readme.txt?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,4 +1,4 @@\n----- HeavenMS (MapleSolaxiaV2) MySQL Database ----\n+---- HeavenMS MySQL Database ----\n \n These SQL files must be executed IN ORDER to set up the database:\n \t- db_database.sql"}, {"sha": "1b378a0dba60a00ef8b4912b93ed249922a8d66c", "filename": "src/client/MapleCharacter.java", "status": "modified", "additions": 139, "deletions": 40, "changes": 179, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/client/MapleCharacter.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/client/MapleCharacter.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/MapleCharacter.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -22,6 +22,7 @@\n package client;\n \n import java.awt.Point;\n+import java.lang.ref.WeakReference;\n import java.sql.Connection;\n import java.sql.PreparedStatement;\n import java.sql.ResultSet;\n@@ -45,7 +46,6 @@\n import java.util.Map.Entry;\n import java.util.Set;\n import java.util.Comparator;\n-import tools.locks.MonitoredReentrantLock;\n import java.util.concurrent.locks.Lock;\n import java.util.concurrent.ScheduledFuture;\n import java.util.concurrent.atomic.AtomicInteger;\n@@ -106,6 +106,7 @@\n import tools.MaplePacketCreator;\n import tools.Pair;\n import tools.Randomizer;\n+import tools.locks.MonitoredReentrantLock;\n import client.autoban.AutobanManager;\n import client.inventory.Equip;\n import client.inventory.Item;\n@@ -242,6 +243,7 @@\n     private SavedLocation savedLocations[];\n     private SkillMacro[] skillMacros = new SkillMacro[5];\n     private List<Integer> lastmonthfameids;\n+    private List<WeakReference<MapleMap>> lastVisitedMaps = new LinkedList<>();\n     private final Map<Short, MapleQuestStatus> quests;\n     private Set<MapleMonster> controlled = new LinkedHashSet<>();\n     private Map<Integer, String> entered = new LinkedHashMap<>();\n@@ -1176,7 +1178,7 @@ public void clearBanishPlayerData() {\n         this.banishTime = 0;\n     }\n     \n-    private void setBanishPlayerData(int banishMap, int banishSp, long banishTime) {\n+    public void setBanishPlayerData(int banishMap, int banishSp, long banishTime) {\n         this.banishMap = banishMap;\n         this.banishSp = banishSp;\n         this.banishTime = banishTime;\n@@ -1319,6 +1321,74 @@ private boolean buffMapProtection() {\n         return false;\n     }\n     \n+    public void updateMapDropsUponPartyOperation(List<MapleCharacter> exPartyMembers) {\n+        List<WeakReference<MapleMap>> mapids;\n+        \n+        petLock.lock();\n+        try {\n+            mapids = new LinkedList<>(lastVisitedMaps);\n+        } finally {\n+            petLock.unlock();\n+        }\n+        \n+        List<MapleCharacter> partyMembers = new LinkedList<>();\n+        for(MapleCharacter mc : (exPartyMembers != null) ? exPartyMembers : this.getPartyMembers()) {\n+            if(mc.isLoggedinWorld()) {\n+                partyMembers.add(mc);\n+            }\n+        }\n+        \n+        MapleCharacter partyLeaver = null;\n+        if(exPartyMembers != null) {\n+            partyMembers.remove(this);\n+            partyLeaver = this;\n+        }\n+        \n+        int partyId = exPartyMembers != null ? 0 : this.getPartyId();\n+        for(WeakReference<MapleMap> mapRef : mapids) {\n+            MapleMap mapObj = mapRef.get();\n+            \n+            if(mapObj != null) {\n+                mapObj.updatePlayerItemDrops(partyId, id, partyMembers, partyLeaver);\n+            }\n+        }\n+    }\n+    \n+    private Integer getVisitedMapIndex(MapleMap map) {\n+        int idx = 0;\n+        \n+        for(WeakReference<MapleMap> mapRef : lastVisitedMaps) {\n+            if(map.equals(mapRef.get())) {\n+                return idx;\n+            }\n+            \n+            idx++;\n+        }\n+        \n+        return -1;\n+    }\n+    \n+    public void visitMap(MapleMap map) {\n+        petLock.lock();\n+        try {\n+            int idx = getVisitedMapIndex(map);\n+        \n+            if(idx == -1) {\n+                if(lastVisitedMaps.size() == ServerConstants.MAP_VISITED_SIZE) {\n+                    lastVisitedMaps.remove(0);\n+                }\n+            } else {\n+                WeakReference<MapleMap> mapRef = lastVisitedMaps.remove(idx);\n+                lastVisitedMaps.add(mapRef);\n+                return;\n+            }\n+\n+            lastVisitedMaps.add(new WeakReference<>(map));\n+        } finally {\n+            petLock.unlock();\n+        }\n+    }\n+    \n     private void changeMapInternal(final MapleMap to, final Point pos, final byte[] warpPacket) {\n         if(!canWarpMap) return;\n         \n@@ -1335,6 +1405,7 @@ private void changeMapInternal(final MapleMap to, final Point pos, final byte[]\n             map = to;\n             setPosition(pos);\n             map.addPlayer(this);\n+            visitMap(map);\n             \n             prtLock.lock();\n             try {\n@@ -1522,50 +1593,55 @@ public final void pickupItem(MapleMapObject ob, int petIndex) {     // yes, one\n                 return;\n             }\n             \n-            boolean isPet = petIndex > -1;\n-            final byte[] pickupPacket = MaplePacketCreator.removeItemFromMap(mapitem.getObjectId(), (isPet) ? 5 : 2, this.getId(), isPet, petIndex);\n-            \n-            boolean hasSpaceInventory = true;\n-            if (mapitem.getItemId() == 4031865 || mapitem.getItemId() == 4031866 || mapitem.getMeso() > 0 || ii.isConsumeOnPickup(mapitem.getItemId()) || (hasSpaceInventory = MapleInventoryManipulator.checkSpace(client, mapitem.getItemId(), mapitem.getItem().getQuantity(), mapitem.getItem().getOwner()))) {\n-                if ((this.getMapId() > 209000000 && this.getMapId() < 209000016) || (this.getMapId() >= 990000500 && this.getMapId() <= 990000502)) {//happyville trees and guild PQ\n-                    if (!mapitem.isPlayerDrop() || mapitem.getDropper().getObjectId() == client.getPlayer().getObjectId()) {\n-                        if(mapitem.getMeso() > 0) {\n-                            this.gainMeso(mapitem.getMeso(), true, true, false);\n-                            this.getMap().pickItemDrop(pickupPacket, mapitem);\n-                        } else if(mapitem.getItemId() == 4031865 || mapitem.getItemId() == 4031866) {\n-                            // Add NX to account, show effect and make item disappear\n-                            int nxGain = mapitem.getItemId() == 4031865 ? 100 : 250;\n-                            this.getCashShop().gainCash(1, nxGain);\n-                            \n-                            showHint(\"You have earned #e#b\" + nxGain + \" NX#k#n. (\" + this.getCashShop().getCash(1) + \" NX)\", 300);\n-                            \n-                            this.getMap().pickItemDrop(pickupPacket, mapitem);\n-                        } else if (MapleInventoryManipulator.addFromDrop(client, mapitem.getItem(), true)) {\n-                            this.getMap().pickItemDrop(pickupPacket, mapitem);\n+            mapitem.lockItem();\n+            try {\n+                if(mapitem.isPickedUp()) {\n+                    client.announce(MaplePacketCreator.showItemUnavailable());\n+                    client.announce(MaplePacketCreator.enableActions());\n+                    return;\n+                }\n+                \n+                boolean isPet = petIndex > -1;\n+                final byte[] pickupPacket = MaplePacketCreator.removeItemFromMap(mapitem.getObjectId(), (isPet) ? 5 : 2, this.getId(), isPet, petIndex);\n+\n+                boolean hasSpaceInventory = true;\n+                if (mapitem.getItemId() == 4031865 || mapitem.getItemId() == 4031866 || mapitem.getMeso() > 0 || ii.isConsumeOnPickup(mapitem.getItemId()) || (hasSpaceInventory = MapleInventoryManipulator.checkSpace(client, mapitem.getItemId(), mapitem.getItem().getQuantity(), mapitem.getItem().getOwner()))) {\n+                    int mapId = this.getMapId();\n+                    \n+                    if ((mapId > 209000000 && mapId < 209000016) || (mapId >= 990000500 && mapId <= 990000502)) {//happyville trees and guild PQ\n+                        if (!mapitem.isPlayerDrop() || mapitem.getDropper().getObjectId() == client.getPlayer().getObjectId()) {\n+                            if(mapitem.getMeso() > 0) {\n+                                this.gainMeso(mapitem.getMeso(), true, true, false);\n+                                this.getMap().pickItemDrop(pickupPacket, mapitem);\n+                            } else if(mapitem.getItemId() == 4031865 || mapitem.getItemId() == 4031866) {\n+                                // Add NX to account, show effect and make item disappear\n+                                int nxGain = mapitem.getItemId() == 4031865 ? 100 : 250;\n+                                this.getCashShop().gainCash(1, nxGain);\n+\n+                                showHint(\"You have earned #e#b\" + nxGain + \" NX#k#n. (\" + this.getCashShop().getCash(1) + \" NX)\", 300);\n+\n+                                this.getMap().pickItemDrop(pickupPacket, mapitem);\n+                            } else if (MapleInventoryManipulator.addFromDrop(client, mapitem.getItem(), true)) {\n+                                this.getMap().pickItemDrop(pickupPacket, mapitem);\n+                            } else {\n+                                client.announce(MaplePacketCreator.enableActions());\n+                                return;\n+                            }\n                         } else {\n+                            client.announce(MaplePacketCreator.showItemUnavailable());\n                             client.announce(MaplePacketCreator.enableActions());\n                             return;\n                         }\n-                    } else {\n-                        client.announce(MaplePacketCreator.showItemUnavailable());\n                         client.announce(MaplePacketCreator.enableActions());\n                         return;\n                     }\n-                    client.announce(MaplePacketCreator.enableActions());\n-                    return;\n-                }\n             \n-                synchronized (mapitem) {\n                     if (mapitem.getQuest() > 0 && !this.needQuestItem(mapitem.getQuest(), mapitem.getItemId())) {\n                         client.announce(MaplePacketCreator.showItemUnavailable());\n                         client.announce(MaplePacketCreator.enableActions());\n                         return;\n                     }\n-                    if (mapitem.isPickedUp()) {\n-                        client.announce(MaplePacketCreator.showItemUnavailable());\n-                        client.announce(MaplePacketCreator.enableActions());\n-                        return;\n-                    }\n+                    \n                     if (mapitem.getMeso() > 0) {\n                         prtLock.lock();\n                         try {\n@@ -1628,10 +1704,12 @@ public final void pickupItem(MapleMapObject ob, int petIndex) {     // yes, one\n                     }\n                     \n                     this.getMap().pickItemDrop(pickupPacket, mapitem);\n+                } else if(!hasSpaceInventory) {\n+                    client.announce(MaplePacketCreator.getInventoryFull());\n+                    client.announce(MaplePacketCreator.getShowInventoryFull());\n                 }\n-            } else if(!hasSpaceInventory) {\n-                client.announce(MaplePacketCreator.getInventoryFull());\n-                client.announce(MaplePacketCreator.getShowInventoryFull());\n+            } finally {\n+                mapitem.unlockItem();\n             }\n         }\n         client.announce(MaplePacketCreator.enableActions());\n@@ -4746,7 +4824,7 @@ private void guildUpdate() {\n             e.printStackTrace();\n         }\n     }\n-\n+    \n     public void handleEnergyChargeGain() { // to get here energychargelevel has to be > 0\n         Skill energycharge = isCygnus() ? SkillFactory.getSkill(ThunderBreaker.ENERGY_CHARGE) : SkillFactory.getSkill(Marauder.ENERGY_CHARGE);\n         MapleStatEffect ceffect;\n@@ -6111,8 +6189,10 @@ public void receivePartyMemberHP() {\n         try {\n             if (party != null) {\n                 int channel = client.getChannel();\n+                int mapId = getMapId();\n+                \n                 for (MaplePartyCharacter partychar : party.getMembers()) {\n-                    if (partychar.getMapId() == getMapId() && partychar.getChannel() == channel) {\n+                    if (partychar.getMapId() == mapId && partychar.getChannel() == channel) {\n                         MapleCharacter other = Server.getInstance().getWorld(world).getChannel(channel).getPlayerStorage().getCharacterByName(partychar.getName());\n                         if (other != null) {\n                             client.announce(MaplePacketCreator.updatePartyMemberHP(other.getId(), other.getHp(), other.getCurrentMaxHp()));\n@@ -6983,6 +7063,23 @@ public void setMerchantMeso(int set) {\n         }\n         merchantmeso = set;\n     }\n+    \n+    public synchronized void withdrawMerchantMesos() {\n+        int merchantMeso = this.getMerchantMeso();\n+        if (merchantMeso > 0) {\n+            int possible = Integer.MAX_VALUE - merchantMeso;\n+            \n+            if (possible > 0) {\n+                if (possible < merchantMeso) {\n+                    this.gainMeso(possible, false);\n+                    this.setMerchantMeso(merchantMeso - possible);\n+                } else {\n+                    this.gainMeso(merchantMeso, false);\n+                    this.setMerchantMeso(0);\n+                }\n+            }\n+        }\n+    }\n \n     public void setHiredMerchant(MapleHiredMerchant merchant) {\n         this.hiredMerchant = merchant;\n@@ -7264,7 +7361,7 @@ private int standaloneSell(MapleClient c, MapleItemInformationProvider ii, Maple\n         if (item == null){ //Basic check\n             return(0);\n         }\n-        if (ItemConstants.isRechargable(item.getItemId())) {\n+        if (ItemConstants.isRechargeable(item.getItemId())) {\n             quantity = item.getQuantity();\n         }\n         if (quantity < 0) {\n@@ -7540,8 +7637,10 @@ public void updatePartyMemberHP() {\n     private void updatePartyMemberHPInternal() {\n         if (party != null) {\n             int channel = client.getChannel();\n+            int mapId = getMapId();\n+            \n             for (MaplePartyCharacter partychar : party.getMembers()) {\n-                if (partychar.getMapId() == getMapId() && partychar.getChannel() == channel) {\n+                if (partychar.getMapId() == mapId && partychar.getChannel() == channel) {\n                     MapleCharacter other = Server.getInstance().getWorld(world).getChannel(channel).getPlayerStorage().getCharacterByName(partychar.getName());\n                     if (other != null) {\n                         other.client.announce(MaplePacketCreator.updatePartyMemberHP(getId(), this.hp, maxhp));"}, {"sha": "a34578940d797aa288af1228284087868dec2a0b", "filename": "src/client/MapleClient.java", "status": "modified", "additions": 12, "deletions": 7, "changes": 19, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/client/MapleClient.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/client/MapleClient.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/MapleClient.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -106,6 +106,7 @@\n \tprivate byte gender = -1;\n \tprivate boolean disconnecting = false;\n \tprivate final Lock lock = new MonitoredReentrantLock(MonitoredLockType.CLIENT, true);\n+        private static final Lock loginLock = new MonitoredReentrantLock(MonitoredLockType.CLIENT, true);\n \tprivate int votePoints;\n \tprivate int voteTime = -1;\n \tprivate long lastNpcClick;\n@@ -420,13 +421,17 @@ public void banMacs() {\n \t}\n \n \tpublic int finishLogin() {\n-\t\tsynchronized (MapleClient.class) {\n-\t\t\tif (getLoginState() > LOGIN_NOTLOGGEDIN) { // 0 = LOGIN_NOTLOGGEDIN, 1= LOGIN_SERVER_TRANSITION, 2 = LOGIN_LOGGEDIN\n-\t\t\t\tloggedIn = false;\n-\t\t\t\treturn 7;\n-\t\t\t}\n-\t\t\tupdateLoginState(LOGIN_LOGGEDIN);\n-\t\t}\n+                loginLock.lock();\n+                try {\n+                    if (getLoginState() > LOGIN_NOTLOGGEDIN) { // 0 = LOGIN_NOTLOGGEDIN, 1= LOGIN_SERVER_TRANSITION, 2 = LOGIN_LOGGEDIN\n+                        loggedIn = false;\n+                        return 7;\n+                    }\n+                    updateLoginState(LOGIN_LOGGEDIN);\n+                } finally {\n+                    loginLock.unlock();\n+                }\n+            \n \t\treturn 0;\n \t}\n "}, {"sha": "6b903ffc8473c8bb513cc3f197da206a8bfaef12", "filename": "src/client/command/Commands.java", "status": "modified", "additions": 26, "deletions": 18, "changes": 44, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/client/command/Commands.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/client/command/Commands.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/command/Commands.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1202,7 +1202,7 @@ else if (type.equals(\"cash\")) {\n                 case \"heal\":\n \t\t\tplayer.setHpMp(30000);\n                     break;\n-                    \n+                \n                 case \"item\":\n                 case \"drop\":\n                         if (sub.length < 2){\n@@ -2533,23 +2533,31 @@ public static boolean executeHeavenMsCommandLv4(Channel cserv, Server srv, Maple\n                     case \"forcevac\":\n                             List<MapleMapObject> items = player.getMap().getMapObjectsInRange(player.getPosition(), Double.POSITIVE_INFINITY, Arrays.asList(MapleMapObjectType.ITEM));\n                             for (MapleMapObject item : items) {\n-                                MapleMapItem mapItem = (MapleMapItem) item;\n-                                if (mapItem.getMeso() > 0) {\n-                                        player.gainMeso(mapItem.getMeso(), true);\n-                                } else if(mapItem.getItemId() == 4031865 || mapItem.getItemId() == 4031866) {\n-                                        // Add NX to account, show effect and make item disappear\n-                                        player.getCashShop().gainCash(1, mapItem.getItemId() == 4031865 ? 100 : 250);\n-                                } else if (mapItem.getItem().getItemId() >= 5000000 && mapItem.getItem().getItemId() <= 5000100) {\n-                                        int petId = MaplePet.createPet(mapItem.getItem().getItemId());\n-                                        if (petId == -1) {\n-                                                continue;\n-                                        }\n-                                        MapleInventoryManipulator.addById(c, mapItem.getItem().getItemId(), mapItem.getItem().getQuantity(), null, petId);\n-                                } else {\n-                                        MapleInventoryManipulator.addFromDrop(c, mapItem.getItem(), true);\n-                                }\n-                                \n-                                player.getMap().pickItemDrop(MaplePacketCreator.removeItemFromMap(mapItem.getObjectId(), 2, player.getId()), mapItem);\n+                                    MapleMapItem mapItem = (MapleMapItem) item;\n+\n+                                    mapItem.lockItem();\n+                                    try {\n+                                            if(mapItem.isPickedUp()) continue;\n+\n+                                            if (mapItem.getMeso() > 0) {\n+                                                    player.gainMeso(mapItem.getMeso(), true);\n+                                            } else if(mapItem.getItemId() == 4031865 || mapItem.getItemId() == 4031866) {\n+                                                    // Add NX to account, show effect and make item disappear\n+                                                    player.getCashShop().gainCash(1, mapItem.getItemId() == 4031865 ? 100 : 250);\n+                                            } else if (mapItem.getItem().getItemId() >= 5000000 && mapItem.getItem().getItemId() <= 5000100) {\n+                                                    int petId = MaplePet.createPet(mapItem.getItem().getItemId());\n+                                                    if (petId == -1) {\n+                                                            continue;\n+                                                    }\n+                                                    MapleInventoryManipulator.addById(c, mapItem.getItem().getItemId(), mapItem.getItem().getQuantity(), null, petId);\n+                                            } else {\n+                                                    MapleInventoryManipulator.addFromDrop(c, mapItem.getItem(), true);\n+                                            }\n+\n+                                            player.getMap().pickItemDrop(MaplePacketCreator.removeItemFromMap(mapItem.getObjectId(), 2, player.getId()), mapItem);\n+                                    } finally {\n+                                            mapItem.unlockItem();\n+                                    }\n                             }\n                         break;\n                             "}, {"sha": "b0ffdeb65120bf898b366808dd11c47064a3ccc4", "filename": "src/client/inventory/MapleInventory.java", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/client/inventory/MapleInventory.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/client/inventory/MapleInventory.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/inventory/MapleInventory.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -146,7 +146,7 @@ public int freeSlotCountById(int itemId, int required) {\n         List<Item> itemList = listById(itemId);\n         int openSlot = 0;\n         \n-        if(!ItemConstants.isRechargable(itemId)) {\n+        if(!ItemConstants.isRechargeable(itemId)) {\n             for (Item item : itemList) {\n                 required -= item.getQuantity();\n \n@@ -246,7 +246,7 @@ public void move(short sSlot, short dSlot, short slotMax) {\n                 source.setPosition(dSlot);\n                 inventory.put(dSlot, source);\n                 inventory.remove(sSlot);\n-            } else if (target.getItemId() == source.getItemId() && !ItemConstants.isRechargable(source.getItemId()) && isSameOwner(source, target)) {\n+            } else if (target.getItemId() == source.getItemId() && !ItemConstants.isRechargeable(source.getItemId()) && isSameOwner(source, target)) {\n                 if (type.getType() == MapleInventoryType.EQUIP.getType() || type.getType() == MapleInventoryType.CASH.getType()) {\n                     swap(target, source);\n                 } else if (source.getQuantity() + target.getQuantity() > slotMax) {"}, {"sha": "532044a746a4c84eedaa5d05b238c8ae7cb3d33f", "filename": "src/client/newyear/NewYearCardRecord.java", "status": "modified", "additions": 18, "deletions": 17, "changes": 35, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/client/newyear/NewYearCardRecord.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/client/newyear/NewYearCardRecord.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/newyear/NewYearCardRecord.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,21 +1,22 @@\n /*\n- * This file is part of the HeavenMS (MapleSolaxiaV2) Maple Story Server\n- *\n- * Copyright (C) 2017 RonanLana\n- *\n- * This program is free software: you can redistribute it and/or modify\n- * it under the terms of the GNU General Public License as published by\n- * the Free Software Foundation, either version 3 of the License, or\n- * (at your option) any later version.\n- *\n- * This program is distributed in the hope that it will be useful,\n- * but WITHOUT ANY WARRANTY; without even the implied warranty of\n- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n- * GNU General Public License for more details.\n- *\n- * You should have received a copy of the GNU General Public License\n- * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n- */\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n package client.newyear;\n \n import client.MapleCharacter;"}, {"sha": "3babdac6ef2ca1011b8f041c2483ecc003ed40dc", "filename": "src/client/processor/DueyProcessor.java", "status": "added", "additions": 493, "deletions": 0, "changes": 493, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/client/processor/DueyProcessor.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/client/processor/DueyProcessor.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/processor/DueyProcessor.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -0,0 +1,493 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    Copyleft (L) 2016 - 2018 RonanLana (HeavenMS)\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+package client.processor;\n+\n+import client.MapleCharacter;\n+import client.MapleClient;\n+import client.autoban.AutobanFactory;\n+import client.inventory.Equip;\n+import client.inventory.Item;\n+import client.inventory.MapleInventoryType;\n+import constants.ItemConstants;\n+import java.sql.Connection;\n+import java.sql.PreparedStatement;\n+import java.sql.ResultSet;\n+import java.sql.SQLException;\n+import java.util.Calendar;\n+import java.util.LinkedList;\n+import java.util.List;\n+import net.server.channel.Channel;\n+import server.DueyPackages;\n+import server.MapleInventoryManipulator;\n+import server.MapleItemInformationProvider;\n+import tools.DatabaseConnection;\n+import tools.FilePrinter;\n+import tools.MaplePacketCreator;\n+\n+/**\n+ *\n+ * @author RonanLana (synchronization of Duey modules)\n+ */\n+public class DueyProcessor {\n+    \n+    public enum Actions {\n+        TOSERVER_SEND_ITEM(0x02),\n+        TOSERVER_CLAIM_PACKAGE(0x04),\n+        TOSERVER_REMOVE_PACKAGE(0x05),\n+        TOSERVER_CLOSE_DUEY(0x07),\n+        TOCLIENT_OPEN_DUEY(0x08),\n+        TOCLIENT_SEND_ENABLE_ACTIONS(0x09),\n+        TOCLIENT_SEND_NOT_ENOUGH_MESOS(0x0A),\n+        TOCLIENT_SEND_INCORRECT_REQUEST(0x0B),\n+        TOCLIENT_SEND_NAME_DOES_NOT_EXIST(0x0C),\n+        TOCLIENT_SEND_SAMEACC_ERROR(0x0D),\n+        TOCLIENT_SEND_RECEIVER_STORAGE_FULL(0x0E),\n+        TOCLIENT_SEND_RECEIVER_UNABLE_TO_RECV(0x0F),\n+        TOCLIENT_SEND_RECEIVER_STORAGE_WITH_UNIQUE(0x10),\n+        TOCLIENT_SEND_MESO_LIMIT(0x11),\n+        TOCLIENT_SEND_SUCCESSFULLY_SENT(0x12),\n+        TOCLIENT_RECV_UNKNOWN_ERROR(0x13),\n+        TOCLIENT_RECV_ENABLE_ACTIONS(0x14),\n+        TOCLIENT_RECV_NO_FREE_SLOTS(0x15),\n+        TOCLIENT_RECV_RECEIVER_WITH_UNIQUE(0x16),\n+        TOCLIENT_RECV_SUCCESSFUL_MSG(0x17),\n+        TOCLIENT_RECV_PACKAGE_MSG(0x1B);\n+        final byte code;\n+\n+        private Actions(int code) {\n+            this.code = (byte) code;\n+        }\n+\n+        public byte getCode() {\n+            return code;\n+        }\n+    }\n+    \n+    private static int getAccIdFromCNAME(String name, boolean accountid) {\n+        try {\n+            PreparedStatement ps;\n+            String text = \"SELECT id,accountid FROM characters WHERE name = ?\";\n+            Connection con = DatabaseConnection.getConnection();\n+            ps = con.prepareStatement(text);\n+            ps.setString(1, name);\n+            int id_;\n+            try (ResultSet rs = ps.executeQuery()) {\n+                if (!rs.next()) {\n+                    rs.close();\n+                    ps.close();\n+                    return -1;\n+                }\n+                id_ = accountid ? rs.getInt(\"accountid\") : rs.getInt(\"id\");\n+            }\n+            ps.close();\n+            con.close();\n+            return id_;\n+        } catch (SQLException e) {\n+            e.printStackTrace();\n+        }\n+        return -1;\n+    }\n+    \n+    private static String getCurrentDate() {\n+        String date = \"\";\n+        Calendar cal = Calendar.getInstance();\n+        int day = cal.get(Calendar.DATE) - 1; // instant duey ?\n+        int month = cal.get(Calendar.MONTH) + 1; // its an array of months.\n+        int year = cal.get(Calendar.YEAR);\n+        date += day < 9 ? \"0\" + day + \"-\" : \"\" + day + \"-\";\n+        date += month < 9 ? \"0\" + month + \"-\" : \"\" + month + \"-\";\n+        date += year;\n+        \n+        return date;\n+    }\n+\n+    private static void removeItemFromDB(int packageid) {\n+        Connection con = null;\n+        try {\n+            con = DatabaseConnection.getConnection();\n+            \n+            PreparedStatement ps = con.prepareStatement(\"DELETE FROM dueypackages WHERE PackageId = ?\");\n+            ps.setInt(1, packageid);\n+            ps.executeUpdate();\n+            ps.close();\n+            ps = con.prepareStatement(\"DELETE FROM dueyitems WHERE PackageId = ?\");\n+            ps.setInt(1, packageid);\n+            ps.executeUpdate();\n+            ps.close();\n+            con.close();\n+        } catch (SQLException e) {\n+            e.printStackTrace();\n+        }\n+    }\n+\n+    private static DueyPackages getItemByPID(ResultSet rs) {\n+        try {\n+            DueyPackages dueypack;\n+            if (rs.getInt(\"type\") == 1) {\n+                Equip eq = new Equip(rs.getInt(\"itemid\"), (byte) 0, -1);\n+                eq.setUpgradeSlots((byte) rs.getInt(\"upgradeslots\"));\n+                eq.setLevel((byte) rs.getInt(\"level\"));\n+                eq.setStr((short) rs.getInt(\"str\"));\n+                eq.setDex((short) rs.getInt(\"dex\"));\n+                eq.setInt((short) rs.getInt(\"int\"));\n+                eq.setLuk((short) rs.getInt(\"luk\"));\n+                eq.setHp((short) rs.getInt(\"hp\"));\n+                eq.setMp((short) rs.getInt(\"mp\"));\n+                eq.setWatk((short) rs.getInt(\"watk\"));\n+                eq.setMatk((short) rs.getInt(\"matk\"));\n+                eq.setWdef((short) rs.getInt(\"wdef\"));\n+                eq.setMdef((short) rs.getInt(\"mdef\"));\n+                eq.setAcc((short) rs.getInt(\"acc\"));\n+                eq.setAvoid((short) rs.getInt(\"avoid\"));\n+                eq.setHands((short) rs.getInt(\"hands\"));\n+                eq.setSpeed((short) rs.getInt(\"speed\"));\n+                eq.setJump((short) rs.getInt(\"jump\"));\n+                eq.setOwner(rs.getString(\"owner\"));\n+                dueypack = new DueyPackages(rs.getInt(\"PackageId\"), eq);\n+            } else if (rs.getInt(\"type\") == 2) {\n+                Item newItem = new Item(rs.getInt(\"itemid\"), (short) 0, (short) rs.getInt(\"quantity\"));\n+                newItem.setOwner(rs.getString(\"owner\"));\n+                dueypack = new DueyPackages(rs.getInt(\"PackageId\"), newItem);\n+            } else {\n+                dueypack = new DueyPackages(rs.getInt(\"PackageId\"));\n+            }\n+            return dueypack;\n+        } catch (SQLException se) {\n+            se.printStackTrace();\n+            return null;\n+        }\n+    }\n+    \n+    private static void showDueyNotification(MapleClient c, MapleCharacter player) {\n+        Connection con = null;\n+        PreparedStatement ps = null;\n+        PreparedStatement pss = null;\n+        ResultSet rs = null;\n+        try {\n+            con = DatabaseConnection.getConnection();\n+            ps = con.prepareStatement(\"SELECT Mesos FROM dueypackages WHERE RecieverId = ? and Checked = 1\");\n+            ps.setInt(1, player.getId());\n+            rs = ps.executeQuery();\n+            if (rs.next()) {\n+                try {\n+                    Connection con2 = DatabaseConnection.getConnection();\n+                    pss = con2.prepareStatement(\"UPDATE dueypackages SET Checked = 0 where RecieverId = ?\");\n+                    pss.setInt(1, player.getId());\n+                    pss.executeUpdate();\n+                    pss.close();\n+                    con2.close();\n+                } catch (SQLException e) {\n+                    e.printStackTrace();\n+                }\n+\n+                c.announce(MaplePacketCreator.sendDueyNotification(false));\n+            }\n+        } catch (SQLException e) {\n+            e.printStackTrace();\n+        } finally {\n+            try {\n+                if (rs != null) {\n+                    rs.close();\n+                }\n+                if (pss != null) {\n+                    pss.close();\n+                }\n+                if (ps != null) {\n+                    ps.close();\n+                }\n+                if (con != null) {\n+                    con.close();\n+                }\n+            } catch (SQLException ex) {\n+                ex.printStackTrace();\n+            }\n+        }\n+    }\n+    \n+    private static int getFee(int meso) {\n+        int fee = 0;\n+        if (meso >= 10000000) {\n+            fee = meso / 25;\n+        } else if (meso >= 5000000) {\n+            fee = meso * 3 / 100;\n+        } else if (meso >= 1000000) {\n+            fee = meso / 50;\n+        } else if (meso >= 100000) {\n+            fee = meso / 100;\n+        } else if (meso >= 50000) {\n+            fee = meso / 200;\n+        }\n+        return fee;\n+    }\n+    \n+    private static void addMesoToDB(int mesos, String sName, int recipientID) {\n+        addItemToDB(null, 1, mesos, sName, recipientID);\n+    }\n+\n+    private static void addItemToDB(Item item, int quantity, int mesos, String sName, int recipientID) {\n+        Connection con = null;\n+        try {\n+            con = DatabaseConnection.getConnection();\n+            try (PreparedStatement ps = con.prepareStatement(\"INSERT INTO dueypackages (RecieverId, SenderName, Mesos, TimeStamp, Checked, Type) VALUES (?, ?, ?, ?, ?, ?)\")) {\n+                ps.setInt(1, recipientID);\n+                ps.setString(2, sName);\n+                ps.setInt(3, mesos);\n+                ps.setString(4, getCurrentDate());\n+                ps.setInt(5, 1);\n+                if (item == null) {\n+                    ps.setInt(6, 3);\n+                    ps.executeUpdate();\n+                } else {\n+                    ps.setInt(6, item.getItemType());\n+                    \n+                    ps.executeUpdate();\n+                    try (ResultSet rs = ps.getGeneratedKeys()) {\n+                        rs.next();\n+                        PreparedStatement ps2;\n+                        if (item.getInventoryType().equals(MapleInventoryType.EQUIP)) {\n+                            ps2 = con.prepareStatement(\"INSERT INTO dueyitems (PackageId, itemid, quantity, upgradeslots, level, str, dex, `int`, luk, hp, mp, watk, matk, wdef, mdef, acc, avoid, hands, speed, jump, owner) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\");\n+                            Equip eq = (Equip) item;\n+                            ps2.setInt(2, eq.getItemId());\n+                            ps2.setInt(3, 1);\n+                            ps2.setInt(4, eq.getUpgradeSlots());\n+                            ps2.setInt(5, eq.getLevel());\n+                            ps2.setInt(6, eq.getStr());\n+                            ps2.setInt(7, eq.getDex());\n+                            ps2.setInt(8, eq.getInt());\n+                            ps2.setInt(9, eq.getLuk());\n+                            ps2.setInt(10, eq.getHp());\n+                            ps2.setInt(11, eq.getMp());\n+                            ps2.setInt(12, eq.getWatk());\n+                            ps2.setInt(13, eq.getMatk());\n+                            ps2.setInt(14, eq.getWdef());\n+                            ps2.setInt(15, eq.getMdef());\n+                            ps2.setInt(16, eq.getAcc());\n+                            ps2.setInt(17, eq.getAvoid());\n+                            ps2.setInt(18, eq.getHands());\n+                            ps2.setInt(19, eq.getSpeed());\n+                            ps2.setInt(20, eq.getJump());\n+                            ps2.setString(21, eq.getOwner());\n+                        } else {\n+                            ps2 = con.prepareStatement(\"INSERT INTO dueyitems (PackageId, itemid, quantity, owner) VALUES (?, ?, ?, ?)\");\n+                            ps2.setInt(2, item.getItemId());\n+                            ps2.setInt(3, quantity);\n+                            ps2.setString(4, item.getOwner());\n+                        }\n+                        ps2.setInt(1, rs.getInt(1));\n+                        ps2.executeUpdate();\n+                        ps2.close();\n+                    }\n+                }\n+            }\n+            \n+            con.close();\n+        } catch (SQLException e) {\n+            e.printStackTrace();\n+        }\n+    }\n+\n+    private static List<DueyPackages> loadItems(MapleCharacter chr) {\n+        List<DueyPackages> packages = new LinkedList<>();\n+        Connection con = null;\n+        try {\n+            con = DatabaseConnection.getConnection();\n+            try (PreparedStatement ps = con.prepareStatement(\"SELECT * FROM dueypackages dp LEFT JOIN dueyitems di ON dp.PackageId=di.PackageId WHERE RecieverId = ?\")) {\n+                ps.setInt(1, chr.getId());\n+                try (ResultSet rs = ps.executeQuery()) {\n+                    while (rs.next()) {\n+                        DueyPackages dueypack = getItemByPID(rs);\n+                        dueypack.setSender(rs.getString(\"SenderName\"));\n+                        dueypack.setMesos(rs.getInt(\"Mesos\"));\n+                        dueypack.setSentTime(rs.getString(\"TimeStamp\"));\n+                        packages.add(dueypack);\n+                    }\n+                }\n+            }\n+            \n+            con.close();\n+            return packages;\n+        } catch (SQLException e) {\n+            e.printStackTrace();\n+            return null;\n+        }\n+    }\n+    \n+    public static void dueySendItem(MapleClient c, byte inventId, short itemPos, short amount, int mesos, String recipient) {\n+        c.lockClient();\n+        try {\n+            final int fee = 5000;\n+            if (mesos < 0 || ((long) mesos + fee + getFee(mesos)) > Integer.MAX_VALUE || (amount < 1 && mesos == 0)) {\n+                AutobanFactory.PACKET_EDIT.alert(c.getPlayer(), c.getPlayer().getName() + \" tried to packet edit with duey.\");\n+                FilePrinter.printError(FilePrinter.EXPLOITS + c.getPlayer().getName() + \".txt\", c.getPlayer().getName() + \" tried to use duey with mesos \" + mesos + \" and amount \" + amount + \"\\r\\n\");           \t\n+                c.disconnect(true, false);\n+                return;\n+            }\n+            int finalcost = mesos + fee + getFee(mesos);\n+            boolean send = false;\n+            if (c.getPlayer().getMeso() >= finalcost) {\n+                int accid = getAccIdFromCNAME(recipient, true);\n+                if (accid != -1) {\n+                    if (accid != c.getAccID()) {\n+                        send = true;\n+                    } else {\n+                        c.announce(MaplePacketCreator.sendDueyMSG(DueyProcessor.Actions.TOCLIENT_SEND_SAMEACC_ERROR.getCode()));\n+                    }\n+                } else {\n+                    c.announce(MaplePacketCreator.sendDueyMSG(DueyProcessor.Actions.TOCLIENT_SEND_NAME_DOES_NOT_EXIST.getCode()));\n+                }\n+            } else {\n+                c.announce(MaplePacketCreator.sendDueyMSG(DueyProcessor.Actions.TOCLIENT_SEND_NOT_ENOUGH_MESOS.getCode()));\n+            }\n+\n+            MapleClient rClient = null;\n+            \n+            int channel = c.getWorldServer().find(recipient);\n+            if (channel > -1) {\n+                Channel rcserv = c.getWorldServer().getChannel(channel);\n+                rClient = rcserv.getPlayerStorage().getCharacterByName(recipient).getClient();\n+            }\n+            \n+            if (send) {\n+                if (inventId > 0) {\n+                    MapleInventoryType inv = MapleInventoryType.getByType(inventId);\n+                    Item item = c.getPlayer().getInventory(inv).getItem(itemPos);\n+                    if (item != null && c.getPlayer().getItemQuantity(item.getItemId(), false) >= amount) {\n+                        c.getPlayer().gainMeso(-finalcost, false);\n+                        c.announce(MaplePacketCreator.sendDueyMSG(DueyProcessor.Actions.TOCLIENT_SEND_SUCCESSFULLY_SENT.getCode()));\n+\n+                        if (ItemConstants.isRechargeable(item.getItemId())) {\n+                            MapleInventoryManipulator.removeFromSlot(c, inv, itemPos, item.getQuantity(), true);\n+                        } else {\n+                            MapleInventoryManipulator.removeFromSlot(c, inv, itemPos, amount, true, false);\n+                        }\n+\n+                        addItemToDB(item, amount, mesos, c.getPlayer().getName(), getAccIdFromCNAME(recipient, false));\n+                    } else {\n+                        if (item != null) {\n+                            c.announce(MaplePacketCreator.sendDueyMSG(DueyProcessor.Actions.TOCLIENT_SEND_INCORRECT_REQUEST.getCode()));\n+                        }\n+                        return;\n+                    }\n+                } else {\n+                    c.getPlayer().gainMeso(-finalcost, false);\n+                    c.announce(MaplePacketCreator.sendDueyMSG(DueyProcessor.Actions.TOCLIENT_SEND_SUCCESSFULLY_SENT.getCode()));    \n+\n+                    addMesoToDB(mesos, c.getPlayer().getName(), getAccIdFromCNAME(recipient, false));\n+                }\n+\n+                if (rClient != null && rClient.isLoggedIn() && !rClient.getPlayer().isAwayFromWorld()) {\n+                    showDueyNotification(rClient, rClient.getPlayer());\n+                }\n+            }\n+        } finally {\n+            c.unlockClient();\n+        }\n+    }\n+    \n+    public static void dueyRemovePackage(MapleClient c, int packageid) {\n+        c.lockClient();\n+        try {\n+            removeItemFromDB(packageid);\n+            c.announce(MaplePacketCreator.removeItemFromDuey(true, packageid));\n+        } finally {\n+            c.unlockClient();\n+        }\n+    }\n+    \n+    public static void dueyClaimPackage(MapleClient c, int packageid) {\n+        c.lockClient();\n+        try {\n+            List<DueyPackages> packages = new LinkedList<>();\n+            DueyPackages dp = null;\n+            Connection con = null;\n+            try {\n+                con = DatabaseConnection.getConnection();\n+                DueyPackages dueypack;\n+                try (PreparedStatement ps = con.prepareStatement(\"SELECT * FROM dueypackages LEFT JOIN dueyitems USING (PackageId) WHERE PackageId = ?\")) {\n+                    ps.setInt(1, packageid);\n+                    try (ResultSet rs = ps.executeQuery()) {\n+                        dueypack = null;\n+                        if (rs.next()) {\n+                            dueypack = getItemByPID(rs);\n+                            dueypack.setSender(rs.getString(\"SenderName\"));\n+                            dueypack.setMesos(rs.getInt(\"Mesos\"));\n+                            dueypack.setSentTime(rs.getString(\"TimeStamp\"));\n+\n+                            packages.add(dueypack);\n+                        }\n+                    }\n+                }\n+                dp = dueypack;\n+                if(dp == null) {\n+                    c.announce(MaplePacketCreator.sendDueyMSG(Actions.TOCLIENT_RECV_UNKNOWN_ERROR.getCode()));\n+                    FilePrinter.printError(FilePrinter.EXPLOITS + c.getPlayer().getName() + \".txt\", c.getPlayer().getName() + \" tried to receive package from duey with id \" + packageid + \"\\r\\n\");\n+                    return;\n+                }\n+\n+                if (dp.getItem() != null) {\n+                    if (!MapleInventoryManipulator.checkSpace(c, dp.getItem().getItemId(), dp.getItem().getQuantity(), dp.getItem().getOwner())) {\n+                        int itemid = dp.getItem().getItemId();\n+                        if(MapleItemInformationProvider.getInstance().isPickupRestricted(itemid) && c.getPlayer().getInventory(ItemConstants.getInventoryType(itemid)).findById(itemid) != null) {\n+                            c.announce(MaplePacketCreator.sendDueyMSG(Actions.TOCLIENT_RECV_RECEIVER_WITH_UNIQUE.getCode()));\n+                        } else {\n+                            c.announce(MaplePacketCreator.sendDueyMSG(Actions.TOCLIENT_RECV_NO_FREE_SLOTS.getCode()));\n+                        }\n+\n+                        return;\n+                    } else {\n+                        MapleInventoryManipulator.addFromDrop(c, dp.getItem(), false);\n+                    }\n+                }\n+\n+                long gainmesos = 0;\n+                long totalmesos = (long) dp.getMesos() + (long) c.getPlayer().getMeso();\n+\n+                if (totalmesos < 0 || dp.getMesos() < 0) gainmesos = 0;\n+                else {\n+                    totalmesos = Math.min(totalmesos, Integer.MAX_VALUE);\n+                    gainmesos = totalmesos - c.getPlayer().getMeso();\n+                }\n+                c.getPlayer().gainMeso((int)gainmesos, false);\n+\n+                removeItemFromDB(packageid);\n+                c.announce(MaplePacketCreator.removeItemFromDuey(false, packageid));\n+\n+                con.close();\n+            } catch (SQLException e) {\n+                e.printStackTrace();\n+            }\n+        } finally {\n+            c.unlockClient();\n+        }\n+    }\n+    \n+    public static void dueySendTalk(MapleClient c) {\n+        c.lockClient();\n+        try {\n+            c.announce(MaplePacketCreator.sendDuey((byte) 8, loadItems(c.getPlayer())));\n+        } finally {\n+            c.unlockClient();\n+        }\n+    }\n+}"}, {"sha": "a30de71483c92f65b3741f14b3d9a4414c2b180a", "filename": "src/client/processor/FredrickProcessor.java", "status": "added", "additions": 111, "deletions": 0, "changes": 111, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/client/processor/FredrickProcessor.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/client/processor/FredrickProcessor.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/client/processor/FredrickProcessor.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -0,0 +1,111 @@\n+/*\n+\tThis file is part of the OdinMS Maple Story Server\n+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n+\t\t       Matthias Butz <matze@odinms.de>\n+\t\t       Jan Christian Meyer <vimes@odinms.de>\n+\n+    Copyleft (L) 2016 - 2018 RonanLana (HeavenMS)\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n+\n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n+package client.processor;\n+\n+import client.MapleCharacter;\n+import client.MapleClient;\n+import client.inventory.Item;\n+import client.inventory.ItemFactory;\n+import client.inventory.MapleInventory;\n+import client.inventory.MapleInventoryType;\n+import java.sql.Connection;\n+import java.sql.PreparedStatement;\n+import java.sql.SQLException;\n+import java.util.List;\n+import server.MapleInventoryManipulator;\n+import server.MapleItemInformationProvider;\n+import server.maps.MapleHiredMerchant;\n+import tools.DatabaseConnection;\n+import tools.FilePrinter;\n+import tools.MaplePacketCreator;\n+import tools.Pair;\n+\n+/**\n+ *\n+ * @author RonanLana (synchronization of Fredrick modules)\n+ */\n+public class FredrickProcessor {\n+    private static boolean canRetrieveFromFredrick(MapleCharacter chr, List<Pair<Item, MapleInventoryType>> items) {\n+        if (chr.getMeso() + chr.getMerchantMeso() < 0) {\n+            return false;\n+        }\n+        return MapleInventory.checkSpotsAndOwnership(chr, items);\n+    }\n+\n+    private static boolean deleteFredrickItems(int cid) {\n+        try {\n+            Connection con = DatabaseConnection.getConnection();\n+            try (PreparedStatement ps = con.prepareStatement(\"DELETE FROM `inventoryitems` WHERE `type` = ? AND `characterid` = ?\")) {\n+                ps.setInt(1, ItemFactory.MERCHANT.getValue());\n+                ps.setInt(2, cid);\n+                ps.execute();\n+            }\n+            con.close();\n+            return true;\n+        } catch (SQLException e) {\n+            e.printStackTrace();\n+            return false;\n+        }\n+    }\n+    \n+    public static void fredrickRetrieveItems(MapleClient c) {     // thanks Gustav for pointing out the dupe on Fredrick handling\n+        c.lockClient();\n+        try {\n+            MapleCharacter chr = c.getPlayer();\n+            \n+            List<Pair<Item, MapleInventoryType>> items;\n+            try {\n+                items = ItemFactory.MERCHANT.loadItems(chr.getId(), false);\n+                if (!canRetrieveFromFredrick(chr, items)) {\n+                    chr.announce(MaplePacketCreator.fredrickMessage((byte) 0x21));\n+                    return;\n+                }\n+\n+                chr.withdrawMerchantMesos();\n+\n+                if (deleteFredrickItems(chr.getId())) {\n+                    MapleHiredMerchant merchant = chr.getHiredMerchant();\n+\n+                    if(merchant != null)\n+                        merchant.clearItems();\n+\n+                    for (Pair<Item, MapleInventoryType> it : items) {\n+                        Item item = it.getLeft();\n+                        MapleInventoryManipulator.addFromDrop(chr.getClient(), item, false);\n+                        String itemName = MapleItemInformationProvider.getInstance().getName(item.getItemId());\n+                        FilePrinter.print(FilePrinter.FREDRICK + chr.getName() + \".txt\", chr.getName() + \" gained \" + item.getQuantity() + \" \" + itemName + \" (\" + item.getItemId() + \")\\r\\n\");\n+                    }\n+\n+                    chr.announce(MaplePacketCreator.fredrickMessage((byte) 0x1E));\n+                } else {\n+                    chr.message(\"An unknown error has occured.\");\n+                }\n+            } catch (SQLException ex) {\n+                ex.printStackTrace();\n+            }\n+        } finally {\n+            c.unlockClient();\n+        }\n+    }\n+}"}, {"sha": "0ba36007444a1ea7e1925878bea189557588ff38", "filename": "src/constants/EquipType.java", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/constants/EquipType.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/constants/EquipType.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/constants/EquipType.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "ccd2ddd81487753bc5bb1021dbea6f5c1893cbc2", "filename": "src/constants/GameConstants.java", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/constants/GameConstants.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/constants/GameConstants.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/constants/GameConstants.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -35,7 +35,7 @@ public static int getPlayerBonusExpRate(int slot) {\n     private static final int[] DEFAULT_TYPE = {4, 6, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 5, 5, 4, 4, 5, 6, 6, 6, 6, 6, 6, 5, 4, 5, 4, 4, 4, 4, 4};\n     private static final int[] DEFAULT_ACTION = {0, 106, 10, 1, 12, 13, 18, 24, 8, 5, 4, 19, 14, 15, 2, 17, 11, 3, 20, 16, 9, 50, 51, 6, 7, 53, 100, 101, 102, 103, 104, 105, 54, 22, 52, 21, 25, 26, 23, 27};\n     \n-    // MapleSolaxiaV2 custom keyset\n+    // HeavenMS custom keyset\n     private static final int[] CUSTOM_KEY = {2, 3, 4, 5, 31, 56, 59, 32, 42, 6, 17, 29, 30, 41, 50, 60, 61, 62, 63, 64, 65, 16, 7, 9, 13, 8};\n     private static final int[] CUSTOM_TYPE = {4, 4, 4, 4, 5, 5, 6, 5, 5, 4, 4, 4, 5, 4, 4, 6, 6, 6, 6, 6, 6, 4, 4, 4, 4, 4};\n     private static final int[] CUSTOM_ACTION = {1, 0, 3, 2, 53, 54, 100, 52, 51, 19, 5, 9, 50, 7, 22, 101, 102, 103, 104, 105, 106, 8, 17, 26, 20, 4};"}, {"sha": "17f74f3c477a5186cbbb8789578d0b65fa39c8cd", "filename": "src/constants/ItemConstants.java", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/constants/ItemConstants.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/constants/ItemConstants.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/constants/ItemConstants.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -73,7 +73,7 @@ public static boolean isConsumable(int itemId) {\n         return isPotion(itemId) || isFood(itemId);\n     }\n \n-    public static boolean isRechargable(int itemId) {\n+    public static boolean isRechargeable(int itemId) {\n         return isThrowingStar(itemId) || isBullet(itemId);\n     }\n \n@@ -110,7 +110,7 @@ public static boolean isAccessory(int itemId) {\n     }\n     \n     public static boolean isTownScroll(int itemId) {\n-        return itemId >= 2030000 && itemId < 2030021;\n+        return itemId >= 2030000 && itemId < 2030100;\n     }\n     \n     public static boolean isAntibanishScroll(int itemId) {\n@@ -184,4 +184,8 @@ public static boolean isWeapon(int itemId) {\n     public static boolean isEquipment(int itemId) {\n         return itemId < 2000000 && itemId != 0;\n     }\n+    \n+    public static boolean isMedal(int itemId) {\n+        return itemId >= 1140000 && itemId < 1143000;\n+    }\n }"}, {"sha": "088fda3b24be2453d1d7369d84c4ff5739b3dc4d", "filename": "src/constants/ServerConstants.java", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/constants/ServerConstants.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/constants/ServerConstants.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/constants/ServerConstants.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -15,7 +15,6 @@\n     \n     //World And Version\n     public static short VERSION = 83;\n-    public static String TIMEZONE = \"-GMT3\";\n     public static String[] WORLD_NAMES = {\"Scania\", \"Bera\", \"Broa\", \"Windia\", \"Khaini\", \"Bellocan\", \"Mardia\", \"Kradia\", \"Yellonde\", \"Demethos\", \"Galicia\", \"El Nido\", \"Zenith\", \"Arcenia\", \"Kastia\", \"Judis\", \"Plana\", \"Kalluna\", \"Stius\", \"Croa\", \"Medere\"};\n \n     //Login Configuration\n@@ -72,6 +71,7 @@\n     public static final boolean USE_MAKER_FEE_HEURISTICS = true;    //Apply compiled values for stimulants and reagents into the Maker fee calculations (max error revolves around 50k mesos). Set false to use basic constant values instead (results are never higher than requested by the client-side).\n     public static final boolean USE_QUEST_RATE = false;             //Exp/Meso gained by quests uses fixed server exp/meso rate times quest rate as multiplier, instead of player rates.\n     public static final boolean USE_MULTIPLE_SAME_EQUIP_DROP = true;//Enables multiple drops by mobs of the same equipment, number of possible drops based on the quantities provided at the drop data.\n+    public static final boolean USE_BANISHABLE_TOWN_SCROLL = true;  //Enables town scrolls to act as if it's a \"player banish\", rendering the antibanish scroll effect available.\n     \n     //Announcement Configuration\n     public static final boolean USE_ANNOUNCE_SHOPITEMSOLD = false;  //Automatic message sent to owner when an item from the Player Shop or Hired Merchant is sold.\n@@ -99,13 +99,16 @@\n     public static final int MAX_EVENT_LEVELS = 8;                       //Event has different levels of rewarding system.\n     public static final long BLOCK_NPC_RACE_CONDT = (long)(0.5 * 1000); //Time the player client must wait before reopening a conversation with an NPC.\n     public static final long PET_LOOT_UPON_ATTACK = (long)(0.7 * 1000); //Time the pet must wait before trying to pick items up.\n+    public static boolean USE_UNITPRICE_WITH_COMMA = true;         //Set this accordingly with the layout of the unitPrices on Item.wz XML's, whether it's using commas or dots to represent fractions.\n+    public static String TIMEZONE = \"-GMT3\";\n     \n     //Dangling Items/Locks Configuration\n     public static final int ITEM_EXPIRE_TIME  = 3 * 60 * 1000;  //Time before items start disappearing. Recommended to be set up to 3 minutes.\n     public static final int ITEM_MONITOR_TIME = 5 * 60 * 1000;  //Interval between item monitoring tasks on maps, which checks for dangling (null) item objects on the map item history.\n     public static final int LOCK_MONITOR_TIME = 30 * 1000;      //Waiting time for a lock to be released. If it reach timed out, a critical server deadlock has made present.\n     public static final int ITEM_EXPIRE_CHECK = 10 * 1000;      //Interval between item expiring tasks on maps, which checks and makes disappear expired items.\n     public static final int ITEM_LIMIT_ON_MAP = 200;            //Max number of items allowed on a map.\n+    public static final int MAP_VISITED_SIZE = 5;               //Max length for last mapids visited by a player. This is used to recover and update drops on these maps accordingly with player actions.\n     \n     //Some Gameplay Enhancing Configurations\n     //Scroll Configuration"}, {"sha": "a8d4c17340fa748ce3ee0e441842b54ff2a7ddaf", "filename": "src/net/MapleServerHandler.java", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/MapleServerHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/MapleServerHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/MapleServerHandler.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -56,7 +56,7 @@\n import tools.locks.MonitoredLockType;\n \n public class MapleServerHandler extends IoHandlerAdapter {\n-    private final static Set<Short> ignoredDebugRecvPackets = new HashSet<>(Arrays.asList((short) 167, (short) 197, (short) 89, (short) 91, (short) 41));\n+    private final static Set<Short> ignoredDebugRecvPackets = new HashSet<>(Arrays.asList((short) 167, (short) 197, (short) 89, (short) 91, (short) 41, (short) 188, (short) 107));\n     \n     private PacketProcessor processor;\n     private int world = -1, channel = -1;"}, {"sha": "0e5b367c2691360bce44c457d42e830d538e725c", "filename": "src/net/PacketProcessor.java", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/PacketProcessor.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/PacketProcessor.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/PacketProcessor.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -165,7 +165,7 @@ public void reset(int channel) {\n             registerHandler(RecvOpcode.GIVE_FAME, new GiveFameHandler());\n             registerHandler(RecvOpcode.PARTY_OPERATION, new PartyOperationHandler());\n             registerHandler(RecvOpcode.DENY_PARTY_REQUEST, new DenyPartyRequestHandler());\n-            registerHandler(RecvOpcode.PARTYCHAT, new PartyChatHandler());\n+            registerHandler(RecvOpcode.MULTI_CHAT, new MultiChatHandler());\n             registerHandler(RecvOpcode.USE_DOOR, new DoorHandler());\n             registerHandler(RecvOpcode.ENTER_MTS, new EnterMTSHandler());\n             registerHandler(RecvOpcode.ENTER_CASHSHOP, new EnterCashShopHandler());"}, {"sha": "fe28e7213f63243d4860231ba8b706b67aa5cc0f", "filename": "src/net/RecvOpcode.java", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/RecvOpcode.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/RecvOpcode.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/RecvOpcode.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -120,7 +120,7 @@\n     USE_REMOTE(0x74),\n     WATER_OF_LIFE(0x75),\n     ADMIN_CHAT(0x76),\n-    PARTYCHAT(0x77),\n+    MULTI_CHAT(0x77),\n     WHISPER(0x78),\n     MESSENGER(0x7A),\n     PLAYER_INTERACTION(0x7B),"}, {"sha": "50e0d49f1ae2525aeadd29110e824565eec73bd3", "filename": "src/net/server/audit/ThreadTracker.java", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/audit/ThreadTracker.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/audit/ThreadTracker.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/audit/ThreadTracker.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "f2f552da611d6ed8af45f42b708fa6d510343865", "filename": "src/net/server/channel/handlers/AbstractDealDamageHandler.java", "status": "modified", "additions": 45, "deletions": 27, "changes": 72, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/AbstractDealDamageHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/AbstractDealDamageHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/AbstractDealDamageHandler.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -113,7 +113,7 @@\n \n         public int numAttacked, numDamage, numAttackedAndDamage, skill, skilllevel, stance, direction, rangedirection, charge, display;\n         public Map<Integer, List<Integer>> allDamage;\n-        public boolean isHH = false, isTempest = false, ranged, magic;\n+        public boolean ranged, magic;\n         public int speed = 4;\n         public Point position = new Point();\n         public MapleStatEffect getAttackEffect(MapleCharacter chr, Skill theSkill) {\n@@ -205,17 +205,29 @@ else if(attack.skill != Aran.BODY_PRESSURE) // prevent BP refreshing\n                             if (mapitem.getMeso() == 0) { //Maybe it is possible some how?\n                                 return;\n                             }\n-                            synchronized (mapitem) {\n+                            \n+                            mapitem.lockItem();\n+                            try {\n                                 if (mapitem.isPickedUp()) {\n                                     return;\n                                 }\n                                 TimerManager.getInstance().schedule(new Runnable() {\n                                     @Override\n                                     public void run() {\n-                                        map.pickItemDrop(MaplePacketCreator.removeItemFromMap(mapitem.getObjectId(), 4, 0), mapitem);\n+                                        mapitem.lockItem();\n+                                        try {\n+                                            if (mapitem.isPickedUp()) {\n+                                                return;\n+                                            }\n+                                            map.pickItemDrop(MaplePacketCreator.removeItemFromMap(mapitem.getObjectId(), 4, 0), mapitem);\n+                                        } finally {\n+                                            mapitem.unlockItem();\n+                                        }\n                                     }\n                                 }, delay);\n                                 delay += 100;\n+                            } finally {\n+                                mapitem.unlockItem();\n                             }\n                     } else if (mapobject != null && mapobject.getType() != MapleMapObjectType.MONSTER) {\n                         return;\n@@ -464,34 +476,45 @@ public void run() {\n                         if (attackEffect.makeChanceResult()) {\n                             monster.applyStatus(player, new MonsterStatusEffect(attackEffect.getMonsterStati(), theSkill, null, false), attackEffect.isPoison(), attackEffect.getDuration());\n                         }\n-                    }                 \n-                    if (attack.isHH && !monster.isBoss()) {\n-                        map.damageMonster(player, monster, monster.getHp() - 1);\n-                    } else if (attack.isHH) {\n-                        int HHDmg = (player.calculateMaxBaseDamage(player.getTotalWatk()) * (SkillFactory.getSkill(Paladin.HEAVENS_HAMMER).getEffect(player.getSkillLevel(SkillFactory.getSkill(Paladin.HEAVENS_HAMMER))).getDamage() / 100));\n-                        map.damageMonster(player, monster, (int) (Math.floor(Math.random() * (HHDmg / 5) + HHDmg * .8)));\n-                    } else if(attack.isTempest && !monster.isBoss()) {\n-                        map.damageMonster(player, monster, monster.getHp());\n-                    } else if(attack.isTempest) {\n-                        int TmpDmg = (player.calculateMaxBaseDamage(player.getTotalWatk()) * (SkillFactory.getSkill(Aran.COMBO_TEMPEST).getEffect(player.getSkillLevel(SkillFactory.getSkill(Aran.COMBO_TEMPEST))).getDamage() / 100));\n-                        map.damageMonster(player, monster, (int) (Math.floor(Math.random() * (TmpDmg / 5) + TmpDmg * .8)));\n+                    }\n+                    if (attack.skill == Paladin.HEAVENS_HAMMER) {\n+                        if(!monster.isBoss()) {\n+                            map.damageMonster(player, monster, monster.getHp() - 1);\n+                        } else {\n+                            int HHDmg = (player.calculateMaxBaseDamage(player.getTotalWatk()) * (SkillFactory.getSkill(Paladin.HEAVENS_HAMMER).getEffect(player.getSkillLevel(SkillFactory.getSkill(Paladin.HEAVENS_HAMMER))).getDamage() / 100));\n+                            map.damageMonster(player, monster, (int) (Math.floor(Math.random() * (HHDmg / 5) + HHDmg * .8)));\n+                        }\n+                    } else if (attack.skill == Aran.COMBO_TEMPEST) {\n+                        if(!monster.isBoss()) {\n+                            map.damageMonster(player, monster, monster.getHp());\n+                        } else {\n+                            int TmpDmg = (player.calculateMaxBaseDamage(player.getTotalWatk()) * (SkillFactory.getSkill(Aran.COMBO_TEMPEST).getEffect(player.getSkillLevel(SkillFactory.getSkill(Aran.COMBO_TEMPEST))).getDamage() / 100));\n+                            map.damageMonster(player, monster, (int) (Math.floor(Math.random() * (TmpDmg / 5) + TmpDmg * .8)));\n+                        }\n                     } else {\n+                        if(attack.skill == Aran.BODY_PRESSURE) {\n+                            map.broadcastMessage(MaplePacketCreator.damageMonster(monster.getObjectId(), totDamageToOneMonster));\n+                        }\n+                        \n                         map.damageMonster(player, monster, totDamageToOneMonster);\n-\t\t\t\t\t\t\n-                    }                                                                     \n+                    }\n                     if (monster.isBuffed(MonsterStatus.WEAPON_REFLECT)) {\n-                        for (int i = 0; i < monster.getSkills().size(); i++) {\n-                            if (monster.getSkills().get(i).left == 145) {\n-                                MobSkill toUse = MobSkillFactory.getMobSkill(monster.getSkills().get(i).left, monster.getSkills().get(i).right);\n+                        List<Pair<Integer, Integer>> mobSkills = monster.getSkills();\n+                        \n+                        for (Pair<Integer, Integer> ms : mobSkills) {\n+                            if (ms.left == 145) {\n+                                MobSkill toUse = MobSkillFactory.getMobSkill(ms.left, ms.right);\n                                 player.addHP(-toUse.getX());\n                                 map.broadcastMessage(player, MaplePacketCreator.damagePlayer(0, monster.getId(), player.getId(), toUse.getX(), 0, 0, false, 0, true, monster.getObjectId(), 0, 0), true);\n                             }\n                         }\n                     }                \n                     if (monster.isBuffed(MonsterStatus.MAGIC_REFLECT)) {\n-                        for (int i = 0; i < monster.getSkills().size(); i++) {\n-                            if (monster.getSkills().get(i).left == 145) {\n-                                MobSkill toUse = MobSkillFactory.getMobSkill(monster.getSkills().get(i).left, monster.getSkills().get(i).right);\n+                        List<Pair<Integer, Integer>> mobSkills = monster.getSkills();\n+                        \n+                        for (Pair<Integer, Integer> ms : mobSkills) {\n+                            if (ms.left == 145) {\n+                                MobSkill toUse = MobSkillFactory.getMobSkill(ms.left, ms.right);\n                                 player.addMP(-toUse.getY());\n                             }\n                         }\n@@ -525,11 +548,6 @@ protected AttackInfo parseDamage(LittleEndianAccessor lea, MapleCharacter chr, b\n         } else {\n             ret.charge = 0;\n         }\n-        if (ret.skill == Paladin.HEAVENS_HAMMER) {\n-            ret.isHH = true;\n-        } else if(ret.skill == Aran.COMBO_TEMPEST) {\n-            ret.isTempest = true;\n-        }\n         lea.skip(8);\n         ret.display = lea.readByte();\n         ret.direction = lea.readByte();"}, {"sha": "72a61948c23baae10ec97e90c95a48cb16b9e141", "filename": "src/net/server/channel/handlers/DueyHandler.java", "status": "modified", "additions": 9, "deletions": 427, "changes": 436, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/DueyHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/DueyHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/DueyHandler.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -21,92 +21,16 @@\n */\n package net.server.channel.handlers;\n \n-import client.MapleCharacter;\n import client.MapleClient;\n-import client.autoban.AutobanFactory;\n-import client.inventory.Equip;\n-import client.inventory.Item;\n-import client.inventory.MapleInventoryType;\n-import constants.ItemConstants;\n+import client.processor.DueyProcessor;\n import constants.ServerConstants;\n \n-import java.sql.Connection;\n-import java.sql.PreparedStatement;\n-import java.sql.ResultSet;\n-import java.sql.SQLException;\n-import java.util.Calendar;\n-import java.util.LinkedList;\n-import java.util.List;\n-\n import net.AbstractMaplePacketHandler;\n-import net.server.channel.Channel;\n-import server.DueyPackages;\n-import server.MapleInventoryManipulator;\n-import server.MapleItemInformationProvider;\n-import tools.DatabaseConnection;\n-import tools.FilePrinter;\n import tools.MaplePacketCreator;\n import tools.data.input.SeekableLittleEndianAccessor;\n \n public final class DueyHandler extends AbstractMaplePacketHandler {\n-    private enum Actions {\n-        TOSERVER_SEND_ITEM(0x02),\n-        TOSERVER_CLAIM_PACKAGE(0x04),\n-        TOSERVER_REMOVE_PACKAGE(0x05),\n-        TOSERVER_CLOSE_DUEY(0x07),\n-        TOCLIENT_OPEN_DUEY(0x08),\n-        TOCLIENT_SEND_ENABLE_ACTIONS(0x09),\n-        TOCLIENT_SEND_NOT_ENOUGH_MESOS(0x0A),\n-        TOCLIENT_SEND_INCORRECT_REQUEST(0x0B),\n-        TOCLIENT_SEND_NAME_DOES_NOT_EXIST(0x0C),\n-        TOCLIENT_SEND_SAMEACC_ERROR(0x0D),\n-        TOCLIENT_SEND_RECEIVER_STORAGE_FULL(0x0E),\n-        TOCLIENT_SEND_RECEIVER_UNABLE_TO_RECV(0x0F),\n-        TOCLIENT_SEND_RECEIVER_STORAGE_WITH_UNIQUE(0x10),\n-        TOCLIENT_SEND_MESO_LIMIT(0x11),\n-        TOCLIENT_SEND_SUCCESSFULLY_SENT(0x12),\n-        TOCLIENT_RECV_UNKNOWN_ERROR(0x13),\n-        TOCLIENT_RECV_ENABLE_ACTIONS(0x14),\n-        TOCLIENT_RECV_NO_FREE_SLOTS(0x15),\n-        TOCLIENT_RECV_RECEIVER_WITH_UNIQUE(0x16),\n-        TOCLIENT_RECV_SUCCESSFUL_MSG(0x17),\n-        TOCLIENT_RECV_PACKAGE_MSG(0x1B);\n-        final byte code;\n-\n-        private Actions(int code) {\n-            this.code = (byte) code;\n-        }\n-\n-        public byte getCode() {\n-            return code;\n-        }\n-    }\n-\n-    private static int getAccIdFromCNAME(String name, boolean accountid) {\n-        try {\n-            PreparedStatement ps;\n-            String text = \"SELECT id,accountid FROM characters WHERE name = ?\";\n-            Connection con = DatabaseConnection.getConnection();\n-            ps = con.prepareStatement(text);\n-            ps.setString(1, name);\n-            int id_;\n-            try (ResultSet rs = ps.executeQuery()) {\n-                if (!rs.next()) {\n-                    rs.close();\n-                    ps.close();\n-                    return -1;\n-                }\n-                id_ = accountid ? rs.getInt(\"accountid\") : rs.getInt(\"id\");\n-            }\n-            ps.close();\n-            con.close();\n-            return id_;\n-        } catch (SQLException e) {\n-            e.printStackTrace();\n-        }\n-        return -1;\n-    }\n-\n+    \n     @Override\n     public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {\n     \tif (!ServerConstants.USE_DUEY){\n@@ -115,364 +39,22 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n     \t}\n             \n         byte operation = slea.readByte();\n-        if (operation == Actions.TOSERVER_SEND_ITEM.getCode()) {\n-            final int fee = 5000;\n+        if (operation == DueyProcessor.Actions.TOSERVER_SEND_ITEM.getCode()) {\n             byte inventId = slea.readByte();\n             short itemPos = slea.readShort();\n             short amount = slea.readShort();\n             int mesos = slea.readInt();\n             String recipient = slea.readMapleAsciiString();\n             \n-            if (mesos < 0 || ((long) mesos + fee + getFee(mesos)) > Integer.MAX_VALUE || (amount < 1 && mesos == 0)) {\n-            \tAutobanFactory.PACKET_EDIT.alert(c.getPlayer(), c.getPlayer().getName() + \" tried to packet edit with duey.\");\n-            \tFilePrinter.printError(FilePrinter.EXPLOITS + c.getPlayer().getName() + \".txt\", c.getPlayer().getName() + \" tried to use duey with mesos \" + mesos + \" and amount \" + amount + \"\\r\\n\");           \t\n-            \tc.disconnect(true, false);\n-            \treturn;\n-            }\n-            int finalcost = mesos + fee + getFee(mesos);\n-            boolean send = false;\n-            if (c.getPlayer().getMeso() >= finalcost) {\n-                int accid = getAccIdFromCNAME(recipient, true);\n-                if (accid != -1) {\n-                    if (accid != c.getAccID()) {\n-                        send = true;\n-                    } else {\n-                        c.announce(MaplePacketCreator.sendDueyMSG(Actions.TOCLIENT_SEND_SAMEACC_ERROR.getCode()));\n-                    }\n-                } else {\n-                    c.announce(MaplePacketCreator.sendDueyMSG(Actions.TOCLIENT_SEND_NAME_DOES_NOT_EXIST.getCode()));\n-                }\n-            } else {\n-                c.announce(MaplePacketCreator.sendDueyMSG(Actions.TOCLIENT_SEND_NOT_ENOUGH_MESOS.getCode()));\n-            }\n-            \n-            MapleClient rClient = null;\n-                int channel = c.getWorldServer().find(recipient);\n-                if (channel > -1) {\n-                    Channel rcserv = c.getWorldServer().getChannel(channel);\n-                    rClient = rcserv.getPlayerStorage().getCharacterByName(recipient).getClient();\n-                }\n-            if (send) {\n-                if (inventId > 0) {\n-                    MapleInventoryType inv = MapleInventoryType.getByType(inventId);\n-                    Item item = c.getPlayer().getInventory(inv).getItem(itemPos);\n-                    if (item != null && c.getPlayer().getItemQuantity(item.getItemId(), false) >= amount) {\n-                        c.getPlayer().gainMeso(-finalcost, false);\n-                        c.announce(MaplePacketCreator.sendDueyMSG(Actions.TOCLIENT_SEND_SUCCESSFULLY_SENT.getCode()));\n-                        \n-                        if (ItemConstants.isRechargable(item.getItemId())) {\n-                            MapleInventoryManipulator.removeFromSlot(c, inv, itemPos, item.getQuantity(), true);\n-                        } else {\n-                            MapleInventoryManipulator.removeFromSlot(c, inv, itemPos, amount, true, false);\n-                        }\n-                        \n-                        addItemToDB(item, amount, mesos, c.getPlayer().getName(), getAccIdFromCNAME(recipient, false));\n-                    } else {\n-                        if (item != null) {\n-                            c.announce(MaplePacketCreator.sendDueyMSG(Actions.TOCLIENT_SEND_INCORRECT_REQUEST.getCode()));\n-                        }\n-                        return;\n-                    }\n-                } else {\n-                    c.getPlayer().gainMeso(-finalcost, false);\n-                    c.announce(MaplePacketCreator.sendDueyMSG(Actions.TOCLIENT_SEND_SUCCESSFULLY_SENT.getCode()));    \n-                    \n-                    addMesoToDB(mesos, c.getPlayer().getName(), getAccIdFromCNAME(recipient, false));\n-                }\n-                \n-                if (rClient != null && rClient.isLoggedIn() && !rClient.getPlayer().isAwayFromWorld()) {\n-                    showDueyNotification(rClient, rClient.getPlayer());\n-                }\n-            }\n-        } else if (operation == Actions.TOSERVER_REMOVE_PACKAGE.getCode()) {\n-            int packageid = slea.readInt();\n-            removeItemFromDB(packageid);\n-            c.announce(MaplePacketCreator.removeItemFromDuey(true, packageid));\n-        } else if (operation == Actions.TOSERVER_CLAIM_PACKAGE.getCode()) {\n+            DueyProcessor.dueySendItem(c, inventId, itemPos, amount, mesos, recipient);\n+        } else if (operation == DueyProcessor.Actions.TOSERVER_REMOVE_PACKAGE.getCode()) {\n             int packageid = slea.readInt();\n-            List<DueyPackages> packages = new LinkedList<>();\n-            DueyPackages dp = null;\n-            Connection con = null;\n-            try {\n-                con = DatabaseConnection.getConnection();\n-                DueyPackages dueypack;\n-                try (PreparedStatement ps = con.prepareStatement(\"SELECT * FROM dueypackages LEFT JOIN dueyitems USING (PackageId) WHERE PackageId = ?\")) {\n-                    ps.setInt(1, packageid);\n-                    try (ResultSet rs = ps.executeQuery()) {\n-                        dueypack = null;\n-                        if (rs.next()) {\n-                            dueypack = getItemByPID(rs);\n-                            dueypack.setSender(rs.getString(\"SenderName\"));\n-                            dueypack.setMesos(rs.getInt(\"Mesos\"));\n-                            dueypack.setSentTime(rs.getString(\"TimeStamp\"));\n-                            \n-                            packages.add(dueypack);\n-                        }\n-                    }\n-                }\n-                dp = dueypack;\n-                if(dp == null) {\n-                    c.announce(MaplePacketCreator.sendDueyMSG(Actions.TOCLIENT_RECV_UNKNOWN_ERROR.getCode()));\n-                    FilePrinter.printError(FilePrinter.EXPLOITS + c.getPlayer().getName() + \".txt\", c.getPlayer().getName() + \" tried to receive package from duey with id \" + packageid + \"\\r\\n\");\n-                    return;\n-                }\n-                \n-                if (dp.getItem() != null) {\n-                    if (!MapleInventoryManipulator.checkSpace(c, dp.getItem().getItemId(), dp.getItem().getQuantity(), dp.getItem().getOwner())) {\n-                        int itemid = dp.getItem().getItemId();\n-                        if(MapleItemInformationProvider.getInstance().isPickupRestricted(itemid) && c.getPlayer().getInventory(ItemConstants.getInventoryType(itemid)).findById(itemid) != null) {\n-                            c.announce(MaplePacketCreator.sendDueyMSG(Actions.TOCLIENT_RECV_RECEIVER_WITH_UNIQUE.getCode()));\n-                        } else {\n-                            c.announce(MaplePacketCreator.sendDueyMSG(Actions.TOCLIENT_RECV_NO_FREE_SLOTS.getCode()));\n-                        }\n-                                                \n-                        return;\n-                    } else {\n-                        MapleInventoryManipulator.addFromDrop(c, dp.getItem(), false);\n-                    }\n-                }\n-                \n-                long gainmesos = 0;\n-                long totalmesos = (long) dp.getMesos() + (long) c.getPlayer().getMeso();\n-\n-                if (totalmesos < 0 || dp.getMesos() < 0) gainmesos = 0;\n-                else {\n-                    totalmesos = Math.min(totalmesos, Integer.MAX_VALUE);\n-                    gainmesos = totalmesos - c.getPlayer().getMeso();\n-                }\n-                c.getPlayer().gainMeso((int)gainmesos, false);\n-                            \n-                removeItemFromDB(packageid);\n-                c.announce(MaplePacketCreator.removeItemFromDuey(false, packageid));\n-                \n-                con.close();\n-            } catch (SQLException e) {\n-                e.printStackTrace();\n-            }\n-        }\n-    }\n-\n-    private static void addMesoToDB(int mesos, String sName, int recipientID) {\n-        addItemToDB(null, 1, mesos, sName, recipientID);\n-    }\n-\n-    public static void addItemToDB(Item item, int quantity, int mesos, String sName, int recipientID) {\n-        Connection con = null;\n-        try {\n-            con = DatabaseConnection.getConnection();\n-            try (PreparedStatement ps = con.prepareStatement(\"INSERT INTO dueypackages (RecieverId, SenderName, Mesos, TimeStamp, Checked, Type) VALUES (?, ?, ?, ?, ?, ?)\")) {\n-                ps.setInt(1, recipientID);\n-                ps.setString(2, sName);\n-                ps.setInt(3, mesos);\n-                ps.setString(4, getCurrentDate());\n-                ps.setInt(5, 1);\n-                if (item == null) {\n-                    ps.setInt(6, 3);\n-                    ps.executeUpdate();\n-                } else {\n-                    ps.setInt(6, item.getItemType());\n-                    \n-                    ps.executeUpdate();\n-                    try (ResultSet rs = ps.getGeneratedKeys()) {\n-                        rs.next();\n-                        PreparedStatement ps2;\n-                        if (item.getInventoryType().equals(MapleInventoryType.EQUIP)) {\n-                            ps2 = con.prepareStatement(\"INSERT INTO dueyitems (PackageId, itemid, quantity, upgradeslots, level, str, dex, `int`, luk, hp, mp, watk, matk, wdef, mdef, acc, avoid, hands, speed, jump, owner) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\");\n-                            Equip eq = (Equip) item;\n-                            ps2.setInt(2, eq.getItemId());\n-                            ps2.setInt(3, 1);\n-                            ps2.setInt(4, eq.getUpgradeSlots());\n-                            ps2.setInt(5, eq.getLevel());\n-                            ps2.setInt(6, eq.getStr());\n-                            ps2.setInt(7, eq.getDex());\n-                            ps2.setInt(8, eq.getInt());\n-                            ps2.setInt(9, eq.getLuk());\n-                            ps2.setInt(10, eq.getHp());\n-                            ps2.setInt(11, eq.getMp());\n-                            ps2.setInt(12, eq.getWatk());\n-                            ps2.setInt(13, eq.getMatk());\n-                            ps2.setInt(14, eq.getWdef());\n-                            ps2.setInt(15, eq.getMdef());\n-                            ps2.setInt(16, eq.getAcc());\n-                            ps2.setInt(17, eq.getAvoid());\n-                            ps2.setInt(18, eq.getHands());\n-                            ps2.setInt(19, eq.getSpeed());\n-                            ps2.setInt(20, eq.getJump());\n-                            ps2.setString(21, eq.getOwner());\n-                        } else {\n-                            ps2 = con.prepareStatement(\"INSERT INTO dueyitems (PackageId, itemid, quantity, owner) VALUES (?, ?, ?, ?)\");\n-                            ps2.setInt(2, item.getItemId());\n-                            ps2.setInt(3, quantity);\n-                            ps2.setString(4, item.getOwner());\n-                        }\n-                        ps2.setInt(1, rs.getInt(1));\n-                        ps2.executeUpdate();\n-                        ps2.close();\n-                    }\n-                }\n-            }\n             \n-            con.close();\n-        } catch (SQLException e) {\n-            e.printStackTrace();\n-        }\n-    }\n-\n-    public static List<DueyPackages> loadItems(MapleCharacter chr) {\n-        List<DueyPackages> packages = new LinkedList<>();\n-        Connection con = null;\n-        try {\n-            con = DatabaseConnection.getConnection();\n-            try (PreparedStatement ps = con.prepareStatement(\"SELECT * FROM dueypackages dp LEFT JOIN dueyitems di ON dp.PackageId=di.PackageId WHERE RecieverId = ?\")) {\n-                ps.setInt(1, chr.getId());\n-                try (ResultSet rs = ps.executeQuery()) {\n-                    while (rs.next()) {\n-                        DueyPackages dueypack = getItemByPID(rs);\n-                        dueypack.setSender(rs.getString(\"SenderName\"));\n-                        dueypack.setMesos(rs.getInt(\"Mesos\"));\n-                        dueypack.setSentTime(rs.getString(\"TimeStamp\"));\n-                        packages.add(dueypack);\n-                    }\n-                }\n-            }\n-            \n-            con.close();\n-            return packages;\n-        } catch (SQLException e) {\n-            e.printStackTrace();\n-            return null;\n-        }\n-    }\n-\n-    private static String getCurrentDate() {\n-        String date = \"\";\n-        Calendar cal = Calendar.getInstance();\n-        int day = cal.get(Calendar.DATE) - 1; // instant duey ?\n-        int month = cal.get(Calendar.MONTH) + 1; // its an array of months.\n-        int year = cal.get(Calendar.YEAR);\n-        date += day < 9 ? \"0\" + day + \"-\" : \"\" + day + \"-\";\n-        date += month < 9 ? \"0\" + month + \"-\" : \"\" + month + \"-\";\n-        date += year;\n-        \n-        return date;\n-    }\n-\n-    private static int getFee(int meso) {\n-        int fee = 0;\n-        if (meso >= 10000000) {\n-            fee = meso / 25;\n-        } else if (meso >= 5000000) {\n-            fee = meso * 3 / 100;\n-        } else if (meso >= 1000000) {\n-            fee = meso / 50;\n-        } else if (meso >= 100000) {\n-            fee = meso / 100;\n-        } else if (meso >= 50000) {\n-            fee = meso / 200;\n-        }\n-        return fee;\n-    }\n-\n-    private static void removeItemFromDB(int packageid) {\n-        Connection con = null;\n-        try {\n-            con = DatabaseConnection.getConnection();\n+            DueyProcessor.dueyRemovePackage(c, packageid);\n+        } else if (operation == DueyProcessor.Actions.TOSERVER_CLAIM_PACKAGE.getCode()) {\n+            int packageid = slea.readInt();\n             \n-            PreparedStatement ps = con.prepareStatement(\"DELETE FROM dueypackages WHERE PackageId = ?\");\n-            ps.setInt(1, packageid);\n-            ps.executeUpdate();\n-            ps.close();\n-            ps = con.prepareStatement(\"DELETE FROM dueyitems WHERE PackageId = ?\");\n-            ps.setInt(1, packageid);\n-            ps.executeUpdate();\n-            ps.close();\n-            con.close();\n-        } catch (SQLException e) {\n-            e.printStackTrace();\n-        }\n-    }\n-\n-    private static DueyPackages getItemByPID(ResultSet rs) {\n-        try {\n-            DueyPackages dueypack;\n-            if (rs.getInt(\"type\") == 1) {\n-                Equip eq = new Equip(rs.getInt(\"itemid\"), (byte) 0, -1);\n-                eq.setUpgradeSlots((byte) rs.getInt(\"upgradeslots\"));\n-                eq.setLevel((byte) rs.getInt(\"level\"));\n-                eq.setStr((short) rs.getInt(\"str\"));\n-                eq.setDex((short) rs.getInt(\"dex\"));\n-                eq.setInt((short) rs.getInt(\"int\"));\n-                eq.setLuk((short) rs.getInt(\"luk\"));\n-                eq.setHp((short) rs.getInt(\"hp\"));\n-                eq.setMp((short) rs.getInt(\"mp\"));\n-                eq.setWatk((short) rs.getInt(\"watk\"));\n-                eq.setMatk((short) rs.getInt(\"matk\"));\n-                eq.setWdef((short) rs.getInt(\"wdef\"));\n-                eq.setMdef((short) rs.getInt(\"mdef\"));\n-                eq.setAcc((short) rs.getInt(\"acc\"));\n-                eq.setAvoid((short) rs.getInt(\"avoid\"));\n-                eq.setHands((short) rs.getInt(\"hands\"));\n-                eq.setSpeed((short) rs.getInt(\"speed\"));\n-                eq.setJump((short) rs.getInt(\"jump\"));\n-                eq.setOwner(rs.getString(\"owner\"));\n-                dueypack = new DueyPackages(rs.getInt(\"PackageId\"), eq);\n-            } else if (rs.getInt(\"type\") == 2) {\n-                Item newItem = new Item(rs.getInt(\"itemid\"), (short) 0, (short) rs.getInt(\"quantity\"));\n-                newItem.setOwner(rs.getString(\"owner\"));\n-                dueypack = new DueyPackages(rs.getInt(\"PackageId\"), newItem);\n-            } else {\n-                dueypack = new DueyPackages(rs.getInt(\"PackageId\"));\n-            }\n-            return dueypack;\n-        } catch (SQLException se) {\n-            se.printStackTrace();\n-            return null;\n-        }\n-    }\n-    \n-    private static void showDueyNotification(MapleClient c, MapleCharacter player) {\n-        Connection con = null;\n-        PreparedStatement ps = null;\n-        PreparedStatement pss = null;\n-        ResultSet rs = null;\n-        try {\n-            con = DatabaseConnection.getConnection();\n-            ps = con.prepareStatement(\"SELECT Mesos FROM dueypackages WHERE RecieverId = ? and Checked = 1\");\n-            ps.setInt(1, player.getId());\n-            rs = ps.executeQuery();\n-            if (rs.next()) {\n-                try {\n-                    Connection con2 = DatabaseConnection.getConnection();\n-                    pss = con2.prepareStatement(\"UPDATE dueypackages SET Checked = 0 where RecieverId = ?\");\n-                    pss.setInt(1, player.getId());\n-                    pss.executeUpdate();\n-                    pss.close();\n-                    con2.close();\n-                } catch (SQLException e) {\n-                    e.printStackTrace();\n-                }\n-\n-                c.announce(MaplePacketCreator.sendDueyNotification(false));\n-            }\n-        } catch (SQLException e) {\n-            e.printStackTrace();\n-        } finally {\n-            try {\n-                if (rs != null) {\n-                    rs.close();\n-                }\n-                if (pss != null) {\n-                    pss.close();\n-                }\n-                if (ps != null) {\n-                    ps.close();\n-                }\n-                if (con != null) {\n-                    con.close();\n-                }\n-            } catch (SQLException ex) {\n-                ex.printStackTrace();\n-            }\n+            DueyProcessor.dueyClaimPackage(c, packageid);\n         }\n     }\n }"}, {"sha": "ef516098a027667f520117c637981d5468993bcd", "filename": "src/net/server/channel/handlers/FredrickHandler.java", "status": "modified", "additions": 2, "deletions": 67, "changes": 69, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/FredrickHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/FredrickHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/FredrickHandler.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -23,23 +23,9 @@\n \n import client.MapleCharacter;\n import client.MapleClient;\n-import client.inventory.Item;\n-import client.inventory.ItemFactory;\n-import client.inventory.MapleInventory;\n-import client.inventory.MapleInventoryType;\n-\n-import java.sql.Connection;\n-import java.sql.PreparedStatement;\n-import java.sql.SQLException;\n-import java.util.List;\n+import client.processor.FredrickProcessor;\n \n import net.AbstractMaplePacketHandler;\n-import server.MapleInventoryManipulator;\n-import server.MapleItemInformationProvider;\n-import tools.DatabaseConnection;\n-import tools.FilePrinter;\n-import tools.MaplePacketCreator;\n-import tools.Pair;\n import tools.data.input.SeekableLittleEndianAccessor;\n \n /**\n@@ -58,62 +44,11 @@ public void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {\n                 //c.announce(MaplePacketCreator.getFredrick((byte) 0x24));\n                 break;\n             case 0x1A:\n-                List<Pair<Item, MapleInventoryType>> items;\n-                try {\n-                    items = ItemFactory.MERCHANT.loadItems(chr.getId(), false);\n-                    if (!check(chr, items)) {\n-                        c.announce(MaplePacketCreator.fredrickMessage((byte) 0x21));\n-                        return;\n-                    }\n-                    chr.gainMeso(chr.getMerchantMeso(), false);\n-                    chr.setMerchantMeso(0);\n-                    if (deleteItems(chr)) {\n-                        if(chr.getHiredMerchant() != null)\n-                            chr.getHiredMerchant().clearItems();\n-                        \n-                        for (int i = 0; i < items.size(); i++) {\n-                            Item item = items.get(i).getLeft();\n-                            MapleInventoryManipulator.addFromDrop(c, item, false);\n-                            String itemName = MapleItemInformationProvider.getInstance().getName(item.getItemId());\n-                            FilePrinter.print(FilePrinter.FREDRICK + chr.getName() + \".txt\", chr.getName() + \" gained \" + item.getQuantity() + \" \" + itemName + \" (\" + item.getItemId() + \")\\r\\n\");\n-                        }\n-                        c.announce(MaplePacketCreator.fredrickMessage((byte) 0x1E));\n-                        \n-                    } else {\n-                        chr.message(\"An unknown error has occured.\");\n-                    }\n-                    break;\n-                } catch (SQLException ex) {\n-                    ex.printStackTrace();\n-                }\n+                FredrickProcessor.fredrickRetrieveItems(c);\n                 break;\n             case 0x1C: //Exit\n                 break;\n             default:\n         }\n     }\n-\n-    private static boolean check(MapleCharacter chr, List<Pair<Item, MapleInventoryType>> items) {\n-        if (chr.getMeso() + chr.getMerchantMeso() < 0) {\n-            return false;\n-        }\n-        return MapleInventory.checkSpotsAndOwnership(chr, items);\n-    }\n-\n-    private static boolean deleteItems(MapleCharacter chr) {\n-        try {\n-            Connection con = DatabaseConnection.getConnection();\n-            try (PreparedStatement ps = con.prepareStatement(\"DELETE FROM `inventoryitems` WHERE `type` = ? AND `characterid` = ?\")) {\n-                ps.setInt(1, ItemFactory.MERCHANT.getValue());\n-                ps.setInt(2, chr.getId());\n-                ps.execute();\n-            }\n-            con.close();\n-            return true;\n-        } catch (SQLException e) {\n-            e.printStackTrace();\n-            return false;\n-        }\n-\n-    }\n }"}, {"sha": "04b426c26851677c7e0983ce87ffa7cc67c3303a", "filename": "src/net/server/channel/handlers/HealOvertimeHandler.java", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/HealOvertimeHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/HealOvertimeHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/HealOvertimeHandler.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -30,7 +30,7 @@\n import tools.MaplePacketCreator;\n \n public final class HealOvertimeHandler extends AbstractMaplePacketHandler {\n-\n+    @Override\n     public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {\n         MapleCharacter chr = c.getPlayer();\n         AutobanManager abm = chr.getAutobanManager();"}, {"sha": "ca305b3af758ed68b57b87963df090065594bbb7", "filename": "src/net/server/channel/handlers/InnerPortalHandler.java", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/InnerPortalHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/InnerPortalHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/InnerPortalHandler.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -30,6 +30,7 @@\n  * @author BubblesDev\n  */\n public final class InnerPortalHandler extends AbstractMaplePacketHandler {\n+    @Override\n     public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {\n     }\n }\n\\ No newline at end of file"}, {"sha": "2990e26d5c207f0cb2d41e30f295c1dfe4fc0f96", "filename": "src/net/server/channel/handlers/ItemPickupHandler.java", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/ItemPickupHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/ItemPickupHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/ItemPickupHandler.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -26,6 +26,8 @@\n import tools.data.input.SeekableLittleEndianAccessor;\n import client.MapleCharacter;\n import client.MapleClient;\n+import java.awt.Point;\n+import tools.FilePrinter;\n \n /**\n  *\n@@ -43,6 +45,13 @@ public final void handlePacket(final SeekableLittleEndianAccessor slea, final Ma\n         MapleCharacter chr = c.getPlayer();\n         MapleMapObject ob = chr.getMap().getMapObject(oid);\n         \n+        Point charPos = chr.getPosition();\n+        Point obPos = ob.getPosition();\n+        if (Math.abs(charPos.getX() - obPos.getX()) > 800 || Math.abs(charPos.getY() - obPos.getY()) > 600) {\n+            FilePrinter.printError(FilePrinter.EXPLOITS + c.getPlayer().getName() + \".txt\", c.getPlayer().getName() + \" tried to pick up an item too far away. Mapid: \" + chr.getMapId() + \" Player pos: \" + charPos + \" Object pos: \" + obPos + \"\\r\\n\");\n+            return;\n+        }\n+        \n         chr.pickupItem(ob);\n     }\n }"}, {"sha": "7072ebc2a5a4522f48d11ca5c1715607bb55c517", "filename": "src/net/server/channel/handlers/MobDamageMobFriendlyHandler.java", "status": "modified", "additions": 4, "deletions": 8, "changes": 12, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/MobDamageMobFriendlyHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/MobDamageMobFriendlyHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/MobDamageMobFriendlyHandler.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -52,17 +52,13 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                 if (monster.getHp() - damage < 1) {     // friendly dies\n                         if(monster.getId() == 9300102) {\n                                 monster.getMap().broadcastMessage(MaplePacketCreator.serverNotice(6, \"The Watch Hog has been injured by the aliens. Better luck next time...\"));\n-                        }\n-                        else if (monster.getId() == 9300061) {  //moon bunny\n+                        } else if (monster.getId() == 9300061) {  //moon bunny\n                                 monster.getMap().broadcastMessage(MaplePacketCreator.serverNotice(6, \"The Moon Bunny went home because he was sick.\"));\n-                        }\n-                        else if(monster.getId() == 9300093) {   //tylus\n+                        } else if(monster.getId() == 9300093) {   //tylus\n                                 monster.getMap().broadcastMessage(MaplePacketCreator.serverNotice(6, \"Tylus has fallen by the overwhelming forces of the ambush.\"));\n-                        }\n-                        else if(monster.getId() == 9300137) {   //juliet\n+                        } else if(monster.getId() == 9300137) {   //juliet\n                                 monster.getMap().broadcastMessage(MaplePacketCreator.serverNotice(6, \"Juliet has fainted on the middle of the combat.\"));\n-                        }\n-                        else if(monster.getId() == 9300138) {   //romeo\n+                        } else if(monster.getId() == 9300138) {   //romeo\n                                 monster.getMap().broadcastMessage(MaplePacketCreator.serverNotice(6, \"Romeo has fainted on the middle of the combat.\"));\n                         }\n                         "}, {"sha": "2e6b55f7628593342bd52d5f33df92c773de122f", "filename": "src/net/server/channel/handlers/MobDamageMobHandler.java", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/MobDamageMobHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/MobDamageMobHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/MobDamageMobHandler.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -24,13 +24,15 @@\n import client.MapleClient;\n import net.AbstractMaplePacketHandler;\n import server.maps.MapleMap;\n+import tools.MaplePacketCreator;\n import tools.data.input.SeekableLittleEndianAccessor;\n \n /**\n  *\n  * @author Jay Estrella\n  */\n public final class MobDamageMobHandler extends AbstractMaplePacketHandler {\n+    @Override\n     public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {\n         int from = slea.readInt();\n         slea.readInt();\n@@ -40,6 +42,7 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n         MapleMap map = c.getPlayer().getMap();\n         if (map.getMonsterByOid(from) != null && map.getMonsterByOid(to) != null) {\n             map.damageMonster(c.getPlayer(), map.getMonsterByOid(to), dmg);\n+            map.broadcastMessage(MaplePacketCreator.damageMonster(to, dmg));\n         }\n     }\n }"}, {"sha": "587cb90a12261d7dbf7c4763f7a3916015530dec", "filename": "src/net/server/channel/handlers/MultiChatHandler.java", "status": "renamed", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/MultiChatHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/MultiChatHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/MultiChatHandler.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -31,12 +31,14 @@\n import tools.MaplePacketCreator;\n import tools.data.input.SeekableLittleEndianAccessor;\n \n-public final class PartyChatHandler extends AbstractMaplePacketHandler {\n+public final class MultiChatHandler extends AbstractMaplePacketHandler {\n+    @Override\n     public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {\n         MapleCharacter player = c.getPlayer();\n-\t\tif(player.getAutobanManager().getLastSpam(7) + 200 > System.currentTimeMillis()) {\n-\t\t\treturn;\n-\t\t}\n+        if(player.getAutobanManager().getLastSpam(7) + 200 > System.currentTimeMillis()) {\n+                return;\n+        }\n+        \n         int type = slea.readByte(); // 0 for buddys, 1 for partys\n         int numRecipients = slea.readByte();\n         int recipients[] = new int[numRecipients];\n@@ -63,6 +65,6 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                 Server.getInstance().allianceMessage(allianceId, MaplePacketCreator.multiChat(player.getName(), chattext, 3), player.getId(), -1);\n             }\n         }\n-\t\tplayer.getAutobanManager().spam(7);\n+        player.getAutobanManager().spam(7);\n     }\n }", "previous_filename": "src/net/server/channel/handlers/PartyChatHandler.java"}, {"sha": "3364f18e4c5eacab70786df702bce018623d2b36", "filename": "src/net/server/channel/handlers/NPCTalkHandler.java", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/NPCTalkHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/NPCTalkHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/NPCTalkHandler.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -22,6 +22,7 @@\n package net.server.channel.handlers;\n \n import client.MapleClient;\n+import client.processor.DueyProcessor;\n import constants.ServerConstants;\n import net.AbstractMaplePacketHandler;\n import scripting.npc.NPCScriptManager;\n@@ -53,7 +54,7 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n             \n             if (npc.getId() == 9010009) {   //is duey\n                 c.getPlayer().setNpcCooldown(System.currentTimeMillis());\n-                c.announce(MaplePacketCreator.sendDuey((byte) 8, DueyHandler.loadItems(c.getPlayer())));\n+                DueyProcessor.dueySendTalk(c);\n             } else {\n                 if (c.getCM() != null || c.getQM() != null) {\n                     c.announce(MaplePacketCreator.enableActions());"}, {"sha": "ac25447d596af2bfc36ea5dde39a999184288078", "filename": "src/net/server/channel/handlers/NewYearCardHandler.java", "status": "modified", "additions": 17, "deletions": 17, "changes": 34, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/NewYearCardHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/NewYearCardHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/NewYearCardHandler.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,22 +1,22 @@\n /*\n- * This file is part of the HeavenMS (MapleSolaxiaV2) Maple Story Server\n- *\n- * Copyright (C) 2017 RonanLana\n- *\n- * This program is free software: you can redistribute it and/or modify\n- * it under the terms of the GNU General Public License as published by\n- * the Free Software Foundation, either version 3 of the License, or\n- * (at your option) any later version.\n- *\n- * This program is distributed in the hope that it will be useful,\n- * but WITHOUT ANY WARRANTY; without even the implied warranty of\n- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n- * GNU General Public License for more details.\n- *\n- * You should have received a copy of the GNU General Public License\n- * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n- */\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n+\n+    This program is free software: you can redistribute it and/or modify\n+    it under the terms of the GNU Affero General Public License as\n+    published by the Free Software Foundation version 3 as published by\n+    the Free Software Foundation. You may not use, modify or distribute\n+    this program under any other version of the GNU Affero General Public\n+    License.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU Affero General Public License for more details.\n \n+    You should have received a copy of the GNU Affero General Public License\n+    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+*/\n package net.server.channel.handlers;\n \n import constants.ItemConstants;"}, {"sha": "318cc9530b8caf729f25c5dd3ca08db56cfc366c", "filename": "src/net/server/channel/handlers/OwlWarpHandler.java", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/OwlWarpHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/OwlWarpHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/OwlWarpHandler.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "1100099cb217033a2990dcfc191fc25ad5f57a80", "filename": "src/net/server/channel/handlers/PartyOperationHandler.java", "status": "modified", "additions": 33, "deletions": 18, "changes": 51, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/PartyOperationHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/PartyOperationHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/PartyOperationHandler.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -31,6 +31,7 @@\n import client.MapleCharacter;\n import client.MapleClient;\n import constants.ServerConstants;\n+import java.util.List;\n import scripting.event.EventInstanceManager;\n import server.maps.MapleMap;\n \n@@ -81,34 +82,41 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                     player.setMPC(partyplayer);\n                     player.getMap().addPartyMember(player);\n                     player.silentPartyUpdate();\n-                    c.announce(MaplePacketCreator.partyCreated(partyplayer));\n+                    c.announce(MaplePacketCreator.partyCreated(partyplayer, party.getId()));\n+                    \n+                    player.updateMapDropsUponPartyOperation(null);\n                 } else {\n                     c.announce(MaplePacketCreator.serverNotice(5, \"You can't create a party as you are already in one.\"));\n                 }\n                 break;\n             }\n             case 2: { // leave/disband\n+                List<MapleCharacter> partymembers = player.getPartyMembers();\n+                \n                 leaveParty(party, partyplayer, c);\n+                player.updateMapDropsUponPartyOperation(partymembers);\n                 break;\n             }\n             case 3: { // join\n                 int partyid = slea.readInt();\n-                if (c.getPlayer().getParty() == null) {\n-                        party = world.getParty(partyid);\n-                        if (party != null) {\n-                            if (party.getMembers().size() < 6) {\n-                                partyplayer = new MaplePartyCharacter(player);\n-                                player.getMap().addPartyMember(player);\n-                                \n-                                world.updateParty(party.getId(), PartyOperation.JOIN, partyplayer);\n-                                player.receivePartyMemberHP();\n-                                player.updatePartyMemberHP();\n-                            } else {\n-                                c.announce(MaplePacketCreator.partyStatusMessage(17));\n-                            }\n+                if (player.getParty() == null) {\n+                    party = world.getParty(partyid);\n+                    if (party != null) {\n+                        if (party.getMembers().size() < 6) {\n+                            partyplayer = new MaplePartyCharacter(player);\n+                            player.getMap().addPartyMember(player);\n+\n+                            world.updateParty(party.getId(), PartyOperation.JOIN, partyplayer);\n+                            player.receivePartyMemberHP();\n+                            player.updatePartyMemberHP();\n+                            \n+                            player.updateMapDropsUponPartyOperation(null);\n                         } else {\n-                            c.announce(MaplePacketCreator.serverNotice(5, \"The person you have invited to the party is already in one.\"));\n+                            c.announce(MaplePacketCreator.partyStatusMessage(17));\n                         }\n+                    } else {\n+                        c.announce(MaplePacketCreator.serverNotice(5, \"The person you have invited to the party is already in one.\"));\n+                    }\n                 } else {\n                     c.announce(MaplePacketCreator.serverNotice(5, \"You can't join the party as you are already in one.\"));\n                 }\n@@ -139,7 +147,9 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                             player.setParty(party);\n                             player.setMPC(partyplayer);\n                             player.getMap().addPartyMember(player);\n-                            c.announce(MaplePacketCreator.partyCreated(partyplayer));\n+                            c.announce(MaplePacketCreator.partyCreated(partyplayer, party.getId()));\n+                            \n+                            player.updateMapDropsUponPartyOperation(null);\n                         }\n                         if (party.getMembers().size() < 6) {\n                             invited.getClient().announce(MaplePacketCreator.partyInvite(player));\n@@ -161,6 +171,8 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                     if (expelled != null) {\n                         MapleCharacter emc = expelled.getPlayer();\n                         if(emc != null) {\n+                            List<MapleCharacter> partyMembers = emc.getPartyMembers();\n+                            \n                             MapleMap map = emc.getMap();\n                             if(map != null) map.removePartyMember(emc);\n                             \n@@ -170,9 +182,12 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                             }\n                             \n                             emc.setParty(null);\n+                            world.updateParty(party.getId(), PartyOperation.EXPEL, expelled);\n+                            \n+                            emc.updateMapDropsUponPartyOperation(partyMembers);\n+                        } else {\n+                            world.updateParty(party.getId(), PartyOperation.EXPEL, expelled);\n                         }\n-                        \n-                        world.updateParty(party.getId(), PartyOperation.EXPEL, expelled);\n                     }\n                 }\n                 break;"}, {"sha": "84db16aea7323ba1f7de8085acbdf74dfb1fe5c7", "filename": "src/net/server/channel/handlers/PetAutoPotHandler.java", "status": "modified", "additions": 10, "deletions": 9, "changes": 19, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/PetAutoPotHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/PetAutoPotHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/PetAutoPotHandler.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -3,7 +3,8 @@\n     Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>\n \t\t       Matthias Butz <matze@odinms.de>\n \t\t       Jan Christian Meyer <vimes@odinms.de>\n-    Copyleft (L) 2017 RonanLana (HeavenMS)\n+\n+    Copyleft (L) 2016 - 2018 RonanLana (HeavenMS)\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as\n@@ -96,10 +97,10 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n             maxMp = maxHpMp.right;\n             \n             incHp = stat.getHp();\n-            if(incHp <= 0 && hasHpGain) incHp = (short)((maxHp * stat.getHpRate()) / 100.0);\n+            if(incHp <= 0 && hasHpGain) incHp = (short)(maxHp * stat.getHpRate());\n             \n             incMp = stat.getMp();\n-            if(incMp <= 0 && hasMpGain) incMp = (short)((maxMp * stat.getMpRate()) / 100.0);\n+            if(incMp <= 0 && hasMpGain) incMp = (short)(maxMp * stat.getMpRate());\n             \n             curHp = chr.getHp();\n             curMp = chr.getMp();\n@@ -114,12 +115,12 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                     curMp += incMp;\n \n                     //System.out.println();\n-                    //System.out.println(\"hp: \" + hasHpGain + \" player hp \" + curHp + \" maxhp \" + maxHp);\n-                    //System.out.println(\"mp: \" + hasMpGain + \" player mp \" + curMp + \" maxmp \" + maxMp);\n-                    //System.out.println(\"redo? \" + (shouldReusePot(chr) && toUse.getQuantity() > 0));\n-                } while(shouldReusePot(chr) && toUse.getQuantity() > 0);\n+                    //System.out.println(\"hp: \" + hasHpGain + \" hpgain \" + incHp + \" player hp \" + curHp + \" maxhp \" + maxHp);\n+                    //System.out.println(\"mp: \" + hasMpGain + \" mpgain \" + incMp + \" player mp \" + curMp + \" maxmp \" + maxMp);\n+                    //System.out.println(\"redo? \" + (shouldReusePot() && toUse.getQuantity() > 0));\n+                } while(shouldReusePot() && toUse.getQuantity() > 0);\n \n-                if(toUse.getQuantity() == 0 && shouldReusePot(chr)) {\n+                if(toUse.getQuantity() == 0 && shouldReusePot()) {\n                     // depleted out the current slot, fetch for more\n \n                     if(!cursorOnNextAvailablePot(chr)) {\n@@ -170,7 +171,7 @@ private boolean cursorOnNextAvailablePot(MapleCharacter chr) {\n         return new Pair<>(hp, mp);\n     }\n     \n-    private boolean shouldReusePot(MapleCharacter chr) {\n+    private boolean shouldReusePot() {\n         return (hasHpGain && curHp < ServerConstants.PET_AUTOHP_RATIO * maxHp) || (hasMpGain && curMp < ServerConstants.PET_AUTOMP_RATIO * maxMp);\n     } \n }"}, {"sha": "10ee894becbca5439b4802864896bc38d819a0a7", "filename": "src/net/server/channel/handlers/PlayerInteractionHandler.java", "status": "modified", "additions": 130, "deletions": 101, "changes": 231, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/PlayerInteractionHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/PlayerInteractionHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/PlayerInteractionHandler.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -25,7 +25,6 @@\n import client.MapleClient;\n import client.autoban.AutobanFactory;\n import client.inventory.Item;\n-import client.inventory.MapleInventory;\n import client.inventory.MapleInventoryType;\n import constants.ItemConstants;\n import constants.ServerConstants;\n@@ -71,6 +70,7 @@\n         ADD_ITEM(0x16),\n         BUY(0x17),\n         UPDATE_MERCHANT(0x19),\n+        UPDATE_PLAYERSHOP(0x1A),\n         REMOVE_ITEM(0x1B),\n         BAN_PLAYER(0x1C),\n         MERCHANT_THING(0x1D),\n@@ -113,7 +113,7 @@ public byte getCode() {\n     @Override\n     public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {\n         byte mode = slea.readByte();\n-        MapleCharacter chr = c.getPlayer();\n+        final MapleCharacter chr = c.getPlayer();\n         \n         if (mode == Action.CREATE.getCode()) {\n             byte createType = slea.readByte();\n@@ -175,7 +175,7 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n \n                 if (GameConstants.isFreeMarketRoom(chr.getMapId()) || itemId > 5030000 && itemId < 5030012 || itemId > 5140000 && itemId < 5140006) {\n                     if (createType == 4) {\n-                        MaplePlayerShop shop = new MaplePlayerShop(c.getPlayer(), desc);\n+                        MaplePlayerShop shop = new MaplePlayerShop(chr, desc);\n                         chr.setPlayerShop(shop);\n                         chr.getMap().addMapObject(shop);\n                         shop.sendShop(c);\n@@ -207,6 +207,8 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n             \t\treturn;\n             \t}\n             } else {\n+                if (isTradeOpen(chr)) return;\n+                \n                 int oid = slea.readInt();\n                 MapleMapObject ob = chr.getMap().getMapObject(oid);\n                 if (ob instanceof MaplePlayerShop) {\n@@ -217,9 +219,9 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                     String pw = slea.available() > 1 ? slea.readMapleAsciiString() : \"\";\n                     \n                     MapleMiniGame game = (MapleMiniGame) ob;\n-                    if(game.checkPassword(pw) || game.checkPassword(c.getPlayer().getName())) {\n-                        if (game.hasFreeSlot() && !game.isVisitor(c.getPlayer())) {\n-                            game.addVisitor(c.getPlayer());\n+                    if(game.checkPassword(pw) || game.checkPassword(chr.getName())) {\n+                        if (game.hasFreeSlot() && !game.isVisitor(chr)) {\n+                            game.addVisitor(chr);\n                             chr.setMiniGame(game);\n                             switch (game.getGameType()) {\n                                 case \"omok\":\n@@ -237,19 +239,19 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                     }\n                 } else if (ob instanceof MapleHiredMerchant && chr.getHiredMerchant() == null) {\n                     MapleHiredMerchant merchant = (MapleHiredMerchant) ob;\n-                    if (merchant.isOwner(c.getPlayer())) {\n+                    if (merchant.isOwner(chr)) {\n                         merchant.setOpen(false);\n                         merchant.removeAllVisitors();\n                         \n                         c.announce(MaplePacketCreator.getHiredMerchant(chr, merchant, false));\n                     } else if (!merchant.isOpen()) {\n                         chr.getClient().announce(MaplePacketCreator.getMiniRoomError(18));\n                         return;\n-                    } else if (!merchant.addVisitor(c.getPlayer())) {\n+                    } else if (!merchant.addVisitor(chr)) {\n                         chr.getClient().announce(MaplePacketCreator.getMiniRoomError(2));\n                         return;\n                     } else {\n-                        c.announce(MaplePacketCreator.getHiredMerchant(c.getPlayer(), merchant, false));\n+                        c.announce(MaplePacketCreator.getHiredMerchant(chr, merchant, false));\n                     }\n                     chr.setHiredMerchant(merchant);\n                 }\n@@ -269,20 +271,22 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                     game.chat(c, slea.readMapleAsciiString());\n                 }\n             } else if (merchant != null) {\n-                merchant.sendMessage(c.getPlayer(), slea.readMapleAsciiString());\n+                merchant.sendMessage(chr, slea.readMapleAsciiString());\n             }\n         } else if (mode == Action.EXIT.getCode()) {\n             if (chr.getTrade() != null) {\n-                MapleTrade.cancelTrade(c.getPlayer());\n+                MapleTrade.cancelTrade(chr);\n             } else {\n                 chr.closePlayerShop();\n                 chr.closeMiniGame();\n                 chr.closeHiredMerchant(true);\n             }\n         } else if (mode == Action.OPEN.getCode()) {\n+            if (isTradeOpen(chr)) return;\n+            \n             MaplePlayerShop shop = chr.getPlayerShop();\n             MapleHiredMerchant merchant = chr.getHiredMerchant();\n-            if (shop != null && shop.isOwner(c.getPlayer())) {\n+            if (shop != null && shop.isOwner(chr)) {\n                 slea.readByte();//01\n                 \n                 if(ServerConstants.USE_ERASE_PERMIT_ON_OPENSHOP) {\n@@ -291,9 +295,9 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                     } catch(RuntimeException re) {} // fella does not have a player shop permit...\n                 }\n                 \n-                chr.getMap().broadcastMessage(MaplePacketCreator.addCharBox(c.getPlayer(), 4));\n+                chr.getMap().broadcastMessage(MaplePacketCreator.addCharBox(chr, 4));\n                 shop.setOpen(true);\n-            } else if (merchant != null && merchant.isOwner(c.getPlayer())) {\n+            } else if (merchant != null && merchant.isOwner(chr)) {\n                 chr.setHasMerchant(true);\n                 merchant.setOpen(true);\n                 chr.getMap().addMapObject(merchant);\n@@ -321,22 +325,22 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n         } else if (mode == Action.GIVE_UP.getCode()) {\n             MapleMiniGame game = chr.getMiniGame();\n             if (game.getGameType().equals(\"omok\")) {\n-                if (game.isOwner(c.getPlayer())) {\n+                if (game.isOwner(chr)) {\n                     game.broadcast(MaplePacketCreator.getMiniGameOwnerForfeit(game));\n                 } else {\n                     game.broadcast(MaplePacketCreator.getMiniGameVisitorForfeit(game));\n                 }\n             }\n             if (game.getGameType().equals(\"matchcard\")) {\n-                if (game.isOwner(c.getPlayer())) {\n+                if (game.isOwner(chr)) {\n                     game.broadcast(MaplePacketCreator.getMatchCardVisitorWin(game));\n                 } else {\n                     game.broadcast(MaplePacketCreator.getMatchCardOwnerWin(game));\n                 }\n             }\n         } else if (mode == Action.REQUEST_TIE.getCode()) {\n             MapleMiniGame game = chr.getMiniGame();\n-            if (game.isOwner(c.getPlayer())) {\n+            if (game.isOwner(chr)) {\n                 game.broadcastToVisitor(MaplePacketCreator.getMiniGameRequestTie(game));\n             } else {\n                 game.getOwner().getClient().announce(MaplePacketCreator.getMiniGameRequestTie(game));\n@@ -352,7 +356,7 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n             }\n         } else if (mode == Action.SKIP.getCode()) {\n             MapleMiniGame game = chr.getMiniGame();\n-            if (game.isOwner(c.getPlayer())) {\n+            if (game.isOwner(chr)) {\n                 game.broadcast(MaplePacketCreator.getMiniGameSkipOwner(game));\n             } else {\n                 game.broadcast(MaplePacketCreator.getMiniGameSkipVisitor(game));\n@@ -361,28 +365,28 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n             int x = slea.readInt(); // x point\n             int y = slea.readInt(); // y point\n             int type = slea.readByte(); // piece ( 1 or 2; Owner has one piece, visitor has another, it switches every game.)\n-            chr.getMiniGame().setPiece(x, y, type, c.getPlayer());\n+            chr.getMiniGame().setPiece(x, y, type, chr);\n         } else if (mode == Action.SELECT_CARD.getCode()) {\n             int turn = slea.readByte(); // 1st turn = 1; 2nd turn = 0\n             int slot = slea.readByte(); // slot\n             MapleMiniGame game = chr.getMiniGame();\n             int firstslot = game.getFirstSlot();\n             if (turn == 1) {\n                 game.setFirstSlot(slot);\n-                if (game.isOwner(c.getPlayer())) {\n+                if (game.isOwner(chr)) {\n                     game.broadcastToVisitor(MaplePacketCreator.getMatchCardSelect(game, turn, slot, firstslot, turn));\n                 } else {\n                     game.getOwner().getClient().announce(MaplePacketCreator.getMatchCardSelect(game, turn, slot, firstslot, turn));\n                 }\n             } else if ((game.getCardId(firstslot + 1)) == (game.getCardId(slot + 1))) {\n-                if (game.isOwner(c.getPlayer())) {\n+                if (game.isOwner(chr)) {\n                     game.broadcast(MaplePacketCreator.getMatchCardSelect(game, turn, slot, firstslot, 2));\n                     game.setOwnerPoints();\n                 } else {\n                     game.broadcast(MaplePacketCreator.getMatchCardSelect(game, turn, slot, firstslot, 3));\n                     game.setVisitorPoints();\n                 }\n-            } else if (game.isOwner(c.getPlayer())) {\n+            } else if (game.isOwner(chr)) {\n                 game.broadcast(MaplePacketCreator.getMatchCardSelect(game, turn, slot, firstslot, 0));\n             } else {\n                 game.broadcast(MaplePacketCreator.getMatchCardSelect(game, turn, slot, firstslot, 1));\n@@ -401,7 +405,7 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                 return;            \t\n             }\n             if (chr.getTrade() != null) {\n-                if ((quantity <= item.getQuantity() && quantity >= 0) || ItemConstants.isRechargable(item.getItemId())) {\n+                if ((quantity <= item.getQuantity() && quantity >= 0) || ItemConstants.isRechargeable(item.getItemId())) {\n                     if (ii.isDropRestricted(item.getItemId())) { // ensure that undroppable items do not make it to the trade window\n                         if (!((item.getFlag() & ItemConstants.KARMA) == ItemConstants.KARMA)) {\n                             c.announce(MaplePacketCreator.serverNotice(1, \"That item is untradeable.\"));\n@@ -410,7 +414,7 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                         }\n                     }\n                     Item tradeItem = item.copy();\n-                    if (ItemConstants.isRechargable(item.getItemId())) {\n+                    if (ItemConstants.isRechargeable(item.getItemId())) {\n                         tradeItem.setQuantity(item.getQuantity());\n                         MapleInventoryManipulator.removeFromSlot(c, ivType, item.getPosition(), item.getQuantity(), true);\n                     } else {\n@@ -422,98 +426,105 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n                 }\n             }\n         } else if (mode == Action.CONFIRM.getCode()) {\n-            MapleTrade.completeTrade(c.getPlayer());\n+            MapleTrade.completeTrade(chr);\n         } else if (mode == Action.ADD_ITEM.getCode() || mode == Action.PUT_ITEM.getCode()) {\n+            if (isTradeOpen(chr)) return;\n+            \n             MapleInventoryType ivType = MapleInventoryType.getByType(slea.readByte());\n             short slot = slea.readShort();\n             short bundles = slea.readShort();\n-            if (chr.getInventory(ivType).getItem(slot) == null || chr.getItemQuantity(chr.getInventory(ivType).getItem(slot).getItemId(), false) < bundles || chr.getInventory(ivType).getItem(slot).getFlag() == ItemConstants.UNTRADEABLE) {\n+            Item ivItem = chr.getInventory(ivType).getItem(slot);\n+            \n+            if (ivItem == null || ivItem.getFlag() == ItemConstants.UNTRADEABLE) {\n                 c.announce(MaplePacketCreator.serverNotice(1, \"Could not perform shop operation with that item.\"));\n                 c.announce(MaplePacketCreator.enableActions());\n                 return;\n             }\n+            \n             short perBundle = slea.readShort();\n+            \n+            if (ItemConstants.isRechargeable(ivItem.getItemId())) {\n+                perBundle = 1;\n+                bundles = 1;\n+            } else if (chr.getItemQuantity(ivItem.getItemId(), false) < perBundle * bundles) {\n+                c.announce(MaplePacketCreator.serverNotice(1, \"Could not perform shop operation with that item.\"));\n+                c.announce(MaplePacketCreator.enableActions());\n+                return;\n+            }\n+            \n             int price = slea.readInt();\n             if (perBundle <= 0 || perBundle * bundles > 2000 || bundles <= 0 || price <= 0 || price > Integer.MAX_VALUE) {\n-            \tAutobanFactory.PACKET_EDIT.alert(c.getPlayer(), c.getPlayer().getName() + \" tried to packet edit with hired merchants.\");\n-            \tFilePrinter.printError(FilePrinter.EXPLOITS + c.getPlayer().getName() + \".txt\", c.getPlayer().getName() + \" might of possibly packet edited Hired Merchants\\nperBundle: \" + perBundle + \"\\nperBundle * bundles (This multiplied cannot be greater than 2000): \" + perBundle * bundles + \"\\nbundles: \" + bundles + \"\\nprice: \" + price);\n+            \tAutobanFactory.PACKET_EDIT.alert(chr, chr.getName() + \" tried to packet edit with hired merchants.\");\n+            \tFilePrinter.printError(FilePrinter.EXPLOITS + chr.getName() + \".txt\", chr.getName() + \" might of possibly packet edited Hired Merchants\\nperBundle: \" + perBundle + \"\\nperBundle * bundles (This multiplied cannot be greater than 2000): \" + perBundle * bundles + \"\\nbundles: \" + bundles + \"\\nprice: \" + price);\n                 return;\n             }\n-            Item ivItem = chr.getInventory(ivType).getItem(slot);\n             Item sellItem = ivItem.copy();\n-            if (chr.getItemQuantity(ivItem.getItemId(), false) < perBundle * bundles) {\n-                return;\n-            } else if (ServerConstants.USE_ENFORCE_UNMERCHABLE_PET && ItemConstants.isPet(ivItem.getItemId())) {\n+            if (ServerConstants.USE_ENFORCE_UNMERCHABLE_PET && ItemConstants.isPet(ivItem.getItemId())) {\n                 c.announce(MaplePacketCreator.serverNotice(1, \"Pets are not allowed to be sold on the Player Shop.\"));\n                 return;\n             }\n-            sellItem.setQuantity(perBundle);\n+            \n+            if(!ItemConstants.isRechargeable(ivItem.getItemId())) {\n+                sellItem.setQuantity(perBundle);\n+            }\n+            \n             MaplePlayerShopItem shopItem = new MaplePlayerShopItem(sellItem, bundles, price);\n             MaplePlayerShop shop = chr.getPlayerShop();\n             MapleHiredMerchant merchant = chr.getHiredMerchant();\n-            if (shop != null && shop.isOwner(c.getPlayer())) {\n-                if (ivItem != null && ivItem.getQuantity() >= bundles * perBundle) {\n-                    shop.addItem(shopItem);\n-                    c.announce(MaplePacketCreator.getPlayerShopItemUpdate(shop));\n+            if (shop != null && shop.isOwner(chr)) {\n+                if (shop.isOpen()) {\n+                    c.announce(MaplePacketCreator.serverNotice(1, \"You can't sell it anymore.\"));\n+                    return;\n                 }\n-            } else if (merchant != null && merchant.isOwner(c.getPlayer())) {\n+                \n+                shop.addItem(shopItem);\n+                c.announce(MaplePacketCreator.getPlayerShopItemUpdate(shop));\n+            } else if (merchant != null && merchant.isOwner(chr)) {\n+                if (merchant.isOpen()) {\n+                    c.announce(MaplePacketCreator.serverNotice(1, \"You can't sell it anymore.\"));\n+                    return;\n+                }\n+                \n                 merchant.addItem(shopItem);\n-                c.announce(MaplePacketCreator.updateHiredMerchant(merchant, c.getPlayer()));\n+                c.announce(MaplePacketCreator.updateHiredMerchant(merchant, chr));\n             }\n-            if (ItemConstants.isRechargable(ivItem.getItemId())) {\n+            if (ItemConstants.isRechargeable(ivItem.getItemId())) {\n                 MapleInventoryManipulator.removeFromSlot(c, ivType, slot, ivItem.getQuantity(), true);\n             } else {\n                 MapleInventoryManipulator.removeFromSlot(c, ivType, slot, (short) (bundles * perBundle), true);\n             }\n         } else if (mode == Action.REMOVE_ITEM.getCode()) {\n+            if (isTradeOpen(chr)) return;\n+            \n             MaplePlayerShop shop = chr.getPlayerShop();\n-            if (shop != null && shop.isOwner(c.getPlayer())) {\n+            if (shop != null && shop.isOwner(chr)) {\n+                if (shop.isOpen()) {\n+                    c.announce(MaplePacketCreator.serverNotice(1, \"You can't take it with the store open.\"));\n+                    return;\n+                }\n+                \n                 int slot = slea.readShort();\n                 if (slot >= shop.getItems().size() || slot < 0) {\n-                        AutobanFactory.PACKET_EDIT.alert(c.getPlayer(), c.getPlayer().getName() + \" tried to packet edit with a player shop.\");\n-                \tFilePrinter.printError(FilePrinter.EXPLOITS + c.getPlayer().getName() + \".txt\", c.getPlayer().getName() + \" tried to remove item at slot \" + slot + \"\\r\\n\");\n-                \tc.disconnect(true, false);\n-                \treturn;\n+                    AutobanFactory.PACKET_EDIT.alert(chr, chr.getName() + \" tried to packet edit with a player shop.\");\n+                    FilePrinter.printError(FilePrinter.EXPLOITS + chr.getName() + \".txt\", chr.getName() + \" tried to remove item at slot \" + slot + \"\\r\\n\");\n+                    c.disconnect(true, false);\n+                    return;\n                 }\n-                MaplePlayerShopItem shopItem = shop.getItems().get(slot);\n-                Item ivItem = shopItem.getItem().copy();\n-                shop.removeItem(slot);\n-                ivItem.setQuantity(shopItem.getBundles());\n-                MapleInventoryManipulator.addFromDrop(c, ivItem, false);\n-                c.announce(MaplePacketCreator.getPlayerShopItemUpdate(shop));\n+                \n+                shop.takeItemBack(slot, chr);\n             }\n-        } else if (mode == Action.MERCHANT_MESO.getCode()) {//Hmmmm\n-            /*if (!chr.getHiredMerchant().isOwner(chr) || chr.getMerchantMeso() < 1) return;\n-            int possible = Integer.MAX_VALUE - chr.getMerchantMeso();\n-            if (possible > 0) {\n-                if (possible < chr.getMerchantMeso()) {\n-                    chr.gainMeso(possible, false);\n-                    chr.setMerchantMeso(chr.getMerchantMeso() - possible);\n-                } else {\n-                    chr.gainMeso(chr.getMerchantMeso(), false);\n-                    chr.setMerchantMeso(0);\n-                }\n-                c.announce(MaplePacketCreator.updateHiredMerchant(chr.getHiredMerchant(), chr));\n-            }*/\n+        } else if (mode == Action.MERCHANT_MESO.getCode()) {\n+            MapleHiredMerchant merchant = chr.getHiredMerchant();\n+            if (merchant == null) return;\n+            \n+            merchant.withdrawMesos(chr);\n         } else if (mode == Action.MERCHANT_ORGANIZE.getCode()) {\n             MapleHiredMerchant merchant = chr.getHiredMerchant();\n-            if (!merchant.isOwner(chr)) return;\n+            if (merchant == null || !merchant.isOwner(chr)) return;\n+            \n+            merchant.withdrawMesos(chr);\n+            merchant.clearInexistentItems();\n             \n-            if (chr.getMerchantMeso() > 0) {\n-                int possible = Integer.MAX_VALUE - chr.getMerchantMeso();\n-                if (possible > 0) {\n-                    if (possible < chr.getMerchantMeso()) {\n-                        chr.gainMeso(possible, false);\n-                        chr.setMerchantMeso(chr.getMerchantMeso() - possible);\n-                    } else {\n-                        chr.gainMeso(chr.getMerchantMeso(), false);\n-                        chr.setMerchantMeso(0);\n-                    }\n-                }\n-            }\n-            for (int i = 0; i < merchant.getItems().size(); i++) {\n-                if (!merchant.getItems().get(i).isExist()) merchant.removeFromSlot(i);\n-            }\n             if (merchant.getItems().isEmpty()) {\n                 c.announce(MaplePacketCreator.hiredMerchantOwnerLeave());\n                 c.announce(MaplePacketCreator.leaveHiredMerchant(0x00, 0x03));\n@@ -524,57 +535,65 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n             c.announce(MaplePacketCreator.updateHiredMerchant(merchant, chr));\n \n         } else if (mode == Action.BUY.getCode() || mode == Action.MERCHANT_BUY.getCode()) {\n+            if (isTradeOpen(chr)) return;\n+            \n             int itemid = slea.readByte();\n             short quantity = slea.readShort();\n             if (quantity < 1) {\n-                AutobanFactory.PACKET_EDIT.alert(c.getPlayer(), c.getPlayer().getName() + \" tried to packet edit with a hired merchant and or player shop.\");\n-            \tFilePrinter.printError(FilePrinter.EXPLOITS + c.getPlayer().getName() + \".txt\", c.getPlayer().getName() + \" tried to buy item \" + itemid + \" with quantity \" + quantity + \"\\r\\n\");\n+                AutobanFactory.PACKET_EDIT.alert(chr, chr.getName() + \" tried to packet edit with a hired merchant and or player shop.\");\n+            \tFilePrinter.printError(FilePrinter.EXPLOITS + chr.getName() + \".txt\", chr.getName() + \" tried to buy item \" + itemid + \" with quantity \" + quantity + \"\\r\\n\");\n             \tc.disconnect(true, false);\n             \treturn;\n             }\n             MaplePlayerShop shop = chr.getPlayerShop();\n             MapleHiredMerchant merchant = chr.getHiredMerchant();\n-            if (shop != null && shop.isVisitor(c.getPlayer())) {\n+            if (shop != null && shop.isVisitor(chr)) {\n                 shop.buy(c, itemid, quantity);\n                 shop.broadcast(MaplePacketCreator.getPlayerShopItemUpdate(shop));\n             } else if (merchant != null && !merchant.isOwner(chr)) {\n                 merchant.buy(c, itemid, quantity);\n-                merchant.broadcastToVisitorsThreadsafe(MaplePacketCreator.updateHiredMerchant(merchant, c.getPlayer()));\n+                merchant.broadcastToVisitorsThreadsafe(MaplePacketCreator.updateHiredMerchant(merchant, chr));\n             }\n         } else if (mode == Action.TAKE_ITEM_BACK.getCode()) {\n+            if (isTradeOpen(chr)) return;\n+            \n             MapleHiredMerchant merchant = chr.getHiredMerchant();\n-            if (merchant != null && merchant.isOwner(c.getPlayer())) {\n-                int slot = slea.readShort();\n-                MaplePlayerShopItem shopItem = merchant.getItems().get(slot);\n-                if (!MapleInventory.checkSpot(chr, shopItem.getItem())) {\n-                        c.announce(MaplePacketCreator.serverNotice(1, \"Have a slot available on your inventory to claim back the item.\"));\n-                \tc.announce(MaplePacketCreator.enableActions());\n-                \treturn;\n+            if (merchant != null && merchant.isOwner(chr)) {\n+                if (merchant.isOpen()) {\n+                    c.announce(MaplePacketCreator.serverNotice(1, \"You can't take it with the store open.\"));\n+                    return;\n                 }\n-                if (shopItem.getBundles() > 0) {\n-                    Item iitem = shopItem.getItem();\n-                    iitem.setQuantity((short) (shopItem.getItem().getQuantity() * shopItem.getBundles()));                    \n-                    MapleInventoryManipulator.addFromDrop(c, iitem, true);\n+                \n+                int slot = slea.readShort();\n+                if (slot >= merchant.getItems().size() || slot < 0) {\n+                    AutobanFactory.PACKET_EDIT.alert(chr, chr.getName() + \" tried to packet edit with a hired merchant.\");\n+                    FilePrinter.printError(FilePrinter.EXPLOITS + chr.getName() + \".txt\", chr.getName() + \" tried to remove item at slot \" + slot + \"\\r\\n\");\n+                    c.disconnect(true, false);\n+                    return;\n                 }\n-                merchant.removeFromSlot(slot);\n-                c.announce(MaplePacketCreator.updateHiredMerchant(merchant, c.getPlayer()));\n+                \n+                merchant.takeItemBack(slot, chr);\n             }\n         } else if (mode == Action.CLOSE_MERCHANT.getCode()) {\n+            if (isTradeOpen(chr)) return;\n+            \n             MapleHiredMerchant merchant = chr.getHiredMerchant();\n-            if (merchant != null && merchant.isOwner(c.getPlayer())) {\n+            if (merchant != null && merchant.isOwner(chr)) {\n                 c.announce(MaplePacketCreator.hiredMerchantOwnerLeave());\n                 c.announce(MaplePacketCreator.leaveHiredMerchant(0x00, 0x03));\n                 merchant.closeShop(c, false);\n                 chr.setHasMerchant(false);\n             }\n         } else if (mode == Action.MAINTENANCE_OFF.getCode()) {\n+            if (isTradeOpen(chr)) return;\n+            \n             MapleHiredMerchant merchant = chr.getHiredMerchant();\n             if(merchant != null) {\n-                if (merchant.getItems().isEmpty() && merchant.isOwner(c.getPlayer())) {\n+                if (merchant.getItems().isEmpty() && merchant.isOwner(chr)) {\n                     merchant.closeShop(c, false);\n                     chr.setHasMerchant(false);\n                 }\n-                if (merchant.isOwner(c.getPlayer())) {\n+                if (merchant.isOwner(chr)) {\n                     merchant.clearMessages();\n                     merchant.setOpen(true);\n                 }\n@@ -585,7 +604,7 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n         } else if (mode == Action.BAN_PLAYER.getCode()) {\n             slea.skip(1);\n             \n-            if (chr.getPlayerShop() != null && chr.getPlayerShop().isOwner(c.getPlayer())) {\n+            if (chr.getPlayerShop() != null && chr.getPlayerShop().isOwner(chr)) {\n                 chr.getPlayerShop().banPlayer(slea.readMapleAsciiString());\n             }\n         } else if (mode == Action.EXPEL.getCode()) {\n@@ -600,4 +619,14 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n             }\n         }\n     }\n+    \n+    private static boolean isTradeOpen(MapleCharacter chr) {\n+        if (chr.getTrade() != null) {   // thanks to Rien dev team\n+            //Apparently there is a dupe exploit that causes racing conditions when saving/retrieving from the db with stuff like trade open.\n+            chr.announce(MaplePacketCreator.enableActions());\n+            return true;\n+        }\n+        \n+        return false;\n+    }\n }"}, {"sha": "b9240c4ce6ab053e634e05f04b84532c2ea188ee", "filename": "src/net/server/channel/handlers/PlayerLoggedinHandler.java", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/PlayerLoggedinHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/PlayerLoggedinHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/PlayerLoggedinHandler.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -148,6 +148,8 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n             player.announce(MaplePacketCreator.sendAutoMpPot(player.getKeymap().get(92).getAction()));\n         \n         player.getMap().addPlayer(player);\n+        player.visitMap(player.getMap());\n+        \n         World world = server.getWorld(c.getWorld());\n         world.getPlayerStorage().addPlayer(player);\n         "}, {"sha": "cec72139e6f342faf045cf2bcc89c26d7b86a6e1", "filename": "src/net/server/channel/handlers/RemoteStoreHandler.java", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/RemoteStoreHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/RemoteStoreHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/RemoteStoreHandler.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -34,6 +34,7 @@\n  * @author kevintjuh93 :3\n  */\n public class RemoteStoreHandler extends AbstractMaplePacketHandler {\n+    @Override\n     public void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {\n         MapleCharacter chr = c.getPlayer();\n         MapleHiredMerchant hm = getMerchant(c);\n@@ -54,7 +55,7 @@ public void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {\n         c.announce(MaplePacketCreator.enableActions());\n     }\n \n-    private MapleHiredMerchant getMerchant(MapleClient c) {\n+    private static MapleHiredMerchant getMerchant(MapleClient c) {\n         if (c.getPlayer().hasMerchant()) {\n             return c.getWorldServer().getHiredMerchant(c.getPlayer().getId());\n         }"}, {"sha": "45057e25486b887f9ad23256b94c0a6ae913abb7", "filename": "src/net/server/channel/handlers/StorageHandler.java", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/StorageHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/StorageHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/StorageHandler.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -116,8 +116,8 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)\n \t\t\t} else {\n \t\t\t\tMapleInventoryType invType = ItemConstants.getInventoryType(itemId);\n \t\t\t\tItem item = chr.getInventory(invType).getItem(slot).copy();\n-\t\t\t\tif (item.getItemId() == itemId && (item.getQuantity() >= quantity || ItemConstants.isRechargable(itemId))) {\n-\t\t\t\t\tif (ItemConstants.isRechargable(itemId)) {\n+\t\t\t\tif (item.getItemId() == itemId && (item.getQuantity() >= quantity || ItemConstants.isRechargeable(itemId))) {\n+\t\t\t\t\tif (ItemConstants.isRechargeable(itemId)) {\n \t\t\t\t\t\tquantity = item.getQuantity();\n \t\t\t\t\t}\n \t\t\t\t\tchr.gainMeso(meso, false, true, false);"}, {"sha": "c0cf69b2ca65d8ee52235cf3b20976e06b6d0233", "filename": "src/net/server/channel/handlers/UseItemHandler.java", "status": "modified", "additions": 28, "deletions": 19, "changes": 47, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/UseItemHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/UseItemHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/UseItemHandler.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -21,11 +21,13 @@\n */\n package net.server.channel.handlers;\n \n+import client.MapleCharacter;\n import client.MapleClient;\n import client.MapleDisease;\n import client.inventory.Item;\n import client.inventory.MapleInventoryType;\n import constants.ItemConstants;\n+import constants.ServerConstants;\n import net.AbstractMaplePacketHandler;\n import server.MapleInventoryManipulator;\n import server.MapleItemInformationProvider;\n@@ -38,55 +40,62 @@\n public final class UseItemHandler extends AbstractMaplePacketHandler {\n     @Override\n     public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {\n-        if (!c.getPlayer().isAlive()) {\n+        MapleCharacter chr = c.getPlayer();\n+        \n+        if (!chr.isAlive()) {\n             c.announce(MaplePacketCreator.enableActions());\n             return;\n         }\n         MapleItemInformationProvider ii = MapleItemInformationProvider.getInstance();\n         slea.readInt();\n         short slot = slea.readShort();\n         int itemId = slea.readInt();\n-        Item toUse = c.getPlayer().getInventory(MapleInventoryType.USE).getItem(slot);\n+        Item toUse = chr.getInventory(MapleInventoryType.USE).getItem(slot);\n         if (toUse != null && toUse.getQuantity() > 0 && toUse.getItemId() == itemId) {\n             if (itemId == 2022178 || itemId == 2050004) {\n-                c.getPlayer().dispelDebuffs();\n+                chr.dispelDebuffs();\n                 remove(c, slot);\n                 return;\n-            }\n-            else if (itemId == 2050001) {\n-\t\tc.getPlayer().dispelDebuff(MapleDisease.DARKNESS);\n+            } else if (itemId == 2050001) {\n+\t\tchr.dispelDebuff(MapleDisease.DARKNESS);\n                 remove(c, slot);\n                 return;\n \t    } else if (itemId == 2050002) {\n-\t\tc.getPlayer().dispelDebuff(MapleDisease.WEAKEN);\n-                c.getPlayer().dispelDebuff(MapleDisease.SLOW);\n+\t\tchr.dispelDebuff(MapleDisease.WEAKEN);\n+                chr.dispelDebuff(MapleDisease.SLOW);\n                 remove(c, slot);\n                 return;\n             } else if (itemId == 2050003) {\n-                c.getPlayer().dispelDebuff(MapleDisease.SEAL);\n-\t\tc.getPlayer().dispelDebuff(MapleDisease.CURSE);\n+                chr.dispelDebuff(MapleDisease.SEAL);\n+\t\tchr.dispelDebuff(MapleDisease.CURSE);\n                 remove(c, slot);\n                 return;\n-            }\n-            else if (ItemConstants.isTownScroll(itemId)) {\n-                if (ii.getItemEffect(toUse.getItemId()).applyTo(c.getPlayer())) {\n+            } else if (ItemConstants.isTownScroll(itemId)) {\n+                int banMap = chr.getMapId();\n+                int banSp = chr.getMap().findClosestPlayerSpawnpoint(chr.getPosition()).getId();\n+                long banTime = System.currentTimeMillis();\n+                \n+                if (ii.getItemEffect(toUse.getItemId()).applyTo(chr)) {\n+                    if(ServerConstants.USE_BANISHABLE_TOWN_SCROLL) {\n+                        chr.setBanishPlayerData(banMap, banSp, banTime);\n+                    }\n+                    \n                     remove(c, slot);\n                 }\n                 return;\n-            }\n-            else if (ItemConstants.isAntibanishScroll(itemId)) {\n-                if (ii.getItemEffect(toUse.getItemId()).applyTo(c.getPlayer())) {\n+            } else if (ItemConstants.isAntibanishScroll(itemId)) {\n+                if (ii.getItemEffect(toUse.getItemId()).applyTo(chr)) {\n                     remove(c, slot);\n                 } else {\n-                    c.getPlayer().dropMessage(5, \"You cannot recover from a banish state at the moment.\");\n+                    chr.dropMessage(5, \"You cannot recover from a banish state at the moment.\");\n                 }\n                 return;\n             }\n             \n             remove(c, slot);\n             \n-            ii.getItemEffect(toUse.getItemId()).applyTo(c.getPlayer());\n-            c.getPlayer().checkBerserk(c.getPlayer().isHidden());\n+            ii.getItemEffect(toUse.getItemId()).applyTo(chr);\n+            chr.checkBerserk(chr.isHidden());\n         }\n     }\n "}, {"sha": "a22c7074b0d854dc75aade2f8239f321440f3ba1", "filename": "src/net/server/channel/handlers/UseOwlOfMinervaHandler.java", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/UseOwlOfMinervaHandler.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/channel/handlers/UseOwlOfMinervaHandler.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/channel/handlers/UseOwlOfMinervaHandler.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "283415f4781adc4b48740c226dd782d5bfa13b47", "filename": "src/net/server/worker/BaseWorker.java", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/worker/BaseWorker.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/worker/BaseWorker.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/worker/BaseWorker.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}, {"sha": "7f582d963ec2600cb828cf51f5f83b14640d2f83", "filename": "src/net/server/worker/CharacterAutosaverWorker.java", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/ronancpl/HeavenMS/blob/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/worker/CharacterAutosaverWorker.java", "raw_url": "https://github.com/ronancpl/HeavenMS/raw/80b1776ad362f28e5abab52bea073c7dbf4eca54/src/net/server/worker/CharacterAutosaverWorker.java", "contents_url": "https://api.github.com/repos/ronancpl/HeavenMS/contents/src/net/server/worker/CharacterAutosaverWorker.java?ref=80b1776ad362f28e5abab52bea073c7dbf4eca54", "patch": "@@ -1,6 +1,6 @@\n /*\n-    This file is part of the HeavenMS (MapleSolaxiaV2) MapleStory Server\n-    Copyleft (L) 2017 RonanLana\n+    This file is part of the HeavenMS MapleStory Server\n+    Copyleft (L) 2016 - 2018 RonanLana\n \n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU Affero General Public License as"}]}]},
