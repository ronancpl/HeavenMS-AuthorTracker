diff --git a/.gitignore b/.gitignore
index 480e5c0c5..029f36015 100644
--- a/.gitignore
+++ b/.gitignore
@@ -23,6 +23,10 @@
 /tools/MapleCouponInstaller/dist/
 /tools/MapleCouponInstaller/nbproject/
 
+/tools/MapleEquipmentOmnileveler/build/
+/tools/MapleEquipmentOmnileveler/dist/
+/tools/MapleEquipmentOmnileveler/nbproject/
+
 /tools/MapleIdRetriever/build/
 /tools/MapleIdRetriever/dist/
 /tools/MapleIdRetriever/nbproject/
diff --git a/README.md b/README.md
index cfa63a92c..6290ff825 100644
--- a/README.md
+++ b/README.md
@@ -3,7 +3,7 @@
 
 ## Head developer: Ronan C. P. Lana
 
-Besides myself for maintaining this repository, credits are to be given to Nexon(Duh!), the original MapleSolaxia staff and other colaborators, as just some changes/patches on the game were applied by myself, in which some of them diverged from the original v83 patch contents (alright, not just "some patches" by now since a whole lot of major server core changes have been applied on this development).
+Besides myself for maintaining this repository, credits are to be given to Wizet/Nexon (owners of MapleStory & it's IP contents), the original MapleSolaxia staff and other colaborators, as just some changes/patches on the game were applied by myself, in which some of them diverged from the original v83 patch contents (alright, not just "some patches" by now since a whole lot of major server core changes have been applied on this development).
 
 Regarding distributability and usage of the code presented here: like it was before, this MapleStory server is open-source. By that, it is meant that anyone is **free to install, use, modify and redistribute the contents**, as long as there is **no kind of commercial trading involved** and the **credits to the original creators are maintained** within the codes.
 
diff --git a/docs/feature_list.md b/docs/feature_list.md
index eede63433..00e72ec4a 100644
--- a/docs/feature_list.md
+++ b/docs/feature_list.md
@@ -25,7 +25,7 @@ PQs:
 * HPQ/KPQ/LPQ/LMPQ/OPQ/EllinPQ/PiratePQ/MagatiaPQ/HorntailPQ/AmoriaPQ/TreasurePQ/ElnathPQ/HolidayPQ.
 * CWKPQ as Expedition-based event.
 * Expeditions: Scarga/Horntail/Showa/Balrog/Zakum/Pinkbean.
-* GuildPQ + Guild queue with multi-lobby systems available.
+* GuildPQ + Guild queue with multi-lobby system available.
 * Brand-new PQs: BossRushPQ, CafePQ.
 * Mu Lung Dojo.
 * Capt. Latanica remade as an event (parties can now fight the boss).
@@ -67,6 +67,7 @@ Player Social Network:
 * Further improved the server's ranking system, now displaying properly daily player ranking movement.
 * Automated support for Player NPCs and Hall of Fame.
 * Protected concurrently and improved the face expression system, guarding from trivial packet spam and exploits.
+* All upgradeable non-cash equipments in inventory with level & EXP information available for read by anyone, given proper visibility.
 
 Cash & Items:
 
@@ -98,6 +99,7 @@ Monsters, Maps & Reactors:
 * Mobs now can drop more than one of the same equipment (number of possible drops defined at droptime, uses the minimum/maximum quantity fields on DB).
 * Mobs only drops items that are visible/collectable by the player's party.
 * Redesigned HT mechanics for spawn and linked damage to the sponge.
+* Reviewed aspects of MoveLifeHandler: implemented banish move, patched MP cost not contabilized on non-skill mob moves and slightly fixed mobs dropping from footholds in certain cases.
 * Limited item count on maps, smartly expiring oldest registered items, preventing potential item flooding.
 * Implemented Zombify disease status.
 * Added Boss HP Bar for dozens of bosses (needs provided custom wz).
@@ -113,6 +115,7 @@ Monsters, Maps & Reactors:
 * Reactors pick items up smartly, checking for an option to pick up on many-items-nearby scenario.
 * Updated many scripted portals not implementing SFX properly.
 * Updated Crimsonwood, World Tour, Nihal Desert and Neo City, enabling quest completion and game progression in these areas.
+* Added world maps for Mushroom Castle, World Tour (Singapore, Malaysia and Zipangu) & Ellin Forest areas.
 * Giant Cake (anniversary-themed boss) drops Maple equipments, Maple scrolls, summoning bags and many more interesting items.
 
 PQ potentials:
@@ -122,13 +125,14 @@ PQ potentials:
 * Expedition system - Multiples parties can attempt on a same instance (lobbies and expeds are mutually-exclusive).
 * Guild queue system - Guilds can register themselves on a queue for the GPQ.
 * EIM Pool system - After the first instance setup, next event instances are loaded beforehand and set on a pooling queue, optimizing future loadouts.
+* Recall system - Players can rejoin the last event instance they were in before disconnection.
 
 Player potentials:
 
 * Adventurer Mount quests functional.
 * All Equipment levels up.
 * Player level rates.
-* Gain fame by quests.
+* Gain fame by quests and event instances.
 * Pet evolutions functional (not GMS-like).
 * Reviewed keybinding system.
 * Account's Character slots: either each world has it's own count or there's a shared value between all worlds.
@@ -145,6 +149,7 @@ Server potentials:
 * Enhanced AP auto-assigner: exactly matches AP with the needed for the player's current level, surplus assigned to the primary attribute.
 * Enhanced inventory check: free slots on inventory smartly fetched on demand.
 * Enhanced auto-loot handler: optimized the brute-force checks for some cash items on the player equipped inventory at every requisition.
+* Added players-appointed bestsellers item ranking system for Owl of Minerva and Cash Shop.
 * Tweaked pet/mount hunger: calculations for fullness/tiredness takes active time of the subject into account.
 * Consistent experience and meso gain system.
 * NPC crafters (equips, plates/jewels, etc) now won't take items freely if the requirement conditions are not properly met.
@@ -191,6 +196,7 @@ External tools:
 * MapleBossHpBarFetcher - Searches the quest WZ files and reports in all relevant data regarding mobs that has a boss HP bar whilst not having a proper "boss" label.
 * MapleCashDropFetcher - Searches the DB for any CASH drop data entry and lists them on a report file.
 * MapleCouponInstaller - Retrieves coupon info from the WZ and makes a SQL table with it. The server will use that table to gather info regarding rates and intervals.
+* MapleEquipmentOmnileveler - Updates the equipment WZ nodes with item level information, allowing thus access for item level and EXP info for common equipments.
 * MapleIdRetriever - Two behaviors: generates a SQL table with relation (id, name) of the handbook given as input. Given a file with names, outputs a file with ids.
 * MapleInvalidItemIdFetcher - Generates a file listing all inexistent itemid's currently laying on the DB.
 * MapleInvalidItemWithNoNameFetcher - Generates two files: one listing all itemid's with inexistent name and "cash" property. And other with a prepared XML to solve the name issue.
diff --git a/docs/mychanges_ptbr.txt b/docs/mychanges_ptbr.txt
index 023d4d382..889587797 100644
--- a/docs/mychanges_ptbr.txt
+++ b/docs/mychanges_ptbr.txt
@@ -1292,4 +1292,36 @@ Corrigido valores incorretos sendo retirado de jogadores para expansão de guild
 Adicionado world map em Ellin Forest.
 Protegido concorrentemente sistema de fames.
 Adicionado ganho de quest points para jogadores que participam de PQs. Reformulado sistema de quest points para viabilizar a nova feature.
-Otimizado método de ganho de experiência em equipamentos, agora devidamente cacheado e sem busca em strings no processo.
\ No newline at end of file
+Otimizado método de ganho de experiência em equipamentos, agora devidamente cacheado e sem busca em strings no processo.
+
+08 Agosto 2018,
+MapleServerHandler agora é devidamente deregistrado ao finalizar uma instância de channel, eliminando possível foco de memory leak.
+Funções playerDead e playerRevive são agora opcionais em EIM scripts.
+Nova ferramenta: MapleEquipmentOmnileveler. Permite adicionar e atualizar nodos referentes a níveis para todos os equipamentos. Em jogo, essa adição permite jogadores a ver nível de qualquer equipamento do jogo.
+
+09 - 10 Agosto 2018,
+Adicionado cálculo de MP ao realizar ataques de mobs.
+Aplicado vários pequenos ajustes no handler que lida com movimentação de mobs, procurando assim reduzir ruidos no fluxo do jogo (e.g. mob caindo de foothold).
+Corrigido schedules de event instances sendo chamados após finalização da mesma, levando locks já liberados a serem chamados inesperadamente.
+Corrigido casos onde jogadores poderiam requisitar instanciação de uma nova PQ, cujo EM que já tenha sido liberado.
+Aplicado reformatação geral no Character.wz, adicionando nodos de level para todos os equipamentos do jogo. Tal mudança permite que todos os equipamentos exponham nível e experiência em todos os equipamentos no inventário.
+Implementado cálculo de experiência no lado do servidor que permite mostrar adequadamente EXP dos equipamentos no lado do cliente.
+
+11 - 19 Agosto 2018,
+Corrigido MP Recovery skill não atuando segundo descrição, além de matando jogador com pouco HP disponível.
+Refatorado completamente acessos de stats no código do server.
+Refatorado check de Berserk sendo chamado em múltiplas seções do código.
+Corrigido algumas cadeiras levando jogadores a desconectarem aleatoriamente.
+Corrigido puppets ficando no mapa indeterminadamente em certos cenários.
+Acrescentado proteção contra acesso concorrente em ganhos de EXP em equipamentos.
+Door bosses (Marbas, Crocell, etc) agora spawnam de tempos em tempos, ao invés de serem chamados ao entrar no mapa.
+Retrabalhado Chair Mastery, agora com cura atuando em porcentagem de HP/MP base.
+Corrigido problema de deadlock com inventário de jogadores e EXP/DROP coupons.
+Corrigido problema de deadlock com pickup de mesos e detecção de jogadores em party.
+Corrigido problema de deadlock com o handler de pet autopot.
+Melhorado desempenho do autopot handler.
+Corrigido diversos aspectos do novo modelo de acesso de stats, agora propriamente protegido contra acesso concorrente.
+Revitalizers de mounts são devidamente consumidos mesmo em casos mount tiredness seja zero.
+Corrigido alliances retendo informações de guilds que foram desfeitas na DB.
+Corrigido alliances não salvando nomes de ranks na DB ao serem criadas.
+Adicionado suporte para doors na região de Mushroom Castle.
\ No newline at end of file
diff --git a/scripts/event/AreaBossDoor1.js b/scripts/event/AreaBossDoor1.js
new file mode 100644
index 000000000..a47477b60
--- /dev/null
+++ b/scripts/event/AreaBossDoor1.js
@@ -0,0 +1,57 @@
+/*
+	This file is part of the OdinMS Maple Story Server
+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>
+		       Matthias Butz <matze@odinms.de>
+		       Jan Christian Meyer <vimes@odinms.de>
+
+    This program is free software: you can redistribute it and/or modify
+    it under the terms of the GNU Affero General Public License as
+    published by the Free Software Foundation version 3 as published by
+    the Free Software Foundation. You may not use, modify or distribute
+    this program under any other version of the GNU Affero General Public
+    License.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU Affero General Public License for more details.
+
+    You should have received a copy of the GNU Affero General Public License
+    along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+/**
+-- Odin JavaScript --------------------------------------------------------------------------------
+	Door boss Spawner (based on xQuasar's King Clang spawner)
+**/
+
+function init() {
+    scheduleNew();
+}
+
+function scheduleNew() {
+    setupTask = em.schedule("start", 0);    //spawns upon server start. Each 3 hours an server event checks if boss exists, if not spawns it instantly.
+}
+
+function cancelSchedule() {
+    if (setupTask != null)
+        setupTask.cancel(true);
+}
+
+function start() {
+    var bossMobid = 9400610;
+    var bossMapid = 677000003;
+    var bossMsg = "Amdusias has appeared!";
+    var bossPos = new Packages.java.awt.Point(467, 0);
+    
+    var map = em.getChannelServer().getMapFactory().getMap(bossMapid);
+    if (map.getMonsterById(bossMobid) != null) {
+        em.schedule("start", 3 * 60 * 60 * 1000);
+        return;
+    }
+    
+    var boss = Packages.server.life.MapleLifeFactory.getMonster(bossMobid);
+    map.spawnMonsterOnGroundBelow(boss, bossPos);
+    map.broadcastMessage(Packages.tools.MaplePacketCreator.serverNotice(6, bossMsg));
+    
+    em.schedule("start", 3 * 60 * 60 * 1000);
+}
\ No newline at end of file
diff --git a/scripts/event/AreaBossDoor2.js b/scripts/event/AreaBossDoor2.js
new file mode 100644
index 000000000..a61898837
--- /dev/null
+++ b/scripts/event/AreaBossDoor2.js
@@ -0,0 +1,57 @@
+/*
+	This file is part of the OdinMS Maple Story Server
+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>
+		       Matthias Butz <matze@odinms.de>
+		       Jan Christian Meyer <vimes@odinms.de>
+
+    This program is free software: you can redistribute it and/or modify
+    it under the terms of the GNU Affero General Public License as
+    published by the Free Software Foundation version 3 as published by
+    the Free Software Foundation. You may not use, modify or distribute
+    this program under any other version of the GNU Affero General Public
+    License.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU Affero General Public License for more details.
+
+    You should have received a copy of the GNU Affero General Public License
+    along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+/**
+-- Odin JavaScript --------------------------------------------------------------------------------
+	Door boss Spawner (based on xQuasar's King Clang spawner)
+**/
+
+function init() {
+    scheduleNew();
+}
+
+function scheduleNew() {
+    setupTask = em.schedule("start", 0);    //spawns upon server start. Each 3 hours an server event checks if boss exists, if not spawns it instantly.
+}
+
+function cancelSchedule() {
+    if (setupTask != null)
+        setupTask.cancel(true);
+}
+
+function start() {
+    var bossMobid = 9400609;
+    var bossMapid = 677000005;
+    var bossMsg = "Andras has appeared!";
+    var bossPos = new Packages.java.awt.Point(201, 80);
+    
+    var map = em.getChannelServer().getMapFactory().getMap(bossMapid);
+    if (map.getMonsterById(bossMobid) != null) {
+        em.schedule("start", 3 * 60 * 60 * 1000);
+        return;
+    }
+    
+    var boss = Packages.server.life.MapleLifeFactory.getMonster(bossMobid);
+    map.spawnMonsterOnGroundBelow(boss, bossPos);
+    map.broadcastMessage(Packages.tools.MaplePacketCreator.serverNotice(6, bossMsg));
+    
+    em.schedule("start", 3 * 60 * 60 * 1000);
+}
\ No newline at end of file
diff --git a/scripts/event/AreaBossDoor3.js b/scripts/event/AreaBossDoor3.js
new file mode 100644
index 000000000..2014c572c
--- /dev/null
+++ b/scripts/event/AreaBossDoor3.js
@@ -0,0 +1,57 @@
+/*
+	This file is part of the OdinMS Maple Story Server
+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>
+		       Matthias Butz <matze@odinms.de>
+		       Jan Christian Meyer <vimes@odinms.de>
+
+    This program is free software: you can redistribute it and/or modify
+    it under the terms of the GNU Affero General Public License as
+    published by the Free Software Foundation version 3 as published by
+    the Free Software Foundation. You may not use, modify or distribute
+    this program under any other version of the GNU Affero General Public
+    License.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU Affero General Public License for more details.
+
+    You should have received a copy of the GNU Affero General Public License
+    along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+/**
+-- Odin JavaScript --------------------------------------------------------------------------------
+	Door boss Spawner (based on xQuasar's King Clang spawner)
+**/
+
+function init() {
+    scheduleNew();
+}
+
+function scheduleNew() {
+    setupTask = em.schedule("start", 0);    //spawns upon server start. Each 3 hours an server event checks if boss exists, if not spawns it instantly.
+}
+
+function cancelSchedule() {
+    if (setupTask != null)
+        setupTask.cancel(true);
+}
+
+function start() {
+    var bossMobid = 9400613;
+    var bossMapid = 677000009;
+    var bossMsg = "Valefor has appeared!";
+    var bossPos = new Packages.java.awt.Point(251, -841);
+    
+    var map = em.getChannelServer().getMapFactory().getMap(bossMapid);
+    if (map.getMonsterById(bossMobid) != null) {
+        em.schedule("start", 3 * 60 * 60 * 1000);
+        return;
+    }
+    
+    var boss = Packages.server.life.MapleLifeFactory.getMonster(bossMobid);
+    map.spawnMonsterOnGroundBelow(boss, bossPos);
+    map.broadcastMessage(Packages.tools.MaplePacketCreator.serverNotice(6, bossMsg));
+    
+    em.schedule("start", 3 * 60 * 60 * 1000);
+}
\ No newline at end of file
diff --git a/scripts/event/AreaBossDoor4.js b/scripts/event/AreaBossDoor4.js
new file mode 100644
index 000000000..81be937ea
--- /dev/null
+++ b/scripts/event/AreaBossDoor4.js
@@ -0,0 +1,57 @@
+/*
+	This file is part of the OdinMS Maple Story Server
+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>
+		       Matthias Butz <matze@odinms.de>
+		       Jan Christian Meyer <vimes@odinms.de>
+
+    This program is free software: you can redistribute it and/or modify
+    it under the terms of the GNU Affero General Public License as
+    published by the Free Software Foundation version 3 as published by
+    the Free Software Foundation. You may not use, modify or distribute
+    this program under any other version of the GNU Affero General Public
+    License.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU Affero General Public License for more details.
+
+    You should have received a copy of the GNU Affero General Public License
+    along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+/**
+-- Odin JavaScript --------------------------------------------------------------------------------
+	Door boss Spawner (based on xQuasar's King Clang spawner)
+**/
+
+function init() {
+    scheduleNew();
+}
+
+function scheduleNew() {
+    setupTask = em.schedule("start", 0);    //spawns upon server start. Each 3 hours an server event checks if boss exists, if not spawns it instantly.
+}
+
+function cancelSchedule() {
+    if (setupTask != null)
+        setupTask.cancel(true);
+}
+
+function start() {
+    var bossMobid = 9400633;
+    var bossMapid = 677000012;
+    var bossMsg = "Astaroth has appeared!";
+    var bossPos = new Packages.java.awt.Point(842, 0);
+    
+    var map = em.getChannelServer().getMapFactory().getMap(bossMapid);
+    if (map.getMonsterById(bossMobid) != null) {
+        em.schedule("start", 3 * 60 * 60 * 1000);
+        return;
+    }
+    
+    var boss = Packages.server.life.MapleLifeFactory.getMonster(bossMobid);
+    map.spawnMonsterOnGroundBelow(boss, bossPos);
+    map.broadcastMessage(Packages.tools.MaplePacketCreator.serverNotice(6, bossMsg));
+    
+    em.schedule("start", 3 * 60 * 60 * 1000);
+}
\ No newline at end of file
diff --git a/scripts/event/AreaBossDoor5.js b/scripts/event/AreaBossDoor5.js
new file mode 100644
index 000000000..4363b431e
--- /dev/null
+++ b/scripts/event/AreaBossDoor5.js
@@ -0,0 +1,57 @@
+/*
+	This file is part of the OdinMS Maple Story Server
+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>
+		       Matthias Butz <matze@odinms.de>
+		       Jan Christian Meyer <vimes@odinms.de>
+
+    This program is free software: you can redistribute it and/or modify
+    it under the terms of the GNU Affero General Public License as
+    published by the Free Software Foundation version 3 as published by
+    the Free Software Foundation. You may not use, modify or distribute
+    this program under any other version of the GNU Affero General Public
+    License.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU Affero General Public License for more details.
+
+    You should have received a copy of the GNU Affero General Public License
+    along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+/**
+-- Odin JavaScript --------------------------------------------------------------------------------
+	Door boss Spawner (based on xQuasar's King Clang spawner)
+**/
+
+function init() {
+    scheduleNew();
+}
+
+function scheduleNew() {
+    setupTask = em.schedule("start", 0);    //spawns upon server start. Each 3 hours an server event checks if boss exists, if not spawns it instantly.
+}
+
+function cancelSchedule() {
+    if (setupTask != null)
+        setupTask.cancel(true);
+}
+
+function start() {
+    var bossMobid = 9400612;
+    var bossMapid = 677000001;
+    var bossMsg = "Marbas has appeared!";
+    var bossPos = new Packages.java.awt.Point(461, 61);
+    
+    var map = em.getChannelServer().getMapFactory().getMap(bossMapid);
+    if (map.getMonsterById(bossMobid) != null) {
+        em.schedule("start", 3 * 60 * 60 * 1000);
+        return;
+    }
+    
+    var boss = Packages.server.life.MapleLifeFactory.getMonster(bossMobid);
+    map.spawnMonsterOnGroundBelow(boss, bossPos);
+    map.broadcastMessage(Packages.tools.MaplePacketCreator.serverNotice(6, bossMsg));
+    
+    em.schedule("start", 3 * 60 * 60 * 1000);
+}
\ No newline at end of file
diff --git a/scripts/event/AreaBossDoor6.js b/scripts/event/AreaBossDoor6.js
new file mode 100644
index 000000000..0b30926c0
--- /dev/null
+++ b/scripts/event/AreaBossDoor6.js
@@ -0,0 +1,57 @@
+/*
+	This file is part of the OdinMS Maple Story Server
+    Copyright (C) 2008 Patrick Huy <patrick.huy@frz.cc>
+		       Matthias Butz <matze@odinms.de>
+		       Jan Christian Meyer <vimes@odinms.de>
+
+    This program is free software: you can redistribute it and/or modify
+    it under the terms of the GNU Affero General Public License as
+    published by the Free Software Foundation version 3 as published by
+    the Free Software Foundation. You may not use, modify or distribute
+    this program under any other version of the GNU Affero General Public
+    License.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU Affero General Public License for more details.
+
+    You should have received a copy of the GNU Affero General Public License
+    along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+/**
+-- Odin JavaScript --------------------------------------------------------------------------------
+	Door boss Spawner (based on xQuasar's King Clang spawner)
+**/
+
+function init() {
+    scheduleNew();
+}
+
+function scheduleNew() {
+    setupTask = em.schedule("start", 0);    //spawns upon server start. Each 3 hours an server event checks if boss exists, if not spawns it instantly.
+}
+
+function cancelSchedule() {
+    if (setupTask != null)
+        setupTask.cancel(true);
+}
+
+function start() {
+    var bossMobid = 9400611;
+    var bossMapid = 677000007;
+    var bossMsg = "Crocell has appeared!";
+    var bossPos = new Packages.java.awt.Point(171, 50);
+    
+    var map = em.getChannelServer().getMapFactory().getMap(bossMapid);
+    if (map.getMonsterById(bossMobid) != null) {
+        em.schedule("start", 3 * 60 * 60 * 1000);
+        return;
+    }
+    
+    var boss = Packages.server.life.MapleLifeFactory.getMonster(bossMobid);
+    map.spawnMonsterOnGroundBelow(boss, bossPos);
+    map.broadcastMessage(Packages.tools.MaplePacketCreator.serverNotice(6, bossMsg));
+    
+    em.schedule("start", 3 * 60 * 60 * 1000);
+}
\ No newline at end of file
diff --git a/scripts/event/Cygnus_Magic_Library.js b/scripts/event/Cygnus_Magic_Library.js
index a5b237fe7..5222bf2d3 100644
--- a/scripts/event/Cygnus_Magic_Library.js
+++ b/scripts/event/Cygnus_Magic_Library.js
@@ -40,10 +40,7 @@ function scheduledTimeout(eim){
 }
 
 function playerRevive(eim, player){
-	player.setHp(50);
-	player.setStance(0);
-	eim.unregisterPlayer(player);
-	player.changeMap(entryMap);
+        player.respawn(eim, entryMap);
 	return false;
 }
 
diff --git a/scripts/event/GuardianNex.js b/scripts/event/GuardianNex.js
index e298d71bc..eb804b05a 100644
--- a/scripts/event/GuardianNex.js
+++ b/scripts/event/GuardianNex.js
@@ -36,10 +36,7 @@ function scheduledTimeout(eim){
 }
 
 function playerRevive(eim, player){
-	player.setHp(50);
-	player.setStance(0);
-	eim.unregisterPlayer(player);
-	player.changeMap(exitMap);
+	player.respawn(eim, exitMap);
 	return false;
 }
 
diff --git a/scripts/event/GuildQuest.js b/scripts/event/GuildQuest.js
index d683de323..de751d6f1 100644
--- a/scripts/event/GuildQuest.js
+++ b/scripts/event/GuildQuest.js
@@ -254,16 +254,11 @@ function playerDead(eim, player) {
 function playerRevive(eim, player) { // player presses ok on the death pop up.
         if(eim.getIntProperty("canRevive") == 0) {
                 if (eim.isEventTeamLackingNow(true, minPlayers, player) && eim.getIntProperty("canJoin") == 0) {
-                        eim.unregisterPlayer(player);
-                        player.setHp(50);
-                        player.changeMap(exitMap);
-                        
+                        player.respawn(eim, exitMap);
                         end(eim);
                 }
                 else {
-                        eim.unregisterPlayer(player);
-                        player.setHp(50);
-                        player.changeMap(exitMap);
+                        player.respawn(eim, exitMap);
                 }
                 
                 return false;
diff --git a/scripts/event/MK_PrimeMinister.js b/scripts/event/MK_PrimeMinister.js
index 33d44734a..934b7bac3 100644
--- a/scripts/event/MK_PrimeMinister.js
+++ b/scripts/event/MK_PrimeMinister.js
@@ -39,10 +39,7 @@ function scheduledTimeout(eim){
 }
 
 function playerRevive(eim, player){
-	player.setHp(50);
-	player.setStance(0);
-	eim.unregisterPlayer(player);
-	player.changeMap(entryMap);
+	player.respawn(eim, entryMap);
 	return false;
 }
 
diff --git a/scripts/event/MK_PrimeMinister2.js b/scripts/event/MK_PrimeMinister2.js
index 746ee1f39..ea9e3c100 100644
--- a/scripts/event/MK_PrimeMinister2.js
+++ b/scripts/event/MK_PrimeMinister2.js
@@ -50,10 +50,7 @@ function scheduledTimeout(eim){
 }
 
 function playerRevive(eim, player){
-	player.setHp(50);
-	player.setStance(0);
-	eim.unregisterPlayer(player);
-	player.changeMap(entryMap);
+	player.respawn(eim, entryMap);
 	return false;
 }
 
diff --git a/scripts/event/Puppeteer.js b/scripts/event/Puppeteer.js
index b0410e9f2..d7d4b07f5 100644
--- a/scripts/event/Puppeteer.js
+++ b/scripts/event/Puppeteer.js
@@ -34,10 +34,7 @@ function scheduledTimeout(eim){
 }
 
 function playerRevive(eim, player){
-	player.setHp(50);
-	player.setStance(0);
-	eim.unregisterPlayer(player);
-	player.changeMap(exitMap);
+	player.respawn(eim, exitMap);
 	return false;
 }
 
diff --git a/scripts/event/RockSpirit.js b/scripts/event/RockSpirit.js
index 61966a203..b1cbdd466 100644
--- a/scripts/event/RockSpirit.js
+++ b/scripts/event/RockSpirit.js
@@ -61,10 +61,7 @@ function playerEntry(eim, player) {
 }
 
 function playerRevive(eim, player) {
-    player.setHp(50);
-    player.setStance(0);
-    eim.unregisterPlayer(player);
-    player.changeMap(exitMap);
+    player.respawn(eim, exitMap);
     return false;
 }
 
@@ -136,9 +133,9 @@ function timeOut(eim) {
         if (eim.getPlayerCount() > 0) {
             var pIter = eim.getPlayers().iterator();
             while (pIter.hasNext()){
-				var player = pIter.next();
+                var player = pIter.next();
                 playerExit(eim, player);
-			}
+            }
         }
         eim.dispose();
     }
diff --git a/scripts/event/RockSpiritVIP.js b/scripts/event/RockSpiritVIP.js
index e6636ee87..4895d5dc2 100644
--- a/scripts/event/RockSpiritVIP.js
+++ b/scripts/event/RockSpiritVIP.js
@@ -57,14 +57,11 @@ function respawn(eim) {
 function playerEntry(eim, player) {
 	var amplifierMap = eim.getMapInstance(startMap.getId());
 	player.changeMap(amplifierMap);
-    eim.schedule("timeOut", timer);
+        eim.schedule("timeOut", timer);
 }
 
 function playerRevive(eim, player) {
-    player.setHp(50);
-    player.setStance(0);
-    eim.unregisterPlayer(player);
-    player.changeMap(exitMap);
+    player.respawn(eim, exitMap);
     return false;
 }
 
@@ -136,9 +133,9 @@ function timeOut(eim) {
         if (eim.getPlayerCount() > 0) {
             var pIter = eim.getPlayers().iterator();
             while (pIter.hasNext()){
-				var player = pIter.next();
+                var player = pIter.next();
                 playerExit(eim, player);
-			}
+            }
         }
         eim.dispose();
     }
diff --git a/scripts/npc/9977777.js b/scripts/npc/9977777.js
index 9725a8388..eecf0196a 100644
--- a/scripts/npc/9977777.js
+++ b/scripts/npc/9977777.js
@@ -81,6 +81,7 @@ function writeFeatureTab_PlayerSocialNetwork() {
         addFeature("Protected and improved face expression system.");
         addFeature("Automated support for Player NPCs and Hall of Fame.");
         addFeature("Engagement & Wedding system.");
+        addFeature("Equipments displays to everyone it's level & EXP info.");
 }
 
 function writeFeatureTab_CashItems() {
@@ -112,6 +113,9 @@ function writeFeatureTab_MonstersMapsReactors() {
         addFeature("Every skill/mastery book is now obtainable.");
         addFeature("Mobs now can drop more than one of the same equip.");
         addFeature("Mobs only drop items collectable by the player/party.");
+        addFeature("Mobs shouldn't fall from foothold too often now.");
+        addFeature("Properly applying MP cost on non-skill mob moves.");
+        addFeature("Implemented banish mob skill move.");
         addFeature("Redesigned HT mechanics: assemble & dmg taken.");
         addFeature("Implemented Zombify disease status.");
         addFeature("Added Boss HP Bar for dozens of bosses.");
@@ -126,7 +130,7 @@ function writeFeatureTab_MonstersMapsReactors() {
         addFeature("Uncovered missing portal SFX on scripted portals.");
         addFeature("PQ boxes sprays items when opened, GMS-like.");
         addFeature("Reactors pick items up smartly from the field.");
-        addFeature("Updated scripted portals now with proper portal SFX.");
+        addFeature("Updated scripted portals, now with proper portal SFX.");
         addFeature("Reviewed Masteria, W. Tour, N. Desert and Neo City.");
         addFeature("Added world maps for M. Castle, W. Tour & Ellin areas.");
         addFeature("Giant Cake boss drops s. bags and Maple items.");
@@ -232,6 +236,7 @@ function writeFeatureTab_Project() {
         addFeature("Developed many survey tools for content profiling.");
         addFeature("ThreadTracker: runtime tool for deadlock detection.");
         addFeature("Channel, World and Server-wide timer management.");
+        addFeature("Thoroughly reviewed encapsulation for player stats.");
         addFeature("Heavily reviewed future task management, spawning much less threads and relieving task overload on the TimerManager.");
 }
 
diff --git a/scripts/quest/1021.js b/scripts/quest/1021.js
index e7a4a8924..143f404c8 100644
--- a/scripts/quest/1021.js
+++ b/scripts/quest/1021.js
@@ -49,9 +49,8 @@ function start(mode, type, selection) {
         else if (status == 2)
             qm.sendAcceptDecline("So..... Let me just do this for fun! Abaracadabra~!");
         else if (status == 3) {
-            if (qm.c.getPlayer().getHp() >= 50) {
-                qm.c.getPlayer().setHp(25);
-                qm.c.getPlayer().updateSingleStat(MapleStat.HP, 25);
+            if (qm.getPlayer().getHp() >= 50) {
+                qm.getPlayer().updateHp(25);
             }
             
             if (!qm.haveItem(2010007)) {
diff --git a/scripts/quest/21010.js b/scripts/quest/21010.js
index 831757491..2f30a5eef 100644
--- a/scripts/quest/21010.js
+++ b/scripts/quest/21010.js
@@ -46,9 +46,8 @@ function start(mode, type, selection) {
     } else if (status == 3) { 
 	qm.sendAcceptDecline("Oh, but it seems our hero has become very weak since the Black Mage's curse. It's only makes sense, considering that the hero has been asleep for hundreds of years. #bHere, I'll give you a HP Recovery Potion.#k");//nexon probably forgot to remove the '.' before '#k', lol	
     } else if (status == 4) {
-       	if (qm.c.getPlayer().getHp() >= 50) {
-            	qm.c.getPlayer().setHp(25);
-            	qm.c.getPlayer().updateSingleStat(MapleStat.HP, 25);
+       	if (qm.getPlayer().getHp() >= 50) {
+            	qm.getPlayer().updateHp(25);
         } 
 	if (!qm.isQuestStarted(21010) && !qm.isQuestCompleted(21010)) {
         	qm.gainItem(2000022, 1);
@@ -59,8 +58,8 @@ function start(mode, type, selection) {
 	qm.sendNextPrev("#b(How do I drink the potion? I don't remember..)", 3);
     } else if (status == 6) {	
 	qm.guideHint(14);
-        qm.dispose();		
-	}	
+        qm.dispose();
+    }	
 }
 
 function end(mode, type, selection) {
diff --git a/sql/db_database.sql b/sql/db_database.sql
index 57a1499d1..589c9cf17 100644
--- a/sql/db_database.sql
+++ b/sql/db_database.sql
@@ -55,11 +55,11 @@ CREATE TABLE IF NOT EXISTS `alliance` (
   `capacity` int(10) unsigned NOT NULL DEFAULT '2',
   `notice` varchar(20) NOT NULL DEFAULT '',
 
-  `rank1` varchar(11) NOT NULL DEFAULT '',
-  `rank2` varchar(11) NOT NULL DEFAULT '',
-  `rank3` varchar(11) NOT NULL DEFAULT '',
-  `rank4` varchar(11) NOT NULL DEFAULT '',
-  `rank5` varchar(11) NOT NULL DEFAULT '',
+  `rank1` varchar(11) NOT NULL DEFAULT 'Master',
+  `rank2` varchar(11) NOT NULL DEFAULT 'Jr. Master',
+  `rank3` varchar(11) NOT NULL DEFAULT 'Member',
+  `rank4` varchar(11) NOT NULL DEFAULT 'Member',
+  `rank5` varchar(11) NOT NULL DEFAULT 'Member',
   PRIMARY KEY (`id`),
   INDEX (name)
 ) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;
diff --git a/src/client/AbstractCharacterListener.java b/src/client/AbstractCharacterListener.java
new file mode 100644
index 000000000..439d52a07
--- /dev/null
+++ b/src/client/AbstractCharacterListener.java
@@ -0,0 +1,30 @@
+/*
+    This file is part of the HeavenMS MapleStory Server
+    Copyleft (L) 2016 - 2018 RonanLana
+
+    This program is free software: you can redistribute it and/or modify
+    it under the terms of the GNU Affero General Public License as
+    published by the Free Software Foundation version 3 as published by
+    the Free Software Foundation. You may not use, modify or distribute
+    this program under any other version of the GNU Affero General Public
+    License.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU Affero General Public License for more details.
+
+    You should have received a copy of the GNU Affero General Public License
+    along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+package client;
+
+/**
+ *
+ * @author Ronan
+ */
+public interface AbstractCharacterListener {
+    public void onHpChanged(int oldHp);
+    public void onHpmpPoolUpdate();
+    public void onAnnounceStatPoolUpdate();
+}
diff --git a/src/client/AbstractMapleCharacterObject.java b/src/client/AbstractMapleCharacterObject.java
new file mode 100644
index 000000000..a7a422391
--- /dev/null
+++ b/src/client/AbstractMapleCharacterObject.java
@@ -0,0 +1,712 @@
+/*
+    This file is part of the HeavenMS MapleStory Server
+    Copyleft (L) 2016 - 2018 RonanLana
+
+    This program is free software: you can redistribute it and/or modify
+    it under the terms of the GNU Affero General Public License as
+    published by the Free Software Foundation version 3 as published by
+    the Free Software Foundation. You may not use, modify or distribute
+    this program under any other version of the GNU Affero General Public
+    License.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU Affero General Public License for more details.
+
+    You should have received a copy of the GNU Affero General Public License
+    along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+package client;
+
+import constants.GameConstants;
+import constants.ServerConstants;
+import java.util.Arrays;
+import java.util.HashMap;
+import java.util.Map;
+import java.util.concurrent.locks.Lock;
+import java.util.concurrent.locks.ReentrantReadWriteLock;
+import java.util.concurrent.locks.ReentrantReadWriteLock.ReadLock;
+import java.util.concurrent.locks.ReentrantReadWriteLock.WriteLock;
+import net.server.audit.locks.MonitoredLockType;
+import net.server.audit.locks.MonitoredReentrantReadWriteLock;
+import net.server.audit.locks.factory.MonitoredReentrantLockFactory;
+import server.maps.AbstractAnimatedMapleMapObject;
+
+/**
+ *
+ * @author RonanLana
+ */
+public abstract class AbstractMapleCharacterObject extends AbstractAnimatedMapleMapObject {
+    protected int str, dex, luk, int_, hp, maxhp, mp, maxmp;
+    protected int hpMpApUsed, remainingAp;
+    protected int[] remainingSp = new int[10];
+    protected transient int clientmaxhp, clientmaxmp, localmaxhp = 50, localmaxmp = 5;
+    
+    private AbstractCharacterListener listener = null;
+    protected Map<MapleStat, Integer> statUpdates = new HashMap<>();
+    
+    protected Lock effLock = MonitoredReentrantLockFactory.createLock(MonitoredLockType.CHARACTER_EFF, true);
+    protected ReadLock statRlock;
+    protected WriteLock statWlock;
+    
+    protected AbstractMapleCharacterObject() {
+        ReentrantReadWriteLock locks = new MonitoredReentrantReadWriteLock(MonitoredLockType.CHARACTER_STA, true);
+        statRlock = locks.readLock();
+        statWlock = locks.writeLock();
+        
+        for (int i = 0; i < remainingSp.length; i++) {
+            remainingSp[i] = 0;
+        }
+    }
+    
+    protected void setListener(AbstractCharacterListener listener) {
+        this.listener = listener;
+    }
+    
+    public int getStr() {
+        statRlock.lock();
+        try {
+            return str;
+        } finally {
+            statRlock.unlock();
+        }
+    }
+    
+    public int getDex() {
+        statRlock.lock();
+        try {
+            return dex;
+        } finally {
+            statRlock.unlock();
+        }
+    }
+    
+    public int getInt() {
+        statRlock.lock();
+        try {
+            return int_;
+        } finally {
+            statRlock.unlock();
+        }
+    }
+
+    public int getLuk() {
+        statRlock.lock();
+        try {
+            return luk;
+        } finally {
+            statRlock.unlock();
+        }
+    }
+    
+    public int getRemainingAp() {
+        statRlock.lock();
+        try {
+            return remainingAp;
+        } finally {
+            statRlock.unlock();
+        }
+    }
+    
+    protected int getRemainingSp(int jobid) {
+        statRlock.lock();
+        try {
+            return remainingSp[GameConstants.getSkillBook(jobid)];
+        } finally {
+            statRlock.unlock();
+        }
+    }
+
+    public int[] getRemainingSps() {
+        statRlock.lock();
+        try {
+            return Arrays.copyOf(remainingSp, remainingSp.length);
+        } finally {
+            statRlock.unlock();
+        }
+    }
+    
+    public int getHpMpApUsed() {
+        statRlock.lock();
+        try {
+            return hpMpApUsed;
+        } finally {
+            statRlock.unlock();
+        }
+    }
+    
+    public boolean isAlive() {
+        statRlock.lock();
+        try {
+            return hp > 0;
+        } finally {
+            statRlock.unlock();
+        }
+    }
+    
+    public int getHp() {
+        statRlock.lock();
+        try {
+            return hp;
+        } finally {
+            statRlock.unlock();
+        }
+    }
+    
+    public int getMp() {
+        statRlock.lock();
+        try {
+            return mp;
+        } finally {
+            statRlock.unlock();
+        }
+    }
+    
+    public int getMaxHp() {
+        statRlock.lock();
+        try {
+            return maxhp;
+        } finally {
+            statRlock.unlock();
+        }
+    }
+    
+    public int getMaxMp() {
+        statRlock.lock();
+        try {
+            return maxmp;
+        } finally {
+            statRlock.unlock();
+        }
+    }
+    
+    public int getClientMaxHp() {
+        return clientmaxhp;
+    }
+    
+    public int getClientMaxMp() {
+        return clientmaxmp;
+    }
+    
+    public int getCurrentMaxHp() {
+        return localmaxhp;
+    }
+
+    public int getCurrentMaxMp() {
+        return localmaxmp;
+    }
+    
+    private void setHpMpApUsed(int mpApUsed) {
+        this.hpMpApUsed = mpApUsed;
+    }
+    
+    private void dispatchHpChanged(int oldHp) {
+        listener.onHpChanged(oldHp);
+    }
+    
+    private void dispatchHpmpPoolUpdated() {
+        listener.onHpmpPoolUpdate();
+    }
+    
+    private void dispatchStatPoolUpdateAnnounced() {
+        listener.onAnnounceStatPoolUpdate();
+    }
+    
+    protected void setHp(int newHp) {
+        int oldHp = hp;
+        
+        int thp = newHp;
+        if (thp < 0) {
+            thp = 0;
+        } else if (thp > localmaxhp) {
+            thp = localmaxhp;
+        }
+        this.hp = thp;
+        
+        dispatchHpChanged(oldHp);
+    }
+
+    protected void setMp(int newMp) {
+        int tmp = newMp;
+        if (tmp < 0) {
+            tmp = 0;
+        } else if (tmp > localmaxmp) {
+            tmp = localmaxmp;
+        }
+        this.mp = tmp;
+    }
+    
+    private void setRemainingAp(int remainingAp) {
+        this.remainingAp = remainingAp;
+    }
+    
+    private void setRemainingSp(int remainingSp, int skillbook) {
+        this.remainingSp[skillbook] = remainingSp;
+    }
+    
+    protected void setMaxHp(int hp_) {
+        this.maxhp = hp_;
+        this.clientmaxhp = Math.min(30000, hp_);
+    }
+    
+    protected void setMaxMp(int mp_) {
+        this.maxmp = mp_;
+        this.clientmaxmp = Math.min(30000, mp_);
+    }
+    
+    private static long calcStatPoolNode(long v, int displacement) {
+        if (v > Short.MAX_VALUE) {
+            v = Short.MAX_VALUE;
+        } else if (v < Short.MIN_VALUE) {
+            v = Short.MIN_VALUE;
+        }
+        
+        return ((v & 0x0FFFF) << displacement);
+    }
+    
+    private static long calcStatPoolLong(int v1, int v2, int v3, int v4) {
+        long ret = 0;
+        
+        ret |= calcStatPoolNode(v1, 48);
+        ret |= calcStatPoolNode(v2, 32);
+        ret |= calcStatPoolNode(v3, 16);
+        ret |= calcStatPoolNode(v4, 0);
+        
+        return ret;
+    }
+    
+    private void changeStatPool(Long hpMpPool, Long strDexIntLuk, Long newSp, int newAp, boolean silent) {
+        effLock.lock();
+        statWlock.lock();
+        try {
+            statUpdates.clear();
+            boolean poolUpdate = false;
+
+            if (hpMpPool != null) {
+                short newHp = (short) (hpMpPool >> 48);
+                short newMp = (short) (hpMpPool >> 32);
+                short newMaxHp = (short) (hpMpPool >> 16);
+                short newMaxMp = (short) (hpMpPool.shortValue());
+                
+                if (newMaxHp != Short.MIN_VALUE) {
+                    if (newMaxHp < 50) {
+                        newMaxHp = 50;
+                    }
+
+                    poolUpdate = true;
+                    setMaxHp(newMaxHp);
+                    statUpdates.put(MapleStat.MAXHP, clientmaxhp);
+                    statUpdates.put(MapleStat.HP, hp);
+                }
+
+                if (newHp != Short.MIN_VALUE) {
+                    setHp(newHp);
+                    statUpdates.put(MapleStat.HP, hp);
+                }
+
+                if (newMaxMp != Short.MIN_VALUE) {
+                    if (newMaxMp < 5) {
+                        newMaxMp = 5;
+                    }
+
+                    poolUpdate = true;
+                    setMaxMp(newMaxMp);
+                    statUpdates.put(MapleStat.MAXMP, clientmaxmp);
+                    statUpdates.put(MapleStat.MP, mp);
+                }
+
+                if (newMp != Short.MIN_VALUE) {
+                    setMp(newMp);
+                    statUpdates.put(MapleStat.MP, mp);
+                }
+            }
+
+            if (strDexIntLuk != null) {
+                short newStr = (short) (strDexIntLuk >> 48);
+                short newDex = (short) (strDexIntLuk >> 32);
+                short newInt = (short) (strDexIntLuk >> 16);
+                short newLuk = (short) (strDexIntLuk.shortValue());
+
+                if (newStr >= 4) {
+                    setStr(newStr);
+                    statUpdates.put(MapleStat.STR, str);
+                }
+
+                if (newDex >= 4) {
+                    setDex(newDex);
+                    statUpdates.put(MapleStat.DEX, dex);
+                }
+
+                if (newInt >= 4) {
+                    setInt(newInt);
+                    statUpdates.put(MapleStat.INT, int_);
+                }
+
+                if (newLuk >= 4) {
+                    setLuk(newLuk);
+                    statUpdates.put(MapleStat.LUK, luk);
+                }
+
+                if (newAp >= 0) {
+                    setRemainingAp(newAp);
+                    statUpdates.put(MapleStat.AVAILABLEAP, remainingAp);
+                }
+
+                poolUpdate = true;  // recalc stats
+            }
+            
+            if (newSp != null) {
+                short sp = (short) (newSp >> 16);
+                short skillbook = (short) (newSp.shortValue());
+                
+                setRemainingSp(sp, skillbook);
+                statUpdates.put(MapleStat.AVAILABLESP, remainingSp[skillbook]);
+            }
+
+            if (!statUpdates.isEmpty()) {
+                if (poolUpdate) {
+                    dispatchHpmpPoolUpdated();
+                }
+
+                if (!silent) {
+                    dispatchStatPoolUpdateAnnounced();
+                }
+            }
+        } finally {
+            statWlock.unlock();
+            effLock.unlock();
+        }
+    }
+    
+    public void healHpMp() {
+        updateHpMp(30000);
+    }
+    
+    public void updateHpMp(int x) {
+        updateHpMp(x, x);
+    }
+    
+    public void updateHpMp(int newhp, int newmp) {
+        changeHpMp(newhp, newmp, false);
+    }
+    
+    protected void changeHpMp(int newhp, int newmp, boolean silent) {
+        changeHpMpPool(newhp, newmp, Short.MIN_VALUE, Short.MIN_VALUE, silent);
+    }
+    
+    private void changeHpMpPool(int hp, int mp, int maxhp, int maxmp, boolean silent) {
+        long hpMpPool = calcStatPoolLong(hp, mp, maxhp, maxmp);
+        changeStatPool(hpMpPool, null, null, -1, silent);
+    }
+    
+    public void updateHp(int hp) {
+        updateHpMaxHp(hp, Short.MIN_VALUE);
+    }
+    
+    public void updateMaxHp(int maxhp) {
+        updateHpMaxHp(Short.MIN_VALUE, maxhp);
+    }
+    
+    public void updateHpMaxHp(int hp, int maxhp) {
+        changeHpMpPool(hp, Short.MIN_VALUE, maxhp, Short.MIN_VALUE, false);
+    }
+    
+    public void updateMp(int mp) {
+        updateMpMaxMp(mp, Short.MIN_VALUE);
+    }
+    
+    public void updateMaxMp(int maxmp) {
+        updateMpMaxMp(Short.MIN_VALUE, maxmp);
+    }
+    
+    public void updateMpMaxMp(int mp, int maxmp) {
+        changeHpMpPool(Short.MIN_VALUE, mp, Short.MIN_VALUE, maxmp, false);
+    }
+    
+    public void updateMaxHpMaxMp(int maxhp, int maxmp) {
+        changeHpMpPool(Short.MIN_VALUE, Short.MIN_VALUE, maxhp, maxmp, false);
+    }
+    
+    protected void enforceMaxHpMp() {
+        effLock.lock();
+        statWlock.lock();
+        try {
+            if (mp > localmaxmp || hp > localmaxhp) {
+                changeHpMp(hp, mp, false);
+            }
+        } finally {
+            statWlock.unlock();
+            effLock.unlock();
+        }
+    }
+    
+    public int safeAddHP(int delta) {
+        effLock.lock();
+        statWlock.lock();
+        try {
+            if (hp + delta <= 0) {
+                delta = -hp + 1;
+            }
+
+            addHP(delta);
+            return delta;
+        } finally {
+            statWlock.unlock();
+            effLock.unlock();
+        }
+    }
+    
+    public void addHP(int delta) {
+        effLock.lock();
+        statWlock.lock();
+        try {
+            updateHp(hp + delta);
+        } finally {
+            statWlock.unlock();
+            effLock.unlock();
+        }
+    }
+    
+    public void addMP(int delta) {
+        effLock.lock();
+        statWlock.lock();
+        try {
+            updateMp(mp + delta);
+        } finally {
+            statWlock.unlock();
+            effLock.unlock();
+        }
+    }
+
+    public void addMPHP(int hpDelta, int mpDelta) {
+        effLock.lock();
+        statWlock.lock();
+        try {
+            updateHpMp(hp + hpDelta, mp + mpDelta);
+        } finally {
+            statWlock.unlock();
+            effLock.unlock();
+        }
+    }
+    
+    protected void addMaxMPMaxHP(int hpdelta, int mpdelta, boolean silent) {
+        effLock.lock();
+        statWlock.lock();
+        try {
+            changeHpMpPool(Short.MIN_VALUE, Short.MIN_VALUE, maxhp + hpdelta, maxmp + mpdelta, silent);
+        } finally {
+            statWlock.unlock();
+            effLock.unlock();
+        }
+    }
+    
+    public void addMaxHP(int delta) {
+        effLock.lock();
+        statWlock.lock();
+        try {
+            updateMaxHp(maxhp + delta);
+        } finally {
+            statWlock.unlock();
+            effLock.unlock();
+        }
+    }
+    
+    public void addMaxMP(int delta) {
+        effLock.lock();
+        statWlock.lock();
+        try {
+            updateMaxMp(maxmp + delta);
+        } finally {
+            statWlock.unlock();
+            effLock.unlock();
+        }
+    }
+    
+    private void setStr(int str) {
+        this.str = str;
+    }
+    
+    private void setDex(int dex) {
+        this.dex = dex;
+    }
+    
+    private void setInt(int int_) {
+        this.int_ = int_;
+    }
+    
+    private void setLuk(int luk) {
+        this.luk = luk;
+    }
+    
+    public boolean assignStr(int x) {
+        return assignStrDexIntLuk(x, Short.MIN_VALUE, Short.MIN_VALUE, Short.MIN_VALUE);
+    }
+    
+    public boolean assignDex(int x) {
+        return assignStrDexIntLuk(Short.MIN_VALUE, x, Short.MIN_VALUE, Short.MIN_VALUE);
+    }
+    
+    public boolean assignInt(int x) {
+        return assignStrDexIntLuk(Short.MIN_VALUE, Short.MIN_VALUE, x, Short.MIN_VALUE);
+    }
+    
+    public boolean assignLuk(int x) {
+        return assignStrDexIntLuk(Short.MIN_VALUE, Short.MIN_VALUE, Short.MIN_VALUE, x);
+    }
+    
+    public boolean assignHP(int deltaHP, int deltaAp) {
+        effLock.lock();
+        statWlock.lock();
+        try {
+            if (remainingAp - deltaAp < 0 || hpMpApUsed + deltaAp < 0 || maxhp >= 30000) {
+                return false;
+            }
+            
+            long hpMpPool = calcStatPoolLong(Short.MIN_VALUE, Short.MIN_VALUE, maxhp + deltaHP, maxmp);
+            long strDexIntLuk = calcStatPoolLong(str, dex, int_, luk);
+
+            changeStatPool(hpMpPool, strDexIntLuk, null, remainingAp - deltaAp, false);
+            setHpMpApUsed(hpMpApUsed + deltaAp);
+            return true;
+        } finally {
+            statWlock.unlock();
+            effLock.unlock();
+        }
+    }
+    
+    public boolean assignMP(int deltaMP, int deltaAp) {
+        effLock.lock();
+        statWlock.lock();
+        try {
+            if (remainingAp - deltaAp < 0 || hpMpApUsed + deltaAp < 0 || maxmp >= 30000) {
+                return false;
+            }
+
+            long hpMpPool = calcStatPoolLong(Short.MIN_VALUE, Short.MIN_VALUE, maxhp, maxmp + deltaMP);
+            long strDexIntLuk = calcStatPoolLong(str, dex, int_, luk);
+
+            changeStatPool(hpMpPool, strDexIntLuk, null, remainingAp - deltaAp, false);
+            setHpMpApUsed(hpMpApUsed + deltaAp);
+            return true;
+        } finally {
+            statWlock.unlock();
+            effLock.unlock();
+        }
+    }
+    
+    private static int apAssigned(int x) {
+        return x != Short.MIN_VALUE ? x : 0;
+    }
+    
+    public boolean assignStrDexIntLuk(int deltaStr, int deltaDex, int deltaInt, int deltaLuk) {
+        effLock.lock();
+        statWlock.lock();
+        try {
+            int apUsed = apAssigned(deltaStr) + apAssigned(deltaDex) + apAssigned(deltaInt) + apAssigned(deltaLuk);
+            if (apUsed > remainingAp) {
+                return false;
+            }
+
+            int newStr = str + deltaStr, newDex = dex + deltaDex, newInt = int_ + deltaInt, newLuk = luk + deltaLuk;
+            if (newStr < 4 && deltaStr != Short.MIN_VALUE || newStr > ServerConstants.MAX_AP) {
+                return false;
+            }
+
+            if (newDex < 4 && deltaDex != Short.MIN_VALUE || newDex > ServerConstants.MAX_AP) {
+                return false;
+            }
+
+            if (newInt < 4 && deltaInt != Short.MIN_VALUE || newInt > ServerConstants.MAX_AP) {
+                return false;
+            }
+
+            if (newLuk < 4 && deltaLuk != Short.MIN_VALUE || newLuk > ServerConstants.MAX_AP) {
+                return false;
+            }
+
+            int newAp = remainingAp - apUsed;
+            updateStrDexIntLuk(newStr, newDex, newInt, newLuk, newAp);
+            return true;
+        } finally {
+            statWlock.unlock();
+            effLock.unlock();
+        }
+    }
+    
+    public void updateStrDexIntLuk(int x) {
+        updateStrDexIntLuk(x, x, x, x, -1);
+    }
+    
+    public void changeRemainingAp(int x, boolean silent) {
+        effLock.lock();
+        statWlock.lock();
+        try {
+            changeStrDexIntLuk(str, dex, int_, luk, x, silent);
+        } finally {
+            statWlock.unlock();
+            effLock.unlock();
+        }
+    }
+    
+    public void gainAp(int deltaAp, boolean silent) {
+        effLock.lock();
+        statWlock.lock();
+        try {
+            changeRemainingAp(Math.max(0, remainingAp + deltaAp), silent);
+        } finally {
+            statWlock.unlock();
+            effLock.unlock();
+        }
+    }
+    
+    protected void updateStrDexIntLuk(int str, int dex, int int_, int luk, int remainingAp) {
+        changeStrDexIntLuk(str, dex, int_, luk, remainingAp, false);
+    }
+    
+    private void changeStrDexIntLuk(int str, int dex, int int_, int luk, int remainingAp, boolean silent) {
+        long strDexIntLuk = calcStatPoolLong(str, dex, int_, luk);
+        changeStatPool(null, strDexIntLuk, null, remainingAp, silent);
+    }
+    
+    private void changeStrDexIntLukSp(int str, int dex, int int_, int luk, int remainingAp, int remainingSp, int skillbook, boolean silent) {
+        long strDexIntLuk = calcStatPoolLong(str, dex, int_, luk);
+        long sp = calcStatPoolLong(0, 0, remainingSp, skillbook);
+        changeStatPool(null, strDexIntLuk, sp, remainingAp, silent);
+    }
+    
+    protected void updateStrDexIntLukSp(int str, int dex, int int_, int luk, int remainingAp, int remainingSp, int skillbook) {
+        changeStrDexIntLukSp(str, dex, int_, luk, remainingAp, remainingSp, skillbook, false);
+    }
+    
+    protected void setRemainingSp(int[] sps) {
+        effLock.lock();
+        statWlock.lock();
+        try {
+            System.arraycopy(sps, 0, remainingSp, 0, sps.length);
+        } finally {
+            statWlock.unlock();
+            effLock.unlock();
+        }
+    }
+    
+    protected void updateRemainingSp(int remainingSp, int skillbook) {
+        changeRemainingSp(remainingSp, skillbook, false);
+    }
+    
+    protected void changeRemainingSp(int remainingSp, int skillbook, boolean silent) {
+        long sp = calcStatPoolLong(0, 0, remainingSp, skillbook);
+        changeStatPool(null, null, sp, Short.MIN_VALUE, silent);
+    }
+    
+    public void gainSp(int deltaSp, int skillbook, boolean silent) {
+        effLock.lock();
+        statWlock.lock();
+        try {
+            changeRemainingSp(Math.max(0, remainingSp[skillbook] + deltaSp), skillbook, silent);
+        } finally {
+            statWlock.unlock();
+            effLock.unlock();
+        }
+    }
+}
diff --git a/src/client/MapleCharacter.java b/src/client/MapleCharacter.java
index b0038282e..ef7ad023e 100644
--- a/src/client/MapleCharacter.java
+++ b/src/client/MapleCharacter.java
@@ -16,6 +16,7 @@
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU Affero General Public License for more details.
 
+
  You should have received a copy of the GNU Affero General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
  */
@@ -78,7 +79,6 @@
 import server.life.MapleMonster;
 import server.life.MobSkill;
 import server.loot.MapleLootManager;
-import server.maps.AbstractAnimatedMapleMapObject;
 import server.maps.MapleHiredMerchant;
 import server.maps.MapleDoor;
 import server.maps.MapleDragon;
@@ -136,7 +136,6 @@
 import constants.skills.DawnWarrior;
 import constants.skills.Evan;
 import constants.skills.FPArchMage;
-import constants.skills.GM;
 import constants.skills.Hermit;
 import constants.skills.Hero;
 import constants.skills.ILArchMage;
@@ -151,8 +150,6 @@
 import constants.skills.Ranger;
 import constants.skills.Shadower;
 import constants.skills.Sniper;
-import constants.skills.Spearman;
-import constants.skills.SuperGM;
 import constants.skills.Swordsman;
 import constants.skills.ThunderBreaker;
 import net.server.channel.handlers.PartyOperationHandler;
@@ -162,27 +159,20 @@
 import net.server.audit.locks.MonitoredLockType;
 import net.server.audit.locks.factory.MonitoredReentrantLockFactory;
 
-public class MapleCharacter extends AbstractAnimatedMapleMapObject {
-    private static MapleItemInformationProvider ii = MapleItemInformationProvider.getInstance();
+public class MapleCharacter extends AbstractMapleCharacterObject {
+    private static final MapleItemInformationProvider ii = MapleItemInformationProvider.getInstance();
     private static final String LEVEL_200 = "[Congrats] %s has reached Level 200! Congratulate %s on such an amazing achievement!";
     private static final String[] BLOCKED_NAMES = {"admin", "owner", "moderator", "intern", "donor", "administrator", "help", "helper", "alert", "notice", "maplestory", "fuck", "wizet", "fucking", "negro", "fuk", "fuc", "penis", "pussy", "asshole", "gay",
         "nigger", "homo", "suck", "cum", "shit", "shitty", "condom", "security", "official", "rape", "nigga", "sex", "tit", "boner", "orgy", "clit", "asshole", "fatass", "bitch", "support", "gamemaster", "cock", "gaay", "gm",
         "operate", "master", "sysop", "party", "GameMaster", "community", "message", "event", "test", "meso", "Scania", "yata", "AsiaSoft", "henesys"};
     
     private int world;
-    private int accountid, id;
+    private int accountid, id, level;
     private int rank, rankMove, jobRank, jobRankMove;
-    private int level, str, dex, luk, int_, hp, maxhp, eqphp, mp, maxmp, eqpmp;
-    private int hpMpApUsed;
-    private int hair;
-    private int face;
-    private int remainingAp;
-    private int[] remainingSp = new int[10];
-    private int quest_fame;
-    private int fame;
+    private int gender, hair, face;
+    private int fame, quest_fame;
     private int initialSpawnPoint;
     private int mapid;
-    private int gender;
     private int currentPage, currentType = 0, currentTab = 1;
     private int itemEffect;
     private int guildid, guildRank, allianceRank;
@@ -204,8 +194,10 @@
     private int omokwins, omokties, omoklosses, matchcardwins, matchcardties, matchcardlosses;
     private int owlSearch;
     private long lastfametime, lastUsedCashItem, lastExpression = 0, lastHealed, lastBuyback = 0, lastDeathtime, lastMesoDrop = -1, jailExpiration = -1;
-    private transient int localmaxhp, localmaxmp, localstr, localdex, localluk, localint_, magic, watk;
-    private boolean hidden, canDoor = true, berserk, hasMerchant, hasSandboxItem = false, whiteChat = false;
+    private transient int localstr, localdex, localluk, localint_, localmagic, localwatk;
+    private transient int equipmaxhp, equipmaxmp, equipstr, equipdex, equipluk, equipint_, equipmagic, equipwatk, localchairhp, localchairmp;
+    private int localchairrate;
+    private boolean hidden, equipchanged = true, canDoor = true, berserk, hasMerchant, hasSandboxItem = false, whiteChat = false;
     private boolean equippedMesoMagnet = false, equippedItemPouch = false, equippedPetItemIgnore = false;
     private int linkedLevel = 0;
     private String linkedName = null;
@@ -279,7 +271,6 @@
     private ScheduledFuture<?> chairRecoveryTask = null;
     private ScheduledFuture<?> pendantOfSpirit = null; //1122017
     private Lock chrLock = MonitoredReentrantLockFactory.createLock(MonitoredLockType.CHARACTER_CHR, true);
-    private Lock effLock = MonitoredReentrantLockFactory.createLock(MonitoredLockType.CHARACTER_EFF, true);
     private Lock evtLock = MonitoredReentrantLockFactory.createLock(MonitoredLockType.CHARACTER_EVT, true);
     private Lock petLock = MonitoredReentrantLockFactory.createLock(MonitoredLockType.CHARACTER_PET, true); // for meso & quest tasks as well
     private Lock prtLock = MonitoredReentrantLockFactory.createLock(MonitoredLockType.CHARACTER_PRT);
@@ -323,14 +314,46 @@
     private long banishTime = 0;
     
     private MapleCharacter() {
+        super.setListener(new AbstractCharacterListener() {
+            @Override
+            public void onHpChanged(int oldHp) {
+                hpChangeAction(oldHp);
+            }
+            
+            @Override
+            public void onHpmpPoolUpdate() {
+                List<Pair<MapleStat, Integer>> hpmpupdate = recalcLocalStats();
+                for (Pair<MapleStat, Integer> p : hpmpupdate) {
+                    statUpdates.put(p.getLeft(), p.getRight());
+                }
+
+                if (hp > localmaxhp) {
+                    setHp(localmaxhp);
+                    statUpdates.put(MapleStat.HP, hp);
+                }
+
+                if (mp > localmaxmp) {
+                    setMp(localmaxmp);
+                    statUpdates.put(MapleStat.MP, mp);
+                }
+            }
+            
+            @Override
+            public void onAnnounceStatPoolUpdate() {
+                List<Pair<MapleStat, Integer>> statup = new ArrayList<>(8);
+                for (Map.Entry<MapleStat, Integer> s : statUpdates.entrySet()) {
+                    statup.add(new Pair<>(s.getKey(), s.getValue()));
+                }
+
+                announce(MaplePacketCreator.updatePlayerStats(statup, true, MapleCharacter.this));
+            }
+        });
+        
         useCS = false;
         
         setStance(0);
         inventory = new MapleInventory[MapleInventoryType.values().length];
         savedLocations = new SavedLocation[SavedLocationType.values().length];
-        for (int i = 0; i < remainingSp.length; i++) {
-            remainingSp[i] = 0;
-        }
         
         for (MapleInventoryType type : MapleInventoryType.values()) {
             byte b = 24;
@@ -391,9 +414,9 @@ public static MapleCharacter getDefault(MapleClient c) {
         ret.client = c;
         ret.gmLevel = 0;
         ret.hp = 50;
-        ret.maxhp = 50;
+        ret.setMaxHp(50);
         ret.mp = 5;
-        ret.maxmp = 5;
+        ret.setMaxMp(5);
         ret.str = 12;
         ret.dex = 5;
         ret.int_ = 4;
@@ -557,7 +580,7 @@ public void setPartnerId(int partnerid) {
     }
     
     public int getRelationshipId() {
-        return client.getWorldServer().getRelationshipId(id);
+        return getWorldServer().getRelationshipId(id);
     }
     
     public boolean isMarried() {
@@ -602,28 +625,11 @@ public void addFriendshipRing(MapleRing r) {
     public void addMarriageRing(MapleRing r) {
         marriageRing = r;
     }
-
-    public void addHP(int delta) {
-        setHp(hp + delta);
-        updateSingleStat(MapleStat.HP, hp);
-    }
-
+    
     public void addMesosTraded(int gain) {
         this.mesosTraded += gain;
     }
-
-    public void addMP(int delta) {
-        setMp(mp + delta);
-        updateSingleStat(MapleStat.MP, mp);
-    }
-
-    public void addMPHP(int hpDiff, int mpDiff) {
-        setHp(hp + hpDiff);
-        setMp(mp + mpDiff);
-        updateSingleStat(MapleStat.HP, getHp());
-        updateSingleStat(MapleStat.MP, getMp());
-    }
-
+    
     public void addPet(MaplePet pet) {
         petLock.lock();
         try {
@@ -637,80 +643,6 @@ public void addPet(MaplePet pet) {
             petLock.unlock();
         }
     }
-
-    public void addStat(int type, int up) {
-        if (type == 1) {
-            this.str += up;
-            updateSingleStat(MapleStat.STR, str);
-        } else if (type == 2) {
-            this.dex += up;
-            updateSingleStat(MapleStat.DEX, dex);
-        } else if (type == 3) {
-            this.int_ += up;
-            updateSingleStat(MapleStat.INT, int_);
-        } else if (type == 4) {
-            this.luk += up;
-            updateSingleStat(MapleStat.LUK, luk);
-        }
-        recalcLocalStats();
-    }
-
-    public static int addHP(MapleClient c) {
-        MapleCharacter player = c.getPlayer();
-        MapleJob jobtype = player.getJob();
-        int MaxHP = player.getMaxHp();
-        if (player.getHpMpApUsed() > 9999 || MaxHP >= 30000) {
-            return MaxHP;
-        }
-        if (jobtype.isA(MapleJob.BEGINNER)) {
-            MaxHP += 8;
-        } else if (jobtype.isA(MapleJob.WARRIOR) || jobtype.isA(MapleJob.DAWNWARRIOR1)) {
-            if (player.getSkillLevel(player.isCygnus() ? SkillFactory.getSkill(10000000) : SkillFactory.getSkill(1000001)) > 0) {
-                MaxHP += 20;
-            } else {
-                MaxHP += 8;
-            }
-        } else if (jobtype.isA(MapleJob.MAGICIAN) || jobtype.isA(MapleJob.BLAZEWIZARD1)) {
-            MaxHP += 6;
-        } else if (jobtype.isA(MapleJob.BOWMAN) || jobtype.isA(MapleJob.WINDARCHER1)) {
-            MaxHP += 8;
-        } else if (jobtype.isA(MapleJob.THIEF) || jobtype.isA(MapleJob.NIGHTWALKER1)) {
-            MaxHP += 8;
-        } else if (jobtype.isA(MapleJob.PIRATE) || jobtype.isA(MapleJob.THUNDERBREAKER1)) {
-            if (player.getSkillLevel(player.isCygnus() ? SkillFactory.getSkill(15100000) : SkillFactory.getSkill(5100000)) > 0) {
-                MaxHP += 18;
-            } else {
-                MaxHP += 8;
-            }
-        }
-        return MaxHP;
-    }
-
-    public static int addMP(MapleClient c) {
-        MapleCharacter player = c.getPlayer();
-        int MaxMP = player.getMaxMp();
-        if (player.getHpMpApUsed() > 9999 || player.getMaxMp() >= 30000) {
-            return MaxMP;
-        }
-        if (player.getJob().isA(MapleJob.BEGINNER) || player.getJob().isA(MapleJob.NOBLESSE) || player.getJob().isA(MapleJob.LEGEND)) {
-            MaxMP += 6;
-        } else if (player.getJob().isA(MapleJob.WARRIOR) || player.getJob().isA(MapleJob.DAWNWARRIOR1) || player.getJob().isA(MapleJob.ARAN1)) {
-            MaxMP += 2;
-        } else if (player.getJob().isA(MapleJob.MAGICIAN) || player.getJob().isA(MapleJob.BLAZEWIZARD1)) {
-            if (player.getSkillLevel(player.isCygnus() ? SkillFactory.getSkill(12000000) : SkillFactory.getSkill(2000001)) > 0) {
-                MaxMP += 18;
-            } else {
-                MaxMP += 14;
-            }
-
-        } else if (player.getJob().isA(MapleJob.BOWMAN) || player.getJob().isA(MapleJob.THIEF)) {
-            MaxMP += 10;
-        } else if (player.getJob().isA(MapleJob.PIRATE)) {
-            MaxMP += 14;
-        }
-
-        return MaxMP;
-    }
     
     public void addSummon(int id, MapleSummon summon) {
         summons.put(id, summon);
@@ -905,8 +837,6 @@ public void Hide(boolean hide, boolean login) {
                 for(MapleSummon ms: this.getSummonsValues()) {
                     getMap().broadcastNONGMMessage(this, MaplePacketCreator.spawnSummon(ms, false), false);
                 }
-                
-                updatePartyMemberHP();
             } else {
                 this.hidden = true;
                 announce(MaplePacketCreator.getGMEffect(0x10, (byte) 1));
@@ -947,8 +877,7 @@ public void cancelMagicDoor() {
 
     private void cancelPlayerBuffs(List<MapleBuffStat> buffstats) {
         if (client.getChannelServer().getPlayerStorage().getCharacterById(getId()) != null) {
-            recalcLocalStats();
-            enforceMaxHpMp();
+            updateLocalStats();
             client.announce(MaplePacketCreator.cancelBuff(buffstats));
             if (buffstats.size() > 0) {
                 getMap().broadcastMessage(this, MaplePacketCreator.cancelForeignBuff(getId(), buffstats), false);
@@ -1090,81 +1019,92 @@ public void setMasteries(int jobId) {
         }
     }
 
-    public void changeJob(MapleJob newJob) {
+    public synchronized void changeJob(MapleJob newJob) {
         if (newJob == null) {
             return;//the fuck you doing idiot!
         }
         
         this.job = newJob;
-        remainingSp[GameConstants.getSkillBook(newJob.getId())] += 1;
+        
+        int spGain = 1;
         if (GameConstants.hasSPTable(newJob)) {
-            remainingSp[GameConstants.getSkillBook(newJob.getId())] += 2;
+            spGain += 2;
         } else {
             if (newJob.getId() % 10 == 2) {
-                remainingSp[GameConstants.getSkillBook(newJob.getId())] += 2;
+                spGain += 2;
             }
         }
+        gainSp(spGain, GameConstants.getSkillBook(newJob.getId()), true);
+        
         if (newJob.getId() % 10 > 1) {
-            this.remainingAp += 5;
+            gainAp(5, true);
         }
+        
+        if (!isGM()) {
+            for (byte i = 1; i < 5; i++) {
+                gainSlots(i, 4, true);
+            }
+        }
+        
+        int addhp = 0, addmp = 0;
         int job_ = job.getId() % 1000; // lame temp "fix"
         if (job_ == 100) {                      // 1st warrior
-            maxhp += Randomizer.rand(200, 250);
+            addhp += Randomizer.rand(200, 250);
         } else if (job_ == 200) {               // 1st mage
-            maxmp += Randomizer.rand(100, 150);
+            addmp += Randomizer.rand(100, 150);
         } else if (job_ % 100 == 0) {           // 1st others
-            maxhp += Randomizer.rand(100, 150);
-            maxhp += Randomizer.rand(25, 50);
+            addhp += Randomizer.rand(100, 150);
+            addhp += Randomizer.rand(25, 50);
         } else if (job_ > 0 && job_ < 200) {    // 2nd~4th warrior
-            maxhp += Randomizer.rand(300, 350);
+            addhp += Randomizer.rand(300, 350);
         } else if (job_ < 300) {                // 2nd~4th mage
-            maxmp += Randomizer.rand(450, 500);
+            addmp += Randomizer.rand(450, 500);
         } else if (job_ > 0) {                  // 2nd~4th others
-            maxhp += Randomizer.rand(300, 350);
-            maxmp += Randomizer.rand(150, 200);
+            addhp += Randomizer.rand(300, 350);
+            addmp += Randomizer.rand(150, 200);
         }
         
         /*
         //aran perks?
         int newJobId = newJob.getId();
         if(newJobId == 2100) {          // become aran1
-            maxhp += 275;
-            maxmp += 15;
+            addhp += 275;
+            addmp += 15;
         } else if(newJobId == 2110) {   // become aran2
-            maxmp += 275;
+            addmp += 275;
         } else if(newJobId == 2111) {   // become aran3
-            maxhp += 275;
-            maxmp += 275;
+            addhp += 275;
+            addmp += 275;
         }
         */
         
-        if (maxhp >= 30000) {
-            maxhp = 30000;
-        }
-        if (maxmp >= 30000) {
-            maxmp = 30000;
-        }
-        
-        if (!isGM()) {
-            for (byte i = 1; i < 5; i++) {
-                gainSlots(i, 4, true);
-            }
+        effLock.lock();
+        statWlock.lock();
+        try {
+            addMaxMPMaxHP(addhp, addmp, true);
+            recalcLocalStats();
+
+            List<Pair<MapleStat, Integer>> statup = new ArrayList<>(7);
+            statup.add(new Pair<>(MapleStat.HP, hp));
+            statup.add(new Pair<>(MapleStat.MP, mp));
+            statup.add(new Pair<>(MapleStat.MAXHP, clientmaxhp));
+            statup.add(new Pair<>(MapleStat.MAXMP, clientmaxmp));
+            statup.add(new Pair<>(MapleStat.AVAILABLEAP, remainingAp));
+            statup.add(new Pair<>(MapleStat.AVAILABLESP, remainingSp[GameConstants.getSkillBook(job.getId())]));
+            statup.add(new Pair<>(MapleStat.JOB, job.getId()));
+            client.announce(MaplePacketCreator.updatePlayerStats(statup, true, this));
+        } finally {
+            statWlock.unlock();
+            effLock.unlock();
         }
         
-        List<Pair<MapleStat, Integer>> statup = new ArrayList<>(5);
-        statup.add(new Pair<>(MapleStat.MAXHP, Integer.valueOf(maxhp)));
-        statup.add(new Pair<>(MapleStat.MAXMP, Integer.valueOf(maxmp)));
-        statup.add(new Pair<>(MapleStat.AVAILABLEAP, remainingAp));
-        statup.add(new Pair<>(MapleStat.AVAILABLESP, remainingSp[GameConstants.getSkillBook(job.getId())]));
-        statup.add(new Pair<>(MapleStat.JOB, Integer.valueOf(job.getId())));
-        client.announce(MaplePacketCreator.updatePlayerStats(statup, this));
+        silentPartyUpdate();
         
         if (dragon != null) {
             getMap().broadcastMessage(MaplePacketCreator.removeDragon(dragon.getObjectId()));
             dragon = null;
         }
-        recalcLocalStats();
-        silentPartyUpdate();
+        
         if (this.guildid > 0) {
             getGuild().broadcast(MaplePacketCreator.jobMessage(0, job.getId(), name), this.getId());
         }
@@ -1192,7 +1132,7 @@ public void broadcastAcquaintances(int type, String message) {
     }
     
     public void broadcastAcquaintances(byte[] packet) {
-        buddylist.broadcast(packet, client.getWorldServer().getPlayerStorage());
+        buddylist.broadcast(packet, getWorldServer().getPlayerStorage());
         
         if(family != null) {
             //family.broadcast(packet, id); not yet implemented
@@ -1602,7 +1542,7 @@ public void visitMap(MapleMap map) {
 
     public void notifyMapTransferToPartner(int mapid) {
         if(partnerId > 0) {
-            final MapleCharacter partner = client.getWorldServer().getPlayerStorage().getCharacterById(partnerId);
+            final MapleCharacter partner = getWorldServer().getPlayerStorage().getCharacterById(partnerId);
             if(partner != null && !partner.isAwayFromWorld()) {
                 partner.announce(Wedding.OnNotifyWeddingPartnerTransfer(id, mapid));
             }
@@ -1719,7 +1659,7 @@ public void checkBerserk(final boolean isHidden) {
             Skill BerserkX = SkillFactory.getSkill(DarkKnight.BERSERK);
             final int skilllevel = getSkillLevel(BerserkX);
             if (skilllevel > 0) {
-                berserk = chr.getHp() * 100 / chr.getMaxHp() < BerserkX.getEffect(skilllevel).getX();
+                berserk = chr.getHp() * 100 / chr.getCurrentMaxHp() < BerserkX.getEffect(skilllevel).getX();
                 berserkSchedule = TimerManager.getInstance().register(new Runnable() {
                     @Override
                     public void run() {
@@ -1736,7 +1676,7 @@ public void run() {
 
     public void checkMessenger() {
         if (messenger != null && messengerposition < 4 && messengerposition > -1) {
-            World worldz = Server.getInstance().getWorld(world);
+            World worldz = getWorldServer();
             worldz.silentJoinMessenger(messenger.getId(), new MapleMessengerCharacter(this, messengerposition), messengerposition);
             worldz.updateMessenger(getMessenger().getId(), name, client.getChannel());
         }
@@ -1758,21 +1698,21 @@ public void controlMonster(MapleMonster monster, boolean aggro) {
         client.announce(MaplePacketCreator.controlMonster(monster, false, aggro));
     }
     
-    private static boolean useItem(final MapleClient c, final int id) {
+    private boolean useItem(final int id) {
         if (id / 1000000 == 2) {
             if (ii.isConsumeOnPickup(id)) {
                 if (ItemConstants.isPartyItem(id)) {
-                    List<MapleCharacter> pchr = c.getPlayer().getPartyMembersOnSameMap();
+                    List<MapleCharacter> pchr = this.getPartyMembersOnSameMap();
                     
                     if(!ItemConstants.isPartyAllcure(id)) {
+                        MapleStatEffect mse = ii.getItemEffect(id);
+                        
                         if(!pchr.isEmpty()) {
                             for (MapleCharacter mc : pchr) {
-                                ii.getItemEffect(id).applyTo(mc);
-                                mc.checkBerserk(mc.isHidden());
+                                mse.applyTo(mc);
                             }
                         } else {
-                            ii.getItemEffect(id).applyTo(c.getPlayer());
-                            c.getPlayer().checkBerserk(c.getPlayer().isHidden());
+                            mse.applyTo(this);
                         }
                     } else {
                         if(!pchr.isEmpty()) {
@@ -1780,12 +1720,11 @@ private static boolean useItem(final MapleClient c, final int id) {
                                 mc.dispelDebuffs();
                             }
                         } else {
-                            c.getPlayer().dispelDebuffs();
+                            this.dispelDebuffs();
                         }
                     }
                 } else {
-                    ii.getItemEffect(id).applyTo(c.getPlayer());
-                    c.getPlayer().checkBerserk(c.getPlayer().isHidden());
+                    ii.getItemEffect(id).applyTo(this);
                 }
                 return true;
             }
@@ -1804,14 +1743,19 @@ public final void pickupItem(MapleMapObject ob, int petIndex) {     // yes, one
 		
         if (ob instanceof MapleMapItem) {
             MapleMapItem mapitem = (MapleMapItem) ob;
-            if(System.currentTimeMillis() - mapitem.getDropTime() < 900 || !mapitem.canBePickedBy(this)) {
+            if(Server.getInstance().getCurrentTime() - mapitem.getDropTime() < 900 || !mapitem.canBePickedBy(this)) {
                 client.announce(MaplePacketCreator.enableActions());
                 return;
             }
             
+            List<MapleCharacter> mpcs = new LinkedList<>();
+            if (mapitem.getMeso() > 0 && !mapitem.isPickedUp()) { 
+                mpcs = getPartyMembersOnSameMap();
+            }
+            
             mapitem.lockItem();
             try {
-                if(mapitem.isPickedUp()) {
+                if (mapitem.isPickedUp()) {
                     client.announce(MaplePacketCreator.showItemUnavailable());
                     client.announce(MaplePacketCreator.enableActions());
                     return;
@@ -1820,14 +1764,25 @@ public final void pickupItem(MapleMapObject ob, int petIndex) {     // yes, one
                 boolean isPet = petIndex > -1;
                 final byte[] pickupPacket = MaplePacketCreator.removeItemFromMap(mapitem.getObjectId(), (isPet) ? 5 : 2, this.getId(), isPet, petIndex);
 
+                Item mItem = mapitem.getItem();
                 boolean hasSpaceInventory = true;
-                if (mapitem.getItemId() == 4031865 || mapitem.getItemId() == 4031866 || mapitem.getMeso() > 0 || ii.isConsumeOnPickup(mapitem.getItemId()) || (hasSpaceInventory = MapleInventoryManipulator.checkSpace(client, mapitem.getItemId(), mapitem.getItem().getQuantity(), mapitem.getItem().getOwner()))) {
+                if (mapitem.getItemId() == 4031865 || mapitem.getItemId() == 4031866 || mapitem.getMeso() > 0 || ii.isConsumeOnPickup(mapitem.getItemId()) || (hasSpaceInventory = MapleInventoryManipulator.checkSpace(client, mapitem.getItemId(), mItem.getQuantity(), mItem.getOwner()))) {
                     int mapId = this.getMapId();
                     
                     if ((mapId > 209000000 && mapId < 209000016) || (mapId >= 990000500 && mapId <= 990000502)) {//happyville trees and guild PQ
                         if (!mapitem.isPlayerDrop() || mapitem.getDropper().getObjectId() == client.getPlayer().getObjectId()) {
                             if(mapitem.getMeso() > 0) {
-                                this.gainMeso(mapitem.getMeso(), true, true, false);
+                                if (!mpcs.isEmpty()) {
+                                    int mesosamm = mapitem.getMeso() / mpcs.size();
+                                    for (MapleCharacter partymem : mpcs) {
+                                        if (partymem.isLoggedinWorld()) {
+                                            partymem.gainMeso(mesosamm, true, true, false);
+                                        }
+                                    }
+                                } else {
+                                    this.gainMeso(mapitem.getMeso(), true, true, false);
+                                }
+                                
                                 this.getMap().pickItemDrop(pickupPacket, mapitem);
                             } else if(mapitem.getItemId() == 4031865 || mapitem.getItemId() == 4031866) {
                                 // Add NX to account, show effect and make item disappear
@@ -1837,7 +1792,7 @@ public final void pickupItem(MapleMapObject ob, int petIndex) {     // yes, one
                                 showHint("You have earned #e#b" + nxGain + " NX#k#n. (" + this.getCashShop().getCash(1) + " NX)", 300);
 
                                 this.getMap().pickItemDrop(pickupPacket, mapitem);
-                            } else if (MapleInventoryManipulator.addFromDrop(client, mapitem.getItem(), true)) {
+                            } else if (MapleInventoryManipulator.addFromDrop(client, mItem, true)) {
                                 this.getMap().pickItemDrop(pickupPacket, mapitem);
                             } else {
                                 client.announce(MaplePacketCreator.enableActions());
@@ -1859,38 +1814,18 @@ public final void pickupItem(MapleMapObject ob, int petIndex) {     // yes, one
                     }
                     
                     if (mapitem.getMeso() > 0) {
-                        prtLock.lock();
-                        try {
-                            if (this.party != null) {
-                                int mesosamm = mapitem.getMeso();
-                                if (mesosamm > 50000 * this.getMesoRate()) {
-                                    return;
-                                }
-                                
-                                MapleMap thisMap = this.getMap();
-                                int partynum = 0;
-                                Collection<MaplePartyCharacter> mpcs = this.party.getMembers();
-                                for (MaplePartyCharacter partymem : mpcs) {
-                                    if (partymem.getPlayer().isLoggedinWorld() && partymem.getMapId() == thisMap.getId() && partymem.getChannel() == client.getChannel()) {
-                                        partynum++;
-                                    }
-                                }
-                                for (MaplePartyCharacter partymem : mpcs) {
-                                    if (partymem.getPlayer().isLoggedinWorld() && partymem.getMapId() == thisMap.getId()) {
-                                        MapleCharacter somecharacter = client.getChannelServer().getPlayerStorage().getCharacterById(partymem.getId());
-                                        if (somecharacter != null) {
-                                            somecharacter.gainMeso(mesosamm / partynum, true, true, false);
-                                        }
-                                    }
+                        if (!mpcs.isEmpty()) {
+                            int mesosamm = mapitem.getMeso() / mpcs.size();
+                            for (MapleCharacter partymem : mpcs) {
+                                if (partymem.isLoggedinWorld()) {
+                                    partymem.gainMeso(mesosamm, true, true, false);
                                 }
-                            } else {
-                                this.gainMeso(mapitem.getMeso(), true, true, false);
                             }
-                        } finally {
-                            prtLock.unlock();
+                        } else {
+                            this.gainMeso(mapitem.getMeso(), true, true, false);
                         }
-                    } else if (mapitem.getItem().getItemId() / 10000 == 243) {
-                        MapleItemInformationProvider.scriptedItem info = ii.getScriptedItemInfo(mapitem.getItem().getItemId());
+                    } else if (mItem.getItemId() / 10000 == 243) {
+                        MapleItemInformationProvider.scriptedItem info = ii.getScriptedItemInfo(mItem.getItemId());
                         if (info.runOnPickup()) {
                             ItemScriptManager ism = ItemScriptManager.getInstance();
                             String scriptName = info.getScript();
@@ -1899,7 +1834,7 @@ public final void pickupItem(MapleMapObject ob, int petIndex) {     // yes, one
                             }
 
                         } else {
-                            if (!MapleInventoryManipulator.addFromDrop(client, mapitem.getItem(), true)) {
+                            if (!MapleInventoryManipulator.addFromDrop(client, mItem, true)) {
                                 client.announce(MaplePacketCreator.enableActions());
                                 return;
                             }
@@ -1910,12 +1845,12 @@ public final void pickupItem(MapleMapObject ob, int petIndex) {     // yes, one
                         this.getCashShop().gainCash(1, nxGain);
                         
                         showHint("You have earned #e#b" + nxGain + " NX#k#n. (" + this.getCashShop().getCash(1) + " NX)", 300);
-                    } else if (useItem(client, mapitem.getItem().getItemId())) {
-                        if (mapitem.getItem().getItemId() / 10000 == 238) {
-                            this.getMonsterBook().addCard(client, mapitem.getItem().getItemId());
+                    } else if (useItem(mItem.getItemId())) {
+                        if (mItem.getItemId() / 10000 == 238) {
+                            this.getMonsterBook().addCard(client, mItem.getItemId());
                         }
-                    } else if (MapleInventoryManipulator.addFromDrop(client, mapitem.getItem(), true)) {
-                    } else if (mapitem.getItem().getItemId() == 4031868) {
+                    } else if (MapleInventoryManipulator.addFromDrop(client, mItem, true)) {
+                    } else if (mItem.getItemId() == 4031868) {
                         this.getMap().broadcastMessage(MaplePacketCreator.updateAriantPQRanking(this.getName(), this.getItemQuantity(4031868, false), false));
                     } else {
                         client.announce(MaplePacketCreator.enableActions());
@@ -2019,7 +1954,7 @@ public void deleteBuddy(int otherCid) {
         BuddyList bl = getBuddylist();
         
         if (bl.containsVisible(otherCid)) {
-            notifyRemoteChannel(client, client.getWorldServer().find(otherCid), otherCid, BuddyList.BuddyOperation.DELETED);
+            notifyRemoteChannel(client, getWorldServer().find(otherCid), otherCid, BuddyList.BuddyOperation.DELETED);
         }
         bl.remove(otherCid);
         client.announce(MaplePacketCreator.updateBuddylist(getBuddylist().getBuddies()));
@@ -2243,25 +2178,100 @@ private void stopChairTask() {
         }
     }
     
+    private static Pair<Integer, Pair<Integer, Integer>> getChairTaskIntervalRate(int maxhp, int maxmp) {
+        float toHeal = Math.max(maxhp, maxmp);
+        float maxDuration = ServerConstants.CHAIR_EXTRA_HEAL_MAX_DELAY * 1000;
+        
+        int rate = 0;
+        int minRegen = 1, maxRegen = (256 * ServerConstants.CHAIR_EXTRA_HEAL_MULTIPLIER) - 1, midRegen = 1;
+        while (minRegen < maxRegen) {
+            midRegen = (int) ((minRegen + maxRegen) * 0.94);
+            
+            float procs = toHeal / midRegen;
+            float newRate = maxDuration / procs;
+            rate = (int) newRate;
+            
+            if (newRate < 420) {
+                minRegen = (int) (1.2 * midRegen);
+            } else if (newRate > 5000) {
+                maxRegen = (int) (0.8 * midRegen);
+            } else {
+                break;
+            }
+        }
+        
+        float procs = maxDuration / rate;
+        int hpRegen, mpRegen;
+        if (maxhp > maxmp) {
+            hpRegen = midRegen;
+            mpRegen = (int) Math.ceil(maxmp / procs);
+        } else {
+            hpRegen = (int) Math.ceil(maxhp / procs);
+            mpRegen = midRegen;
+        }
+        
+        return new Pair<>(rate, new Pair<>(hpRegen, mpRegen));
+    }
+    
+    private void updateChairHealStats() {
+        statRlock.lock();
+        try {
+            if (localchairrate != -1) {
+                return;
+            }
+        } finally {
+            statRlock.unlock();
+        }
+        
+        effLock.lock();
+        statWlock.lock();
+        try {
+            Pair<Integer, Pair<Integer, Integer>> p = getChairTaskIntervalRate(localmaxhp, localmaxmp);
+
+            localchairrate = p.getLeft();
+            localchairhp = p.getRight().getLeft();
+            localchairmp = p.getRight().getRight();
+        } finally {
+            statWlock.unlock();
+            effLock.unlock();
+        }
+    }
+    
     private void startChairTask() {
-        if(chair.get() == 0) return;
+        if (chair.get() == 0) return;
         
-        final int healInterval = 5000;
-        final byte healHP = (byte) Math.max(ServerConstants.CHAIR_EXTRA_HEAL_HP, 1);
-        final byte healMP = (byte) Math.max(ServerConstants.CHAIR_EXTRA_HEAL_MP, 0);
+        int healInterval;
+        effLock.lock();
+        try {
+            updateChairHealStats();
+            healInterval = localchairrate;
+        } finally {
+            effLock.unlock();
+        }
         
         chrLock.lock();
         try {
+            if (chairRecoveryTask != null) {
+                stopChairTask();
+            }
+            
             chairRecoveryTask = TimerManager.getInstance().register(new Runnable() {
                 @Override
                 public void run() {
-                    if(hp < localmaxhp) {
-                        client.announce(MaplePacketCreator.showOwnRecovery(healHP));
-                        getMap().broadcastMessage(MapleCharacter.this, MaplePacketCreator.showRecovery(id, healHP), false);
+                    updateChairHealStats();
+                    final int healHP = localchairhp;
+                    final int healMP = localchairmp;
+                    
+                    if(MapleCharacter.this.getHp() < localmaxhp) {
+                        byte recHP = (byte) (healHP / ServerConstants.CHAIR_EXTRA_HEAL_MULTIPLIER);
+                        
+                        client.announce(MaplePacketCreator.showOwnRecovery(recHP));
+                        getMap().broadcastMessage(MapleCharacter.this, MaplePacketCreator.showRecovery(id, recHP), false);
+                    } else if (MapleCharacter.this.getMp() >= localmaxmp) {
+                        stopChairTask();    // optimizing schedule management when player is already with full pool.
                     }
 
-                    addHP(healHP);
-                    addMP(healMP);
+                    addMPHP(healHP, healMP);
                 }
             }, healInterval, healInterval);
         } finally {
@@ -2301,15 +2311,14 @@ public void run() {
                     return;
                 }
                 
-                if(hp < localmaxhp) {
+                if(MapleCharacter.this.getHp() < localmaxhp) {
                     if(healHP > 0) {
                         client.announce(MaplePacketCreator.showOwnRecovery(healHP));
                         getMap().broadcastMessage(MapleCharacter.this, MaplePacketCreator.showRecovery(id, healHP), false);
                     }
                 }
 
-                addHP(healHP);
-                addMP(healMP);
+                addMPHP(healHP, healMP);
             }
         }, healInterval, healInterval);
     }
@@ -2343,7 +2352,9 @@ public void dispel() {
             List<MapleBuffStatValueHolder> mbsvhList = getAllStatups();
             for (MapleBuffStatValueHolder mbsvh : mbsvhList) {
                 if (mbsvh.effect.isSkill()) {
-                    cancelEffect(mbsvh.effect, false, mbsvh.startTime);
+                    if (mbsvh.effect.getBuffSourceId() != Aran.COMBO_ABILITY) { // check discovered thanks to Croosade dev team
+                        cancelEffect(mbsvh.effect, false, mbsvh.startTime);
+                    }
                 }
             }
         }
@@ -2370,7 +2381,7 @@ public final int getDiseasesSize() {
     public Map<MapleDisease, Pair<Long, MobSkill>> getAllDiseases() {
         chrLock.lock();
         try {
-            long curtime = System.currentTimeMillis();
+            long curtime = Server.getInstance().getCurrentTime();
             Map<MapleDisease, Pair<Long, MobSkill>> ret = new LinkedHashMap<>();
             
             for(Entry<MapleDisease, Long> de : diseaseExpires.entrySet()) {
@@ -2389,7 +2400,7 @@ public final int getDiseasesSize() {
     public void silentApplyDiseases(Map<MapleDisease, Pair<Long, MobSkill>> diseaseMap) {
         chrLock.lock();
         try {
-            long curTime = System.currentTimeMillis();
+            long curTime = Server.getInstance().getCurrentTime();
             
             for(Entry<MapleDisease, Pair<Long, MobSkill>> di : diseaseMap.entrySet()) {
                 long expTime = curTime + di.getValue().getLeft();
@@ -2435,7 +2446,7 @@ public void giveDebuff(final MapleDisease disease, MobSkill skill) {
             
             chrLock.lock();
             try {
-                long curTime = System.currentTimeMillis();
+                long curTime = Server.getInstance().getCurrentTime();
                 diseaseExpires.put(disease, curTime + skill.getDuration());
                 diseases.put(disease, new Pair<>(new MapleDiseaseValueHolder(curTime, skill.getDuration()), skill));
             } finally {
@@ -2529,7 +2540,7 @@ public void changeFaceExpression(int emote) {
     private void doHurtHp() {
         if (!(this.getInventory(MapleInventoryType.EQUIPPED).findById(getMap().getHPDecProtect()) != null || buffMapProtection())) {
             addHP(-getMap().getHPDec());
-            lastHpDec = System.currentTimeMillis();
+            lastHpDec = Server.getInstance().getCurrentTime();
         }
     }
     
@@ -2547,7 +2558,7 @@ public void resetHpDecreaseTask() {
             hpDecreaseTask.cancel(false);
         }
         
-        long lastHpTask = System.currentTimeMillis() - lastHpDec;
+        long lastHpTask = Server.getInstance().getCurrentTime() - lastHpDec;
         startHpDecreaseTask((lastHpTask > 10000) ? 10000 : lastHpTask);
     }
     
@@ -2558,22 +2569,7 @@ public void dropMessage(String message) {
     public void dropMessage(int type, String message) {
         client.announce(MaplePacketCreator.serverNotice(type, message));
     }
-
-    private void enforceMaxHpMp() {
-        List<Pair<MapleStat, Integer>> stats = new ArrayList<>(2);
-        if (getMp() > getCurrentMaxMp()) {
-            setMp(getMp());
-            stats.add(new Pair<>(MapleStat.MP, Integer.valueOf(getMp())));
-        }
-        if (getHp() > getCurrentMaxHp()) {
-            setHp(getHp());
-            stats.add(new Pair<>(MapleStat.HP, Integer.valueOf(getHp())));
-        }
-        if (stats.size() > 0) {
-            client.announce(MaplePacketCreator.updatePlayerStats(stats, this));
-        }
-    }
-
+    
     public void enteredScript(String script, int mapid) {
         if (!entered.containsKey(mapid)) {
             entered.put(mapid, script);
@@ -2582,10 +2578,10 @@ public void enteredScript(String script, int mapid) {
 
     public void equipChanged() {
         getMap().broadcastMessage(this, MaplePacketCreator.updateCharLook(this), false);
-        recalcLocalStats();
-        enforceMaxHpMp();
+        equipchanged = true;
+        updateLocalStats();
         if (getMessenger() != null) {
-            Server.getInstance().getWorld(world).updateMessenger(getMessenger(), getName(), getWorld(), client.getChannel());
+            getWorldServer().updateMessenger(getMessenger(), getName(), getWorld(), client.getChannel());
         }
     }
     
@@ -2605,7 +2601,7 @@ public void run() {
                     
                     chrLock.lock();
                     try {
-                        long curTime = System.currentTimeMillis();
+                        long curTime = Server.getInstance().getCurrentTime();
                         
                         for(Entry<MapleDisease, Long> de : diseaseExpires.entrySet()) {
                             if(de.getValue() < curTime) {
@@ -2644,7 +2640,7 @@ public void run() {
                     try {
                         es = new LinkedHashSet<>(buffExpires.entrySet());
                         
-                        long curTime = System.currentTimeMillis();
+                        long curTime = Server.getInstance().getCurrentTime();
                         for(Entry<Integer, Long> bel : es) {
                             if(curTime >= bel.getValue()) {
                                 toCancel.add(buffEffects.get(bel.getKey()).entrySet().iterator().next().getValue());    //rofl
@@ -2735,19 +2731,19 @@ public void run() {
                                 item.setExpiration(-1);
                                 forceUpdateItem(item);   //TEST :3
                             } else if (expiration != -1 && expiration < currenttime) {
-                                if(!ItemConstants.isPet(item.getItemId())) {
+                                if (!ItemConstants.isPet(item.getItemId())) {
                                     client.announce(MaplePacketCreator.itemExpired(item.getItemId()));
                                     toberemove.add(item);
-                                    if(ItemConstants.isRateCoupon(item.getItemId())) {
+                                    if (ItemConstants.isRateCoupon(item.getItemId())) {
                                         deletedCoupon = true;
                                     }
                                 } else {
-                                    if(item.getPetId() > -1) {
+                                    if (item.getPetId() > -1) {
                                         int petIdx = getPetIndex(item.getPetId());
                                         if(petIdx > -1) unequipPet(getPet(petIdx), true);
                                     }
                                     
-                                    if(ItemConstants.isExpirablePet(item.getItemId())) {
+                                    if (ItemConstants.isExpirablePet(item.getItemId())) {
                                         client.announce(MaplePacketCreator.itemExpired(item.getItemId()));
                                         toberemove.add(item);
                                     } else {
@@ -3123,7 +3119,7 @@ public MapleStatEffect getBuffEffect(MapleBuffStat stat) {
         effLock.lock();
         chrLock.lock();
         try {
-            long curtime = System.currentTimeMillis();
+            long curtime = Server.getInstance().getCurrentTime();
             
             Map<Integer, PlayerBuffValueHolder> ret = new LinkedHashMap<>();
             for(Map<MapleBuffStat, MapleBuffStatValueHolder> bel : buffEffects.values()) {
@@ -3313,6 +3309,10 @@ public void cancelAllBuffs(boolean softcancel) {
             effLock.lock();
             chrLock.lock();
             try {
+                cancelEffectFromBuffStat(MapleBuffStat.SUMMON);
+                cancelEffectFromBuffStat(MapleBuffStat.PUPPET);
+                cancelEffectFromBuffStat(MapleBuffStat.COMBO);
+                
                 effects.clear();
                 
                 for(Integer srcid : new ArrayList<>(buffEffects.keySet())) {
@@ -3362,8 +3362,6 @@ private void dropBuffStats(List<Pair<MapleBuffStat, MapleBuffStatValueHolder>> e
                 chrLock.unlock();
             }
 
-            recalcLocalStats();
-            
             /*
             if (nestedCancel) {
                 this.cancelEffect(cancelEffectCancelTasks.getRight().effect, false, -1, false);
@@ -3503,6 +3501,7 @@ private void updateEffects(Set<MapleBuffStat> removedStats) {
     private boolean cancelEffect(MapleStatEffect effect, boolean overwrite, long startTime, boolean firstCancel) {
         Set<MapleBuffStat> removedStats = new LinkedHashSet<>();
         dropBuffStats(cancelEffectInternal(effect, overwrite, startTime, removedStats));
+        updateLocalStats();
         updateEffects(removedStats);
         
         return !removedStats.isEmpty();
@@ -3553,14 +3552,6 @@ private boolean cancelEffect(MapleStatEffect effect, boolean overwrite, long sta
         }
         
         List<Pair<MapleBuffStat, MapleBuffStatValueHolder>> toCancel = deregisterBuffStats(buffstats);
-        if (effect.getSourceId() == Spearman.HYPER_BODY || effect.getSourceId() == GM.HYPER_BODY || effect.getSourceId() == SuperGM.HYPER_BODY) {
-            List<Pair<MapleStat, Integer>> statup = new ArrayList<>(4);
-            statup.add(new Pair<>(MapleStat.HP, Math.min(hp, maxhp)));
-            statup.add(new Pair<>(MapleStat.MP, Math.min(mp, maxmp)));
-            statup.add(new Pair<>(MapleStat.MAXHP, maxhp));
-            statup.add(new Pair<>(MapleStat.MAXMP, maxmp));
-            client.announce(MaplePacketCreator.updatePlayerStats(statup, this));
-        }
         if (effect.isMonsterRiding()) {
             if (effect.getSourceId() != Corsair.BATTLE_SHIP) {
                 this.getClient().getWorldServer().unregisterMountHunger(this);
@@ -4014,7 +4005,7 @@ public void run() {
             effLock.unlock();
         }
         
-        recalcLocalStats();
+        updateLocalStats();
     }
     
     private static int getJobMapChair(MapleJob job) {
@@ -4097,14 +4088,6 @@ public int getCurrentPage() {
         return currentPage;
     }
 
-    public int getCurrentMaxHp() {
-        return localmaxhp;
-    }
-
-    public int getCurrentMaxMp() {
-        return localmaxmp;
-    }
-
     public int getCurrentTab() {
         return currentTab;
     }
@@ -4113,10 +4096,6 @@ public int getCurrentType() {
         return currentType;
     }
 
-    public int getDex() {
-        return dex;
-    }
-
     public int getDojoEnergy() {
         return dojoEnergy;
     }
@@ -4314,7 +4293,7 @@ public int getCouponExpRate() {
     }
     
     public int getRawExpRate() {
-        return expRate / (expCoupon * client.getWorldServer().getExpRate());
+        return expRate / (expCoupon * getWorldServer().getExpRate());
     }
     
     public int getDropRate() {
@@ -4326,7 +4305,7 @@ public int getCouponDropRate() {
     }
     
     public int getRawDropRate() {
-        return dropRate / (dropCoupon * client.getWorldServer().getDropRate());
+        return dropRate / (dropCoupon * getWorldServer().getDropRate());
     }
     
     public int getMesoRate() {
@@ -4338,7 +4317,7 @@ public int getCouponMesoRate() {
     }
     
     public int getRawMesoRate() {
-        return mesoRate / (mesoCoupon * client.getWorldServer().getMesoRate());
+        return mesoRate / (mesoCoupon * getWorldServer().getMesoRate());
     }
 
     public int getFace() {
@@ -4419,14 +4398,6 @@ public MapleHiredMerchant getHiredMerchant() {
         return hiredMerchant;
     }
 
-    public int getHp() {
-        return hp;
-    }
-
-    public int getHpMpApUsed() {
-        return hpMpApUsed;
-    }
-
     public int getId() {
         return id;
     }
@@ -4508,10 +4479,6 @@ public int getInitialSpawnpoint() {
         return initialSpawnPoint;
     }
 
-    public int getInt() {
-        return int_;
-    }
-
     public MapleInventory getInventory(MapleInventoryType type) {
         return inventory[type.ordinal()];
     }
@@ -4576,11 +4543,7 @@ public long getLastUsedCashItem() {
     public int getLevel() {
         return level;
     }
-
-    public int getLuk() {
-        return luk;
-    }
-
+    
     public int getFh() {
         Point pos = this.getPosition();
         pos.y -= 6;
@@ -4617,23 +4580,31 @@ public int getMasterLevel(Skill skill) {
         }
         return skills.get(skill).masterlevel;
     }
+    
+    public int getTotalStr() {
+        return localstr;
+    }
 
-    public int getMaxHp() {
-        return maxhp;
+    public int getTotalDex() {
+        return localdex;
     }
-    
-    public int getMaxMp() {
-        return maxmp;
+
+    public int getTotalInt() {
+        return localint_;
     }
-    
-    public int getMaxHpEquipped() {
-        return Math.min(maxhp + eqphp, 30000);
+
+    public int getTotalLuk() {
+        return localluk;
     }
-    
-    public int getMaxMpEquipped() {
-        return Math.min(maxmp + eqpmp, 30000);
+
+    public int getTotalMagic() {
+        return localmagic;
     }
 
+    public int getTotalWatk() {
+        return localwatk;
+    }
+    
     public int getMaxClassLevel() {
         return isCygnus() ? 120 : 200;
     }
@@ -4703,7 +4674,7 @@ public void setPlayerAggro(int mobHash) {
     }
     
     public void resetPlayerAggro() {
-        if(client.getWorldServer().unregisterDisabledServerMessage(id)) {
+        if(getWorldServer().unregisterDisabledServerMessage(id)) {
             client.announceServerMessage();
         }
         
@@ -4749,10 +4720,6 @@ public MapleMount getMount() {
         return maplemount;
     }
 
-    public int getMp() {
-        return mp;
-    }
-
     public MapleMessenger getMessenger() {
         return messenger;
     }
@@ -4839,7 +4806,9 @@ public int getPartyId() {
                 for(MaplePartyCharacter partyMembers: party.getMembers()) {
                     MapleCharacter chr = partyMembers.getPlayer();
                     MapleMap chrMap = chr.getMap();
-                    if(chrMap != null && chrMap.hashCode() == thisMapHash && chr.isLoggedinWorld()) list.add(chr);
+                    if(chrMap != null && chrMap.hashCode() == thisMapHash && chr.isLoggedinWorld()) {
+                        list.add(chr);
+                    }
                 }
             }
         } finally {
@@ -4909,7 +4878,7 @@ public void closePlayerShop() {
         
         if (mps.isOwner(this)) {
             mps.setOpen(false);
-            client.getWorldServer().unregisterPlayerShop(mps);
+            getWorldServer().unregisterPlayerShop(mps);
             
             for (MaplePlayerShopItem mpsi : mps.getItems()) {
                 if (mpsi.getBundles() >= 2) {
@@ -4966,7 +4935,7 @@ public void closePlayerMessenger() {
         MapleMessenger m = this.getMessenger();
         if(m == null) return;
         
-        World w = client.getWorldServer();
+        World w = getWorldServer();
         MapleMessengerCharacter messengerplayer = new MapleMessengerCharacter(this, this.getMessengerPosition());
         
         w.leaveMessenger(m.getId(), messengerplayer);
@@ -5114,22 +5083,6 @@ public int getRankMove() {
         return rankMove;
     }
 
-    public int getRemainingAp() {
-        return remainingAp;
-    }
-
-    public int getRemainingSp() {
-        return remainingSp[GameConstants.getSkillBook(job.getId())]; //default
-    }
-
-    public int getRemainingSpBySkill(final int skillbook) {
-        return remainingSp[skillbook];
-    }
-
-    public int[] getRemainingSps() {
-        return remainingSp;
-    }
-
     private void clearSavedLocation(SavedLocationType type) {
         savedLocations[type.ordinal()] = null;
     }
@@ -5245,10 +5198,6 @@ public MapleStorage getStorage() {
         return storage;
     }
 
-    public int getStr() {
-        return str;
-    }
-    
     public Collection<MapleSummon> getSummonsValues() {
         return summons.values();
     }
@@ -5269,30 +5218,6 @@ public boolean containsSummon(MapleSummon summon) {
         return summons.containsValue(summon);
     }
 
-    public int getTotalStr() {
-        return localstr;
-    }
-
-    public int getTotalDex() {
-        return localdex;
-    }
-
-    public int getTotalInt() {
-        return localint_;
-    }
-
-    public int getTotalLuk() {
-        return localluk;
-    }
-
-    public int getTotalMagic() {
-        return magic;
-    }
-
-    public int getTotalWatk() {
-        return watk;
-    }
-
     public MapleTrade getTrade() {
         return trade;
     }
@@ -5312,6 +5237,10 @@ public int getVanquisherStage() {
     public int getWorld() {
         return world;
     }
+    
+    public World getWorldServer() {
+        return Server.getInstance().getWorld(world);
+    }
 
     public void giveCoolDowns(final int skillid, long starttime, long length) {
         if (skillid == 5221999) {
@@ -5478,17 +5407,13 @@ public boolean isActiveBuffedValue(int skillid) {
         }
         return false;
     }
-
-    public boolean isAlive() {
-        return hp > 0;
-    }
     
     private boolean canBuyback(int fee, boolean usingMesos) {
         return (usingMesos ? this.getMeso() : cashshop.getCash(1)) >= fee;
     }
     
     private void applyBuybackFee(int fee, boolean usingMesos) {
-        if(usingMesos) {
+        if (usingMesos) {
             this.gainMeso(-fee);
         } else {
             cashshop.gainCash(1, -fee);
@@ -5514,13 +5439,13 @@ private int getBuybackFee() {
     public boolean couldBuyback() {  // Ronan's buyback system
         long timeNow = Server.getInstance().getCurrentTime();
         
-        if(timeNow - lastDeathtime > ServerConstants.BUYBACK_RETURN_MINUTES * 60 * 1000) {
-            this.dropMessage(5, "The time available to decide has expired, therefore you are unable to buyback now.");
+        if (timeNow - lastDeathtime > ServerConstants.BUYBACK_RETURN_MINUTES * 60 * 1000) {
+            this.dropMessage(5, "The time available to decide has expired, therefore you are unable to buyback.");
             return false;
         }
         
         long nextBuybacktime = getNextBuybackTime();
-        if(timeNow < nextBuybacktime) {
+        if (timeNow < nextBuybacktime) {
             long timeLeft = nextBuybacktime - timeNow;
             int seconds = (int) Math.floor(timeLeft / 1000) % 60;
             int minutes = (int) Math.floor(timeLeft / (1000*60)) % 60;
@@ -5531,9 +5456,9 @@ public boolean couldBuyback() {  // Ronan's buyback system
         
         boolean usingMesos = ServerConstants.USE_BUYBACK_WITH_MESOS;
         int fee = getBuybackFee();
-        if(usingMesos) fee *= ServerConstants.BUYBACK_MESO_MULTIPLIER;
+        if (usingMesos) fee *= ServerConstants.BUYBACK_MESO_MULTIPLIER;
         
-        if(!canBuyback(fee, usingMesos)) {
+        if (!canBuyback(fee, usingMesos)) {
             this.dropMessage(5, "You don't have " + fee + " " + (usingMesos ? "mesos" : "NX") + " to buyback.");
             return false;
         }
@@ -5609,142 +5534,164 @@ public void leaveMap() {
         }
     }
 
-    public void levelUp(boolean takeexp) {
-        petLock.lock();
-        try {
-            Skill improvingMaxHP = null;
-            Skill improvingMaxMP = null;
-            int improvingMaxHPLevel = 0;
-            int improvingMaxMPLevel = 0;
-
-            boolean isBeginner = isBeginnerJob();
-            if (ServerConstants.USE_AUTOASSIGN_STARTERS_AP && isBeginner && level < 11) {
-                remainingAp = 0;
+    public synchronized void levelUp(boolean takeexp) {
+        Skill improvingMaxHP = null;
+        Skill improvingMaxMP = null;
+        int improvingMaxHPLevel = 0;
+        int improvingMaxMPLevel = 0;
+
+        boolean isBeginner = isBeginnerJob();
+        if (ServerConstants.USE_AUTOASSIGN_STARTERS_AP && isBeginner && level < 11) {
+            effLock.lock();
+            statWlock.lock();
+            try {
+                gainAp(5, true);
+            
+                int str = 0, dex = 0;
                 if (level < 6) {
                     str += 5;
                 } else {
                     str += 4;
                     dex += 1;
                 }
+
+                assignStrDexIntLuk(str, dex, 0, 0);
+            } finally {
+                statWlock.unlock();
+                effLock.unlock();
+            }
+        } else {
+            int remainingAp = 5;
+            if (isCygnus() && level > 10 && level < 70) {
+                remainingAp++;
+            }
+            
+            gainAp(remainingAp, true);
+        }
+
+        int addhp = 0, addmp = 0;
+        if (isBeginner) {
+            addhp += Randomizer.rand(12, 16);
+            addmp += Randomizer.rand(10, 12);
+        } else if (job.isA(MapleJob.WARRIOR) || job.isA(MapleJob.DAWNWARRIOR1)) {
+            improvingMaxHP = isCygnus() ? SkillFactory.getSkill(DawnWarrior.MAX_HP_INCREASE) : SkillFactory.getSkill(Swordsman.IMPROVED_MAX_HP_INCREASE);
+            if (job.isA(MapleJob.CRUSADER)) {
+                improvingMaxMP = SkillFactory.getSkill(1210000);
+            } else if (job.isA(MapleJob.DAWNWARRIOR2)) {
+                improvingMaxMP = SkillFactory.getSkill(11110000);
+            }
+            improvingMaxHPLevel = getSkillLevel(improvingMaxHP);
+            addhp += Randomizer.rand(24, 28);
+            addmp += Randomizer.rand(4, 6);
+        } else if (job.isA(MapleJob.MAGICIAN) || job.isA(MapleJob.BLAZEWIZARD1)) {
+            improvingMaxMP = isCygnus() ? SkillFactory.getSkill(BlazeWizard.INCREASING_MAX_MP) : SkillFactory.getSkill(Magician.IMPROVED_MAX_MP_INCREASE);
+            improvingMaxMPLevel = getSkillLevel(improvingMaxMP);
+            addhp += Randomizer.rand(10, 14);
+            addmp += Randomizer.rand(22, 24);
+        } else if (job.isA(MapleJob.BOWMAN) || job.isA(MapleJob.THIEF) || (job.getId() > 1299 && job.getId() < 1500)) {
+            addhp += Randomizer.rand(20, 24);
+            addmp += Randomizer.rand(14, 16);
+        } else if (job.isA(MapleJob.GM)) {
+            addhp += 30000;
+            addmp += 30000;
+        } else if (job.isA(MapleJob.PIRATE) || job.isA(MapleJob.THUNDERBREAKER1)) {
+            improvingMaxHP = isCygnus() ? SkillFactory.getSkill(ThunderBreaker.IMPROVE_MAX_HP) : SkillFactory.getSkill(5100000);
+            improvingMaxHPLevel = getSkillLevel(improvingMaxHP);
+            addhp += Randomizer.rand(22, 28);
+            addmp += Randomizer.rand(18, 23);
+        } else if (job.isA(MapleJob.ARAN1)) {
+            addhp += Randomizer.rand(44, 48);
+            int aids = Randomizer.rand(4, 8);
+            addmp += aids + Math.floor(aids * 0.1);
+        }
+        if (improvingMaxHPLevel > 0 && (job.isA(MapleJob.WARRIOR) || job.isA(MapleJob.PIRATE) || job.isA(MapleJob.DAWNWARRIOR1))) {
+            addhp += improvingMaxHP.getEffect(improvingMaxHPLevel).getX();
+        }
+        if (improvingMaxMPLevel > 0 && (job.isA(MapleJob.MAGICIAN) || job.isA(MapleJob.CRUSADER) || job.isA(MapleJob.BLAZEWIZARD1))) {
+            addmp += improvingMaxMP.getEffect(improvingMaxMPLevel).getX();
+        }
+
+        if (ServerConstants.USE_RANDOMIZE_HPMP_GAIN) {
+            if (getJobStyle() == MapleJob.MAGICIAN) {
+                addmp += localint_ / 20;
             } else {
-                remainingAp += 5;
-                if (isCygnus() && level > 10 && level < 70) {
-                    remainingAp++;
-                }
-            }
-
-            if (isBeginner) {
-                maxhp += Randomizer.rand(12, 16);
-                maxmp += Randomizer.rand(10, 12);
-            } else if (job.isA(MapleJob.WARRIOR) || job.isA(MapleJob.DAWNWARRIOR1)) {
-                improvingMaxHP = isCygnus() ? SkillFactory.getSkill(DawnWarrior.MAX_HP_INCREASE) : SkillFactory.getSkill(Swordsman.IMPROVED_MAX_HP_INCREASE);
-                if (job.isA(MapleJob.CRUSADER)) {
-                    improvingMaxMP = SkillFactory.getSkill(1210000);
-                } else if (job.isA(MapleJob.DAWNWARRIOR2)) {
-                    improvingMaxMP = SkillFactory.getSkill(11110000);
-                }
-                improvingMaxHPLevel = getSkillLevel(improvingMaxHP);
-                maxhp += Randomizer.rand(24, 28);
-                maxmp += Randomizer.rand(4, 6);
-            } else if (job.isA(MapleJob.MAGICIAN) || job.isA(MapleJob.BLAZEWIZARD1)) {
-                improvingMaxMP = isCygnus() ? SkillFactory.getSkill(BlazeWizard.INCREASING_MAX_MP) : SkillFactory.getSkill(Magician.IMPROVED_MAX_MP_INCREASE);
-                improvingMaxMPLevel = getSkillLevel(improvingMaxMP);
-                maxhp += Randomizer.rand(10, 14);
-                maxmp += Randomizer.rand(22, 24);
-            } else if (job.isA(MapleJob.BOWMAN) || job.isA(MapleJob.THIEF) || (job.getId() > 1299 && job.getId() < 1500)) {
-                maxhp += Randomizer.rand(20, 24);
-                maxmp += Randomizer.rand(14, 16);
-            } else if (job.isA(MapleJob.GM)) {
-                maxhp = 30000;
-                maxmp = 30000;
-            } else if (job.isA(MapleJob.PIRATE) || job.isA(MapleJob.THUNDERBREAKER1)) {
-                improvingMaxHP = isCygnus() ? SkillFactory.getSkill(ThunderBreaker.IMPROVE_MAX_HP) : SkillFactory.getSkill(5100000);
-                improvingMaxHPLevel = getSkillLevel(improvingMaxHP);
-                maxhp += Randomizer.rand(22, 28);
-                maxmp += Randomizer.rand(18, 23);
-            } else if (job.isA(MapleJob.ARAN1)) {
-                maxhp += Randomizer.rand(44, 48);
-                int aids = Randomizer.rand(4, 8);
-                maxmp += aids + Math.floor(aids * 0.1);
-            }
-            if (improvingMaxHPLevel > 0 && (job.isA(MapleJob.WARRIOR) || job.isA(MapleJob.PIRATE) || job.isA(MapleJob.DAWNWARRIOR1))) {
-                maxhp += improvingMaxHP.getEffect(improvingMaxHPLevel).getX();
-            }
-            if (improvingMaxMPLevel > 0 && (job.isA(MapleJob.MAGICIAN) || job.isA(MapleJob.CRUSADER) || job.isA(MapleJob.BLAZEWIZARD1))) {
-                maxmp += improvingMaxMP.getEffect(improvingMaxMPLevel).getX();
-            }
-
-            if (ServerConstants.USE_RANDOMIZE_HPMP_GAIN) {
-                if (job.isA(MapleJob.MAGICIAN) || job.isA(MapleJob.BLAZEWIZARD1)) {
-                    maxmp += localint_ / 20;
-                } else {
-                    maxmp += localint_ / 10;
-                }
+                addmp += localint_ / 10;
             }
+        }
 
-            if (takeexp) {
-                exp.addAndGet(-ExpTable.getExpNeededForLevel(level));
-                if (exp.get() < 0) {
-                    exp.set(0);
-                }
-            }
-            level++;
-            if (level >= getMaxClassLevel()) {
+        addMaxMPMaxHP(addhp, addmp, true);
+
+        if (takeexp) {
+            exp.addAndGet(-ExpTable.getExpNeededForLevel(level));
+            if (exp.get() < 0) {
                 exp.set(0);
-                level = getMaxClassLevel(); //To prevent levels past the maximum
             }
+        }
 
-            maxhp = Math.min(30000, maxhp);
-            maxmp = Math.min(30000, maxmp);
-            if (level == 200) {
-                exp.set(0);
-                if(ServerConstants.PLAYERNPC_AUTODEPLOY && !this.isGM()) MaplePlayerNPC.spawnPlayerNPC(GameConstants.getHallOfFameMapid(job), this);
+        level++;
+        if (level >= getMaxClassLevel()) {
+            exp.set(0);
+
+            int maxClassLevel = getMaxClassLevel();
+            if (level == maxClassLevel) {
+                if (!this.isGM()) {
+                    if (ServerConstants.PLAYERNPC_AUTODEPLOY) {
+                        Thread t = new Thread(new Runnable() {
+                            @Override
+                            public void run() {
+                                MaplePlayerNPC.spawnPlayerNPC(GameConstants.getHallOfFameMapid(job), MapleCharacter.this);
+                            }
+                        });
+
+                        t.start();
+                    }
+
+                    final String names = (getMedalText() + name);
+                    getWorldServer().broadcastPacket(MaplePacketCreator.serverNotice(6, String.format(LEVEL_200, names, names)));
+                }
             }
+
+            level = maxClassLevel; //To prevent levels past the maximum
+        }
+        
+        if (job.getId() % 1000 > 0) {
+            gainSp(3, GameConstants.getSkillBook(job.getId()), true);
+        }
+        
+        effLock.lock();
+        statWlock.lock();
+        try {
             recalcLocalStats();
-            hp = localmaxhp;
-            mp = localmaxmp;
+            changeHpMp(localmaxhp, localmaxmp, true);
+
             List<Pair<MapleStat, Integer>> statup = new ArrayList<>(10);
             statup.add(new Pair<>(MapleStat.AVAILABLEAP, remainingAp));
-            statup.add(new Pair<>(MapleStat.HP, localmaxhp));
-            statup.add(new Pair<>(MapleStat.MP, localmaxmp));
+            statup.add(new Pair<>(MapleStat.AVAILABLESP, remainingSp[GameConstants.getSkillBook(job.getId())]));
+            statup.add(new Pair<>(MapleStat.HP, hp));
+            statup.add(new Pair<>(MapleStat.MP, mp));
             statup.add(new Pair<>(MapleStat.EXP, exp.get()));
             statup.add(new Pair<>(MapleStat.LEVEL, level));
-            statup.add(new Pair<>(MapleStat.MAXHP, maxhp));
-            statup.add(new Pair<>(MapleStat.MAXMP, maxmp));
-            statup.add(new Pair<>(MapleStat.STR, Math.min(str, Short.MAX_VALUE)));
-            statup.add(new Pair<>(MapleStat.DEX, Math.min(dex, Short.MAX_VALUE)));
-            if (job.getId() % 1000 > 0) {
-                    remainingSp[GameConstants.getSkillBook(job.getId())] += 3;
-                    statup.add(new Pair<>(MapleStat.AVAILABLESP, remainingSp[GameConstants.getSkillBook(job.getId())]));
-            }
-            client.announce(MaplePacketCreator.updatePlayerStats(statup, this));
-            getMap().broadcastMessage(this, MaplePacketCreator.showForeignEffect(getId(), 0), false);
-            recalcLocalStats();
-            setMPC(new MaplePartyCharacter(this));
-            silentPartyUpdate();
-
-            if(level == 10 && party != null) {
-                if(this.isPartyLeader()) party.assignNewLeader(client);
-                PartyOperationHandler.leaveParty(party, mpc, client);
+            statup.add(new Pair<>(MapleStat.MAXHP, clientmaxhp));
+            statup.add(new Pair<>(MapleStat.MAXMP, clientmaxmp));
+            statup.add(new Pair<>(MapleStat.STR, str));
+            statup.add(new Pair<>(MapleStat.DEX, dex));
+            
+            client.announce(MaplePacketCreator.updatePlayerStats(statup, true, this));
+        } finally {
+            statWlock.unlock();
+            effLock.unlock();
+        }
 
-                showHint("You have reached #blevel 10#k, therefore you must leave your #rstarter party#k.");
-            }
+        getMap().broadcastMessage(this, MaplePacketCreator.showForeignEffect(getId(), 0), false);
+        setMPC(new MaplePartyCharacter(this));
+        silentPartyUpdate();
 
-            if (this.guildid > 0) {
-                getGuild().broadcast(MaplePacketCreator.levelUpMessage(2, level, name), this.getId());
-            }
-            if (ServerConstants.USE_PERFECT_PITCH && level >= 30) {
-                //milestones?
-                if (MapleInventoryManipulator.checkSpace(client, 4310000, (short) 1, "")) {
-                    MapleInventoryManipulator.addById(client, 4310000, (short) 1);
-                }
-            }
-            if (level == 200 && !isGM()) {
-                final String names = (getMedalText() + name);
-                client.getWorldServer().broadcastPacket(MaplePacketCreator.serverNotice(6, String.format(LEVEL_200, names, names)));
-            }
+        if (this.guildid > 0) {
+            getGuild().broadcast(MaplePacketCreator.levelUpMessage(2, level, name), this.getId());
+        }
 
-            if(level % 20 == 0 && ServerConstants.USE_ADD_SLOTS_BY_LEVEL == true) {
+        if (level % 20 == 0) {
+            if (ServerConstants.USE_ADD_SLOTS_BY_LEVEL == true) {
                 if (!isGM()) {
                     for (byte i = 1; i < 5; i++) {
                         gainSlots(i, 4, true);
@@ -5753,31 +5700,42 @@ public void levelUp(boolean takeexp) {
                     this.yellowMessage("You reached level " + level + ". Congratulations! As a token of your success, your inventory has been expanded a little bit.");
                 }            
             }
-            if (level % 20 == 0 && ServerConstants.USE_ADD_RATES_BY_LEVEL == true) { //For the rate upgrade
+            if (ServerConstants.USE_ADD_RATES_BY_LEVEL == true) { //For the rate upgrade
                 revertLastPlayerRates();
                 setPlayerRates();
                 this.yellowMessage("You managed to get level " + level + "! Getting experience and items seems a little easier now, huh?");
             }
-
-            levelUpMessages();
-            guildUpdate();
-        } finally {
-            petLock.unlock();
         }
-    }
 
-    public void gainAp(int amount) {
-        List<Pair<MapleStat, Integer>> statup = new ArrayList<>(1);
-        remainingAp += amount;
-        statup.add(new Pair<>(MapleStat.AVAILABLEAP, remainingAp));
-        client.announce(MaplePacketCreator.updatePlayerStats(statup, this));
-    }
+        if (ServerConstants.USE_PERFECT_PITCH && level >= 30) {
+            //milestones?
+            if (MapleInventoryManipulator.checkSpace(client, 4310000, (short) 1, "")) {
+                MapleInventoryManipulator.addById(client, 4310000, (short) 1);
+            }
+        } else if (level == 10) {
+            Runnable r = new Runnable() {
+                @Override
+                public void run() {
+                    prtLock.lock();
+                    try {
+                        if (party != null) {
+                            if(isPartyLeader()) party.assignNewLeader(client);
+                            PartyOperationHandler.leaveParty(party, mpc, client);
+
+                            showHint("You have reached #blevel 10#k, therefore you must leave your #rstarter party#k.");
+                        }
+                    } finally {
+                        prtLock.unlock();
+                    }
+                }
+            };
+
+            Thread t = new Thread(r);
+            t.start();
+        }
 
-    public void gainSp(int amount) {
-        List<Pair<MapleStat, Integer>> statup = new ArrayList<>(1);
-        remainingSp[GameConstants.getSkillBook(job.getId())] += amount;
-        statup.add(new Pair<>(MapleStat.AVAILABLESP, remainingSp[GameConstants.getSkillBook(job.getId())]));
-        client.announce(MaplePacketCreator.updatePlayerStats(statup, this));
+        levelUpMessages();
+        guildUpdate();
     }
 
     private void levelUpMessages() {
@@ -5886,14 +5844,14 @@ public void revertPlayerRates() {
     }
     
     public void setWorldRates() {
-        World worldz = Server.getInstance().getWorld(world);
+        World worldz = getWorldServer();
         this.expRate *= worldz.getExpRate();
         this.mesoRate *= worldz.getMesoRate();
         this.dropRate *= worldz.getDropRate();
     }
     
     public void revertWorldRates() {
-        World worldz = Server.getInstance().getWorld(world);
+        World worldz = getWorldServer();
         this.expRate /= worldz.getExpRate();
         this.mesoRate /= worldz.getMesoRate();
         this.dropRate /= worldz.getDropRate();
@@ -5902,9 +5860,10 @@ public void revertWorldRates() {
     private void setCouponRates() {
         List<Integer> couponEffects;
         
+        Collection<Item> cashItems = this.getInventory(MapleInventoryType.CASH).list();
         chrLock.lock();
         try {
-            setActiveCoupons();
+            setActiveCoupons(cashItems);
             couponEffects = activateCouponsEffects();
         } finally {
             chrLock.unlock();
@@ -6008,15 +5967,15 @@ private void revertCouponsEffects() {
         return toCommitEffect;
     }
     
-    private void setActiveCoupons() {
+    private void setActiveCoupons(Collection<Item> cashItems) {
         activeCoupons.clear();
         activeCouponRates.clear();
 
         Map<Integer, Integer> coupons = Server.getInstance().getCouponRates();
         List<Integer> active = Server.getInstance().getActiveCoupons();
 
-        for(Item it: this.getInventory(MapleInventoryType.CASH).list()) {
-            if(ItemConstants.isRateCoupon(it.getItemId()) && active.contains(it.getItemId())) {
+        for (Item it: cashItems) {
+            if (ItemConstants.isRateCoupon(it.getItemId()) && active.contains(it.getItemId())) {
                 Integer count = activeCoupons.get(it.getItemId());
 
                 if(count != null) activeCoupons.put(it.getItemId(), count + 1);
@@ -6029,7 +5988,7 @@ private void setActiveCoupons() {
     }
     
     private void commitBuffCoupon(int couponid) {
-        if(!isLoggedin() || getCashShop().isOpened()) return;
+        if (!isLoggedin() || getCashShop().isOpened()) return;
         
         MapleStatEffect mse = ii.getItemEffect(couponid);
         mse.applyTo(this);
@@ -6086,16 +6045,11 @@ public static MapleCharacter loadCharacterEntryFromDB(ResultSet rs, List<Item> e
             ret.int_ = rs.getInt("int");
             ret.luk = rs.getInt("luk");
             ret.hp = rs.getInt("hp");
-            ret.maxhp = rs.getInt("maxhp");
+            ret.setMaxHp(rs.getInt("maxhp"));
             ret.mp = rs.getInt("mp");
-            ret.maxmp = rs.getInt("maxmp");
-
+            ret.setMaxMp(rs.getInt("maxmp"));
             ret.remainingAp = rs.getInt("ap");
-            String[] skillPoints = rs.getString("sp").split(",");
-            for (int i = 0; i < ret.remainingSp.length; i++) {
-                ret.remainingSp[i] = Integer.parseInt(skillPoints[i]);
-            }
-
+            ret.loadCharSkillPoints(rs.getString("sp").split(","));
             ret.exp.set(rs.getInt("exp"));
             ret.fame = rs.getInt("fame");
             ret.gachaexp.set(rs.getInt("gachaexp"));
@@ -6142,11 +6096,11 @@ public MapleCharacter generateCharacterEntry() {
         ret.int_ = this.getInt();
         ret.luk = this.getLuk();
         ret.hp = this.getHp();
-        ret.maxhp = this.getMaxHp();
+        ret.setMaxHp(this.getMaxHp());
         ret.mp = this.getMp();
-        ret.maxmp = this.getMaxMp();
+        ret.setMaxMp(this.getMaxMp());
         ret.remainingAp = this.getRemainingAp();
-        ret.remainingSp = this.getRemainingSps();
+        ret.setRemainingSp(this.getRemainingSps());
         ret.exp.set(this.getExp());
         ret.fame = this.getFame();
         ret.gachaexp.set(this.getGachaExp());
@@ -6165,6 +6119,23 @@ public MapleCharacter generateCharacterEntry() {
         return ret;
     }
     
+    private void loadCharSkillPoints(String[] skillPoints) {
+        int sps[] = new int[skillPoints.length];
+        for (int i = 0; i < skillPoints.length; i++) {
+            sps[i] = Integer.parseInt(skillPoints[i]);
+        }
+        
+        setRemainingSp(sps);
+    }
+    
+    public int getRemainingSp() {
+        return getRemainingSp(job.getId()); //default
+    }
+    
+    public void updateRemainingSp(int remainingSp) {
+        updateRemainingSp(remainingSp, GameConstants.getSkillBook(job.getId()));
+    }
+    
     public static MapleCharacter loadCharFromDB(int charid, MapleClient client, boolean channelserver) throws SQLException {
         try {
             MapleCharacter ret = new MapleCharacter();
@@ -6191,16 +6162,13 @@ public static MapleCharacter loadCharFromDB(int charid, MapleClient client, bool
             ret.exp.set(rs.getInt("exp"));
             ret.gachaexp.set(rs.getInt("gachaexp"));
             ret.hp = rs.getInt("hp");
-            ret.maxhp = rs.getInt("maxhp");
+            ret.setMaxHp(rs.getInt("maxhp"));
             ret.mp = rs.getInt("mp");
-            ret.maxmp = rs.getInt("maxmp");
+            ret.setMaxMp(rs.getInt("maxmp"));
             ret.hpMpApUsed = rs.getInt("hpMpUsed");
             ret.hasMerchant = rs.getInt("HasMerchant") == 1;
-            String[] skillPoints = rs.getString("sp").split(",");
-            for (int i = 0; i < ret.remainingSp.length; i++) {
-                ret.remainingSp[i] = Integer.parseInt(skillPoints[i]);
-            }
             ret.remainingAp = rs.getInt("ap");
+            ret.loadCharSkillPoints(rs.getString("sp").split(","));
             ret.meso.set(rs.getInt("meso"));
             ret.merchantmeso = rs.getInt("MerchantMesos");
             ret.gmLevel = rs.getInt("gm");
@@ -6564,9 +6532,11 @@ public static MapleCharacter loadCharFromDB(int charid, MapleClient client, bool
                 ps.close();
                 ret.buddylist.loadFromDb(charid);
                 ret.storage = MapleStorage.loadOrCreateFromDB(ret.accountid, ret.world);
+                
+                int startHp = ret.hp, startMp = ret.mp;
                 ret.recalcLocalStats();
+                ret.changeHpMp(startHp, startMp, true);
                 //ret.resetBattleshipHp();
-                ret.silentEnforceMaxHpMp();
             }
             int mountid = ret.getJobType() * 10000000 + 1004;
             if (ret.getInventory(MapleInventoryType.EQUIPPED).getItem((short) -18) != null) {
@@ -6739,6 +6709,20 @@ private void playerDead() {
         }
         client.announce(MaplePacketCreator.enableActions());
     }
+    
+    public void respawn(int returnMap) {
+        respawn(null, returnMap);    // unspecified EIM, don't force EIM unregister in this case
+    }
+    
+    public void respawn(EventInstanceManager eim, int returnMap) {
+        cancelAllBuffs(false);
+        
+        updateHp(50);
+        setStance(0);
+        
+        if (eim != null) eim.unregisterPlayer(this);    // some event scripts uses this...
+        changeMap(returnMap);
+    }
 
     private void prepareDragonBlood(final MapleStatEffect bloodEffect) {
         if (dragonBloodSchedule != null) {
@@ -6750,134 +6734,204 @@ public void run() {
                 if(awayFromWorld.get()) return;
                 
                 addHP(-bloodEffect.getX());
-                client.announce(MaplePacketCreator.showOwnBuffEffect(bloodEffect.getSourceId(), 5));
+                announce(MaplePacketCreator.showOwnBuffEffect(bloodEffect.getSourceId(), 5));
                 getMap().broadcastMessage(MapleCharacter.this, MaplePacketCreator.showBuffeffect(getId(), bloodEffect.getSourceId(), 5), false);
-                checkBerserk(isHidden());
             }
         }, 4000, 4000);
     }
 
-    private void recalcLocalStats() {
-        int oldmaxhp = localmaxhp;
-        localmaxhp = getMaxHp();
-        localmaxmp = getMaxMp();
-        localdex = getDex();
-        localint_ = getInt();
-        localstr = getStr();
-        localluk = getLuk();
-        int speed = 100, jump = 100;
-        magic = localint_;
-        watk = 0;
-
-        for (Item item : getInventory(MapleInventoryType.EQUIPPED)) {
-            Equip equip = (Equip) item;
-            localmaxhp += equip.getHp();
-            localmaxmp += equip.getMp();
-            localdex += equip.getDex();
-            localint_ += equip.getInt();
-            localstr += equip.getStr();
-            localluk += equip.getLuk();
-            magic += equip.getMatk() + equip.getInt();
-            watk += equip.getWatk();
-            speed += equip.getSpeed();
-            jump += equip.getJump();
-        }
-        magic = Math.min(magic, 2000);
-        Integer hbhp = getBuffedValue(MapleBuffStat.HYPERBODYHP);
-        if (hbhp != null) {
-            localmaxhp += (hbhp.doubleValue() / 100) * localmaxhp;
-        }
-        Integer hbmp = getBuffedValue(MapleBuffStat.HYPERBODYMP);
-        if (hbmp != null) {
-            localmaxmp += (hbmp.doubleValue() / 100) * localmaxmp;
-        }
-        localmaxhp = Math.min(30000, localmaxhp);
-        localmaxmp = Math.min(30000, localmaxmp);
-        Integer watkbuff = getBuffedValue(MapleBuffStat.WATK);
-        if (watkbuff != null) {
-            watk += watkbuff.intValue();
-        }
-        MapleStatEffect combo = getBuffEffect(MapleBuffStat.ARAN_COMBO);
-        if (combo != null) {
-            watk += combo.getX();
-        }
-
-        if (energybar == 15000) {
-            Skill energycharge = isCygnus() ? SkillFactory.getSkill(ThunderBreaker.ENERGY_CHARGE) : SkillFactory.getSkill(Marauder.ENERGY_CHARGE);
-            MapleStatEffect ceffect = energycharge.getEffect(getSkillLevel(energycharge));
-            watk += ceffect.getWatk();
-        }
-
-        Integer mwarr = getBuffedValue(MapleBuffStat.MAPLE_WARRIOR);
-        if (mwarr != null) {
-            localstr += getStr() * mwarr / 100;
-            localdex += getDex() * mwarr / 100;
-            localint_ += getInt() * mwarr / 100;
-            localluk += getLuk() * mwarr / 100;
-        }
-        if (job.isA(MapleJob.BOWMAN)) {
-            Skill expert = null;
-            if (job.isA(MapleJob.MARKSMAN)) {
-                expert = SkillFactory.getSkill(3220004);
-            } else if (job.isA(MapleJob.BOWMASTER)) {
-                expert = SkillFactory.getSkill(3120005);
-            }
-            if (expert != null) {
-                int boostLevel = getSkillLevel(expert);
-                if (boostLevel > 0) {
-                    watk += expert.getEffect(boostLevel).getX();
-                }
-            }
-        }
-        Integer matkbuff = getBuffedValue(MapleBuffStat.MATK);
-        if (matkbuff != null) {
-            magic += matkbuff.intValue();
-        }
-        Integer speedbuff = getBuffedValue(MapleBuffStat.SPEED);
-        if (speedbuff != null) {
-            speed += speedbuff.intValue();
-        }
-        Integer jumpbuff = getBuffedValue(MapleBuffStat.JUMP);
-        if (jumpbuff != null) {
-            jump += jumpbuff.intValue();
-        }
-
-        Integer blessing = getSkillLevel(10000000 * getJobType() + 12);
-        if (blessing > 0) {
-            watk += blessing;
-            magic += blessing * 2;
-        }
-
-        if (job.isA(MapleJob.THIEF) || job.isA(MapleJob.BOWMAN) || job.isA(MapleJob.PIRATE) || job.isA(MapleJob.NIGHTWALKER1) || job.isA(MapleJob.WINDARCHER1)) {
-            Item weapon_item = getInventory(MapleInventoryType.EQUIPPED).getItem((short) -11);
-            if (weapon_item != null) {
-                MapleWeaponType weapon = ii.getWeaponType(weapon_item.getItemId());
-                boolean bow = weapon == MapleWeaponType.BOW;
-                boolean crossbow = weapon == MapleWeaponType.CROSSBOW;
-                boolean claw = weapon == MapleWeaponType.CLAW;
-                boolean gun = weapon == MapleWeaponType.GUN;
-                if (bow || crossbow || claw || gun) {
-                    // Also calc stars into this.
-                    MapleInventory inv = getInventory(MapleInventoryType.USE);
-                    for (short i = 1; i <= inv.getSlotLimit(); i++) {
-                        Item item = inv.getItem(i);
-                        if (item != null) {
-                            if ((claw && ItemConstants.isThrowingStar(item.getItemId())) || (gun && ItemConstants.isBullet(item.getItemId())) || (bow && ItemConstants.isArrowForBow(item.getItemId())) || (crossbow && ItemConstants.isArrowForCrossBow(item.getItemId()))) {
-                                if (item.getQuantity() > 0) {
-                                    // Finally there!
-                                    watk += ii.getWatkForProjectile(item.getItemId());
-                                    break;
+    private void recalcEquipStats() {
+        if (equipchanged) {
+            equipmaxhp = 0;
+            equipmaxmp = 0;
+            equipdex = 0;
+            equipint_ = 0;
+            equipstr = 0;
+            equipluk = 0;
+            equipmagic = 0;
+            equipwatk = 0;
+            //equipspeed = 0;
+            //equipjump = 0;
+            
+            for (Item item : getInventory(MapleInventoryType.EQUIPPED)) {
+                Equip equip = (Equip) item;
+                equipmaxhp += equip.getHp();
+                equipmaxmp += equip.getMp();
+                equipdex += equip.getDex();
+                equipint_ += equip.getInt();
+                equipstr += equip.getStr();
+                equipluk += equip.getLuk();
+                equipmagic += equip.getMatk() + equip.getInt();
+                equipwatk += equip.getWatk();
+                //equipspeed += equip.getSpeed();
+                //equipjump += equip.getJump();
+            }
+            
+            equipchanged = false;
+        }
+        
+        localmaxhp += equipmaxhp;
+        localmaxmp += equipmaxmp;
+        localdex += equipdex;
+        localint_ += equipint_;
+        localstr += equipstr;
+        localluk += equipluk;
+        localmagic += equipmagic;
+        localwatk += equipwatk;
+    }
+    
+    private List<Pair<MapleStat, Integer>> recalcLocalStats() {
+        effLock.lock();
+        statWlock.lock();
+        try {
+            List<Pair<MapleStat, Integer>> hpmpupdate = new ArrayList<>(2);
+            
+            int oldlocalmaxhp = localmaxhp;
+            int oldlocalmaxmp = localmaxmp;
+
+            localmaxhp = getMaxHp();
+            localmaxmp = getMaxMp();
+            localdex = getDex();
+            localint_ = getInt();
+            localstr = getStr();
+            localluk = getLuk();
+            localmagic = localint_;
+            localwatk = 0;
+            localchairrate = -1;
+
+            recalcEquipStats();
+
+            localmagic = Math.min(localmagic, 2000);
+
+            Integer hbhp = getBuffedValue(MapleBuffStat.HYPERBODYHP);
+            if (hbhp != null) {
+                localmaxhp += (hbhp.doubleValue() / 100) * localmaxhp;
+            }
+            Integer hbmp = getBuffedValue(MapleBuffStat.HYPERBODYMP);
+            if (hbmp != null) {
+                localmaxmp += (hbmp.doubleValue() / 100) * localmaxmp;
+            }
+
+            localmaxhp = Math.min(30000, localmaxhp);
+            localmaxmp = Math.min(30000, localmaxmp);
+
+            if (ServerConstants.USE_FIXED_RATIO_HPMP_UPDATE) {
+                if (localmaxhp != oldlocalmaxhp) hpmpupdate.add(calcHpRatioUpdate(localmaxhp, oldlocalmaxhp));
+                if (localmaxmp != oldlocalmaxmp) hpmpupdate.add(calcMpRatioUpdate(localmaxmp, oldlocalmaxmp));
+            }
+
+            MapleStatEffect combo = getBuffEffect(MapleBuffStat.ARAN_COMBO);
+            if (combo != null) {
+                localwatk += combo.getX();
+            }
+
+            if (energybar == 15000) {
+                Skill energycharge = isCygnus() ? SkillFactory.getSkill(ThunderBreaker.ENERGY_CHARGE) : SkillFactory.getSkill(Marauder.ENERGY_CHARGE);
+                MapleStatEffect ceffect = energycharge.getEffect(getSkillLevel(energycharge));
+                localwatk += ceffect.getWatk();
+            }
+
+            Integer mwarr = getBuffedValue(MapleBuffStat.MAPLE_WARRIOR);
+            if (mwarr != null) {
+                localstr += getStr() * mwarr / 100;
+                localdex += getDex() * mwarr / 100;
+                localint_ += getInt() * mwarr / 100;
+                localluk += getLuk() * mwarr / 100;
+            }
+            if (job.isA(MapleJob.BOWMAN)) {
+                Skill expert = null;
+                if (job.isA(MapleJob.MARKSMAN)) {
+                    expert = SkillFactory.getSkill(3220004);
+                } else if (job.isA(MapleJob.BOWMASTER)) {
+                    expert = SkillFactory.getSkill(3120005);
+                }
+                if (expert != null) {
+                    int boostLevel = getSkillLevel(expert);
+                    if (boostLevel > 0) {
+                        localwatk += expert.getEffect(boostLevel).getX();
+                    }
+                }
+            }
+
+            Integer watkbuff = getBuffedValue(MapleBuffStat.WATK);
+            if (watkbuff != null) {
+                localwatk += watkbuff.intValue();
+            }
+            Integer matkbuff = getBuffedValue(MapleBuffStat.MATK);
+            if (matkbuff != null) {
+                localmagic += matkbuff.intValue();
+            }
+
+            /*
+            Integer speedbuff = getBuffedValue(MapleBuffStat.SPEED);
+            if (speedbuff != null) {
+                localspeed += speedbuff.intValue();
+            }
+            Integer jumpbuff = getBuffedValue(MapleBuffStat.JUMP);
+            if (jumpbuff != null) {
+                localjump += jumpbuff.intValue();
+            }
+            */
+
+            Integer blessing = getSkillLevel(10000000 * getJobType() + 12);
+            if (blessing > 0) {
+                localwatk += blessing;
+                localmagic += blessing * 2;
+            }
+
+            if (job.isA(MapleJob.THIEF) || job.isA(MapleJob.BOWMAN) || job.isA(MapleJob.PIRATE) || job.isA(MapleJob.NIGHTWALKER1) || job.isA(MapleJob.WINDARCHER1)) {
+                Item weapon_item = getInventory(MapleInventoryType.EQUIPPED).getItem((short) -11);
+                if (weapon_item != null) {
+                    MapleWeaponType weapon = ii.getWeaponType(weapon_item.getItemId());
+                    boolean bow = weapon == MapleWeaponType.BOW;
+                    boolean crossbow = weapon == MapleWeaponType.CROSSBOW;
+                    boolean claw = weapon == MapleWeaponType.CLAW;
+                    boolean gun = weapon == MapleWeaponType.GUN;
+                    if (bow || crossbow || claw || gun) {
+                        // Also calc stars into this.
+                        MapleInventory inv = getInventory(MapleInventoryType.USE);
+                        for (short i = 1; i <= inv.getSlotLimit(); i++) {
+                            Item item = inv.getItem(i);
+                            if (item != null) {
+                                if ((claw && ItemConstants.isThrowingStar(item.getItemId())) || (gun && ItemConstants.isBullet(item.getItemId())) || (bow && ItemConstants.isArrowForBow(item.getItemId())) || (crossbow && ItemConstants.isArrowForCrossBow(item.getItemId()))) {
+                                    if (item.getQuantity() > 0) {
+                                        // Finally there!
+                                        localwatk += ii.getWatkForProjectile(item.getItemId());
+                                        break;
+                                    }
                                 }
                             }
                         }
                     }
                 }
+                // Add throwing stars to dmg.
             }
-            // Add throwing stars to dmg.
+
+            return hpmpupdate;
+        } finally {
+            statWlock.unlock();
+            effLock.unlock();
         }
+    }
+    
+    private void updateLocalStats() {
+        effLock.lock();
+        statWlock.lock();
+        try {
+            int oldmaxhp = localmaxhp;
+            List<Pair<MapleStat, Integer>> hpmpupdate = recalcLocalStats();
+            enforceMaxHpMp();
+
+            if (!hpmpupdate.isEmpty()) {
+                client.announce(MaplePacketCreator.updatePlayerStats(hpmpupdate, true, this));
+            }
 
-        if (oldmaxhp != 0 && oldmaxhp != localmaxhp) {
-            updatePartyMemberHP();
+            if (oldmaxhp != localmaxhp) {
+                updatePartyMemberHP();
+            }
+        } finally {
+            statWlock.unlock();
+            effLock.unlock();
         }
     }
 
@@ -6885,17 +6939,8 @@ public void receivePartyMemberHP() {
         prtLock.lock();
         try {
             if (party != null) {
-                int channel = client.getChannel();
-                int mapId = getMapId();
-                World wserv = Server.getInstance().getWorld(world);
-                
-                for (MaplePartyCharacter partychar : party.getMembers()) {
-                    if (partychar.getMapId() == mapId && partychar.getChannel() == channel) {
-                        MapleCharacter other = wserv.getChannel(channel).getPlayerStorage().getCharacterById(partychar.getId());
-                        if (other != null) {
-                            client.announce(MaplePacketCreator.updatePartyMemberHP(other.getId(), other.getHp(), other.getMaxHpEquipped()));
-                        }
-                    }
+                for (MapleCharacter partychar : this.getPartyMembersOnSameMap()) {
+                    announce(MaplePacketCreator.updatePartyMemberHP(partychar.getId(), partychar.getHp(), partychar.getCurrentMaxHp()));
                 }
             }
         } finally {
@@ -6978,57 +7023,51 @@ public synchronized void resetStats() {
             return;
         }
         
-        List<Pair<MapleStat, Integer>> statup = new ArrayList<>(5);
-        int tap = remainingAp + str + dex + int_ + luk, tsp = 1;
-        int tstr = 4, tdex = 4, tint = 4, tluk = 4;
-        
-        switch (job.getId()) {
-            case 100:
-            case 1100:
-            case 2100:
-                tstr = 35;
-                tsp += ((getLevel() - 10) * 3);
-                break;
-            case 200:
-            case 1200:
-                tint = 20;
-                tsp += ((getLevel() - 8) * 3);
-                break;
-            case 300:
-            case 1300:
-            case 400:
-            case 1400:
-                tdex = 25;
-                tsp += ((getLevel() - 10) * 3);
-                break;
-            case 500:
-            case 1500:
-                tdex = 20;
-                tsp += ((getLevel() - 10) * 3);
-                break;
-        }
-        
-        tap -= tstr;
-        tap -= tdex;
-        tap -= tint;
-        tap -= tluk;
-        
-        if (tap >= 0) {
-            this.remainingAp = tap;
-            this.remainingSp[GameConstants.getSkillBook(job.getId())] = tsp;
-            this.str = tstr;
-            this.dex = tdex;
-            this.int_ = tint;
-            this.luk = tluk;
-            statup.add(new Pair<>(MapleStat.AVAILABLEAP, tap));
-            statup.add(new Pair<>(MapleStat.AVAILABLESP, tsp));
-            statup.add(new Pair<>(MapleStat.STR, tstr));
-            statup.add(new Pair<>(MapleStat.DEX, tdex));
-            statup.add(new Pair<>(MapleStat.INT, tint));
-            statup.add(new Pair<>(MapleStat.LUK, tluk));
-            announce(MaplePacketCreator.updatePlayerStats(statup, this));
-        } else {
-            FilePrinter.print(FilePrinter.EXCEPTION_CAUGHT, name + " tried to get their stats reseted, without having enough AP available.");
+        effLock.lock();
+        statWlock.lock();
+        try {
+            int tap = remainingAp + str + dex + int_ + luk, tsp = 1;
+            int tstr = 4, tdex = 4, tint = 4, tluk = 4;
+
+            switch (job.getId()) {
+                case 100:
+                case 1100:
+                case 2100:
+                    tstr = 35;
+                    tsp += ((getLevel() - 10) * 3);
+                    break;
+                case 200:
+                case 1200:
+                    tint = 20;
+                    tsp += ((getLevel() - 8) * 3);
+                    break;
+                case 300:
+                case 1300:
+                case 400:
+                case 1400:
+                    tdex = 25;
+                    tsp += ((getLevel() - 10) * 3);
+                    break;
+                case 500:
+                case 1500:
+                    tdex = 20;
+                    tsp += ((getLevel() - 10) * 3);
+                    break;
+            }
+
+            tap -= tstr;
+            tap -= tdex;
+            tap -= tint;
+            tap -= tluk;
+
+            if (tap >= 0) {
+                updateStrDexIntLukSp(tstr, tdex, tint, tluk, tap, tsp, GameConstants.getSkillBook(job.getId()));
+            } else {
+                FilePrinter.print(FilePrinter.EXCEPTION_CAUGHT, name + " tried to get their stats reseted, without having enough AP available.");
+            }
+        } finally {
+            statWlock.unlock();
+            effLock.unlock();
         }
     }
     
@@ -7135,8 +7174,8 @@ public final boolean insertNewChar(CharacterFactoryRecipe recipe) {
         dex = recipe.getDex();
         int_ = recipe.getInt();
         luk = recipe.getLuk();
-        maxhp = recipe.getMaxHp();
-        maxmp = recipe.getMaxMp();
+        setMaxHp(recipe.getMaxHp());
+        setMaxMp(recipe.getMaxMp());
         hp = maxhp;
         mp = maxmp;
         level = recipe.getLevel();
@@ -7327,24 +7366,33 @@ public synchronized void saveCharToDB(boolean notAutosave) {
                 ps.setInt(1, level);
             }
             ps.setInt(2, fame);
-            ps.setInt(3, str);
-            ps.setInt(4, dex);
-            ps.setInt(5, luk);
-            ps.setInt(6, int_);
-            ps.setInt(7, Math.abs(exp.get()));
-            ps.setInt(8, Math.abs(gachaexp.get()));
-            ps.setInt(9, hp);
-            ps.setInt(10, mp);
-            ps.setInt(11, maxhp);
-            ps.setInt(12, maxmp);
-            StringBuilder sps = new StringBuilder();
-            for (int i = 0; i < remainingSp.length; i++) {
-                sps.append(remainingSp[i]);
-                sps.append(",");
+            
+            effLock.lock();
+            statWlock.lock();
+            try {
+                ps.setInt(3, str);
+                ps.setInt(4, dex);
+                ps.setInt(5, luk);
+                ps.setInt(6, int_);
+                ps.setInt(7, Math.abs(exp.get()));
+                ps.setInt(8, Math.abs(gachaexp.get()));
+                ps.setInt(9, hp);
+                ps.setInt(10, mp);
+                ps.setInt(11, maxhp);
+                ps.setInt(12, maxmp);
+                StringBuilder sps = new StringBuilder();
+                for (int i = 0; i < remainingSp.length; i++) {
+                    sps.append(remainingSp[i]);
+                    sps.append(",");
+                }
+                String sp = sps.toString();
+                ps.setString(13, sp.substring(0, sp.length() - 1));
+                ps.setInt(14, remainingAp);
+            } finally {
+                statWlock.unlock();
+                effLock.unlock();
             }
-            String sp = sps.toString();
-            ps.setString(13, sp.substring(0, sp.length() - 1));
-            ps.setInt(14, remainingAp);
+            
             ps.setInt(15, gmLevel);
             ps.setInt(16, skinColor.getId());
             ps.setInt(17, gender);
@@ -7748,12 +7796,7 @@ public void setChair(int chair) {
     public void setChalkboard(String text) {
         this.chalktext = text;
     }
-
-    public void setDex(int dex) {
-        this.dex = dex;
-        recalcLocalStats();
-    }
-
+    
     public void setDojoEnergy(int x) {
         this.dojoEnergy = Math.min(x, 10000);
     }
@@ -7901,49 +7944,79 @@ public synchronized void withdrawMerchantMesos() {
     public void setHiredMerchant(MapleHiredMerchant merchant) {
         this.hiredMerchant = merchant;
     }
+    
+    private void hpChangeAction(int oldHp) {
+        boolean playerDied = false;
+        if (hp <= 0) {
+            if (oldHp > hp) {
+                if(!isBuybackInvincible()) {
+                    playerDied = true;
+                } else {
+                    hp = 1;
+                }
+            }
+        }
 
-    public void setHp(int newhp) {
-        setHp(newhp, false);
-    }
+        updatePartyMemberHP();
 
-    public void setHp(int newhp, boolean silent) {
-        int oldHp = hp;
-        int thp = newhp;
-        if (thp < 0) {
-            thp = 0;
-        }
-        if (thp > localmaxhp) {
-            thp = localmaxhp;
-        }
-        this.hp = thp;
-        if (!silent) {
-            updatePartyMemberHP();
-        }
-        if (oldHp > hp && !isAlive()) {
-            if(!isBuybackInvincible()) {
-                playerDead();
-            } else {
-                this.hp = 1;
-            }
+        if (playerDied) {
+            playerDead();
+        } else {
+            checkBerserk(isHidden());
         }
     }
-
-    public void setHpMpApUsed(int mpApUsed) {
-        this.hpMpApUsed = mpApUsed;
+    
+    private Pair<MapleStat, Integer> calcHpRatioUpdate(int newHp, int oldHp) {
+        int delta = newHp - oldHp;
+        this.hp = calcHpMpRatioUpdate(hp, oldHp, delta);
+        
+        hpChangeAction(Short.MIN_VALUE);
+        return new Pair<>(MapleStat.HP, hp);
     }
-
-    public void setHpMp(int x) {
-        setHp(x);
-        setMp(x);
-        updateSingleStat(MapleStat.HP, hp);
-        updateSingleStat(MapleStat.MP, mp);
+    
+    private Pair<MapleStat, Integer> calcMpRatioUpdate(int newMp, int oldMp) {
+        int delta = newMp - oldMp;
+        this.mp = calcHpMpRatioUpdate(mp, oldMp, delta);
+        return new Pair<>(MapleStat.MP, mp);
     }
-
-    public void setInt(int int_) {
-        this.int_ = int_;
-        recalcLocalStats();
+    
+    private static int calcHpMpRatioUpdate(int curpoint, int maxpoint, int diffpoint) {
+        int curMax = maxpoint;
+        int nextMax = Math.min(30000, maxpoint + diffpoint);
+        
+        float temp = curpoint * nextMax;
+        int ret = (int) Math.round(temp / curMax);
+        
+        //System.out.println("cur: " + curpoint + " next: " + ret + " max: " + curMax + " nextmax:" + nextMax + " diff: " + diffpoint);
+        return !(ret <= 0 && curpoint > 0) ? ret : 1;
     }
+    
+    public boolean applyHpMpChange(int hpCon, int hpchange, int mpchange) {
+        boolean zombify = hasDisease(MapleDisease.ZOMBIFY);
+        
+        effLock.lock();
+        statWlock.lock();
+        try {
+            int nextHp = hp + hpchange, nextMp = mp + mpchange;
+            boolean cannotApplyHp = hpchange != 0 && nextHp <= 0 && (!zombify || hpCon > 0);
+            boolean cannotApplyMp = mpchange != 0 && nextMp < 0;
+
+            if (cannotApplyHp || cannotApplyMp) {
+                if (!isGM()) {
+                    return false;
+                }
+
+                if (cannotApplyHp) nextHp = 1;
+            }
 
+            updateHpMp(nextHp, nextMp);
+            return true;
+        } finally {
+            statWlock.unlock();
+            effLock.unlock();
+        }
+    }
+    
     public void setInventory(MapleInventoryType type, MapleInventory inv) {
         inventory[type.ordinal()] = inv;
     }
@@ -7967,12 +8040,7 @@ public void setLastUsedCashItem(long time) {
     public void setLevel(int level) {
         this.level = level;
     }
-
-    public void setLuk(int luk) {
-        this.luk = luk;
-        recalcLocalStats();
-    }
-
+    
     public void setMap(int PmapId) {
         this.mapid = PmapId;
     }
@@ -7984,35 +8052,7 @@ public void setMap(MapleMap newmap) {
     public void setMarkedMonster(int markedMonster) {
         this.markedMonster = markedMonster;
     }
-
-    public void setMaxHp(int hp) {
-        this.maxhp = hp;
-        recalcLocalStats();
-    }
-
-    public void setMaxHp(int hp, boolean ap) {
-        hp = Math.min(30000, hp);
-        if (ap) {
-            setHpMpApUsed(getHpMpApUsed() + 1);
-        }
-        this.maxhp = hp;
-        recalcLocalStats();
-    }
-
-    public void setMaxMp(int mp) {
-        this.maxmp = mp;
-        recalcLocalStats();
-    }
-
-    public void setMaxMp(int mp, boolean ap) {
-        mp = Math.min(30000, mp);
-        if (ap) {
-            setHpMpApUsed(getHpMpApUsed() + 1);
-        }
-        this.maxmp = mp;
-        recalcLocalStats();
-    }
-
+    
     public void setMessenger(MapleMessenger messenger) {
         this.messenger = messenger;
     }
@@ -8055,17 +8095,6 @@ public void setMonsterBookCover(int bookCover) {
         this.bookCover = bookCover;
     }
 
-    public void setMp(int newmp) {
-        int tmp = newmp;
-        if (tmp < 0) {
-            tmp = 0;
-        }
-        if (tmp > localmaxmp) {
-            tmp = localmaxmp;
-        }
-        this.mp = tmp;
-    }
-
     public void setName(String name) {
         this.name = name;
     }
@@ -8120,19 +8149,7 @@ public void setParty(MapleParty p) {
     public void setPlayerShop(MaplePlayerShop playerShop) {
         this.playerShop = playerShop;
     }
-
-    public void setRemainingAp(int remainingAp) {
-        this.remainingAp = remainingAp;
-    }
-
-    public void setRemainingSp(int remainingSp) {
-        this.remainingSp[GameConstants.getSkillBook(job.getId())] = remainingSp; //default
-    }
-
-    public void setRemainingSp(int remainingSp, int skillbook) {
-        this.remainingSp[skillbook] = remainingSp;
-    }
-
+    
     public void setSearch(String find) {
         search = find;
     }
@@ -8232,12 +8249,7 @@ public void setShop(MapleShop shop) {
     public void setSlot(int slotid) {
         slots = slotid;
     }
-
-    public void setStr(int str) {
-        this.str = str;
-        recalcLocalStats();
-    }
-
+    
     public void setTrade(MapleTrade trade) {
         this.trade = trade;
     }
@@ -8268,7 +8280,7 @@ public void shiftPetsRight() {
     }
 
     private long getDojoTimeLeft() {
-        return client.getChannelServer().getDojoFinishTime(map.getId()) - System.currentTimeMillis();
+        return client.getChannelServer().getDojoFinishTime(map.getId()) - Server.getInstance().getCurrentTime();
     }
     
     public void showDojoClock() {
@@ -8286,7 +8298,7 @@ public void timeoutFromDojo() {
     public void showUnderleveledInfo(MapleMonster mob) {
         chrLock.lock();
         try {
-            long curTime = System.currentTimeMillis();
+            long curTime = Server.getInstance().getCurrentTime();
             if(nextUnderlevelTime < curTime) {
                 nextUnderlevelTime = curTime + (60 * 1000);   // show underlevel info again after 1 minute
                 
@@ -8324,11 +8336,6 @@ public void showNote() {
         }
     }
 
-    private void silentEnforceMaxHpMp() {
-        setMp(getMp());
-        setHp(getHp(), true);
-    }
-
     public void silentGiveBuffs(List<Pair<Long, PlayerBuffValueHolder>> buffs) {
         for (Pair<Long, PlayerBuffValueHolder> mbsv : buffs) {
             PlayerBuffValueHolder mbsvh = mbsv.getRight();
@@ -8347,7 +8354,7 @@ public void silentPartyUpdate() {
     
     private void silentPartyUpdateInternal() {
         if (party != null) {
-            Server.getInstance().getWorld(world).updateParty(party.getId(), PartyOperation.SILENT_UPDATE, getMPC());
+            getWorldServer().updateParty(party.getId(), PartyOperation.SILENT_UPDATE, getMPC());
         }
     }
 
@@ -8479,17 +8486,10 @@ public void updatePartyMemberHP() {
     
     private void updatePartyMemberHPInternal() {
         if (party != null) {
-            int channel = client.getChannel();
-            int mapId = getMapId();
-            
-            int curmaxhp = getMaxHpEquipped();
-            for (MaplePartyCharacter partychar : party.getMembers()) {
-                if (partychar.getMapId() == mapId && partychar.getChannel() == channel) {
-                    MapleCharacter other = Server.getInstance().getWorld(world).getChannel(channel).getPlayerStorage().getCharacterByName(partychar.getName());
-                    if (other != null) {
-                        other.client.announce(MaplePacketCreator.updatePartyMemberHP(getId(), this.hp, curmaxhp));
-                    }
-                }
+            int curmaxhp = getCurrentMaxHp();
+            int curhp = getHp();
+            for (MapleCharacter partychar : this.getPartyMembersOnSameMap()) {
+                partychar.announce(MaplePacketCreator.updatePartyMemberHP(getId(), curhp, curmaxhp));
             }
         }
     }
@@ -9018,16 +9018,9 @@ public int getAndRemoveCP() {
     public AutobanManager getAutobanManager() {
         return autoban;
     }
-
-    public void resetEquippedHpMp() {
-        eqphp = 0;
-        eqpmp = 0;
-    }
     
     public void equippedItem(Equip equip) {
         int itemid = equip.getItemId();
-        eqphp += equip.getHp();
-        eqpmp += equip.getMp();
         
         if (itemid == 1122017) {
             this.equipPendantOfSpirit();
@@ -9042,8 +9035,6 @@ public void equippedItem(Equip equip) {
     
     public void unequippedItem(Equip equip) {
         int itemid = equip.getItemId();
-        eqphp -= equip.getHp();
-        eqpmp -= equip.getMp();
         
         if (itemid == 1122017) {
             this.unequipPendantOfSpirit();
@@ -9101,10 +9092,8 @@ public void increaseEquipExp(int expGain) {
             if (itemName == null) {
                 continue;
             }
-
-            if ((nEquip.getItemLevel() < ServerConstants.USE_EQUIPMNT_LVLUP) || (nEquip.getItemLevel() < ii.getEquipLevel(nEquip.getItemId(), true))) {
-                nEquip.gainItemExp(client, expGain);
-            }
+            
+            nEquip.gainItemExp(client, expGain);
         }
     }
     
@@ -9214,11 +9203,12 @@ public final void empty(final boolean remove) {
             party = null;
             family = null;
             
-            Server.getInstance().getWorld(world).registerTimedMapObject(new Runnable() {
+            getWorldServer().registerTimedMapObject(new Runnable() {
                 @Override
                 public void run() {
                     client = null;  // clients still triggers handlers a few times after disconnecting
                     map = null;
+                    setListener(null);
                 }
             }, 5 * 60 * 1000);
         }
@@ -9284,16 +9274,6 @@ public MapleDragon getDragon() {
     public void setDragon(MapleDragon dragon) {
         this.dragon = dragon;
     }
-
-    public int getRemainingSpSize() {
-        int sp = 0;
-        for (int i = 0; i < remainingSp.length; i++) {
-            if (remainingSp[i] > 0) {
-                sp++;
-            }
-        }
-        return sp;
-    }
     
     public long getJailExpirationTimeLeft() {
         return jailExpiration - System.currentTimeMillis();
diff --git a/src/client/MapleClient.java b/src/client/MapleClient.java
index 7e762135d..451e9a341 100644
--- a/src/client/MapleClient.java
+++ b/src/client/MapleClient.java
@@ -886,7 +886,7 @@ public final synchronized void disconnect(boolean shutdown, boolean cashshop) {/
 			final MapleGuild guild = player.getGuild();
                         
                         player.cancelMagicDoor();
-
+                        
                         final World wserv = getWorldServer();   // obviously wserv is NOT null if this player was online on it
                         try {
                                 removePlayer(wserv);
@@ -1028,7 +1028,7 @@ public void setWorld(int world) {
 	}
 
 	public void pongReceived() {
-		lastPong = System.currentTimeMillis();
+		lastPong = Server.getInstance().getCurrentTime();
 	}
 
         public void testPing(long timeThen) {
@@ -1381,12 +1381,7 @@ public void changeChannel(int channel) {
                 player.cancelQuestExpirationTask();
 		//Cancelling magicdoor? Nope
 		//Cancelling mounts? Noty
-		if (player.getBuffedValue(MapleBuffStat.PUPPET) != null) {
-			player.cancelEffectFromBuffStat(MapleBuffStat.PUPPET);
-		}
-		if (player.getBuffedValue(MapleBuffStat.COMBO) != null) {
-			player.cancelEffectFromBuffStat(MapleBuffStat.COMBO);
-		}
+		
 		player.getInventory(MapleInventoryType.EQUIPPED).checked(false); //test
 		player.getMap().removePlayer(player);
                 player.clearBanishPlayerData();
diff --git a/src/client/autoban/AutobanManager.java b/src/client/autoban/AutobanManager.java
index 83990b106..83fc5dbd8 100644
--- a/src/client/autoban/AutobanManager.java
+++ b/src/client/autoban/AutobanManager.java
@@ -91,7 +91,6 @@ public long getLastSpam(int type) {
      * Timestamp checker
      *
      *  <code>type</code>:<br>
-     * 0: HealOverTime<br>
      * 1: Pet Food<br>
      * 2: InventoryMerge<br>
      * 3: InventorySort<br>
@@ -99,6 +98,8 @@ public long getLastSpam(int type) {
      * 5: UseCatchItem<br>
      * 6: Item Drop<br>
      * 7: Chat<br>
+     * 8: HealOverTimeHP<br>
+     * 9: HealOverTimeMP<br>
      *
      * @param type type
      * @return Timestamp checker
@@ -108,7 +109,7 @@ public void setTimestamp(int type, int time, int times) {
             this.timestampcounter[type]++;
             if (this.timestampcounter[type] >= times) {
                 chr.getClient().disconnect(false, false);
-                //System.out.println("Same timestamp for type: " + type + "; Character: " + chr);
+                FilePrinter.print(FilePrinter.EXPLOITS, "Player " + chr + " was caught spamming TYPE " + type + " and has been disconnected.");
             }
             return;
         }
diff --git a/src/client/command/CommandsExecutor.java b/src/client/command/CommandsExecutor.java
index 3db0b3c38..a40e14d7e 100644
--- a/src/client/command/CommandsExecutor.java
+++ b/src/client/command/CommandsExecutor.java
@@ -23,14 +23,16 @@
 */
 package client.command;
 
+import client.command.commands.gm0.*;
+import client.command.commands.gm1.*;
+import client.command.commands.gm2.*;
+import client.command.commands.gm3.*;
+import client.command.commands.gm4.*;
+import client.command.commands.gm5.*;
+import client.command.commands.gm6.*;
+
 import client.MapleClient;
-import client.command.commands.v0.*;
-import client.command.commands.v1.*;
-import client.command.commands.v2.*;
-import client.command.commands.v3.*;
-import client.command.commands.v4.*;
-import client.command.commands.v5.*;
-import client.command.commands.v6.*;
+
 import tools.FilePrinter;
 import tools.Pair;
 
diff --git a/src/client/command/commands/v0/BuyBackCommand.java b/src/client/command/commands/gm0/BuyBackCommand.java
similarity index 97%
rename from src/client/command/commands/v0/BuyBackCommand.java
rename to src/client/command/commands/gm0/BuyBackCommand.java
index d895a763d..85ec0e9e0 100644
--- a/src/client/command/commands/v0/BuyBackCommand.java
+++ b/src/client/command/commands/gm0/BuyBackCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v0;
+package client.command.commands.gm0;
 
 import client.MapleClient;
 import client.command.Command;
diff --git a/src/client/command/commands/v0/DisposeCommand.java b/src/client/command/commands/gm0/DisposeCommand.java
similarity index 97%
rename from src/client/command/commands/v0/DisposeCommand.java
rename to src/client/command/commands/gm0/DisposeCommand.java
index 1500a39cb..a11d97d87 100644
--- a/src/client/command/commands/v0/DisposeCommand.java
+++ b/src/client/command/commands/gm0/DisposeCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v0;
+package client.command.commands.gm0;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v0/DropLimitCommand.java b/src/client/command/commands/gm0/DropLimitCommand.java
similarity index 97%
rename from src/client/command/commands/v0/DropLimitCommand.java
rename to src/client/command/commands/gm0/DropLimitCommand.java
index 17017a1c9..7f10a7dd2 100644
--- a/src/client/command/commands/v0/DropLimitCommand.java
+++ b/src/client/command/commands/gm0/DropLimitCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v0;
+package client.command.commands.gm0;
 
 import client.MapleClient;
 import client.command.Command;
diff --git a/src/client/command/commands/v0/EquipLvCommand.java b/src/client/command/commands/gm0/EquipLvCommand.java
similarity index 97%
rename from src/client/command/commands/v0/EquipLvCommand.java
rename to src/client/command/commands/gm0/EquipLvCommand.java
index 8c87869b4..38d230ad4 100644
--- a/src/client/command/commands/v0/EquipLvCommand.java
+++ b/src/client/command/commands/gm0/EquipLvCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v0;
+package client.command.commands.gm0;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v0/GachaCommand.java b/src/client/command/commands/gm0/GachaCommand.java
similarity index 98%
rename from src/client/command/commands/v0/GachaCommand.java
rename to src/client/command/commands/gm0/GachaCommand.java
index bd24795df..5c4ecd46a 100644
--- a/src/client/command/commands/v0/GachaCommand.java
+++ b/src/client/command/commands/gm0/GachaCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v0;
+package client.command.commands.gm0;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v0/GmCommand.java b/src/client/command/commands/gm0/GmCommand.java
similarity index 98%
rename from src/client/command/commands/v0/GmCommand.java
rename to src/client/command/commands/gm0/GmCommand.java
index 4d451cc63..893b98fa1 100644
--- a/src/client/command/commands/v0/GmCommand.java
+++ b/src/client/command/commands/gm0/GmCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v0;
+package client.command.commands.gm0;
 
 import client.MapleCharacter;
 import client.command.Command;
diff --git a/src/client/command/commands/v0/HelpCommand.java b/src/client/command/commands/gm0/HelpCommand.java
similarity index 97%
rename from src/client/command/commands/v0/HelpCommand.java
rename to src/client/command/commands/gm0/HelpCommand.java
index ac409b400..42c195e95 100644
--- a/src/client/command/commands/v0/HelpCommand.java
+++ b/src/client/command/commands/gm0/HelpCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v0;
+package client.command.commands.gm0;
 
 import client.MapleClient;
 import client.command.Command;
diff --git a/src/client/command/commands/v0/JoinEventCommand.java b/src/client/command/commands/gm0/JoinEventCommand.java
similarity index 98%
rename from src/client/command/commands/v0/JoinEventCommand.java
rename to src/client/command/commands/gm0/JoinEventCommand.java
index a65291808..60ea01e50 100644
--- a/src/client/command/commands/v0/JoinEventCommand.java
+++ b/src/client/command/commands/gm0/JoinEventCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v0;
+package client.command.commands.gm0;
 
 import client.MapleCharacter;
 import client.command.Command;
diff --git a/src/client/command/commands/v0/LeaveEventCommand.java b/src/client/command/commands/gm0/LeaveEventCommand.java
similarity index 98%
rename from src/client/command/commands/v0/LeaveEventCommand.java
rename to src/client/command/commands/gm0/LeaveEventCommand.java
index b588bc692..41dfc9db4 100644
--- a/src/client/command/commands/v0/LeaveEventCommand.java
+++ b/src/client/command/commands/gm0/LeaveEventCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v0;
+package client.command.commands.gm0;
 
 import client.MapleCharacter;
 import client.command.Command;
diff --git a/src/client/command/commands/v0/OnlineCommand.java b/src/client/command/commands/gm0/OnlineCommand.java
similarity index 97%
rename from src/client/command/commands/v0/OnlineCommand.java
rename to src/client/command/commands/gm0/OnlineCommand.java
index 847d10ba1..4944b085a 100644
--- a/src/client/command/commands/v0/OnlineCommand.java
+++ b/src/client/command/commands/gm0/OnlineCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v0;
+package client.command.commands.gm0;
 
 import client.MapleCharacter;
 import client.command.Command;
diff --git a/src/client/command/commands/v0/RanksCommand.java b/src/client/command/commands/gm0/RanksCommand.java
similarity index 97%
rename from src/client/command/commands/v0/RanksCommand.java
rename to src/client/command/commands/gm0/RanksCommand.java
index b2445731a..fbe368f44 100644
--- a/src/client/command/commands/v0/RanksCommand.java
+++ b/src/client/command/commands/gm0/RanksCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v0;
+package client.command.commands.gm0;
 
 import client.MapleCharacter;
 import client.command.Command;
diff --git a/src/client/command/commands/v0/RatesCommand.java b/src/client/command/commands/gm0/RatesCommand.java
similarity index 98%
rename from src/client/command/commands/v0/RatesCommand.java
rename to src/client/command/commands/gm0/RatesCommand.java
index 4840c3d15..1ffdfcafb 100644
--- a/src/client/command/commands/v0/RatesCommand.java
+++ b/src/client/command/commands/gm0/RatesCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v0;
+package client.command.commands.gm0;
 
 import client.MapleCharacter;
 import client.command.Command;
diff --git a/src/client/command/commands/v0/ReportBugCommand.java b/src/client/command/commands/gm0/ReportBugCommand.java
similarity index 98%
rename from src/client/command/commands/v0/ReportBugCommand.java
rename to src/client/command/commands/gm0/ReportBugCommand.java
index 1ab77f865..0654da4f0 100644
--- a/src/client/command/commands/v0/ReportBugCommand.java
+++ b/src/client/command/commands/gm0/ReportBugCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v0;
+package client.command.commands.gm0;
 
 import client.MapleCharacter;
 import client.command.Command;
diff --git a/src/client/command/commands/v0/ShowRatesCommand.java b/src/client/command/commands/gm0/ShowRatesCommand.java
similarity index 98%
rename from src/client/command/commands/v0/ShowRatesCommand.java
rename to src/client/command/commands/gm0/ShowRatesCommand.java
index 7bddad2b1..99117ef86 100644
--- a/src/client/command/commands/v0/ShowRatesCommand.java
+++ b/src/client/command/commands/gm0/ShowRatesCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v0;
+package client.command.commands.gm0;
 
 import client.MapleCharacter;
 import client.command.Command;
diff --git a/src/client/command/commands/v0/StaffCommand.java b/src/client/command/commands/gm0/StaffCommand.java
similarity index 97%
rename from src/client/command/commands/v0/StaffCommand.java
rename to src/client/command/commands/gm0/StaffCommand.java
index 1db3a7acf..525bbac64 100644
--- a/src/client/command/commands/v0/StaffCommand.java
+++ b/src/client/command/commands/gm0/StaffCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v0;
+package client.command.commands.gm0;
 
 import client.MapleClient;
 import client.command.Command;
diff --git a/src/client/command/commands/gm0/StatDexCommand.java b/src/client/command/commands/gm0/StatDexCommand.java
new file mode 100644
index 000000000..3b14dc0b3
--- /dev/null
+++ b/src/client/command/commands/gm0/StatDexCommand.java
@@ -0,0 +1,46 @@
+/*
+    This file is part of the HeavenMS MapleStory Server, commands OdinMS-based
+    Copyleft (L) 2016 - 2018 RonanLana
+
+    This program is free software: you can redistribute it and/or modify
+    it under the terms of the GNU Affero General Public License as
+    published by the Free Software Foundation version 3 as published by
+    the Free Software Foundation. You may not use, modify or distribute
+    this program under any other version of the GNU Affero General Public
+    License.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU Affero General Public License for more details.
+
+    You should have received a copy of the GNU Affero General Public License
+    along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+/*
+   @Author: Arthur L - Refactored command content into modules
+*/
+package client.command.commands.gm0;
+
+import client.MapleCharacter;
+import client.MapleClient;
+import client.command.Command;
+import constants.ServerConstants;
+
+public class StatDexCommand extends Command {
+    {
+        setDescription("");
+    }
+
+    @Override
+    public void execute(MapleClient c, String[] params) {
+        MapleCharacter player = c.getPlayer();
+        int remainingAp = player.getRemainingAp();
+
+        int amount = (params.length > 0) ? Math.min(Integer.parseInt(params[0]), remainingAp) : Math.min(remainingAp, ServerConstants.MAX_AP - player.getDex());
+        if (!player.assignDex(amount)) {
+            player.dropMessage("Please make sure your AP is not over " + ServerConstants.MAX_AP + " and you have enough to distribute.");
+        }
+    }
+}
diff --git a/src/client/command/commands/gm0/StatIntCommand.java b/src/client/command/commands/gm0/StatIntCommand.java
new file mode 100644
index 000000000..21a347d8f
--- /dev/null
+++ b/src/client/command/commands/gm0/StatIntCommand.java
@@ -0,0 +1,46 @@
+/*
+    This file is part of the HeavenMS MapleStory Server, commands OdinMS-based
+    Copyleft (L) 2016 - 2018 RonanLana
+
+    This program is free software: you can redistribute it and/or modify
+    it under the terms of the GNU Affero General Public License as
+    published by the Free Software Foundation version 3 as published by
+    the Free Software Foundation. You may not use, modify or distribute
+    this program under any other version of the GNU Affero General Public
+    License.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU Affero General Public License for more details.
+
+    You should have received a copy of the GNU Affero General Public License
+    along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+/*
+   @Author: Arthur L - Refactored command content into modules
+*/
+package client.command.commands.gm0;
+
+import client.command.Command;
+import client.MapleClient;
+import client.MapleCharacter;
+import constants.ServerConstants;
+
+public class StatIntCommand extends Command {
+    {
+        setDescription("");
+    }
+
+    @Override
+    public void execute(MapleClient c, String[] params) {
+        MapleCharacter player = c.getPlayer();
+        int remainingAp = player.getRemainingAp();
+
+        int amount = (params.length > 0) ? Math.min(Integer.parseInt(params[0]), remainingAp) : Math.min(remainingAp, ServerConstants.MAX_AP - player.getInt());
+        if (!player.assignInt(amount)) {
+            player.dropMessage("Please make sure your AP is not over " + ServerConstants.MAX_AP + " and you have enough to distribute.");
+        }
+    }
+}
diff --git a/src/client/command/commands/gm0/StatLukCommand.java b/src/client/command/commands/gm0/StatLukCommand.java
new file mode 100644
index 000000000..03a41e034
--- /dev/null
+++ b/src/client/command/commands/gm0/StatLukCommand.java
@@ -0,0 +1,46 @@
+/*
+    This file is part of the HeavenMS MapleStory Server, commands OdinMS-based
+    Copyleft (L) 2016 - 2018 RonanLana
+
+    This program is free software: you can redistribute it and/or modify
+    it under the terms of the GNU Affero General Public License as
+    published by the Free Software Foundation version 3 as published by
+    the Free Software Foundation. You may not use, modify or distribute
+    this program under any other version of the GNU Affero General Public
+    License.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU Affero General Public License for more details.
+
+    You should have received a copy of the GNU Affero General Public License
+    along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+/*
+   @Author: Arthur L - Refactored command content into modules
+*/
+package client.command.commands.gm0;
+
+import client.MapleCharacter;
+import client.MapleClient;
+import client.command.Command;
+import constants.ServerConstants;
+
+public class StatLukCommand extends Command {
+    {
+        setDescription("");
+    }
+
+    @Override
+    public void execute(MapleClient c, String[] params) {
+        MapleCharacter player = c.getPlayer();
+        int remainingAp = player.getRemainingAp();
+
+        int amount = (params.length > 0) ? Math.min(Integer.parseInt(params[0]), remainingAp) : Math.min(remainingAp, ServerConstants.MAX_AP - player.getLuk());
+        if (!player.assignLuk(amount)) {
+            player.dropMessage("Please make sure your AP is not over " + ServerConstants.MAX_AP + " and you have enough to distribute.");
+        }
+    }
+}
diff --git a/src/client/command/commands/gm0/StatStrCommand.java b/src/client/command/commands/gm0/StatStrCommand.java
new file mode 100644
index 000000000..ce288f27f
--- /dev/null
+++ b/src/client/command/commands/gm0/StatStrCommand.java
@@ -0,0 +1,46 @@
+/*
+    This file is part of the HeavenMS MapleStory Server, commands OdinMS-based
+    Copyleft (L) 2016 - 2018 RonanLana
+
+    This program is free software: you can redistribute it and/or modify
+    it under the terms of the GNU Affero General Public License as
+    published by the Free Software Foundation version 3 as published by
+    the Free Software Foundation. You may not use, modify or distribute
+    this program under any other version of the GNU Affero General Public
+    License.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU Affero General Public License for more details.
+
+    You should have received a copy of the GNU Affero General Public License
+    along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+/*
+   @Author: Arthur L - Refactored command content into modules
+*/
+package client.command.commands.gm0;
+
+import client.command.Command;
+import client.MapleClient;
+import client.MapleCharacter;
+import constants.ServerConstants;
+
+public class StatStrCommand extends Command {
+    {
+        setDescription("");
+    }
+
+    @Override
+    public void execute(MapleClient c, String[] params) {
+        MapleCharacter player = c.getPlayer();
+        int remainingAp = player.getRemainingAp();
+        int amount = (params.length > 0) ? Math.min(Integer.parseInt(params[0]), remainingAp) : Math.min(remainingAp, ServerConstants.MAX_AP - player.getStr());
+        
+        if (!player.assignStr(amount)) {
+            player.dropMessage("Please make sure your AP is not over " + ServerConstants.MAX_AP + " and you have enough to distribute.");
+        }
+    }
+}
diff --git a/src/client/command/commands/v0/TimeCommand.java b/src/client/command/commands/gm0/TimeCommand.java
similarity index 97%
rename from src/client/command/commands/v0/TimeCommand.java
rename to src/client/command/commands/gm0/TimeCommand.java
index a7e2fd87c..08f862b90 100644
--- a/src/client/command/commands/v0/TimeCommand.java
+++ b/src/client/command/commands/gm0/TimeCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v0;
+package client.command.commands.gm0;
 
 import client.MapleClient;
 import client.command.Command;
diff --git a/src/client/command/commands/v0/UptimeCommand.java b/src/client/command/commands/gm0/UptimeCommand.java
similarity index 97%
rename from src/client/command/commands/v0/UptimeCommand.java
rename to src/client/command/commands/gm0/UptimeCommand.java
index 966135b0b..6329cae36 100644
--- a/src/client/command/commands/v0/UptimeCommand.java
+++ b/src/client/command/commands/gm0/UptimeCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v0;
+package client.command.commands.gm0;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v1/BossHpCommand.java b/src/client/command/commands/gm1/BossHpCommand.java
similarity index 98%
rename from src/client/command/commands/v1/BossHpCommand.java
rename to src/client/command/commands/gm1/BossHpCommand.java
index 5bd3ff083..6040abd57 100644
--- a/src/client/command/commands/v1/BossHpCommand.java
+++ b/src/client/command/commands/gm1/BossHpCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v1;
+package client.command.commands.gm1;
 
 import client.MapleCharacter;
 import client.command.Command;
diff --git a/src/client/command/commands/v1/BuffMeCommand.java b/src/client/command/commands/gm1/BuffMeCommand.java
similarity index 87%
rename from src/client/command/commands/v1/BuffMeCommand.java
rename to src/client/command/commands/gm1/BuffMeCommand.java
index a1760124b..9103972c0 100644
--- a/src/client/command/commands/v1/BuffMeCommand.java
+++ b/src/client/command/commands/gm1/BuffMeCommand.java
@@ -21,10 +21,9 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v1;
+package client.command.commands.gm1;
 
 import client.MapleCharacter;
-import client.MapleStat;
 import client.SkillFactory;
 import client.command.Command;
 import client.MapleClient;
@@ -42,9 +41,6 @@ public void execute(MapleClient c, String[] params) {
         SkillFactory.getSkill(1301007).getEffect(SkillFactory.getSkill(1301007).getMaxLevel()).applyTo(player);
         SkillFactory.getSkill(2301004).getEffect(SkillFactory.getSkill(2301004).getMaxLevel()).applyTo(player);
         SkillFactory.getSkill(1005).getEffect(SkillFactory.getSkill(1005).getMaxLevel()).applyTo(player);
-        player.setHp(player.getMaxHp());
-        player.updateSingleStat(MapleStat.HP, player.getMaxHp());
-        player.setMp(player.getMaxMp());
-        player.updateSingleStat(MapleStat.MP, player.getMaxMp());
+        player.healHpMp();
     }
 }
diff --git a/src/client/command/commands/v1/GotoCommand.java b/src/client/command/commands/gm1/GotoCommand.java
similarity index 98%
rename from src/client/command/commands/v1/GotoCommand.java
rename to src/client/command/commands/gm1/GotoCommand.java
index 8deb4c3ba..1c93a3207 100644
--- a/src/client/command/commands/v1/GotoCommand.java
+++ b/src/client/command/commands/gm1/GotoCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v1;
+package client.command.commands.gm1;
 
 import client.MapleCharacter;
 import client.command.Command;
diff --git a/src/client/command/commands/v1/MobHpCommand.java b/src/client/command/commands/gm1/MobHpCommand.java
similarity index 97%
rename from src/client/command/commands/v1/MobHpCommand.java
rename to src/client/command/commands/gm1/MobHpCommand.java
index 64d0a9d29..b8c9dcaef 100644
--- a/src/client/command/commands/v1/MobHpCommand.java
+++ b/src/client/command/commands/gm1/MobHpCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v1;
+package client.command.commands.gm1;
 
 import client.MapleCharacter;
 import client.command.Command;
diff --git a/src/client/command/commands/v1/WhatDropsFromCommand.java b/src/client/command/commands/gm1/WhatDropsFromCommand.java
similarity index 98%
rename from src/client/command/commands/v1/WhatDropsFromCommand.java
rename to src/client/command/commands/gm1/WhatDropsFromCommand.java
index 662c67ef4..91ab0cb26 100644
--- a/src/client/command/commands/v1/WhatDropsFromCommand.java
+++ b/src/client/command/commands/gm1/WhatDropsFromCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v1;
+package client.command.commands.gm1;
 
 import client.MapleCharacter;
 import client.command.Command;
diff --git a/src/client/command/commands/v1/WhoDropsCommand.java b/src/client/command/commands/gm1/WhoDropsCommand.java
similarity index 98%
rename from src/client/command/commands/v1/WhoDropsCommand.java
rename to src/client/command/commands/gm1/WhoDropsCommand.java
index 4022ef98a..ff130495d 100644
--- a/src/client/command/commands/v1/WhoDropsCommand.java
+++ b/src/client/command/commands/gm1/WhoDropsCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v1;
+package client.command.commands.gm1;
 
 import client.MapleCharacter;
 import client.command.Command;
diff --git a/src/client/command/commands/v2/ApCommand.java b/src/client/command/commands/gm2/ApCommand.java
similarity index 86%
rename from src/client/command/commands/v2/ApCommand.java
rename to src/client/command/commands/gm2/ApCommand.java
index d305c0dc5..b6163e3a2 100644
--- a/src/client/command/commands/v2/ApCommand.java
+++ b/src/client/command/commands/gm2/ApCommand.java
@@ -21,9 +21,8 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
-import client.MapleStat;
 import client.command.Command;
 import client.MapleClient;
 import client.MapleCharacter;
@@ -47,8 +46,7 @@ public void execute(MapleClient c, String[] params) {
             if (newAp < 0) newAp = 0;
             else if (newAp > ServerConstants.MAX_AP) newAp = ServerConstants.MAX_AP;
 
-            player.setRemainingAp(newAp);
-            player.updateSingleStat(MapleStat.AVAILABLEAP, player.getRemainingAp());
+            player.changeRemainingAp(newAp, false);
         } else {
             MapleCharacter victim = c.getChannelServer().getPlayerStorage().getCharacterByName(params[0]);
             if (victim != null) {
@@ -56,8 +54,7 @@ public void execute(MapleClient c, String[] params) {
                 if (newAp < 0) newAp = 0;
                 else if (newAp > ServerConstants.MAX_AP) newAp = ServerConstants.MAX_AP;
 
-                victim.setRemainingAp(newAp);
-                victim.updateSingleStat(MapleStat.AVAILABLEAP, victim.getRemainingAp());
+                victim.changeRemainingAp(newAp, false);
             } else {
                 player.message("Player '" + params[0] + "' could not be found on this channel.");
             }
diff --git a/src/client/command/commands/v2/BombCommand.java b/src/client/command/commands/gm2/BombCommand.java
similarity index 98%
rename from src/client/command/commands/v2/BombCommand.java
rename to src/client/command/commands/gm2/BombCommand.java
index d1b1b39ea..18795b676 100644
--- a/src/client/command/commands/v2/BombCommand.java
+++ b/src/client/command/commands/gm2/BombCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v2/BuffCommand.java b/src/client/command/commands/gm2/BuffCommand.java
similarity index 97%
rename from src/client/command/commands/v2/BuffCommand.java
rename to src/client/command/commands/gm2/BuffCommand.java
index 0c7278aa9..2e2210ce1 100644
--- a/src/client/command/commands/v2/BuffCommand.java
+++ b/src/client/command/commands/gm2/BuffCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
 import client.Skill;
 import client.SkillFactory;
diff --git a/src/client/command/commands/v2/BuffMapCommand.java b/src/client/command/commands/gm2/BuffMapCommand.java
similarity index 98%
rename from src/client/command/commands/v2/BuffMapCommand.java
rename to src/client/command/commands/gm2/BuffMapCommand.java
index c850ca620..c9f35f3fb 100644
--- a/src/client/command/commands/v2/BuffMapCommand.java
+++ b/src/client/command/commands/gm2/BuffMapCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
 import client.SkillFactory;
 import client.command.Command;
diff --git a/src/client/command/commands/v2/ClearDropsCommand.java b/src/client/command/commands/gm2/ClearDropsCommand.java
similarity index 97%
rename from src/client/command/commands/v2/ClearDropsCommand.java
rename to src/client/command/commands/gm2/ClearDropsCommand.java
index 20111d117..27cdfc0e6 100644
--- a/src/client/command/commands/v2/ClearDropsCommand.java
+++ b/src/client/command/commands/gm2/ClearDropsCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v2/ClearSlotCommand.java b/src/client/command/commands/gm2/ClearSlotCommand.java
similarity index 99%
rename from src/client/command/commands/v2/ClearSlotCommand.java
rename to src/client/command/commands/gm2/ClearSlotCommand.java
index 0a35d0aa7..df84a9678 100644
--- a/src/client/command/commands/v2/ClearSlotCommand.java
+++ b/src/client/command/commands/gm2/ClearSlotCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v2/DcCommand.java b/src/client/command/commands/gm2/DcCommand.java
similarity index 98%
rename from src/client/command/commands/v2/DcCommand.java
rename to src/client/command/commands/gm2/DcCommand.java
index 589faa0c3..48c41a3ce 100644
--- a/src/client/command/commands/v2/DcCommand.java
+++ b/src/client/command/commands/gm2/DcCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v2/EmpowerMeCommand.java b/src/client/command/commands/gm2/EmpowerMeCommand.java
similarity index 97%
rename from src/client/command/commands/v2/EmpowerMeCommand.java
rename to src/client/command/commands/gm2/EmpowerMeCommand.java
index c4fce8bdc..a901ad1b1 100644
--- a/src/client/command/commands/v2/EmpowerMeCommand.java
+++ b/src/client/command/commands/gm2/EmpowerMeCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
 import client.SkillFactory;
 import client.command.Command;
diff --git a/src/client/command/commands/v2/GmShopCommand.java b/src/client/command/commands/gm2/GmShopCommand.java
similarity index 97%
rename from src/client/command/commands/v2/GmShopCommand.java
rename to src/client/command/commands/gm2/GmShopCommand.java
index c77454061..4eb870054 100644
--- a/src/client/command/commands/v2/GmShopCommand.java
+++ b/src/client/command/commands/gm2/GmShopCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v2/HealCommand.java b/src/client/command/commands/gm2/HealCommand.java
similarity index 95%
rename from src/client/command/commands/v2/HealCommand.java
rename to src/client/command/commands/gm2/HealCommand.java
index a1eeba29e..1c9884a3e 100644
--- a/src/client/command/commands/v2/HealCommand.java
+++ b/src/client/command/commands/gm2/HealCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
 import client.command.Command;
 import client.MapleClient;
@@ -35,7 +35,7 @@
     @Override
     public void execute(MapleClient c, String[] params) {
         MapleCharacter player = c.getPlayer();
-        player.setHpMp(30000);
+        player.healHpMp();
     }
 
 }
diff --git a/src/client/command/commands/v2/HideCommand.java b/src/client/command/commands/gm2/HideCommand.java
similarity index 97%
rename from src/client/command/commands/v2/HideCommand.java
rename to src/client/command/commands/gm2/HideCommand.java
index 38b7c0911..654136c9b 100644
--- a/src/client/command/commands/v2/HideCommand.java
+++ b/src/client/command/commands/gm2/HideCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
 import client.SkillFactory;
 import client.command.Command;
diff --git a/src/client/command/commands/v2/ItemCommand.java b/src/client/command/commands/gm2/ItemCommand.java
similarity index 98%
rename from src/client/command/commands/v2/ItemCommand.java
rename to src/client/command/commands/gm2/ItemCommand.java
index 677748974..3d05313ec 100644
--- a/src/client/command/commands/v2/ItemCommand.java
+++ b/src/client/command/commands/gm2/ItemCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v2/ItemDropCommand.java b/src/client/command/commands/gm2/ItemDropCommand.java
similarity index 99%
rename from src/client/command/commands/v2/ItemDropCommand.java
rename to src/client/command/commands/gm2/ItemDropCommand.java
index 7edbe3900..ac7552217 100644
--- a/src/client/command/commands/v2/ItemDropCommand.java
+++ b/src/client/command/commands/gm2/ItemDropCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v2/JailCommand.java b/src/client/command/commands/gm2/JailCommand.java
similarity index 98%
rename from src/client/command/commands/v2/JailCommand.java
rename to src/client/command/commands/gm2/JailCommand.java
index 97d6ec394..78720b231 100644
--- a/src/client/command/commands/v2/JailCommand.java
+++ b/src/client/command/commands/gm2/JailCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v2/JobCommand.java b/src/client/command/commands/gm2/JobCommand.java
similarity index 98%
rename from src/client/command/commands/v2/JobCommand.java
rename to src/client/command/commands/gm2/JobCommand.java
index a40ce8f06..cf679b2c2 100644
--- a/src/client/command/commands/v2/JobCommand.java
+++ b/src/client/command/commands/gm2/JobCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
 import client.MapleJob;
 import client.command.Command;
diff --git a/src/client/command/commands/v2/LevelCommand.java b/src/client/command/commands/gm2/LevelCommand.java
similarity index 97%
rename from src/client/command/commands/v2/LevelCommand.java
rename to src/client/command/commands/gm2/LevelCommand.java
index cc03a5b0d..e0b0b7392 100644
--- a/src/client/command/commands/v2/LevelCommand.java
+++ b/src/client/command/commands/gm2/LevelCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v2/LevelProCommand.java b/src/client/command/commands/gm2/LevelProCommand.java
similarity index 97%
rename from src/client/command/commands/v2/LevelProCommand.java
rename to src/client/command/commands/gm2/LevelProCommand.java
index 4ce2ebf9c..bb6e67400 100644
--- a/src/client/command/commands/v2/LevelProCommand.java
+++ b/src/client/command/commands/gm2/LevelProCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v2/MaxSkillCommand.java b/src/client/command/commands/gm2/MaxSkillCommand.java
similarity index 98%
rename from src/client/command/commands/v2/MaxSkillCommand.java
rename to src/client/command/commands/gm2/MaxSkillCommand.java
index 4fdde06ed..a534718dc 100644
--- a/src/client/command/commands/v2/MaxSkillCommand.java
+++ b/src/client/command/commands/gm2/MaxSkillCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
 import client.*;
 import client.command.Command;
diff --git a/src/client/command/commands/v2/MaxStatCommand.java b/src/client/command/commands/gm2/MaxStatCommand.java
similarity index 72%
rename from src/client/command/commands/v2/MaxStatCommand.java
rename to src/client/command/commands/gm2/MaxStatCommand.java
index 995764ea2..af770b4fe 100644
--- a/src/client/command/commands/v2/MaxStatCommand.java
+++ b/src/client/command/commands/gm2/MaxStatCommand.java
@@ -21,13 +21,12 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
 import client.MapleStat;
 import client.command.Command;
 import client.MapleClient;
 import client.MapleCharacter;
-import client.command.CommandsExecutor;
 import constants.ServerConstants;
 
 public class MaxStatCommand extends Command {
@@ -43,21 +42,11 @@ public void execute(MapleClient c, String[] params) {
         player.resetPlayerRates();
         if (ServerConstants.USE_ADD_RATES_BY_LEVEL) player.setPlayerRates();
         player.setWorldRates();
-        player.setStr(Short.MAX_VALUE);
-        player.setDex(Short.MAX_VALUE);
-        player.setInt(Short.MAX_VALUE);
-        player.setLuk(Short.MAX_VALUE);
-        player.updateSingleStat(MapleStat.STR, Short.MAX_VALUE);
-        player.updateSingleStat(MapleStat.DEX, Short.MAX_VALUE);
-        player.updateSingleStat(MapleStat.INT, Short.MAX_VALUE);
-        player.updateSingleStat(MapleStat.LUK, Short.MAX_VALUE);
+        player.updateStrDexIntLuk(Short.MAX_VALUE);
         player.setFame(13337);
-        player.setMaxHp(30000);
-        player.setMaxMp(30000);
+        player.updateMaxHpMaxMp(30000, 30000);
         player.updateSingleStat(MapleStat.LEVEL, 255);
         player.updateSingleStat(MapleStat.FAME, 13337);
-        player.updateSingleStat(MapleStat.MAXHP, 30000);
-        player.updateSingleStat(MapleStat.MAXMP, 30000);
         player.yellowMessage("Stats maxed out.");
     }
 }
diff --git a/src/client/command/commands/v2/MesosCommand.java b/src/client/command/commands/gm2/MesosCommand.java
similarity index 97%
rename from src/client/command/commands/v2/MesosCommand.java
rename to src/client/command/commands/gm2/MesosCommand.java
index 5d1c6de96..65c2e87ba 100644
--- a/src/client/command/commands/v2/MesosCommand.java
+++ b/src/client/command/commands/gm2/MesosCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v2/ReachCommand.java b/src/client/command/commands/gm2/ReachCommand.java
similarity index 98%
rename from src/client/command/commands/v2/ReachCommand.java
rename to src/client/command/commands/gm2/ReachCommand.java
index e4e2fa46a..6f4702b99 100644
--- a/src/client/command/commands/v2/ReachCommand.java
+++ b/src/client/command/commands/gm2/ReachCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v2/RechargeCommand.java b/src/client/command/commands/gm2/RechargeCommand.java
similarity index 98%
rename from src/client/command/commands/v2/RechargeCommand.java
rename to src/client/command/commands/gm2/RechargeCommand.java
index 631fcae7a..17e2245a9 100644
--- a/src/client/command/commands/v2/RechargeCommand.java
+++ b/src/client/command/commands/gm2/RechargeCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
 import client.MapleCharacter;
 import client.command.Command;
diff --git a/src/client/command/commands/v2/ResetSkillCommand.java b/src/client/command/commands/gm2/ResetSkillCommand.java
similarity index 98%
rename from src/client/command/commands/v2/ResetSkillCommand.java
rename to src/client/command/commands/gm2/ResetSkillCommand.java
index 93287e288..8a429e426 100644
--- a/src/client/command/commands/v2/ResetSkillCommand.java
+++ b/src/client/command/commands/gm2/ResetSkillCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
 import client.*;
 import client.command.Command;
diff --git a/src/client/command/commands/v2/SearchCommand.java b/src/client/command/commands/gm2/SearchCommand.java
similarity index 99%
rename from src/client/command/commands/v2/SearchCommand.java
rename to src/client/command/commands/gm2/SearchCommand.java
index 2306f2364..4fa3d31e3 100644
--- a/src/client/command/commands/v2/SearchCommand.java
+++ b/src/client/command/commands/gm2/SearchCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v2/SetStatCommand.java b/src/client/command/commands/gm2/SetStatCommand.java
similarity index 75%
rename from src/client/command/commands/v2/SetStatCommand.java
rename to src/client/command/commands/gm2/SetStatCommand.java
index b1fabca6b..42234661f 100644
--- a/src/client/command/commands/v2/SetStatCommand.java
+++ b/src/client/command/commands/gm2/SetStatCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
 import client.MapleStat;
 import client.command.Command;
@@ -41,23 +41,13 @@ public void execute(MapleClient c, String[] params) {
             return;
         }
 
-        int x;
         try {
-            x = Integer.parseInt(params[0]);
+            int x = Integer.parseInt(params[0]);
 
             if (x > Short.MAX_VALUE) x = Short.MAX_VALUE;
             else if (x < 0) x = 0;
 
-            player.setStr(x);
-            player.setDex(x);
-            player.setInt(x);
-            player.setLuk(x);
-            player.updateSingleStat(MapleStat.STR, x);
-            player.updateSingleStat(MapleStat.DEX, x);
-            player.updateSingleStat(MapleStat.INT, x);
-            player.updateSingleStat(MapleStat.LUK, x);
-
-        } catch (NumberFormatException nfe) {
-        }
+            player.updateStrDexIntLuk(x);
+        } catch (NumberFormatException nfe) {}
     }
 }
diff --git a/src/client/command/commands/v2/SpCommand.java b/src/client/command/commands/gm2/SpCommand.java
similarity index 87%
rename from src/client/command/commands/v2/SpCommand.java
rename to src/client/command/commands/gm2/SpCommand.java
index 5a610a4d1..3804f636b 100644
--- a/src/client/command/commands/v2/SpCommand.java
+++ b/src/client/command/commands/gm2/SpCommand.java
@@ -21,9 +21,8 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
-import client.MapleStat;
 import client.command.Command;
 import client.MapleClient;
 import client.MapleCharacter;
@@ -47,8 +46,7 @@ public void execute(MapleClient c, String[] params) {
             if (newSp < 0) newSp = 0;
             else if (newSp > ServerConstants.MAX_AP) newSp = ServerConstants.MAX_AP;
 
-            player.setRemainingSp(newSp);
-            player.updateSingleStat(MapleStat.AVAILABLESP, player.getRemainingSp());
+            player.updateRemainingSp(newSp);
         } else {
             MapleCharacter victim = c.getChannelServer().getPlayerStorage().getCharacterByName(params[0]);
             if (victim != null) {
@@ -56,8 +54,7 @@ public void execute(MapleClient c, String[] params) {
                 if (newSp < 0) newSp = 0;
                 else if (newSp > ServerConstants.MAX_AP) newSp = ServerConstants.MAX_AP;
 
-                victim.setRemainingSp(newSp);
-                victim.updateSingleStat(MapleStat.AVAILABLESP, player.getRemainingSp());
+                victim.updateRemainingSp(newSp);
 
                 player.dropMessage(5, "SP given.");
             } else {
diff --git a/src/client/command/commands/v2/SummonCommand.java b/src/client/command/commands/gm2/SummonCommand.java
similarity index 99%
rename from src/client/command/commands/v2/SummonCommand.java
rename to src/client/command/commands/gm2/SummonCommand.java
index 785d5dfa1..c3bd50dec 100644
--- a/src/client/command/commands/v2/SummonCommand.java
+++ b/src/client/command/commands/gm2/SummonCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v2/UnBugCommand.java b/src/client/command/commands/gm2/UnBugCommand.java
similarity index 97%
rename from src/client/command/commands/v2/UnBugCommand.java
rename to src/client/command/commands/gm2/UnBugCommand.java
index de7fefd97..06bd0cdf5 100644
--- a/src/client/command/commands/v2/UnBugCommand.java
+++ b/src/client/command/commands/gm2/UnBugCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v2/UnHideCommand.java b/src/client/command/commands/gm2/UnHideCommand.java
similarity index 97%
rename from src/client/command/commands/v2/UnHideCommand.java
rename to src/client/command/commands/gm2/UnHideCommand.java
index 37a8de853..9826d8b88 100644
--- a/src/client/command/commands/v2/UnHideCommand.java
+++ b/src/client/command/commands/gm2/UnHideCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
 import client.SkillFactory;
 import client.command.Command;
diff --git a/src/client/command/commands/v2/UnJailCommand.java b/src/client/command/commands/gm2/UnJailCommand.java
similarity index 98%
rename from src/client/command/commands/v2/UnJailCommand.java
rename to src/client/command/commands/gm2/UnJailCommand.java
index 52b2e86ff..f5fb8b4da 100644
--- a/src/client/command/commands/v2/UnJailCommand.java
+++ b/src/client/command/commands/gm2/UnJailCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v2/WarpCommand.java b/src/client/command/commands/gm2/WarpCommand.java
similarity index 98%
rename from src/client/command/commands/v2/WarpCommand.java
rename to src/client/command/commands/gm2/WarpCommand.java
index 95f3af155..e3eaef060 100644
--- a/src/client/command/commands/v2/WarpCommand.java
+++ b/src/client/command/commands/gm2/WarpCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v2/WarpToCommand.java b/src/client/command/commands/gm2/WarpToCommand.java
similarity index 98%
rename from src/client/command/commands/v2/WarpToCommand.java
rename to src/client/command/commands/gm2/WarpToCommand.java
index 67f5207fd..a51007046 100644
--- a/src/client/command/commands/v2/WarpToCommand.java
+++ b/src/client/command/commands/gm2/WarpToCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v2/WhereaMiCommand.java b/src/client/command/commands/gm2/WhereaMiCommand.java
similarity index 98%
rename from src/client/command/commands/v2/WhereaMiCommand.java
rename to src/client/command/commands/gm2/WhereaMiCommand.java
index 54ff6299e..2d1eb2756 100644
--- a/src/client/command/commands/v2/WhereaMiCommand.java
+++ b/src/client/command/commands/gm2/WhereaMiCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v2;
+package client.command.commands.gm2;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/BanCommand.java b/src/client/command/commands/gm3/BanCommand.java
similarity index 99%
rename from src/client/command/commands/v3/BanCommand.java
rename to src/client/command/commands/gm3/BanCommand.java
index 3d6f6bbde..414a3d66e 100644
--- a/src/client/command/commands/v3/BanCommand.java
+++ b/src/client/command/commands/gm3/BanCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/ChatCommand.java b/src/client/command/commands/gm3/ChatCommand.java
similarity index 97%
rename from src/client/command/commands/v3/ChatCommand.java
rename to src/client/command/commands/gm3/ChatCommand.java
index 298b4c9d3..0e8967ed2 100644
--- a/src/client/command/commands/v3/ChatCommand.java
+++ b/src/client/command/commands/gm3/ChatCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/CheckDmgCommand.java b/src/client/command/commands/gm3/CheckDmgCommand.java
similarity index 98%
rename from src/client/command/commands/v3/CheckDmgCommand.java
rename to src/client/command/commands/gm3/CheckDmgCommand.java
index 9809288bc..08f5ae654 100644
--- a/src/client/command/commands/v3/CheckDmgCommand.java
+++ b/src/client/command/commands/gm3/CheckDmgCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.MapleBuffStat;
 import client.command.Command;
diff --git a/src/client/command/commands/v3/ClosePortalCommand.java b/src/client/command/commands/gm3/ClosePortalCommand.java
similarity index 97%
rename from src/client/command/commands/v3/ClosePortalCommand.java
rename to src/client/command/commands/gm3/ClosePortalCommand.java
index 893d79073..7836d195e 100644
--- a/src/client/command/commands/v3/ClosePortalCommand.java
+++ b/src/client/command/commands/gm3/ClosePortalCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/DebuffCommand.java b/src/client/command/commands/gm3/DebuffCommand.java
similarity index 99%
rename from src/client/command/commands/v3/DebuffCommand.java
rename to src/client/command/commands/gm3/DebuffCommand.java
index 40b6feff6..eaba92ecf 100644
--- a/src/client/command/commands/v3/DebuffCommand.java
+++ b/src/client/command/commands/gm3/DebuffCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.MapleDisease;
 import client.command.Command;
diff --git a/src/client/command/commands/v3/EndEventCommand.java b/src/client/command/commands/gm3/EndEventCommand.java
similarity index 97%
rename from src/client/command/commands/v3/EndEventCommand.java
rename to src/client/command/commands/gm3/EndEventCommand.java
index 1eb60675d..9fc6de5c4 100644
--- a/src/client/command/commands/v3/EndEventCommand.java
+++ b/src/client/command/commands/gm3/EndEventCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/ExpedsCommand.java b/src/client/command/commands/gm3/ExpedsCommand.java
similarity index 98%
rename from src/client/command/commands/v3/ExpedsCommand.java
rename to src/client/command/commands/gm3/ExpedsCommand.java
index 6b90241f5..c9acc0c43 100644
--- a/src/client/command/commands/v3/ExpedsCommand.java
+++ b/src/client/command/commands/gm3/ExpedsCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/FaceCommand.java b/src/client/command/commands/gm3/FaceCommand.java
similarity index 98%
rename from src/client/command/commands/v3/FaceCommand.java
rename to src/client/command/commands/gm3/FaceCommand.java
index 0611d7a82..48bc450f3 100644
--- a/src/client/command/commands/v3/FaceCommand.java
+++ b/src/client/command/commands/gm3/FaceCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.MapleStat;
 import client.command.Command;
diff --git a/src/client/command/commands/v3/FameCommand.java b/src/client/command/commands/gm3/FameCommand.java
similarity index 98%
rename from src/client/command/commands/v3/FameCommand.java
rename to src/client/command/commands/gm3/FameCommand.java
index b51d70336..9e1b8e616 100644
--- a/src/client/command/commands/v3/FameCommand.java
+++ b/src/client/command/commands/gm3/FameCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.MapleStat;
 import client.command.Command;
diff --git a/src/client/command/commands/v3/FlyCommand.java b/src/client/command/commands/gm3/FlyCommand.java
similarity index 98%
rename from src/client/command/commands/v3/FlyCommand.java
rename to src/client/command/commands/gm3/FlyCommand.java
index 4929dcaa9..5f7c11572 100644
--- a/src/client/command/commands/v3/FlyCommand.java
+++ b/src/client/command/commands/gm3/FlyCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/GiveMesosCommand.java b/src/client/command/commands/gm3/GiveMesosCommand.java
similarity index 98%
rename from src/client/command/commands/v3/GiveMesosCommand.java
rename to src/client/command/commands/gm3/GiveMesosCommand.java
index 946e828da..e66dc3b0e 100644
--- a/src/client/command/commands/v3/GiveMesosCommand.java
+++ b/src/client/command/commands/gm3/GiveMesosCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/GiveNxCommand.java b/src/client/command/commands/gm3/GiveNxCommand.java
similarity index 98%
rename from src/client/command/commands/v3/GiveNxCommand.java
rename to src/client/command/commands/gm3/GiveNxCommand.java
index 6294b9889..04289bec4 100644
--- a/src/client/command/commands/v3/GiveNxCommand.java
+++ b/src/client/command/commands/gm3/GiveNxCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/GiveVpCommand.java b/src/client/command/commands/gm3/GiveVpCommand.java
similarity index 97%
rename from src/client/command/commands/v3/GiveVpCommand.java
rename to src/client/command/commands/gm3/GiveVpCommand.java
index ce6b642f9..798ac91ad 100644
--- a/src/client/command/commands/v3/GiveVpCommand.java
+++ b/src/client/command/commands/gm3/GiveVpCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/HairCommand.java b/src/client/command/commands/gm3/HairCommand.java
similarity index 98%
rename from src/client/command/commands/v3/HairCommand.java
rename to src/client/command/commands/gm3/HairCommand.java
index b9f3a3105..489e136cc 100644
--- a/src/client/command/commands/v3/HairCommand.java
+++ b/src/client/command/commands/gm3/HairCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.MapleStat;
 import client.command.Command;
diff --git a/src/client/command/commands/v3/HealMapCommand.java b/src/client/command/commands/gm3/HealMapCommand.java
similarity index 84%
rename from src/client/command/commands/v3/HealMapCommand.java
rename to src/client/command/commands/gm3/HealMapCommand.java
index aedfc4cac..a3b06d507 100644
--- a/src/client/command/commands/v3/HealMapCommand.java
+++ b/src/client/command/commands/gm3/HealMapCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.MapleStat;
 import client.command.Command;
@@ -38,10 +38,7 @@ public void execute(MapleClient c, String[] params) {
         MapleCharacter player = c.getPlayer();
         for (MapleCharacter mch : player.getMap().getCharacters()) {
             if (mch != null) {
-                mch.setHp(mch.getMaxHp());
-                mch.updateSingleStat(MapleStat.HP, mch.getMaxHp());
-                mch.setMp(mch.getMaxMp());
-                mch.updateSingleStat(MapleStat.MP, mch.getMaxMp());
+                mch.healHpMp();
             }
         }
     }
diff --git a/src/client/command/commands/v3/HealPersonCommand.java b/src/client/command/commands/gm3/HealPersonCommand.java
similarity index 85%
rename from src/client/command/commands/v3/HealPersonCommand.java
rename to src/client/command/commands/gm3/HealPersonCommand.java
index 6c6c0f9aa..7621cb281 100644
--- a/src/client/command/commands/v3/HealPersonCommand.java
+++ b/src/client/command/commands/gm3/HealPersonCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.MapleStat;
 import client.command.Command;
@@ -38,10 +38,7 @@ public void execute(MapleClient c, String[] params) {
         MapleCharacter player = c.getPlayer();
         MapleCharacter victim = c.getChannelServer().getPlayerStorage().getCharacterByName(params[0]);
         if (victim != null) {
-            victim.setHp(victim.getMaxHp());
-            victim.updateSingleStat(MapleStat.HP, victim.getMaxHp());
-            victim.setMp(victim.getMaxMp());
-            victim.updateSingleStat(MapleStat.MP, victim.getMaxMp());
+            victim.healHpMp();
         } else {
             player.message("Player '" + params[0] + "' could not be found on this channel.");
         }
diff --git a/src/client/command/commands/v3/HpMpCommand.java b/src/client/command/commands/gm3/HpMpCommand.java
similarity index 85%
rename from src/client/command/commands/v3/HpMpCommand.java
rename to src/client/command/commands/gm3/HpMpCommand.java
index 30b680825..f1a808d8d 100644
--- a/src/client/command/commands/v3/HpMpCommand.java
+++ b/src/client/command/commands/gm3/HpMpCommand.java
@@ -21,9 +21,8 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
-import client.MapleStat;
 import client.command.Command;
 import client.MapleClient;
 import client.MapleCharacter;
@@ -49,12 +48,7 @@ public void execute(MapleClient c, String[] params) {
         }
 
         if (victim != null) {
-            victim.setHp(statUpdate);
-            victim.setMp(statUpdate);
-            victim.updateSingleStat(MapleStat.HP, statUpdate);
-            victim.updateSingleStat(MapleStat.MP, statUpdate);
-
-            victim.checkBerserk(victim.isHidden());
+            victim.updateHpMp(statUpdate);
         } else {
             player.message("Player '" + params[0] + "' could not be found on this world.");
         }
diff --git a/src/client/command/commands/v3/HurtCommand.java b/src/client/command/commands/gm3/HurtCommand.java
similarity index 91%
rename from src/client/command/commands/v3/HurtCommand.java
rename to src/client/command/commands/gm3/HurtCommand.java
index 069454b6f..82cf06ac9 100644
--- a/src/client/command/commands/v3/HurtCommand.java
+++ b/src/client/command/commands/gm3/HurtCommand.java
@@ -21,9 +21,8 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
-import client.MapleStat;
 import client.command.Command;
 import client.MapleClient;
 import client.MapleCharacter;
@@ -38,8 +37,7 @@ public void execute(MapleClient c, String[] params) {
         MapleCharacter player = c.getPlayer();
         MapleCharacter victim = c.getChannelServer().getPlayerStorage().getCharacterByName(params[0]);
         if (victim != null) {
-            victim.setHp(1);
-            victim.updateSingleStat(MapleStat.HP, 1);
+            victim.updateHp(1);
         } else {
             player.message("Player '" + params[0] + "' could not be found on this channel.");
         }
diff --git a/src/client/command/commands/v3/IdCommand.java b/src/client/command/commands/gm3/IdCommand.java
similarity index 98%
rename from src/client/command/commands/v3/IdCommand.java
rename to src/client/command/commands/gm3/IdCommand.java
index 724826859..c19bee671 100644
--- a/src/client/command/commands/v3/IdCommand.java
+++ b/src/client/command/commands/gm3/IdCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/IgnoreCommand.java b/src/client/command/commands/gm3/IgnoreCommand.java
similarity index 98%
rename from src/client/command/commands/v3/IgnoreCommand.java
rename to src/client/command/commands/gm3/IgnoreCommand.java
index 9d58f4e1e..fb13a76a4 100644
--- a/src/client/command/commands/v3/IgnoreCommand.java
+++ b/src/client/command/commands/gm3/IgnoreCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/IgnoredCommand.java b/src/client/command/commands/gm3/IgnoredCommand.java
similarity index 97%
rename from src/client/command/commands/v3/IgnoredCommand.java
rename to src/client/command/commands/gm3/IgnoredCommand.java
index c4b287477..e66880caa 100644
--- a/src/client/command/commands/v3/IgnoredCommand.java
+++ b/src/client/command/commands/gm3/IgnoredCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/InMapCommand.java b/src/client/command/commands/gm3/InMapCommand.java
similarity index 97%
rename from src/client/command/commands/v3/InMapCommand.java
rename to src/client/command/commands/gm3/InMapCommand.java
index a33d27b7d..e2406f486 100644
--- a/src/client/command/commands/v3/InMapCommand.java
+++ b/src/client/command/commands/gm3/InMapCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/KillAllCommand.java b/src/client/command/commands/gm3/KillAllCommand.java
similarity index 98%
rename from src/client/command/commands/v3/KillAllCommand.java
rename to src/client/command/commands/gm3/KillAllCommand.java
index c94264143..533a47157 100644
--- a/src/client/command/commands/v3/KillAllCommand.java
+++ b/src/client/command/commands/gm3/KillAllCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/KillCommand.java b/src/client/command/commands/gm3/KillCommand.java
similarity index 96%
rename from src/client/command/commands/v3/KillCommand.java
rename to src/client/command/commands/gm3/KillCommand.java
index 2801828c2..910fd9f53 100644
--- a/src/client/command/commands/v3/KillCommand.java
+++ b/src/client/command/commands/gm3/KillCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
@@ -44,7 +44,7 @@ public void execute(MapleClient c, String[] params) {
 
         MapleCharacter victim = c.getChannelServer().getPlayerStorage().getCharacterByName(params[0]);
         if (victim != null) {
-            victim.setHpMp(0);
+            victim.updateHpMp(0);
             Server.getInstance().broadcastGMMessage(c.getWorld(), MaplePacketCreator.serverNotice(5, player.getName() + " used !kill on " + victim.getName()));
         } else {
             player.message("Player '" + params[0] + "' could not be found on this channel.");
diff --git a/src/client/command/commands/v3/KillMapCommand.java b/src/client/command/commands/gm3/KillMapCommand.java
similarity index 90%
rename from src/client/command/commands/v3/KillMapCommand.java
rename to src/client/command/commands/gm3/KillMapCommand.java
index 12e8421a9..cc922f739 100644
--- a/src/client/command/commands/v3/KillMapCommand.java
+++ b/src/client/command/commands/gm3/KillMapCommand.java
@@ -21,9 +21,8 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
-import client.MapleStat;
 import client.command.Command;
 import client.MapleClient;
 import client.MapleCharacter;
@@ -37,8 +36,7 @@
     public void execute(MapleClient c, String[] params) {
         MapleCharacter player = c.getPlayer();
         for (MapleCharacter mch : player.getMap().getCharacters()) {
-            mch.setHp(0);
-            mch.updateSingleStat(MapleStat.HP, 0);
+            mch.updateHp(0);
         }
     }
 }
diff --git a/src/client/command/commands/v3/MaxEnergyCommand.java b/src/client/command/commands/gm3/MaxEnergyCommand.java
similarity index 97%
rename from src/client/command/commands/v3/MaxEnergyCommand.java
rename to src/client/command/commands/gm3/MaxEnergyCommand.java
index 57c8ef545..595e7d2fb 100644
--- a/src/client/command/commands/v3/MaxEnergyCommand.java
+++ b/src/client/command/commands/gm3/MaxEnergyCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/MaxHpMpCommand.java b/src/client/command/commands/gm3/MaxHpMpCommand.java
similarity index 62%
rename from src/client/command/commands/v3/MaxHpMpCommand.java
rename to src/client/command/commands/gm3/MaxHpMpCommand.java
index 55de83e58..897166545 100644
--- a/src/client/command/commands/v3/MaxHpMpCommand.java
+++ b/src/client/command/commands/gm3/MaxHpMpCommand.java
@@ -21,16 +21,11 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
-import client.MapleStat;
 import client.command.Command;
 import client.MapleClient;
 import client.MapleCharacter;
-import java.util.ArrayList;
-import java.util.List;
-import tools.MaplePacketCreator;
-import tools.Pair;
 
 public class MaxHpMpCommand extends Command {
     {
@@ -41,37 +36,25 @@
     public void execute(MapleClient c, String[] params) {
         MapleCharacter player = c.getPlayer();
         MapleCharacter victim = player;
+        
         int statUpdate = 1;
-
         if (params.length >= 2) {
             victim = c.getWorldServer().getPlayerStorage().getCharacterByName(params[0]);
-            statUpdate = Math.max(1, Integer.valueOf(params[1]));
+            statUpdate = Integer.valueOf(params[1]);
         } else if (params.length == 1) {
-            statUpdate = Math.max(1, Integer.valueOf(params[0]));
+            statUpdate = Integer.valueOf(params[0]);
         } else {
             player.yellowMessage("Syntax: !maxhpmp [<playername>] <value>");
         }
-
+        
         if (victim != null) {
-            List<Pair<MapleStat, Integer>> statup = new ArrayList<>(4);
-            
-            if (victim.getHp() > statUpdate) {
-                victim.setHp(statUpdate);
-                statup.add(new Pair<>(MapleStat.HP, statUpdate));
-            }
-            statup.add(new Pair<>(MapleStat.MAXHP, statUpdate));
-
-            if (victim.getMp() > statUpdate) {
-                victim.setMp(statUpdate);
-                statup.add(new Pair<>(MapleStat.MP, statUpdate));
-            }
-            statup.add(new Pair<>(MapleStat.MAXMP, statUpdate));
-            c.announce(MaplePacketCreator.updatePlayerStats(statup, victim));
-
-            victim.setMaxHp(statUpdate);
-            victim.setMaxMp(statUpdate);
+            int extraHp = victim.getCurrentMaxHp() - victim.getClientMaxHp();
+            int extraMp = victim.getCurrentMaxMp() - victim.getClientMaxMp();
+            statUpdate = Math.max(1 + Math.max(extraHp, extraMp), statUpdate);
 
-            victim.checkBerserk(victim.isHidden());
+            int maxhpUpdate = statUpdate - extraHp;
+            int maxmpUpdate = statUpdate - extraMp;
+            victim.updateMaxHpMaxMp(maxhpUpdate, maxmpUpdate);
         } else {
             player.message("Player '" + params[0] + "' could not be found on this world.");
         }
diff --git a/src/client/command/commands/v3/MonitorCommand.java b/src/client/command/commands/gm3/MonitorCommand.java
similarity index 98%
rename from src/client/command/commands/v3/MonitorCommand.java
rename to src/client/command/commands/gm3/MonitorCommand.java
index ce20568df..b6127d205 100644
--- a/src/client/command/commands/v3/MonitorCommand.java
+++ b/src/client/command/commands/gm3/MonitorCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/MonitorsCommand.java b/src/client/command/commands/gm3/MonitorsCommand.java
similarity index 97%
rename from src/client/command/commands/v3/MonitorsCommand.java
rename to src/client/command/commands/gm3/MonitorsCommand.java
index 5adbeca2a..23ab6c087 100644
--- a/src/client/command/commands/v3/MonitorsCommand.java
+++ b/src/client/command/commands/gm3/MonitorsCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/MusicCommand.java b/src/client/command/commands/gm3/MusicCommand.java
similarity index 99%
rename from src/client/command/commands/v3/MusicCommand.java
rename to src/client/command/commands/gm3/MusicCommand.java
index eb664d228..3ca6b4953 100644
--- a/src/client/command/commands/v3/MusicCommand.java
+++ b/src/client/command/commands/gm3/MusicCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/MuteMapCommand.java b/src/client/command/commands/gm3/MuteMapCommand.java
similarity index 97%
rename from src/client/command/commands/v3/MuteMapCommand.java
rename to src/client/command/commands/gm3/MuteMapCommand.java
index 45bb445ba..8e879cb5c 100644
--- a/src/client/command/commands/v3/MuteMapCommand.java
+++ b/src/client/command/commands/gm3/MuteMapCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/NightCommand.java b/src/client/command/commands/gm3/NightCommand.java
similarity index 97%
rename from src/client/command/commands/v3/NightCommand.java
rename to src/client/command/commands/gm3/NightCommand.java
index ec1eb7b9e..72f907eda 100644
--- a/src/client/command/commands/v3/NightCommand.java
+++ b/src/client/command/commands/gm3/NightCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/NoticeCommand.java b/src/client/command/commands/gm3/NoticeCommand.java
similarity index 97%
rename from src/client/command/commands/v3/NoticeCommand.java
rename to src/client/command/commands/gm3/NoticeCommand.java
index 8c22496d9..9ee0011f2 100644
--- a/src/client/command/commands/v3/NoticeCommand.java
+++ b/src/client/command/commands/gm3/NoticeCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/NpcCommand.java b/src/client/command/commands/gm3/NpcCommand.java
similarity index 98%
rename from src/client/command/commands/v3/NpcCommand.java
rename to src/client/command/commands/gm3/NpcCommand.java
index d5d68d0cf..86a4a155b 100644
--- a/src/client/command/commands/v3/NpcCommand.java
+++ b/src/client/command/commands/gm3/NpcCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/OnlineTwoCommand.java b/src/client/command/commands/gm3/OnlineTwoCommand.java
similarity index 98%
rename from src/client/command/commands/v3/OnlineTwoCommand.java
rename to src/client/command/commands/gm3/OnlineTwoCommand.java
index 2f160bb73..3919cb707 100644
--- a/src/client/command/commands/v3/OnlineTwoCommand.java
+++ b/src/client/command/commands/gm3/OnlineTwoCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/OpenPortalCommand.java b/src/client/command/commands/gm3/OpenPortalCommand.java
similarity index 97%
rename from src/client/command/commands/v3/OpenPortalCommand.java
rename to src/client/command/commands/gm3/OpenPortalCommand.java
index 14f5ee659..92dead805 100644
--- a/src/client/command/commands/v3/OpenPortalCommand.java
+++ b/src/client/command/commands/gm3/OpenPortalCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/PeCommand.java b/src/client/command/commands/gm3/PeCommand.java
similarity index 98%
rename from src/client/command/commands/v3/PeCommand.java
rename to src/client/command/commands/gm3/PeCommand.java
index 1d1353a50..62e1d1305 100644
--- a/src/client/command/commands/v3/PeCommand.java
+++ b/src/client/command/commands/gm3/PeCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/PosCommand.java b/src/client/command/commands/gm3/PosCommand.java
similarity index 97%
rename from src/client/command/commands/v3/PosCommand.java
rename to src/client/command/commands/gm3/PosCommand.java
index 8427f65e2..37c198501 100644
--- a/src/client/command/commands/v3/PosCommand.java
+++ b/src/client/command/commands/gm3/PosCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/QuestCompleteCommand.java b/src/client/command/commands/gm3/QuestCompleteCommand.java
similarity index 98%
rename from src/client/command/commands/v3/QuestCompleteCommand.java
rename to src/client/command/commands/gm3/QuestCompleteCommand.java
index 591d30efa..63a17198b 100644
--- a/src/client/command/commands/v3/QuestCompleteCommand.java
+++ b/src/client/command/commands/gm3/QuestCompleteCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/QuestResetCommand.java b/src/client/command/commands/gm3/QuestResetCommand.java
similarity index 98%
rename from src/client/command/commands/v3/QuestResetCommand.java
rename to src/client/command/commands/gm3/QuestResetCommand.java
index 4f32d2ac4..e1c9863c1 100644
--- a/src/client/command/commands/v3/QuestResetCommand.java
+++ b/src/client/command/commands/gm3/QuestResetCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/QuestStartCommand.java b/src/client/command/commands/gm3/QuestStartCommand.java
similarity index 98%
rename from src/client/command/commands/v3/QuestStartCommand.java
rename to src/client/command/commands/gm3/QuestStartCommand.java
index e25e17337..747732d05 100644
--- a/src/client/command/commands/v3/QuestStartCommand.java
+++ b/src/client/command/commands/gm3/QuestStartCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/ReloadDropsCommand.java b/src/client/command/commands/gm3/ReloadDropsCommand.java
similarity index 97%
rename from src/client/command/commands/v3/ReloadDropsCommand.java
rename to src/client/command/commands/gm3/ReloadDropsCommand.java
index 330d40a51..260823ded 100644
--- a/src/client/command/commands/v3/ReloadDropsCommand.java
+++ b/src/client/command/commands/gm3/ReloadDropsCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/ReloadEventsCommand.java b/src/client/command/commands/gm3/ReloadEventsCommand.java
similarity index 97%
rename from src/client/command/commands/v3/ReloadEventsCommand.java
rename to src/client/command/commands/gm3/ReloadEventsCommand.java
index 0fec0a7f0..727231bc9 100644
--- a/src/client/command/commands/v3/ReloadEventsCommand.java
+++ b/src/client/command/commands/gm3/ReloadEventsCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/ReloadMapCommand.java b/src/client/command/commands/gm3/ReloadMapCommand.java
similarity index 97%
rename from src/client/command/commands/v3/ReloadMapCommand.java
rename to src/client/command/commands/gm3/ReloadMapCommand.java
index 1e0ea3630..4485def5e 100644
--- a/src/client/command/commands/v3/ReloadMapCommand.java
+++ b/src/client/command/commands/gm3/ReloadMapCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/ReloadPortalsCommand.java b/src/client/command/commands/gm3/ReloadPortalsCommand.java
similarity index 97%
rename from src/client/command/commands/v3/ReloadPortalsCommand.java
rename to src/client/command/commands/gm3/ReloadPortalsCommand.java
index 9fdd32f8f..773f607c9 100644
--- a/src/client/command/commands/v3/ReloadPortalsCommand.java
+++ b/src/client/command/commands/gm3/ReloadPortalsCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/ReloadShopsCommand.java b/src/client/command/commands/gm3/ReloadShopsCommand.java
similarity index 97%
rename from src/client/command/commands/v3/ReloadShopsCommand.java
rename to src/client/command/commands/gm3/ReloadShopsCommand.java
index 3b10854c8..e764a1717 100644
--- a/src/client/command/commands/v3/ReloadShopsCommand.java
+++ b/src/client/command/commands/gm3/ReloadShopsCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/RipCommand.java b/src/client/command/commands/gm3/RipCommand.java
similarity index 97%
rename from src/client/command/commands/v3/RipCommand.java
rename to src/client/command/commands/gm3/RipCommand.java
index f34bf0ccf..14ec86a59 100644
--- a/src/client/command/commands/v3/RipCommand.java
+++ b/src/client/command/commands/gm3/RipCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/SeedCommand.java b/src/client/command/commands/gm3/SeedCommand.java
similarity index 98%
rename from src/client/command/commands/v3/SeedCommand.java
rename to src/client/command/commands/gm3/SeedCommand.java
index 8f7c93b4d..d67d3999b 100644
--- a/src/client/command/commands/v3/SeedCommand.java
+++ b/src/client/command/commands/gm3/SeedCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/SpawnCommand.java b/src/client/command/commands/gm3/SpawnCommand.java
similarity index 94%
rename from src/client/command/commands/v3/SpawnCommand.java
rename to src/client/command/commands/gm3/SpawnCommand.java
index 144f37207..b194a70cb 100644
--- a/src/client/command/commands/v3/SpawnCommand.java
+++ b/src/client/command/commands/gm3/SpawnCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
@@ -38,7 +38,7 @@
     public void execute(MapleClient c, String[] params) {
         MapleCharacter player = c.getPlayer();
         if (params.length < 1) {
-            player.yellowMessage("Syntax: !spawn <mobid>");
+            player.yellowMessage("Syntax: !spawn <mobid> [<mobqty>]");
             return;
         }
 
diff --git a/src/client/command/commands/v3/StartEventCommand.java b/src/client/command/commands/gm3/StartEventCommand.java
similarity index 97%
rename from src/client/command/commands/v3/StartEventCommand.java
rename to src/client/command/commands/gm3/StartEventCommand.java
index f5b406c05..cbceb66ce 100644
--- a/src/client/command/commands/v3/StartEventCommand.java
+++ b/src/client/command/commands/gm3/StartEventCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/ToggleCouponCommand.java b/src/client/command/commands/gm3/ToggleCouponCommand.java
similarity index 97%
rename from src/client/command/commands/v3/ToggleCouponCommand.java
rename to src/client/command/commands/gm3/ToggleCouponCommand.java
index 87c08c594..ce0b76c5d 100644
--- a/src/client/command/commands/v3/ToggleCouponCommand.java
+++ b/src/client/command/commands/gm3/ToggleCouponCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/UnBanCommand.java b/src/client/command/commands/gm3/UnBanCommand.java
similarity index 98%
rename from src/client/command/commands/v3/UnBanCommand.java
rename to src/client/command/commands/gm3/UnBanCommand.java
index 54f5782a3..4ad73522f 100644
--- a/src/client/command/commands/v3/UnBanCommand.java
+++ b/src/client/command/commands/gm3/UnBanCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v3/WarpSnowBallCommand.java b/src/client/command/commands/gm3/WarpSnowBallCommand.java
similarity index 97%
rename from src/client/command/commands/v3/WarpSnowBallCommand.java
rename to src/client/command/commands/gm3/WarpSnowBallCommand.java
index 2d62daf4b..c66e4563f 100644
--- a/src/client/command/commands/v3/WarpSnowBallCommand.java
+++ b/src/client/command/commands/gm3/WarpSnowBallCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v3;
+package client.command.commands.gm3;
 
         import client.command.Command;
         import client.MapleClient;
diff --git a/src/client/command/commands/v4/CakeCommand.java b/src/client/command/commands/gm4/CakeCommand.java
similarity index 98%
rename from src/client/command/commands/v4/CakeCommand.java
rename to src/client/command/commands/gm4/CakeCommand.java
index 91e6c8627..1a58b65c8 100644
--- a/src/client/command/commands/v4/CakeCommand.java
+++ b/src/client/command/commands/gm4/CakeCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v4;
+package client.command.commands.gm4;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v4/DropRateCommand.java b/src/client/command/commands/gm4/DropRateCommand.java
similarity index 97%
rename from src/client/command/commands/v4/DropRateCommand.java
rename to src/client/command/commands/gm4/DropRateCommand.java
index 783f0d3f2..cfac27e79 100644
--- a/src/client/command/commands/v4/DropRateCommand.java
+++ b/src/client/command/commands/gm4/DropRateCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v4;
+package client.command.commands.gm4;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v4/ExpRateCommand.java b/src/client/command/commands/gm4/ExpRateCommand.java
similarity index 97%
rename from src/client/command/commands/v4/ExpRateCommand.java
rename to src/client/command/commands/gm4/ExpRateCommand.java
index 50026dde8..b0070efdd 100644
--- a/src/client/command/commands/v4/ExpRateCommand.java
+++ b/src/client/command/commands/gm4/ExpRateCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v4;
+package client.command.commands.gm4;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v4/ForceVacCommand.java b/src/client/command/commands/gm4/ForceVacCommand.java
similarity index 98%
rename from src/client/command/commands/v4/ForceVacCommand.java
rename to src/client/command/commands/gm4/ForceVacCommand.java
index cdb5fd202..7830a66ef 100644
--- a/src/client/command/commands/v4/ForceVacCommand.java
+++ b/src/client/command/commands/gm4/ForceVacCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v4;
+package client.command.commands.gm4;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v4/HorntailCommand.java b/src/client/command/commands/gm4/HorntailCommand.java
similarity index 97%
rename from src/client/command/commands/v4/HorntailCommand.java
rename to src/client/command/commands/gm4/HorntailCommand.java
index a853f8124..3fc094478 100644
--- a/src/client/command/commands/v4/HorntailCommand.java
+++ b/src/client/command/commands/gm4/HorntailCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v4;
+package client.command.commands.gm4;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v4/ItemVacCommand.java b/src/client/command/commands/gm4/ItemVacCommand.java
similarity index 97%
rename from src/client/command/commands/v4/ItemVacCommand.java
rename to src/client/command/commands/gm4/ItemVacCommand.java
index e17861a82..137749f1d 100644
--- a/src/client/command/commands/v4/ItemVacCommand.java
+++ b/src/client/command/commands/gm4/ItemVacCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v4;
+package client.command.commands.gm4;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v4/MesoRateCommand.java b/src/client/command/commands/gm4/MesoRateCommand.java
similarity index 97%
rename from src/client/command/commands/v4/MesoRateCommand.java
rename to src/client/command/commands/gm4/MesoRateCommand.java
index 9b2dd45be..602650cc1 100644
--- a/src/client/command/commands/v4/MesoRateCommand.java
+++ b/src/client/command/commands/gm4/MesoRateCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v4;
+package client.command.commands.gm4;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v4/PapCommand.java b/src/client/command/commands/gm4/PapCommand.java
similarity index 97%
rename from src/client/command/commands/v4/PapCommand.java
rename to src/client/command/commands/gm4/PapCommand.java
index 1f03cb47e..1b9f2e5fd 100644
--- a/src/client/command/commands/v4/PapCommand.java
+++ b/src/client/command/commands/gm4/PapCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v4;
+package client.command.commands.gm4;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v4/PianusCommand.java b/src/client/command/commands/gm4/PianusCommand.java
similarity index 97%
rename from src/client/command/commands/v4/PianusCommand.java
rename to src/client/command/commands/gm4/PianusCommand.java
index 9681481f4..5ab407353 100644
--- a/src/client/command/commands/v4/PianusCommand.java
+++ b/src/client/command/commands/gm4/PianusCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v4;
+package client.command.commands.gm4;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v4/PinkbeanCommand.java b/src/client/command/commands/gm4/PinkbeanCommand.java
similarity index 97%
rename from src/client/command/commands/v4/PinkbeanCommand.java
rename to src/client/command/commands/gm4/PinkbeanCommand.java
index 45db91dd9..9a541d23d 100644
--- a/src/client/command/commands/v4/PinkbeanCommand.java
+++ b/src/client/command/commands/gm4/PinkbeanCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v4;
+package client.command.commands.gm4;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v4/PlayerNpcCommand.java b/src/client/command/commands/gm4/PlayerNpcCommand.java
similarity index 97%
rename from src/client/command/commands/v4/PlayerNpcCommand.java
rename to src/client/command/commands/gm4/PlayerNpcCommand.java
index 68aaec60b..01921cd41 100644
--- a/src/client/command/commands/v4/PlayerNpcCommand.java
+++ b/src/client/command/commands/gm4/PlayerNpcCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v4;
+package client.command.commands.gm4;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v4/PlayerNpcRemoveCommand.java b/src/client/command/commands/gm4/PlayerNpcRemoveCommand.java
similarity index 97%
rename from src/client/command/commands/v4/PlayerNpcRemoveCommand.java
rename to src/client/command/commands/gm4/PlayerNpcRemoveCommand.java
index 95c6f02c2..3d5c3d243 100644
--- a/src/client/command/commands/v4/PlayerNpcRemoveCommand.java
+++ b/src/client/command/commands/gm4/PlayerNpcRemoveCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v4;
+package client.command.commands.gm4;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v4/ProItemCommand.java b/src/client/command/commands/gm4/ProItemCommand.java
similarity index 98%
rename from src/client/command/commands/v4/ProItemCommand.java
rename to src/client/command/commands/gm4/ProItemCommand.java
index c65b9a253..40cc7c43a 100644
--- a/src/client/command/commands/v4/ProItemCommand.java
+++ b/src/client/command/commands/gm4/ProItemCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v4;
+package client.command.commands.gm4;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v4/QuestRateCommand.java b/src/client/command/commands/gm4/QuestRateCommand.java
similarity index 97%
rename from src/client/command/commands/v4/QuestRateCommand.java
rename to src/client/command/commands/gm4/QuestRateCommand.java
index 43f329e85..ea93261dd 100644
--- a/src/client/command/commands/v4/QuestRateCommand.java
+++ b/src/client/command/commands/gm4/QuestRateCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v4;
+package client.command.commands.gm4;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v4/ServerMessageCommand.java b/src/client/command/commands/gm4/ServerMessageCommand.java
similarity index 97%
rename from src/client/command/commands/v4/ServerMessageCommand.java
rename to src/client/command/commands/gm4/ServerMessageCommand.java
index 00b02992c..428133ede 100644
--- a/src/client/command/commands/v4/ServerMessageCommand.java
+++ b/src/client/command/commands/gm4/ServerMessageCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v4;
+package client.command.commands.gm4;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v4/SetEqStatCommand.java b/src/client/command/commands/gm4/SetEqStatCommand.java
similarity index 72%
rename from src/client/command/commands/v4/SetEqStatCommand.java
rename to src/client/command/commands/gm4/SetEqStatCommand.java
index f616f8601..61546c642 100644
--- a/src/client/command/commands/v4/SetEqStatCommand.java
+++ b/src/client/command/commands/gm4/SetEqStatCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v4;
+package client.command.commands.gm4;
 
 import client.command.Command;
 import client.MapleClient;
@@ -50,29 +50,29 @@ public void execute(MapleClient c, String[] params) {
         
         for (byte i = 1; i <= equip.getSlotLimit(); i++) {
             try {
-                Equip eu = (Equip) equip.getItem(i);
-                if (eu == null) continue;
+                Equip eq = (Equip) equip.getItem(i);
+                if (eq == null) continue;
 
-                eu.setWdef(newStat);
-                eu.setAcc(newStat);
-                eu.setAvoid(newStat);
-                eu.setJump(newSpdJmp);
-                eu.setMatk(newStat);
-                eu.setMdef(newStat);
-                eu.setHp(newStat);
-                eu.setMp(newStat);
-                eu.setSpeed(newSpdJmp);
-                eu.setWatk(newStat);
-                eu.setDex(newStat);
-                eu.setInt(newStat);
-                eu.setStr(newStat);
-                eu.setLuk(newStat);
+                eq.setWdef(newStat);
+                eq.setAcc(newStat);
+                eq.setAvoid(newStat);
+                eq.setJump(newSpdJmp);
+                eq.setMatk(newStat);
+                eq.setMdef(newStat);
+                eq.setHp(newStat);
+                eq.setMp(newStat);
+                eq.setSpeed(newSpdJmp);
+                eq.setWatk(newStat);
+                eq.setDex(newStat);
+                eq.setInt(newStat);
+                eq.setStr(newStat);
+                eq.setLuk(newStat);
 
-                byte flag = eu.getFlag();
+                byte flag = eq.getFlag();
                 flag |= ItemConstants.UNTRADEABLE;
-                eu.setFlag(flag);
+                eq.setFlag(flag);
 
-                player.forceUpdateItem(eu);
+                player.forceUpdateItem(eq);
             } catch (Exception e) {
                 e.printStackTrace();
             }
diff --git a/src/client/command/commands/v4/TravelRateCommand.java b/src/client/command/commands/gm4/TravelRateCommand.java
similarity index 97%
rename from src/client/command/commands/v4/TravelRateCommand.java
rename to src/client/command/commands/gm4/TravelRateCommand.java
index acd2092f9..e62d466cc 100644
--- a/src/client/command/commands/v4/TravelRateCommand.java
+++ b/src/client/command/commands/gm4/TravelRateCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v4;
+package client.command.commands.gm4;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v4/ZakumCommand.java b/src/client/command/commands/gm4/ZakumCommand.java
similarity index 97%
rename from src/client/command/commands/v4/ZakumCommand.java
rename to src/client/command/commands/gm4/ZakumCommand.java
index fe2b22aac..97a8f4e48 100644
--- a/src/client/command/commands/v4/ZakumCommand.java
+++ b/src/client/command/commands/gm4/ZakumCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v4;
+package client.command.commands.gm4;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v5/DebugCommand.java b/src/client/command/commands/gm5/DebugCommand.java
similarity index 99%
rename from src/client/command/commands/v5/DebugCommand.java
rename to src/client/command/commands/gm5/DebugCommand.java
index df8c3a3a3..1bc4e0f8b 100644
--- a/src/client/command/commands/v5/DebugCommand.java
+++ b/src/client/command/commands/gm5/DebugCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v5;
+package client.command.commands.gm5;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v5/SetCommand.java b/src/client/command/commands/gm5/SetCommand.java
similarity index 97%
rename from src/client/command/commands/v5/SetCommand.java
rename to src/client/command/commands/gm5/SetCommand.java
index a01613e27..761418975 100644
--- a/src/client/command/commands/v5/SetCommand.java
+++ b/src/client/command/commands/gm5/SetCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v5;
+package client.command.commands.gm5;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v5/ShowPacketsCommand.java b/src/client/command/commands/gm5/ShowPacketsCommand.java
similarity index 97%
rename from src/client/command/commands/v5/ShowPacketsCommand.java
rename to src/client/command/commands/gm5/ShowPacketsCommand.java
index 284cab3b5..ff1798cc8 100644
--- a/src/client/command/commands/v5/ShowPacketsCommand.java
+++ b/src/client/command/commands/gm5/ShowPacketsCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v5;
+package client.command.commands.gm5;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v6/ClearQuestCacheCommand.java b/src/client/command/commands/gm6/ClearQuestCacheCommand.java
similarity index 97%
rename from src/client/command/commands/v6/ClearQuestCacheCommand.java
rename to src/client/command/commands/gm6/ClearQuestCacheCommand.java
index bec633bf5..c50822e71 100644
--- a/src/client/command/commands/v6/ClearQuestCacheCommand.java
+++ b/src/client/command/commands/gm6/ClearQuestCacheCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v6;
+package client.command.commands.gm6;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v6/ClearQuestCommand.java b/src/client/command/commands/gm6/ClearQuestCommand.java
similarity index 97%
rename from src/client/command/commands/v6/ClearQuestCommand.java
rename to src/client/command/commands/gm6/ClearQuestCommand.java
index db8b5ebef..e15b2f32e 100644
--- a/src/client/command/commands/v6/ClearQuestCommand.java
+++ b/src/client/command/commands/gm6/ClearQuestCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v6;
+package client.command.commands.gm6;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v6/DCAllCommand.java b/src/client/command/commands/gm6/DCAllCommand.java
similarity index 97%
rename from src/client/command/commands/v6/DCAllCommand.java
rename to src/client/command/commands/gm6/DCAllCommand.java
index 382935ea1..caa248345 100644
--- a/src/client/command/commands/v6/DCAllCommand.java
+++ b/src/client/command/commands/gm6/DCAllCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v6;
+package client.command.commands.gm6;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v6/EraseAllPNpcsCommand.java b/src/client/command/commands/gm6/EraseAllPNpcsCommand.java
similarity index 97%
rename from src/client/command/commands/v6/EraseAllPNpcsCommand.java
rename to src/client/command/commands/gm6/EraseAllPNpcsCommand.java
index 7d32d5f12..1161acc4f 100644
--- a/src/client/command/commands/v6/EraseAllPNpcsCommand.java
+++ b/src/client/command/commands/gm6/EraseAllPNpcsCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v6;
+package client.command.commands.gm6;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v6/FredCommand.java b/src/client/command/commands/gm6/FredCommand.java
similarity index 97%
rename from src/client/command/commands/v6/FredCommand.java
rename to src/client/command/commands/gm6/FredCommand.java
index 85a2424ed..8e6722fac 100644
--- a/src/client/command/commands/v6/FredCommand.java
+++ b/src/client/command/commands/gm6/FredCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v6;
+package client.command.commands.gm6;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v6/GetAccCommand.java b/src/client/command/commands/gm6/GetAccCommand.java
similarity index 97%
rename from src/client/command/commands/v6/GetAccCommand.java
rename to src/client/command/commands/gm6/GetAccCommand.java
index 74487fae7..f6cf6c9e9 100644
--- a/src/client/command/commands/v6/GetAccCommand.java
+++ b/src/client/command/commands/gm6/GetAccCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v6;
+package client.command.commands.gm6;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v6/MapPlayersCommand.java b/src/client/command/commands/gm6/MapPlayersCommand.java
similarity index 91%
rename from src/client/command/commands/v6/MapPlayersCommand.java
rename to src/client/command/commands/gm6/MapPlayersCommand.java
index 93bd128a3..d52fa4921 100644
--- a/src/client/command/commands/v6/MapPlayersCommand.java
+++ b/src/client/command/commands/gm6/MapPlayersCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v6;
+package client.command.commands.gm6;
 
 import client.command.Command;
 import client.MapleClient;
@@ -43,13 +43,13 @@ public void execute(MapleClient c, String[] params) {
             for (MapleCharacter chr : world.getPlayerStorage().getAllCharacters()) {
                 int curMap = chr.getMapId();
                 String hp = Integer.toString(chr.getHp());
-                String maxhp = Integer.toString(chr.getMaxHp());
+                String maxhp = Integer.toString(chr.getCurrentMaxHp());
                 String name = chr.getName() + ": " + hp + "/" + maxhp;
                 if (map == curMap) {
                     names = names.equals("") ? name : (names + ", " + name);
                 }
             }
         }
-        player.message("These b lurkin: " + names);
+        player.message("Players on mapid " + map + ": " + names);
     }
 }
diff --git a/src/client/command/commands/v6/SaveAllCommand.java b/src/client/command/commands/gm6/SaveAllCommand.java
similarity index 97%
rename from src/client/command/commands/v6/SaveAllCommand.java
rename to src/client/command/commands/gm6/SaveAllCommand.java
index dd0d2a87e..648e4450a 100644
--- a/src/client/command/commands/v6/SaveAllCommand.java
+++ b/src/client/command/commands/gm6/SaveAllCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v6;
+package client.command.commands.gm6;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v6/ServerAddChannelCommand.java b/src/client/command/commands/gm6/ServerAddChannelCommand.java
similarity index 98%
rename from src/client/command/commands/v6/ServerAddChannelCommand.java
rename to src/client/command/commands/gm6/ServerAddChannelCommand.java
index e75e232f7..a9055f2ab 100644
--- a/src/client/command/commands/v6/ServerAddChannelCommand.java
+++ b/src/client/command/commands/gm6/ServerAddChannelCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v6;
+package client.command.commands.gm6;
 
 import client.MapleCharacter;
 import client.command.Command;
diff --git a/src/client/command/commands/v6/ServerAddWorldCommand.java b/src/client/command/commands/gm6/ServerAddWorldCommand.java
similarity index 98%
rename from src/client/command/commands/v6/ServerAddWorldCommand.java
rename to src/client/command/commands/gm6/ServerAddWorldCommand.java
index 9414a5391..00aae016d 100644
--- a/src/client/command/commands/v6/ServerAddWorldCommand.java
+++ b/src/client/command/commands/gm6/ServerAddWorldCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v6;
+package client.command.commands.gm6;
 
 import client.MapleCharacter;
 import client.command.Command;
diff --git a/src/client/command/commands/v6/ServerRemoveChannelCommand.java b/src/client/command/commands/gm6/ServerRemoveChannelCommand.java
similarity index 98%
rename from src/client/command/commands/v6/ServerRemoveChannelCommand.java
rename to src/client/command/commands/gm6/ServerRemoveChannelCommand.java
index 95f00ae76..09385dbd4 100644
--- a/src/client/command/commands/v6/ServerRemoveChannelCommand.java
+++ b/src/client/command/commands/gm6/ServerRemoveChannelCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v6;
+package client.command.commands.gm6;
 
 import client.MapleCharacter;
 import client.command.Command;
diff --git a/src/client/command/commands/v6/ServerRemoveWorldCommand.java b/src/client/command/commands/gm6/ServerRemoveWorldCommand.java
similarity index 98%
rename from src/client/command/commands/v6/ServerRemoveWorldCommand.java
rename to src/client/command/commands/gm6/ServerRemoveWorldCommand.java
index 217d74d01..b298965c7 100644
--- a/src/client/command/commands/v6/ServerRemoveWorldCommand.java
+++ b/src/client/command/commands/gm6/ServerRemoveWorldCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v6;
+package client.command.commands.gm6;
 
 import client.MapleCharacter;
 import client.command.Command;
diff --git a/src/client/command/commands/v6/SetGmLevelCommand.java b/src/client/command/commands/gm6/SetGmLevelCommand.java
similarity index 98%
rename from src/client/command/commands/v6/SetGmLevelCommand.java
rename to src/client/command/commands/gm6/SetGmLevelCommand.java
index f746b86e8..19d8b01ab 100644
--- a/src/client/command/commands/v6/SetGmLevelCommand.java
+++ b/src/client/command/commands/gm6/SetGmLevelCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v6;
+package client.command.commands.gm6;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v6/ShutdownCommand.java b/src/client/command/commands/gm6/ShutdownCommand.java
similarity index 92%
rename from src/client/command/commands/v6/ShutdownCommand.java
rename to src/client/command/commands/gm6/ShutdownCommand.java
index f678d5e6a..97c5fbec0 100644
--- a/src/client/command/commands/v6/ShutdownCommand.java
+++ b/src/client/command/commands/gm6/ShutdownCommand.java
@@ -21,13 +21,14 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v6;
+package client.command.commands.gm6;
 
 import client.command.Command;
 import client.MapleClient;
 import client.MapleCharacter;
 import net.server.Server;
 import net.server.world.World;
+import server.TimerManager;
 
 public class ShutdownCommand extends Command {
     {
@@ -39,11 +40,13 @@ public void execute(MapleClient c, String[] params) {
         MapleCharacter player = c.getPlayer();
         if (params.length < 1){
             player.yellowMessage("Syntax: !shutdown [<time>|NOW]");
+            return;
         }
+        
         int time = 60000;
         if (params[0].equalsIgnoreCase("now")){
             time = 1;
-        }else {
+        } else {
             time *= Integer.parseInt(params[0]);
         }
 
@@ -65,5 +68,7 @@ public void execute(MapleClient c, String[] params) {
                 }
             }
         }
+        
+        TimerManager.getInstance().schedule(Server.getInstance().shutdown(false), time);
     }
 }
diff --git a/src/client/command/commands/v6/SpawnAllPNpcsCommand.java b/src/client/command/commands/gm6/SpawnAllPNpcsCommand.java
similarity index 97%
rename from src/client/command/commands/v6/SpawnAllPNpcsCommand.java
rename to src/client/command/commands/gm6/SpawnAllPNpcsCommand.java
index 2c6e95bfa..a1da8ac36 100644
--- a/src/client/command/commands/v6/SpawnAllPNpcsCommand.java
+++ b/src/client/command/commands/gm6/SpawnAllPNpcsCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v6;
+package client.command.commands.gm6;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v6/WarpWorldCommand.java b/src/client/command/commands/gm6/WarpWorldCommand.java
similarity index 98%
rename from src/client/command/commands/v6/WarpWorldCommand.java
rename to src/client/command/commands/gm6/WarpWorldCommand.java
index 664c4ac73..30cd7e25a 100644
--- a/src/client/command/commands/v6/WarpWorldCommand.java
+++ b/src/client/command/commands/gm6/WarpWorldCommand.java
@@ -21,7 +21,7 @@
 /*
    @Author: Arthur L - Refactored command content into modules
 */
-package client.command.commands.v6;
+package client.command.commands.gm6;
 
 import client.command.Command;
 import client.MapleClient;
diff --git a/src/client/command/commands/v0/StatDexCommand.java b/src/client/command/commands/v0/StatDexCommand.java
deleted file mode 100644
index 3154f8029..000000000
--- a/src/client/command/commands/v0/StatDexCommand.java
+++ /dev/null
@@ -1,57 +0,0 @@
-/*
-    This file is part of the HeavenMS MapleStory Server, commands OdinMS-based
-    Copyleft (L) 2016 - 2018 RonanLana
-
-    This program is free software: you can redistribute it and/or modify
-    it under the terms of the GNU Affero General Public License as
-    published by the Free Software Foundation version 3 as published by
-    the Free Software Foundation. You may not use, modify or distribute
-    this program under any other version of the GNU Affero General Public
-    License.
-
-    This program is distributed in the hope that it will be useful,
-    but WITHOUT ANY WARRANTY; without even the implied warranty of
-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-    GNU Affero General Public License for more details.
-
-    You should have received a copy of the GNU Affero General Public License
-    along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-/*
-   @Author: Arthur L - Refactored command content into modules
-*/
-package client.command.commands.v0;
-
-import client.MapleCharacter;
-import client.MapleClient;
-import client.MapleStat;
-import client.command.Command;
-
-public class StatDexCommand extends Command {
-    {
-        setDescription("");
-    }
-
-    @Override
-    public void execute(MapleClient c, String[] params) {
-        MapleCharacter player = c.getPlayer();
-        int remainingAp = player.getRemainingAp();
-
-        int amount = (params.length > 0) ? Math.min(Integer.parseInt(params[0]), remainingAp) : remainingAp;
-        if (amount > 0 && amount <= remainingAp && amount <= 32763) {
-            int playerStat = player.getDex();
-            
-            if (amount + playerStat <= 32767 && amount + playerStat >= 4) {
-                player.setDex(playerStat + amount);
-                player.updateSingleStat(MapleStat.DEX, playerStat);
-                player.setRemainingAp(remainingAp - amount);
-                player.updateSingleStat(MapleStat.AVAILABLEAP, remainingAp);
-            } else {
-                player.dropMessage("Please make sure the stat you are trying to raise is not over 32,767 or under 4.");
-            }
-        } else {
-            player.dropMessage("Please make sure your AP is not over 32,767 and you have enough to distribute.");
-        }
-    }
-}
diff --git a/src/client/command/commands/v0/StatIntCommand.java b/src/client/command/commands/v0/StatIntCommand.java
deleted file mode 100644
index be1d310d7..000000000
--- a/src/client/command/commands/v0/StatIntCommand.java
+++ /dev/null
@@ -1,57 +0,0 @@
-/*
-    This file is part of the HeavenMS MapleStory Server, commands OdinMS-based
-    Copyleft (L) 2016 - 2018 RonanLana
-
-    This program is free software: you can redistribute it and/or modify
-    it under the terms of the GNU Affero General Public License as
-    published by the Free Software Foundation version 3 as published by
-    the Free Software Foundation. You may not use, modify or distribute
-    this program under any other version of the GNU Affero General Public
-    License.
-
-    This program is distributed in the hope that it will be useful,
-    but WITHOUT ANY WARRANTY; without even the implied warranty of
-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-    GNU Affero General Public License for more details.
-
-    You should have received a copy of the GNU Affero General Public License
-    along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-/*
-   @Author: Arthur L - Refactored command content into modules
-*/
-package client.command.commands.v0;
-
-import client.MapleStat;
-import client.command.Command;
-import client.MapleClient;
-import client.MapleCharacter;
-
-public class StatIntCommand extends Command {
-    {
-        setDescription("");
-    }
-
-    @Override
-    public void execute(MapleClient c, String[] params) {
-        MapleCharacter player = c.getPlayer();
-        int remainingAp = player.getRemainingAp();
-
-        int amount = (params.length > 0) ? Math.min(Integer.parseInt(params[0]), remainingAp) : remainingAp;
-        if (amount > 0 && amount <= remainingAp && amount <= 32763) {
-            int playerStat = player.getInt();
-            
-            if (amount + playerStat <= 32767 && amount + playerStat >= 4) {
-                player.setInt(playerStat + amount);
-                player.updateSingleStat(MapleStat.INT, playerStat);
-                player.setRemainingAp(remainingAp - amount);
-                player.updateSingleStat(MapleStat.AVAILABLEAP, remainingAp);
-            } else {
-                player.dropMessage("Please make sure the stat you are trying to raise is not over 32,767 or under 4.");
-            }
-        } else {
-            player.dropMessage("Please make sure your AP is not over 32,767 and you have enough to distribute.");
-        }
-    }
-}
diff --git a/src/client/command/commands/v0/StatLukCommand.java b/src/client/command/commands/v0/StatLukCommand.java
deleted file mode 100644
index 5754fbd78..000000000
--- a/src/client/command/commands/v0/StatLukCommand.java
+++ /dev/null
@@ -1,57 +0,0 @@
-/*
-    This file is part of the HeavenMS MapleStory Server, commands OdinMS-based
-    Copyleft (L) 2016 - 2018 RonanLana
-
-    This program is free software: you can redistribute it and/or modify
-    it under the terms of the GNU Affero General Public License as
-    published by the Free Software Foundation version 3 as published by
-    the Free Software Foundation. You may not use, modify or distribute
-    this program under any other version of the GNU Affero General Public
-    License.
-
-    This program is distributed in the hope that it will be useful,
-    but WITHOUT ANY WARRANTY; without even the implied warranty of
-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-    GNU Affero General Public License for more details.
-
-    You should have received a copy of the GNU Affero General Public License
-    along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-/*
-   @Author: Arthur L - Refactored command content into modules
-*/
-package client.command.commands.v0;
-
-import client.MapleCharacter;
-import client.MapleClient;
-import client.MapleStat;
-import client.command.Command;
-
-public class StatLukCommand extends Command {
-    {
-        setDescription("");
-    }
-
-    @Override
-    public void execute(MapleClient c, String[] params) {
-        MapleCharacter player = c.getPlayer();
-        int remainingAp = player.getRemainingAp();
-
-        int amount = (params.length > 0) ? Math.min(Integer.parseInt(params[0]), remainingAp) : remainingAp;
-        if (amount > 0 && amount <= remainingAp && amount <= 32763) {
-            int playerStat = player.getLuk();
-            
-            if (amount + playerStat <= 32767 && amount + playerStat >= 4) {
-                player.setLuk(playerStat + amount);
-                player.updateSingleStat(MapleStat.LUK, playerStat);
-                player.setRemainingAp(remainingAp - amount);
-                player.updateSingleStat(MapleStat.AVAILABLEAP, remainingAp);
-            } else {
-                player.dropMessage("Please make sure the stat you are trying to raise is not over 32,767 or under 4.");
-            }
-        } else {
-            player.dropMessage("Please make sure your AP is not over 32,767 and you have enough to distribute.");
-        }
-    }
-}
diff --git a/src/client/command/commands/v0/StatStrCommand.java b/src/client/command/commands/v0/StatStrCommand.java
deleted file mode 100644
index da81e7e7b..000000000
--- a/src/client/command/commands/v0/StatStrCommand.java
+++ /dev/null
@@ -1,57 +0,0 @@
-/*
-    This file is part of the HeavenMS MapleStory Server, commands OdinMS-based
-    Copyleft (L) 2016 - 2018 RonanLana
-
-    This program is free software: you can redistribute it and/or modify
-    it under the terms of the GNU Affero General Public License as
-    published by the Free Software Foundation version 3 as published by
-    the Free Software Foundation. You may not use, modify or distribute
-    this program under any other version of the GNU Affero General Public
-    License.
-
-    This program is distributed in the hope that it will be useful,
-    but WITHOUT ANY WARRANTY; without even the implied warranty of
-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-    GNU Affero General Public License for more details.
-
-    You should have received a copy of the GNU Affero General Public License
-    along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-/*
-   @Author: Arthur L - Refactored command content into modules
-*/
-package client.command.commands.v0;
-
-import client.MapleStat;
-import client.command.Command;
-import client.MapleClient;
-import client.MapleCharacter;
-
-public class StatStrCommand extends Command {
-    {
-        setDescription("");
-    }
-
-    @Override
-    public void execute(MapleClient c, String[] params) {
-        MapleCharacter player = c.getPlayer();
-        int remainingAp = player.getRemainingAp();
-
-        int amount = (params.length > 0) ? Math.min(Integer.parseInt(params[0]), remainingAp) : remainingAp;
-        if (amount > 0 && amount <= remainingAp && amount <= 32763) {
-            int playerStat = player.getStr();
-            
-            if (amount + playerStat <= 32767 && amount + playerStat >= 4) {
-                player.setStr(playerStat + amount);
-                player.updateSingleStat(MapleStat.STR, playerStat);
-                player.setRemainingAp(remainingAp - amount);
-                player.updateSingleStat(MapleStat.AVAILABLEAP, remainingAp);
-            } else {
-                player.dropMessage("Please make sure the stat you are trying to raise is not over 32,767 or under 4.");
-            }
-        } else {
-            player.dropMessage("Please make sure your AP is not over 32,767 and you have enough to distribute.");
-        }
-    }
-}
diff --git a/src/client/inventory/Equip.java b/src/client/inventory/Equip.java
index 26fd6e7dd..67b461365 100644
--- a/src/client/inventory/Equip.java
+++ b/src/client/inventory/Equip.java
@@ -498,11 +498,18 @@ private static double normalizedMasteryExp(int reqLevel) {
         }
     }
     
-    public void gainItemExp(MapleClient c, int gain) {  // Ronan's Equip Exp gain method
+    public synchronized void gainItemExp(MapleClient c, int gain) {  // Ronan's Equip Exp gain method
         MapleItemInformationProvider ii = MapleItemInformationProvider.getInstance();
-        if(!ii.isUpgradeable(this.getItemId()) || itemLevel >= 30) return;
+        if(!ii.isUpgradeable(this.getItemId())) {
+            return;
+        }
+        
+        int equipMaxLevel = Math.min(30, Math.max(ii.getEquipLevel(this.getItemId(), true), ServerConstants.USE_EQUIPMNT_LVLUP));
+        if (itemLevel >= equipMaxLevel) {
+            return;
+        }
         
-        int reqLevel = ii.getEquipStats(this.getItemId()).get("reqLevel");
+        int reqLevel = ii.getEquipLevelReq(this.getItemId());
         
         float masteryModifier = (float)(ServerConstants.EQUIP_EXP_RATE * ExpTable.getExpNeededForLevel(1)) / (float)normalizedMasteryExp(reqLevel);
         float elementModifier = (isElemental) ? 0.85f : 0.6f;
@@ -516,20 +523,20 @@ public void gainItemExp(MapleClient c, int gain) {  // Ronan's Equip Exp gain me
         
         if (itemExp >= expNeeded) {
             while(itemExp >= expNeeded) {
-                itemExp = (itemExp - expNeeded);
+                itemExp -= expNeeded;
                 gainLevel(c);
 
-                if(itemLevel == ServerConstants.USE_EQUIPMNT_LVLUP) {
+                if(itemLevel >= equipMaxLevel) {
                     itemExp = 0.0f;
                     break;
                 }
                 
                 expNeeded = ExpTable.getEquipExpNeededForLevel(itemLevel);
             }
-        } else {
-            c.getPlayer().forceUpdateItem(this);
-            //if(ServerConstants.USE_DEBUG) c.getPlayer().dropMessage("'" + ii.getName(this.getItemId()) + "': " + itemExp + " / " + expNeeded);
         }
+        
+        c.getPlayer().forceUpdateItem(this);
+        //if(ServerConstants.USE_DEBUG) c.getPlayer().dropMessage("'" + ii.getName(this.getItemId()) + "': " + itemExp + " / " + expNeeded);
     }
     
     private boolean reachedMaxLevel() {
diff --git a/src/client/inventory/MapleInventory.java b/src/client/inventory/MapleInventory.java
index d8f20304f..457c3d256 100644
--- a/src/client/inventory/MapleInventory.java
+++ b/src/client/inventory/MapleInventory.java
@@ -306,35 +306,37 @@ protected short addSlot(Item item) {
             return -1;
         }
         
+        short slotId;
         lock.lock();
         try {
-            short slotId = getNextFreeSlot();
+            slotId = getNextFreeSlot();
             if (slotId < 0) {
                 return -1;
             }
-            inventory.put(slotId, item);
-            
-            if(ItemConstants.isRateCoupon(item.getItemId())) {
-                owner.updateCouponRates();
-            }
             
-            return slotId;
+            inventory.put(slotId, item);
         } finally {
             lock.unlock();
         }
+        
+        if (ItemConstants.isRateCoupon(item.getItemId())) {
+            owner.updateCouponRates();
+        }
+
+        return slotId;
     }
     
     protected void addSlotFromDB(short slot, Item item) {
         lock.lock();
         try {
             inventory.put(slot, item);
-            
-            if(ItemConstants.isRateCoupon(item.getItemId())) {
-                owner.updateCouponRates();
-            }
         } finally {
             lock.unlock();
         }
+        
+        if (ItemConstants.isRateCoupon(item.getItemId())) {
+            owner.updateCouponRates();
+        }
     }
     
     public void removeSlot(short slot) {
@@ -346,7 +348,7 @@ public void removeSlot(short slot) {
             lock.unlock();
         }
         
-        if(item != null && ItemConstants.isRateCoupon(item.getItemId())) {
+        if (item != null && ItemConstants.isRateCoupon(item.getItemId())) {
             owner.updateCouponRates();
         }
     }
diff --git a/src/client/inventory/MapleInventoryProof.java b/src/client/inventory/MapleInventoryProof.java
index cc2ab8494..55c42cd87 100644
--- a/src/client/inventory/MapleInventoryProof.java
+++ b/src/client/inventory/MapleInventoryProof.java
@@ -1,6 +1,6 @@
 /*
     This file is part of the HeavenMS MapleStory Server
-    Copyleft 2016 - 2018 RonanLana
+    Copyleft (L) 2016 - 2018 RonanLana
 
     This program is free software: you can redistribute it and/or modify
     it under the terms of the GNU Affero General Public License as
diff --git a/src/client/processor/AssignAPProcessor.java b/src/client/processor/AssignAPProcessor.java
index 603ead606..801816ac3 100644
--- a/src/client/processor/AssignAPProcessor.java
+++ b/src/client/processor/AssignAPProcessor.java
@@ -44,7 +44,6 @@
 import java.util.Collections;
 import java.util.List;
 import tools.MaplePacketCreator;
-import tools.Pair;
 import tools.Randomizer;
 import tools.data.input.SeekableLittleEndianAccessor;
 
@@ -63,9 +62,10 @@ public static void APAutoAssignAction(SeekableLittleEndianAccessor slea, MapleCl
         c.lockClient();
         try {
             int[] statGain = new int[4];
-            int[] statEqpd = new int[4];
+            int[] statUpdate = new int[4];
             statGain[0] = 0; statGain[1] = 0; statGain[2] = 0; statGain[3] = 0;
 
+            int remainingAp = chr.getRemainingAp();
             slea.skip(8);
 
             if(ServerConstants.USE_SERVER_AUTOASSIGNER) {
@@ -94,11 +94,11 @@ public static void APAutoAssignAction(SeekableLittleEndianAccessor slea, MapleCl
                     //if(nEquip.getInt() > 0) eqpIntList.add(nEquip.getInt()); //not needed...
                     int_ += nEquip.getInt();
                 }
-
-                statEqpd[0] = str;
-                statEqpd[1] = dex;
-                statEqpd[2] = luk;
-                statEqpd[3] = int_;
+                
+                statUpdate[0] = chr.getStr();
+                statUpdate[1] = chr.getDex();
+                statUpdate[2] = chr.getLuk();
+                statUpdate[3] = chr.getInt();
 
                 Collections.sort(eqpStrList, Collections.reverseOrder());
                 Collections.sort(eqpDexList, Collections.reverseOrder());
@@ -114,7 +114,7 @@ public static void APAutoAssignAction(SeekableLittleEndianAccessor slea, MapleCl
                 //c.getPlayer().message("SUM EQUIP STATS -> STR: " + str + " DEX: " + dex + " LUK: " + luk + " INT: " + int_);
 
                 MapleJob stance = c.getPlayer().getJobStyle(opt);
-                int prStat = 0, scStat = 0, trStat = 0, temp, tempAp = chr.getRemainingAp(), CAP;
+                int prStat = 0, scStat = 0, trStat = 0, temp, tempAp = remainingAp, CAP;
                 if (tempAp < 1) return;
 
                 MapleStat primary, secondary, tertiary = MapleStat.LUK;
@@ -311,20 +311,18 @@ public static void APAutoAssignAction(SeekableLittleEndianAccessor slea, MapleCl
 
                 int extras = 0;
 
-                extras = gainStatByType(chr, primary, statGain, prStat + extras);
-                extras = gainStatByType(chr, secondary, statGain, scStat + extras);
-                extras = gainStatByType(chr, tertiary, statGain, trStat + extras);
+                extras = gainStatByType(primary, statGain, prStat + extras, statUpdate);
+                extras = gainStatByType(secondary, statGain, scStat + extras, statUpdate);
+                extras = gainStatByType(tertiary, statGain, trStat + extras, statUpdate);
 
                 if(extras > 0) {    //redistribute surplus in priority order
-                    extras = gainStatByType(chr, primary, statGain, extras);
-                    extras = gainStatByType(chr, secondary, statGain, extras);
-                    extras = gainStatByType(chr, tertiary, statGain, extras);
-                    gainStatByType(chr, getQuaternaryStat(stance), statGain, extras);
+                    extras = gainStatByType(primary, statGain, extras, statUpdate);
+                    extras = gainStatByType(secondary, statGain, extras, statUpdate);
+                    extras = gainStatByType(tertiary, statGain, extras, statUpdate);
+                    gainStatByType(getQuaternaryStat(stance), statGain, extras, statUpdate);
                 }
 
-                int remainingAp = (chr.getRemainingAp() - getAccumulatedStatGain(statGain));
-                chr.setRemainingAp(remainingAp);
-                chr.updateSingleStat(MapleStat.AVAILABLEAP, remainingAp);
+                chr.assignStrDexIntLuk(statGain[0], statGain[1], statGain[3], statGain[2]);
                 c.announce(MaplePacketCreator.enableActions());
 
                 //----------------------------------------------------------------------------------------
@@ -345,30 +343,18 @@ public void run() {
                     
                     return;
                 }
-
-                for (Item item : equippedC) {   //selecting the biggest AP value of each stat from each equipped item.
-                    Equip nEquip = (Equip)item;
-
-                    statEqpd[0] += nEquip.getStr();
-                    statEqpd[1] += nEquip.getDex();
-                    statEqpd[2] += nEquip.getLuk();
-                    statEqpd[3] += nEquip.getInt();
-                }
-
-                int total = 0;
-                int extras = 0;
+                
                 for (int i = 0; i < 2; i++) {
                     int type = slea.readInt();
                     int tempVal = slea.readInt();
-                    if (tempVal < 0 || tempVal > chr.getRemainingAp()) {
+                    if (tempVal < 0 || tempVal > remainingAp) {
                         return;
                     }
-                    total += tempVal;
-                    extras += gainStatByType(chr, MapleStat.getBy5ByteEncoding(type), statGain, tempVal);
+                    
+                    gainStatByType(MapleStat.getBy5ByteEncoding(type), statGain, tempVal, statUpdate);
                 }
-                int remainingAp = (chr.getRemainingAp() - total) + extras;
-                chr.setRemainingAp(remainingAp);
-                chr.updateSingleStat(MapleStat.AVAILABLEAP, remainingAp);
+                
+                chr.assignStrDexIntLuk(statGain[0], statGain[1], statGain[3], statGain[2]);
                 c.announce(MaplePacketCreator.enableActions());
             }
         } finally {
@@ -380,53 +366,51 @@ private static int getNthHighestStat(List<Short> statList, short rank) {    // r
         return(statList.size() <= rank ? 0 : statList.get(rank));
     }
     
-    private static int gainStatByType(MapleCharacter chr, MapleStat type, int[] statGain, int gain) {
+    private static int gainStatByType(MapleStat type, int[] statGain, int gain, int statUpdate[]) {
         if(gain <= 0) return 0;
         
         int newVal = 0;
         if (type.equals(MapleStat.STR)) {
-            newVal = chr.getStr() + gain;
+            newVal = statUpdate[0] + gain;
             if (newVal > ServerConstants.MAX_AP) {
                 statGain[0] += (gain - (newVal - ServerConstants.MAX_AP));
-                chr.setStr(ServerConstants.MAX_AP);
+                statUpdate[0] = ServerConstants.MAX_AP;
             } else {
                 statGain[0] += gain;
-                chr.setStr(newVal);
+                statUpdate[0] = newVal;
             }
         } else if (type.equals(MapleStat.INT)) {
-            newVal = chr.getInt() + gain;
+            newVal = statUpdate[3] + gain;
             if (newVal > ServerConstants.MAX_AP) {
                 statGain[3] += (gain - (newVal - ServerConstants.MAX_AP));
-                chr.setInt(ServerConstants.MAX_AP);
+                statUpdate[3] = ServerConstants.MAX_AP;
             } else {
                 statGain[3] += gain;
-                chr.setInt(newVal);
+                statUpdate[3] = newVal;
             }
         } else if (type.equals(MapleStat.LUK)) {
-            newVal = chr.getLuk() + gain;
+            newVal = statUpdate[2] + gain;
             if (newVal > ServerConstants.MAX_AP) {
                 statGain[2] += (gain - (newVal - ServerConstants.MAX_AP));
-                chr.setLuk(ServerConstants.MAX_AP);
+                statUpdate[2] = ServerConstants.MAX_AP;
             } else {
                 statGain[2] += gain;
-                chr.setLuk(newVal);
+                statUpdate[2] = newVal;
             }
         } else if (type.equals(MapleStat.DEX)) {
-            newVal = chr.getDex() + gain;
+            newVal = statUpdate[1] + gain;
             if (newVal > ServerConstants.MAX_AP) {
                 statGain[1] += (gain - (newVal - ServerConstants.MAX_AP));
-                chr.setDex(ServerConstants.MAX_AP);
+                statUpdate[1] = ServerConstants.MAX_AP;
             } else {
                 statGain[1] += gain;
-                chr.setDex(newVal);
+                statUpdate[1] = newVal;
             }
         }
         
         if (newVal > ServerConstants.MAX_AP) {
-            chr.updateSingleStat(type, ServerConstants.MAX_AP);
             return newVal - ServerConstants.MAX_AP;
         }
-        chr.updateSingleStat(type, newVal);
         return 0;
     }
     
@@ -435,20 +419,9 @@ private static MapleStat getQuaternaryStat(MapleJob stance) {
         return MapleStat.STR;
     }
     
-    private static int getAccumulatedStatGain(int[] statGain) {
-        int acc = 0;
-        
-        for(byte i = 0; i < statGain.length; i++) {
-            acc += statGain[i];
-        }
-        
-        return acc;
-    }
-    
     public static boolean APResetAction(MapleClient c, int APFrom, int APTo) {
         c.lockClient();
         try {
-            List<Pair<MapleStat, Integer>> statupdate = new ArrayList<>(2);
             MapleCharacter player = c.getPlayer();
 
             switch (APFrom) {
@@ -458,7 +431,11 @@ public static boolean APResetAction(MapleClient c, int APFrom, int APTo) {
                         c.announce(MaplePacketCreator.enableActions());
                         return false;
                     }
-                    player.addStat(1, -1);
+                    if (!player.assignStr(-1)) {
+                        player.message("Couldn't execute AP reset operation.");
+                        c.announce(MaplePacketCreator.enableActions());
+                        return false;
+                    }
                     break;
                 case 128: // dex
                     if (player.getDex() < 5) {
@@ -466,7 +443,11 @@ public static boolean APResetAction(MapleClient c, int APFrom, int APTo) {
                         c.announce(MaplePacketCreator.enableActions());
                         return false;
                     }
-                    player.addStat(2, -1);
+                    if (!player.assignDex(-1)) {
+                        player.message("Couldn't execute AP reset operation.");
+                        c.announce(MaplePacketCreator.enableActions());
+                        return false;
+                    }
                     break;
                 case 256: // int
                     if (player.getInt() < 5) {
@@ -474,7 +455,11 @@ public static boolean APResetAction(MapleClient c, int APFrom, int APTo) {
                         c.announce(MaplePacketCreator.enableActions());
                         return false;
                     }
-                    player.addStat(3, -1);
+                    if (!player.assignInt(-1)) {
+                        player.message("Couldn't execute AP reset operation.");
+                        c.announce(MaplePacketCreator.enableActions());
+                        return false;
+                    }
                     break;
                 case 512: // luk
                     if (player.getLuk() < 5) {
@@ -482,7 +467,11 @@ public static boolean APResetAction(MapleClient c, int APFrom, int APTo) {
                         c.announce(MaplePacketCreator.enableActions());
                         return false;
                     }
-                    player.addStat(4, -1);
+                    if (!player.assignLuk(-1)) {
+                        player.message("Couldn't execute AP reset operation.");
+                        c.announce(MaplePacketCreator.enableActions());
+                        return false;
+                    }
                     break;
                 case 2048: // HP
                     if(ServerConstants.USE_ENFORCE_HPMP_SWAP) {
@@ -492,6 +481,7 @@ public static boolean APResetAction(MapleClient c, int APFrom, int APTo) {
                             return false;
                         }
                     }
+                    
                     if (player.getHpMpApUsed() < 1) {
                         player.message("You don't have enough HPMP stat points to spend on AP Reset.");
                         c.announce(MaplePacketCreator.enableActions());
@@ -500,27 +490,19 @@ public static boolean APResetAction(MapleClient c, int APFrom, int APTo) {
 
                     int hp = player.getMaxHp();
                     int level_ = player.getLevel();
-
-                    boolean canWash_ = true;
                     if (hp < level_ * 14 + 148) {
-                        canWash_ = false;
-                    }
-
-                    if (!canWash_) {
                         player.message("You don't have the minimum HP pool required to swap.");
                         c.announce(MaplePacketCreator.enableActions());
                         return false;
                     }
-
-                    player.setHpMpApUsed(player.getHpMpApUsed() - 1);
+                    
+                    int curHp = player.getHp();
                     int hplose = -takeHp(player.getJob());
-                    int nextHp = Math.max(1, player.getHp() + hplose), nextMaxHp = Math.max(50, player.getMaxHp() + hplose);
-
-                    player.setHp(nextHp);
-                    player.setMaxHp(nextMaxHp);
-                    statupdate.add(new Pair<>(MapleStat.HP, nextHp));
-                    statupdate.add(new Pair<>(MapleStat.MAXHP, nextMaxHp));
-
+                    player.assignHP(hplose, -1);
+                    if (!ServerConstants.USE_FIXED_RATIO_HPMP_UPDATE) {
+                        player.updateHp(Math.max(1, curHp + hplose));
+                    }
+                    
                     break;
                 case 8192: // MP
                     if(ServerConstants.USE_ENFORCE_HPMP_SWAP) {
@@ -530,6 +512,7 @@ public static boolean APResetAction(MapleClient c, int APFrom, int APTo) {
                             return false;
                         }
                     }
+                    
                     if (player.getHpMpApUsed() < 1) {
                         player.message("You don't have enough HPMP stat points to spend on AP Reset.");
                         c.announce(MaplePacketCreator.enableActions());
@@ -556,24 +539,20 @@ public static boolean APResetAction(MapleClient c, int APFrom, int APTo) {
                         c.announce(MaplePacketCreator.enableActions());
                         return false;
                     }
-
-                    player.setHpMpApUsed(player.getHpMpApUsed() - 1);
+                    
+                    int curMp = player.getMp();
                     int mplose = -takeMp(job);
-                    int nextMp = Math.max(0, player.getMp() + mplose), nextMaxMp = Math.max(5, player.getMaxMp() + mplose);
-
-                    player.setMp(nextMp);
-                    player.setMaxMp(nextMaxMp);
-                    statupdate.add(new Pair<>(MapleStat.MP, nextMp));
-                    statupdate.add(new Pair<>(MapleStat.MAXMP, nextMaxMp));
-
+                    player.assignMP(mplose, -1);
+                    if (!ServerConstants.USE_FIXED_RATIO_HPMP_UPDATE) {
+                        player.updateMp(Math.max(0, curMp + mplose));
+                    }
                     break;
                 default:
                     c.announce(MaplePacketCreator.updatePlayerStats(MaplePacketCreator.EMPTY_STATUPDATE, true, player));
                     return false;
             }
 
-            addStat(c, APTo, true);
-            c.announce(MaplePacketCreator.updatePlayerStats(statupdate, true, player));
+            addStat(player, APTo, true);
             return true;
         } finally {
             c.unlockClient();
@@ -583,69 +562,65 @@ public static boolean APResetAction(MapleClient c, int APFrom, int APTo) {
     public static void APAssignAction(MapleClient c, int num) {
         c.lockClient();
         try {
-            if (c.getPlayer().getRemainingAp() > 0) {
-                if (addStat(c, num, false)) {
-                    c.getPlayer().setRemainingAp(c.getPlayer().getRemainingAp() - 1);
-                    c.getPlayer().updateSingleStat(MapleStat.AVAILABLEAP, c.getPlayer().getRemainingAp());
-                }
-            }
-            c.announce(MaplePacketCreator.enableActions());
+            addStat(c.getPlayer(), num, false);
         } finally {
             c.unlockClient();
         }
     }
     
-    private static boolean addStat(MapleClient c, int apTo, boolean usedAPReset) {
+    private static boolean addStat(MapleCharacter chr, int apTo, boolean usedAPReset) {
         switch (apTo) {
-            case 64: // Str
-                if (c.getPlayer().getStr() >= 32767) {
+            case 64:
+                if (!chr.assignStr(1)) {
+                    chr.message("Couldn't execute AP assign operation.");
+                    chr.announce(MaplePacketCreator.enableActions());
                     return false;
                 }
-                c.getPlayer().addStat(1, 1);
                 break;
             case 128: // Dex
-                if (c.getPlayer().getDex() >= 32767) {
+                if (!chr.assignDex(1)) {
+                    chr.message("Couldn't execute AP assign operation.");
+                    chr.announce(MaplePacketCreator.enableActions());
                     return false;
                 }
-                c.getPlayer().addStat(2, 1);
                 break;
             case 256: // Int
-                if (c.getPlayer().getInt() >= 32767) {
+                if (!chr.assignInt(1)) {
+                    chr.message("Couldn't execute AP assign operation.");
+                    chr.announce(MaplePacketCreator.enableActions());
                     return false;
                 }
-                c.getPlayer().addStat(3, 1);
                 break;
             case 512: // Luk
-                if (c.getPlayer().getLuk() >= 32767) {
+                if (!chr.assignLuk(1)) {
+                    chr.message("Couldn't execute AP assign operation.");
+                    chr.announce(MaplePacketCreator.enableActions());
                     return false;
                 }
-                c.getPlayer().addStat(4, 1);
                 break;
-            case 2048: // HP
-                addHP(c.getPlayer(), addHP(c, usedAPReset));
+            case 2048:
+                if (!chr.assignHP(calcHpChange(chr, usedAPReset), 1)) {
+                    chr.message("Couldn't execute AP assign operation.");
+                    chr.announce(MaplePacketCreator.enableActions());
+                    return false;
+                }
                 break;
-            case 8192: // MP
-                addMP(c.getPlayer(), addMP(c, usedAPReset));
+            case 8192:
+                if (!chr.assignMP(calcMpChange(chr, usedAPReset), 1)) {
+                    chr.message("Couldn't execute AP assign operation.");
+                    chr.announce(MaplePacketCreator.enableActions());
+                    return false;
+                }
                 break;
             default:
-                c.announce(MaplePacketCreator.updatePlayerStats(MaplePacketCreator.EMPTY_STATUPDATE, true, c.getPlayer()));
+                chr.announce(MaplePacketCreator.updatePlayerStats(MaplePacketCreator.EMPTY_STATUPDATE, true, chr));
                 return false;
         }
         return true;
     }
 
-    private static int addHP(MapleClient c, boolean usedAPReset) {
-        MapleCharacter player = c.getPlayer();
+    private static int calcHpChange(MapleCharacter player, boolean usedAPReset) {
         MapleJob job = player.getJob();
-        int MaxHP = player.getMaxHp();
-        if (player.getHpMpApUsed() > 9999 || MaxHP >= 30000) {
-            return MaxHP;
-        }
-        
-        return MaxHP + calcHpChange(player, job, usedAPReset);
-    }
-    
-    private static int calcHpChange(MapleCharacter player, MapleJob job, boolean usedAPReset) {
         int MaxHP = 0;
         
         if (job.isA(MapleJob.WARRIOR) || job.isA(MapleJob.DAWNWARRIOR1)) {
@@ -737,18 +712,8 @@ private static int calcHpChange(MapleCharacter player, MapleJob job, boolean use
         return MaxHP;
     }
 
-    private static int addMP(MapleClient c, boolean usedAPReset) {
-        MapleCharacter player = c.getPlayer();
-        int MaxMP = player.getMaxMp();
+    private static int calcMpChange(MapleCharacter player, boolean usedAPReset) {
         MapleJob job = player.getJob();
-        if (player.getHpMpApUsed() > 9999 || player.getMaxMp() >= 30000) {
-            return MaxMP;
-        }
-        
-        return MaxMP + calcMpChange(player, job, usedAPReset);
-    }
-    
-    private static int calcMpChange(MapleCharacter player, MapleJob job, boolean usedAPReset) {
         int MaxMP = 0;
         
         if (job.isA(MapleJob.WARRIOR) || job.isA(MapleJob.DAWNWARRIOR1) || job.isA(MapleJob.ARAN1)) {
@@ -823,20 +788,6 @@ private static int calcMpChange(MapleCharacter player, MapleJob job, boolean use
         
         return MaxMP;
     }
-
-    private static void addHP(MapleCharacter player, int MaxHP) {
-        MaxHP = Math.min(30000, MaxHP);
-        player.setHpMpApUsed(player.getHpMpApUsed() + 1);
-        player.setMaxHp(MaxHP);
-        player.updateSingleStat(MapleStat.MAXHP, MaxHP);
-    }
-
-    private static void addMP(MapleCharacter player, int MaxMP) {
-        MaxMP = Math.min(30000, MaxMP);
-        player.setHpMpApUsed(player.getHpMpApUsed() + 1);
-        player.setMaxMp(MaxMP);
-        player.updateSingleStat(MapleStat.MAXMP, MaxMP);
-    }
     
     private static int takeHp(MapleJob job) {
         int MaxHP = 0;
diff --git a/src/client/processor/AssignSPProcessor.java b/src/client/processor/AssignSPProcessor.java
index 35fcd3025..5d263bfe4 100644
--- a/src/client/processor/AssignSPProcessor.java
+++ b/src/client/processor/AssignSPProcessor.java
@@ -25,7 +25,6 @@
 
 import client.MapleCharacter;
 import client.MapleClient;
-import client.MapleStat;
 import client.Skill;
 import client.SkillFactory;
 import client.autoban.AutobanFactory;
@@ -49,7 +48,7 @@ public static void SPAssignAction(MapleClient c, int skillid) {
             }
 
             MapleCharacter player = c.getPlayer();
-            int remainingSp = player.getRemainingSpBySkill(GameConstants.getSkillBook(skillid/10000));
+            int remainingSp = player.getRemainingSps()[GameConstants.getSkillBook(skillid/10000)];
             boolean isBeginnerSkill = false;
             if ((!GameConstants.isPqSkillMap(player.getMapId()) && GameConstants.isPqSkill(skillid)) || (!player.isGM() && GameConstants.isGMSkills(skillid)) || (!GameConstants.isInJobTree(skillid, player.getJob().getId()) && !player.isGM())) {
                 AutobanFactory.PACKET_EDIT.alert(player, "tried to packet edit in distributing sp.");
@@ -78,9 +77,10 @@ public void run() {
             int curLevel = player.getSkillLevel(skill);
             if ((remainingSp > 0 && curLevel + 1 <= (skill.isFourthJob() ? player.getMasterLevel(skill) : skill.getMaxLevel()))) {
                 if (!isBeginnerSkill) {
-                    player.setRemainingSp(player.getRemainingSpBySkill(GameConstants.getSkillBook(skillid/10000)) - 1, GameConstants.getSkillBook(skillid/10000));
-                }       	
-                player.updateSingleStat(MapleStat.AVAILABLESP, player.getRemainingSpBySkill(GameConstants.getSkillBook(skillid/10000)));
+                    player.gainSp(-1, GameConstants.getSkillBook(skillid/10000), false);
+                } else {
+                    player.announce(MaplePacketCreator.enableActions());
+                }
                 if (skill.getId() == Aran.FULL_SWING) {
                     player.changeSkillLevel(skill, (byte) (curLevel + 1), player.getMasterLevel(skill), player.getSkillExpiration(skill));
                     player.changeSkillLevel(SkillFactory.getSkill(Aran.HIDDEN_FULL_DOUBLE), (byte) player.getSkillLevel(skill), player.getMasterLevel(skill),  player.getSkillExpiration(skill));
diff --git a/src/client/processor/BuybackProcessor.java b/src/client/processor/BuybackProcessor.java
index 8011121d1..e4f6f5f23 100644
--- a/src/client/processor/BuybackProcessor.java
+++ b/src/client/processor/BuybackProcessor.java
@@ -49,7 +49,7 @@ public static void processBuyback(MapleClient c) {
             c.unlockClient();
         }
 
-        if(buyback) {
+        if (buyback) {
             String jobString;
             switch(chr.getJobStyle()) {
                 case WARRIOR:
@@ -78,15 +78,8 @@ public static void processBuyback(MapleClient c) {
             }
 
             chr.setStance(0);
-
-            chr.setHp(chr.getMaxHp());
-            chr.setMp(chr.getMaxMp());
-
-            List<Pair<MapleStat, Integer>> hpmpupdate = new ArrayList<>(2);
-            hpmpupdate.add(new Pair<>(MapleStat.HP, Integer.valueOf(chr.getHp())));
-            hpmpupdate.add(new Pair<>(MapleStat.MP, Integer.valueOf(chr.getMp())));
-            c.announce(MaplePacketCreator.updatePlayerStats(hpmpupdate, true, chr));
-
+            chr.healHpMp();
+            
             AbsoluteLifeMovement alm = new AbsoluteLifeMovement(0, chr.getPosition(), 0, 0);
             alm.setPixelsPerSecond(new Point(0, 0));
             List<LifeMovementFragment> moveUpdate = Collections.singletonList((LifeMovementFragment) alm);
diff --git a/src/client/processor/MakerProcessor.java b/src/client/processor/MakerProcessor.java
index c8a3fc98d..50b9325b5 100644
--- a/src/client/processor/MakerProcessor.java
+++ b/src/client/processor/MakerProcessor.java
@@ -256,7 +256,7 @@ private static boolean removeOddMakerReagents(int toCreate, Map<Integer, Short>
     
     private static int getMakerReagentSlots(int itemId) {
         try {
-            int eqpLevel = ii.getEquipStats(itemId).get("reqLevel");
+            int eqpLevel = ii.getEquipLevelReq(itemId);
             
             if(eqpLevel < 78) {
                 return 1;
diff --git a/src/constants/ExpTable.java b/src/constants/ExpTable.java
index 33924d96c..a7b4d2f22 100644
--- a/src/constants/ExpTable.java
+++ b/src/constants/ExpTable.java
@@ -22,8 +22,8 @@
 package constants;
 
 public final class ExpTable {
-    private static final int[] exp = {1, 15, 34, 57, 92, 135, 372, 560, 840, 1144, 1242, 1573, 2144, 2800, 3640, 4700, 5893, 7360, 9144, 11120, 13477, 16268, 19320, 22880, 27008, 31477, 36600, 42444, 48720, 55813, 63800, 86784, 98208, 110932, 124432, 139372, 155865, 173280, 192400, 213345, 235372, 259392, 285532, 312928, 342624, 374760, 408336, 445544, 483532, 524160, 567772, 598886, 631704, 666321, 702836, 741351, 781976, 824828, 870028, 917625, 967995, 1021041, 1076994, 1136013, 1198266, 1263930, 1333194, 1406252, 1483314, 1564600, 1650340, 1740778, 1836173, 1936794, 2042930, 2154882, 2272970, 2397528, 2528912, 2667496, 2813674, 2967863, 3130502, 3302053, 3483005, 3673873, 3875201, 4087562, 4311559, 4547832, 4797053, 5059931, 5337215, 5629694, 5938202, 6263614, 6606860, 6968915, 7350811, 7753635, 8178534, 8626718, 9099462, 9598112, 10124088, 10678888, 11264090, 11881362, 12532461, 13219239, 13943653, 14707765, 15513750, 16363902, 17260644, 18206527, 19204245, 20256637, 21366700, 22537594, 23772654, 25075395, 26449526, 27898960, 29427822, 31040466, 32741483, 34535716, 36428273, 38424542, 40530206, 42751262, 45094030, 47565183, 50171755, 52921167, 55821246, 58880250, 62106888, 65510344, 69100311, 72887008, 76881216, 81094306, 85594273, 90225770, 95170142, 100385466, 105886589, 111689174, 117809740, 124265714, 131075474, 138258410, 145834970, 153826726, 162256430, 171148082, 180526997, 190419876, 200854885, 211861732, 223471711, 223471711, 248635353, 262260570, 276632449, 291791906, 307782102, 324648562, 342439302, 361204976, 380999008, 401877754, 423900654, 447130410, 471633156, 497478653, 524740482, 553496261, 583827855, 615821622, 649568646, 685165008, 722712050, 762316670, 804091623, 848155844, 894634784, 943660770, 995373379, 1049919840, 1107455447, 1168144006, 1232158297, 1299680571, 1370903066, 1446028554, 1525246918, 1608855764, 1697021059};
-    private static final int[] equip = {1, 15, 19, 23, 35, 43, 98, 188, 237, 280, 304, 331, 571, 656, 840, 1060, 1193, 1467, 1784, 1976, 2357, 2791, 3052, 3560, 4128, 4469, 5123, 5844, 6276, 7093};
+    private static final int[] exp = {15, 15, 34, 57, 92, 135, 372, 560, 840, 1144, 1242, 1573, 2144, 2800, 3640, 4700, 5893, 7360, 9144, 11120, 13477, 16268, 19320, 22880, 27008, 31477, 36600, 42444, 48720, 55813, 63800, 86784, 98208, 110932, 124432, 139372, 155865, 173280, 192400, 213345, 235372, 259392, 285532, 312928, 342624, 374760, 408336, 445544, 483532, 524160, 567772, 598886, 631704, 666321, 702836, 741351, 781976, 824828, 870028, 917625, 967995, 1021041, 1076994, 1136013, 1198266, 1263930, 1333194, 1406252, 1483314, 1564600, 1650340, 1740778, 1836173, 1936794, 2042930, 2154882, 2272970, 2397528, 2528912, 2667496, 2813674, 2967863, 3130502, 3302053, 3483005, 3673873, 3875201, 4087562, 4311559, 4547832, 4797053, 5059931, 5337215, 5629694, 5938202, 6263614, 6606860, 6968915, 7350811, 7753635, 8178534, 8626718, 9099462, 9598112, 10124088, 10678888, 11264090, 11881362, 12532461, 13219239, 13943653, 14707765, 15513750, 16363902, 17260644, 18206527, 19204245, 20256637, 21366700, 22537594, 23772654, 25075395, 26449526, 27898960, 29427822, 31040466, 32741483, 34535716, 36428273, 38424542, 40530206, 42751262, 45094030, 47565183, 50171755, 52921167, 55821246, 58880250, 62106888, 65510344, 69100311, 72887008, 76881216, 81094306, 85594273, 90225770, 95170142, 100385466, 105886589, 111689174, 117809740, 124265714, 131075474, 138258410, 145834970, 153826726, 162256430, 171148082, 180526997, 190419876, 200854885, 211861732, 223471711, 223471711, 248635353, 262260570, 276632449, 291791906, 307782102, 324648562, 342439302, 361204976, 380999008, 401877754, 423900654, 447130410, 471633156, 497478653, 524740482, 553496261, 583827855, 615821622, 649568646, 685165008, 722712050, 762316670, 804091623, 848155844, 894634784, 943660770, 995373379, 1049919840, 1107455447, 1168144006, 1232158297, 1299680571, 1370903066, 1446028554, 1525246918, 1608855764, 1697021059};
+    private static final int[] equip = {1, 15, 19, 23, 35, 43, 98, 188, 237, 280, 304, 331, 571, 656, 840, 1060, 1193, 1467, 1784, 1976, 2357, 2791, 3052, 3560, 4128, 4469, 5123, 5844, 6276, 7093, 10000};
     private static final int[] pet = {1, 1, 3, 6, 14, 31, 60, 108, 181, 287, 434, 632, 891, 1224, 1642, 2161, 2793, 3557, 4467, 5542, 6801, 8263, 9950, 11882, 14084, 16578, 19391, 22547, 26074, 30000, 2147483647};
     private static final int[] mount = {1, 24, 50, 105, 134, 196, 254, 263, 315, 367, 430, 543, 587, 679, 725, 897, 1146, 1394, 1701, 2247, 2543, 2898, 3156, 3313, 3584, 3923, 4150, 4305, 4550};
 
diff --git a/src/constants/GameConstants.java b/src/constants/GameConstants.java
index 3bbb5d8b7..f91dd5abf 100644
--- a/src/constants/GameConstants.java
+++ b/src/constants/GameConstants.java
@@ -94,6 +94,8 @@ public static int getPlayerBonusExpRate(int slot) {
         put("temple", 270000100);
         put("square", 103040000);
         put("neo", 240070000);
+        put("mushking", 106020000);
+        put("bosspq", 970030000);
         put("fm", 910000000);
     }};
     
diff --git a/src/constants/ServerConstants.java b/src/constants/ServerConstants.java
index e3fb80104..03c69079c 100644
--- a/src/constants/ServerConstants.java
+++ b/src/constants/ServerConstants.java
@@ -60,6 +60,7 @@
     public static final boolean USE_MTS = false;
     public static final boolean USE_AUTOHIDE_GM = false;            //When enabled, GMs are automatically hidden when joining. Thanks to Steven Deblois (steven1152).
     public static final boolean USE_BUYBACK_SYSTEM = true;          //Enables the HeavenMS-builtin buyback system, to be used by dead players when clicking the MTS button.
+    public static final boolean USE_FIXED_RATIO_HPMP_UPDATE = true; //Enables the HeavenMS-builtin HPMP update based on the current pool to max pool ratio.
     public static final boolean USE_FAMILY_SYSTEM = false;
     public static final boolean USE_DUEY = true;
     public static final boolean USE_RANDOMIZE_HPMP_GAIN = true;     //Enables randomizing on MaxHP/MaxMP gains and INT accounting for the MaxMP gain.
@@ -206,8 +207,8 @@
     
     //Map-Chair Configuration
     public static final boolean USE_CHAIR_EXTRAHEAL = true;     //Enable map chairs to further recover player's HP and MP (player must have the Chair Mastery skill).
-    public static final byte CHAIR_EXTRA_HEAL_HP = 70;          //Each chair extra heal proc increasing HP.
-    public static final byte CHAIR_EXTRA_HEAL_MP = 42;          //Each chair extra heal proc increasing MP.
+    public static final byte CHAIR_EXTRA_HEAL_MULTIPLIER = 10;  //Due to only being able to be send up-to-255 heal values, values being actually updated is the one displayed times this.
+    public static final int CHAIR_EXTRA_HEAL_MAX_DELAY = 21;    //Players are expected to recover fully after using this skill for N seconds.
     
     //Player NPC Configuration
     public static final int PLAYERNPC_INITIAL_X = 262;          //Map frame width for putting PlayerNPCs.
diff --git a/src/net/MapleServerHandler.java b/src/net/MapleServerHandler.java
index ee5c237d3..13ef7daa9 100644
--- a/src/net/MapleServerHandler.java
+++ b/src/net/MapleServerHandler.java
@@ -37,6 +37,7 @@
 
 import net.server.Server;
 import net.server.audit.locks.MonitoredLockType;
+import net.server.audit.locks.MonitoredReentrantLock;
 import net.server.audit.locks.factory.MonitoredReentrantLockFactory;
 import net.server.coordinator.MapleSessionCoordinator;
 
@@ -49,12 +50,12 @@
 import tools.data.input.SeekableLittleEndianAccessor;
 import java.util.Arrays;
 
-import java.util.concurrent.locks.Lock;
 import java.util.concurrent.ScheduledFuture;
 
 import java.util.HashMap;
 import java.util.Map;
 import java.util.Map.Entry;
+import net.server.audit.LockCollector;
 import server.TimerManager;
 
 public class MapleServerHandler extends IoHandlerAdapter {
@@ -65,8 +66,8 @@
     private static final SimpleDateFormat sdf = new SimpleDateFormat("dd-MM-yyyy HH:mm");
     private static AtomicLong sessionId = new AtomicLong(7777);
     
-    private Lock idleLock = MonitoredReentrantLockFactory.createLock(MonitoredLockType.SRVHANDLER_IDLE, true);
-    private Lock tempLock = MonitoredReentrantLockFactory.createLock(MonitoredLockType.SRVHANDLER_TEMP, true);
+    private MonitoredReentrantLock idleLock = MonitoredReentrantLockFactory.createLock(MonitoredLockType.SRVHANDLER_IDLE, true);
+    private MonitoredReentrantLock tempLock = MonitoredReentrantLockFactory.createLock(MonitoredLockType.SRVHANDLER_TEMP, true);
     private Map<MapleClient, Long> idleSessions = new HashMap<>(100);
     private Map<MapleClient, Long> tempIdleSessions = new HashMap<>();
     private ScheduledFuture<?> idleManager = null;
@@ -269,4 +270,38 @@ private void cancelIdleManagerTask() {
         this.idleManager.cancel(false);
         this.idleManager = null;
     }
+    
+    private void disposeLocks() {
+        LockCollector.getInstance().registerDisposeAction(new Runnable() {
+            @Override
+            public void run() {
+                emptyLocks();
+            }
+        });
+    }
+
+    private void emptyLocks() {
+        idleLock.dispose();
+        tempLock.dispose();
+    }
+    
+    public void dispose() {
+        cancelIdleManagerTask();
+        
+        idleLock.lock();
+        try {
+            idleSessions.clear();
+        } finally {
+            idleLock.unlock();
+        }
+        
+        tempLock.lock();
+        try {
+            tempIdleSessions.clear();
+        } finally {
+            tempLock.unlock();
+        }
+        
+        disposeLocks();
+    }
 }
diff --git a/src/net/server/Server.java b/src/net/server/Server.java
index 0a57cbda5..58a16a864 100644
--- a/src/net/server/Server.java
+++ b/src/net/server/Server.java
@@ -399,7 +399,7 @@ private int initWorld(Properties p) {
             worlds.add(world);
 
             Map<Integer, String> channelInfo = new HashMap<>();
-            long bootTime = System.currentTimeMillis();
+            long bootTime = getCurrentTime();
             for (int j = 1; j <= Integer.parseInt(p.getProperty("channels" + i)); j++) {
                 int channelid = j;
                 Channel channel = new Channel(i, channelid, bootTime);
diff --git a/src/net/server/audit/locks/MonitoredLockType.java b/src/net/server/audit/locks/MonitoredLockType.java
index 3f338d130..1df11369c 100644
--- a/src/net/server/audit/locks/MonitoredLockType.java
+++ b/src/net/server/audit/locks/MonitoredLockType.java
@@ -1,6 +1,6 @@
 /*
     This file is part of the HeavenMS MapleStory Server
-    Copyleft 2016 - 2018 RonanLana
+    Copyleft (L) 2016 - 2018 RonanLana
 
     This program is free software: you can redistribute it and/or modify
     it under the terms of the GNU Affero General Public License as
@@ -31,6 +31,7 @@
     CHARACTER_PET,
     CHARACTER_PRT,
     CHARACTER_EVT,
+    CHARACTER_STA,
     CLIENT,
     CLIENT_ENCODER,
     CLIENT_LOGIN,
diff --git a/src/net/server/audit/locks/MonitoredReadLock.java b/src/net/server/audit/locks/MonitoredReadLock.java
index b60599dd7..fb5862ac0 100644
--- a/src/net/server/audit/locks/MonitoredReadLock.java
+++ b/src/net/server/audit/locks/MonitoredReadLock.java
@@ -1,6 +1,6 @@
 /*
     This file is part of the HeavenMS MapleStory Server
-    Copyleft 2016 - 2018 RonanLana
+    Copyleft (L) 2016 - 2018 RonanLana
 
     This program is free software: you can redistribute it and/or modify
     it under the terms of the GNU Affero General Public License as
diff --git a/src/net/server/audit/locks/MonitoredReentrantLock.java b/src/net/server/audit/locks/MonitoredReentrantLock.java
index ad8af31fe..27df2b477 100644
--- a/src/net/server/audit/locks/MonitoredReentrantLock.java
+++ b/src/net/server/audit/locks/MonitoredReentrantLock.java
@@ -1,6 +1,6 @@
 /*
     This file is part of the HeavenMS MapleStory Server
-    Copyleft 2016 - 2018 RonanLana
+    Copyleft (L) 2016 - 2018 RonanLana
 
     This program is free software: you can redistribute it and/or modify
     it under the terms of the GNU Affero General Public License as
diff --git a/src/net/server/audit/locks/MonitoredWriteLock.java b/src/net/server/audit/locks/MonitoredWriteLock.java
index bef3ef3ba..f417808e3 100644
--- a/src/net/server/audit/locks/MonitoredWriteLock.java
+++ b/src/net/server/audit/locks/MonitoredWriteLock.java
@@ -1,6 +1,6 @@
 /*
     This file is part of the HeavenMS MapleStory Server
-    Copyleft 2016 - 2018 RonanLana
+    Copyleft (L) 2016 - 2018 RonanLana
 
     This program is free software: you can redistribute it and/or modify
     it under the terms of the GNU Affero General Public License as
diff --git a/src/net/server/audit/locks/empty/EmptyReadLock.java b/src/net/server/audit/locks/empty/EmptyReadLock.java
index 41b427930..e5e8aa3c7 100644
--- a/src/net/server/audit/locks/empty/EmptyReadLock.java
+++ b/src/net/server/audit/locks/empty/EmptyReadLock.java
@@ -1,6 +1,6 @@
 /*
     This file is part of the HeavenMS MapleStory Server
-    Copyleft 2016 - 2018 RonanLana
+    Copyleft (L) 2016 - 2018 RonanLana
 
     This program is free software: you can redistribute it and/or modify
     it under the terms of the GNU Affero General Public License as
@@ -48,7 +48,7 @@ private static String printThreadStack(StackTraceElement[] list) {
         for(int i = 0; i < list.length; i++) {
             s += ("    " + list[i].toString() + "\r\n");
         }
-        s += "----------------------------";
+        s += "----------------------------\r\n\r\n";
         
         return s;
     }
diff --git a/src/net/server/audit/locks/empty/EmptyReentrantLock.java b/src/net/server/audit/locks/empty/EmptyReentrantLock.java
index 39f62a799..1753efcb4 100644
--- a/src/net/server/audit/locks/empty/EmptyReentrantLock.java
+++ b/src/net/server/audit/locks/empty/EmptyReentrantLock.java
@@ -1,6 +1,6 @@
 /*
     This file is part of the HeavenMS MapleStory Server
-    Copyleft 2016 - 2018 RonanLana
+    Copyleft (L) 2016 - 2018 RonanLana
 
     This program is free software: you can redistribute it and/or modify
     it under the terms of the GNU Affero General Public License as
@@ -48,7 +48,7 @@ private static String printThreadStack(StackTraceElement[] list) {
         for(int i = 0; i < list.length; i++) {
             s += ("    " + list[i].toString() + "\r\n");
         }
-        s += "----------------------------";
+        s += "----------------------------\r\n\r\n";
         
         return s;
     }
diff --git a/src/net/server/audit/locks/empty/EmptyWriteLock.java b/src/net/server/audit/locks/empty/EmptyWriteLock.java
index 1fa8b5bf9..f051931c5 100644
--- a/src/net/server/audit/locks/empty/EmptyWriteLock.java
+++ b/src/net/server/audit/locks/empty/EmptyWriteLock.java
@@ -1,6 +1,6 @@
 /*
     This file is part of the HeavenMS MapleStory Server
-    Copyleft 2016 - 2018 RonanLana
+    Copyleft (L) 2016 - 2018 RonanLana
 
     This program is free software: you can redistribute it and/or modify
     it under the terms of the GNU Affero General Public License as
@@ -48,7 +48,7 @@ private static String printThreadStack(StackTraceElement[] list) {
         for(int i = 0; i < list.length; i++) {
             s += ("    " + list[i].toString() + "\r\n");
         }
-        s += "----------------------------";
+        s += "----------------------------\r\n\r\n";
         
         return s;
     }
diff --git a/src/net/server/audit/locks/factory/MonitoredReadLockFactory.java b/src/net/server/audit/locks/factory/MonitoredReadLockFactory.java
index 728e8fa94..1c3095fa6 100644
--- a/src/net/server/audit/locks/factory/MonitoredReadLockFactory.java
+++ b/src/net/server/audit/locks/factory/MonitoredReadLockFactory.java
@@ -1,6 +1,6 @@
 /*
     This file is part of the HeavenMS MapleStory Server
-    Copyleft 2016 - 2018 RonanLana
+    Copyleft (L) 2016 - 2018 RonanLana
 
     This program is free software: you can redistribute it and/or modify
     it under the terms of the GNU Affero General Public License as
diff --git a/src/net/server/audit/locks/factory/MonitoredReentrantLockFactory.java b/src/net/server/audit/locks/factory/MonitoredReentrantLockFactory.java
index 6275fa24e..521487eef 100644
--- a/src/net/server/audit/locks/factory/MonitoredReentrantLockFactory.java
+++ b/src/net/server/audit/locks/factory/MonitoredReentrantLockFactory.java
@@ -1,6 +1,6 @@
 /*
     This file is part of the HeavenMS MapleStory Server
-    Copyleft 2016 - 2018 RonanLana
+    Copyleft (L) 2016 - 2018 RonanLana
 
     This program is free software: you can redistribute it and/or modify
     it under the terms of the GNU Affero General Public License as
diff --git a/src/net/server/audit/locks/factory/MonitoredWriteLockFactory.java b/src/net/server/audit/locks/factory/MonitoredWriteLockFactory.java
index 682983082..d2f1880f2 100644
--- a/src/net/server/audit/locks/factory/MonitoredWriteLockFactory.java
+++ b/src/net/server/audit/locks/factory/MonitoredWriteLockFactory.java
@@ -1,6 +1,6 @@
 /*
     This file is part of the HeavenMS MapleStory Server
-    Copyleft 2016 - 2018 RonanLana
+    Copyleft (L) 2016 - 2018 RonanLana
 
     This program is free software: you can redistribute it and/or modify
     it under the terms of the GNU Affero General Public License as
diff --git a/src/net/server/channel/Channel.java b/src/net/server/channel/Channel.java
index 8b4fecefa..5285ec293 100644
--- a/src/net/server/channel/Channel.java
+++ b/src/net/server/channel/Channel.java
@@ -214,6 +214,8 @@ public final void shutdown() {
             closeChannelSchedules();
             players = null;
             
+            MapleServerHandler handler = (MapleServerHandler) acceptor.getHandler();
+            handler.dispose();
             acceptor.unbind();
             
             finishedShutdown = true;
@@ -611,7 +613,7 @@ public void run() {
             }
         }, clockTime + 3000);   // let the TIMES UP display for 3 seconds, then warp
         
-        dojoFinishTime[slot] = System.currentTimeMillis() + clockTime;
+        dojoFinishTime[slot] = Server.getInstance().getCurrentTime() + clockTime;
     }
     
     public void dismissDojoSchedule(int dojoMapId, MapleParty party) {
diff --git a/src/net/server/channel/handlers/AbstractDealDamageHandler.java b/src/net/server/channel/handlers/AbstractDealDamageHandler.java
index 3ab45935e..9d945b0af 100644
--- a/src/net/server/channel/handlers/AbstractDealDamageHandler.java
+++ b/src/net/server/channel/handlers/AbstractDealDamageHandler.java
@@ -298,7 +298,7 @@ public void run() {
                             }
                         }
                     } else if (attack.skill == Marauder.ENERGY_DRAIN || attack.skill == ThunderBreaker.ENERGY_DRAIN || attack.skill == NightWalker.VAMPIRE || attack.skill == Assassin.DRAIN) {
-                        player.addHP(Math.min(monster.getMaxHp(), Math.min((int) ((double) totDamage * (double) SkillFactory.getSkill(attack.skill).getEffect(player.getSkillLevel(SkillFactory.getSkill(attack.skill))).getX() / 100.0), player.getMaxHp() / 2)));
+                        player.addHP(Math.min(monster.getMaxHp(), Math.min((int) ((double) totDamage * (double) SkillFactory.getSkill(attack.skill).getEffect(player.getSkillLevel(SkillFactory.getSkill(attack.skill))).getX() / 100.0), player.getCurrentMaxHp() / 2)));
                     } else if (attack.skill == Bandit.STEAL) {
                         Skill steal = SkillFactory.getSkill(Bandit.STEAL);
                         if (monster.getStolen().size() < 1) { // One steal per mob <3
@@ -399,8 +399,7 @@ public void run() {
                         Skill skill;
                         if (player.getBuffedValue(MapleBuffStat.COMBO_DRAIN) != null) {
                             skill = SkillFactory.getSkill(21100005);
-                            player.setHp(player.getHp() + ((totDamage * skill.getEffect(player.getSkillLevel(skill)).getX()) / 100), true);
-                            player.updateSingleStat(MapleStat.HP, player.getHp());
+                            player.addHP(((totDamage * skill.getEffect(player.getSkillLevel(skill)).getX()) / 100));
                         }
                     } else if (job == 412 || job == 422 || job == 1411) {
                         Skill type = SkillFactory.getSkill(player.getJob().getId() == 412 ? 4120005 : (player.getJob().getId() == 1411 ? 14110004 : 4220005));
diff --git a/src/net/server/channel/handlers/AllianceOperationHandler.java b/src/net/server/channel/handlers/AllianceOperationHandler.java
index f03f59b94..4824614f0 100644
--- a/src/net/server/channel/handlers/AllianceOperationHandler.java
+++ b/src/net/server/channel/handlers/AllianceOperationHandler.java
@@ -201,7 +201,7 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)
     
     private void changeLeaderAllianceRank(MapleAlliance alliance, MapleCharacter newLeader) {
         MapleGuildCharacter lmgc = alliance.getLeader();
-        MapleCharacter leader = Server.getInstance().getWorld(newLeader.getWorld()).getPlayerStorage().getCharacterById(lmgc.getId());
+        MapleCharacter leader = newLeader.getWorldServer().getPlayerStorage().getCharacterById(lmgc.getId());
         leader.getMGC().setAllianceRank(2);
         leader.saveGuildStatus();
         
diff --git a/src/net/server/channel/handlers/ChangeMapHandler.java b/src/net/server/channel/handlers/ChangeMapHandler.java
index 56e99e189..20bd9fad0 100644
--- a/src/net/server/channel/handlers/ChangeMapHandler.java
+++ b/src/net/server/channel/handlers/ChangeMapHandler.java
@@ -85,18 +85,17 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)
 						executeStandardPath = chr.getEventInstance().revivePlayer(chr);
 					}
 					if (executeStandardPath) {
-						MapleMap to = chr.getMap();
+                                                MapleMap map = chr.getMap();
+                                                
 						if (wheel && chr.haveItemWithId(5510000, false)) {
 							MapleInventoryManipulator.removeById(c, MapleInventoryType.CASH, 5510000, 1, true, false);
 							chr.announce(MaplePacketCreator.showWheelsLeft(chr.getItemQuantity(5510000, false)));
+                                                        
+                                                        chr.updateHp(50);
+                                                        chr.changeMap(map, map.getRandomPlayerSpawnpoint());
 						} else {
-							chr.cancelAllBuffs(false);
-							to = chr.getWarpMap(chr.getMap().getReturnMapId());
-							chr.setStance(0);
+							chr.respawn(map.getReturnMapId());
 						}
-						chr.setHp(50);
-                                                chr.updatePartyMemberHP();
-						chr.changeMap(to, to.getRandomPlayerSpawnpoint());
 					}
 				} else if (targetid != -1) {
                                         if(chr.isGM()) {
diff --git a/src/net/server/channel/handlers/CloseRangeDamageHandler.java b/src/net/server/channel/handlers/CloseRangeDamageHandler.java
index 6b07e2523..d2e46275c 100644
--- a/src/net/server/channel/handlers/CloseRangeDamageHandler.java
+++ b/src/net/server/channel/handlers/CloseRangeDamageHandler.java
@@ -132,14 +132,8 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)
             if (dmgIt.hasNext()) {
                 totDamageToOneMonster = dmgIt.next().get(0).intValue();
             }
-            int remainingHP = chr.getHp() - totDamageToOneMonster * attack.getAttackEffect(chr, null).getX() / 100;
-            if (remainingHP > 1) {
-                chr.setHp(remainingHP);
-            } else {
-                chr.setHp(1);
-            }
-            chr.updateSingleStat(MapleStat.HP, chr.getHp());
-            chr.checkBerserk(chr.isHidden());
+            
+            chr.safeAddHP(-1 * totDamageToOneMonster * attack.getAttackEffect(chr, null).getX() / 100);
         }
         if (attack.numAttacked > 0 && attack.skill == 1211002) {
             boolean advcharge_prob = false;
diff --git a/src/net/server/channel/handlers/DamageSummonHandler.java b/src/net/server/channel/handlers/DamageSummonHandler.java
index 0bee64c3d..7acc6ddb7 100644
--- a/src/net/server/channel/handlers/DamageSummonHandler.java
+++ b/src/net/server/channel/handlers/DamageSummonHandler.java
@@ -32,6 +32,7 @@
 import tools.data.input.SeekableLittleEndianAccessor;
 
 public final class DamageSummonHandler extends AbstractMaplePacketHandler {
+    @Override
     public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {
         int oid = slea.readInt();
         slea.skip(1);   // -1
diff --git a/src/net/server/channel/handlers/HealOvertimeHandler.java b/src/net/server/channel/handlers/HealOvertimeHandler.java
index 72d8ee7ab..726106708 100644
--- a/src/net/server/channel/handlers/HealOvertimeHandler.java
+++ b/src/net/server/channel/handlers/HealOvertimeHandler.java
@@ -26,6 +26,7 @@
 import client.autoban.AutobanFactory;
 import client.autoban.AutobanManager;
 import net.AbstractMaplePacketHandler;
+import net.server.Server;
 import server.maps.MapleMapFactory;
 import tools.data.input.SeekableLittleEndianAccessor;
 import tools.MaplePacketCreator;
@@ -37,11 +38,12 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)
         if(!chr.isLoggedinWorld()) return;
         
         AutobanManager abm = chr.getAutobanManager();
-        int timestamp = slea.readInt();
-        abm.setTimestamp(0, timestamp, 3);
-        slea.skip(4);
+        int timestamp = (int) (Server.getInstance().getCurrentTime() - Server.uptime);
+        slea.skip(8);
+        
         short healHP = slea.readShort();
         if (healHP != 0) {
+            abm.setTimestamp(8, timestamp, 3);  // thanks Vcoc for pointing out d/c happening here
             if ((abm.getLastSpam(0) + 1500) > timestamp) AutobanFactory.FAST_HP_HEALING.addPoint(abm, "Fast hp healing");
             
             int abHeal = 120 + (int)(20 * MapleMapFactory.getMapRecoveryRate(chr.getMapId())); // Sleepywood sauna and showa spa...
@@ -49,14 +51,14 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)
                 AutobanFactory.HIGH_HP_HEALING.autoban(chr, "Healing: " + healHP + "; Max is " + abHeal + ".");
                 return;
             }
-            chr.addHP(healHP);
             
+            chr.addHP(healHP);
             chr.getMap().broadcastMessage(chr, MaplePacketCreator.showHpHealed(chr.getId(), healHP), false);
-            chr.checkBerserk(chr.isHidden());
             abm.spam(0, timestamp);
         }
         short healMP = slea.readShort();
         if (healMP != 0 && healMP < 1000) {
+            abm.setTimestamp(9, timestamp, 3);
             if ((abm.getLastSpam(1) + 1500) > timestamp) AutobanFactory.FAST_MP_HEALING.addPoint(abm, "Fast mp healing");
             chr.addMP(healMP);
             abm.spam(1, timestamp);
diff --git a/src/net/server/channel/handlers/MoveLifeHandler.java b/src/net/server/channel/handlers/MoveLifeHandler.java
index 6bdad9449..6ff091830 100644
--- a/src/net/server/channel/handlers/MoveLifeHandler.java
+++ b/src/net/server/channel/handlers/MoveLifeHandler.java
@@ -24,7 +24,7 @@
 import client.MapleCharacter;
 import client.MapleClient;
 import java.awt.Point;
-import java.util.ArrayList;
+import java.util.LinkedList;
 import java.util.List;
 import server.life.MapleMonster;
 import server.life.MapleMonsterInformationProvider;
@@ -47,27 +47,29 @@
  * @author Ronan (HeavenMS)
  */
 public final class MoveLifeHandler extends AbstractMovementPacketHandler {
+        
 	@Override
 	public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {
                 MapleCharacter player = c.getPlayer();
                 MapleMap map = player.getMap();
-            
+                
 		int objectid = slea.readInt();
 		short moveid = slea.readShort();
 		MapleMapObject mmo = map.getMapObject(objectid);
 		if (mmo == null || mmo.getType() != MapleMapObjectType.MONSTER) {
 			return;
 		}
+                
 		MapleMonster monster = (MapleMonster) mmo;
-		List<LifeMovementFragment> res = null;
-                List<MapleCharacter> banishPlayers = new ArrayList<>();
+                List<MapleCharacter> banishPlayers = new LinkedList<>();
+                
 		byte pNibbles = slea.readByte();
 		byte rawActivity = slea.readByte();
-		byte useSkillId = slea.readByte();
-		byte useSkillLevel = slea.readByte();
+		slea.readByte();
+		slea.readByte();
 		short pOption = slea.readShort();
                 slea.skip(8);
-
+                
 		if (rawActivity >= 0) {
 			rawActivity = (byte) (rawActivity & 0xFF >> 1);
 		}
@@ -78,77 +80,65 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)
 		byte attackId = (byte) (isAttack ? rawActivity - 12 : -1);
 		boolean nextMovementCouldBeSkill = (pNibbles & 0x0F) != 0;
 		boolean pUnk = (pNibbles & 0xF0) != 0;
-
-		int nextCastSkill = useSkillId;
-		int nextCastSkillLevel = useSkillLevel;
+                
+                boolean currentController = (monster.getController() == player);
                 
 		MobSkill toUse = null;
-                int rndSkill = -1;
+                int useSkillId = 0, useSkillLevel = 0;
                 
-                if(monster.getNoSkills() > 0) {
-                        if(nextMovementCouldBeSkill) {
-                                rndSkill = Randomizer.nextInt(monster.getNoSkills());
+                if (isSkill) {
+                        int noSkills = monster.getNoSkills();
+                        if (noSkills > 0) {
+                                int rndSkill = Randomizer.nextInt(noSkills);
+
+                                Pair<Integer, Integer> skillToUse = monster.getSkills().get(rndSkill);
+                                useSkillId = skillToUse.getLeft();
+                                useSkillLevel = skillToUse.getRight();
+                                toUse = MobSkillFactory.getMobSkill(useSkillId, useSkillLevel);
+                        } else {
+                                nextMovementCouldBeSkill = false;
                         }
                 } else {
                         nextMovementCouldBeSkill = false;
                 }
-		
-                if(monster.applyAnimationIfRoaming((attackId - 13) / 2, rndSkill)) {
-                        if (rndSkill > -1) {
-                                Pair<Integer, Integer> skillToUse = monster.getSkills().get(rndSkill);
-                                nextCastSkill = skillToUse.getLeft();
-                                nextCastSkillLevel = skillToUse.getRight();
-                                toUse = MobSkillFactory.getMobSkill(nextCastSkill, nextCastSkillLevel);
-                                
-                                if (!isSkill && !isAttack) {
-                                        long curtime = currentServerTime();
-                                        if(curtime >= monster.getNextBasicSkillTime()) {  // dont use the special attack too often, chase the player f3
-                                                //MobAttackInfo mobAttack = MobAttackInfoFactory.getMobAttackInfo(monster, attackId);
-                                                monster.setNextBasicSkillTime(curtime);
-                                        } else {
-                                                toUse = null;   // paliative measure for suspicious mob movement
-                                        }
-                                }
-
-                                if (toUse != null) {
-                                        int percHpLeft = (int) (((float) monster.getHp() / monster.getMaxHp()) * 100);
-                                        if (nextCastSkill != toUse.getSkillId() || nextCastSkillLevel != toUse.getSkillLevel()) {
-                                                //toUse.resetAnticipatedSkill();
-                                                return;
-                                        } else if (toUse.getHP() < percHpLeft) {
-                                                toUse = null;
-                                        } else if (monster.canUseSkill(toUse)) {
-                                                int animationTime = MapleMonsterInformationProvider.getInstance().getMobSkillAnimationTime(monster.getId(), rndSkill);
-                                                if(animationTime > 0) {
-                                                        toUse.applyDelayedEffect(player, monster, true, banishPlayers, animationTime);
-                                                } else {
-                                                        toUse.applyEffect(player, monster, true, banishPlayers);
-                                                }
-                                        } else {
-                                                toUse = null;
-                                        }
-                                }
+                
+                int mobMp;
+                if (toUse != null && toUse.getHP() >= (int) (((float) monster.getHp() / monster.getMaxHp()) * 100) && monster.canUseSkill(toUse)) {
+                        mobMp = monster.getMp();
+                    
+                        int animationTime = MapleMonsterInformationProvider.getInstance().getMobSkillAnimationTime(toUse);
+                        if(animationTime > 0) {
+                                toUse.applyDelayedEffect(player, monster, true, banishPlayers, animationTime);
+                        } else {
+                                toUse.applyEffect(player, monster, true, banishPlayers);
                         }
                 } else {
-                        if(rndSkill > -1) {
-                                nextMovementCouldBeSkill = false;
+                        int atkStatus = monster.canUseAttack((attackId - 13) / 2);
+                        if (atkStatus < 1) {
+                                if (!currentController) {
+                                        return;
+                                }
+                                
+                                mobMp = atkStatus < 0 ? 0 : monster.getMp();
+                        } else {
+                                mobMp = monster.getMp();
                         }
-                }
-                
-                if(toUse == null) {
+                        
                         useSkillId = 0;
                         useSkillLevel = 0;
                         rawActivity = -1;
                         pOption = 0;
+                        
+                        toUse = null;
                 }
                 
 		slea.readByte();
 		slea.readInt(); // whatever
 		short start_x = slea.readShort(); // hmm.. startpos?
 		short start_y = slea.readShort(); // hmm...
-		Point startPos = new Point(start_x, start_y);
-		res = parseMovement(slea);
-		if (monster.getController() != player) {
+		Point startPos = new Point(start_x, start_y - 2);
+		List<LifeMovementFragment> res = parseMovement(slea);
+		if (!currentController) {
 			if (monster.isAttackedBy(player)) {
 				monster.switchController(player, true);
 			} else {
@@ -156,22 +146,23 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)
 			}
 		} else if (rawActivity == -1 && monster.isControllerKnowsAboutAggro() && !monster.isMobile() && !monster.isFirstAttack()) {
                         monster.setControllerHasAggro(false);
-			monster.setControllerKnowsAboutAggro(false);
+                        monster.setControllerKnowsAboutAggro(false);
 		}
+                
 		boolean aggro = monster.isControllerHasAggro();
-		
                 if (toUse != null) {
-                        c.announce(MaplePacketCreator.moveMonsterResponse(objectid, moveid, monster.getMp(), aggro, toUse.getSkillId(), toUse.getSkillLevel()));
+                        c.announce(MaplePacketCreator.moveMonsterResponse(objectid, moveid, mobMp, aggro, toUse.getSkillId(), toUse.getSkillLevel()));
 		} else {
-			c.announce(MaplePacketCreator.moveMonsterResponse(objectid, moveid, monster.getMp(), aggro));
+			c.announce(MaplePacketCreator.moveMonsterResponse(objectid, moveid, mobMp, aggro));
 		}
                 
 		if (aggro) {
 			monster.setControllerKnowsAboutAggro(true);
 		}
+                
 		if (res != null) {
                         map.broadcastMessage(player, MaplePacketCreator.moveMonster(objectid, nextMovementCouldBeSkill, rawActivity, useSkillId, useSkillLevel, pOption, startPos, res), monster.getPosition());
-			updatePosition(res, monster, -1);
+			updatePosition(res, monster, -2);
 			map.moveMonster(monster, monster.getPosition());
 		}
                 
@@ -180,7 +171,7 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)
                 }
 	}
 
-	public static boolean inRangeInclusive(Byte pVal, Integer pMin, Integer pMax) {
+	private static boolean inRangeInclusive(Byte pVal, Integer pMin, Integer pMax) {
 		return !(pVal < pMin) || (pVal > pMax);
 	}
 }
\ No newline at end of file
diff --git a/src/net/server/channel/handlers/PetAutoPotHandler.java b/src/net/server/channel/handlers/PetAutoPotHandler.java
index 2107b11d6..70c35111e 100644
--- a/src/net/server/channel/handlers/PetAutoPotHandler.java
+++ b/src/net/server/channel/handlers/PetAutoPotHandler.java
@@ -23,7 +23,6 @@
 
 import client.MapleClient;
 import client.MapleCharacter;
-import client.inventory.Equip;
 import client.inventory.Item;
 import client.inventory.MapleInventory;
 import client.inventory.MapleInventoryType;
@@ -31,7 +30,6 @@
 import client.inventory.manipulator.MapleInventoryManipulator;
 import server.MapleItemInformationProvider;
 import server.MapleStatEffect;
-import tools.Pair;
 import tools.MaplePacketCreator;
 import tools.data.input.SeekableLittleEndianAccessor;
 import constants.ServerConstants;
@@ -47,14 +45,9 @@
     Item toUse;
     List<Item> toUseList;
     
-    boolean hasHpGain;
-    boolean hasMpGain;
-    short maxHp;
-    short maxMp;
-    short incHp;
-    short incMp;
-    int curHp;
-    int curMp;
+    boolean hasHpGain, hasMpGain;
+    int maxHp, maxMp, curHp, curMp;
+    double incHp, incMp;
     
     @Override
     public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c) {
@@ -72,60 +65,64 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)
         MapleCharacter chr = c.getPlayer();
         MapleInventory useInv = chr.getInventory(MapleInventoryType.USE);
         
+        int useCount = 0, qtyCount = 0;
+        MapleStatEffect stat = null;
+        
         useInv.lockInventory();
         try {
             toUse = useInv.getItem(slot);
-        
-            if(toUse != null) {
+            
+            if (toUse != null) {
                 if (toUse.getItemId() != itemId) {
                     c.announce(MaplePacketCreator.enableActions());
                     return;
                 }
-
+                
                 toUseList = null;
-
+                
                 // from now on, toUse becomes the "cursor" for the current pot being used
-                if(toUse.getQuantity() <= 0) {
-                    if(!cursorOnNextAvailablePot(chr)) {
+                if (toUse.getQuantity() <= 0) {
+                    if (!cursorOnNextAvailablePot(chr)) {
                         c.announce(MaplePacketCreator.enableActions());
                         return;
                     }
                 }
-
-                MapleStatEffect stat = MapleItemInformationProvider.getInstance().getItemEffect(toUse.getItemId());
+                
+                stat = MapleItemInformationProvider.getInstance().getItemEffect(toUse.getItemId());
                 hasHpGain = stat.getHp() > 0 || stat.getHpRate() > 0.0;
                 hasMpGain = stat.getMp() > 0 || stat.getMpRate() > 0.0;
-
-                // contabilize the HP and MP gains from equipments on one's effective MaxHP/MaxMP
-                Pair<Short, Short> maxHpMp = calcEffectivePool(chr);
-                maxHp = maxHpMp.left;
-                maxMp = maxHpMp.right;
-
-                incHp = stat.getHp();
-                if(incHp <= 0 && hasHpGain) incHp = (short)(maxHp * stat.getHpRate());
-
-                incMp = stat.getMp();
-                if(incMp <= 0 && hasMpGain) incMp = (short)(maxMp * stat.getMpRate());
-
+                
+                maxHp = chr.getCurrentMaxHp();
+                maxMp = chr.getCurrentMaxMp();
+                
                 curHp = chr.getHp();
                 curMp = chr.getMp();
+                
+                incHp = stat.getHp();
+                if(incHp <= 0 && hasHpGain) incHp = Math.ceil(maxHp * stat.getHpRate());
+                
+                incMp = stat.getMp();
+                if(incMp <= 0 && hasMpGain) incMp = Math.ceil(maxMp * stat.getMpRate());
+                
+                if (hasHpGain) {
+                    qtyCount = (int) Math.ceil(((ServerConstants.PET_AUTOHP_RATIO * maxHp) - curHp) / incHp);
+                }
+                
+                if (hasMpGain) {
+                    qtyCount = Math.max(qtyCount, (int) Math.ceil(((ServerConstants.PET_AUTOMP_RATIO * maxMp) - curMp) / incMp));
+                }
 
-                //System.out.println("\n-------------------\n");
-                while(true) {
-                    do {
-                        MapleInventoryManipulator.removeFromSlot(c, MapleInventoryType.USE, slot, (short) 1, false);
-                        stat.applyTo(chr);
-
-                        curHp += incHp;
-                        curMp += incMp;
-
-                        //System.out.println();
-                        //System.out.println("hp: " + hasHpGain + " hpgain " + incHp + " player hp " + curHp + " maxhp " + maxHp);
-                        //System.out.println("mp: " + hasMpGain + " mpgain " + incMp + " player mp " + curMp + " maxmp " + maxMp);
-                        //System.out.println("redo? " + (shouldReusePot() && toUse.getQuantity() > 0));
-                    } while(shouldReusePot() && toUse.getQuantity() > 0);
-
-                    if(toUse.getQuantity() == 0 && shouldReusePot()) {
+                while (true) {
+                    short qtyToUse = (short) Math.min(qtyCount, toUse.getQuantity());
+                    MapleInventoryManipulator.removeFromSlot(c, MapleInventoryType.USE, slot, qtyToUse, false);
+                    
+                    curHp += (incHp * qtyToUse);
+                    curMp += (incMp * qtyToUse);
+                    
+                    useCount += qtyToUse;
+                    qtyCount -= qtyToUse;
+                    
+                    if(toUse.getQuantity() == 0 && qtyCount > 0) {
                         // depleted out the current slot, fetch for more
 
                         if(!cursorOnNextAvailablePot(chr)) {
@@ -139,6 +136,12 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)
         } finally {
             useInv.unlockInventory();
         }
+        
+        for (int i = 0; i < useCount; i++) {
+            stat.applyTo(chr);
+        }
+        
+        chr.announce(MaplePacketCreator.enableActions());
     }
     
     private boolean cursorOnNextAvailablePot(MapleCharacter chr) {
@@ -159,13 +162,5 @@ private boolean cursorOnNextAvailablePot(MapleCharacter chr) {
         }
         
         return false;
-    }
-    
-    private static Pair<Short, Short> calcEffectivePool(MapleCharacter chr) {
-        return new Pair<>((short) chr.getMaxHpEquipped(), (short) chr.getMaxMpEquipped());
-    }
-    
-    private boolean shouldReusePot() {
-        return (hasHpGain && curHp < ServerConstants.PET_AUTOHP_RATIO * maxHp) || (hasMpGain && curMp < ServerConstants.PET_AUTOMP_RATIO * maxMp);
     } 
 }
diff --git a/src/net/server/channel/handlers/PlayerLoggedinHandler.java b/src/net/server/channel/handlers/PlayerLoggedinHandler.java
index 21dc38a87..3a024519a 100644
--- a/src/net/server/channel/handlers/PlayerLoggedinHandler.java
+++ b/src/net/server/channel/handlers/PlayerLoggedinHandler.java
@@ -50,6 +50,7 @@
 import client.MapleClient;
 import client.MapleDisease;
 import client.MapleFamily;
+import client.MapleKeyBinding;
 import client.SkillFactory;
 import client.inventory.Equip;
 import client.inventory.Item;
@@ -185,10 +186,12 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)
         player.sendKeymap();
         player.sendMacros();
         
-        if(player.getKeymap().get(91) != null)
-            player.announce(MaplePacketCreator.sendAutoHpPot(player.getKeymap().get(91).getAction()));
-        if(player.getKeymap().get(92) != null)
-            player.announce(MaplePacketCreator.sendAutoMpPot(player.getKeymap().get(92).getAction()));
+        // pot bindings being passed through other characters on the account detected thanks to Croosade dev team
+        MapleKeyBinding autohpPot = player.getKeymap().get(91);
+        player.announce(MaplePacketCreator.sendAutoHpPot(autohpPot != null ? autohpPot.getAction() : 0));
+        
+        MapleKeyBinding autompPot = player.getKeymap().get(92);
+        player.announce(MaplePacketCreator.sendAutoMpPot(autompPot != null ? autompPot.getAction() : 0));
         
         player.getMap().addPlayer(player);
         player.visitMap(player.getMap());
@@ -263,8 +266,6 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)
         MapleInventory eqpInv = player.getInventory(MapleInventoryType.EQUIPPED);
         eqpInv.lockInventory();
         try {
-            player.resetEquippedHpMp();
-            
             for(Item it : eqpInv.list()) {
                 player.equippedItem((Equip) it);
             }
diff --git a/src/net/server/channel/handlers/SpecialMoveHandler.java b/src/net/server/channel/handlers/SpecialMoveHandler.java
index 1369ca469..03cf2cbaf 100644
--- a/src/net/server/channel/handlers/SpecialMoveHandler.java
+++ b/src/net/server/channel/handlers/SpecialMoveHandler.java
@@ -111,12 +111,10 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)
         } else if (skillid == Brawler.MP_RECOVERY) {// MP Recovery
             Skill s = SkillFactory.getSkill(skillid);
             MapleStatEffect ef = s.getEffect(chr.getSkillLevel(s));
-            int lose = chr.getMaxHp() / ef.getX();
-            chr.setHp(chr.getHp() - lose);
-            chr.updateSingleStat(MapleStat.HP, chr.getHp());
-            int gain = lose * (ef.getY() / 100);
-            chr.setMp(chr.getMp() + gain);
-            chr.updateSingleStat(MapleStat.MP, chr.getMp());
+            
+            int lose = chr.safeAddHP(-1 * (chr.getCurrentMaxHp() / ef.getX()));
+            int gain = -lose * (ef.getY() / 100);
+            chr.addMP(gain);
         } else if (skillid == SuperGM.HEAL_PLUS_DISPEL) {
             slea.skip(11);
             chr.getMap().broadcastMessage(chr, MaplePacketCreator.showBuffeffect(chr.getId(), skillid, chr.getSkillLevel(skillid)), false);
diff --git a/src/net/server/channel/handlers/TakeDamageHandler.java b/src/net/server/channel/handlers/TakeDamageHandler.java
index 6a0715687..09fbea6d4 100644
--- a/src/net/server/channel/handlers/TakeDamageHandler.java
+++ b/src/net/server/channel/handlers/TakeDamageHandler.java
@@ -245,11 +245,8 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)
         }
         if (!chr.isHidden()) {
             map.broadcastMessage(chr, MaplePacketCreator.damagePlayer(damagefrom, monsteridfrom, chr.getId(), damage, fake, direction, is_pgmr, pgmr, is_pg, oid, pos_x, pos_y), false);
-            chr.checkBerserk(true);
-        }
-        else {
+        } else {
             map.broadcastGMMessage(chr, MaplePacketCreator.damagePlayer(damagefrom, monsteridfrom, chr.getId(), damage, fake, direction, is_pgmr, pgmr, is_pg, oid, pos_x, pos_y), false);
-            chr.checkBerserk(false);
         }
         if (GameConstants.isDojo(map.getId())) {
             chr.setDojoEnergy(chr.getDojoEnergy() + ServerConstants.DOJO_ENERGY_DMG);
diff --git a/src/net/server/channel/handlers/UseItemHandler.java b/src/net/server/channel/handlers/UseItemHandler.java
index ad2ee0ecd..54c03dd1e 100644
--- a/src/net/server/channel/handlers/UseItemHandler.java
+++ b/src/net/server/channel/handlers/UseItemHandler.java
@@ -97,12 +97,10 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)
             
             if(toUse.getItemId() != 2022153) {
                 ii.getItemEffect(toUse.getItemId()).applyTo(chr);
-                chr.checkBerserk(chr.isHidden());
             } else {
                 MapleStatEffect mse = ii.getItemEffect(toUse.getItemId());
                 for(MapleCharacter player : chr.getMap().getCharacters()) {
                     mse.applyTo(player);
-                    player.checkBerserk(player.isHidden());
                 }
             }
         }
diff --git a/src/net/server/channel/handlers/UseMountFoodHandler.java b/src/net/server/channel/handlers/UseMountFoodHandler.java
index 04e9649a3..bf9c32043 100644
--- a/src/net/server/channel/handlers/UseMountFoodHandler.java
+++ b/src/net/server/channel/handlers/UseMountFoodHandler.java
@@ -47,27 +47,27 @@ public final void handlePacket(SeekableLittleEndianAccessor slea, MapleClient c)
         MapleMount mount = chr.getMount();
         Item item = chr.getInventory(MapleInventoryType.USE).getItem(pos);
         if (item != null && item.getItemId() == itemid && mount != null) {
-            float healedFactor;
             c.lockClient();
             try {
                 int curTiredness = mount.getTiredness();
                 int healedTiredness = Math.min(curTiredness, 30);
                 
-                healedFactor = (float) healedTiredness / 30;
+                float healedFactor = (float) healedTiredness / 30;
                 mount.setTiredness(curTiredness - healedTiredness);
-            } finally {
-                c.unlockClient();
-            }
-            
-            if (healedFactor > 0.0f) {
-                mount.setExp(mount.getExp() + (int) Math.ceil(healedFactor * (2 * mount.getLevel() + 6)));
-                int level = mount.getLevel();
-                boolean levelup = mount.getExp() >= ExpTable.getMountExpNeededForLevel(level) && level < 31;
-                if (levelup) {
-                    mount.setLevel(level + 1);
+                
+                if (healedFactor > 0.0f) {
+                    mount.setExp(mount.getExp() + (int) Math.ceil(healedFactor * (2 * mount.getLevel() + 6)));
+                    int level = mount.getLevel();
+                    boolean levelup = mount.getExp() >= ExpTable.getMountExpNeededForLevel(level) && level < 31;
+                    if (levelup) {
+                        mount.setLevel(level + 1);
+                    }
+                    chr.getMap().broadcastMessage(MaplePacketCreator.updateMount(chr.getId(), mount, levelup));
                 }
-                chr.getMap().broadcastMessage(MaplePacketCreator.updateMount(chr.getId(), mount, levelup));
+                
                 MapleInventoryManipulator.removeById(c, MapleInventoryType.USE, itemid, 1, true, false);
+            } finally {
+                c.unlockClient();
             }
         }
     }
diff --git a/src/net/server/channel/worker/BaseScheduler.java b/src/net/server/channel/worker/BaseScheduler.java
index 833d5e005..5e47add6b 100644
--- a/src/net/server/channel/worker/BaseScheduler.java
+++ b/src/net/server/channel/worker/BaseScheduler.java
@@ -1,6 +1,6 @@
 /*
     This file is part of the HeavenMS MapleStory Server
-    Copyleft 2016 - 2018 RonanLana
+    Copyleft (L) 2016 - 2018 RonanLana
 
     This program is free software: you can redistribute it and/or modify
     it under the terms of the GNU Affero General Public License as
diff --git a/src/net/server/channel/worker/EventScheduler.java b/src/net/server/channel/worker/EventScheduler.java
index c5eba72bd..7cb054500 100644
--- a/src/net/server/channel/worker/EventScheduler.java
+++ b/src/net/server/channel/worker/EventScheduler.java
@@ -1,6 +1,6 @@
 /*
     This file is part of the HeavenMS MapleStory Server
-    Copyleft 2016 - 2018 RonanLana
+    Copyleft (L) 2016 - 2018 RonanLana
 
     This program is free software: you can redistribute it and/or modify
     it under the terms of the GNU Affero General Public License as
diff --git a/src/net/server/channel/worker/FaceExpressionScheduler.java b/src/net/server/channel/worker/FaceExpressionScheduler.java
index 2cff3228b..6dd247020 100644
--- a/src/net/server/channel/worker/FaceExpressionScheduler.java
+++ b/src/net/server/channel/worker/FaceExpressionScheduler.java
@@ -1,6 +1,6 @@
 /*
     This file is part of the HeavenMS MapleStory Server
-    Copyleft 2016 - 2018 RonanLana
+    Copyleft (L) 2016 - 2018 RonanLana
 
     This program is free software: you can redistribute it and/or modify
     it under the terms of the GNU Affero General Public License as
diff --git a/src/net/server/channel/worker/MobAnimationScheduler.java b/src/net/server/channel/worker/MobAnimationScheduler.java
index f313239c8..ca22e9986 100644
--- a/src/net/server/channel/worker/MobAnimationScheduler.java
+++ b/src/net/server/channel/worker/MobAnimationScheduler.java
@@ -1,6 +1,6 @@
 /*
     This file is part of the HeavenMS MapleStory Server
-    Copyleft 2016 - 2018 RonanLana
+    Copyleft (L) 2016 - 2018 RonanLana
 
     This program is free software: you can redistribute it and/or modify
     it under the terms of the GNU Affero General Public License as
diff --git a/src/net/server/channel/worker/MobClearSkillScheduler.java b/src/net/server/channel/worker/MobClearSkillScheduler.java
index 6f40945f2..0f95e4ccc 100644
--- a/src/net/server/channel/worker/MobClearSkillScheduler.java
+++ b/src/net/server/channel/worker/MobClearSkillScheduler.java
@@ -1,6 +1,6 @@
 /*
     This file is part of the HeavenMS MapleStory Server
-    Copyleft 2016 - 2018 RonanLana
+    Copyleft (L) 2016 - 2018 RonanLana
 
     This program is free software: you can redistribute it and/or modify
     it under the terms of the GNU Affero General Public License as
diff --git a/src/net/server/channel/worker/MobMistScheduler.java b/src/net/server/channel/worker/MobMistScheduler.java
index 920604d09..eb0822e3b 100644
--- a/src/net/server/channel/worker/MobMistScheduler.java
+++ b/src/net/server/channel/worker/MobMistScheduler.java
@@ -1,6 +1,6 @@
 /*
     This file is part of the HeavenMS MapleStory Server
-    Copyleft 2016 - 2018 RonanLana
+    Copyleft (L) 2016 - 2018 RonanLana
 
     This program is free software: you can redistribute it and/or modify
     it under the terms of the GNU Affero General Public License as
diff --git a/src/net/server/channel/worker/MobStatusScheduler.java b/src/net/server/channel/worker/MobStatusScheduler.java
index 9a69e891d..42dd02102 100644
--- a/src/net/server/channel/worker/MobStatusScheduler.java
+++ b/src/net/server/channel/worker/MobStatusScheduler.java
@@ -1,6 +1,6 @@
 /*
     This file is part of the HeavenMS MapleStory Server
-    Copyleft 2016 - 2018 RonanLana
+    Copyleft (L) 2016 - 2018 RonanLana
 
     This program is free software: you can redistribute it and/or modify
     it under the terms of the GNU Affero General Public License as
diff --git a/src/net/server/channel/worker/OverallScheduler.java b/src/net/server/channel/worker/OverallScheduler.java
index ef404e289..4b34c589d 100644
--- a/src/net/server/channel/worker/OverallScheduler.java
+++ b/src/net/server/channel/worker/OverallScheduler.java
@@ -1,6 +1,6 @@
 /*
     This file is part of the HeavenMS MapleStory Server
-    Copyleft 2016 - 2018 RonanLana
+    Copyleft (L) 2016 - 2018 RonanLana
 
     This program is free software: you can redistribute it and/or modify
     it under the terms of the GNU Affero General Public License as
diff --git a/src/net/server/channel/worker/SchedulerListener.java b/src/net/server/channel/worker/SchedulerListener.java
index d1149a8f5..8e910df12 100644
--- a/src/net/server/channel/worker/SchedulerListener.java
+++ b/src/net/server/channel/worker/SchedulerListener.java
@@ -1,6 +1,6 @@
 /*
     This file is part of the HeavenMS MapleStory Server
-    Copyleft 2016 - 2018 RonanLana
+    Copyleft (L) 2016 - 2018 RonanLana
 
     This program is free software: you can redistribute it and/or modify
     it under the terms of the GNU Affero General Public License as
diff --git a/src/net/server/guild/MapleAlliance.java b/src/net/server/guild/MapleAlliance.java
index 863150e60..97809e678 100644
--- a/src/net/server/guild/MapleAlliance.java
+++ b/src/net/server/guild/MapleAlliance.java
@@ -297,17 +297,52 @@ public static void disbandAlliance(int allianceId) {
         }
     }
     
-    public static void removeGuildFromAlliance(int allianceId, int guildId, int worldId) {
-        MapleAlliance alliance = Server.getInstance().getAlliance(allianceId);
-                
-        Server.getInstance().allianceMessage(alliance.getId(), MaplePacketCreator.removeGuildFromAlliance(alliance, guildId, worldId), -1, -1);
-        Server.getInstance().removeGuildFromAlliance(alliance.getId(), guildId);
-
-        Server.getInstance().allianceMessage(alliance.getId(), MaplePacketCreator.getGuildAlliances(alliance, worldId), -1, -1);
-        Server.getInstance().allianceMessage(alliance.getId(), MaplePacketCreator.allianceNotice(alliance.getId(), alliance.getNotice()), -1, -1);
-        Server.getInstance().guildMessage(guildId, MaplePacketCreator.disbandAlliance(alliance.getId()));
-
-        alliance.dropMessage("[" + Server.getInstance().getGuild(guildId, worldId).getName() + "] guild has left the union.");
+    private static void removeGuildFromAllianceOnDb(int guildId) {
+        PreparedStatement ps = null;
+        Connection con = null;
+        try {
+            con = DatabaseConnection.getConnection();
+            
+            ps = con.prepareStatement("DELETE FROM `allianceguilds` WHERE guildid = ?");
+            ps.setInt(1, guildId);
+            ps.executeUpdate();
+            ps.close();
+            
+            con.close();
+        } catch (SQLException sqle) {
+            sqle.printStackTrace();
+        } finally {
+            try {
+                if (ps != null && !ps.isClosed()) {
+                    ps.close();
+                }
+                if (con != null && !con.isClosed()) {
+                    con.close();
+                }
+            } catch (SQLException ex) {
+                ex.printStackTrace();
+            }
+        }
+    }
+    
+    public static boolean removeGuildFromAlliance(int allianceId, int guildId, int worldId) {
+        Server srv = Server.getInstance();
+        MapleAlliance alliance = srv.getAlliance(allianceId);
+    
+        if (alliance.getLeader().getGuildId() == guildId) {
+            return false;
+        }
+        
+        srv.allianceMessage(alliance.getId(), MaplePacketCreator.removeGuildFromAlliance(alliance, guildId, worldId), -1, -1);
+        srv.removeGuildFromAlliance(alliance.getId(), guildId);
+        removeGuildFromAllianceOnDb(guildId);
+        
+        srv.allianceMessage(alliance.getId(), MaplePacketCreator.getGuildAlliances(alliance, worldId), -1, -1);
+        srv.allianceMessage(alliance.getId(), MaplePacketCreator.allianceNotice(alliance.getId(), alliance.getNotice()), -1, -1);
+        srv.guildMessage(guildId, MaplePacketCreator.disbandAlliance(alliance.getId()));
+        
+        alliance.dropMessage("[" + srv.getGuild(guildId, worldId).getName() + "] guild has left the union.");
+        return true;
     }
     
     public void updateAlliancePackets(MapleCharacter chr) {
diff --git a/src/net/server/guild/MapleGuild.java b/src/net/server/guild/MapleGuild.java
index 5ba2321f7..8d50395f9 100644
--- a/src/net/server/guild/MapleGuild.java
+++ b/src/net/server/guild/MapleGuild.java
@@ -604,10 +604,9 @@ public void changeRankTitle(String[] ranks) {
 
     public void disbandGuild() {
         if(allianceId > 0) {
-            MapleAlliance alliance = Server.getInstance().getAlliance(allianceId);
-            
-            if(alliance.getLeader().getGuildId() != id) MapleAlliance.removeGuildFromAlliance(allianceId, id, world);
-            else MapleAlliance.disbandAlliance(allianceId);
+            if (!MapleAlliance.removeGuildFromAlliance(allianceId, id, world)) {
+                MapleAlliance.disbandAlliance(allianceId);
+            }
         }
         
         membersLock.lock();
diff --git a/src/net/server/world/World.java b/src/net/server/world/World.java
index 3baee5125..e4b854c71 100644
--- a/src/net/server/world/World.java
+++ b/src/net/server/world/World.java
@@ -170,7 +170,7 @@ public World(int world, int flag, String eventmsg, int exprate, int droprate, in
         runningPartyId.set(1);
         runningMessengerId.set(1);
         
-        petUpdate = System.currentTimeMillis();
+        petUpdate = Server.getInstance().getCurrentTime();
         mountUpdate = petUpdate;
         
         for (int i = 0; i < 9; i++) {
@@ -1303,7 +1303,7 @@ public void registerPetHunger(MapleCharacter chr, byte petSlot) {
         activePetsLock.lock();
         try {
             int initProc;
-            if(System.currentTimeMillis() - petUpdate > 55000) initProc = ServerConstants.PET_EXHAUST_COUNT - 2;
+            if(Server.getInstance().getCurrentTime() - petUpdate > 55000) initProc = ServerConstants.PET_EXHAUST_COUNT - 2;
             else initProc = ServerConstants.PET_EXHAUST_COUNT - 1;
             
             activePets.put(key, initProc);
@@ -1328,7 +1328,7 @@ public void runPetSchedule() {
         
         activePetsLock.lock();
         try {
-            petUpdate = System.currentTimeMillis();
+            petUpdate = Server.getInstance().getCurrentTime();
             deployedPets = Collections.unmodifiableMap(activePets);
         } finally {
             activePetsLock.unlock();
@@ -1362,7 +1362,7 @@ public void registerMountHunger(MapleCharacter chr) {
         activeMountsLock.lock();
         try {
             int initProc;
-            if(System.currentTimeMillis() - mountUpdate > 45000) initProc = ServerConstants.MOUNT_EXHAUST_COUNT - 2;
+            if(Server.getInstance().getCurrentTime() - mountUpdate > 45000) initProc = ServerConstants.MOUNT_EXHAUST_COUNT - 2;
             else initProc = ServerConstants.MOUNT_EXHAUST_COUNT - 1;
             
             activeMounts.put(key, initProc);
@@ -1386,7 +1386,7 @@ public void runMountSchedule() {
         Map<Integer, Integer> deployedMounts;
         activeMountsLock.lock();
         try {
-            mountUpdate = System.currentTimeMillis();
+            mountUpdate = Server.getInstance().getCurrentTime();
             deployedMounts = Collections.unmodifiableMap(activeMounts);
         } finally {
             activeMountsLock.unlock();
diff --git a/src/scripting/event/EventInstanceManager.java b/src/scripting/event/EventInstanceManager.java
index 5af9606cc..5592d99d3 100644
--- a/src/scripting/event/EventInstanceManager.java
+++ b/src/scripting/event/EventInstanceManager.java
@@ -67,6 +67,7 @@
 import java.util.logging.Logger;
 import net.server.coordinator.MapleEventRecallCoordinator;
 import scripting.AbstractPlayerInteraction;
+import scripting.event.worker.EventScriptScheduler;
 import server.MapleItemInformationProvider;
 import server.life.MapleLifeFactory;
 import server.life.MapleNPC;
@@ -83,6 +84,7 @@
 	private List<MapleMonster> mobs = new LinkedList<>();
 	private Map<MapleCharacter, Integer> killCount = new HashMap<>();
 	private EventManager em;
+        private EventScriptScheduler ess;
 	private MapleMapFactory mapFactory;
 	private String name;
 	private Properties props = new Properties();
@@ -124,6 +126,7 @@
 	public EventInstanceManager(EventManager em, String name) {
 		this.em = em;
 		this.name = name;
+                this.ess = new EventScriptScheduler();
 		mapFactory = new MapleMapFactory(this, MapleDataProviderFactory.getDataProvider(new File(System.getProperty("wzpath") + "/Map.wz")), MapleDataProviderFactory.getDataProvider(new File(System.getProperty("wzpath") + "/String.wz")), (byte) 0, (byte) 1);//Fk this
 		mapFactory.setChannel(em.getChannelServer().getId());
 	}
@@ -553,9 +556,7 @@ public void playerKilled(MapleCharacter chr) {
                         } finally {
                                 sL.unlock();
                         }
-		} catch (ScriptException | NoSuchMethodException ex) {
-			ex.printStackTrace();
-		}
+		} catch (ScriptException | NoSuchMethodException ex) {} // optional
 	}
 
         public void reviveMonster(MapleMonster mob) {
@@ -583,9 +584,8 @@ public boolean revivePlayer(MapleCharacter chr) {
 			if (b instanceof Boolean) {
 				return (Boolean) b;
 			}
-		} catch (ScriptException | NoSuchMethodException ex) {
-			ex.printStackTrace();
-		}
+		} catch (ScriptException | NoSuchMethodException ex) {} // optional
+                
 		return true;
 	}
         
@@ -674,12 +674,15 @@ public synchronized void dispose(boolean shutdown) {    // should not trigger an
                 }
 
                 mapFactory.dispose();
+                ess.dispose();
+                
                 wL.lock();
                 try {
                         for(MapleCharacter chr: chars.values()) chr.setEventInstance(null);
                         chars.clear();
                         mobs.clear();
                         mapFactory = null;
+                        ess = null;
                 } finally {
                         wL.unlock();
                 }
@@ -725,27 +728,31 @@ public MapleMapFactory getMapFactory() {
 	}
 
 	public void schedule(final String methodName, long delay) {
-                List<MapleCharacter> chrList = this.getPlayerList();
-                int mapid = !chrList.isEmpty() ? chrList.get(0).getMapId() : 0;
-                
-                Runnable r = new Runnable() {
-			@Override
-			public void run() {
-				try {
-                                        sL.lock();
-                                        try {
-                                               if(em == null) return;
-                                               em.getIv().invokeFunction(methodName, EventInstanceManager.this);
-                                        } finally {
-                                                sL.unlock();
+                rL.lock();
+                try {
+                        if (ess != null) {
+                                Runnable r = new Runnable() {
+                                        @Override
+                                        public void run() {
+                                                try {
+                                                        sL.lock();
+                                                        try {
+                                                               if(em == null) return;
+                                                               em.getIv().invokeFunction(methodName, EventInstanceManager.this);
+                                                        } finally {
+                                                                sL.unlock();
+                                                        }
+                                                } catch (ScriptException | NoSuchMethodException ex) {
+                                                        ex.printStackTrace();
+                                                }
                                         }
-				} catch (ScriptException | NoSuchMethodException ex) {
-					ex.printStackTrace();
-				}
-			}
-		};
-                
-                getEm().getChannelServer().registerEventAction(mapid, r, delay);
+                                };
+
+                                ess.registerEntry(r, delay);
+                        }
+                } finally {
+                        rL.unlock();
+                }
 	}
 
 	public String getName() {
diff --git a/src/scripting/event/EventManager.java b/src/scripting/event/EventManager.java
index 60beebe1f..286997cd2 100644
--- a/src/scripting/event/EventManager.java
+++ b/src/scripting/event/EventManager.java
@@ -101,6 +101,10 @@ public EventManager(Channel cserv, Invocable iv, String name) {
         for(int i = 0; i < maxLobbys; i++) this.openedLobbys.add(false);
     }
 
+    private boolean isDisposed() {
+        return onLoadInstances <= -1000;
+    }
+    
     public void cancel() {  // make sure to only call this when there are NO PLAYERS ONLINE to mess around with the event manager!
         ess.dispose();
         
@@ -342,6 +346,8 @@ public boolean startInstance(int lobbyId, MapleExpedition exped) {
 
     //Expedition method: starts an expedition
     public boolean startInstance(int lobbyId, MapleExpedition exped, MapleCharacter leader) {
+        if (this.isDisposed()) return false;
+        
         try {
             if(!playerPermit.contains(leader.getId()) && startSemaphore.tryAcquire(7777, TimeUnit.MILLISECONDS)) {
                 playerPermit.add(leader.getId());
@@ -399,6 +405,8 @@ public boolean startInstance(int lobbyId, MapleCharacter leader) {
     }
     
     public boolean startInstance(int lobbyId, MapleCharacter chr, MapleCharacter leader, int difficulty) {
+        if (this.isDisposed()) return false;
+        
         try {
             if(!playerPermit.contains(leader.getId()) && startSemaphore.tryAcquire(7777, TimeUnit.MILLISECONDS)) {
                 playerPermit.add(leader.getId());
@@ -459,6 +467,8 @@ public boolean startInstance(int lobbyId, MapleParty party, MapleMap map) {
     }
     
     public boolean startInstance(int lobbyId, MapleParty party, MapleMap map, MapleCharacter leader) {
+        if (this.isDisposed()) return false;
+        
         try {
             if(!playerPermit.contains(leader.getId()) && startSemaphore.tryAcquire(7777, TimeUnit.MILLISECONDS)) {
                 playerPermit.add(leader.getId());
@@ -516,6 +526,8 @@ public boolean startInstance(int lobbyId, MapleParty party, MapleMap map, int di
     }
     
     public boolean startInstance(int lobbyId, MapleParty party, MapleMap map, int difficulty, MapleCharacter leader) {
+        if (this.isDisposed()) return false;
+        
         try {
             if(!playerPermit.contains(leader.getId()) && startSemaphore.tryAcquire(7777, TimeUnit.MILLISECONDS)) {
                 playerPermit.add(leader.getId());
@@ -577,6 +589,8 @@ public boolean startInstance(int lobbyId, EventInstanceManager eim, String ldr)
     }
     
     public boolean startInstance(int lobbyId, EventInstanceManager eim, String ldr, MapleCharacter leader) {
+        if (this.isDisposed()) return false;
+        
         try {
             if(!playerPermit.contains(leader.getId()) && startSemaphore.tryAcquire(7777, TimeUnit.MILLISECONDS)) {
                 playerPermit.add(leader.getId());
@@ -811,7 +825,7 @@ private void instantiateQueuedInstance() {
         int nextEventId;
         queueLock.lock();
         try {
-            if(onLoadInstances <= -1000 || readyInstances.size() + onLoadInstances >= Math.ceil((double)maxLobbys / 3.0)) return;
+            if (this.isDisposed() || readyInstances.size() + onLoadInstances >= Math.ceil((double)maxLobbys / 3.0)) return;
             
             onLoadInstances++;
             nextEventId = readyId;
@@ -823,7 +837,7 @@ private void instantiateQueuedInstance() {
         EventInstanceManager eim = new EventInstanceManager(this, "sampleName" + nextEventId);
         queueLock.lock();
         try {
-            if(onLoadInstances <= -1000) {  // EM already disposed
+            if (this.isDisposed()) {  // EM already disposed
                 return;
             }
             
diff --git a/src/scripting/event/EventScheduledFuture.java b/src/scripting/event/EventScheduledFuture.java
index afb35c470..c653a17f6 100644
--- a/src/scripting/event/EventScheduledFuture.java
+++ b/src/scripting/event/EventScheduledFuture.java
@@ -1,6 +1,6 @@
 /*
     This file is part of the HeavenMS MapleStory Server
-    Copyleft 2016 - 2018 RonanLana
+    Copyleft (L) 2016 - 2018 RonanLana
 
     This program is free software: you can redistribute it and/or modify
     it under the terms of the GNU Affero General Public License as
diff --git a/src/scripting/event/EventScriptManager.java b/src/scripting/event/EventScriptManager.java
index 8cc6d63f9..56c05d5f6 100644
--- a/src/scripting/event/EventScriptManager.java
+++ b/src/scripting/event/EventScriptManager.java
@@ -23,6 +23,7 @@
 
 import java.util.LinkedHashMap;
 import java.util.Map;
+import java.util.Map.Entry;
 import java.util.logging.Level;
 import java.util.logging.Logger;
 
@@ -37,6 +38,7 @@
  * @author Matze
  */
 public class EventScriptManager extends AbstractScriptManager {
+    
     private class EventEntry {
         public EventEntry(Invocable iv, EventManager em) {
             this.iv = iv;
@@ -77,8 +79,20 @@ public void init() {
         }
     }
     
-    public void reload(){
+    private void reloadScripts() {
+        if (events.isEmpty()) return;
+        
+        Channel cserv = events.values().iterator().next().em.getChannelServer();
+        for (Entry<String, EventEntry> entry : events.entrySet()) {
+            String script = entry.getKey();
+            Invocable iv = getInvocable("event/" + script + ".js", null);
+            events.put(script, new EventEntry(iv, new EventManager(cserv, iv, script)));
+        }
+    }
+    
+    public void reload() {
     	cancel();
+        reloadScripts();
     	init();
     }
 
diff --git a/src/scripting/event/worker/EventScriptScheduler.java b/src/scripting/event/worker/EventScriptScheduler.java
index 665be8938..02e4cde6d 100644
--- a/src/scripting/event/worker/EventScriptScheduler.java
+++ b/src/scripting/event/worker/EventScriptScheduler.java
@@ -1,6 +1,6 @@
 /*
     This file is part of the HeavenMS MapleStory Server
-    Copyleft 2016 - 2018 RonanLana
+    Copyleft (L) 2016 - 2018 RonanLana
 
     This program is free software: you can redistribute it and/or modify
     it under the terms of the GNU Affero General Public License as
diff --git a/src/scripting/reactor/ReactorActionManager.java b/src/scripting/reactor/ReactorActionManager.java
index 1b2241ea4..9dcc75aa4 100644
--- a/src/scripting/reactor/ReactorActionManager.java
+++ b/src/scripting/reactor/ReactorActionManager.java
@@ -288,6 +288,7 @@ public void spawnFakeMonster(int id) {
 
     public ScheduledFuture<?> schedule(final String methodName, final EventInstanceManager eim, long delay) {
         return TimerManager.getInstance().schedule(new Runnable() {
+            @Override
             public void run() {
                 try {
                     iv.invokeFunction(methodName, eim);
@@ -300,6 +301,7 @@ public void run() {
 
     public ScheduledFuture<?> scheduleAtTimestamp(final String methodName, long timestamp) {
         return TimerManager.getInstance().scheduleAtTimestamp(new Runnable() {
+            @Override
             public void run() {
                 try {
                     iv.invokeFunction(methodName, (Object) null);
diff --git a/src/scripting/reactor/ReactorScriptManager.java b/src/scripting/reactor/ReactorScriptManager.java
index f10395768..45e61feed 100644
--- a/src/scripting/reactor/ReactorScriptManager.java
+++ b/src/scripting/reactor/ReactorScriptManager.java
@@ -58,10 +58,9 @@ public void onHit(MapleClient c, MapleReactor reactor) {
             ReactorActionManager rm = new ReactorActionManager(c, reactor, iv);
             engine.put("rm", rm);
             iv.invokeFunction("hit");
-        } catch(final NoSuchMethodException e) {
-            //do nothing, hit is OPTIONAL
-        }
-        catch (final ScriptException | NullPointerException e) {
+        } catch (final NoSuchMethodException e) {} //do nothing, hit is OPTIONAL
+        
+          catch (final ScriptException | NullPointerException e) {
             FilePrinter.printError(FilePrinter.REACTOR + reactor.getId() + ".txt", e);
         }
     }
diff --git a/src/server/MakerItemFactory.java b/src/server/MakerItemFactory.java
index c30a8d84e..99c6eda68 100644
--- a/src/server/MakerItemFactory.java
+++ b/src/server/MakerItemFactory.java
@@ -71,7 +71,7 @@ public static MakerItemCreateEntry generateDisassemblyCrystalEntry(int cost, int
     private static double getMakerStimulantFee(int itemid) {
         if(ServerConstants.USE_MAKER_FEE_HEURISTICS) {
             EquipType et = EquipType.getEquipTypeById(itemid);
-            int eqpLevel = ii.getEquipStats(itemid).get("reqLevel");
+            int eqpLevel = ii.getEquipLevelReq(itemid);
 
             switch(et) {
                 case CAP:
@@ -106,7 +106,7 @@ private static double getMakerStimulantFee(int itemid) {
     private static double getMakerReagentFee(int itemid, int reagentLevel) {
         if(ServerConstants.USE_MAKER_FEE_HEURISTICS) {
             EquipType et = EquipType.getEquipTypeById(itemid);
-            int eqpLevel = ii.getEquipStats(itemid).get("reqLevel");
+            int eqpLevel = ii.getEquipLevelReq(itemid);
 
             switch(et) {
                 case CAP:
diff --git a/src/server/MapleItemInformationProvider.java b/src/server/MapleItemInformationProvider.java
index e79eba08b..6c2929ccb 100644
--- a/src/server/MapleItemInformationProvider.java
+++ b/src/server/MapleItemInformationProvider.java
@@ -98,6 +98,7 @@ public static MapleItemInformationProvider getInstance() {
     protected Map<Integer, Map<String, Integer>> equipStatsCache = new HashMap<>();
     protected Map<Integer, Equip> equipCache = new HashMap<>();
     protected Map<Integer, MapleData> equipLevelInfoCache = new HashMap<>();
+    protected Map<Integer, Integer> equipLevelReqCache = new HashMap<>();
     protected Map<Integer, Integer> equipMaxLevelCache = new HashMap<>();
     protected Map<Integer, Integer> wholePriceCache = new HashMap<>();
     protected Map<Integer, Double> unitPriceCache = new HashMap<>();
@@ -598,6 +599,24 @@ protected String getEquipmentSlot(int itemId) {
         equipStatsCache.put(itemId, ret);
         return ret;
     }
+    
+    public Integer getEquipLevelReq(int itemId) {
+        if (equipLevelReqCache.containsKey(itemId)) {
+            return equipLevelReqCache.get(itemId);
+        }
+        
+        int ret = 0;
+        MapleData item = getItemData(itemId);
+        if (item != null) {
+            MapleData info = item.getChildByPath("info");
+            if (info != null) {
+                ret = MapleDataTool.getInt("reqLevel", info, 0);
+            }
+        }
+        
+        equipLevelReqCache.put(itemId, ret);
+        return ret;
+    }
 
     public List<Integer> getScrollReqs(int itemId) {
         List<Integer> ret = new ArrayList<>();
@@ -1570,7 +1589,7 @@ public boolean isUpgradeable(int itemId) {
         }
         for (Item item : items) {
             Equip equip = (Equip) item;
-            int reqLevel = getEquipStats(equip.getItemId()).get("reqLevel");
+            int reqLevel = getEquipLevelReq(equip.getItemId());
             if (highfivestamp) {
                 reqLevel -= 5;
                 if (reqLevel < 0) {
@@ -1645,7 +1664,7 @@ public boolean canWearEquipment(MapleCharacter chr, Equip equip, int dst) {
             ex.printStackTrace();
          }*/
        
-        int reqLevel = getEquipStats(equip.getItemId()).get("reqLevel");
+        int reqLevel = getEquipLevelReq(equip.getItemId());
         if (highfivestamp) {
             reqLevel -= 5;
         }
@@ -1922,8 +1941,7 @@ public MakerItemCreateEntry getMakerItemEntry(int toCreate) {
     
     public int getMakerCrystalFromEquip(Integer equipId) {
         try {
-            Map<String, Integer> stats = getEquipStats(equipId);
-            return getCrystalForLevel(stats.get("reqLevel"));
+            return getCrystalForLevel(getEquipLevelReq(equipId));
         } catch (Exception e) {
             e.printStackTrace();
         }
@@ -1933,7 +1951,7 @@ public int getMakerCrystalFromEquip(Integer equipId) {
     
     public int getMakerStimulantFromEquip(Integer equipId) {
         try {
-            return getCrystalForLevel(getEquipStats(equipId).get("reqLevel"));
+            return getCrystalForLevel(getEquipLevelReq(equipId));
         } catch (Exception e) {
             e.printStackTrace();
         }
diff --git a/src/server/MapleStatEffect.java b/src/server/MapleStatEffect.java
index 6f41d6872..9116b4d90 100644
--- a/src/server/MapleStatEffect.java
+++ b/src/server/MapleStatEffect.java
@@ -708,7 +708,7 @@ public void applyPassive(MapleCharacter applyto, MapleMapObject obj, int attack)
                         if (absorbMp > 0) {
                             mob.setMp(mob.getMp() - absorbMp);
                             applyto.addMP(absorbMp);
-                            applyto.getClient().announce(MaplePacketCreator.showOwnBuffEffect(sourceid, 1));
+                            applyto.announce(MaplePacketCreator.showOwnBuffEffect(sourceid, 1));
                             applyto.getMap().broadcastMessage(applyto, MaplePacketCreator.showBuffeffect(applyto.getId(), sourceid, 1), false);
                         }
                     }
@@ -745,14 +745,14 @@ private boolean applyTo(MapleCharacter applyfrom, MapleCharacter applyto, boolea
         if (primary) {
             if (itemConNo != 0) {
                 if(!applyto.getClient().getAbstractPlayerInteraction().hasItem(itemCon, itemConNo)) {
-                    applyto.getClient().announce(MaplePacketCreator.enableActions());
+                    applyto.announce(MaplePacketCreator.enableActions());
                     return false;
                 }
                 MapleInventoryManipulator.removeById(applyto.getClient(), ItemConstants.getInventoryType(itemCon), itemCon, itemConNo, false, true);
             }
         } else {
-            if(isResurrection()) {
-                hpchange = applyto.getMaxHp();
+            if (isResurrection()) {
+                hpchange = applyto.getCurrentMaxHp();
                 applyto.setStance(0);
                 
                 applyto.getMap().broadcastMessage(applyto, MaplePacketCreator.removePlayerFromMap(applyto.getId()), false);
@@ -773,38 +773,11 @@ private boolean applyTo(MapleCharacter applyfrom, MapleCharacter applyto, boolea
          AutobanFactory.MPCON.addPoint(applyfrom.getAutobanManager(), "mpCon hack for skill:" + sourceid + "; Player MP: " + applyto.getMp() + " MP Needed: " + getMpCon());
          } */
         
-        List<Pair<MapleStat, Integer>> hpmpupdate = new ArrayList<>(2);
-        if (hpchange != 0) {
-            if (hpchange < 0 && (-hpchange) >= applyto.getHp() && (!applyto.hasDisease(MapleDisease.ZOMBIFY) || hpCon > 0)) {
-                if(!applyto.isGM()) {
-                    applyto.getClient().announce(MaplePacketCreator.enableActions());
-                    return false;
-                }
-            }
-            int newHp = applyto.getHp() + hpchange;
-            if (newHp < 1) {
-                newHp = 1;
-            }
-            applyto.setHp(newHp);
-            hpmpupdate.add(new Pair<>(MapleStat.HP, Integer.valueOf(applyto.getHp())));
+        if (!applyto.applyHpMpChange(hpCon, hpchange, mpchange)) {
+            applyto.announce(MaplePacketCreator.enableActions());
+            return false;
         }
         
-        if (mpchange != 0) {
-            int newMp = applyto.getMp() + mpchange;
-            if (mpchange < 0 && -mpchange > applyto.getMp()) {
-                if(!applyto.isGM()) {
-                    applyto.getClient().announce(MaplePacketCreator.enableActions());
-                    return false;
-                }
-                else {
-                    newMp = 0;
-                }
-            }
-
-            applyto.setMp(newMp);
-            hpmpupdate.add(new Pair<>(MapleStat.MP, Integer.valueOf(applyto.getMp())));
-        }
-        applyto.getClient().announce(MaplePacketCreator.updatePlayerStats(hpmpupdate, true, applyto));
         if (moveTo != -1) {
             if (moveTo != applyto.getMapId()) {
                 MapleMap target;
@@ -835,7 +808,6 @@ private boolean applyTo(MapleCharacter applyfrom, MapleCharacter applyto, boolea
             } else {
                 return false;
             }
-
         }
         if (isShadowClaw()) {
             int projectile = 0;
@@ -858,8 +830,13 @@ private boolean applyTo(MapleCharacter applyfrom, MapleCharacter applyto, boolea
         SummonMovementType summonMovementType = getSummonMovementType();
         if (overTime || isCygnusFA() || summonMovementType != null) {
             if (summonMovementType != null && pos != null) {
-                if(summonMovementType.getValue() == summonMovementType.STATIONARY.getValue()) applyto.cancelBuffStats(MapleBuffStat.PUPPET);
-                else applyto.cancelBuffStats(MapleBuffStat.SUMMON);
+                if(summonMovementType.getValue() == summonMovementType.STATIONARY.getValue()) {
+                    applyto.cancelBuffStats(MapleBuffStat.PUPPET);
+                } else {
+                    applyto.cancelBuffStats(MapleBuffStat.SUMMON);
+                }
+                
+                applyto.announce(MaplePacketCreator.enableActions());
             }
             
             applyBuffEffect(applyfrom, applyto, primary);
@@ -951,7 +928,7 @@ private int applyBuff(MapleCharacter applyfrom, boolean useMaxRange) {
             affectedc += affectedp.size();   // used for heal
             for (MapleCharacter affected : affectedp) {
                 applyTo(applyfrom, affected, false, null, useMaxRange, affectedc);
-                affected.getClient().announce(MaplePacketCreator.showOwnBuffEffect(sourceid, 2));
+                affected.announce(MaplePacketCreator.showOwnBuffEffect(sourceid, 2));
                 affected.getMap().broadcastMessage(affected, MaplePacketCreator.showBuffeffect(affected.getId(), sourceid, 2), false);
             }
         }
@@ -1186,7 +1163,7 @@ private int calcHPChange(MapleCharacter applyfrom, boolean primary, int affected
                     hpchange /= 2;
                 }
             } else { // assumption: this is heal
-                float hpHeal = (applyfrom.getMaxHpEquipped() * (float) hp / (100.0f * affectedPlayers));
+                float hpHeal = (applyfrom.getCurrentMaxHp() * (float) hp / (100.0f * affectedPlayers));
                 hpchange += hpHeal;
                 if (applyfrom.hasDisease(MapleDisease.ZOMBIFY)) {
                     hpchange = -hpchange;
@@ -1196,7 +1173,6 @@ private int calcHPChange(MapleCharacter applyfrom, boolean primary, int affected
         }
         if (hpR != 0) {
             hpchange += (int) (applyfrom.getCurrentMaxHp() * hpR) / (applyfrom.hasDisease(MapleDisease.ZOMBIFY) ? 2 : 1);
-            applyfrom.checkBerserk(applyfrom.isHidden());
         }
         if (primary) {
             if (hpCon != 0) {
@@ -1206,7 +1182,7 @@ private int calcHPChange(MapleCharacter applyfrom, boolean primary, int affected
         if (isChakra()) {
             hpchange += makeHealHP(getY() / 100.0, applyfrom.getTotalLuk(), 2.3, 3.5);
         } else if (sourceid == SuperGM.HEAL_PLUS_DISPEL) {
-            hpchange += (applyfrom.getMaxHp() - applyfrom.getHp());
+            hpchange += applyfrom.getCurrentMaxHp();
         }
 
         return hpchange;
@@ -1250,7 +1226,7 @@ private int calcMPChange(MapleCharacter applyfrom, boolean primary) {
             }
         }
         if (sourceid == SuperGM.HEAL_PLUS_DISPEL) {
-            mpchange += (applyfrom.getMaxMp() - applyfrom.getMp());
+            mpchange += applyfrom.getCurrentMaxMp();
         }
 
         return mpchange;
diff --git a/src/server/life/MapleLifeFactory.java b/src/server/life/MapleLifeFactory.java
index c9f2de66a..072fd5f68 100644
--- a/src/server/life/MapleLifeFactory.java
+++ b/src/server/life/MapleLifeFactory.java
@@ -132,12 +132,16 @@ public static MapleMonster getMonster(int mid) {
                     stats.setRevives(revives);
                 }
                 decodeElementalString(stats, MapleDataTool.getString("elemAttr", monsterInfoData, ""));
+                
+                MapleMonsterInformationProvider mi = MapleMonsterInformationProvider.getInstance();
                 MapleData monsterSkillInfoData = monsterInfoData.getChildByPath("skill");
                 if (monsterSkillInfoData != null) {
                     int i = 0;
                     List<Pair<Integer, Integer>> skills = new ArrayList<>();
                     while (monsterSkillInfoData.getChildByPath(Integer.toString(i)) != null) {
-                        skills.add(new Pair<>(Integer.valueOf(MapleDataTool.getInt(i + "/skill", monsterSkillInfoData, 0)), Integer.valueOf(MapleDataTool.getInt(i + "/level", monsterSkillInfoData, 0))));
+                        int skillId = MapleDataTool.getInt(i + "/skill", monsterSkillInfoData, 0);
+                        int skillLv = MapleDataTool.getInt(i + "/level", monsterSkillInfoData, 0);
+                        skills.add(new Pair<>(skillId, skillLv));
                         
                         MapleData monsterSkillData = monsterData.getChildByPath("skill" + (i + 1));
                         if (monsterSkillData != null) {
@@ -146,7 +150,8 @@ public static MapleMonster getMonster(int mid) {
                                 animationTime += MapleDataTool.getIntConvert("delay", effectEntry, 0);
                             }
                             
-                            MapleMonsterInformationProvider.getInstance().setMobSkillAnimationTime(mid, i, animationTime);
+                            MobSkill skill = MobSkillFactory.getMobSkill(skillId, skillLv);
+                            mi.setMobSkillAnimationTime(skill, animationTime);
                         }
                         
                         i++;
@@ -162,7 +167,10 @@ public static MapleMonster getMonster(int mid) {
                         animationTime += MapleDataTool.getIntConvert("delay", effectEntry, 0);
                     }
 
-                    MapleMonsterInformationProvider.getInstance().setMobAttackAnimationTime(mid, i, animationTime);
+                    int mpCon = MapleDataTool.getIntConvert("info/conMP", monsterAttackData, 0);
+                    int coolTime = MapleDataTool.getIntConvert("info/attackAfter", monsterAttackData, 0);
+                    mi.setMobAttackInfo(mid, i, mpCon, coolTime);
+                    mi.setMobAttackAnimationTime(mid, i, animationTime);
                     i++;
                 }
                 
diff --git a/src/server/life/MapleMonster.java b/src/server/life/MapleMonster.java
index 849c3f6cd..4f7ab8fa3 100644
--- a/src/server/life/MapleMonster.java
+++ b/src/server/life/MapleMonster.java
@@ -79,7 +79,6 @@
     private AtomicInteger hp = new AtomicInteger(1);
     private AtomicLong maxHpPlusHeal = new AtomicLong(1);
     private int mp;
-    private long nextBasicSkillTime;
     private WeakReference<MapleCharacter> controller = new WeakReference<>(null);
     private boolean controllerHasAggro, controllerKnowsAboutAggro;
     private Collection<MonsterListener> listeners = new LinkedList<>();
@@ -91,6 +90,7 @@
     private boolean dropsDisabled = false;
     private List<Pair<Integer, Integer>> usedSkills = new ArrayList<>();
     private Map<Pair<Integer, Integer>, Integer> skillsUsed = new HashMap<>();
+    private Set<Integer> usedAttacks = new HashSet<>();
     private List<Integer> stolenItems = new ArrayList<>();
     private int team;
     private int parentMobOid = 0;
@@ -240,16 +240,16 @@ public void setHpZero() {     // force HP = 0
         applyAndGetHpDamage(Integer.MAX_VALUE, false);
     }
     
-    public boolean applyAnimationIfRoaming(int attackPos, int skillPos) {   // roam: not casting attack or skill animations
+    private boolean applyAnimationIfRoaming(int attackPos, MobSkill skill) {   // roam: not casting attack or skill animations
         if(!animationLock.tryLock()) return false;
     
         try {
             long animationTime;
         
-            if(skillPos < 0) {
+            if(skill == null) {
                 animationTime = MapleMonsterInformationProvider.getInstance().getMobAttackAnimationTime(this.getId(), attackPos);
             } else {
-                animationTime = MapleMonsterInformationProvider.getInstance().getMobSkillAnimationTime(this.getId(), skillPos);
+                animationTime = MapleMonsterInformationProvider.getInstance().getMobSkillAnimationTime(skill);
             }
 
             if(animationTime > 0) {
@@ -1238,54 +1238,69 @@ public MapleMap getMap() {
     public boolean hasSkill(int skillId, int level) {
         return stats.hasSkill(skillId, level);
     }
-
+    
     public boolean canUseSkill(MobSkill toUse) {
         if (toUse == null) {
             return false;
         }
         
-        monsterLock.lock();
-        try {
-            for (Pair<Integer, Integer> skill : usedSkills) {
-                if (skill.getLeft() == toUse.getSkillId() && skill.getRight() == toUse.getSkillLevel()) {
-                    return false;
+        if (toUse.getSkillId() == 200) {
+            int i = 0;
+            for (MapleMapObject mo : getMap().getMapObjects()) {
+                if (mo.getType() == MapleMapObjectType.MONSTER) {
+                    i++;
                 }
             }
-        } finally {
-            monsterLock.unlock();
+            if (i > 100) {
+                return false;
+            }
         }
         
         if (toUse.getLimit() > 0) {
             monsterLock.lock();
             try {
-                if (this.skillsUsed.containsKey(new Pair<>(toUse.getSkillId(), toUse.getSkillLevel()))) {
-                    int times = this.skillsUsed.get(new Pair<>(toUse.getSkillId(), toUse.getSkillLevel()));
-                    if (times >= toUse.getLimit()) {
-                        return false;
-                    }
+                Integer times = this.skillsUsed.get(new Pair<>(toUse.getSkillId(), toUse.getSkillLevel()));
+                if (times != null && times >= toUse.getLimit()) {
+                    return false;
                 }
             } finally {
                 monsterLock.unlock();
             }
         }
-        if (toUse.getSkillId() == 200) {
-            Collection<MapleMapObject> mmo = getMap().getMapObjects();
-            int i = 0;
-            for (MapleMapObject mo : mmo) {
-                if (mo.getType() == MapleMapObjectType.MONSTER) {
-                    i++;
+        
+        monsterLock.lock();
+        try {
+            for (Pair<Integer, Integer> skill : usedSkills) {
+                if (skill.getLeft() == toUse.getSkillId() && skill.getRight() == toUse.getSkillLevel()) {
+                    return false;
                 }
             }
-            if (i > 100) {
+            
+            int mpCon = toUse.getMpCon();
+            if (mp < mpCon) {
+                return false;
+            }
+            
+            if (!this.applyAnimationIfRoaming(-1, toUse)) {
                 return false;
             }
+            
+            this.usedSkill(toUse);
+        } finally {
+            monsterLock.unlock();
         }
+        
         return true;
     }
 
-    public void usedSkill(final int skillId, final int level, long cooltime) {
+    private void usedSkill(MobSkill skill) {
+        final int skillId = skill.getSkillId(), level = skill.getSkillLevel();
+        long cooltime = skill.getCoolTime();
+        
         monsterLock.lock();
         try {
+            mp -= skill.getMpCon();
+            
             this.usedSkills.add(new Pair<>(skillId, level));
             if (this.skillsUsed.containsKey(new Pair<>(skillId, level))) {
                 int times = this.skillsUsed.get(new Pair<>(skillId, level)) + 1;
@@ -1310,7 +1325,7 @@ public void run() {
         mmap.getChannelServer().registerMobClearSkillAction(mmap.getId(), r, cooltime);
     }
 
-    public void clearSkill(int skillId, int level) {
+    private void clearSkill(int skillId, int level) {
         monsterLock.lock();
         try {
             int index = -1;
@@ -1327,13 +1342,63 @@ public void clearSkill(int skillId, int level) {
             monsterLock.unlock();
         }
     }
+    
+    public int canUseAttack(int attackPos) {
+        monsterLock.lock();
+        try {
+            if (usedAttacks.contains(attackPos)) {
+                return -1;
+            }
+            
+            Pair<Integer, Integer> attackInfo = MapleMonsterInformationProvider.getInstance().getMobAttackInfo(this.getId(), attackPos);
+            if (attackInfo == null) {
+                return usedAttacks.isEmpty() ? 0 : -1;
+            }
+            
+            int mpCon = attackInfo.getLeft();
+            if (mp < mpCon) {
+                return -1;
+            }
+            
+            if (!this.applyAnimationIfRoaming(attackPos, null)) {
+                return -1;
+            }
+            
+            usedAttack(attackPos, mpCon, attackInfo.getRight());
+            return 1;
+        } finally {
+            monsterLock.unlock();
+        }
+    }
+    
+    private void usedAttack(final int attackPos, int mpCon, int cooltime) {
+        monsterLock.lock();
+        try {
+            mp -= mpCon;
+            usedAttacks.add(attackPos);
+
+            final MapleMonster mons = this;
+            MapleMap mmap = mons.getMap();
+            Runnable r = new Runnable() {
+                @Override
+                public void run() {
+                    mons.clearAttack(attackPos);
+                }
+            };
 
-    public long getNextBasicSkillTime() {
-        return nextBasicSkillTime;
+            mmap.getChannelServer().registerMobClearSkillAction(mmap.getId(), r, cooltime);
+        } finally {
+            monsterLock.unlock();
+        }
     }
     
-    public void setNextBasicSkillTime(long time) {
-        nextBasicSkillTime = time + 4200;
+    private void clearAttack(int attackPos) {
+        monsterLock.lock();
+        try {
+            usedAttacks.remove(attackPos);
+        } finally {
+            monsterLock.unlock();
+        }
     }
     
     public int getNoSkills() {
diff --git a/src/server/life/MapleMonsterInformationProvider.java b/src/server/life/MapleMonsterInformationProvider.java
index 69ae21483..8b29fb56a 100644
--- a/src/server/life/MapleMonsterInformationProvider.java
+++ b/src/server/life/MapleMonsterInformationProvider.java
@@ -60,7 +60,9 @@ public static MapleMonsterInformationProvider getInstance() {
         private final Map<Integer, List<MonsterDropEntry>> extraMultiEquipDrops = new HashMap<>();
         
         private final Map<Pair<Integer, Integer>, Integer> mobAttackAnimationTime = new HashMap<>();
-        private final Map<Pair<Integer, Integer>, Integer> mobSkillAnimationTime = new HashMap<>();
+        private final Map<MobSkill, Integer> mobSkillAnimationTime = new HashMap<>();
+        
+        private final Map<Integer, Pair<Integer, Integer>> mobAttackInfo = new HashMap<>();
 
 	protected MapleMonsterInformationProvider() {
 		retrieveGlobal();
@@ -237,14 +239,23 @@ public final Integer getMobAttackAnimationTime(int monsterId, int attackPos) {
                 return time == null ? 0 : time;
         }
         
-        public final void setMobSkillAnimationTime(int monsterId, int skillPos, int animationTime) {
-                mobSkillAnimationTime.put(new Pair<>(monsterId, skillPos), animationTime);
+        public final void setMobSkillAnimationTime(MobSkill skill, int animationTime) {
+                mobSkillAnimationTime.put(skill, animationTime);
         }
         
-        public final Integer getMobSkillAnimationTime(int monsterId, int skillPos) {
-                Integer time = mobSkillAnimationTime.get(new Pair<>(monsterId, skillPos));
+        public final Integer getMobSkillAnimationTime(MobSkill skill) {
+                Integer time = mobSkillAnimationTime.get(skill);
                 return time == null ? 0 : time;
         }
+        
+        public final void setMobAttackInfo(int monsterId, int attackPos, int mpCon, int coolTime) {
+                mobAttackInfo.put((monsterId << 3) + attackPos, new Pair<>(mpCon, coolTime));
+        }
+        
+        public final Pair<Integer, Integer> getMobAttackInfo(int monsterId, int attackPos) {
+                if (attackPos < 0 || attackPos > 7) return null;
+                return mobAttackInfo.get((monsterId << 3) + attackPos);
+        }
 
 	public static ArrayList<Pair<Integer, String>> getMobsIDsFromName(String search) {
 		MapleDataProvider dataProvider = MapleDataProviderFactory.getDataProvider(new File("wz/String.wz"));
diff --git a/src/server/life/MobSkill.java b/src/server/life/MobSkill.java
index 42ee5fc3a..40397c234 100644
--- a/src/server/life/MobSkill.java
+++ b/src/server/life/MobSkill.java
@@ -323,8 +323,6 @@ public void applyEffect(MapleCharacter player, MapleMonster monster, boolean ski
                 player.giveDebuff(disease, this);
             }
         }
-        monster.usedSkill(skillId, skillLevel, cooltime);
-        monster.setMp(monster.getMp() - getMpCon());
     }
 
     private List<MapleCharacter> getPlayersInRange(MapleMonster monster, MapleCharacter player) {
diff --git a/src/server/maps/MapleMap.java b/src/server/maps/MapleMap.java
index e2225dff9..66f1bc867 100644
--- a/src/server/maps/MapleMap.java
+++ b/src/server/maps/MapleMap.java
@@ -861,7 +861,7 @@ private synchronized void instantiateItemDrop(MapleMapItem mdrop) {
     }
     
     private void registerItemDrop(MapleMapItem mdrop) {
-        droppedItems.put(mdrop, !everlast ? System.currentTimeMillis() + ServerConstants.ITEM_EXPIRE_TIME : Long.MAX_VALUE);
+        droppedItems.put(mdrop, !everlast ? Server.getInstance().getCurrentTime() + ServerConstants.ITEM_EXPIRE_TIME : Long.MAX_VALUE);
     }
     
     private void unregisterItemDrop(MapleMapItem mdrop) {
@@ -878,7 +878,7 @@ private void makeDisappearExpiredItemDrops() {
         
         objectRLock.lock();
         try {
-            long timeNow = System.currentTimeMillis();
+            long timeNow = Server.getInstance().getCurrentTime();
             
             for(Entry<MapleMapItem, Long> it : droppedItems.entrySet()) {
                 if(it.getValue() < timeNow) {
@@ -1018,7 +1018,7 @@ public void updatePlayerItemDrops(int partyid, int charid, List<MapleCharacter>
     
     private void spawnDrop(final Item idrop, final Point dropPos, final MapleMapObject dropper, final MapleCharacter chr, final byte droptype, final short questid) {
         final MapleMapItem mdrop = new MapleMapItem(idrop, dropPos, dropper, chr, chr.getClient(), droptype, false, questid);
-        mdrop.setDropTime(System.currentTimeMillis());
+        mdrop.setDropTime(Server.getInstance().getCurrentTime());
         spawnAndAddRangedMapObject(mdrop, new DelayedPacketCreation() {
             @Override
             public void sendPackets(MapleClient c) {
@@ -1042,7 +1042,7 @@ public void sendPackets(MapleClient c) {
     public final void spawnMesoDrop(final int meso, final Point position, final MapleMapObject dropper, final MapleCharacter owner, final boolean playerDrop, final byte droptype) {
         final Point droppos = calcDropPos(position, position);
         final MapleMapItem mdrop = new MapleMapItem(meso, droppos, dropper, owner, owner.getClient(), droptype, playerDrop);
-        mdrop.setDropTime(System.currentTimeMillis());
+        mdrop.setDropTime(Server.getInstance().getCurrentTime());
 
         spawnAndAddRangedMapObject(mdrop, new DelayedPacketCreation() {
             @Override
@@ -1904,7 +1904,7 @@ public void sendPackets(MapleClient c) {
         }
         
         spawnedMonstersOnMap.incrementAndGet();
-        applyRemoveAfter(monster);
+        applyRemoveAfter(monster);  // thanks LightRyuzaki for pointing issues with spawned CWKPQ mobs not applying this
     }
 
     public void spawnDojoMonster(final MapleMonster monster) {
@@ -2050,10 +2050,10 @@ public void run() {
                     List<MapleMapObject> players = getMapObjectsInBox(mist.getBox(), Collections.singletonList(MapleMapObjectType.PLAYER));
                     for (MapleMapObject mo : players) {
                         if (mist.makeChanceResult()) {
-                        	MapleCharacter chr = (MapleCharacter) mo;
-                        	if (mist.getOwner().getId() == chr.getId() || mist.getOwner().getParty() != null && mist.getOwner().getParty().containsMembers(chr.getMPC())) {	                        	
-	                        	chr.addMP((int) mist.getSourceSkill().getEffect(chr.getSkillLevel(mist.getSourceSkill().getId())).getX() * chr.getMp() / 100);
-                        	}
+                            MapleCharacter chr = (MapleCharacter) mo;
+                            if (mist.getOwner().getId() == chr.getId() || mist.getOwner().getParty() != null && mist.getOwner().getParty().containsMembers(chr.getMPC())) {	                        	
+                                chr.addMP((int) mist.getSourceSkill().getEffect(chr.getSkillLevel(mist.getSourceSkill().getId())).getX() * chr.getMp() / 100);
+                            }
                         }
                     }
                 }
@@ -2099,7 +2099,7 @@ public final void spawnItemDrop(final MapleMapObject dropper, final MapleCharact
     public final void spawnItemDrop(final MapleMapObject dropper, final MapleCharacter owner, final Item item, Point pos, final byte dropType, final boolean playerDrop) {
         final Point droppos = calcDropPos(pos, pos);
         final MapleMapItem mdrop = new MapleMapItem(item, droppos, dropper, owner, owner.getClient(), dropType, playerDrop);
-        mdrop.setDropTime(System.currentTimeMillis());
+        mdrop.setDropTime(Server.getInstance().getCurrentTime());
 
         spawnAndAddRangedMapObject(mdrop, new DelayedPacketCreation() {
             @Override
@@ -2636,11 +2636,11 @@ public void removePlayer(MapleCharacter chr) {
             monster.setControllerKnowsAboutAggro(false);
             updateMonsterController(monster);
         }
-        chr.leaveMap();
         
+        chr.leaveMap();
         for (MapleSummon summon : new ArrayList<>(chr.getSummonsValues())) {
             if (summon.isStationary()) {
-                chr.cancelBuffStats(MapleBuffStat.PUPPET);
+                chr.cancelEffectFromBuffStat(MapleBuffStat.PUPPET);
             } else {
                 removeMapObject(summon);
             }
diff --git a/src/server/quest/actions/ExpAction.java b/src/server/quest/actions/ExpAction.java
index 7fa62aac6..73e9b8c27 100644
--- a/src/server/quest/actions/ExpAction.java
+++ b/src/server/quest/actions/ExpAction.java
@@ -23,6 +23,7 @@
 
 import client.MapleCharacter;
 import constants.ServerConstants;
+import net.server.world.World;
 import provider.MapleData;
 import provider.MapleDataTool;
 import server.quest.MapleQuest;
@@ -58,7 +59,8 @@ public static void runAction(MapleCharacter chr, int gain) {
                         if(!ServerConstants.USE_QUEST_RATE) {
                                 chr.gainExp(gain * chr.getExpRate(), true, true);
                         } else {
-                                chr.gainExp(gain * ServerConstants.EXP_RATE * ServerConstants.QUEST_RATE, true, true);
+                                World w = chr.getClient().getWorldServer();
+                                chr.gainExp(gain * w.getExpRate() * w.getQuestRate(), true, true);
                         }
 		}
         }
diff --git a/src/server/quest/actions/MesoAction.java b/src/server/quest/actions/MesoAction.java
index 791c39f39..1fb79be4f 100644
--- a/src/server/quest/actions/MesoAction.java
+++ b/src/server/quest/actions/MesoAction.java
@@ -23,6 +23,7 @@
 
 import client.MapleCharacter;
 import constants.ServerConstants;
+import net.server.world.World;
 import provider.MapleData;
 import provider.MapleDataTool;
 import server.quest.MapleQuest;
@@ -59,7 +60,8 @@ public static void runAction(MapleCharacter chr, int gain) {
                         if(!ServerConstants.USE_QUEST_RATE) {
                                 chr.gainMeso(gain * chr.getMesoRate(), true, false, true);
                         } else {
-                                chr.gainMeso(gain * ServerConstants.MESO_RATE * ServerConstants.QUEST_RATE, true, false, true);
+                                World w = chr.getClient().getWorldServer();
+                                chr.gainMeso(gain * w.getMesoRate() * w.getQuestRate(), true, false, true);
                         }
                 }
         }
diff --git a/src/tools/MaplePacketCreator.java b/src/tools/MaplePacketCreator.java
index 901737f51..c8d1a8fd0 100644
--- a/src/tools/MaplePacketCreator.java
+++ b/src/tools/MaplePacketCreator.java
@@ -90,6 +90,7 @@
 import client.MapleQuestStatus;
 import client.MapleRing;
 import client.MapleStat;
+import client.MonsterBook;
 import client.Skill;
 import client.SkillMacro;
 import client.inventory.Equip;
@@ -103,6 +104,7 @@
 import client.newyear.NewYearCardRecord;
 import client.status.MonsterStatus;
 import client.status.MonsterStatusEffect;
+import constants.ExpTable;
 import constants.GameConstants;
 import constants.ItemConstants;
 import constants.ServerConstants;
@@ -143,6 +145,24 @@ private static long getTime(long realTimestamp) {
                 return mplew.getPacket(); 
         }  
 
+        private static void addRemainingSkillInfo(final MaplePacketLittleEndianWriter mplew, MapleCharacter chr) {
+                int remainingSp[] = chr.getRemainingSps();
+                int effectiveLength = 0;
+                for (int i = 0; i < remainingSp.length; i++) {
+                        if (remainingSp[i] > 0) {
+                                effectiveLength++;
+                        }
+                }
+
+                mplew.write(effectiveLength);
+                for (int i = 0; i < remainingSp.length; i++) {
+                        if (remainingSp[i] > 0) {
+                                mplew.write(i + 1);
+                                mplew.write(remainingSp[i]);
+                        }
+                }
+        }
+        
         private static void addCharStats(final MaplePacketLittleEndianWriter mplew, MapleCharacter chr) {
                 mplew.writeInt(chr.getId()); // character id
                 mplew.writeAsciiString(StringUtil.getRightPaddedStr(chr.getName(), '\0', 13));
@@ -168,18 +188,12 @@ private static void addCharStats(final MaplePacketLittleEndianWriter mplew, Mapl
                 mplew.writeShort(chr.getInt()); // int
                 mplew.writeShort(chr.getLuk()); // luk
                 mplew.writeShort(chr.getHp()); // hp (?)
-                mplew.writeShort(chr.getMaxHp()); // maxhp
+                mplew.writeShort(chr.getClientMaxHp()); // maxhp
                 mplew.writeShort(chr.getMp()); // mp (?)
-                mplew.writeShort(chr.getMaxMp()); // maxmp
+                mplew.writeShort(chr.getClientMaxMp()); // maxmp
                 mplew.writeShort(chr.getRemainingAp()); // remaining ap
                 if (GameConstants.hasSPTable(chr.getJob())) {
-                        mplew.write(chr.getRemainingSpSize());
-                        for (int i = 0; i < chr.getRemainingSps().length; i++) {
-                                if (chr.getRemainingSpBySkill(i) > 0) {
-                                        mplew.write(i + 1);
-                                        mplew.write(chr.getRemainingSpBySkill(i));
-                                }
-                        }
+                        addRemainingSkillInfo(mplew, chr);
                 } else {
                         mplew.writeShort(chr.getRemainingSp()); // remaining sp
                 }
@@ -433,10 +447,14 @@ protected static void addItemInfo(final MaplePacketLittleEndianWriter mplew, Ite
                                 mplew.write(0x40);
                         }
                 } else {
+                        int itemLevel = equip.getItemLevel();
+                        
+                        long expNibble = (ExpTable.getExpNeededForLevel(ii.getEquipLevelReq(item.getItemId())) * equip.getItemExp());
+                        expNibble /= ExpTable.getEquipExpNeededForLevel(itemLevel);
+                        
                         mplew.write(0);
-                        mplew.write(equip.getItemLevel()); //Item Level
-                        mplew.writeShort(0);
-                        mplew.writeShort(equip.getItemExp()); //Works pretty weird :s
+                        mplew.write(itemLevel); //Item Level
+                        mplew.writeInt((int) expNibble);
                         mplew.writeInt(equip.getVicious()); //WTF NEXON ARE YOU SERIOUS?
                         mplew.writeLong(0);
                 }
@@ -960,29 +978,18 @@ private static void addMonsterBookInfo(final MaplePacketLittleEndianWriter mplew
                 return updatePlayerStats(EMPTY_STATUPDATE, true, null);
         }
 
-        /**
-         * Gets an update for specified stats.
-         *
-         * @param stats The stats to update.
-         * @param chr The update target.
-         * @return The stat update packet.
-         */
-        public static byte[] updatePlayerStats(List<Pair<MapleStat, Integer>> stats, MapleCharacter chr) {
-                return updatePlayerStats(stats, false, chr);
-        }
-
         /**
          * Gets an update for specified stats.
          *
          * @param stats The list of stats to update.
-         * @param itemReaction Result of an item reaction(?)
+         * @param enableActions Allows actions after the update.
          * @param chr The update target.
          * @return The stat update packet.
          */
-        public static byte[] updatePlayerStats(List<Pair<MapleStat, Integer>> stats, boolean itemReaction, MapleCharacter chr) {
+        public static byte[] updatePlayerStats(List<Pair<MapleStat, Integer>> stats, boolean enableActions, MapleCharacter chr) {
                 final MaplePacketLittleEndianWriter mplew = new MaplePacketLittleEndianWriter();
                 mplew.writeShort(SendOpcode.STAT_CHANGED.getValue());
-                mplew.write(itemReaction ? 1 : 0);
+                mplew.write(enableActions ? 1 : 0);
                 int updateMask = 0;
                 for (Pair<MapleStat, Integer> statupdate : stats) {
                         updateMask |= statupdate.getLeft().getValue();
@@ -1009,13 +1016,7 @@ public int compare(Pair<MapleStat, Integer> o1, Pair<MapleStat, Integer> o2) {
                                         mplew.write(statupdate.getRight().shortValue());
                                 } else if (statupdate.getLeft().getValue() == 0x8000) {
                                         if (GameConstants.hasSPTable(chr.getJob())) {
-                                                mplew.write(chr.getRemainingSpSize());
-                                                for (int i = 0; i < chr.getRemainingSps().length; i++) {
-                                                        if (chr.getRemainingSpBySkill(i) > 0) {
-                                                                mplew.write(i + 1);
-                                                                mplew.write(chr.getRemainingSpBySkill(i));
-                                                        }
-                                                }
+                                                addRemainingSkillInfo(mplew, chr);
                                         } else {
                                                 mplew.writeShort(statupdate.getRight().shortValue());
                                         }
@@ -2733,11 +2734,12 @@ private static int doubleToShortBits(double d) {
                 mplew.write(0); //end of pets
                 
                 Item mount;     //mounts can potentially crash the client if the player's level is not properly checked
-                if (chr.getMount() != null && (mount = chr.getInventory(MapleInventoryType.EQUIPPED).getItem((short) -18)) != null && MapleItemInformationProvider.getInstance().getEquipStats(mount.getItemId()).get("reqLevel") <= chr.getLevel()) {
-                        mplew.write(chr.getMount().getId()); //mount
-                        mplew.writeInt(chr.getMount().getLevel()); //level
-                        mplew.writeInt(chr.getMount().getExp()); //exp
-                        mplew.writeInt(chr.getMount().getTiredness()); //tiredness
+                if (chr.getMount() != null && (mount = chr.getInventory(MapleInventoryType.EQUIPPED).getItem((short) -18)) != null && MapleItemInformationProvider.getInstance().getEquipLevelReq(mount.getItemId()) <= chr.getLevel()) {
+                        MapleMount mmount = chr.getMount();
+                        mplew.write(mmount.getId()); //mount
+                        mplew.writeInt(mmount.getLevel()); //level
+                        mplew.writeInt(mmount.getExp()); //exp
+                        mplew.writeInt(mmount.getTiredness()); //tiredness
                 } else {
                         mplew.write(0);
                 }
@@ -2745,10 +2747,12 @@ private static int doubleToShortBits(double d) {
                 for (int sn : chr.getCashShop().getWishList()) {
                         mplew.writeInt(sn);
                 }
-                mplew.writeInt(chr.getMonsterBook().getBookLevel());
-                mplew.writeInt(chr.getMonsterBook().getNormalCard());
-                mplew.writeInt(chr.getMonsterBook().getSpecialCard());
-                mplew.writeInt(chr.getMonsterBook().getTotalCards());
+                
+                MonsterBook book = chr.getMonsterBook();
+                mplew.writeInt(book.getBookLevel());
+                mplew.writeInt(book.getNormalCard());
+                mplew.writeInt(book.getSpecialCard());
+                mplew.writeInt(book.getTotalCards());
                 mplew.writeInt(chr.getMonsterBookCover() > 0 ? MapleItemInformationProvider.getInstance().getCardMobId(chr.getMonsterBookCover()) : 0);
                 Item medal = chr.getInventory(MapleInventoryType.EQUIPPED).getItem((short) -49);
                 if (medal != null) {
diff --git a/tools/MapleEquipmentOmnileveler/build.xml b/tools/MapleEquipmentOmnileveler/build.xml
new file mode 100644
index 000000000..d3a4872ef
--- /dev/null
+++ b/tools/MapleEquipmentOmnileveler/build.xml
@@ -0,0 +1,73 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- You may freely edit this file. See commented blocks below for -->
+<!-- some examples of how to customize the build. -->
+<!-- (If you delete it and reopen the project it will be recreated.) -->
+<!-- By default, only the Clean and Build commands use this build script. -->
+<!-- Commands such as Run, Debug, and Test only use this build script if -->
+<!-- the Compile on Save feature is turned off for the project. -->
+<!-- You can turn off the Compile on Save (or Deploy on Save) setting -->
+<!-- in the project's Project Properties dialog box.-->
+<project name="MapleEquipmentOmnileveler" default="default" basedir=".">
+    <description>Builds, tests, and runs the project MapleEquipmentOmnileveler.</description>
+    <import file="nbproject/build-impl.xml"/>
+    <!--
+
+    There exist several targets which are by default empty and which can be 
+    used for execution of your tasks. These targets are usually executed 
+    before and after some main targets. They are: 
+
+      -pre-init:                 called before initialization of project properties
+      -post-init:                called after initialization of project properties
+      -pre-compile:              called before javac compilation
+      -post-compile:             called after javac compilation
+      -pre-compile-single:       called before javac compilation of single file
+      -post-compile-single:      called after javac compilation of single file
+      -pre-compile-test:         called before javac compilation of JUnit tests
+      -post-compile-test:        called after javac compilation of JUnit tests
+      -pre-compile-test-single:  called before javac compilation of single JUnit test
+      -post-compile-test-single: called after javac compilation of single JUunit test
+      -pre-jar:                  called before JAR building
+      -post-jar:                 called after JAR building
+      -post-clean:               called after cleaning build products
+
+    (Targets beginning with '-' are not intended to be called on their own.)
+
+    Example of inserting an obfuscator after compilation could look like this:
+
+        <target name="-post-compile">
+            <obfuscate>
+                <fileset dir="${build.classes.dir}"/>
+            </obfuscate>
+        </target>
+
+    For list of available properties check the imported 
+    nbproject/build-impl.xml file. 
+
+
+    Another way to customize the build is by overriding existing main targets.
+    The targets of interest are: 
+
+      -init-macrodef-javac:     defines macro for javac compilation
+      -init-macrodef-junit:     defines macro for junit execution
+      -init-macrodef-debug:     defines macro for class debugging
+      -init-macrodef-java:      defines macro for class execution
+      -do-jar:                  JAR building
+      run:                      execution of project 
+      -javadoc-build:           Javadoc generation
+      test-report:              JUnit report generation
+
+    An example of overriding the target for project execution could look like this:
+
+        <target name="run" depends="MapleEquipmentOmnileveler-impl.jar">
+            <exec dir="bin" executable="launcher.exe">
+                <arg file="${dist.jar}"/>
+            </exec>
+        </target>
+
+    Notice that the overridden target depends on the jar target and not only on 
+    the compile target as the regular run target does. Again, for a list of available 
+    properties which you can use, check the target you are overriding in the
+    nbproject/build-impl.xml file. 
+
+    -->
+</project>
diff --git a/tools/MapleEquipmentOmnileveler/manifest.mf b/tools/MapleEquipmentOmnileveler/manifest.mf
new file mode 100644
index 000000000..328e8e5bc
--- /dev/null
+++ b/tools/MapleEquipmentOmnileveler/manifest.mf
@@ -0,0 +1,3 @@
+Manifest-Version: 1.0
+X-COMMENT: Main-Class will be added automatically by build
+
diff --git a/tools/MapleEquipmentOmnileveler/src/mapleequipmentomnileveler/MapleEquipmentOmnileveler.java b/tools/MapleEquipmentOmnileveler/src/mapleequipmentomnileveler/MapleEquipmentOmnileveler.java
new file mode 100644
index 000000000..81e660236
--- /dev/null
+++ b/tools/MapleEquipmentOmnileveler/src/mapleequipmentomnileveler/MapleEquipmentOmnileveler.java
@@ -0,0 +1,495 @@
+/*
+    This file is part of the HeavenMS MapleStory Server
+    Copyleft (L) 2016 - 2018 RonanLana
+
+    This program is free software: you can redistribute it and/or modify
+    it under the terms of the GNU Affero General Public License as
+    published by the Free Software Foundation version 3 as published by
+    the Free Software Foundation. You may not use, modify or distribute
+    this program under any other version of the GNU Affero General Public
+    License.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU Affero General Public License for more details.
+
+    You should have received a copy of the GNU Affero General Public License
+    along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+package mapleequipmentomnileveler;
+
+import java.io.BufferedReader;
+import java.io.File;
+import java.io.FileInputStream;
+import java.io.FileNotFoundException;
+import java.io.IOException;
+import java.io.InputStreamReader;
+import java.io.PrintWriter;
+import java.sql.Connection;
+
+/**
+ *
+ * @author RonanLana
+ 
+ This application parses the Character.wz folder inputted and adds/updates the "info/level"
+ node on every known equipment id. This addition enables client-side view of the equipment
+ level attribute on every equipment in the game, given proper item visibility, be it from
+ own equipments or from other players.
+ 
+ Estimated parse time: 7 minutes
+ 
+ */
+public class MapleEquipmentOmnileveler {
+
+    static String equipDirectory = "lib/original/";
+    static String outputDirectory = "lib/updated/";
+    
+    static Connection con = null;
+    static PrintWriter printWriter = null;
+    static InputStreamReader fileReader = null;
+    static BufferedReader bufferedReader = null;
+    
+    static int initialStringLength = 250;
+    
+    static int fixedExp = 10000;
+    static int maxEqpLevel = 30;
+    
+    static int infoTagState = -1, infoTagExpState = -1;
+    
+    static boolean infoTagLevel;
+    static boolean infoTagLevelExp;
+    static boolean infoTagLevelInfo;
+    
+    static int parsedLevels = 0;
+    
+    static byte status;
+    static boolean upgradeable;
+    static boolean cash;
+    
+    private static String getName(String token) {
+        int i, j;
+        char[] dest;
+        String d;
+        
+        i = token.lastIndexOf("name");
+        i = token.indexOf("\"", i) + 1; //lower bound of the string
+        j = token.indexOf("\"", i);     //upper bound
+
+        dest = new char[initialStringLength];
+        try {
+            token.getChars(i, j, dest, 0);
+        } catch (StringIndexOutOfBoundsException e) {
+            // do nothing
+            return "";
+        } catch (Exception e) {
+            System.out.println("error in: " + token + "");
+            e.printStackTrace();
+            try {
+                Thread.sleep(100000000);
+            } catch (Exception ex) {}
+        }
+        
+
+        d = new String(dest);
+        return(d.trim());
+    }
+    
+    private static String getValue(String token) {
+        int i, j;
+        char[] dest;
+        String d;
+
+        i = token.lastIndexOf("value");
+        i = token.indexOf("\"", i) + 1; //lower bound of the string
+        j = token.indexOf("\"", i);     //upper bound
+
+        dest = new char[initialStringLength];
+        token.getChars(i, j, dest, 0);
+
+        d = new String(dest);
+        return(d.trim());
+    }
+    
+    private static void forwardCursor(int st) {
+        String line = null;
+
+        try {
+            while(status >= st && (line = bufferedReader.readLine()) != null) {
+                simpleToken(line);
+                printWriter.println(line);
+            }
+        }
+        catch(Exception e) {
+            e.printStackTrace();
+        }
+    }
+    
+    private static void translateLevelCursor(int st) {
+        String line = null;
+        
+        try {
+            infoTagLevelInfo = false;
+            while (status >= st && (line = bufferedReader.readLine()) != null) {
+                translateLevelToken(line);
+            }
+        }
+        catch(Exception e) {
+            e.printStackTrace();
+        }
+    }
+    
+    private static void translateInfoTag(int st) {
+        infoTagLevel = false;
+        String line = null;
+
+        try {
+            while(status >= st && (line = bufferedReader.readLine()) != null) { // skipping directory & canvas definition
+                translateInfoToken(line);
+            }
+        }
+        catch(Exception e) {
+            e.printStackTrace();
+        }
+        
+        if (!upgradeable || cash) {
+            throw new RuntimeException();
+        }
+    }
+
+    private static void simpleToken(String token) {
+        if(token.contains("/imgdir")) {
+            status -= 1;
+        }
+        else if(token.contains("imgdir")) {
+            status += 1;
+        }
+    }
+    
+    private static void printUpdatedLevelExp() {
+        printWriter.println("          <int name=\"exp\" value=\"" + fixedExp + "\"/>");
+    }
+    
+    private static void printDefaultLevel(int level) {
+        printWriter.println("        <imgdir name=\"" + level + "\">");
+        printUpdatedLevelExp();
+        printWriter.println("        </imgdir>");
+    }
+    
+    private static void printDefaultLevelInfoTag() {
+        printWriter.println("      <imgdir name=\"info\">");
+        for (int i = 1; i <= maxEqpLevel; i++) printDefaultLevel(i);
+        printWriter.println("      </imgdir>");
+    }
+    
+    private static void printDefaultLevelTag() {
+        printWriter.println("    <imgdir name=\"level\">");
+        printDefaultLevelInfoTag();
+        printWriter.println("    </imgdir>");
+    }
+    
+    private static void processLevelInfoTag(int st) {
+        String line;
+        try {
+            while(status >= st && (line = bufferedReader.readLine()) != null) {
+                translateLevelExpToken(line);
+            }
+        }
+        catch(Exception e) {
+            e.printStackTrace();
+        }
+    }
+    
+    private static void processLevelInfoSet(int st) {
+        parsedLevels = (1 << maxEqpLevel) - 1;
+        
+        String line;
+        try {
+            while(status >= st && (line = bufferedReader.readLine()) != null) {
+                translateLevelInfoSetToken(line);
+            }
+        }
+        catch(Exception e) {
+            e.printStackTrace();
+        }
+    }
+    
+    private static void translateLevelToken(String token) {
+        if(token.contains("/imgdir")) {
+            if (status == 3) {
+                if (!infoTagLevelInfo) {
+                    printDefaultLevelInfoTag();
+                }
+            }
+            printWriter.println(token);
+            
+            status -= 1;
+        }
+        else if(token.contains("imgdir")) {
+            printWriter.println(token);
+            status += 1;
+            
+            if (status == 4) {
+                String d = getName(token);
+                if(d.contentEquals("info")) {
+                    infoTagLevelInfo = true;
+                    processLevelInfoSet(status);
+                } else {
+                    forwardCursor(status);
+                }
+            }
+        }
+        else {
+            printWriter.println(token);
+        }
+    }
+    
+    private static void translateLevelInfoSetToken(String token) {
+        if(token.contains("/imgdir")) {
+            status -= 1;
+            
+            if (status == 3) {
+                if (parsedLevels != 0) {
+                    for (int i = 0; i < maxEqpLevel; i++) {
+                        if ((parsedLevels >> i) % 2 != 0) {
+                            int level = i + 1;
+                            printDefaultLevel(level);
+                        }
+                    }
+                }
+            }
+            
+            printWriter.println(token);
+        }
+        else if(token.contains("imgdir")) {
+            printWriter.println(token);
+            status += 1;
+            
+            if (status == 5) {
+                int level = Integer.parseInt(getName(token)) - 1;
+                parsedLevels ^= (1 << level);
+                
+                infoTagLevelExp = false;
+                infoTagExpState = status;  // status: 5
+                processLevelInfoTag(status);        
+                infoTagExpState = -1;
+            }
+        }
+        else {
+            printWriter.println(token);
+        }
+    }
+    
+    private static void translateLevelExpToken(String token) {
+        if(token.contains("/imgdir")) {
+            status -= 1;
+            
+            if (status < infoTagExpState) {
+                if (!infoTagLevelExp) {
+                    printUpdatedLevelExp();
+                }
+            }
+            
+            printWriter.println(token);
+        }
+        else if(token.contains("imgdir")) {
+            printWriter.println(token);
+            status += 1;
+            
+            forwardCursor(status);
+        }
+        else {
+            String name = getName(token);
+            if (name.contentEquals("exp")) {
+                infoTagLevelExp = true;
+                printUpdatedLevelExp();
+            } else {
+                printWriter.println(token);
+            }
+        }
+    }
+    
+    private static void translateInfoToken(String token) {
+        if(token.contains("/imgdir")) {
+            status -= 1;
+            
+            if (status < infoTagState) {
+                if (!infoTagLevel) {
+                    printDefaultLevelTag();
+                }
+            }
+            
+            printWriter.println(token);
+        }
+        else if(token.contains("imgdir")) {
+            status += 1;
+            printWriter.println(token);
+            
+            String d = getName(token);
+            if (d.contentEquals("level")) {
+                infoTagLevel = true;
+                translateLevelCursor(status);
+            } else {
+                forwardCursor(status);
+            }
+        }
+        else {
+            String name = getName(token);
+            
+            switch(name) {
+                case "cash":
+                    if (!getValue(token).contentEquals("0")) {
+                        cash = true;
+                    }
+                    break;
+                    
+                case "tuc":
+                case "incPAD":
+                case "incMAD":
+                case "incPDD":
+                case "incMDD":
+                case "incACC":
+                case "incEVA":
+                case "incSpeed":
+                case "incJump":
+                case "incMHP":
+                case "incMMP":
+                case "incSTR":
+                case "incDEX":
+                case "incINT":
+                case "incLUK":
+                    if (!getValue(token).contentEquals("0")) {
+                        upgradeable = true;
+                    }
+                    break;
+            }
+            
+            printWriter.println(token);
+        }
+    }
+    
+    private static boolean translateToken(String token) {
+        boolean accessInfoTag = false;
+        
+        if(token.contains("/imgdir")) {
+            status -= 1;
+            printWriter.println(token);
+        }
+        else if(token.contains("imgdir")) {
+            printWriter.println(token);
+            status += 1;
+            
+            if (status == 2) {
+                String d = getName(token);
+                if(!d.contentEquals("info")) {
+                    forwardCursor(status);
+                } else {
+                    accessInfoTag = true;
+                }
+            } else if (status > 2) {
+                forwardCursor(status);
+            }
+        }
+        else {
+            printWriter.println(token);
+        }
+        
+        return accessInfoTag;
+    }
+    
+    private static void copyCashItemData(File file, String curPath) throws IOException {
+        printWriter = new PrintWriter(outputDirectory + curPath + file.getName(), "UTF-8");
+        
+        fileReader = new InputStreamReader(new FileInputStream(file), "UTF-8");
+        bufferedReader = new BufferedReader(fileReader);
+        
+        String line;
+        while((line = bufferedReader.readLine()) != null) {
+            printWriter.println(line);
+        }
+
+        bufferedReader.close();
+        fileReader.close();
+
+        printWriter.close();
+    }
+    
+    private static void parseEquipData(File file, String curPath) throws IOException {
+        printWriter = new PrintWriter(outputDirectory + curPath + file.getName(), "UTF-8");
+        
+        fileReader = new InputStreamReader(new FileInputStream(file), "UTF-8");
+        bufferedReader = new BufferedReader(fileReader);
+        
+        try {
+            status = 0;
+            upgradeable = false;
+            cash = false;
+            
+            String line;
+            while((line = bufferedReader.readLine()) != null) {
+                if (translateToken(line)) {
+                    infoTagState = status;  // status: 2
+                    translateInfoTag(status);
+                    infoTagState = -1;
+                }
+            }
+            
+            bufferedReader.close();
+            fileReader.close();
+            
+            printFileFooter();
+            printWriter.close();
+        } catch (RuntimeException e) {
+            bufferedReader.close();
+            fileReader.close();
+            
+            printWriter.close();
+            
+            copyCashItemData(file, curPath);
+        }
+    }
+    
+    private static void printFileFooter() {
+        printWriter.println("<!--");
+        printWriter.println(" # WZ XML File parsed by the MapleEquipmentOmnilever feature by Ronan Lana.");
+        printWriter.println(" # Generated data takes into account info from the server-side WZ.xmls.");
+        printWriter.println("-->");
+    }
+    
+    private static void parseDirectoryEquipData(String curPath) {
+        File folder = new File(outputDirectory + curPath);
+        if (!folder.exists()) {
+            folder.mkdir();
+        }
+        
+        System.out.println("Parsing directory '" + curPath + "'");
+        folder = new File(equipDirectory + curPath);
+        for (File file : folder.listFiles()) {
+            if (file.isFile()) {
+                try {
+                    parseEquipData(file, curPath);
+                }
+                catch(FileNotFoundException ex) {
+                    System.out.println("Unable to open equip file " + file.getAbsolutePath() + ".");
+                }
+                catch(IOException ex) {
+                    System.out.println("Error reading equip file " + file.getAbsolutePath() + ".");
+                }
+
+                catch(Exception e) {
+                    e.printStackTrace();
+                }
+            } else {
+                parseDirectoryEquipData(curPath + file.getName() + "/");
+            }
+        }
+    }
+    
+    /**
+     * @param args the command line arguments
+     */
+    public static void main(String[] args) {
+        parseDirectoryEquipData("");
+    }
+    
+}
diff --git a/wz/Map.wz/Map/Map1/106020000.img.xml b/wz/Map.wz/Map/Map1/106020000.img.xml
index e830bb900..f320cbff6 100644
--- a/wz/Map.wz/Map/Map1/106020000.img.xml
+++ b/wz/Map.wz/Map/Map1/106020000.img.xml
@@ -1,2080 +1,2158 @@
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
 <imgdir name="106020000.img">
   <imgdir name="info">
-    <int name="version" value="10"/>
+    <string name="bgm" value="Bgm19/MushCatle"/>
     <int name="cloud" value="0"/>
-    <int name="town" value="0"/>
     <int name="swim" value="0"/>
-    <int name="returnMap" value="106020000"/>
     <int name="forcedReturn" value="999999999"/>
-    <float name="mobRate" value="1.0"/>
-    <string name="bgm" value="Bgm19/MushCatle"/>
-    <string name="mapMark" value="MushCatle"/>
-    <int name="fly" value="0"/>
-    <int name="noMapCmd" value="0"/>
     <int name="hideMinimap" value="0"/>
+    <string name="mapMark" value="MushCatle"/>
+    <float name="mobRate" value="1.0"/>
+    <int name="returnMap" value="106020000"/>
+    <int name="town" value="1"/>
+    <int name="version" value="10"/>
     <int name="fieldLimit" value="0"/>
+    <int name="lvLimit" value="30"/>
     <string name="onFirstUserEnter" value=""/>
     <string name="onUserEnter" value="TD_MC_title"/>
-    <int name="lvLimit" value="30"/>
-    <int name="VRTop" value="-600"/>
+    <int name="fly" value="0"/>
+    <int name="noMapCmd" value="0"/>
     <int name="VRLeft" value="-180"/>
-    <int name="VRBottom" value="480"/>
     <int name="VRRight" value="1350"/>
+    <int name="VRTop" value="-600"/>
+    <int name="VRBottom" value="480"/>
   </imgdir>
-  <imgdir name="back">
-    <imgdir name="0">
-      <string name="bS" value="mushCatle"/>
-      <int name="front" value="0"/>
-      <int name="ani" value="0"/>
-      <int name="no" value="0"/>
-      <int name="f" value="0"/>
-      <int name="x" value="0"/>
-      <int name="y" value="0"/>
-      <int name="rx" value="0"/>
-      <int name="ry" value="0"/>
-      <int name="type" value="3"/>
-      <int name="cx" value="0"/>
-      <int name="cy" value="0"/>
-      <int name="a" value="255"/>
-    </imgdir>
-    <imgdir name="1">
-      <string name="bS" value="mushCatle"/>
-      <int name="front" value="0"/>
-      <int name="ani" value="0"/>
-      <int name="no" value="1"/>
-      <int name="f" value="0"/>
-      <int name="x" value="-2"/>
-      <int name="y" value="-179"/>
-      <int name="rx" value="0"/>
-      <int name="ry" value="-10"/>
-      <int name="type" value="1"/>
-      <int name="cx" value="0"/>
-      <int name="cy" value="0"/>
-      <int name="a" value="255"/>
-    </imgdir>
-    <imgdir name="2">
-      <string name="bS" value="mushCatle"/>
-      <int name="front" value="0"/>
-      <int name="ani" value="0"/>
-      <int name="no" value="5"/>
-      <int name="f" value="0"/>
-      <int name="x" value="-346"/>
-      <int name="y" value="-324"/>
-      <int name="rx" value="-4"/>
-      <int name="ry" value="-20"/>
-      <int name="type" value="4"/>
-      <int name="cx" value="15000"/>
-      <int name="cy" value="0"/>
-      <int name="a" value="255"/>
-    </imgdir>
-    <imgdir name="3">
-      <string name="bS" value="mushCatle"/>
-      <int name="front" value="0"/>
-      <int name="ani" value="0"/>
-      <int name="no" value="7"/>
-      <int name="f" value="0"/>
-      <int name="x" value="83"/>
-      <int name="y" value="-288"/>
-      <int name="rx" value="-4"/>
-      <int name="ry" value="-20"/>
-      <int name="type" value="4"/>
-      <int name="cx" value="1500"/>
-      <int name="cy" value="0"/>
-      <int name="a" value="255"/>
-    </imgdir>
-    <imgdir name="4">
-      <string name="bS" value="mushCatle"/>
-      <int name="front" value="0"/>
-      <int name="ani" value="0"/>
-      <int name="no" value="3"/>
-      <int name="f" value="0"/>
-      <int name="x" value="-291"/>
-      <int name="y" value="-5"/>
-      <int name="rx" value="-30"/>
-      <int name="ry" value="-30"/>
-      <int name="type" value="1"/>
-      <int name="cx" value="0"/>
-      <int name="cy" value="0"/>
-      <int name="a" value="255"/>
-    </imgdir>
-    <imgdir name="5">
-      <string name="bS" value="mushCatle"/>
-      <int name="front" value="0"/>
-      <int name="ani" value="0"/>
-      <int name="no" value="23"/>
-      <int name="f" value="0"/>
-      <int name="x" value="-249"/>
-      <int name="y" value="-93"/>
-      <int name="rx" value="-50"/>
-      <int name="ry" value="-50"/>
-      <int name="type" value="1"/>
-      <int name="cx" value="0"/>
-      <int name="cy" value="0"/>
-      <int name="a" value="255"/>
-    </imgdir>
-    <imgdir name="6">
-      <string name="bS" value="mushCatle"/>
-      <int name="front" value="0"/>
-      <int name="ani" value="0"/>
-      <int name="no" value="24"/>
-      <int name="f" value="0"/>
-      <int name="x" value="-96"/>
-      <int name="y" value="-140"/>
-      <int name="rx" value="-80"/>
-      <int name="ry" value="-90"/>
-      <int name="type" value="1"/>
-      <int name="cx" value="0"/>
-      <int name="cy" value="0"/>
-      <int name="a" value="255"/>
-    </imgdir>
-    <imgdir name="7">
-      <string name="bS" value="mushCatle"/>
-      <int name="front" value="0"/>
-      <int name="ani" value="0"/>
-      <int name="no" value="25"/>
-      <int name="f" value="0"/>
-      <int name="x" value="-107"/>
-      <int name="y" value="-80"/>
-      <int name="rx" value="-90"/>
-      <int name="ry" value="-100"/>
-      <int name="type" value="1"/>
-      <int name="cx" value="0"/>
-      <int name="cy" value="0"/>
-      <int name="a" value="255"/>
-    </imgdir>
-    <imgdir name="8">
-      <string name="bS" value="mushCatle"/>
-      <int name="front" value="0"/>
-      <int name="ani" value="0"/>
-      <int name="no" value="26"/>
-      <int name="f" value="0"/>
-      <int name="x" value="-29"/>
-      <int name="y" value="-20"/>
-      <int name="rx" value="1"/>
-      <int name="ry" value="-100"/>
-      <int name="type" value="4"/>
-      <int name="cx" value="1500"/>
-      <int name="cy" value="0"/>
-      <int name="a" value="192"/>
-    </imgdir>
-    <imgdir name="9">
-      <string name="bS" value="mushCatle"/>
-      <int name="front" value="0"/>
-      <int name="ani" value="0"/>
-      <int name="no" value="27"/>
-      <int name="f" value="0"/>
-      <int name="x" value="471"/>
-      <int name="y" value="-62"/>
-      <int name="rx" value="1"/>
-      <int name="ry" value="-100"/>
-      <int name="type" value="4"/>
-      <int name="cx" value="1500"/>
-      <int name="cy" value="0"/>
-      <int name="a" value="192"/>
-    </imgdir>
-    <imgdir name="10">
-      <string name="bS" value="mushCatle"/>
-      <int name="front" value="0"/>
-      <int name="ani" value="0"/>
-      <int name="no" value="28"/>
-      <int name="f" value="0"/>
-      <int name="x" value="-529"/>
-      <int name="y" value="-58"/>
-      <int name="rx" value="1"/>
-      <int name="ry" value="-100"/>
-      <int name="type" value="4"/>
-      <int name="cx" value="1500"/>
-      <int name="cy" value="0"/>
-      <int name="a" value="192"/>
-    </imgdir>
-  </imgdir>
-  <imgdir name="life">
-    <imgdir name="0">
-      <string name="type" value="n"/>
-      <string name="id" value="1300007"/>
-      <int name="x" value="869"/>
-      <int name="y" value="208"/>
-      <int name="mobTime" value="0"/>
-      <int name="f" value="0"/>
-      <int name="hide" value="0"/>
-      <int name="fh" value="27"/>
-      <int name="cy" value="215"/>
-      <int name="rx0" value="819"/>
-      <int name="rx1" value="919"/>
-    </imgdir>
-    <imgdir name="1">
-      <string name="type" value="n"/>
-      <string name="id" value="1300000"/>
-      <int name="x" value="150"/>
-      <int name="y" value="4"/>
-      <int name="mobTime" value="0"/>
-      <int name="f" value="1"/>
-      <int name="hide" value="0"/>
-      <int name="fh" value="40"/>
-      <int name="cy" value="5"/>
-      <int name="rx0" value="150"/>
-      <int name="rx1" value="150"/>
-    </imgdir>
-    <imgdir name="2">
-      <string name="type" value="n"/>
-      <string name="id" value="1300003"/>
-      <int name="x" value="265"/>
-      <int name="y" value="28"/>
-      <int name="mobTime" value="0"/>
-      <int name="f" value="0"/>
-      <int name="hide" value="0"/>
-      <int name="fh" value="1"/>
-      <int name="cy" value="35"/>
-      <int name="rx0" value="215"/>
-      <int name="rx1" value="315"/>
-    </imgdir>
-    <imgdir name="3">
-      <string name="type" value="n"/>
-      <string name="id" value="1300004"/>
-      <int name="x" value="-45"/>
-      <int name="y" value="27"/>
-      <int name="mobTime" value="0"/>
-      <int name="f" value="1"/>
-      <int name="hide" value="0"/>
-      <int name="fh" value="6"/>
-      <int name="cy" value="35"/>
-      <int name="rx0" value="-95"/>
-      <int name="rx1" value="5"/>
-    </imgdir>
-    <imgdir name="4">
-      <string name="type" value="n"/>
-      <string name="id" value="1300005"/>
-      <int name="x" value="1018"/>
-      <int name="y" value="-31"/>
-      <int name="mobTime" value="0"/>
-      <int name="f" value="0"/>
-      <int name="hide" value="0"/>
-      <int name="fh" value="12"/>
-      <int name="cy" value="-25"/>
-      <int name="rx0" value="968"/>
-      <int name="rx1" value="1068"/>
-    </imgdir>
-    <imgdir name="5">
-      <string name="type" value="n"/>
-      <string name="id" value="1301000"/>
-      <int name="x" value="599"/>
-      <int name="y" value="31"/>
-      <int name="mobTime" value="0"/>
-      <int name="f" value="0"/>
-      <int name="hide" value="0"/>
-      <int name="fh" value="3"/>
-      <int name="cy" value="35"/>
-      <int name="rx0" value="549"/>
-      <int name="rx1" value="649"/>
-    </imgdir>
-  </imgdir>
-  <imgdir name="reactor">
+  <imgdir name="miniMap">
+    <canvas name="canvas" width="110" height="64">
+    </canvas>
+    <int name="width" value="1757"/>
+    <int name="height" value="1022"/>
+    <int name="centerX" value="320"/>
+    <int name="centerY" value="528"/>
+    <int name="mag" value="4"/>
   </imgdir>
   <imgdir name="0">
     <imgdir name="info">
     </imgdir>
-    <imgdir name="tile">
-    </imgdir>
     <imgdir name="obj">
       <imgdir name="0">
+        <int name="x" value="586"/>
+        <int name="y" value="-47"/>
+        <int name="z" value="6"/>
+        <int name="zM" value="6"/>
         <string name="oS" value="Tdungeon"/>
         <string name="l0" value="mushCatle"/>
         <string name="l1" value="forest"/>
-        <string name="l2" value="0"/>
+        <string name="l2" value="5"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
+      </imgdir>
+      <imgdir name="1">
         <int name="x" value="12"/>
         <int name="y" value="-123"/>
         <int name="z" value="9"/>
-        <int name="f" value="0"/>
         <int name="zM" value="11"/>
-        <int name="r" value="0"/>
-      </imgdir>
-      <imgdir name="1">
         <string name="oS" value="Tdungeon"/>
         <string name="l0" value="mushCatle"/>
         <string name="l1" value="forest"/>
-        <string name="l2" value="6"/>
+        <string name="l2" value="0"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
+      </imgdir>
+      <imgdir name="2">
         <int name="x" value="648"/>
         <int name="y" value="15"/>
         <int name="z" value="9"/>
-        <int name="f" value="0"/>
         <int name="zM" value="6"/>
-        <int name="r" value="0"/>
-      </imgdir>
-      <imgdir name="2">
         <string name="oS" value="Tdungeon"/>
         <string name="l0" value="mushCatle"/>
         <string name="l1" value="forest"/>
-        <string name="l2" value="4"/>
+        <string name="l2" value="6"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
+      </imgdir>
+      <imgdir name="3">
         <int name="x" value="450"/>
         <int name="y" value="-7"/>
         <int name="z" value="9"/>
-        <int name="f" value="0"/>
         <int name="zM" value="9"/>
-        <int name="r" value="0"/>
-      </imgdir>
-      <imgdir name="3">
         <string name="oS" value="Tdungeon"/>
         <string name="l0" value="mushCatle"/>
         <string name="l1" value="forest"/>
-        <string name="l2" value="5"/>
-        <int name="x" value="586"/>
-        <int name="y" value="-47"/>
-        <int name="z" value="6"/>
-        <int name="f" value="0"/>
-        <int name="zM" value="6"/>
+        <string name="l2" value="4"/>
         <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
     </imgdir>
+    <imgdir name="tile">
+    </imgdir>
   </imgdir>
   <imgdir name="1">
     <imgdir name="info">
     </imgdir>
-    <imgdir name="tile">
-    </imgdir>
     <imgdir name="obj">
       <imgdir name="0">
+        <int name="x" value="1179"/>
+        <int name="y" value="-102"/>
+        <int name="z" value="6"/>
+        <int name="zM" value="12"/>
         <string name="oS" value="Tdungeon"/>
         <string name="l0" value="mushCatle"/>
         <string name="l1" value="forest"/>
-        <string name="l2" value="6"/>
+        <string name="l2" value="29"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
+      </imgdir>
+      <imgdir name="1">
         <int name="x" value="156"/>
         <int name="y" value="13"/>
         <int name="z" value="9"/>
-        <int name="f" value="0"/>
         <int name="zM" value="8"/>
-        <int name="r" value="0"/>
-      </imgdir>
-      <imgdir name="1">
         <string name="oS" value="Tdungeon"/>
         <string name="l0" value="mushCatle"/>
-        <string name="l1" value="guide"/>
-        <string name="l2" value="12"/>
+        <string name="l1" value="forest"/>
+        <string name="l2" value="6"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
+      </imgdir>
+      <imgdir name="2">
         <int name="x" value="850"/>
         <int name="y" value="-36"/>
         <int name="z" value="9"/>
-        <int name="f" value="0"/>
         <int name="zM" value="7"/>
-        <int name="r" value="0"/>
-      </imgdir>
-      <imgdir name="2">
         <string name="oS" value="Tdungeon"/>
         <string name="l0" value="mushCatle"/>
-        <string name="l1" value="forest"/>
-        <string name="l2" value="29"/>
-        <int name="x" value="1179"/>
-        <int name="y" value="-102"/>
-        <int name="z" value="6"/>
-        <int name="f" value="0"/>
-        <int name="zM" value="12"/>
+        <string name="l1" value="guide"/>
+        <string name="l2" value="12"/>
         <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
       <imgdir name="3">
-        <string name="oS" value="Tdungeon"/>
-        <string name="l0" value="mushCatle"/>
-        <string name="l1" value="forest"/>
-        <string name="l2" value="31"/>
         <int name="x" value="1112"/>
         <int name="y" value="-71"/>
         <int name="z" value="9"/>
-        <int name="f" value="0"/>
         <int name="zM" value="12"/>
-        <int name="r" value="0"/>
-      </imgdir>
-      <imgdir name="4">
         <string name="oS" value="Tdungeon"/>
         <string name="l0" value="mushCatle"/>
         <string name="l1" value="forest"/>
-        <string name="l2" value="28"/>
+        <string name="l2" value="31"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
+      </imgdir>
+      <imgdir name="4">
         <int name="x" value="329"/>
         <int name="y" value="-103"/>
         <int name="z" value="9"/>
-        <int name="f" value="0"/>
         <int name="zM" value="5"/>
+        <string name="oS" value="Tdungeon"/>
+        <string name="l0" value="mushCatle"/>
+        <string name="l1" value="forest"/>
+        <string name="l2" value="28"/>
         <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
     </imgdir>
+    <imgdir name="tile">
+    </imgdir>
   </imgdir>
   <imgdir name="2">
     <imgdir name="info">
     </imgdir>
-    <imgdir name="tile">
-    </imgdir>
     <imgdir name="obj">
       <imgdir name="0">
+        <int name="x" value="150"/>
+        <int name="y" value="5"/>
+        <int name="z" value="7"/>
+        <int name="zM" value="10"/>
         <string name="oS" value="Tdungeon"/>
         <string name="l0" value="mushCatle"/>
-        <string name="l1" value="forest"/>
-        <string name="l2" value="9"/>
-        <int name="x" value="1282"/>
-        <int name="y" value="-106"/>
-        <int name="z" value="13"/>
-        <int name="f" value="0"/>
-        <int name="zM" value="13"/>
+        <string name="l1" value="tent"/>
+        <string name="l2" value="0"/>
         <int name="r" value="0"/>
+        <int name="f" value="1"/>
       </imgdir>
       <imgdir name="1">
-        <string name="oS" value="Tdungeon"/>
-        <string name="l0" value="mushCatle"/>
-        <string name="l1" value="forest"/>
-        <string name="l2" value="11"/>
         <int name="x" value="1215"/>
         <int name="y" value="-79"/>
         <int name="z" value="9"/>
-        <int name="f" value="0"/>
         <int name="zM" value="13"/>
+        <string name="oS" value="Tdungeon"/>
+        <string name="l0" value="mushCatle"/>
+        <string name="l1" value="forest"/>
+        <string name="l2" value="11"/>
         <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
       <imgdir name="2">
+        <int name="x" value="1282"/>
+        <int name="y" value="-106"/>
+        <int name="z" value="13"/>
+        <int name="zM" value="13"/>
         <string name="oS" value="Tdungeon"/>
         <string name="l0" value="mushCatle"/>
-        <string name="l1" value="tent"/>
-        <string name="l2" value="0"/>
-        <int name="x" value="150"/>
-        <int name="y" value="5"/>
-        <int name="z" value="7"/>
-        <int name="f" value="1"/>
-        <int name="zM" value="10"/>
+        <string name="l1" value="forest"/>
+        <string name="l2" value="9"/>
         <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
     </imgdir>
+    <imgdir name="tile">
+    </imgdir>
   </imgdir>
   <imgdir name="3">
     <imgdir name="info">
       <string name="tS" value="grassySoil"/>
-      <int name="tSMag" value="1"/>
+    </imgdir>
+    <imgdir name="obj">
+      <imgdir name="0">
+        <int name="x" value="715"/>
+        <int name="y" value="-112"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="1"/>
+        <string name="oS" value="Tdungeon"/>
+        <string name="l0" value="mushCatle"/>
+        <string name="l1" value="tent"/>
+        <string name="l2" value="1"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
+      </imgdir>
     </imgdir>
     <imgdir name="tile">
-      <imgdir name="6">
-        <int name="x" value="540"/>
+      <imgdir name="0">
+        <int name="x" value="180"/>
         <int name="y" value="60"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="0"/>
         <int name="zM" value="1"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="2"/>
       </imgdir>
-      <imgdir name="9">
-        <int name="x" value="450"/>
+      <imgdir name="1">
+        <int name="x" value="180"/>
         <int name="y" value="60"/>
+        <int name="zM" value="1"/>
         <string name="u" value="enH0"/>
+        <int name="no" value="1"/>
+      </imgdir>
+      <imgdir name="2">
+        <int name="x" value="630"/>
+        <int name="y" value="60"/>
+        <int name="zM" value="1"/>
+        <string name="u" value="bsc"/>
         <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="3">
+        <int name="x" value="720"/>
+        <int name="y" value="120"/>
         <int name="zM" value="1"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="1"/>
       </imgdir>
-      <imgdir name="5">
+      <imgdir name="4">
         <int name="x" value="360"/>
         <int name="y" value="60"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="1"/>
         <int name="zM" value="1"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="11">
-        <int name="x" value="270"/>
+      <imgdir name="5">
+        <int name="x" value="360"/>
         <int name="y" value="60"/>
+        <int name="zM" value="1"/>
         <string name="u" value="enH0"/>
         <int name="no" value="1"/>
-        <int name="zM" value="1"/>
       </imgdir>
-      <imgdir name="1">
-        <int name="x" value="180"/>
+      <imgdir name="6">
+        <int name="x" value="540"/>
         <int name="y" value="60"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="1"/>
         <int name="zM" value="1"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="0">
-        <int name="x" value="180"/>
+      <imgdir name="7">
+        <int name="x" value="540"/>
         <int name="y" value="60"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="2"/>
         <int name="zM" value="1"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="4">
-        <int name="x" value="360"/>
+      <imgdir name="8">
+        <int name="x" value="450"/>
         <int name="y" value="60"/>
+        <int name="zM" value="1"/>
         <string name="u" value="bsc"/>
         <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="9">
+        <int name="x" value="450"/>
+        <int name="y" value="60"/>
         <int name="zM" value="1"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="0"/>
       </imgdir>
       <imgdir name="10">
         <int name="x" value="270"/>
         <int name="y" value="60"/>
+        <int name="zM" value="1"/>
         <string name="u" value="bsc"/>
         <int name="no" value="4"/>
+      </imgdir>
+      <imgdir name="11">
+        <int name="x" value="270"/>
+        <int name="y" value="60"/>
         <int name="zM" value="1"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="1"/>
       </imgdir>
-      <imgdir name="19">
-        <int name="x" value="450"/>
-        <int name="y" value="120"/>
+      <imgdir name="12">
+        <int name="x" value="0"/>
+        <int name="y" value="60"/>
+        <int name="zM" value="1"/>
         <string name="u" value="bsc"/>
         <int name="no" value="3"/>
-        <int name="zM" value="1"/>
       </imgdir>
-      <imgdir name="7">
-        <int name="x" value="540"/>
+      <imgdir name="13">
+        <int name="x" value="-90"/>
         <int name="y" value="60"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="0"/>
         <int name="zM" value="1"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="26">
-        <int name="x" value="540"/>
-        <int name="y" value="120"/>
+      <imgdir name="14">
+        <int name="x" value="1260"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="1"/>
         <string name="u" value="bsc"/>
         <int name="no" value="3"/>
-        <int name="zM" value="1"/>
       </imgdir>
-      <imgdir name="8">
-        <int name="x" value="450"/>
-        <int name="y" value="60"/>
+      <imgdir name="15">
+        <int name="x" value="1170"/>
+        <int name="y" value="240"/>
+        <int name="zM" value="1"/>
         <string name="u" value="bsc"/>
         <int name="no" value="0"/>
-        <int name="zM" value="1"/>
       </imgdir>
-      <imgdir name="33">
-        <int name="x" value="630"/>
+      <imgdir name="16">
+        <int name="x" value="-90"/>
         <int name="y" value="60"/>
+        <int name="zM" value="1"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="1"/>
+      </imgdir>
+      <imgdir name="17">
+        <int name="x" value="1260"/>
+        <int name="y" value="0"/>
+        <int name="zM" value="1"/>
         <string name="u" value="enH0"/>
         <int name="no" value="0"/>
-        <int name="zM" value="1"/>
       </imgdir>
       <imgdir name="18">
         <int name="x" value="720"/>
         <int name="y" value="60"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="1"/>
         <int name="zM" value="1"/>
-      </imgdir>
-      <imgdir name="35">
-        <int name="x" value="810"/>
-        <int name="y" value="60"/>
         <string name="u" value="enH0"/>
         <int name="no" value="1"/>
-        <int name="zM" value="1"/>
       </imgdir>
-      <imgdir name="32">
-        <int name="x" value="630"/>
+      <imgdir name="19">
+        <int name="x" value="450"/>
         <int name="y" value="120"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="2"/>
         <int name="zM" value="1"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="3"/>
       </imgdir>
-      <imgdir name="27">
-        <int name="x" value="720"/>
+      <imgdir name="20">
+        <int name="x" value="1260"/>
         <int name="y" value="60"/>
+        <int name="zM" value="1"/>
         <string name="u" value="bsc"/>
         <int name="no" value="3"/>
-        <int name="zM" value="1"/>
       </imgdir>
-      <imgdir name="2">
-        <int name="x" value="630"/>
-        <int name="y" value="60"/>
+      <imgdir name="21">
+        <int name="x" value="1080"/>
+        <int name="y" value="240"/>
+        <int name="zM" value="1"/>
         <string name="u" value="bsc"/>
         <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="22">
+        <int name="x" value="990"/>
+        <int name="y" value="0"/>
         <int name="zM" value="1"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="3"/>
       </imgdir>
-      <imgdir name="3">
-        <int name="x" value="720"/>
-        <int name="y" value="120"/>
+      <imgdir name="23">
+        <int name="x" value="1260"/>
+        <int name="y" value="0"/>
+        <int name="zM" value="1"/>
         <string name="u" value="bsc"/>
         <int name="no" value="1"/>
+      </imgdir>
+      <imgdir name="24">
+        <int name="x" value="1260"/>
+        <int name="y" value="240"/>
         <int name="zM" value="1"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="4"/>
       </imgdir>
-      <imgdir name="34">
-        <int name="x" value="810"/>
-        <int name="y" value="60"/>
+      <imgdir name="25">
+        <int name="x" value="1080"/>
+        <int name="y" value="0"/>
+        <int name="zM" value="1"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="3"/>
+        <int name="no" value="1"/>
+      </imgdir>
+      <imgdir name="26">
+        <int name="x" value="540"/>
+        <int name="y" value="120"/>
         <int name="zM" value="1"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="3"/>
       </imgdir>
-      <imgdir name="36">
-        <int name="x" value="900"/>
+      <imgdir name="27">
+        <int name="x" value="720"/>
         <int name="y" value="60"/>
+        <int name="zM" value="1"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="2"/>
+        <int name="no" value="3"/>
+      </imgdir>
+      <imgdir name="28">
+        <int name="x" value="1170"/>
+        <int name="y" value="0"/>
         <int name="zM" value="1"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="1"/>
       </imgdir>
       <imgdir name="29">
         <int name="x" value="810"/>
         <int name="y" value="120"/>
+        <int name="zM" value="1"/>
         <string name="u" value="bsc"/>
         <int name="no" value="4"/>
+      </imgdir>
+      <imgdir name="30">
+        <int name="x" value="720"/>
+        <int name="y" value="180"/>
         <int name="zM" value="1"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="3"/>
       </imgdir>
       <imgdir name="31">
         <int name="x" value="900"/>
         <int name="y" value="120"/>
+        <int name="zM" value="1"/>
         <string name="u" value="bsc"/>
         <int name="no" value="1"/>
-        <int name="zM" value="1"/>
       </imgdir>
-      <imgdir name="43">
-        <int name="x" value="990"/>
+      <imgdir name="32">
+        <int name="x" value="630"/>
         <int name="y" value="120"/>
+        <int name="zM" value="1"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="2"/>
+      </imgdir>
+      <imgdir name="33">
+        <int name="x" value="630"/>
+        <int name="y" value="60"/>
+        <int name="zM" value="1"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="34">
+        <int name="x" value="810"/>
+        <int name="y" value="60"/>
+        <int name="zM" value="1"/>
         <string name="u" value="bsc"/>
         <int name="no" value="3"/>
+      </imgdir>
+      <imgdir name="35">
+        <int name="x" value="810"/>
+        <int name="y" value="60"/>
         <int name="zM" value="1"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="1"/>
       </imgdir>
-      <imgdir name="49">
-        <int name="x" value="1080"/>
+      <imgdir name="36">
+        <int name="x" value="900"/>
         <int name="y" value="60"/>
+        <int name="zM" value="1"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="4"/>
+        <int name="no" value="2"/>
+      </imgdir>
+      <imgdir name="37">
+        <int name="x" value="990"/>
+        <int name="y" value="60"/>
         <int name="zM" value="1"/>
+        <string name="u" value="slLU"/>
+        <int name="no" value="0"/>
       </imgdir>
       <imgdir name="38">
         <int name="x" value="990"/>
         <int name="y" value="60"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="0"/>
         <int name="zM" value="1"/>
-      </imgdir>
-      <imgdir name="40">
-        <int name="x" value="1080"/>
-        <int name="y" value="120"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="44">
-        <int name="x" value="1170"/>
+      <imgdir name="39">
+        <int name="x" value="90"/>
         <int name="y" value="60"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="3"/>
         <int name="zM" value="1"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="1"/>
       </imgdir>
-      <imgdir name="55">
-        <int name="x" value="1170"/>
+      <imgdir name="40">
+        <int name="x" value="1080"/>
         <int name="y" value="120"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="2"/>
         <int name="zM" value="1"/>
-      </imgdir>
-      <imgdir name="53">
-        <int name="x" value="1170"/>
-        <int name="y" value="180"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="1"/>
+        <int name="no" value="1"/>
       </imgdir>
       <imgdir name="41">
         <int name="x" value="900"/>
         <int name="y" value="180"/>
+        <int name="zM" value="1"/>
         <string name="u" value="bsc"/>
         <int name="no" value="4"/>
-        <int name="zM" value="1"/>
       </imgdir>
       <imgdir name="42">
         <int name="x" value="810"/>
         <int name="y" value="180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="2"/>
         <int name="zM" value="1"/>
-      </imgdir>
-      <imgdir name="54">
-        <int name="x" value="1080"/>
-        <int name="y" value="180"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="1"/>
+        <int name="no" value="2"/>
       </imgdir>
-      <imgdir name="52">
+      <imgdir name="43">
         <int name="x" value="990"/>
-        <int name="y" value="180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="2"/>
+        <int name="y" value="120"/>
         <int name="zM" value="1"/>
-      </imgdir>
-      <imgdir name="30">
-        <int name="x" value="720"/>
-        <int name="y" value="180"/>
         <string name="u" value="bsc"/>
         <int name="no" value="3"/>
-        <int name="zM" value="1"/>
       </imgdir>
-      <imgdir name="12">
-        <int name="x" value="0"/>
+      <imgdir name="44">
+        <int name="x" value="1170"/>
         <int name="y" value="60"/>
+        <int name="zM" value="1"/>
         <string name="u" value="bsc"/>
         <int name="no" value="3"/>
-        <int name="zM" value="1"/>
       </imgdir>
-      <imgdir name="47">
-        <int name="x" value="0"/>
-        <int name="y" value="60"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="1"/>
+      <imgdir name="45">
+        <int name="x" value="1170"/>
+        <int name="y" value="0"/>
         <int name="zM" value="1"/>
-      </imgdir>
-      <imgdir name="50">
-        <int name="x" value="90"/>
-        <int name="y" value="60"/>
         <string name="u" value="enH0"/>
         <int name="no" value="1"/>
-        <int name="zM" value="1"/>
-      </imgdir>
-      <imgdir name="39">
-        <int name="x" value="90"/>
-        <int name="y" value="60"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="1"/>
-      </imgdir>
-      <imgdir name="58">
-        <int name="x" value="990"/>
-        <int name="y" value="240"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="2"/>
-        <int name="zM" value="1"/>
       </imgdir>
       <imgdir name="46">
         <int name="x" value="990"/>
         <int name="y" value="0"/>
+        <int name="zM" value="1"/>
         <string name="u" value="enH0"/>
         <int name="no" value="1"/>
+      </imgdir>
+      <imgdir name="47">
+        <int name="x" value="0"/>
+        <int name="y" value="60"/>
         <int name="zM" value="1"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="1"/>
       </imgdir>
       <imgdir name="48">
         <int name="x" value="1080"/>
         <int name="y" value="0"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="1"/>
         <int name="zM" value="1"/>
-      </imgdir>
-      <imgdir name="45">
-        <int name="x" value="1170"/>
-        <int name="y" value="0"/>
         <string name="u" value="enH0"/>
         <int name="no" value="1"/>
-        <int name="zM" value="1"/>
-      </imgdir>
-      <imgdir name="37">
-        <int name="x" value="990"/>
-        <int name="y" value="60"/>
-        <string name="u" value="slLU"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="1"/>
       </imgdir>
-      <imgdir name="16">
-        <int name="x" value="-90"/>
+      <imgdir name="49">
+        <int name="x" value="1080"/>
         <int name="y" value="60"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="1"/>
         <int name="zM" value="1"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="4"/>
       </imgdir>
-      <imgdir name="13">
-        <int name="x" value="-90"/>
+      <imgdir name="50">
+        <int name="x" value="90"/>
         <int name="y" value="60"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="0"/>
         <int name="zM" value="1"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="1"/>
       </imgdir>
       <imgdir name="51">
         <int name="x" value="-180"/>
         <int name="y" value="60"/>
+        <int name="zM" value="1"/>
         <string name="u" value="enH0"/>
         <int name="no" value="0"/>
-        <int name="zM" value="1"/>
       </imgdir>
-      <imgdir name="56">
-        <int name="x" value="-180"/>
-        <int name="y" value="60"/>
+      <imgdir name="52">
+        <int name="x" value="990"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="1"/>
         <string name="u" value="bsc"/>
         <int name="no" value="2"/>
-        <int name="zM" value="1"/>
       </imgdir>
-      <imgdir name="24">
-        <int name="x" value="1260"/>
-        <int name="y" value="240"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="4"/>
+      <imgdir name="53">
+        <int name="x" value="1170"/>
+        <int name="y" value="180"/>
         <int name="zM" value="1"/>
-      </imgdir>
-      <imgdir name="20">
-        <int name="x" value="1260"/>
-        <int name="y" value="60"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="3"/>
-        <int name="zM" value="1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="25">
+      <imgdir name="54">
         <int name="x" value="1080"/>
-        <int name="y" value="0"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="1"/>
+        <int name="y" value="180"/>
         <int name="zM" value="1"/>
-      </imgdir>
-      <imgdir name="28">
-        <int name="x" value="1170"/>
-        <int name="y" value="0"/>
         <string name="u" value="bsc"/>
         <int name="no" value="1"/>
-        <int name="zM" value="1"/>
       </imgdir>
-      <imgdir name="57">
-        <int name="x" value="1260"/>
+      <imgdir name="55">
+        <int name="x" value="1170"/>
         <int name="y" value="120"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="4"/>
         <int name="zM" value="1"/>
-      </imgdir>
-      <imgdir name="23">
-        <int name="x" value="1260"/>
-        <int name="y" value="0"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="1"/>
+        <int name="no" value="2"/>
       </imgdir>
-      <imgdir name="17">
-        <int name="x" value="1260"/>
-        <int name="y" value="0"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="0"/>
+      <imgdir name="56">
+        <int name="x" value="-180"/>
+        <int name="y" value="60"/>
         <int name="zM" value="1"/>
-      </imgdir>
-      <imgdir name="22">
-        <int name="x" value="990"/>
-        <int name="y" value="0"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="3"/>
-        <int name="zM" value="1"/>
+        <int name="no" value="2"/>
       </imgdir>
-      <imgdir name="14">
+      <imgdir name="57">
         <int name="x" value="1260"/>
-        <int name="y" value="180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="3"/>
+        <int name="y" value="120"/>
         <int name="zM" value="1"/>
-      </imgdir>
-      <imgdir name="21">
-        <int name="x" value="1080"/>
-        <int name="y" value="240"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="1"/>
+        <int name="no" value="4"/>
       </imgdir>
-      <imgdir name="15">
-        <int name="x" value="1170"/>
+      <imgdir name="58">
+        <int name="x" value="990"/>
         <int name="y" value="240"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="0"/>
         <int name="zM" value="1"/>
-      </imgdir>
-    </imgdir>
-    <imgdir name="obj">
-      <imgdir name="0">
-        <string name="oS" value="Tdungeon"/>
-        <string name="l0" value="mushCatle"/>
-        <string name="l1" value="tent"/>
-        <string name="l2" value="1"/>
-        <int name="x" value="715"/>
-        <int name="y" value="-112"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
-        <int name="zM" value="1"/>
-        <int name="r" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="2"/>
       </imgdir>
     </imgdir>
   </imgdir>
   <imgdir name="4">
     <imgdir name="info">
     </imgdir>
-    <imgdir name="tile">
-    </imgdir>
     <imgdir name="obj">
       <imgdir name="0">
-        <string name="oS" value="Tdungeon"/>
-        <string name="l0" value="mushCatle"/>
-        <string name="l1" value="forest"/>
-        <string name="l2" value="5"/>
         <int name="x" value="1230"/>
         <int name="y" value="193"/>
         <int name="z" value="8"/>
-        <int name="f" value="0"/>
         <int name="zM" value="2"/>
+        <string name="oS" value="Tdungeon"/>
+        <string name="l0" value="mushCatle"/>
+        <string name="l1" value="forest"/>
+        <string name="l2" value="5"/>
         <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
       <imgdir name="1">
+        <int name="x" value="778"/>
+        <int name="y" value="193"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="3"/>
         <string name="oS" value="Tdungeon"/>
         <string name="l0" value="mushCatle"/>
         <string name="l1" value="forest"/>
-        <string name="l2" value="4"/>
+        <string name="l2" value="6"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
+      </imgdir>
+      <imgdir name="2">
+        <int name="x" value="601"/>
+        <int name="y" value="134"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="4"/>
+        <string name="oS" value="Tdungeon"/>
+        <string name="l0" value="mushCatle"/>
+        <string name="l1" value="forest"/>
+        <string name="l2" value="6"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
+      </imgdir>
+      <imgdir name="3">
         <int name="x" value="1086"/>
         <int name="y" value="237"/>
         <int name="z" value="9"/>
+        <int name="zM" value="2"/>
+        <string name="oS" value="Tdungeon"/>
+        <string name="l0" value="mushCatle"/>
+        <string name="l1" value="forest"/>
+        <string name="l2" value="4"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
+      </imgdir>
+      <imgdir name="4">
+        <int name="x" value="969"/>
+        <int name="y" value="139"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="2"/>
+        <string name="oS" value="Tdungeon"/>
+        <string name="l0" value="mushCatle"/>
+        <string name="l1" value="guide"/>
+        <string name="l2" value="14"/>
+        <int name="r" value="0"/>
         <int name="f" value="0"/>
+      </imgdir>
+      <imgdir name="5">
+        <int name="x" value="1234"/>
+        <int name="y" value="203"/>
+        <int name="z" value="9"/>
         <int name="zM" value="2"/>
+        <string name="oS" value="Tdungeon"/>
+        <string name="l0" value="mushCatle"/>
+        <string name="l1" value="gate"/>
+        <string name="l2" value="6"/>
         <int name="r" value="0"/>
+        <int name="f" value="0"/>
+      </imgdir>
+    </imgdir>
+    <imgdir name="tile">
+    </imgdir>
+  </imgdir>
+  <imgdir name="5">
+    <imgdir name="info">
+      <string name="tS" value="grassySoil"/>
+    </imgdir>
+    <imgdir name="obj">
+    </imgdir>
+    <imgdir name="tile">
+      <imgdir name="0">
+        <int name="x" value="1260"/>
+        <int name="y" value="360"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="1"/>
+      </imgdir>
+      <imgdir name="1">
+        <int name="x" value="810"/>
+        <int name="y" value="300"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="1"/>
+      </imgdir>
+      <imgdir name="2">
+        <int name="x" value="1260"/>
+        <int name="y" value="300"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="4"/>
+      </imgdir>
+      <imgdir name="3">
+        <int name="x" value="90"/>
+        <int name="y" value="120"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="4">
+        <int name="x" value="1260"/>
+        <int name="y" value="420"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="1"/>
+      </imgdir>
+      <imgdir name="5">
+        <int name="x" value="180"/>
+        <int name="y" value="240"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="1"/>
+      </imgdir>
+      <imgdir name="6">
+        <int name="x" value="180"/>
+        <int name="y" value="300"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="1"/>
+      </imgdir>
+      <imgdir name="7">
+        <int name="x" value="90"/>
+        <int name="y" value="240"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="1"/>
+      </imgdir>
+      <imgdir name="8">
+        <int name="x" value="990"/>
+        <int name="y" value="300"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="9">
+        <int name="x" value="90"/>
+        <int name="y" value="300"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="10">
+        <int name="x" value="540"/>
+        <int name="y" value="420"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="3">
-        <string name="oS" value="Tdungeon"/>
-        <string name="l0" value="mushCatle"/>
-        <string name="l1" value="forest"/>
-        <string name="l2" value="6"/>
-        <int name="x" value="601"/>
-        <int name="y" value="134"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
-        <int name="zM" value="4"/>
-        <int name="r" value="0"/>
+      <imgdir name="11">
+        <int name="x" value="450"/>
+        <int name="y" value="420"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="2">
-        <string name="oS" value="Tdungeon"/>
-        <string name="l0" value="mushCatle"/>
-        <string name="l1" value="forest"/>
-        <string name="l2" value="6"/>
-        <int name="x" value="778"/>
-        <int name="y" value="193"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
-        <int name="zM" value="3"/>
-        <int name="r" value="0"/>
+      <imgdir name="12">
+        <int name="x" value="630"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="1"/>
       </imgdir>
-      <imgdir name="4">
-        <string name="oS" value="Tdungeon"/>
-        <string name="l0" value="mushCatle"/>
-        <string name="l1" value="gate"/>
-        <string name="l2" value="6"/>
-        <int name="x" value="1234"/>
-        <int name="y" value="203"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
-        <int name="zM" value="2"/>
-        <int name="r" value="0"/>
+      <imgdir name="13">
+        <int name="x" value="900"/>
+        <int name="y" value="240"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="1"/>
       </imgdir>
-      <imgdir name="5">
-        <string name="oS" value="Tdungeon"/>
-        <string name="l0" value="mushCatle"/>
-        <string name="l1" value="guide"/>
-        <string name="l2" value="14"/>
-        <int name="x" value="969"/>
-        <int name="y" value="139"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
-        <int name="zM" value="2"/>
-        <int name="r" value="0"/>
+      <imgdir name="14">
+        <int name="x" value="900"/>
+        <int name="y" value="300"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="1"/>
       </imgdir>
-    </imgdir>
-  </imgdir>
-  <imgdir name="5">
-    <imgdir name="info">
-      <string name="tS" value="grassySoil"/>
-      <int name="tSMag" value="1"/>
-    </imgdir>
-    <imgdir name="tile">
       <imgdir name="15">
         <int name="x" value="900"/>
         <int name="y" value="240"/>
+        <int name="zM" value="0"/>
         <string name="u" value="enH0"/>
         <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="16">
+        <int name="x" value="540"/>
+        <int name="y" value="180"/>
         <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="2"/>
       </imgdir>
-      <imgdir name="13">
-        <int name="x" value="900"/>
+      <imgdir name="17">
+        <int name="x" value="720"/>
+        <int name="y" value="420"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="18">
+        <int name="x" value="720"/>
         <int name="y" value="240"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="slRU"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="19">
+        <int name="x" value="630"/>
+        <int name="y" value="300"/>
+        <int name="zM" value="0"/>
         <string name="u" value="bsc"/>
         <int name="no" value="1"/>
+      </imgdir>
+      <imgdir name="20">
+        <int name="x" value="270"/>
+        <int name="y" value="240"/>
         <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="1"/>
       </imgdir>
       <imgdir name="21">
         <int name="x" value="720"/>
         <int name="y" value="240"/>
+        <int name="zM" value="0"/>
         <string name="u" value="bsc"/>
         <int name="no" value="4"/>
-        <int name="zM" value="0"/>
       </imgdir>
-      <imgdir name="24">
-        <int name="x" value="810"/>
-        <int name="y" value="240"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="2"/>
+      <imgdir name="22">
+        <int name="x" value="450"/>
+        <int name="y" value="300"/>
         <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="0"/>
       </imgdir>
       <imgdir name="23">
         <int name="x" value="810"/>
         <int name="y" value="240"/>
+        <int name="zM" value="0"/>
         <string name="u" value="enH0"/>
         <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="24">
+        <int name="x" value="810"/>
+        <int name="y" value="240"/>
         <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="2"/>
       </imgdir>
       <imgdir name="25">
         <int name="x" value="630"/>
         <int name="y" value="240"/>
+        <int name="zM" value="0"/>
         <string name="u" value="bsc"/>
         <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="26">
+        <int name="x" value="720"/>
+        <int name="y" value="300"/>
         <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="2"/>
       </imgdir>
-      <imgdir name="28">
-        <int name="x" value="630"/>
+      <imgdir name="27">
+        <int name="x" value="450"/>
         <int name="y" value="180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="3"/>
         <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="12">
+      <imgdir name="28">
         <int name="x" value="630"/>
         <int name="y" value="180"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="1"/>
         <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="3"/>
       </imgdir>
-      <imgdir name="16">
-        <int name="x" value="540"/>
-        <int name="y" value="180"/>
+      <imgdir name="29">
+        <int name="x" value="-180"/>
+        <int name="y" value="240"/>
+        <int name="zM" value="0"/>
         <string name="u" value="bsc"/>
         <int name="no" value="2"/>
-        <int name="zM" value="0"/>
       </imgdir>
-      <imgdir name="36">
-        <int name="x" value="540"/>
-        <int name="y" value="180"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="0"/>
+      <imgdir name="30">
+        <int name="x" value="-90"/>
+        <int name="y" value="300"/>
         <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="4"/>
       </imgdir>
-      <imgdir name="27">
+      <imgdir name="31">
         <int name="x" value="450"/>
         <int name="y" value="180"/>
-        <string name="u" value="bsc"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="slRU"/>
         <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="32">
+        <int name="x" value="360"/>
+        <int name="y" value="240"/>
         <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="4"/>
       </imgdir>
       <imgdir name="33">
         <int name="x" value="540"/>
         <int name="y" value="240"/>
+        <int name="zM" value="0"/>
         <string name="u" value="bsc"/>
         <int name="no" value="0"/>
-        <int name="zM" value="0"/>
       </imgdir>
       <imgdir name="34">
         <int name="x" value="450"/>
         <int name="y" value="240"/>
+        <int name="zM" value="0"/>
         <string name="u" value="bsc"/>
         <int name="no" value="2"/>
-        <int name="zM" value="0"/>
       </imgdir>
-      <imgdir name="37">
+      <imgdir name="35">
         <int name="x" value="360"/>
-        <int name="y" value="120"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="1"/>
+        <int name="y" value="300"/>
         <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="4"/>
       </imgdir>
-      <imgdir name="43">
-        <int name="x" value="360"/>
-        <int name="y" value="120"/>
+      <imgdir name="36">
+        <int name="x" value="540"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="0"/>
         <string name="u" value="enH0"/>
         <int name="no" value="0"/>
-        <int name="zM" value="0"/>
       </imgdir>
-      <imgdir name="47">
-        <int name="x" value="180"/>
+      <imgdir name="37">
+        <int name="x" value="360"/>
         <int name="y" value="120"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="0"/>
         <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="49">
-        <int name="x" value="180"/>
-        <int name="y" value="120"/>
-        <string name="u" value="enH0"/>
+        <string name="u" value="bsc"/>
         <int name="no" value="1"/>
-        <int name="zM" value="0"/>
       </imgdir>
-      <imgdir name="45">
-        <int name="x" value="270"/>
-        <int name="y" value="120"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="1"/>
+      <imgdir name="38">
+        <int name="x" value="540"/>
+        <int name="y" value="300"/>
         <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="41">
-        <int name="x" value="270"/>
-        <int name="y" value="120"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="4"/>
-        <int name="zM" value="0"/>
+        <int name="no" value="2"/>
       </imgdir>
-      <imgdir name="52">
-        <int name="x" value="90"/>
-        <int name="y" value="120"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="3"/>
+      <imgdir name="39">
+        <int name="x" value="-90"/>
+        <int name="y" value="420"/>
         <int name="zM" value="0"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="50">
-        <int name="x" value="90"/>
-        <int name="y" value="180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="2"/>
+      <imgdir name="40">
+        <int name="x" value="-180"/>
+        <int name="y" value="360"/>
         <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="32">
-        <int name="x" value="360"/>
-        <int name="y" value="240"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="4"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="41">
+        <int name="x" value="270"/>
+        <int name="y" value="120"/>
         <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="46">
-        <int name="x" value="180"/>
-        <int name="y" value="180"/>
         <string name="u" value="bsc"/>
         <int name="no" value="4"/>
-        <int name="zM" value="0"/>
       </imgdir>
       <imgdir name="42">
         <int name="x" value="270"/>
         <int name="y" value="180"/>
+        <int name="zM" value="0"/>
         <string name="u" value="bsc"/>
         <int name="no" value="2"/>
+      </imgdir>
+      <imgdir name="43">
+        <int name="x" value="360"/>
+        <int name="y" value="120"/>
         <int name="zM" value="0"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="0"/>
       </imgdir>
       <imgdir name="44">
         <int name="x" value="360"/>
         <int name="y" value="180"/>
+        <int name="zM" value="0"/>
         <string name="u" value="bsc"/>
         <int name="no" value="2"/>
-        <int name="zM" value="0"/>
       </imgdir>
-      <imgdir name="20">
+      <imgdir name="45">
         <int name="x" value="270"/>
-        <int name="y" value="240"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="7">
-        <int name="x" value="90"/>
-        <int name="y" value="240"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="5">
-        <int name="x" value="180"/>
-        <int name="y" value="240"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="3">
-        <int name="x" value="90"/>
         <int name="y" value="120"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="0"/>
         <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="59">
-        <int name="x" value="1080"/>
-        <int name="y" value="300"/>
         <string name="u" value="enH0"/>
         <int name="no" value="1"/>
-        <int name="zM" value="0"/>
       </imgdir>
-      <imgdir name="58">
-        <int name="x" value="1170"/>
-        <int name="y" value="300"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="1"/>
+      <imgdir name="46">
+        <int name="x" value="180"/>
+        <int name="y" value="180"/>
         <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="57">
-        <int name="x" value="1170"/>
-        <int name="y" value="300"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="3"/>
-        <int name="zM" value="0"/>
+        <int name="no" value="4"/>
       </imgdir>
-      <imgdir name="8">
-        <int name="x" value="990"/>
-        <int name="y" value="300"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="0"/>
+      <imgdir name="47">
+        <int name="x" value="180"/>
+        <int name="y" value="120"/>
         <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="14">
-        <int name="x" value="900"/>
-        <int name="y" value="300"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="0"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="56">
-        <int name="x" value="1080"/>
+      <imgdir name="48">
+        <int name="x" value="270"/>
         <int name="y" value="300"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="3"/>
         <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="62">
-        <int name="x" value="1170"/>
-        <int name="y" value="360"/>
         <string name="u" value="bsc"/>
         <int name="no" value="1"/>
-        <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="67">
-        <int name="x" value="1080"/>
-        <int name="y" value="360"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="0"/>
       </imgdir>
-      <imgdir name="73">
-        <int name="x" value="1170"/>
-        <int name="y" value="420"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="1"/>
+      <imgdir name="49">
+        <int name="x" value="180"/>
+        <int name="y" value="120"/>
         <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="69">
-        <int name="x" value="1080"/>
-        <int name="y" value="420"/>
-        <string name="u" value="enH1"/>
+        <string name="u" value="enH0"/>
         <int name="no" value="1"/>
-        <int name="zM" value="0"/>
       </imgdir>
-      <imgdir name="70">
-        <int name="x" value="990"/>
-        <int name="y" value="420"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="1"/>
+      <imgdir name="50">
+        <int name="x" value="90"/>
+        <int name="y" value="180"/>
         <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="65">
-        <int name="x" value="990"/>
-        <int name="y" value="360"/>
         <string name="u" value="bsc"/>
         <int name="no" value="2"/>
-        <int name="zM" value="0"/>
       </imgdir>
-      <imgdir name="72">
-        <int name="x" value="900"/>
+      <imgdir name="51">
+        <int name="x" value="180"/>
         <int name="y" value="420"/>
+        <int name="zM" value="0"/>
         <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="0"/>
       </imgdir>
-      <imgdir name="68">
-        <int name="x" value="900"/>
-        <int name="y" value="360"/>
+      <imgdir name="52">
+        <int name="x" value="90"/>
+        <int name="y" value="120"/>
+        <int name="zM" value="0"/>
         <string name="u" value="bsc"/>
         <int name="no" value="3"/>
-        <int name="zM" value="0"/>
       </imgdir>
-      <imgdir name="74">
-        <int name="x" value="810"/>
-        <int name="y" value="420"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="1"/>
+      <imgdir name="53">
+        <int name="x" value="-180"/>
+        <int name="y" value="120"/>
         <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="64">
-        <int name="x" value="810"/>
-        <int name="y" value="360"/>
         <string name="u" value="bsc"/>
         <int name="no" value="0"/>
-        <int name="zM" value="0"/>
       </imgdir>
-      <imgdir name="76">
-        <int name="x" value="720"/>
-        <int name="y" value="360"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="3"/>
+      <imgdir name="54">
+        <int name="x" value="-90"/>
+        <int name="y" value="240"/>
         <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="26">
-        <int name="x" value="720"/>
-        <int name="y" value="300"/>
         <string name="u" value="bsc"/>
         <int name="no" value="2"/>
-        <int name="zM" value="0"/>
       </imgdir>
-      <imgdir name="1">
-        <int name="x" value="810"/>
+      <imgdir name="55">
+        <int name="x" value="990"/>
         <int name="y" value="300"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="1"/>
         <int name="zM" value="0"/>
+        <string name="u" value="slRU"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="22">
-        <int name="x" value="450"/>
+      <imgdir name="56">
+        <int name="x" value="1080"/>
         <int name="y" value="300"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="0"/>
         <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="3"/>
       </imgdir>
-      <imgdir name="38">
-        <int name="x" value="540"/>
+      <imgdir name="57">
+        <int name="x" value="1170"/>
         <int name="y" value="300"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="2"/>
         <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="66">
-        <int name="x" value="630"/>
-        <int name="y" value="360"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="0"/>
+        <int name="no" value="3"/>
       </imgdir>
-      <imgdir name="19">
-        <int name="x" value="630"/>
+      <imgdir name="58">
+        <int name="x" value="1170"/>
         <int name="y" value="300"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="1"/>
         <int name="zM" value="0"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="1"/>
       </imgdir>
-      <imgdir name="35">
-        <int name="x" value="360"/>
+      <imgdir name="59">
+        <int name="x" value="1080"/>
         <int name="y" value="300"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="4"/>
         <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="75">
-        <int name="x" value="630"/>
-        <int name="y" value="420"/>
-        <string name="u" value="enH1"/>
+        <string name="u" value="enH0"/>
         <int name="no" value="1"/>
-        <int name="zM" value="0"/>
       </imgdir>
-      <imgdir name="17">
-        <int name="x" value="720"/>
-        <int name="y" value="420"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
+      <imgdir name="60">
+        <int name="x" value="360"/>
+        <int name="y" value="360"/>
         <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="80">
-        <int name="x" value="90"/>
-        <int name="y" value="420"/>
-        <string name="u" value="enH1"/>
+        <string name="u" value="bsc"/>
         <int name="no" value="0"/>
-        <int name="zM" value="0"/>
       </imgdir>
-      <imgdir name="6">
-        <int name="x" value="180"/>
-        <int name="y" value="300"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="1"/>
+      <imgdir name="61">
+        <int name="x" value="540"/>
+        <int name="y" value="360"/>
         <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="9">
-        <int name="x" value="90"/>
-        <int name="y" value="300"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="0"/>
+        <int name="no" value="4"/>
       </imgdir>
-      <imgdir name="48">
-        <int name="x" value="270"/>
-        <int name="y" value="300"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="1"/>
+      <imgdir name="62">
+        <int name="x" value="1170"/>
+        <int name="y" value="360"/>
         <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="79">
-        <int name="x" value="270"/>
-        <int name="y" value="420"/>
-        <string name="u" value="enH1"/>
+        <string name="u" value="bsc"/>
         <int name="no" value="1"/>
-        <int name="zM" value="0"/>
       </imgdir>
       <imgdir name="63">
         <int name="x" value="180"/>
         <int name="y" value="360"/>
+        <int name="zM" value="0"/>
         <string name="u" value="bsc"/>
         <int name="no" value="2"/>
-        <int name="zM" value="0"/>
       </imgdir>
-      <imgdir name="10">
-        <int name="x" value="540"/>
-        <int name="y" value="420"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
+      <imgdir name="64">
+        <int name="x" value="810"/>
+        <int name="y" value="360"/>
         <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="71">
-        <int name="x" value="450"/>
+      <imgdir name="65">
+        <int name="x" value="990"/>
         <int name="y" value="360"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="3"/>
         <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="2"/>
       </imgdir>
-      <imgdir name="60">
-        <int name="x" value="360"/>
+      <imgdir name="66">
+        <int name="x" value="630"/>
         <int name="y" value="360"/>
+        <int name="zM" value="0"/>
         <string name="u" value="bsc"/>
         <int name="no" value="0"/>
-        <int name="zM" value="0"/>
       </imgdir>
-      <imgdir name="61">
-        <int name="x" value="540"/>
+      <imgdir name="67">
+        <int name="x" value="1080"/>
         <int name="y" value="360"/>
+        <int name="zM" value="0"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="4"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="68">
+        <int name="x" value="900"/>
+        <int name="y" value="360"/>
         <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="3"/>
       </imgdir>
-      <imgdir name="11">
-        <int name="x" value="450"/>
+      <imgdir name="69">
+        <int name="x" value="1080"/>
         <int name="y" value="420"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
         <int name="zM" value="0"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="1"/>
       </imgdir>
-      <imgdir name="51">
-        <int name="x" value="180"/>
+      <imgdir name="70">
+        <int name="x" value="990"/>
         <int name="y" value="420"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
         <int name="zM" value="0"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="1"/>
       </imgdir>
-      <imgdir name="82">
-        <int name="x" value="270"/>
+      <imgdir name="71">
+        <int name="x" value="450"/>
         <int name="y" value="360"/>
+        <int name="zM" value="0"/>
         <string name="u" value="bsc"/>
         <int name="no" value="3"/>
+      </imgdir>
+      <imgdir name="72">
+        <int name="x" value="900"/>
+        <int name="y" value="420"/>
         <int name="zM" value="0"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="81">
-        <int name="x" value="360"/>
+      <imgdir name="73">
+        <int name="x" value="1170"/>
         <int name="y" value="420"/>
+        <int name="zM" value="0"/>
         <string name="u" value="enH1"/>
         <int name="no" value="1"/>
-        <int name="zM" value="0"/>
       </imgdir>
-      <imgdir name="4">
-        <int name="x" value="1260"/>
+      <imgdir name="74">
+        <int name="x" value="810"/>
         <int name="y" value="420"/>
+        <int name="zM" value="0"/>
         <string name="u" value="enH1"/>
         <int name="no" value="1"/>
+      </imgdir>
+      <imgdir name="75">
+        <int name="x" value="630"/>
+        <int name="y" value="420"/>
         <int name="zM" value="0"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="1"/>
       </imgdir>
-      <imgdir name="0">
-        <int name="x" value="1260"/>
+      <imgdir name="76">
+        <int name="x" value="720"/>
         <int name="y" value="360"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="1"/>
         <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="3"/>
       </imgdir>
       <imgdir name="77">
         <int name="x" value="1260"/>
         <int name="y" value="300"/>
+        <int name="zM" value="0"/>
         <string name="u" value="enH0"/>
         <int name="no" value="1"/>
-        <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="2">
-        <int name="x" value="1260"/>
-        <int name="y" value="300"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="4"/>
-        <int name="zM" value="0"/>
       </imgdir>
       <imgdir name="78">
         <int name="x" value="90"/>
         <int name="y" value="360"/>
+        <int name="zM" value="0"/>
         <string name="u" value="bsc"/>
         <int name="no" value="1"/>
-        <int name="zM" value="0"/>
       </imgdir>
-      <imgdir name="87">
-        <int name="x" value="0"/>
-        <int name="y" value="120"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="2"/>
+      <imgdir name="79">
+        <int name="x" value="270"/>
+        <int name="y" value="420"/>
         <int name="zM" value="0"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="1"/>
       </imgdir>
-      <imgdir name="88">
-        <int name="x" value="0"/>
-        <int name="y" value="120"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="0"/>
+      <imgdir name="80">
+        <int name="x" value="90"/>
+        <int name="y" value="420"/>
         <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="86">
-        <int name="x" value="0"/>
-        <int name="y" value="180"/>
-        <string name="u" value="bsc"/>
+        <string name="u" value="enH1"/>
         <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="81">
+        <int name="x" value="360"/>
+        <int name="y" value="420"/>
         <int name="zM" value="0"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="1"/>
       </imgdir>
-      <imgdir name="84">
-        <int name="x" value="0"/>
-        <int name="y" value="240"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="4"/>
+      <imgdir name="82">
+        <int name="x" value="270"/>
+        <int name="y" value="360"/>
         <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="3"/>
       </imgdir>
       <imgdir name="83">
         <int name="x" value="0"/>
         <int name="y" value="420"/>
+        <int name="zM" value="0"/>
         <string name="u" value="enH1"/>
         <int name="no" value="1"/>
+      </imgdir>
+      <imgdir name="84">
+        <int name="x" value="0"/>
+        <int name="y" value="240"/>
         <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="4"/>
       </imgdir>
       <imgdir name="85">
         <int name="x" value="0"/>
         <int name="y" value="360"/>
+        <int name="zM" value="0"/>
         <string name="u" value="bsc"/>
         <int name="no" value="0"/>
-        <int name="zM" value="0"/>
       </imgdir>
-      <imgdir name="89">
+      <imgdir name="86">
         <int name="x" value="0"/>
-        <int name="y" value="300"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="1"/>
+        <int name="y" value="180"/>
         <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="93">
-        <int name="x" value="-90"/>
-        <int name="y" value="120"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="3"/>
-        <int name="zM" value="0"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="97">
-        <int name="x" value="-90"/>
+      <imgdir name="87">
+        <int name="x" value="0"/>
         <int name="y" value="120"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="0"/>
         <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="2"/>
       </imgdir>
-      <imgdir name="96">
-        <int name="x" value="-180"/>
+      <imgdir name="88">
+        <int name="x" value="0"/>
         <int name="y" value="120"/>
+        <int name="zM" value="0"/>
         <string name="u" value="enH0"/>
         <int name="no" value="0"/>
-        <int name="zM" value="0"/>
       </imgdir>
-      <imgdir name="95">
-        <int name="x" value="-180"/>
-        <int name="y" value="180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="4"/>
+      <imgdir name="89">
+        <int name="x" value="0"/>
+        <int name="y" value="300"/>
         <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="1"/>
       </imgdir>
-      <imgdir name="92">
+      <imgdir name="90">
         <int name="x" value="-90"/>
-        <int name="y" value="180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="3"/>
+        <int name="y" value="360"/>
         <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="94">
-        <int name="x" value="-180"/>
-        <int name="y" value="300"/>
         <string name="u" value="bsc"/>
         <int name="no" value="2"/>
-        <int name="zM" value="0"/>
       </imgdir>
       <imgdir name="91">
         <int name="x" value="-180"/>
         <int name="y" value="420"/>
+        <int name="zM" value="0"/>
         <string name="u" value="enH1"/>
         <int name="no" value="1"/>
-        <int name="zM" value="0"/>
       </imgdir>
-      <imgdir name="90">
+      <imgdir name="92">
         <int name="x" value="-90"/>
-        <int name="y" value="360"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="2"/>
-        <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="31">
-        <int name="x" value="450"/>
         <int name="y" value="180"/>
-        <string name="u" value="slRU"/>
-        <int name="no" value="0"/>
         <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="40">
-        <int name="x" value="-180"/>
-        <int name="y" value="360"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="0"/>
+        <int name="no" value="3"/>
       </imgdir>
-      <imgdir name="39">
+      <imgdir name="93">
         <int name="x" value="-90"/>
-        <int name="y" value="420"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="18">
-        <int name="x" value="720"/>
-        <int name="y" value="240"/>
-        <string name="u" value="slRU"/>
-        <int name="no" value="0"/>
+        <int name="y" value="120"/>
         <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="30">
-        <int name="x" value="-90"/>
-        <int name="y" value="300"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="4"/>
-        <int name="zM" value="0"/>
+        <int name="no" value="3"/>
       </imgdir>
-      <imgdir name="29">
+      <imgdir name="94">
         <int name="x" value="-180"/>
-        <int name="y" value="240"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="2"/>
-        <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="55">
-        <int name="x" value="990"/>
         <int name="y" value="300"/>
-        <string name="u" value="slRU"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="54">
-        <int name="x" value="-90"/>
-        <int name="y" value="240"/>
+        <int name="zM" value="0"/>
         <string name="u" value="bsc"/>
         <int name="no" value="2"/>
+      </imgdir>
+      <imgdir name="95">
+        <int name="x" value="-180"/>
+        <int name="y" value="180"/>
         <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="4"/>
       </imgdir>
-      <imgdir name="53">
+      <imgdir name="96">
         <int name="x" value="-180"/>
         <int name="y" value="120"/>
-        <string name="u" value="bsc"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="enH0"/>
         <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="97">
+        <int name="x" value="-90"/>
+        <int name="y" value="120"/>
         <int name="zM" value="0"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="0"/>
       </imgdir>
     </imgdir>
-    <imgdir name="obj">
-    </imgdir>
   </imgdir>
   <imgdir name="6">
     <imgdir name="info">
     </imgdir>
-    <imgdir name="tile">
-    </imgdir>
     <imgdir name="obj">
     </imgdir>
+    <imgdir name="tile">
+    </imgdir>
   </imgdir>
   <imgdir name="7">
     <imgdir name="info">
     </imgdir>
+    <imgdir name="obj">
+    </imgdir>
     <imgdir name="tile">
     </imgdir>
-    <imgdir name="obj">
+  </imgdir>
+  <imgdir name="ladderRope">
+  </imgdir>
+  <imgdir name="portal">
+    <imgdir name="0">
+      <int name="x" value="1067"/>
+      <int name="y" value="236"/>
+      <int name="pt" value="0"/>
+      <int name="tm" value="999999999"/>
+      <string name="tn" value=""/>
+      <string name="pn" value="sp"/>
+      <int name="horizontalImpact" value="0"/>
+    </imgdir>
+    <imgdir name="1">
+      <int name="x" value="1122"/>
+      <int name="y" value="-33"/>
+      <int name="pt" value="1"/>
+      <int name="tm" value="999999999"/>
+      <string name="tn" value=""/>
+      <string name="pn" value="pt00"/>
+      <int name="horizontalImpact" value="0"/>
+    </imgdir>
+    <imgdir name="2">
+      <int name="x" value="1212"/>
+      <int name="y" value="-24"/>
+      <int name="pt" value="2"/>
+      <int name="tm" value="106020100"/>
+      <string name="tn" value="left00"/>
+      <string name="pn" value="right00"/>
+      <int name="horizontalImpact" value="0"/>
+    </imgdir>
+    <imgdir name="3">
+      <int name="x" value="1230"/>
+      <int name="y" value="273"/>
+      <int name="pt" value="1"/>
+      <int name="tm" value="100000002"/>
+      <string name="tn" value="TD00"/>
+      <string name="pn" value="left00"/>
+      <int name="horizontalImpact" value="0"/>
+    </imgdir>
+    <imgdir name="4">
+      <int name="x" value="363"/>
+      <int name="y" value="-89"/>
+      <int name="pt" value="6"/>
+      <int name="tm" value="999999999"/>
+      <string name="tn" value=""/>
+      <string name="pn" value="tp"/>
+    </imgdir>
+    <imgdir name="5">
+      <int name="x" value="453"/>
+      <int name="y" value="-89"/>
+      <int name="pt" value="6"/>
+      <int name="tm" value="999999999"/>
+      <string name="tn" value=""/>
+      <string name="pn" value="tp"/>
+      <int name="hideTooltip" value="0"/>
+      <int name="onlyOnce" value="0"/>
+    </imgdir>
+    <imgdir name="6">
+      <int name="x" value="421"/>
+      <int name="y" value="31"/>
+      <int name="pt" value="6"/>
+      <int name="tm" value="999999999"/>
+      <string name="tn" value=""/>
+      <string name="pn" value="tp"/>
+    </imgdir>
+    <imgdir name="7">
+      <int name="x" value="513"/>
+      <int name="y" value="32"/>
+      <int name="pt" value="6"/>
+      <int name="tm" value="999999999"/>
+      <string name="tn" value=""/>
+      <string name="pn" value="tp"/>
+    </imgdir>
+    <imgdir name="8">
+      <int name="x" value="582"/>
+      <int name="y" value="151"/>
+      <int name="pt" value="6"/>
+      <int name="tm" value="999999999"/>
+      <string name="tn" value=""/>
+      <string name="pn" value="tp"/>
+    </imgdir>
+    <imgdir name="9">
+      <int name="x" value="677"/>
+      <int name="y" value="150"/>
+      <int name="pt" value="6"/>
+      <int name="tm" value="999999999"/>
+      <string name="tn" value=""/>
+      <string name="pn" value="tp"/>
     </imgdir>
   </imgdir>
+  <imgdir name="reactor">
+  </imgdir>
   <imgdir name="ToolTip">
     <imgdir name="0">
       <int name="x1" value="826"/>
-      <int name="y1" value="-91"/>
       <int name="x2" value="849"/>
+      <int name="y1" value="-91"/>
       <int name="y2" value="-69"/>
     </imgdir>
     <imgdir name="0char">
       <int name="x1" value="752"/>
-      <int name="y1" value="-142"/>
       <int name="x2" value="945"/>
+      <int name="y1" value="-142"/>
       <int name="y2" value="52"/>
     </imgdir>
     <imgdir name="1">
       <int name="x1" value="951"/>
-      <int name="y1" value="94"/>
       <int name="x2" value="977"/>
+      <int name="y1" value="94"/>
       <int name="y2" value="118"/>
     </imgdir>
     <imgdir name="1char">
       <int name="x1" value="867"/>
-      <int name="y1" value="57"/>
       <int name="x2" value="1071"/>
+      <int name="y1" value="57"/>
       <int name="y2" value="281"/>
     </imgdir>
   </imgdir>
+  <imgdir name="back">
+    <imgdir name="0">
+      <int name="x" value="0"/>
+      <int name="y" value="0"/>
+      <int name="rx" value="0"/>
+      <int name="ry" value="0"/>
+      <int name="cx" value="0"/>
+      <int name="cy" value="0"/>
+      <int name="a" value="255"/>
+      <int name="type" value="3"/>
+      <int name="front" value="0"/>
+      <int name="f" value="0"/>
+      <string name="bS" value="mushCatle"/>
+      <int name="ani" value="0"/>
+      <int name="no" value="0"/>
+    </imgdir>
+    <imgdir name="1">
+      <int name="x" value="-2"/>
+      <int name="y" value="-179"/>
+      <int name="rx" value="0"/>
+      <int name="ry" value="-10"/>
+      <int name="cx" value="0"/>
+      <int name="cy" value="0"/>
+      <int name="a" value="255"/>
+      <int name="type" value="1"/>
+      <int name="front" value="0"/>
+      <int name="f" value="0"/>
+      <string name="bS" value="mushCatle"/>
+      <int name="ani" value="0"/>
+      <int name="no" value="1"/>
+    </imgdir>
+    <imgdir name="2">
+      <int name="x" value="-346"/>
+      <int name="y" value="-324"/>
+      <int name="rx" value="-4"/>
+      <int name="ry" value="-20"/>
+      <int name="cx" value="15000"/>
+      <int name="cy" value="0"/>
+      <int name="a" value="255"/>
+      <int name="type" value="4"/>
+      <int name="front" value="0"/>
+      <int name="f" value="0"/>
+      <string name="bS" value="mushCatle"/>
+      <int name="ani" value="0"/>
+      <int name="no" value="5"/>
+    </imgdir>
+    <imgdir name="3">
+      <int name="x" value="83"/>
+      <int name="y" value="-288"/>
+      <int name="rx" value="-4"/>
+      <int name="ry" value="-20"/>
+      <int name="cx" value="1500"/>
+      <int name="cy" value="0"/>
+      <int name="a" value="255"/>
+      <int name="type" value="4"/>
+      <int name="front" value="0"/>
+      <int name="f" value="0"/>
+      <string name="bS" value="mushCatle"/>
+      <int name="ani" value="0"/>
+      <int name="no" value="7"/>
+    </imgdir>
+    <imgdir name="4">
+      <int name="x" value="-291"/>
+      <int name="y" value="-5"/>
+      <int name="rx" value="-30"/>
+      <int name="ry" value="-30"/>
+      <int name="cx" value="0"/>
+      <int name="cy" value="0"/>
+      <int name="a" value="255"/>
+      <int name="type" value="1"/>
+      <int name="front" value="0"/>
+      <int name="f" value="0"/>
+      <string name="bS" value="mushCatle"/>
+      <int name="ani" value="0"/>
+      <int name="no" value="3"/>
+    </imgdir>
+    <imgdir name="5">
+      <int name="x" value="-249"/>
+      <int name="y" value="-93"/>
+      <int name="rx" value="-50"/>
+      <int name="ry" value="-50"/>
+      <int name="cx" value="0"/>
+      <int name="cy" value="0"/>
+      <int name="a" value="255"/>
+      <int name="type" value="1"/>
+      <int name="front" value="0"/>
+      <int name="f" value="0"/>
+      <string name="bS" value="mushCatle"/>
+      <int name="ani" value="0"/>
+      <int name="no" value="23"/>
+    </imgdir>
+    <imgdir name="6">
+      <int name="x" value="-96"/>
+      <int name="y" value="-140"/>
+      <int name="rx" value="-80"/>
+      <int name="ry" value="-90"/>
+      <int name="cx" value="0"/>
+      <int name="cy" value="0"/>
+      <int name="a" value="255"/>
+      <int name="type" value="1"/>
+      <int name="front" value="0"/>
+      <int name="f" value="0"/>
+      <string name="bS" value="mushCatle"/>
+      <int name="ani" value="0"/>
+      <int name="no" value="24"/>
+    </imgdir>
+    <imgdir name="7">
+      <int name="x" value="-107"/>
+      <int name="y" value="-80"/>
+      <int name="rx" value="-90"/>
+      <int name="ry" value="-100"/>
+      <int name="cx" value="0"/>
+      <int name="cy" value="0"/>
+      <int name="a" value="255"/>
+      <int name="type" value="1"/>
+      <int name="front" value="0"/>
+      <int name="f" value="0"/>
+      <string name="bS" value="mushCatle"/>
+      <int name="ani" value="0"/>
+      <int name="no" value="25"/>
+    </imgdir>
+    <imgdir name="8">
+      <int name="x" value="-29"/>
+      <int name="y" value="-20"/>
+      <int name="rx" value="1"/>
+      <int name="ry" value="-100"/>
+      <int name="cx" value="1500"/>
+      <int name="cy" value="0"/>
+      <int name="a" value="192"/>
+      <int name="type" value="4"/>
+      <int name="front" value="0"/>
+      <int name="f" value="0"/>
+      <string name="bS" value="mushCatle"/>
+      <int name="ani" value="0"/>
+      <int name="no" value="26"/>
+    </imgdir>
+    <imgdir name="9">
+      <int name="x" value="471"/>
+      <int name="y" value="-62"/>
+      <int name="rx" value="1"/>
+      <int name="ry" value="-100"/>
+      <int name="cx" value="1500"/>
+      <int name="cy" value="0"/>
+      <int name="a" value="192"/>
+      <int name="type" value="4"/>
+      <int name="front" value="0"/>
+      <int name="f" value="0"/>
+      <string name="bS" value="mushCatle"/>
+      <int name="ani" value="0"/>
+      <int name="no" value="27"/>
+    </imgdir>
+    <imgdir name="10">
+      <int name="x" value="-529"/>
+      <int name="y" value="-58"/>
+      <int name="rx" value="1"/>
+      <int name="ry" value="-100"/>
+      <int name="cx" value="1500"/>
+      <int name="cy" value="0"/>
+      <int name="a" value="192"/>
+      <int name="type" value="4"/>
+      <int name="front" value="0"/>
+      <int name="f" value="0"/>
+      <string name="bS" value="mushCatle"/>
+      <int name="ani" value="0"/>
+      <int name="no" value="28"/>
+    </imgdir>
+  </imgdir>
   <imgdir name="foothold">
+    <imgdir name="0">
+      <imgdir name="6">
+        <imgdir name="12">
+          <int name="x1" value="265"/>
+          <int name="y1" value="-47"/>
+          <int name="x2" value="278"/>
+          <int name="y2" value="-53"/>
+          <int name="prev" value="0"/>
+          <int name="next" value="15"/>
+        </imgdir>
+        <imgdir name="15">
+          <int name="x1" value="278"/>
+          <int name="y1" value="-53"/>
+          <int name="x2" value="297"/>
+          <int name="y2" value="-53"/>
+          <int name="prev" value="12"/>
+          <int name="next" value="16"/>
+        </imgdir>
+        <imgdir name="16">
+          <int name="x1" value="297"/>
+          <int name="y1" value="-53"/>
+          <int name="x2" value="337"/>
+          <int name="y2" value="-26"/>
+          <int name="prev" value="15"/>
+          <int name="next" value="19"/>
+        </imgdir>
+        <imgdir name="19">
+          <int name="x1" value="337"/>
+          <int name="y1" value="-26"/>
+          <int name="x2" value="375"/>
+          <int name="y2" value="11"/>
+          <int name="prev" value="16"/>
+          <int name="next" value="0"/>
+        </imgdir>
+      </imgdir>
+    </imgdir>
+    <imgdir name="2">
+      <imgdir name="10">
+        <imgdir name="9">
+          <int name="x1" value="150"/>
+          <int name="y1" value="5"/>
+          <int name="x2" value="153"/>
+          <int name="y2" value="5"/>
+          <int name="prev" value="0"/>
+          <int name="next" value="0"/>
+        </imgdir>
+      </imgdir>
+    </imgdir>
     <imgdir name="3">
       <imgdir name="1">
         <imgdir name="1">
-          <int name="x1" value="180"/>
+          <int name="x1" value="-180"/>
           <int name="y1" value="35"/>
-          <int name="x2" value="270"/>
+          <int name="x2" value="-90"/>
           <int name="y2" value="35"/>
-          <int name="prev" value="15"/>
+          <int name="prev" value="0"/>
+          <int name="next" value="3"/>
+        </imgdir>
+        <imgdir name="3">
+          <int name="x1" value="-90"/>
+          <int name="y1" value="35"/>
+          <int name="x2" value="0"/>
+          <int name="y2" value="35"/>
+          <int name="prev" value="1"/>
           <int name="next" value="5"/>
         </imgdir>
-        <imgdir name="2">
-          <int name="x1" value="360"/>
+        <imgdir name="5">
+          <int name="x1" value="0"/>
           <int name="y1" value="35"/>
-          <int name="x2" value="450"/>
+          <int name="x2" value="90"/>
           <int name="y2" value="35"/>
-          <int name="prev" value="5"/>
-          <int name="next" value="4"/>
+          <int name="prev" value="3"/>
+          <int name="next" value="7"/>
         </imgdir>
-        <imgdir name="3">
-          <int name="x1" value="540"/>
+        <imgdir name="7">
+          <int name="x1" value="90"/>
           <int name="y1" value="35"/>
-          <int name="x2" value="630"/>
+          <int name="x2" value="180"/>
           <int name="y2" value="35"/>
-          <int name="prev" value="4"/>
-          <int name="next" value="8"/>
+          <int name="prev" value="5"/>
+          <int name="next" value="10"/>
         </imgdir>
-        <imgdir name="4">
-          <int name="x1" value="450"/>
+        <imgdir name="10">
+          <int name="x1" value="180"/>
           <int name="y1" value="35"/>
-          <int name="x2" value="540"/>
+          <int name="x2" value="270"/>
           <int name="y2" value="35"/>
-          <int name="prev" value="2"/>
-          <int name="next" value="3"/>
+          <int name="prev" value="7"/>
+          <int name="next" value="13"/>
         </imgdir>
-        <imgdir name="5">
+        <imgdir name="13">
           <int name="x1" value="270"/>
           <int name="y1" value="35"/>
           <int name="x2" value="360"/>
           <int name="y2" value="35"/>
-          <int name="prev" value="1"/>
-          <int name="next" value="2"/>
+          <int name="prev" value="10"/>
+          <int name="next" value="20"/>
         </imgdir>
-        <imgdir name="6">
-          <int name="x1" value="-90"/>
+        <imgdir name="20">
+          <int name="x1" value="360"/>
           <int name="y1" value="35"/>
-          <int name="x2" value="0"/>
+          <int name="x2" value="450"/>
           <int name="y2" value="35"/>
-          <int name="prev" value="16"/>
-          <int name="next" value="13"/>
+          <int name="prev" value="13"/>
+          <int name="next" value="24"/>
         </imgdir>
-        <imgdir name="7">
-          <int name="x1" value="720"/>
+        <imgdir name="24">
+          <int name="x1" value="450"/>
           <int name="y1" value="35"/>
-          <int name="x2" value="810"/>
+          <int name="x2" value="540"/>
           <int name="y2" value="35"/>
-          <int name="prev" value="8"/>
-          <int name="next" value="9"/>
+          <int name="prev" value="20"/>
+          <int name="next" value="27"/>
         </imgdir>
-        <imgdir name="8">
+        <imgdir name="27">
+          <int name="x1" value="540"/>
+          <int name="y1" value="35"/>
+          <int name="x2" value="630"/>
+          <int name="y2" value="35"/>
+          <int name="prev" value="24"/>
+          <int name="next" value="29"/>
+        </imgdir>
+        <imgdir name="29">
           <int name="x1" value="630"/>
           <int name="y1" value="35"/>
           <int name="x2" value="720"/>
           <int name="y2" value="35"/>
-          <int name="prev" value="3"/>
-          <int name="next" value="7"/>
+          <int name="prev" value="27"/>
+          <int name="next" value="31"/>
         </imgdir>
-        <imgdir name="9">
+        <imgdir name="31">
+          <int name="x1" value="720"/>
+          <int name="y1" value="35"/>
+          <int name="x2" value="810"/>
+          <int name="y2" value="35"/>
+          <int name="prev" value="29"/>
+          <int name="next" value="33"/>
+        </imgdir>
+        <imgdir name="33">
           <int name="x1" value="810"/>
           <int name="y1" value="35"/>
           <int name="x2" value="900"/>
           <int name="y2" value="35"/>
-          <int name="prev" value="7"/>
-          <int name="next" value="10"/>
+          <int name="prev" value="31"/>
+          <int name="next" value="35"/>
         </imgdir>
-        <imgdir name="10">
+        <imgdir name="35">
           <int name="x1" value="900"/>
           <int name="y1" value="35"/>
           <int name="x2" value="990"/>
           <int name="y2" value="-25"/>
-          <int name="prev" value="9"/>
-          <int name="next" value="12"/>
-        </imgdir>
-        <imgdir name="11">
-          <int name="x1" value="1170"/>
-          <int name="y1" value="-25"/>
-          <int name="x2" value="1260"/>
-          <int name="y2" value="-25"/>
-          <int name="prev" value="14"/>
-          <int name="next" value="17"/>
+          <int name="prev" value="33"/>
+          <int name="next" value="37"/>
         </imgdir>
-        <imgdir name="12">
+        <imgdir name="37">
           <int name="x1" value="990"/>
           <int name="y1" value="-25"/>
           <int name="x2" value="1080"/>
           <int name="y2" value="-25"/>
-          <int name="prev" value="10"/>
-          <int name="next" value="14"/>
-        </imgdir>
-        <imgdir name="13">
-          <int name="x1" value="0"/>
-          <int name="y1" value="35"/>
-          <int name="x2" value="90"/>
-          <int name="y2" value="35"/>
-          <int name="prev" value="6"/>
-          <int name="next" value="15"/>
+          <int name="prev" value="35"/>
+          <int name="next" value="39"/>
         </imgdir>
-        <imgdir name="14">
+        <imgdir name="39">
           <int name="x1" value="1080"/>
           <int name="y1" value="-25"/>
           <int name="x2" value="1170"/>
           <int name="y2" value="-25"/>
-          <int name="prev" value="12"/>
-          <int name="next" value="11"/>
-        </imgdir>
-        <imgdir name="15">
-          <int name="x1" value="90"/>
-          <int name="y1" value="35"/>
-          <int name="x2" value="180"/>
-          <int name="y2" value="35"/>
-          <int name="prev" value="13"/>
-          <int name="next" value="1"/>
+          <int name="prev" value="37"/>
+          <int name="next" value="41"/>
         </imgdir>
-        <imgdir name="16">
-          <int name="x1" value="-180"/>
-          <int name="y1" value="35"/>
-          <int name="x2" value="-90"/>
-          <int name="y2" value="35"/>
-          <int name="prev" value="0"/>
-          <int name="next" value="6"/>
+        <imgdir name="41">
+          <int name="x1" value="1170"/>
+          <int name="y1" value="-25"/>
+          <int name="x2" value="1260"/>
+          <int name="y2" value="-25"/>
+          <int name="prev" value="39"/>
+          <int name="next" value="43"/>
         </imgdir>
-        <imgdir name="17">
+        <imgdir name="43">
           <int name="x1" value="1260"/>
           <int name="y1" value="-25"/>
           <int name="x2" value="1350"/>
           <int name="y2" value="-25"/>
-          <int name="prev" value="11"/>
+          <int name="prev" value="41"/>
           <int name="next" value="0"/>
         </imgdir>
       </imgdir>
       <imgdir name="14">
+        <imgdir name="17">
+          <int name="x1" value="321"/>
+          <int name="y1" value="-85"/>
+          <int name="x2" value="399"/>
+          <int name="y2" value="-85"/>
+          <int name="prev" value="18"/>
+          <int name="next" value="22"/>
+        </imgdir>
         <imgdir name="18">
+          <int name="x1" value="321"/>
+          <int name="y1" value="-73"/>
+          <int name="x2" value="321"/>
+          <int name="y2" value="-85"/>
+          <int name="prev" value="0"/>
+          <int name="next" value="17"/>
+        </imgdir>
+        <imgdir name="22">
+          <int name="x1" value="399"/>
+          <int name="y1" value="-85"/>
+          <int name="x2" value="411"/>
+          <int name="y2" value="-85"/>
+          <int name="prev" value="17"/>
+          <int name="next" value="23"/>
+        </imgdir>
+        <imgdir name="23">
           <int name="x1" value="411"/>
           <int name="y1" value="-85"/>
           <int name="x2" value="489"/>
           <int name="y2" value="-85"/>
           <int name="prev" value="22"/>
-          <int name="next" value="19"/>
+          <int name="next" value="26"/>
         </imgdir>
-        <imgdir name="19">
+        <imgdir name="26">
           <int name="x1" value="489"/>
           <int name="y1" value="-85"/>
           <int name="x2" value="489"/>
           <int name="y2" value="-60"/>
-          <int name="prev" value="18"/>
+          <int name="prev" value="23"/>
           <int name="next" value="0"/>
         </imgdir>
-        <imgdir name="20">
-          <int name="x1" value="321"/>
-          <int name="y1" value="-60"/>
-          <int name="x2" value="321"/>
-          <int name="y2" value="-85"/>
+      </imgdir>
+    </imgdir>
+    <imgdir name="5">
+      <imgdir name="0">
+        <imgdir name="2">
+          <int name="x1" value="-180"/>
+          <int name="y1" value="95"/>
+          <int name="x2" value="-90"/>
+          <int name="y2" value="95"/>
           <int name="prev" value="0"/>
-          <int name="next" value="21"/>
+          <int name="next" value="4"/>
         </imgdir>
-        <imgdir name="21">
-          <int name="x1" value="321"/>
-          <int name="y1" value="-85"/>
-          <int name="x2" value="399"/>
-          <int name="y2" value="-85"/>
-          <int name="prev" value="20"/>
-          <int name="next" value="22"/>
+        <imgdir name="4">
+          <int name="x1" value="-90"/>
+          <int name="y1" value="95"/>
+          <int name="x2" value="0"/>
+          <int name="y2" value="95"/>
+          <int name="prev" value="2"/>
+          <int name="next" value="6"/>
         </imgdir>
-        <imgdir name="22">
-          <int name="x1" value="399"/>
-          <int name="y1" value="-85"/>
-          <int name="x2" value="411"/>
-          <int name="y2" value="-85"/>
-          <int name="prev" value="21"/>
-          <int name="next" value="18"/>
+        <imgdir name="6">
+          <int name="x1" value="0"/>
+          <int name="y1" value="95"/>
+          <int name="x2" value="90"/>
+          <int name="y2" value="95"/>
+          <int name="prev" value="4"/>
+          <int name="next" value="8"/>
         </imgdir>
-      </imgdir>
-    </imgdir>
-    <imgdir name="5">
-      <imgdir name="0">
-        <imgdir name="23">
+        <imgdir name="8">
           <int name="x1" value="90"/>
           <int name="y1" value="95"/>
           <int name="x2" value="180"/>
           <int name="y2" value="95"/>
-          <int name="prev" value="37"/>
-          <int name="next" value="32"/>
-        </imgdir>
-        <imgdir name="24">
-          <int name="x1" value="630"/>
-          <int name="y1" value="155"/>
-          <int name="x2" value="720"/>
-          <int name="y2" value="155"/>
-          <int name="prev" value="29"/>
-          <int name="next" value="26"/>
+          <int name="prev" value="6"/>
+          <int name="next" value="11"/>
         </imgdir>
-        <imgdir name="25">
-          <int name="x1" value="900"/>
-          <int name="y1" value="215"/>
-          <int name="x2" value="990"/>
-          <int name="y2" value="215"/>
-          <int name="prev" value="27"/>
-          <int name="next" value="33"/>
+        <imgdir name="11">
+          <int name="x1" value="180"/>
+          <int name="y1" value="95"/>
+          <int name="x2" value="270"/>
+          <int name="y2" value="95"/>
+          <int name="prev" value="8"/>
+          <int name="next" value="14"/>
         </imgdir>
-        <imgdir name="26">
-          <int name="x1" value="720"/>
-          <int name="y1" value="155"/>
-          <int name="x2" value="810"/>
-          <int name="y2" value="215"/>
-          <int name="prev" value="24"/>
-          <int name="next" value="27"/>
+        <imgdir name="14">
+          <int name="x1" value="270"/>
+          <int name="y1" value="95"/>
+          <int name="x2" value="360"/>
+          <int name="y2" value="95"/>
+          <int name="prev" value="11"/>
+          <int name="next" value="21"/>
         </imgdir>
-        <imgdir name="27">
-          <int name="x1" value="810"/>
-          <int name="y1" value="215"/>
-          <int name="x2" value="900"/>
-          <int name="y2" value="215"/>
-          <int name="prev" value="26"/>
+        <imgdir name="21">
+          <int name="x1" value="360"/>
+          <int name="y1" value="95"/>
+          <int name="x2" value="450"/>
+          <int name="y2" value="95"/>
+          <int name="prev" value="14"/>
           <int name="next" value="25"/>
         </imgdir>
-        <imgdir name="28">
+        <imgdir name="25">
           <int name="x1" value="450"/>
           <int name="y1" value="95"/>
           <int name="x2" value="540"/>
           <int name="y2" value="155"/>
-          <int name="prev" value="30"/>
-          <int name="next" value="29"/>
+          <int name="prev" value="21"/>
+          <int name="next" value="28"/>
         </imgdir>
-        <imgdir name="29">
+        <imgdir name="28">
           <int name="x1" value="540"/>
           <int name="y1" value="155"/>
           <int name="x2" value="630"/>
           <int name="y2" value="155"/>
-          <int name="prev" value="28"/>
-          <int name="next" value="24"/>
+          <int name="prev" value="25"/>
+          <int name="next" value="30"/>
         </imgdir>
         <imgdir name="30">
-          <int name="x1" value="360"/>
-          <int name="y1" value="95"/>
-          <int name="x2" value="450"/>
-          <int name="y2" value="95"/>
-          <int name="prev" value="31"/>
-          <int name="next" value="28"/>
+          <int name="x1" value="630"/>
+          <int name="y1" value="155"/>
+          <int name="x2" value="720"/>
+          <int name="y2" value="155"/>
+          <int name="prev" value="28"/>
+          <int name="next" value="32"/>
         </imgdir>
-        <imgdir name="31">
-          <int name="x1" value="270"/>
-          <int name="y1" value="95"/>
-          <int name="x2" value="360"/>
-          <int name="y2" value="95"/>
+        <imgdir name="32">
+          <int name="x1" value="720"/>
+          <int name="y1" value="155"/>
+          <int name="x2" value="810"/>
+          <int name="y2" value="215"/>
+          <int name="prev" value="30"/>
+          <int name="next" value="34"/>
+        </imgdir>
+        <imgdir name="34">
+          <int name="x1" value="810"/>
+          <int name="y1" value="215"/>
+          <int name="x2" value="900"/>
+          <int name="y2" value="215"/>
           <int name="prev" value="32"/>
-          <int name="next" value="30"/>
+          <int name="next" value="36"/>
         </imgdir>
-        <imgdir name="32">
-          <int name="x1" value="180"/>
-          <int name="y1" value="95"/>
-          <int name="x2" value="270"/>
-          <int name="y2" value="95"/>
-          <int name="prev" value="23"/>
-          <int name="next" value="31"/>
+        <imgdir name="36">
+          <int name="x1" value="900"/>
+          <int name="y1" value="215"/>
+          <int name="x2" value="990"/>
+          <int name="y2" value="215"/>
+          <int name="prev" value="34"/>
+          <int name="next" value="38"/>
         </imgdir>
-        <imgdir name="33">
+        <imgdir name="38">
           <int name="x1" value="990"/>
           <int name="y1" value="215"/>
           <int name="x2" value="1080"/>
           <int name="y2" value="275"/>
-          <int name="prev" value="25"/>
-          <int name="next" value="35"/>
+          <int name="prev" value="36"/>
+          <int name="next" value="40"/>
         </imgdir>
-        <imgdir name="34">
-          <int name="x1" value="1170"/>
+        <imgdir name="40">
+          <int name="x1" value="1080"/>
           <int name="y1" value="275"/>
-          <int name="x2" value="1260"/>
+          <int name="x2" value="1170"/>
           <int name="y2" value="275"/>
-          <int name="prev" value="35"/>
-          <int name="next" value="36"/>
+          <int name="prev" value="38"/>
+          <int name="next" value="42"/>
         </imgdir>
-        <imgdir name="35">
-          <int name="x1" value="1080"/>
+        <imgdir name="42">
+          <int name="x1" value="1170"/>
           <int name="y1" value="275"/>
-          <int name="x2" value="1170"/>
+          <int name="x2" value="1260"/>
           <int name="y2" value="275"/>
-          <int name="prev" value="33"/>
-          <int name="next" value="34"/>
+          <int name="prev" value="40"/>
+          <int name="next" value="44"/>
         </imgdir>
-        <imgdir name="36">
+        <imgdir name="44">
           <int name="x1" value="1260"/>
           <int name="y1" value="275"/>
           <int name="x2" value="1350"/>
           <int name="y2" value="275"/>
-          <int name="prev" value="34"/>
-          <int name="next" value="0"/>
-        </imgdir>
-        <imgdir name="37">
-          <int name="x1" value="0"/>
-          <int name="y1" value="95"/>
-          <int name="x2" value="90"/>
-          <int name="y2" value="95"/>
-          <int name="prev" value="39"/>
-          <int name="next" value="23"/>
-        </imgdir>
-        <imgdir name="38">
-          <int name="x1" value="-180"/>
-          <int name="y1" value="95"/>
-          <int name="x2" value="-90"/>
-          <int name="y2" value="95"/>
-          <int name="prev" value="0"/>
-          <int name="next" value="39"/>
-        </imgdir>
-        <imgdir name="39">
-          <int name="x1" value="-90"/>
-          <int name="y1" value="95"/>
-          <int name="x2" value="0"/>
-          <int name="y2" value="95"/>
-          <int name="prev" value="38"/>
-          <int name="next" value="37"/>
-        </imgdir>
-      </imgdir>
-    </imgdir>
-    <imgdir name="2">
-      <imgdir name="10">
-        <imgdir name="40">
-          <int name="x1" value="149"/>
-          <int name="y1" value="5"/>
-          <int name="x2" value="151"/>
-          <int name="y2" value="5"/>
-          <int name="prev" value="0"/>
+          <int name="prev" value="42"/>
           <int name="next" value="0"/>
         </imgdir>
       </imgdir>
     </imgdir>
   </imgdir>
-  <imgdir name="ladderRope">
-  </imgdir>
-  <imgdir name="miniMap">
-    <canvas name="canvas" width="109" height="63">
-    </canvas>
-    <int name="width" value="1757"/>
-    <int name="height" value="1022"/>
-    <int name="centerX" value="320"/>
-    <int name="centerY" value="528"/>
-    <int name="mag" value="4"/>
-  </imgdir>
-  <imgdir name="portal">
+  <imgdir name="life">
     <imgdir name="0">
-      <string name="pn" value="sp"/>
-      <int name="pt" value="0"/>
-      <int name="x" value="1067"/>
-      <int name="y" value="236"/>
-      <int name="tm" value="999999999"/>
-      <string name="tn" value=""/>
-      <int name="horizontalImpact" value="0"/>
+      <string name="id" value="1300007"/>
+      <int name="x" value="869"/>
+      <int name="y" value="207"/>
+      <int name="cy" value="214"/>
+      <int name="mobTime" value="0"/>
+      <int name="rx0" value="819"/>
+      <int name="rx1" value="919"/>
+      <int name="f" value="0"/>
+      <string name="type" value="n"/>
+      <int name="fh" value="34"/>
     </imgdir>
     <imgdir name="1">
-      <string name="pn" value="pt00"/>
-      <int name="pt" value="1"/>
-      <int name="x" value="1122"/>
-      <int name="y" value="-33"/>
-      <int name="tm" value="999999999"/>
-      <string name="tn" value=""/>
-      <int name="horizontalImpact" value="0"/>
+      <string name="id" value="1300000"/>
+      <int name="x" value="137"/>
+      <int name="y" value="-29"/>
+      <int name="cy" value="-28"/>
+      <int name="mobTime" value="0"/>
+      <int name="rx0" value="407"/>
+      <int name="rx1" value="407"/>
+      <int name="f" value="1"/>
+      <string name="type" value="n"/>
+      <int name="fh" value="9"/>
     </imgdir>
     <imgdir name="2">
-      <string name="pn" value="right00"/>
-      <int name="pt" value="2"/>
-      <int name="x" value="1212"/>
-      <int name="y" value="-24"/>
-      <int name="tm" value="106020100"/>
-      <string name="tn" value="left00"/>
-      <int name="horizontalImpact" value="0"/>
+      <string name="id" value="1300003"/>
+      <int name="x" value="265"/>
+      <int name="y" value="27"/>
+      <int name="cy" value="34"/>
+      <int name="mobTime" value="0"/>
+      <int name="rx0" value="215"/>
+      <int name="rx1" value="315"/>
+      <int name="f" value="0"/>
+      <string name="type" value="n"/>
+      <int name="fh" value="10"/>
     </imgdir>
     <imgdir name="3">
-      <string name="pn" value="left00"/>
-      <int name="pt" value="1"/>
-      <int name="x" value="1230"/>
-      <int name="y" value="273"/>
-      <int name="tm" value="100000002"/>
-      <string name="tn" value="TD00"/>
-      <int name="horizontalImpact" value="0"/>
+      <string name="id" value="1300004"/>
+      <int name="x" value="-45"/>
+      <int name="y" value="26"/>
+      <int name="cy" value="34"/>
+      <int name="mobTime" value="0"/>
+      <int name="rx0" value="67"/>
+      <int name="rx1" value="167"/>
+      <int name="f" value="1"/>
+      <string name="type" value="n"/>
+      <int name="fh" value="3"/>
+    </imgdir>
+    <imgdir name="4">
+      <string name="id" value="1300005"/>
+      <int name="x" value="1018"/>
+      <int name="y" value="-32"/>
+      <int name="cy" value="-26"/>
+      <int name="mobTime" value="0"/>
+      <int name="rx0" value="968"/>
+      <int name="rx1" value="1068"/>
+      <int name="f" value="0"/>
+      <string name="type" value="n"/>
+      <int name="fh" value="37"/>
+    </imgdir>
+    <imgdir name="5">
+      <string name="id" value="1301000"/>
+      <int name="x" value="599"/>
+      <int name="y" value="30"/>
+      <int name="cy" value="34"/>
+      <int name="mobTime" value="0"/>
+      <int name="rx0" value="549"/>
+      <int name="rx1" value="649"/>
+      <int name="f" value="0"/>
+      <string name="type" value="n"/>
+      <int name="fh" value="27"/>
     </imgdir>
   </imgdir>
 </imgdir>
diff --git a/wz/Map.wz/Map/Map6/677000011.img.xml b/wz/Map.wz/Map/Map6/677000011.img.xml
index 2391d516f..d05451a2e 100644
--- a/wz/Map.wz/Map/Map6/677000011.img.xml
+++ b/wz/Map.wz/Map/Map6/677000011.img.xml
@@ -1,3984 +1,3961 @@
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
 <imgdir name="677000011.img">
   <imgdir name="info">
-    <int name="version" value="10"/>
+    <string name="bgm" value="Bgm00/SleepyWood"/>
     <int name="cloud" value="0"/>
-    <int name="town" value="0"/>
     <int name="swim" value="0"/>
-    <int name="returnMap" value="105050400"/>
     <int name="forcedReturn" value="999999999"/>
-    <float name="mobRate" value="1.0"/>
-    <string name="bgm" value="Bgm00/SleepyWood"/>
-    <string name="mapMark" value="Dungeon"/>
     <int name="hideMinimap" value="1"/>
+    <string name="mapMark" value="Dungeon"/>
+    <float name="mobRate" value="1.0"/>
+    <int name="returnMap" value="105050400"/>
+    <int name="town" value="0"/>
+    <int name="version" value="10"/>
     <int name="fieldLimit" value="3068"/>
     <int name="decHP" value="420"/>
     <int name="protectItem" value="1003036"/>
   </imgdir>
-  <imgdir name="back">
-    <imgdir name="0">
-      <string name="bS" value="poisonForest"/>
-      <int name="front" value="0"/>
-      <int name="ani" value="0"/>
-      <int name="no" value="0"/>
-      <int name="f" value="0"/>
-      <int name="x" value="-229"/>
-      <int name="y" value="-22"/>
-      <int name="rx" value="0"/>
-      <int name="ry" value="0"/>
-      <int name="type" value="1"/>
-      <int name="cx" value="0"/>
-      <int name="cy" value="0"/>
-      <int name="a" value="255"/>
-    </imgdir>
-    <imgdir name="1">
-      <string name="bS" value="poisonForest"/>
-      <int name="front" value="0"/>
-      <int name="ani" value="0"/>
-      <int name="no" value="1"/>
-      <int name="f" value="0"/>
-      <int name="x" value="-32"/>
-      <int name="y" value="-22"/>
-      <int name="rx" value="0"/>
-      <int name="ry" value="0"/>
-      <int name="type" value="1"/>
-      <int name="cx" value="0"/>
-      <int name="cy" value="0"/>
-      <int name="a" value="255"/>
-    </imgdir>
-    <imgdir name="2">
-      <string name="bS" value="poisonForest"/>
-      <int name="front" value="0"/>
-      <int name="ani" value="0"/>
-      <int name="no" value="3"/>
-      <int name="f" value="0"/>
-      <int name="x" value="-154"/>
-      <int name="y" value="-16"/>
-      <int name="rx" value="0"/>
-      <int name="ry" value="0"/>
-      <int name="type" value="1"/>
-      <int name="cx" value="0"/>
-      <int name="cy" value="0"/>
-      <int name="a" value="255"/>
-    </imgdir>
-  </imgdir>
-  <imgdir name="life">
-    <imgdir name="0">
-      <string name="type" value="m"/>
-      <string name="id" value="9400609"/>
-      <int name="x" value="310"/>
-      <int name="y" value="145"/>
-      <int name="mobTime" value="30"/>
-      <int name="f" value="0"/>
-      <int name="hide" value="0"/>
-      <int name="fh" value="11"/>
-      <int name="cy" value="150"/>
-      <int name="rx0" value="-379"/>
-      <int name="rx1" value="1099"/>
-    </imgdir>
-    <imgdir name="1">
-      <string name="type" value="m"/>
-      <string name="id" value="9400609"/>
-      <int name="x" value="432"/>
-      <int name="y" value="-215"/>
-      <int name="mobTime" value="30"/>
-      <int name="f" value="0"/>
-      <int name="hide" value="0"/>
-      <int name="fh" value="123"/>
-      <int name="cy" value="-210"/>
-      <int name="rx0" value="-19"/>
-      <int name="rx1" value="469"/>
-    </imgdir>
-    <imgdir name="2">
-      <string name="type" value="m"/>
-      <string name="id" value="9400609"/>
-      <int name="x" value="358"/>
-      <int name="y" value="-575"/>
-      <int name="mobTime" value="30"/>
-      <int name="f" value="0"/>
-      <int name="hide" value="0"/>
-      <int name="fh" value="51"/>
-      <int name="cy" value="-570"/>
-      <int name="rx0" value="71"/>
-      <int name="rx1" value="1099"/>
-    </imgdir>
-    <imgdir name="3">
-      <string name="type" value="m"/>
-      <string name="id" value="9400609"/>
-      <int name="x" value="-158"/>
-      <int name="y" value="-934"/>
-      <int name="mobTime" value="30"/>
-      <int name="f" value="0"/>
-      <int name="hide" value="0"/>
-      <int name="fh" value="58"/>
-      <int name="cy" value="-930"/>
-      <int name="rx0" value="-379"/>
-      <int name="rx1" value="739"/>
-    </imgdir>
-    <imgdir name="8">
-      <string name="type" value="m"/>
-      <string name="id" value="9400623"/>
-      <int name="x" value="418"/>
-      <int name="y" value="142"/>
-      <int name="mobTime" value="30"/>
-      <int name="f" value="0"/>
-      <int name="hide" value="0"/>
-      <int name="fh" value="15"/>
-      <int name="cy" value="150"/>
-      <int name="rx0" value="-379"/>
-      <int name="rx1" value="1099"/>
-    </imgdir>
-    <imgdir name="9">
-      <string name="type" value="m"/>
-      <string name="id" value="9400623"/>
-      <int name="x" value="544"/>
-      <int name="y" value="-229"/>
-      <int name="mobTime" value="30"/>
-      <int name="f" value="0"/>
-      <int name="hide" value="0"/>
-      <int name="fh" value="35"/>
-      <int name="cy" value="-210"/>
-      <int name="rx0" value="-379"/>
-      <int name="rx1" value="919"/>
-    </imgdir>
-    <imgdir name="10">
-      <string name="type" value="m"/>
-      <string name="id" value="9400623"/>
-      <int name="x" value="482"/>
-      <int name="y" value="-581"/>
-      <int name="mobTime" value="30"/>
-      <int name="f" value="0"/>
-      <int name="hide" value="0"/>
-      <int name="fh" value="41"/>
-      <int name="cy" value="-570"/>
-      <int name="rx0" value="71"/>
-      <int name="rx1" value="1099"/>
-    </imgdir>
-    <imgdir name="11">
-      <string name="type" value="m"/>
-      <string name="id" value="9400623"/>
-      <int name="x" value="531"/>
-      <int name="y" value="-940"/>
-      <int name="mobTime" value="30"/>
-      <int name="f" value="0"/>
-      <int name="hide" value="0"/>
-      <int name="fh" value="67"/>
-      <int name="cy" value="-930"/>
-      <int name="rx0" value="-379"/>
-      <int name="rx1" value="739"/>
-    </imgdir>
-    <imgdir name="12">
-      <string name="type" value="n"/>
-      <string name="id" value="9201133"/>
-      <int name="x" value="-102"/>
-      <int name="y" value="-1836"/>
-      <int name="mobTime" value="0"/>
-      <int name="f" value="0"/>
-      <int name="hide" value="0"/>
-      <int name="fh" value="105"/>
-      <int name="cy" value="-1830"/>
-      <int name="rx0" value="-152"/>
-      <int name="rx1" value="-52"/>
-    </imgdir>
-    <imgdir name="13">
-      <string name="type" value="m"/>
-      <string name="id" value="9400611"/>
-      <int name="x" value="771"/>
-      <int name="y" value="144"/>
-      <int name="mobTime" value="50"/>
-      <int name="f" value="0"/>
-      <int name="hide" value="0"/>
-      <int name="fh" value="16"/>
-      <int name="cy" value="150"/>
-      <int name="rx0" value="-379"/>
-      <int name="rx1" value="1099"/>
-    </imgdir>
-    <imgdir name="14">
-      <string name="type" value="m"/>
-      <string name="id" value="9400611"/>
-      <int name="x" value="-178"/>
-      <int name="y" value="-218"/>
-      <int name="mobTime" value="50"/>
-      <int name="f" value="0"/>
-      <int name="hide" value="0"/>
-      <int name="fh" value="25"/>
-      <int name="cy" value="-210"/>
-      <int name="rx0" value="-379"/>
-      <int name="rx1" value="919"/>
-    </imgdir>
-    <imgdir name="15">
-      <string name="type" value="m"/>
-      <string name="id" value="9400611"/>
-      <int name="x" value="862"/>
-      <int name="y" value="-573"/>
-      <int name="mobTime" value="50"/>
-      <int name="f" value="0"/>
-      <int name="hide" value="0"/>
-      <int name="fh" value="46"/>
-      <int name="cy" value="-570"/>
-      <int name="rx0" value="71"/>
-      <int name="rx1" value="1099"/>
-    </imgdir>
-    <imgdir name="16">
-      <string name="type" value="m"/>
-      <string name="id" value="9400611"/>
-      <int name="x" value="227"/>
-      <int name="y" value="-975"/>
-      <int name="mobTime" value="50"/>
-      <int name="f" value="0"/>
-      <int name="hide" value="0"/>
-      <int name="fh" value="96"/>
-      <int name="cy" value="-965"/>
-      <int name="rx0" value="-379"/>
-      <int name="rx1" value="739"/>
-    </imgdir>
-    <imgdir name="6">
-      <string name="type" value="m"/>
-      <string name="id" value="9400613"/>
-      <int name="x" value="-41"/>
-      <int name="y" value="-936"/>
-      <int name="mobTime" value="30"/>
-      <int name="f" value="0"/>
-      <int name="hide" value="0"/>
-      <int name="fh" value="60"/>
-      <int name="cy" value="-930"/>
-      <int name="rx0" value="-379"/>
-      <int name="rx1" value="739"/>
-    </imgdir>
-    <imgdir name="5">
-      <string name="type" value="m"/>
-      <string name="id" value="9400613"/>
-      <int name="x" value="757"/>
-      <int name="y" value="-578"/>
-      <int name="mobTime" value="30"/>
-      <int name="f" value="0"/>
-      <int name="hide" value="0"/>
-      <int name="fh" value="45"/>
-      <int name="cy" value="-570"/>
-      <int name="rx0" value="71"/>
-      <int name="rx1" value="1099"/>
-    </imgdir>
-    <imgdir name="4">
-      <string name="type" value="m"/>
-      <string name="id" value="9400613"/>
-      <int name="x" value="670"/>
-      <int name="y" value="-219"/>
-      <int name="mobTime" value="30"/>
-      <int name="f" value="0"/>
-      <int name="hide" value="0"/>
-      <int name="fh" value="36"/>
-      <int name="cy" value="-210"/>
-      <int name="rx0" value="-379"/>
-      <int name="rx1" value="919"/>
-    </imgdir>
-    <imgdir name="17">
-      <string name="type" value="m"/>
-      <string name="id" value="9400612"/>
-      <int name="x" value="376"/>
-      <int name="y" value="-934"/>
-      <int name="mobTime" value="30"/>
-      <int name="f" value="0"/>
-      <int name="hide" value="0"/>
-      <int name="fh" value="64"/>
-      <int name="cy" value="-930"/>
-      <int name="rx0" value="-379"/>
-      <int name="rx1" value="739"/>
-    </imgdir>
-    <imgdir name="18">
-      <string name="type" value="m"/>
-      <string name="id" value="9400612"/>
-      <int name="x" value="625"/>
-      <int name="y" value="-572"/>
-      <int name="mobTime" value="30"/>
-      <int name="f" value="0"/>
-      <int name="hide" value="0"/>
-      <int name="fh" value="43"/>
-      <int name="cy" value="-570"/>
-      <int name="rx0" value="71"/>
-      <int name="rx1" value="1099"/>
-    </imgdir>
-    <imgdir name="19">
-      <string name="type" value="m"/>
-      <string name="id" value="9400612"/>
-      <int name="x" value="-47"/>
-      <int name="y" value="-216"/>
-      <int name="mobTime" value="30"/>
-      <int name="f" value="0"/>
-      <int name="hide" value="0"/>
-      <int name="fh" value="30"/>
-      <int name="cy" value="-210"/>
-      <int name="rx0" value="-379"/>
-      <int name="rx1" value="919"/>
-    </imgdir>
-    <imgdir name="20">
-      <string name="type" value="m"/>
-      <string name="id" value="9400612"/>
-      <int name="x" value="526"/>
-      <int name="y" value="144"/>
-      <int name="mobTime" value="30"/>
-      <int name="f" value="0"/>
-      <int name="hide" value="0"/>
-      <int name="fh" value="10"/>
-      <int name="cy" value="150"/>
-      <int name="rx0" value="-379"/>
-      <int name="rx1" value="1099"/>
-    </imgdir>
-    <imgdir name="7">
-      <string name="type" value="m"/>
-      <string name="id" value="9400613"/>
-      <int name="x" value="648"/>
-      <int name="y" value="145"/>
-      <int name="mobTime" value="30"/>
-      <int name="f" value="0"/>
-      <int name="hide" value="0"/>
-      <int name="fh" value="13"/>
-      <int name="cy" value="150"/>
-      <int name="rx0" value="-379"/>
-      <int name="rx1" value="1099"/>
-    </imgdir>
-  </imgdir>
-  <imgdir name="reactor">
+  <imgdir name="miniMap">
+    <canvas name="canvas" width="101" height="195">
+    </canvas>
+    <int name="width" value="1619"/>
+    <int name="height" value="3124"/>
+    <int name="centerX" value="448"/>
+    <int name="centerY" value="2794"/>
+    <int name="mag" value="4"/>
   </imgdir>
   <imgdir name="0">
     <imgdir name="info">
     </imgdir>
-    <imgdir name="tile">
-    </imgdir>
     <imgdir name="obj">
     </imgdir>
+    <imgdir name="tile">
+    </imgdir>
   </imgdir>
   <imgdir name="1">
     <imgdir name="info">
       <string name="tS" value="poisonForest"/>
-      <int name="tSMag" value="1"/>
     </imgdir>
-    <imgdir name="tile">
-      <imgdir name="4">
-        <int name="x" value="-270"/>
-        <int name="y" value="180"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="2"/>
-        <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="6">
-        <int name="x" value="-360"/>
-        <int name="y" value="180"/>
-        <string name="u" value="edU"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="0"/>
+    <imgdir name="obj">
+      <imgdir name="0">
+        <int name="x" value="-100"/>
+        <int name="y" value="-52"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="tree"/>
+        <string name="l2" value="0"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
       <imgdir name="1">
-        <int name="x" value="-360"/>
-        <int name="y" value="180"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="0"/>
+        <int name="x" value="-103"/>
+        <int name="y" value="-451"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="tree"/>
+        <string name="l2" value="7"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
       <imgdir name="2">
-        <int name="x" value="-180"/>
-        <int name="y" value="180"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="0"/>
+        <int name="x" value="-103"/>
+        <int name="y" value="-850"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="tree"/>
+        <string name="l2" value="8"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
       <imgdir name="3">
-        <int name="x" value="-180"/>
-        <int name="y" value="180"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="9">
-        <int name="x" value="-90"/>
-        <int name="y" value="180"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="11">
-        <int name="x" value="0"/>
-        <int name="y" value="180"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="2"/>
-        <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="0">
-        <int name="x" value="-360"/>
-        <int name="y" value="180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="4"/>
-        <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="7">
-        <int name="x" value="-360"/>
-        <int name="y" value="240"/>
-        <string name="u" value="edD"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="0"/>
+        <int name="x" value="-108"/>
+        <int name="y" value="-1248"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="tree"/>
+        <string name="l2" value="9"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
-      <imgdir name="14">
-        <int name="x" value="-360"/>
-        <int name="y" value="240"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="0"/>
+      <imgdir name="4">
+        <int name="x" value="-102"/>
+        <int name="y" value="-1648"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="tree"/>
+        <string name="l2" value="7"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
       <imgdir name="5">
-        <int name="x" value="-270"/>
-        <int name="y" value="180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="5"/>
-        <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="15">
-        <int name="x" value="-360"/>
-        <int name="y" value="180"/>
-        <string name="u" value="enV0"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="18">
-        <int name="x" value="-270"/>
-        <int name="y" value="240"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="16">
-        <int name="x" value="-180"/>
-        <int name="y" value="180"/>
-        <string name="u" value="enV1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="23">
-        <int name="x" value="-180"/>
-        <int name="y" value="240"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="0"/>
+        <int name="x" value="-102"/>
+        <int name="y" value="-2047"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="tree"/>
+        <string name="l2" value="7"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
-      <imgdir name="17">
-        <int name="x" value="-180"/>
-        <int name="y" value="240"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="0"/>
+      <imgdir name="6">
+        <int name="x" value="-108"/>
+        <int name="y" value="-2443"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="tree"/>
+        <string name="l2" value="9"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
-      <imgdir name="21">
-        <int name="x" value="-90"/>
-        <int name="y" value="240"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
+      <imgdir name="7">
+        <int name="x" value="309"/>
+        <int name="y" value="116"/>
+        <int name="z" value="9"/>
         <int name="zM" value="0"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="nature"/>
+        <string name="l2" value="1"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
       <imgdir name="8">
-        <int name="x" value="-90"/>
-        <int name="y" value="180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="3"/>
-        <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="10">
-        <int name="x" value="0"/>
-        <int name="y" value="180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="19">
-        <int name="x" value="-90"/>
-        <int name="y" value="180"/>
-        <string name="u" value="enV0"/>
-        <int name="no" value="0"/>
+        <int name="x" value="418"/>
+        <int name="y" value="98"/>
+        <int name="z" value="9"/>
         <int name="zM" value="0"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="nature"/>
+        <string name="l2" value="2"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
-      <imgdir name="20">
-        <int name="x" value="0"/>
-        <int name="y" value="240"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="0"/>
+      <imgdir name="9">
+        <int name="x" value="718"/>
+        <int name="y" value="-391"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="11"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="tree"/>
+        <string name="l2" value="1"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
-      <imgdir name="29">
-        <int name="x" value="180"/>
-        <int name="y" value="240"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="0"/>
+      <imgdir name="10">
+        <int name="x" value="728"/>
+        <int name="y" value="-789"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="11"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="tree"/>
+        <string name="l2" value="8"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
+      </imgdir>
+      <imgdir name="11">
+        <int name="x" value="722"/>
+        <int name="y" value="-1185"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="11"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="tree"/>
+        <string name="l2" value="9"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
       <imgdir name="12">
-        <int name="x" value="90"/>
-        <int name="y" value="180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="4"/>
-        <int name="zM" value="0"/>
+        <int name="x" value="729"/>
+        <int name="y" value="-1586"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="12"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="tree"/>
+        <string name="l2" value="8"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
       <imgdir name="13">
-        <int name="x" value="90"/>
-        <int name="y" value="180"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="2"/>
-        <int name="zM" value="0"/>
+        <int name="x" value="728"/>
+        <int name="y" value="-1982"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="12"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="tree"/>
+        <string name="l2" value="7"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
-      <imgdir name="24">
-        <int name="x" value="180"/>
-        <int name="y" value="180"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="2"/>
-        <int name="zM" value="0"/>
+      <imgdir name="14">
+        <int name="x" value="728"/>
+        <int name="y" value="-2378"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="12"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="tree"/>
+        <string name="l2" value="8"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
-      <imgdir name="22">
-        <int name="x" value="90"/>
-        <int name="y" value="240"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="0"/>
+      <imgdir name="15">
+        <int name="x" value="141"/>
+        <int name="y" value="-246"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="foot"/>
+        <string name="l2" value="0"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
-      <imgdir name="25">
-        <int name="x" value="180"/>
-        <int name="y" value="180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="0"/>
+      <imgdir name="16">
+        <int name="x" value="269"/>
+        <int name="y" value="-234"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="foot"/>
+        <string name="l2" value="2"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
-      <imgdir name="32">
-        <int name="x" value="270"/>
-        <int name="y" value="180"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="2"/>
-        <int name="zM" value="0"/>
+      <imgdir name="17">
+        <int name="x" value="198"/>
+        <int name="y" value="-229"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="foot"/>
+        <string name="l2" value="5"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
-      <imgdir name="28">
-        <int name="x" value="270"/>
-        <int name="y" value="180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="2"/>
-        <int name="zM" value="0"/>
+      <imgdir name="18">
+        <int name="x" value="104"/>
+        <int name="y" value="-239"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="foot"/>
+        <string name="l2" value="6"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
-      <imgdir name="27">
-        <int name="x" value="270"/>
-        <int name="y" value="240"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="0"/>
+      <imgdir name="19">
+        <int name="x" value="411"/>
+        <int name="y" value="-292"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="nature"/>
+        <string name="l2" value="0"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
-      <imgdir name="42">
-        <int name="x" value="630"/>
-        <int name="y" value="240"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="0"/>
+      <imgdir name="20">
+        <int name="x" value="189"/>
+        <int name="y" value="-649"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="nature"/>
+        <string name="l2" value="0"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
-      <imgdir name="39">
-        <int name="x" value="720"/>
-        <int name="y" value="240"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="0"/>
+      <imgdir name="21">
+        <int name="x" value="284"/>
+        <int name="y" value="-603"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="nature"/>
+        <string name="l2" value="1"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
-      <imgdir name="34">
-        <int name="x" value="360"/>
-        <int name="y" value="240"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="0"/>
+      <imgdir name="22">
+        <int name="x" value="348"/>
+        <int name="y" value="-624"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="nature"/>
+        <string name="l2" value="2"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
-      <imgdir name="36">
-        <int name="x" value="450"/>
-        <int name="y" value="240"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="0"/>
+      <imgdir name="23">
+        <int name="x" value="436"/>
+        <int name="y" value="-639"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="nature"/>
+        <string name="l2" value="3"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
-      <imgdir name="46">
-        <int name="x" value="360"/>
-        <int name="y" value="180"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="0"/>
+      <imgdir name="24">
+        <int name="x" value="549"/>
+        <int name="y" value="-591"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="nature"/>
+        <string name="l2" value="5"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
-      <imgdir name="47">
-        <int name="x" value="630"/>
-        <int name="y" value="180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="0"/>
+      <imgdir name="25">
+        <int name="x" value="573"/>
+        <int name="y" value="-623"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="nature"/>
+        <string name="l2" value="2"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
-      <imgdir name="41">
-        <int name="x" value="630"/>
-        <int name="y" value="180"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="2"/>
-        <int name="zM" value="0"/>
+      <imgdir name="26">
+        <int name="x" value="666"/>
+        <int name="y" value="-650"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="nature"/>
+        <string name="l2" value="0"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
-      <imgdir name="43">
-        <int name="x" value="540"/>
-        <int name="y" value="240"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="0"/>
+      <imgdir name="27">
+        <int name="x" value="785"/>
+        <int name="y" value="-641"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="nature"/>
+        <string name="l2" value="3"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
-      <imgdir name="44">
-        <int name="x" value="540"/>
-        <int name="y" value="180"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="0"/>
+      <imgdir name="28">
+        <int name="x" value="884"/>
+        <int name="y" value="-640"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="nature"/>
+        <string name="l2" value="3"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
-      <imgdir name="45">
-        <int name="x" value="540"/>
-        <int name="y" value="180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="0"/>
+      <imgdir name="29">
+        <int name="x" value="942"/>
+        <int name="y" value="-602"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="nature"/>
+        <string name="l2" value="1"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
       <imgdir name="30">
-        <int name="x" value="360"/>
-        <int name="y" value="180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="4"/>
-        <int name="zM" value="0"/>
+        <int name="x" value="516"/>
+        <int name="y" value="80"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="nature"/>
+        <string name="l2" value="3"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
       <imgdir name="31">
-        <int name="x" value="450"/>
-        <int name="y" value="180"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="0"/>
+        <int name="x" value="68"/>
+        <int name="y" value="-937"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="foot"/>
+        <string name="l2" value="4"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
-      <imgdir name="35">
-        <int name="x" value="450"/>
-        <int name="y" value="180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="3"/>
-        <int name="zM" value="0"/>
+      <imgdir name="32">
+        <int name="x" value="139"/>
+        <int name="y" value="-948"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="foot"/>
+        <string name="l2" value="5"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
-      <imgdir name="48">
-        <int name="x" value="720"/>
-        <int name="y" value="180"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="0"/>
+      <imgdir name="33">
+        <int name="x" value="223"/>
+        <int name="y" value="-945"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="foot"/>
+        <string name="l2" value="3"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
-      <imgdir name="38">
-        <int name="x" value="720"/>
-        <int name="y" value="180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="0"/>
+      <imgdir name="34">
+        <int name="x" value="383"/>
+        <int name="y" value="-1183"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="tree"/>
+        <string name="l2" value="11"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
-      <imgdir name="37">
-        <int name="x" value="810"/>
-        <int name="y" value="180"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="2"/>
-        <int name="zM" value="0"/>
+      <imgdir name="35">
+        <int name="x" value="527"/>
+        <int name="y" value="-1013"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc10"/>
+        <string name="l0" value="poisonForest"/>
+        <string name="l1" value="tree"/>
+        <string name="l2" value="13"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
-      <imgdir name="26">
-        <int name="x" value="810"/>
-        <int name="y" value="240"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="0"/>
+      <imgdir name="36">
+        <int name="x" value="154"/>
+        <int name="y" value="58"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc1"/>
+        <string name="l0" value="darkWood"/>
+        <string name="l1" value="nature"/>
+        <string name="l2" value="0"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
-      <imgdir name="49">
-        <int name="x" value="810"/>
-        <int name="y" value="180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="4"/>
-        <int name="zM" value="0"/>
+      <imgdir name="37">
+        <int name="x" value="233"/>
+        <int name="y" value="40"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc1"/>
+        <string name="l0" value="darkWood"/>
+        <string name="l1" value="nature"/>
+        <string name="l2" value="3"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
-      <imgdir name="33">
-        <int name="x" value="900"/>
-        <int name="y" value="240"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="0"/>
+      <imgdir name="38">
+        <int name="x" value="80"/>
+        <int name="y" value="-4"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc1"/>
+        <string name="l0" value="darkWood"/>
+        <string name="l1" value="nature"/>
+        <string name="l2" value="4"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
-      <imgdir name="50">
-        <int name="x" value="900"/>
-        <int name="y" value="180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="5"/>
-        <int name="zM" value="0"/>
+      <imgdir name="39">
+        <int name="x" value="713"/>
+        <int name="y" value="97"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc1"/>
+        <string name="l0" value="darkWood"/>
+        <string name="l1" value="nature"/>
+        <string name="l2" value="2"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
       <imgdir name="40">
-        <int name="x" value="990"/>
-        <int name="y" value="240"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="0"/>
+        <int name="x" value="775"/>
+        <int name="y" value="86"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc1"/>
+        <string name="l0" value="darkWood"/>
+        <string name="l1" value="nature"/>
+        <string name="l2" value="3"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
-      <imgdir name="53">
-        <int name="x" value="990"/>
+      <imgdir name="41">
+        <int name="x" value="1055"/>
+        <int name="y" value="-30"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="8"/>
+        <string name="oS" value="acc1"/>
+        <string name="l0" value="darkWood"/>
+        <string name="l1" value="nature"/>
+        <string name="l2" value="1"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
+      </imgdir>
+    </imgdir>
+    <imgdir name="tile">
+      <imgdir name="0">
+        <int name="x" value="-360"/>
         <int name="y" value="180"/>
+        <int name="zM" value="0"/>
         <string name="u" value="bsc"/>
         <int name="no" value="4"/>
-        <int name="zM" value="0"/>
       </imgdir>
-      <imgdir name="56">
-        <int name="x" value="1080"/>
-        <int name="y" value="240"/>
-        <string name="u" value="edD"/>
-        <int name="no" value="0"/>
+      <imgdir name="1">
+        <int name="x" value="-360"/>
+        <int name="y" value="180"/>
         <int name="zM" value="0"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="52">
-        <int name="x" value="1080"/>
+      <imgdir name="2">
+        <int name="x" value="-180"/>
         <int name="y" value="180"/>
-        <string name="u" value="enV1"/>
-        <int name="no" value="0"/>
         <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="57">
-        <int name="x" value="900"/>
-        <int name="y" value="120"/>
-        <string name="u" value="edU"/>
+        <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="0"/>
       </imgdir>
-      <imgdir name="61">
-        <int name="x" value="1080"/>
-        <int name="y" value="120"/>
-        <string name="u" value="edU"/>
-        <int name="no" value="0"/>
+      <imgdir name="3">
+        <int name="x" value="-180"/>
+        <int name="y" value="180"/>
         <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="60">
-        <int name="x" value="900"/>
-        <int name="y" value="120"/>
         <string name="u" value="enH0"/>
         <int name="no" value="1"/>
-        <int name="zM" value="0"/>
       </imgdir>
-      <imgdir name="51">
-        <int name="x" value="990"/>
-        <int name="y" value="120"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="2"/>
+      <imgdir name="4">
+        <int name="x" value="-270"/>
+        <int name="y" value="180"/>
         <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="54">
-        <int name="x" value="990"/>
-        <int name="y" value="120"/>
         <string name="u" value="enH0"/>
         <int name="no" value="2"/>
-        <int name="zM" value="0"/>
       </imgdir>
-      <imgdir name="59">
-        <int name="x" value="900"/>
-        <int name="y" value="120"/>
+      <imgdir name="5">
+        <int name="x" value="-270"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="0"/>
         <string name="u" value="bsc"/>
         <int name="no" value="5"/>
-        <int name="zM" value="0"/>
       </imgdir>
-      <imgdir name="55">
-        <int name="x" value="1080"/>
-        <int name="y" value="120"/>
-        <string name="u" value="enV1"/>
-        <int name="no" value="0"/>
+      <imgdir name="6">
+        <int name="x" value="-360"/>
+        <int name="y" value="180"/>
         <int name="zM" value="0"/>
-      </imgdir>
-      <imgdir name="58">
-        <int name="x" value="900"/>
-        <int name="y" value="120"/>
-        <string name="u" value="enV0"/>
+        <string name="u" value="edU"/>
         <int name="no" value="0"/>
-        <int name="zM" value="0"/>
       </imgdir>
-      <imgdir name="63">
+      <imgdir name="7">
         <int name="x" value="-360"/>
-        <int name="y" value="-120"/>
+        <int name="y" value="240"/>
+        <int name="zM" value="0"/>
         <string name="u" value="edD"/>
         <int name="no" value="0"/>
-        <int name="zM" value="2"/>
-      </imgdir>
-      <imgdir name="67">
-        <int name="x" value="-360"/>
-        <int name="y" value="-120"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="2"/>
-      </imgdir>
-      <imgdir name="77">
-        <int name="x" value="0"/>
-        <int name="y" value="-120"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="2"/>
-      </imgdir>
-      <imgdir name="64">
-        <int name="x" value="-270"/>
-        <int name="y" value="-120"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="2"/>
-      </imgdir>
-      <imgdir name="68">
-        <int name="x" value="-180"/>
-        <int name="y" value="-120"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="2"/>
-      </imgdir>
-      <imgdir name="74">
-        <int name="x" value="90"/>
-        <int name="y" value="-120"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="2"/>
-      </imgdir>
-      <imgdir name="75">
-        <int name="x" value="90"/>
-        <int name="y" value="-120"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="2"/>
-        <int name="zM" value="2"/>
       </imgdir>
-      <imgdir name="70">
+      <imgdir name="8">
         <int name="x" value="-90"/>
-        <int name="y" value="-120"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="2"/>
-      </imgdir>
-      <imgdir name="73">
-        <int name="x" value="180"/>
-        <int name="y" value="-120"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="2"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="3"/>
       </imgdir>
-      <imgdir name="72">
-        <int name="x" value="180"/>
-        <int name="y" value="-120"/>
+      <imgdir name="9">
+        <int name="x" value="-90"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="0"/>
         <string name="u" value="enH0"/>
-        <int name="no" value="2"/>
-        <int name="zM" value="2"/>
-      </imgdir>
-      <imgdir name="80">
-        <int name="x" value="-360"/>
-        <int name="y" value="-180"/>
-        <string name="u" value="edU"/>
         <int name="no" value="0"/>
-        <int name="zM" value="2"/>
       </imgdir>
-      <imgdir name="66">
-        <int name="x" value="-360"/>
-        <int name="y" value="-180"/>
+      <imgdir name="10">
+        <int name="x" value="0"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="0"/>
         <string name="u" value="bsc"/>
         <int name="no" value="1"/>
-        <int name="zM" value="2"/>
-      </imgdir>
-      <imgdir name="83">
-        <int name="x" value="-360"/>
-        <int name="y" value="-180"/>
-        <string name="u" value="enV0"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="2"/>
-      </imgdir>
-      <imgdir name="62">
-        <int name="x" value="-360"/>
-        <int name="y" value="-180"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="2"/>
-        <int name="zM" value="2"/>
-      </imgdir>
-      <imgdir name="84">
-        <int name="x" value="-270"/>
-        <int name="y" value="-180"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="2"/>
-      </imgdir>
-      <imgdir name="87">
-        <int name="x" value="-90"/>
-        <int name="y" value="-180"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="2"/>
-        <int name="zM" value="2"/>
       </imgdir>
-      <imgdir name="76">
+      <imgdir name="11">
         <int name="x" value="0"/>
-        <int name="y" value="-180"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="0"/>
         <string name="u" value="enH0"/>
         <int name="no" value="2"/>
-        <int name="zM" value="2"/>
-      </imgdir>
-      <imgdir name="86">
-        <int name="x" value="-90"/>
-        <int name="y" value="-180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="2"/>
-        <int name="zM" value="2"/>
       </imgdir>
-      <imgdir name="71">
+      <imgdir name="12">
         <int name="x" value="90"/>
-        <int name="y" value="-180"/>
-        <string name="u" value="enV1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="2"/>
-      </imgdir>
-      <imgdir name="85">
-        <int name="x" value="-180"/>
-        <int name="y" value="-180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="2"/>
-      </imgdir>
-      <imgdir name="82">
-        <int name="x" value="-270"/>
-        <int name="y" value="-180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="2"/>
-      </imgdir>
-      <imgdir name="81">
-        <int name="x" value="0"/>
-        <int name="y" value="-180"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="0"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="2"/>
-        <int name="zM" value="2"/>
-      </imgdir>
-      <imgdir name="65">
-        <int name="x" value="-180"/>
-        <int name="y" value="-180"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="2"/>
+        <int name="no" value="4"/>
       </imgdir>
-      <imgdir name="90">
+      <imgdir name="13">
         <int name="x" value="90"/>
-        <int name="y" value="-180"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="0"/>
         <string name="u" value="enH0"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="2"/>
+        <int name="no" value="2"/>
       </imgdir>
-      <imgdir name="69">
-        <int name="x" value="90"/>
-        <int name="y" value="-180"/>
+      <imgdir name="14">
+        <int name="x" value="-360"/>
+        <int name="y" value="240"/>
+        <int name="zM" value="0"/>
         <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="2"/>
       </imgdir>
-      <imgdir name="91">
-        <int name="x" value="180"/>
-        <int name="y" value="-180"/>
+      <imgdir name="15">
+        <int name="x" value="-360"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="0"/>
         <string name="u" value="enV0"/>
         <int name="no" value="0"/>
-        <int name="zM" value="2"/>
       </imgdir>
-      <imgdir name="89">
-        <int name="x" value="180"/>
-        <int name="y" value="-180"/>
+      <imgdir name="16">
+        <int name="x" value="-180"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="0"/>
         <string name="u" value="enV1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="2"/>
       </imgdir>
-      <imgdir name="94">
-        <int name="x" value="180"/>
-        <int name="y" value="-180"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="2"/>
+      <imgdir name="17">
+        <int name="x" value="-180"/>
+        <int name="y" value="240"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="88">
-        <int name="x" value="180"/>
-        <int name="y" value="-180"/>
+      <imgdir name="18">
+        <int name="x" value="-270"/>
+        <int name="y" value="240"/>
+        <int name="zM" value="0"/>
         <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="2"/>
       </imgdir>
-      <imgdir name="78">
-        <int name="x" value="270"/>
-        <int name="y" value="-180"/>
+      <imgdir name="19">
+        <int name="x" value="-90"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="0"/>
         <string name="u" value="enV0"/>
         <int name="no" value="0"/>
-        <int name="zM" value="2"/>
       </imgdir>
-      <imgdir name="105">
-        <int name="x" value="450"/>
-        <int name="y" value="-180"/>
-        <string name="u" value="enH0"/>
+      <imgdir name="20">
+        <int name="x" value="0"/>
+        <int name="y" value="240"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="2"/>
       </imgdir>
-      <imgdir name="98">
-        <int name="x" value="360"/>
-        <int name="y" value="-180"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="2"/>
-        <int name="zM" value="2"/>
+      <imgdir name="21">
+        <int name="x" value="-90"/>
+        <int name="y" value="240"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="95">
-        <int name="x" value="270"/>
-        <int name="y" value="-180"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="2"/>
+      <imgdir name="22">
+        <int name="x" value="90"/>
+        <int name="y" value="240"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="102">
-        <int name="x" value="630"/>
-        <int name="y" value="-180"/>
+      <imgdir name="23">
+        <int name="x" value="-180"/>
+        <int name="y" value="240"/>
+        <int name="zM" value="0"/>
         <string name="u" value="enH0"/>
         <int name="no" value="1"/>
-        <int name="zM" value="2"/>
-      </imgdir>
-      <imgdir name="100">
-        <int name="x" value="540"/>
-        <int name="y" value="-180"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="2"/>
-        <int name="zM" value="2"/>
       </imgdir>
-      <imgdir name="104">
-        <int name="x" value="720"/>
-        <int name="y" value="-180"/>
+      <imgdir name="24">
+        <int name="x" value="180"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="0"/>
         <string name="u" value="enH0"/>
         <int name="no" value="2"/>
-        <int name="zM" value="2"/>
-      </imgdir>
-      <imgdir name="92">
-        <int name="x" value="270"/>
-        <int name="y" value="-180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="2"/>
-        <int name="zM" value="2"/>
-      </imgdir>
-      <imgdir name="79">
-        <int name="x" value="270"/>
-        <int name="y" value="-120"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="2"/>
-      </imgdir>
-      <imgdir name="97">
-        <int name="x" value="360"/>
-        <int name="y" value="-180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="4"/>
-        <int name="zM" value="2"/>
-      </imgdir>
-      <imgdir name="109">
-        <int name="x" value="360"/>
-        <int name="y" value="-120"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="2"/>
-      </imgdir>
-      <imgdir name="96">
-        <int name="x" value="450"/>
-        <int name="y" value="-180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="4"/>
-        <int name="zM" value="2"/>
       </imgdir>
-      <imgdir name="99">
-        <int name="x" value="540"/>
-        <int name="y" value="-180"/>
+      <imgdir name="25">
+        <int name="x" value="180"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="0"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="4"/>
-        <int name="zM" value="2"/>
-      </imgdir>
-      <imgdir name="108">
-        <int name="x" value="450"/>
-        <int name="y" value="-120"/>
-        <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="2"/>
       </imgdir>
-      <imgdir name="111">
-        <int name="x" value="540"/>
-        <int name="y" value="-120"/>
+      <imgdir name="26">
+        <int name="x" value="810"/>
+        <int name="y" value="240"/>
+        <int name="zM" value="0"/>
         <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="2"/>
       </imgdir>
-      <imgdir name="93">
-        <int name="x" value="630"/>
-        <int name="y" value="-120"/>
+      <imgdir name="27">
+        <int name="x" value="270"/>
+        <int name="y" value="240"/>
+        <int name="zM" value="0"/>
         <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="2"/>
       </imgdir>
-      <imgdir name="101">
-        <int name="x" value="630"/>
-        <int name="y" value="-180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="4"/>
-        <int name="zM" value="2"/>
-      </imgdir>
-      <imgdir name="103">
-        <int name="x" value="720"/>
-        <int name="y" value="-180"/>
+      <imgdir name="28">
+        <int name="x" value="270"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="0"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="3"/>
-        <int name="zM" value="2"/>
+        <int name="no" value="2"/>
       </imgdir>
-      <imgdir name="110">
-        <int name="x" value="720"/>
-        <int name="y" value="-120"/>
+      <imgdir name="29">
+        <int name="x" value="180"/>
+        <int name="y" value="240"/>
+        <int name="zM" value="0"/>
         <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="2"/>
       </imgdir>
-      <imgdir name="117">
+      <imgdir name="30">
         <int name="x" value="360"/>
-        <int name="y" value="-540"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="6"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="4"/>
       </imgdir>
-      <imgdir name="116">
+      <imgdir name="31">
         <int name="x" value="450"/>
-        <int name="y" value="-540"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="0"/>
         <string name="u" value="enH0"/>
         <int name="no" value="0"/>
-        <int name="zM" value="6"/>
       </imgdir>
-      <imgdir name="120">
-        <int name="x" value="540"/>
-        <int name="y" value="-540"/>
+      <imgdir name="32">
+        <int name="x" value="270"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="0"/>
         <string name="u" value="enH0"/>
         <int name="no" value="2"/>
-        <int name="zM" value="6"/>
       </imgdir>
-      <imgdir name="122">
-        <int name="x" value="630"/>
-        <int name="y" value="-540"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="6"/>
+      <imgdir name="33">
+        <int name="x" value="900"/>
+        <int name="y" value="240"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="115">
+      <imgdir name="34">
+        <int name="x" value="360"/>
+        <int name="y" value="240"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="35">
         <int name="x" value="450"/>
-        <int name="y" value="-540"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="0"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="2"/>
-        <int name="zM" value="6"/>
+        <int name="no" value="3"/>
       </imgdir>
-      <imgdir name="129">
+      <imgdir name="36">
         <int name="x" value="450"/>
-        <int name="y" value="-480"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="6"/>
-      </imgdir>
-      <imgdir name="128">
-        <int name="x" value="540"/>
-        <int name="y" value="-480"/>
+        <int name="y" value="240"/>
+        <int name="zM" value="0"/>
         <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="6"/>
       </imgdir>
-      <imgdir name="118">
-        <int name="x" value="360"/>
-        <int name="y" value="-540"/>
+      <imgdir name="37">
+        <int name="x" value="810"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="2"/>
+      </imgdir>
+      <imgdir name="38">
+        <int name="x" value="720"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="0"/>
         <string name="u" value="bsc"/>
+        <int name="no" value="1"/>
+      </imgdir>
+      <imgdir name="39">
+        <int name="x" value="720"/>
+        <int name="y" value="240"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="6"/>
       </imgdir>
-      <imgdir name="127">
-        <int name="x" value="360"/>
-        <int name="y" value="-480"/>
+      <imgdir name="40">
+        <int name="x" value="990"/>
+        <int name="y" value="240"/>
+        <int name="zM" value="0"/>
         <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="6"/>
       </imgdir>
-      <imgdir name="119">
-        <int name="x" value="540"/>
-        <int name="y" value="-540"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="6"/>
+      <imgdir name="41">
+        <int name="x" value="630"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="2"/>
       </imgdir>
-      <imgdir name="121">
+      <imgdir name="42">
         <int name="x" value="630"/>
-        <int name="y" value="-540"/>
-        <string name="u" value="bsc"/>
+        <int name="y" value="240"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="6"/>
       </imgdir>
-      <imgdir name="126">
-        <int name="x" value="630"/>
-        <int name="y" value="-480"/>
+      <imgdir name="43">
+        <int name="x" value="540"/>
+        <int name="y" value="240"/>
+        <int name="zM" value="0"/>
         <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="6"/>
       </imgdir>
-      <imgdir name="137">
-        <int name="x" value="900"/>
-        <int name="y" value="-540"/>
+      <imgdir name="44">
+        <int name="x" value="540"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="0"/>
         <string name="u" value="enH0"/>
-        <int name="no" value="2"/>
-        <int name="zM" value="6"/>
+        <int name="no" value="1"/>
       </imgdir>
-      <imgdir name="134">
-        <int name="x" value="810"/>
-        <int name="y" value="-540"/>
-        <string name="u" value="enH0"/>
+      <imgdir name="45">
+        <int name="x" value="540"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
         <int name="no" value="1"/>
-        <int name="zM" value="6"/>
       </imgdir>
-      <imgdir name="131">
-        <int name="x" value="720"/>
-        <int name="y" value="-540"/>
+      <imgdir name="46">
+        <int name="x" value="360"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="0"/>
         <string name="u" value="enH0"/>
-        <int name="no" value="2"/>
-        <int name="zM" value="6"/>
-      </imgdir>
-      <imgdir name="138">
-        <int name="x" value="1080"/>
-        <int name="y" value="-540"/>
-        <string name="u" value="edU"/>
         <int name="no" value="0"/>
-        <int name="zM" value="6"/>
       </imgdir>
-      <imgdir name="136">
-        <int name="x" value="990"/>
-        <int name="y" value="-540"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="6"/>
+      <imgdir name="47">
+        <int name="x" value="630"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="1"/>
       </imgdir>
-      <imgdir name="125">
+      <imgdir name="48">
         <int name="x" value="720"/>
-        <int name="y" value="-480"/>
-        <string name="u" value="enH1"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="enH0"/>
         <int name="no" value="0"/>
-        <int name="zM" value="6"/>
       </imgdir>
-      <imgdir name="141">
+      <imgdir name="49">
         <int name="x" value="810"/>
-        <int name="y" value="-480"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="6"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="4"/>
       </imgdir>
-      <imgdir name="123">
-        <int name="x" value="720"/>
-        <int name="y" value="-540"/>
+      <imgdir name="50">
+        <int name="x" value="900"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="0"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="6"/>
+        <int name="no" value="5"/>
       </imgdir>
-      <imgdir name="133">
-        <int name="x" value="810"/>
-        <int name="y" value="-540"/>
+      <imgdir name="51">
+        <int name="x" value="990"/>
+        <int name="y" value="120"/>
+        <int name="zM" value="0"/>
         <string name="u" value="bsc"/>
         <int name="no" value="2"/>
-        <int name="zM" value="6"/>
       </imgdir>
-      <imgdir name="140">
-        <int name="x" value="900"/>
-        <int name="y" value="-480"/>
-        <string name="u" value="enH1"/>
+      <imgdir name="52">
+        <int name="x" value="1080"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="enV1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="6"/>
       </imgdir>
-      <imgdir name="142">
+      <imgdir name="53">
         <int name="x" value="990"/>
-        <int name="y" value="-480"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="6"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="4"/>
       </imgdir>
-      <imgdir name="135">
+      <imgdir name="54">
         <int name="x" value="990"/>
-        <int name="y" value="-540"/>
-        <string name="u" value="bsc"/>
+        <int name="y" value="120"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="enH0"/>
         <int name="no" value="2"/>
-        <int name="zM" value="6"/>
       </imgdir>
-      <imgdir name="139">
+      <imgdir name="55">
         <int name="x" value="1080"/>
-        <int name="y" value="-540"/>
+        <int name="y" value="120"/>
+        <int name="zM" value="0"/>
         <string name="u" value="enV1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="6"/>
       </imgdir>
-      <imgdir name="132">
+      <imgdir name="56">
+        <int name="x" value="1080"/>
+        <int name="y" value="240"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="edD"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="57">
         <int name="x" value="900"/>
-        <int name="y" value="-540"/>
+        <int name="y" value="120"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="edU"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="58">
+        <int name="x" value="900"/>
+        <int name="y" value="120"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="enV0"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="59">
+        <int name="x" value="900"/>
+        <int name="y" value="120"/>
+        <int name="zM" value="0"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="3"/>
-        <int name="zM" value="6"/>
+        <int name="no" value="5"/>
       </imgdir>
-      <imgdir name="124">
+      <imgdir name="60">
+        <int name="x" value="900"/>
+        <int name="y" value="120"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="1"/>
+      </imgdir>
+      <imgdir name="61">
         <int name="x" value="1080"/>
-        <int name="y" value="-480"/>
-        <string name="u" value="edD"/>
+        <int name="y" value="120"/>
+        <int name="zM" value="0"/>
+        <string name="u" value="edU"/>
         <int name="no" value="0"/>
-        <int name="zM" value="6"/>
       </imgdir>
-      <imgdir name="145">
-        <int name="x" value="270"/>
-        <int name="y" value="-540"/>
+      <imgdir name="62">
+        <int name="x" value="-360"/>
+        <int name="y" value="-180"/>
+        <int name="zM" value="2"/>
         <string name="u" value="enH0"/>
         <int name="no" value="2"/>
-        <int name="zM" value="6"/>
       </imgdir>
-      <imgdir name="130">
-        <int name="x" value="270"/>
-        <int name="y" value="-480"/>
+      <imgdir name="63">
+        <int name="x" value="-360"/>
+        <int name="y" value="-120"/>
+        <int name="zM" value="2"/>
+        <string name="u" value="edD"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="64">
+        <int name="x" value="-270"/>
+        <int name="y" value="-120"/>
+        <int name="zM" value="2"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="65">
+        <int name="x" value="-180"/>
+        <int name="y" value="-180"/>
+        <int name="zM" value="2"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="66">
+        <int name="x" value="-360"/>
+        <int name="y" value="-180"/>
+        <int name="zM" value="2"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="1"/>
+      </imgdir>
+      <imgdir name="67">
+        <int name="x" value="-360"/>
+        <int name="y" value="-120"/>
+        <int name="zM" value="2"/>
         <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="6"/>
       </imgdir>
-      <imgdir name="113">
-        <int name="x" value="270"/>
-        <int name="y" value="-540"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="4"/>
-        <int name="zM" value="6"/>
-      </imgdir>
-      <imgdir name="148">
-        <int name="x" value="180"/>
-        <int name="y" value="-540"/>
-        <string name="u" value="enH0"/>
+      <imgdir name="68">
+        <int name="x" value="-180"/>
+        <int name="y" value="-120"/>
+        <int name="zM" value="2"/>
+        <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="6"/>
       </imgdir>
-      <imgdir name="149">
+      <imgdir name="69">
         <int name="x" value="90"/>
-        <int name="y" value="-540"/>
-        <string name="u" value="edU"/>
+        <int name="y" value="-180"/>
+        <int name="zM" value="2"/>
+        <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="6"/>
       </imgdir>
-      <imgdir name="147">
+      <imgdir name="70">
+        <int name="x" value="-90"/>
+        <int name="y" value="-120"/>
+        <int name="zM" value="2"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="71">
         <int name="x" value="90"/>
-        <int name="y" value="-540"/>
+        <int name="y" value="-180"/>
+        <int name="zM" value="2"/>
+        <string name="u" value="enV1"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="72">
+        <int name="x" value="180"/>
+        <int name="y" value="-120"/>
+        <int name="zM" value="2"/>
         <string name="u" value="enH0"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="6"/>
+        <int name="no" value="2"/>
       </imgdir>
-      <imgdir name="151">
+      <imgdir name="73">
         <int name="x" value="180"/>
-        <int name="y" value="-480"/>
+        <int name="y" value="-120"/>
+        <int name="zM" value="2"/>
         <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="6"/>
       </imgdir>
-      <imgdir name="114">
+      <imgdir name="74">
         <int name="x" value="90"/>
-        <int name="y" value="-480"/>
+        <int name="y" value="-120"/>
+        <int name="zM" value="2"/>
         <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="6"/>
-      </imgdir>
-      <imgdir name="143">
-        <int name="x" value="180"/>
-        <int name="y" value="-540"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="6"/>
       </imgdir>
-      <imgdir name="146">
+      <imgdir name="75">
         <int name="x" value="90"/>
-        <int name="y" value="-540"/>
-        <string name="u" value="bsc"/>
+        <int name="y" value="-120"/>
+        <int name="zM" value="2"/>
+        <string name="u" value="enH0"/>
         <int name="no" value="2"/>
-        <int name="zM" value="6"/>
       </imgdir>
-      <imgdir name="150">
-        <int name="x" value="90"/>
-        <int name="y" value="-540"/>
+      <imgdir name="76">
+        <int name="x" value="0"/>
+        <int name="y" value="-180"/>
+        <int name="zM" value="2"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="2"/>
+      </imgdir>
+      <imgdir name="77">
+        <int name="x" value="0"/>
+        <int name="y" value="-120"/>
+        <int name="zM" value="2"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="78">
+        <int name="x" value="270"/>
+        <int name="y" value="-180"/>
+        <int name="zM" value="2"/>
         <string name="u" value="enV0"/>
         <int name="no" value="0"/>
-        <int name="zM" value="6"/>
       </imgdir>
-      <imgdir name="144">
-        <int name="x" value="90"/>
-        <int name="y" value="-480"/>
-        <string name="u" value="edD"/>
+      <imgdir name="79">
+        <int name="x" value="270"/>
+        <int name="y" value="-120"/>
+        <int name="zM" value="2"/>
+        <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="6"/>
       </imgdir>
-      <imgdir name="152">
-        <int name="x" value="900"/>
+      <imgdir name="80">
+        <int name="x" value="-360"/>
         <int name="y" value="-180"/>
+        <int name="zM" value="2"/>
         <string name="u" value="edU"/>
         <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="81">
+        <int name="x" value="0"/>
+        <int name="y" value="-180"/>
         <int name="zM" value="2"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="2"/>
       </imgdir>
-      <imgdir name="154">
-        <int name="x" value="810"/>
+      <imgdir name="82">
+        <int name="x" value="-270"/>
         <int name="y" value="-180"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="1"/>
         <int name="zM" value="2"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="1"/>
       </imgdir>
-      <imgdir name="153">
-        <int name="x" value="900"/>
+      <imgdir name="83">
+        <int name="x" value="-360"/>
         <int name="y" value="-180"/>
-        <string name="u" value="enV1"/>
+        <int name="zM" value="2"/>
+        <string name="u" value="enV0"/>
         <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="84">
+        <int name="x" value="-270"/>
+        <int name="y" value="-180"/>
         <int name="zM" value="2"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="1"/>
       </imgdir>
-      <imgdir name="106">
-        <int name="x" value="810"/>
+      <imgdir name="85">
+        <int name="x" value="-180"/>
         <int name="y" value="-180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="2"/>
         <int name="zM" value="2"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="1"/>
       </imgdir>
-      <imgdir name="107">
-        <int name="x" value="900"/>
-        <int name="y" value="-120"/>
-        <string name="u" value="edD"/>
-        <int name="no" value="0"/>
+      <imgdir name="86">
+        <int name="x" value="-90"/>
+        <int name="y" value="-180"/>
         <int name="zM" value="2"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="2"/>
       </imgdir>
-      <imgdir name="112">
-        <int name="x" value="810"/>
-        <int name="y" value="-120"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
+      <imgdir name="87">
+        <int name="x" value="-90"/>
+        <int name="y" value="-180"/>
         <int name="zM" value="2"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="2"/>
       </imgdir>
-      <imgdir name="155">
-        <int name="x" value="-360"/>
-        <int name="y" value="-900"/>
-        <string name="u" value="edU"/>
+      <imgdir name="88">
+        <int name="x" value="180"/>
+        <int name="y" value="-180"/>
+        <int name="zM" value="2"/>
+        <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="8"/>
       </imgdir>
-      <imgdir name="161">
-        <int name="x" value="-270"/>
-        <int name="y" value="-900"/>
-        <string name="u" value="enH0"/>
+      <imgdir name="89">
+        <int name="x" value="180"/>
+        <int name="y" value="-180"/>
+        <int name="zM" value="2"/>
+        <string name="u" value="enV1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="8"/>
-      </imgdir>
-      <imgdir name="158">
-        <int name="x" value="-360"/>
-        <int name="y" value="-900"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="2"/>
-        <int name="zM" value="8"/>
       </imgdir>
-      <imgdir name="160">
-        <int name="x" value="-180"/>
-        <int name="y" value="-900"/>
+      <imgdir name="90">
+        <int name="x" value="90"/>
+        <int name="y" value="-180"/>
+        <int name="zM" value="2"/>
         <string name="u" value="enH0"/>
         <int name="no" value="1"/>
-        <int name="zM" value="8"/>
       </imgdir>
-      <imgdir name="166">
-        <int name="x" value="-360"/>
-        <int name="y" value="-840"/>
-        <string name="u" value="edD"/>
+      <imgdir name="91">
+        <int name="x" value="180"/>
+        <int name="y" value="-180"/>
+        <int name="zM" value="2"/>
+        <string name="u" value="enV0"/>
         <int name="no" value="0"/>
-        <int name="zM" value="8"/>
       </imgdir>
-      <imgdir name="157">
-        <int name="x" value="-360"/>
-        <int name="y" value="-900"/>
+      <imgdir name="92">
+        <int name="x" value="270"/>
+        <int name="y" value="-180"/>
+        <int name="zM" value="2"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="8"/>
+        <int name="no" value="2"/>
       </imgdir>
-      <imgdir name="156">
-        <int name="x" value="-360"/>
-        <int name="y" value="-840"/>
+      <imgdir name="93">
+        <int name="x" value="630"/>
+        <int name="y" value="-120"/>
+        <int name="zM" value="2"/>
         <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="8"/>
       </imgdir>
-      <imgdir name="165">
-        <int name="x" value="-360"/>
-        <int name="y" value="-900"/>
-        <string name="u" value="enV0"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="8"/>
+      <imgdir name="94">
+        <int name="x" value="180"/>
+        <int name="y" value="-180"/>
+        <int name="zM" value="2"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="1"/>
       </imgdir>
-      <imgdir name="168">
-        <int name="x" value="-270"/>
-        <int name="y" value="-840"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="8"/>
+      <imgdir name="95">
+        <int name="x" value="270"/>
+        <int name="y" value="-180"/>
+        <int name="zM" value="2"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="1"/>
       </imgdir>
-      <imgdir name="159">
-        <int name="x" value="-180"/>
-        <int name="y" value="-900"/>
+      <imgdir name="96">
+        <int name="x" value="450"/>
+        <int name="y" value="-180"/>
+        <int name="zM" value="2"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="2"/>
-        <int name="zM" value="8"/>
+        <int name="no" value="4"/>
       </imgdir>
-      <imgdir name="162">
-        <int name="x" value="-270"/>
-        <int name="y" value="-900"/>
+      <imgdir name="97">
+        <int name="x" value="360"/>
+        <int name="y" value="-180"/>
+        <int name="zM" value="2"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="5"/>
-        <int name="zM" value="8"/>
-      </imgdir>
-      <imgdir name="169">
-        <int name="x" value="-180"/>
-        <int name="y" value="-840"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="8"/>
+        <int name="no" value="4"/>
       </imgdir>
-      <imgdir name="174">
-        <int name="x" value="0"/>
-        <int name="y" value="-900"/>
+      <imgdir name="98">
+        <int name="x" value="360"/>
+        <int name="y" value="-180"/>
+        <int name="zM" value="2"/>
         <string name="u" value="enH0"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="8"/>
+        <int name="no" value="2"/>
       </imgdir>
-      <imgdir name="170">
-        <int name="x" value="-90"/>
-        <int name="y" value="-900"/>
+      <imgdir name="99">
+        <int name="x" value="540"/>
+        <int name="y" value="-180"/>
+        <int name="zM" value="2"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="4"/>
+      </imgdir>
+      <imgdir name="100">
+        <int name="x" value="540"/>
+        <int name="y" value="-180"/>
+        <int name="zM" value="2"/>
         <string name="u" value="enH0"/>
         <int name="no" value="2"/>
-        <int name="zM" value="8"/>
       </imgdir>
-      <imgdir name="173">
-        <int name="x" value="90"/>
-        <int name="y" value="-900"/>
+      <imgdir name="101">
+        <int name="x" value="630"/>
+        <int name="y" value="-180"/>
+        <int name="zM" value="2"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="4"/>
+      </imgdir>
+      <imgdir name="102">
+        <int name="x" value="630"/>
+        <int name="y" value="-180"/>
+        <int name="zM" value="2"/>
         <string name="u" value="enH0"/>
         <int name="no" value="1"/>
-        <int name="zM" value="8"/>
       </imgdir>
-      <imgdir name="167">
-        <int name="x" value="-90"/>
-        <int name="y" value="-840"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="8"/>
-      </imgdir>
-      <imgdir name="171">
-        <int name="x" value="0"/>
-        <int name="y" value="-900"/>
+      <imgdir name="103">
+        <int name="x" value="720"/>
+        <int name="y" value="-180"/>
+        <int name="zM" value="2"/>
         <string name="u" value="bsc"/>
         <int name="no" value="3"/>
-        <int name="zM" value="8"/>
       </imgdir>
-      <imgdir name="163">
-        <int name="x" value="-90"/>
-        <int name="y" value="-900"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="8"/>
+      <imgdir name="104">
+        <int name="x" value="720"/>
+        <int name="y" value="-180"/>
+        <int name="zM" value="2"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="2"/>
       </imgdir>
-      <imgdir name="172">
-        <int name="x" value="90"/>
-        <int name="y" value="-900"/>
+      <imgdir name="105">
+        <int name="x" value="450"/>
+        <int name="y" value="-180"/>
+        <int name="zM" value="2"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="106">
+        <int name="x" value="810"/>
+        <int name="y" value="-180"/>
+        <int name="zM" value="2"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="3"/>
-        <int name="zM" value="8"/>
+        <int name="no" value="2"/>
       </imgdir>
-      <imgdir name="164">
-        <int name="x" value="0"/>
-        <int name="y" value="-840"/>
-        <string name="u" value="enH1"/>
+      <imgdir name="107">
+        <int name="x" value="900"/>
+        <int name="y" value="-120"/>
+        <int name="zM" value="2"/>
+        <string name="u" value="edD"/>
         <int name="no" value="0"/>
-        <int name="zM" value="8"/>
       </imgdir>
-      <imgdir name="177">
-        <int name="x" value="90"/>
-        <int name="y" value="-840"/>
+      <imgdir name="108">
+        <int name="x" value="450"/>
+        <int name="y" value="-120"/>
+        <int name="zM" value="2"/>
         <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="8"/>
-      </imgdir>
-      <imgdir name="183">
-        <int name="x" value="270"/>
-        <int name="y" value="-900"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="2"/>
-        <int name="zM" value="8"/>
       </imgdir>
-      <imgdir name="182">
+      <imgdir name="109">
         <int name="x" value="360"/>
-        <int name="y" value="-900"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="2"/>
-        <int name="zM" value="8"/>
+        <int name="y" value="-120"/>
+        <int name="zM" value="2"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="179">
-        <int name="x" value="180"/>
-        <int name="y" value="-900"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="2"/>
-        <int name="zM" value="8"/>
+      <imgdir name="110">
+        <int name="x" value="720"/>
+        <int name="y" value="-120"/>
+        <int name="zM" value="2"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="178">
-        <int name="x" value="180"/>
-        <int name="y" value="-840"/>
+      <imgdir name="111">
+        <int name="x" value="540"/>
+        <int name="y" value="-120"/>
+        <int name="zM" value="2"/>
         <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="8"/>
       </imgdir>
-      <imgdir name="175">
-        <int name="x" value="180"/>
-        <int name="y" value="-900"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="8"/>
+      <imgdir name="112">
+        <int name="x" value="810"/>
+        <int name="y" value="-120"/>
+        <int name="zM" value="2"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="184">
+      <imgdir name="113">
         <int name="x" value="270"/>
-        <int name="y" value="-900"/>
+        <int name="y" value="-540"/>
+        <int name="zM" value="6"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="8"/>
+        <int name="no" value="4"/>
       </imgdir>
-      <imgdir name="186">
-        <int name="x" value="360"/>
-        <int name="y" value="-840"/>
+      <imgdir name="114">
+        <int name="x" value="90"/>
+        <int name="y" value="-480"/>
+        <int name="zM" value="6"/>
         <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="8"/>
       </imgdir>
-      <imgdir name="176">
-        <int name="x" value="270"/>
-        <int name="y" value="-840"/>
-        <string name="u" value="enH1"/>
+      <imgdir name="115">
+        <int name="x" value="450"/>
+        <int name="y" value="-540"/>
+        <int name="zM" value="6"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="2"/>
+      </imgdir>
+      <imgdir name="116">
+        <int name="x" value="450"/>
+        <int name="y" value="-540"/>
+        <int name="zM" value="6"/>
+        <string name="u" value="enH0"/>
         <int name="no" value="0"/>
-        <int name="zM" value="8"/>
       </imgdir>
-      <imgdir name="181">
+      <imgdir name="117">
         <int name="x" value="360"/>
-        <int name="y" value="-900"/>
-        <string name="u" value="bsc"/>
+        <int name="y" value="-540"/>
+        <int name="zM" value="6"/>
+        <string name="u" value="enH0"/>
         <int name="no" value="1"/>
-        <int name="zM" value="8"/>
       </imgdir>
-      <imgdir name="192">
-        <int name="x" value="450"/>
-        <int name="y" value="-900"/>
-        <string name="u" value="enH0"/>
+      <imgdir name="118">
+        <int name="x" value="360"/>
+        <int name="y" value="-540"/>
+        <int name="zM" value="6"/>
+        <string name="u" value="bsc"/>
         <int name="no" value="0"/>
-        <int name="zM" value="8"/>
       </imgdir>
-      <imgdir name="191">
+      <imgdir name="119">
         <int name="x" value="540"/>
-        <int name="y" value="-900"/>
+        <int name="y" value="-540"/>
+        <int name="zM" value="6"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="1"/>
+      </imgdir>
+      <imgdir name="120">
+        <int name="x" value="540"/>
+        <int name="y" value="-540"/>
+        <int name="zM" value="6"/>
         <string name="u" value="enH0"/>
         <int name="no" value="2"/>
-        <int name="zM" value="8"/>
       </imgdir>
-      <imgdir name="187">
-        <int name="x" value="450"/>
-        <int name="y" value="-840"/>
-        <string name="u" value="enH1"/>
+      <imgdir name="121">
+        <int name="x" value="630"/>
+        <int name="y" value="-540"/>
+        <int name="zM" value="6"/>
+        <string name="u" value="bsc"/>
         <int name="no" value="0"/>
-        <int name="zM" value="8"/>
       </imgdir>
-      <imgdir name="190">
-        <int name="x" value="540"/>
-        <int name="y" value="-900"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="5"/>
-        <int name="zM" value="8"/>
+      <imgdir name="122">
+        <int name="x" value="630"/>
+        <int name="y" value="-540"/>
+        <int name="zM" value="6"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="1"/>
       </imgdir>
-      <imgdir name="185">
-        <int name="x" value="450"/>
-        <int name="y" value="-900"/>
+      <imgdir name="123">
+        <int name="x" value="720"/>
+        <int name="y" value="-540"/>
+        <int name="zM" value="6"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="2"/>
-        <int name="zM" value="8"/>
+        <int name="no" value="1"/>
       </imgdir>
-      <imgdir name="193">
-        <int name="x" value="540"/>
-        <int name="y" value="-840"/>
-        <string name="u" value="enH1"/>
+      <imgdir name="124">
+        <int name="x" value="1080"/>
+        <int name="y" value="-480"/>
+        <int name="zM" value="6"/>
+        <string name="u" value="edD"/>
         <int name="no" value="0"/>
-        <int name="zM" value="8"/>
       </imgdir>
-      <imgdir name="194">
+      <imgdir name="125">
         <int name="x" value="720"/>
-        <int name="y" value="-900"/>
-        <string name="u" value="edU"/>
+        <int name="y" value="-480"/>
+        <int name="zM" value="6"/>
+        <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="8"/>
       </imgdir>
-      <imgdir name="196">
+      <imgdir name="126">
         <int name="x" value="630"/>
-        <int name="y" value="-900"/>
-        <string name="u" value="enH0"/>
+        <int name="y" value="-480"/>
+        <int name="zM" value="6"/>
+        <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="8"/>
-      </imgdir>
-      <imgdir name="188">
-        <int name="x" value="630"/>
-        <int name="y" value="-900"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="3"/>
-        <int name="zM" value="8"/>
       </imgdir>
-      <imgdir name="189">
-        <int name="x" value="720"/>
-        <int name="y" value="-840"/>
-        <string name="u" value="edD"/>
+      <imgdir name="127">
+        <int name="x" value="360"/>
+        <int name="y" value="-480"/>
+        <int name="zM" value="6"/>
+        <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="8"/>
       </imgdir>
-      <imgdir name="195">
-        <int name="x" value="630"/>
-        <int name="y" value="-840"/>
+      <imgdir name="128">
+        <int name="x" value="540"/>
+        <int name="y" value="-480"/>
+        <int name="zM" value="6"/>
         <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="8"/>
       </imgdir>
-      <imgdir name="180">
-        <int name="x" value="720"/>
-        <int name="y" value="-900"/>
-        <string name="u" value="enV1"/>
+      <imgdir name="129">
+        <int name="x" value="450"/>
+        <int name="y" value="-480"/>
+        <int name="zM" value="6"/>
+        <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="8"/>
       </imgdir>
-      <imgdir name="199">
-        <int name="x" value="720"/>
-        <int name="y" value="-1140"/>
-        <string name="u" value="edU"/>
+      <imgdir name="130">
+        <int name="x" value="270"/>
+        <int name="y" value="-480"/>
+        <int name="zM" value="6"/>
+        <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="11"/>
       </imgdir>
-      <imgdir name="200">
+      <imgdir name="131">
         <int name="x" value="720"/>
-        <int name="y" value="-1140"/>
-        <string name="u" value="edD"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="11"/>
+        <int name="y" value="-540"/>
+        <int name="zM" value="6"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="2"/>
       </imgdir>
-      <imgdir name="201">
-        <int name="x" value="630"/>
-        <int name="y" value="-1140"/>
+      <imgdir name="132">
+        <int name="x" value="900"/>
+        <int name="y" value="-540"/>
+        <int name="zM" value="6"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="3"/>
+      </imgdir>
+      <imgdir name="133">
+        <int name="x" value="810"/>
+        <int name="y" value="-540"/>
+        <int name="zM" value="6"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="2"/>
+      </imgdir>
+      <imgdir name="134">
+        <int name="x" value="810"/>
+        <int name="y" value="-540"/>
+        <int name="zM" value="6"/>
         <string name="u" value="enH0"/>
+        <int name="no" value="1"/>
+      </imgdir>
+      <imgdir name="135">
+        <int name="x" value="990"/>
+        <int name="y" value="-540"/>
+        <int name="zM" value="6"/>
+        <string name="u" value="bsc"/>
         <int name="no" value="2"/>
-        <int name="zM" value="11"/>
       </imgdir>
-      <imgdir name="202">
-        <int name="x" value="630"/>
-        <int name="y" value="-1140"/>
-        <string name="u" value="enH1"/>
+      <imgdir name="136">
+        <int name="x" value="990"/>
+        <int name="y" value="-540"/>
+        <int name="zM" value="6"/>
+        <string name="u" value="enH0"/>
         <int name="no" value="0"/>
-        <int name="zM" value="11"/>
       </imgdir>
-      <imgdir name="203">
-        <int name="x" value="540"/>
-        <int name="y" value="-1140"/>
+      <imgdir name="137">
+        <int name="x" value="900"/>
+        <int name="y" value="-540"/>
+        <int name="zM" value="6"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="2"/>
+      </imgdir>
+      <imgdir name="138">
+        <int name="x" value="1080"/>
+        <int name="y" value="-540"/>
+        <int name="zM" value="6"/>
         <string name="u" value="edU"/>
         <int name="no" value="0"/>
-        <int name="zM" value="11"/>
       </imgdir>
-      <imgdir name="204">
-        <int name="x" value="540"/>
-        <int name="y" value="-1140"/>
-        <string name="u" value="edD"/>
+      <imgdir name="139">
+        <int name="x" value="1080"/>
+        <int name="y" value="-540"/>
+        <int name="zM" value="6"/>
+        <string name="u" value="enV1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="11"/>
       </imgdir>
-      <imgdir name="197">
-        <int name="x" value="540"/>
-        <int name="y" value="-1140"/>
+      <imgdir name="140">
+        <int name="x" value="900"/>
+        <int name="y" value="-480"/>
+        <int name="zM" value="6"/>
         <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="11"/>
       </imgdir>
-      <imgdir name="198">
-        <int name="x" value="540"/>
-        <int name="y" value="-1140"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="11"/>
+      <imgdir name="141">
+        <int name="x" value="810"/>
+        <int name="y" value="-480"/>
+        <int name="zM" value="6"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="205">
-        <int name="x" value="-270"/>
-        <int name="y" value="-1800"/>
-        <string name="u" value="edU"/>
+      <imgdir name="142">
+        <int name="x" value="990"/>
+        <int name="y" value="-480"/>
+        <int name="zM" value="6"/>
+        <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="13"/>
       </imgdir>
-      <imgdir name="209">
-        <int name="x" value="-270"/>
-        <int name="y" value="-1800"/>
-        <string name="u" value="enH0"/>
+      <imgdir name="143">
+        <int name="x" value="180"/>
+        <int name="y" value="-540"/>
+        <int name="zM" value="6"/>
+        <string name="u" value="bsc"/>
         <int name="no" value="0"/>
-        <int name="zM" value="13"/>
       </imgdir>
-      <imgdir name="208">
-        <int name="x" value="-180"/>
-        <int name="y" value="-1800"/>
-        <string name="u" value="enH0"/>
+      <imgdir name="144">
+        <int name="x" value="90"/>
+        <int name="y" value="-480"/>
+        <int name="zM" value="6"/>
+        <string name="u" value="edD"/>
         <int name="no" value="0"/>
-        <int name="zM" value="13"/>
       </imgdir>
-      <imgdir name="212">
-        <int name="x" value="-90"/>
-        <int name="y" value="-1800"/>
+      <imgdir name="145">
+        <int name="x" value="270"/>
+        <int name="y" value="-540"/>
+        <int name="zM" value="6"/>
         <string name="u" value="enH0"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="13"/>
+        <int name="no" value="2"/>
       </imgdir>
-      <imgdir name="215">
+      <imgdir name="146">
         <int name="x" value="90"/>
-        <int name="y" value="-1800"/>
-        <string name="u" value="edU"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="13"/>
+        <int name="y" value="-540"/>
+        <int name="zM" value="6"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="2"/>
       </imgdir>
-      <imgdir name="214">
-        <int name="x" value="0"/>
-        <int name="y" value="-1800"/>
+      <imgdir name="147">
+        <int name="x" value="90"/>
+        <int name="y" value="-540"/>
+        <int name="zM" value="6"/>
         <string name="u" value="enH0"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="13"/>
+        <int name="no" value="1"/>
       </imgdir>
-      <imgdir name="207">
-        <int name="x" value="-180"/>
-        <int name="y" value="-1800"/>
-        <string name="u" value="bsc"/>
+      <imgdir name="148">
+        <int name="x" value="180"/>
+        <int name="y" value="-540"/>
+        <int name="zM" value="6"/>
+        <string name="u" value="enH0"/>
         <int name="no" value="0"/>
-        <int name="zM" value="13"/>
       </imgdir>
-      <imgdir name="211">
-        <int name="x" value="-90"/>
-        <int name="y" value="-1800"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="5"/>
-        <int name="zM" value="13"/>
+      <imgdir name="149">
+        <int name="x" value="90"/>
+        <int name="y" value="-540"/>
+        <int name="zM" value="6"/>
+        <string name="u" value="edU"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="220">
-        <int name="x" value="-180"/>
-        <int name="y" value="-1740"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="2"/>
-        <int name="zM" value="13"/>
+      <imgdir name="150">
+        <int name="x" value="90"/>
+        <int name="y" value="-540"/>
+        <int name="zM" value="6"/>
+        <string name="u" value="enV0"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="225">
-        <int name="x" value="-180"/>
-        <int name="y" value="-1680"/>
+      <imgdir name="151">
+        <int name="x" value="180"/>
+        <int name="y" value="-480"/>
+        <int name="zM" value="6"/>
         <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="13"/>
       </imgdir>
-      <imgdir name="224">
-        <int name="x" value="-90"/>
-        <int name="y" value="-1680"/>
-        <string name="u" value="enH1"/>
+      <imgdir name="152">
+        <int name="x" value="900"/>
+        <int name="y" value="-180"/>
+        <int name="zM" value="2"/>
+        <string name="u" value="edU"/>
         <int name="no" value="0"/>
-        <int name="zM" value="13"/>
       </imgdir>
-      <imgdir name="217">
-        <int name="x" value="-90"/>
-        <int name="y" value="-1740"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="4"/>
-        <int name="zM" value="13"/>
+      <imgdir name="153">
+        <int name="x" value="900"/>
+        <int name="y" value="-180"/>
+        <int name="zM" value="2"/>
+        <string name="u" value="enV1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="227">
-        <int name="x" value="-270"/>
-        <int name="y" value="-1800"/>
-        <string name="u" value="enV0"/>
+      <imgdir name="154">
+        <int name="x" value="810"/>
+        <int name="y" value="-180"/>
+        <int name="zM" value="2"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="1"/>
+      </imgdir>
+      <imgdir name="155">
+        <int name="x" value="-360"/>
+        <int name="y" value="-900"/>
+        <int name="zM" value="8"/>
+        <string name="u" value="edU"/>
         <int name="no" value="0"/>
-        <int name="zM" value="13"/>
       </imgdir>
-      <imgdir name="226">
-        <int name="x" value="-270"/>
-        <int name="y" value="-1680"/>
+      <imgdir name="156">
+        <int name="x" value="-360"/>
+        <int name="y" value="-840"/>
+        <int name="zM" value="8"/>
         <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="13"/>
       </imgdir>
-      <imgdir name="218">
-        <int name="x" value="-270"/>
-        <int name="y" value="-1740"/>
+      <imgdir name="157">
+        <int name="x" value="-360"/>
+        <int name="y" value="-900"/>
+        <int name="zM" value="8"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="3"/>
-        <int name="zM" value="13"/>
+        <int name="no" value="1"/>
       </imgdir>
-      <imgdir name="210">
-        <int name="x" value="-270"/>
-        <int name="y" value="-1800"/>
+      <imgdir name="158">
+        <int name="x" value="-360"/>
+        <int name="y" value="-900"/>
+        <int name="zM" value="8"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="2"/>
+      </imgdir>
+      <imgdir name="159">
+        <int name="x" value="-180"/>
+        <int name="y" value="-900"/>
+        <int name="zM" value="8"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="3"/>
-        <int name="zM" value="13"/>
+        <int name="no" value="2"/>
       </imgdir>
-      <imgdir name="206">
-        <int name="x" value="-270"/>
-        <int name="y" value="-1680"/>
-        <string name="u" value="edD"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="13"/>
+      <imgdir name="160">
+        <int name="x" value="-180"/>
+        <int name="y" value="-900"/>
+        <int name="zM" value="8"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="1"/>
       </imgdir>
-      <imgdir name="219">
+      <imgdir name="161">
         <int name="x" value="-270"/>
-        <int name="y" value="-1740"/>
-        <string name="u" value="enV0"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="13"/>
-      </imgdir>
-      <imgdir name="216">
-        <int name="x" value="90"/>
-        <int name="y" value="-1800"/>
-        <string name="u" value="enV1"/>
+        <int name="y" value="-900"/>
+        <int name="zM" value="8"/>
+        <string name="u" value="enH0"/>
         <int name="no" value="0"/>
-        <int name="zM" value="13"/>
       </imgdir>
-      <imgdir name="213">
-        <int name="x" value="0"/>
-        <int name="y" value="-1800"/>
+      <imgdir name="162">
+        <int name="x" value="-270"/>
+        <int name="y" value="-900"/>
+        <int name="zM" value="8"/>
         <string name="u" value="bsc"/>
-        <int name="no" value="2"/>
-        <int name="zM" value="13"/>
+        <int name="no" value="5"/>
       </imgdir>
-      <imgdir name="221">
-        <int name="x" value="0"/>
-        <int name="y" value="-1740"/>
+      <imgdir name="163">
+        <int name="x" value="-90"/>
+        <int name="y" value="-900"/>
+        <int name="zM" value="8"/>
         <string name="u" value="bsc"/>
         <int name="no" value="1"/>
-        <int name="zM" value="13"/>
       </imgdir>
-      <imgdir name="222">
+      <imgdir name="164">
         <int name="x" value="0"/>
-        <int name="y" value="-1680"/>
+        <int name="y" value="-840"/>
+        <int name="zM" value="8"/>
         <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="13"/>
       </imgdir>
-      <imgdir name="223">
-        <int name="x" value="90"/>
-        <int name="y" value="-1740"/>
-        <string name="u" value="enV1"/>
+      <imgdir name="165">
+        <int name="x" value="-360"/>
+        <int name="y" value="-900"/>
+        <int name="zM" value="8"/>
+        <string name="u" value="enV0"/>
         <int name="no" value="0"/>
-        <int name="zM" value="13"/>
       </imgdir>
-      <imgdir name="228">
-        <int name="x" value="90"/>
-        <int name="y" value="-1680"/>
+      <imgdir name="166">
+        <int name="x" value="-360"/>
+        <int name="y" value="-840"/>
+        <int name="zM" value="8"/>
         <string name="u" value="edD"/>
         <int name="no" value="0"/>
-        <int name="zM" value="13"/>
       </imgdir>
-    </imgdir>
-    <imgdir name="obj">
-      <imgdir name="0">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="tree"/>
-        <string name="l2" value="0"/>
-        <int name="x" value="-100"/>
-        <int name="y" value="-52"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
+      <imgdir name="167">
+        <int name="x" value="-90"/>
+        <int name="y" value="-840"/>
         <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="1">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="tree"/>
-        <string name="l2" value="7"/>
-        <int name="x" value="-103"/>
-        <int name="y" value="-451"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
+      <imgdir name="168">
+        <int name="x" value="-270"/>
+        <int name="y" value="-840"/>
         <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="2">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="tree"/>
-        <string name="l2" value="8"/>
-        <int name="x" value="-103"/>
-        <int name="y" value="-850"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
+      <imgdir name="169">
+        <int name="x" value="-180"/>
+        <int name="y" value="-840"/>
         <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="3">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="tree"/>
-        <string name="l2" value="9"/>
-        <int name="x" value="-108"/>
-        <int name="y" value="-1248"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
+      <imgdir name="170">
+        <int name="x" value="-90"/>
+        <int name="y" value="-900"/>
         <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="2"/>
       </imgdir>
-      <imgdir name="4">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="tree"/>
-        <string name="l2" value="7"/>
-        <int name="x" value="-102"/>
-        <int name="y" value="-1648"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
+      <imgdir name="171">
+        <int name="x" value="0"/>
+        <int name="y" value="-900"/>
+        <int name="zM" value="8"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="3"/>
+      </imgdir>
+      <imgdir name="172">
+        <int name="x" value="90"/>
+        <int name="y" value="-900"/>
         <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="3"/>
       </imgdir>
-      <imgdir name="5">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="tree"/>
-        <string name="l2" value="7"/>
-        <int name="x" value="-102"/>
-        <int name="y" value="-2047"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
+      <imgdir name="173">
+        <int name="x" value="90"/>
+        <int name="y" value="-900"/>
         <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="1"/>
       </imgdir>
-      <imgdir name="6">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="tree"/>
-        <string name="l2" value="9"/>
-        <int name="x" value="-108"/>
-        <int name="y" value="-2443"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
+      <imgdir name="174">
+        <int name="x" value="0"/>
+        <int name="y" value="-900"/>
         <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="1"/>
       </imgdir>
-      <imgdir name="7">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="nature"/>
-        <string name="l2" value="1"/>
-        <int name="x" value="309"/>
-        <int name="y" value="116"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
-        <int name="zM" value="0"/>
-        <int name="r" value="0"/>
+      <imgdir name="175">
+        <int name="x" value="180"/>
+        <int name="y" value="-900"/>
+        <int name="zM" value="8"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="1"/>
       </imgdir>
-      <imgdir name="8">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="nature"/>
-        <string name="l2" value="2"/>
-        <int name="x" value="418"/>
-        <int name="y" value="98"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
-        <int name="zM" value="0"/>
-        <int name="r" value="0"/>
+      <imgdir name="176">
+        <int name="x" value="270"/>
+        <int name="y" value="-840"/>
+        <int name="zM" value="8"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="9">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="tree"/>
-        <string name="l2" value="1"/>
-        <int name="x" value="718"/>
-        <int name="y" value="-391"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
-        <int name="zM" value="11"/>
-        <int name="r" value="0"/>
+      <imgdir name="177">
+        <int name="x" value="90"/>
+        <int name="y" value="-840"/>
+        <int name="zM" value="8"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="10">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="tree"/>
-        <string name="l2" value="8"/>
-        <int name="x" value="728"/>
-        <int name="y" value="-789"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
-        <int name="zM" value="11"/>
-        <int name="r" value="0"/>
+      <imgdir name="178">
+        <int name="x" value="180"/>
+        <int name="y" value="-840"/>
+        <int name="zM" value="8"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="11">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="tree"/>
-        <string name="l2" value="9"/>
-        <int name="x" value="722"/>
-        <int name="y" value="-1185"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
-        <int name="zM" value="11"/>
-        <int name="r" value="0"/>
+      <imgdir name="179">
+        <int name="x" value="180"/>
+        <int name="y" value="-900"/>
+        <int name="zM" value="8"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="2"/>
       </imgdir>
-      <imgdir name="12">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="tree"/>
-        <string name="l2" value="8"/>
-        <int name="x" value="729"/>
-        <int name="y" value="-1586"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
-        <int name="zM" value="12"/>
-        <int name="r" value="0"/>
+      <imgdir name="180">
+        <int name="x" value="720"/>
+        <int name="y" value="-900"/>
+        <int name="zM" value="8"/>
+        <string name="u" value="enV1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="13">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="tree"/>
-        <string name="l2" value="7"/>
-        <int name="x" value="728"/>
-        <int name="y" value="-1982"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
-        <int name="zM" value="12"/>
-        <int name="r" value="0"/>
+      <imgdir name="181">
+        <int name="x" value="360"/>
+        <int name="y" value="-900"/>
+        <int name="zM" value="8"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="1"/>
       </imgdir>
-      <imgdir name="14">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="tree"/>
-        <string name="l2" value="8"/>
-        <int name="x" value="728"/>
-        <int name="y" value="-2378"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
-        <int name="zM" value="12"/>
-        <int name="r" value="0"/>
+      <imgdir name="182">
+        <int name="x" value="360"/>
+        <int name="y" value="-900"/>
+        <int name="zM" value="8"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="2"/>
       </imgdir>
-      <imgdir name="15">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="foot"/>
-        <string name="l2" value="0"/>
-        <int name="x" value="141"/>
-        <int name="y" value="-246"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
+      <imgdir name="183">
+        <int name="x" value="270"/>
+        <int name="y" value="-900"/>
         <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="2"/>
       </imgdir>
-      <imgdir name="16">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="foot"/>
-        <string name="l2" value="2"/>
-        <int name="x" value="269"/>
-        <int name="y" value="-234"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
+      <imgdir name="184">
+        <int name="x" value="270"/>
+        <int name="y" value="-900"/>
         <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="1"/>
       </imgdir>
-      <imgdir name="17">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="foot"/>
-        <string name="l2" value="5"/>
-        <int name="x" value="198"/>
-        <int name="y" value="-229"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
+      <imgdir name="185">
+        <int name="x" value="450"/>
+        <int name="y" value="-900"/>
         <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="2"/>
       </imgdir>
-      <imgdir name="18">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="foot"/>
-        <string name="l2" value="6"/>
-        <int name="x" value="104"/>
-        <int name="y" value="-239"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
+      <imgdir name="186">
+        <int name="x" value="360"/>
+        <int name="y" value="-840"/>
         <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="19">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="nature"/>
-        <string name="l2" value="0"/>
-        <int name="x" value="411"/>
-        <int name="y" value="-292"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
+      <imgdir name="187">
+        <int name="x" value="450"/>
+        <int name="y" value="-840"/>
         <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="20">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="nature"/>
-        <string name="l2" value="0"/>
-        <int name="x" value="189"/>
-        <int name="y" value="-649"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
+      <imgdir name="188">
+        <int name="x" value="630"/>
+        <int name="y" value="-900"/>
         <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="3"/>
       </imgdir>
-      <imgdir name="21">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="nature"/>
-        <string name="l2" value="1"/>
-        <int name="x" value="284"/>
-        <int name="y" value="-603"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
+      <imgdir name="189">
+        <int name="x" value="720"/>
+        <int name="y" value="-840"/>
         <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+        <string name="u" value="edD"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="22">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="nature"/>
-        <string name="l2" value="2"/>
-        <int name="x" value="348"/>
-        <int name="y" value="-624"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
+      <imgdir name="190">
+        <int name="x" value="540"/>
+        <int name="y" value="-900"/>
         <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="5"/>
       </imgdir>
-      <imgdir name="23">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="nature"/>
-        <string name="l2" value="3"/>
-        <int name="x" value="436"/>
-        <int name="y" value="-639"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
+      <imgdir name="191">
+        <int name="x" value="540"/>
+        <int name="y" value="-900"/>
         <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="2"/>
       </imgdir>
-      <imgdir name="24">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="nature"/>
-        <string name="l2" value="5"/>
-        <int name="x" value="549"/>
-        <int name="y" value="-591"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
+      <imgdir name="192">
+        <int name="x" value="450"/>
+        <int name="y" value="-900"/>
         <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="25">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="nature"/>
-        <string name="l2" value="2"/>
-        <int name="x" value="573"/>
-        <int name="y" value="-623"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
+      <imgdir name="193">
+        <int name="x" value="540"/>
+        <int name="y" value="-840"/>
         <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="26">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="nature"/>
-        <string name="l2" value="0"/>
-        <int name="x" value="666"/>
-        <int name="y" value="-650"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
+      <imgdir name="194">
+        <int name="x" value="720"/>
+        <int name="y" value="-900"/>
         <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+        <string name="u" value="edU"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="27">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="nature"/>
-        <string name="l2" value="3"/>
-        <int name="x" value="785"/>
-        <int name="y" value="-641"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
+      <imgdir name="195">
+        <int name="x" value="630"/>
+        <int name="y" value="-840"/>
         <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="28">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="nature"/>
-        <string name="l2" value="3"/>
-        <int name="x" value="884"/>
-        <int name="y" value="-640"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
+      <imgdir name="196">
+        <int name="x" value="630"/>
+        <int name="y" value="-900"/>
         <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="197">
+        <int name="x" value="540"/>
+        <int name="y" value="-1140"/>
+        <int name="zM" value="11"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="198">
+        <int name="x" value="540"/>
+        <int name="y" value="-1140"/>
+        <int name="zM" value="11"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="1"/>
+      </imgdir>
+      <imgdir name="199">
+        <int name="x" value="720"/>
+        <int name="y" value="-1140"/>
+        <int name="zM" value="11"/>
+        <string name="u" value="edU"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="200">
+        <int name="x" value="720"/>
+        <int name="y" value="-1140"/>
+        <int name="zM" value="11"/>
+        <string name="u" value="edD"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="201">
+        <int name="x" value="630"/>
+        <int name="y" value="-1140"/>
+        <int name="zM" value="11"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="2"/>
+      </imgdir>
+      <imgdir name="202">
+        <int name="x" value="630"/>
+        <int name="y" value="-1140"/>
+        <int name="zM" value="11"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="203">
+        <int name="x" value="540"/>
+        <int name="y" value="-1140"/>
+        <int name="zM" value="11"/>
+        <string name="u" value="edU"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="204">
+        <int name="x" value="540"/>
+        <int name="y" value="-1140"/>
+        <int name="zM" value="11"/>
+        <string name="u" value="edD"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="205">
+        <int name="x" value="-270"/>
+        <int name="y" value="-1800"/>
+        <int name="zM" value="13"/>
+        <string name="u" value="edU"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="206">
+        <int name="x" value="-270"/>
+        <int name="y" value="-1680"/>
+        <int name="zM" value="13"/>
+        <string name="u" value="edD"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="207">
+        <int name="x" value="-180"/>
+        <int name="y" value="-1800"/>
+        <int name="zM" value="13"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="208">
+        <int name="x" value="-180"/>
+        <int name="y" value="-1800"/>
+        <int name="zM" value="13"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="209">
+        <int name="x" value="-270"/>
+        <int name="y" value="-1800"/>
+        <int name="zM" value="13"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="210">
+        <int name="x" value="-270"/>
+        <int name="y" value="-1800"/>
+        <int name="zM" value="13"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="3"/>
+      </imgdir>
+      <imgdir name="211">
+        <int name="x" value="-90"/>
+        <int name="y" value="-1800"/>
+        <int name="zM" value="13"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="5"/>
+      </imgdir>
+      <imgdir name="212">
+        <int name="x" value="-90"/>
+        <int name="y" value="-1800"/>
+        <int name="zM" value="13"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="1"/>
+      </imgdir>
+      <imgdir name="213">
+        <int name="x" value="0"/>
+        <int name="y" value="-1800"/>
+        <int name="zM" value="13"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="2"/>
+      </imgdir>
+      <imgdir name="214">
+        <int name="x" value="0"/>
+        <int name="y" value="-1800"/>
+        <int name="zM" value="13"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="215">
+        <int name="x" value="90"/>
+        <int name="y" value="-1800"/>
+        <int name="zM" value="13"/>
+        <string name="u" value="edU"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="29">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="nature"/>
-        <string name="l2" value="1"/>
-        <int name="x" value="942"/>
-        <int name="y" value="-602"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
-        <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+      <imgdir name="216">
+        <int name="x" value="90"/>
+        <int name="y" value="-1800"/>
+        <int name="zM" value="13"/>
+        <string name="u" value="enV1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="30">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="nature"/>
-        <string name="l2" value="3"/>
-        <int name="x" value="516"/>
-        <int name="y" value="80"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
-        <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+      <imgdir name="217">
+        <int name="x" value="-90"/>
+        <int name="y" value="-1740"/>
+        <int name="zM" value="13"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="4"/>
       </imgdir>
-      <imgdir name="31">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="foot"/>
-        <string name="l2" value="4"/>
-        <int name="x" value="68"/>
-        <int name="y" value="-937"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
-        <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+      <imgdir name="218">
+        <int name="x" value="-270"/>
+        <int name="y" value="-1740"/>
+        <int name="zM" value="13"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="3"/>
       </imgdir>
-      <imgdir name="32">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="foot"/>
-        <string name="l2" value="5"/>
-        <int name="x" value="139"/>
-        <int name="y" value="-948"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
-        <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+      <imgdir name="219">
+        <int name="x" value="-270"/>
+        <int name="y" value="-1740"/>
+        <int name="zM" value="13"/>
+        <string name="u" value="enV0"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="33">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="foot"/>
-        <string name="l2" value="3"/>
-        <int name="x" value="223"/>
-        <int name="y" value="-945"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
-        <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+      <imgdir name="220">
+        <int name="x" value="-180"/>
+        <int name="y" value="-1740"/>
+        <int name="zM" value="13"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="2"/>
       </imgdir>
-      <imgdir name="34">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="tree"/>
-        <string name="l2" value="11"/>
-        <int name="x" value="383"/>
-        <int name="y" value="-1183"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
-        <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+      <imgdir name="221">
+        <int name="x" value="0"/>
+        <int name="y" value="-1740"/>
+        <int name="zM" value="13"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="1"/>
       </imgdir>
-      <imgdir name="35">
-        <string name="oS" value="acc10"/>
-        <string name="l0" value="poisonForest"/>
-        <string name="l1" value="tree"/>
-        <string name="l2" value="13"/>
-        <int name="x" value="527"/>
-        <int name="y" value="-1013"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
-        <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+      <imgdir name="222">
+        <int name="x" value="0"/>
+        <int name="y" value="-1680"/>
+        <int name="zM" value="13"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="36">
-        <string name="oS" value="acc1"/>
-        <string name="l0" value="darkWood"/>
-        <string name="l1" value="nature"/>
-        <string name="l2" value="0"/>
-        <int name="x" value="154"/>
-        <int name="y" value="58"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
-        <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+      <imgdir name="223">
+        <int name="x" value="90"/>
+        <int name="y" value="-1740"/>
+        <int name="zM" value="13"/>
+        <string name="u" value="enV1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="37">
-        <string name="oS" value="acc1"/>
-        <string name="l0" value="darkWood"/>
-        <string name="l1" value="nature"/>
-        <string name="l2" value="3"/>
-        <int name="x" value="233"/>
-        <int name="y" value="40"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
-        <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+      <imgdir name="224">
+        <int name="x" value="-90"/>
+        <int name="y" value="-1680"/>
+        <int name="zM" value="13"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="38">
-        <string name="oS" value="acc1"/>
-        <string name="l0" value="darkWood"/>
-        <string name="l1" value="nature"/>
-        <string name="l2" value="4"/>
-        <int name="x" value="80"/>
-        <int name="y" value="-4"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
-        <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+      <imgdir name="225">
+        <int name="x" value="-180"/>
+        <int name="y" value="-1680"/>
+        <int name="zM" value="13"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="39">
-        <string name="oS" value="acc1"/>
-        <string name="l0" value="darkWood"/>
-        <string name="l1" value="nature"/>
-        <string name="l2" value="2"/>
-        <int name="x" value="713"/>
-        <int name="y" value="97"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
-        <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+      <imgdir name="226">
+        <int name="x" value="-270"/>
+        <int name="y" value="-1680"/>
+        <int name="zM" value="13"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="40">
-        <string name="oS" value="acc1"/>
-        <string name="l0" value="darkWood"/>
-        <string name="l1" value="nature"/>
-        <string name="l2" value="3"/>
-        <int name="x" value="775"/>
-        <int name="y" value="86"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
-        <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+      <imgdir name="227">
+        <int name="x" value="-270"/>
+        <int name="y" value="-1800"/>
+        <int name="zM" value="13"/>
+        <string name="u" value="enV0"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="41">
-        <string name="oS" value="acc1"/>
-        <string name="l0" value="darkWood"/>
-        <string name="l1" value="nature"/>
-        <string name="l2" value="1"/>
-        <int name="x" value="1055"/>
-        <int name="y" value="-30"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
-        <int name="zM" value="8"/>
-        <int name="r" value="0"/>
+      <imgdir name="228">
+        <int name="x" value="90"/>
+        <int name="y" value="-1680"/>
+        <int name="zM" value="13"/>
+        <string name="u" value="edD"/>
+        <int name="no" value="0"/>
       </imgdir>
     </imgdir>
   </imgdir>
   <imgdir name="2">
     <imgdir name="info">
     </imgdir>
-    <imgdir name="tile">
-    </imgdir>
     <imgdir name="obj">
-      <imgdir name="1">
-        <string name="oS" value="connect"/>
-        <string name="l0" value="rope"/>
-        <string name="l1" value="37"/>
-        <string name="l2" value="0"/>
+      <imgdir name="0">
         <int name="x" value="692"/>
         <int name="y" value="-1071"/>
         <int name="z" value="9"/>
-        <int name="f" value="0"/>
         <int name="zM" value="10"/>
-        <int name="r" value="0"/>
-      </imgdir>
-      <imgdir name="2">
         <string name="oS" value="connect"/>
         <string name="l0" value="rope"/>
         <string name="l1" value="37"/>
-        <string name="l2" value="4"/>
+        <string name="l2" value="0"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
+      </imgdir>
+      <imgdir name="1">
         <int name="x" value="693"/>
         <int name="y" value="-1072"/>
         <int name="z" value="9"/>
-        <int name="f" value="0"/>
         <int name="zM" value="10"/>
-        <int name="r" value="0"/>
-      </imgdir>
-      <imgdir name="0">
         <string name="oS" value="connect"/>
         <string name="l0" value="rope"/>
         <string name="l1" value="37"/>
-        <string name="l2" value="3"/>
+        <string name="l2" value="4"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
+      </imgdir>
+      <imgdir name="2">
         <int name="x" value="694"/>
         <int name="y" value="-1072"/>
         <int name="z" value="9"/>
-        <int name="f" value="0"/>
         <int name="zM" value="9"/>
+        <string name="oS" value="connect"/>
+        <string name="l0" value="rope"/>
+        <string name="l1" value="37"/>
+        <string name="l2" value="3"/>
         <int name="r" value="0"/>
+        <int name="f" value="0"/>
       </imgdir>
     </imgdir>
+    <imgdir name="tile">
+    </imgdir>
   </imgdir>
   <imgdir name="3">
     <imgdir name="info">
       <string name="tS" value="poisonForest"/>
-      <int name="tSMag" value="1"/>
+    </imgdir>
+    <imgdir name="obj">
+      <imgdir name="0">
+        <int name="x" value="1052"/>
+        <int name="y" value="-691"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="7"/>
+        <string name="oS" value="acc1"/>
+        <string name="l0" value="darkWood"/>
+        <string name="l1" value="nature"/>
+        <string name="l2" value="1"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
+      </imgdir>
+      <imgdir name="1">
+        <int name="x" value="-323"/>
+        <int name="y" value="-306"/>
+        <int name="z" value="9"/>
+        <int name="zM" value="5"/>
+        <string name="oS" value="acc1"/>
+        <string name="l0" value="darkWood"/>
+        <string name="l1" value="nature"/>
+        <string name="l2" value="0"/>
+        <int name="r" value="0"/>
+        <int name="f" value="0"/>
+      </imgdir>
     </imgdir>
     <imgdir name="tile">
+      <imgdir name="0">
+        <int name="x" value="-90"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="1"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="1">
+        <int name="x" value="-90"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="1"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="1"/>
+      </imgdir>
+      <imgdir name="2">
+        <int name="x" value="-270"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="1"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="4"/>
+      </imgdir>
+      <imgdir name="3">
+        <int name="x" value="-90"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="1"/>
+        <string name="u" value="enV1"/>
+        <int name="no" value="0"/>
+      </imgdir>
       <imgdir name="4">
         <int name="x" value="-180"/>
         <int name="y" value="180"/>
+        <int name="zM" value="1"/>
         <string name="u" value="enH0"/>
         <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="5">
+        <int name="x" value="-180"/>
+        <int name="y" value="180"/>
         <int name="zM" value="1"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="1"/>
       </imgdir>
-      <imgdir name="10">
-        <int name="x" value="90"/>
+      <imgdir name="6">
+        <int name="x" value="0"/>
         <int name="y" value="-180"/>
-        <string name="u" value="enH0"/>
+        <int name="zM" value="3"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="7">
+        <int name="x" value="180"/>
+        <int name="y" value="-120"/>
+        <int name="zM" value="3"/>
+        <string name="u" value="enH1"/>
         <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="8">
+        <int name="x" value="180"/>
+        <int name="y" value="-180"/>
         <int name="zM" value="3"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="5"/>
       </imgdir>
       <imgdir name="9">
         <int name="x" value="180"/>
         <int name="y" value="-180"/>
+        <int name="zM" value="3"/>
         <string name="u" value="enH0"/>
         <int name="no" value="1"/>
-        <int name="zM" value="3"/>
       </imgdir>
-      <imgdir name="15">
+      <imgdir name="10">
         <int name="x" value="90"/>
-        <int name="y" value="-120"/>
-        <string name="u" value="edD"/>
+        <int name="y" value="-180"/>
+        <int name="zM" value="3"/>
+        <string name="u" value="enH0"/>
         <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="11">
+        <int name="x" value="90"/>
+        <int name="y" value="-180"/>
+        <int name="zM" value="3"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="5"/>
+      </imgdir>
+      <imgdir name="12">
+        <int name="x" value="270"/>
+        <int name="y" value="-180"/>
         <int name="zM" value="3"/>
+        <string name="u" value="bsc"/>
+        <int name="no" value="4"/>
+      </imgdir>
+      <imgdir name="13">
+        <int name="x" value="0"/>
+        <int name="y" value="-180"/>
+        <int name="zM" value="3"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="0"/>
       </imgdir>
       <imgdir name="14">
         <int name="x" value="90"/>
         <int name="y" value="-180"/>
+        <int name="zM" value="3"/>
         <string name="u" value="enV0"/>
         <int name="no" value="0"/>
-        <int name="zM" value="3"/>
       </imgdir>
-      <imgdir name="11">
+      <imgdir name="15">
         <int name="x" value="90"/>
-        <int name="y" value="-180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="5"/>
+        <int name="y" value="-120"/>
         <int name="zM" value="3"/>
+        <string name="u" value="edD"/>
+        <int name="no" value="0"/>
       </imgdir>
       <imgdir name="16">
         <int name="x" value="90"/>
         <int name="y" value="-120"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
         <int name="zM" value="3"/>
-      </imgdir>
-      <imgdir name="7">
-        <int name="x" value="180"/>
-        <int name="y" value="-120"/>
         <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="3"/>
-      </imgdir>
-      <imgdir name="8">
-        <int name="x" value="180"/>
-        <int name="y" value="-180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="5"/>
-        <int name="zM" value="3"/>
       </imgdir>
       <imgdir name="17">
         <int name="x" value="360"/>
         <int name="y" value="-120"/>
+        <int name="zM" value="3"/>
         <string name="u" value="edD"/>
         <int name="no" value="0"/>
-        <int name="zM" value="3"/>
-      </imgdir>
-      <imgdir name="22">
-        <int name="x" value="270"/>
-        <int name="y" value="-180"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="2"/>
-        <int name="zM" value="3"/>
       </imgdir>
-      <imgdir name="23">
+      <imgdir name="18">
         <int name="x" value="0"/>
         <int name="y" value="-180"/>
-        <string name="u" value="edU"/>
+        <int name="zM" value="3"/>
+        <string name="u" value="edD"/>
         <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="19">
+        <int name="x" value="270"/>
+        <int name="y" value="-120"/>
         <int name="zM" value="3"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="6">
-        <int name="x" value="0"/>
+      <imgdir name="20">
+        <int name="x" value="360"/>
         <int name="y" value="-180"/>
+        <int name="zM" value="3"/>
         <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="3"/>
       </imgdir>
       <imgdir name="21">
         <int name="x" value="360"/>
         <int name="y" value="-180"/>
+        <int name="zM" value="3"/>
         <string name="u" value="enV1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="3"/>
       </imgdir>
-      <imgdir name="12">
+      <imgdir name="22">
         <int name="x" value="270"/>
         <int name="y" value="-180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="4"/>
         <int name="zM" value="3"/>
-      </imgdir>
-      <imgdir name="13">
-        <int name="x" value="0"/>
-        <int name="y" value="-180"/>
         <string name="u" value="enH0"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="3"/>
+        <int name="no" value="2"/>
       </imgdir>
-      <imgdir name="18">
+      <imgdir name="23">
         <int name="x" value="0"/>
         <int name="y" value="-180"/>
-        <string name="u" value="edD"/>
-        <int name="no" value="0"/>
         <int name="zM" value="3"/>
-      </imgdir>
-      <imgdir name="19">
-        <int name="x" value="270"/>
-        <int name="y" value="-120"/>
-        <string name="u" value="enH1"/>
+        <string name="u" value="edU"/>
         <int name="no" value="0"/>
-        <int name="zM" value="3"/>
       </imgdir>
       <imgdir name="24">
         <int name="x" value="450"/>
         <int name="y" value="-180"/>
+        <int name="zM" value="3"/>
         <string name="u" value="edU"/>
         <int name="no" value="0"/>
-        <int name="zM" value="3"/>
       </imgdir>
       <imgdir name="25">
         <int name="x" value="450"/>
         <int name="y" value="-180"/>
+        <int name="zM" value="3"/>
         <string name="u" value="edD"/>
         <int name="no" value="0"/>
-        <int name="zM" value="3"/>
       </imgdir>
       <imgdir name="26">
         <int name="x" value="360"/>
         <int name="y" value="-180"/>
+        <int name="zM" value="3"/>
         <string name="u" value="enH0"/>
         <int name="no" value="2"/>
-        <int name="zM" value="3"/>
-      </imgdir>
-      <imgdir name="20">
-        <int name="x" value="360"/>
-        <int name="y" value="-180"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="3"/>
       </imgdir>
       <imgdir name="27">
         <int name="x" value="-90"/>
         <int name="y" value="-180"/>
+        <int name="zM" value="4"/>
         <string name="u" value="edU"/>
         <int name="no" value="0"/>
-        <int name="zM" value="4"/>
       </imgdir>
       <imgdir name="28">
         <int name="x" value="-90"/>
         <int name="y" value="-180"/>
+        <int name="zM" value="4"/>
         <string name="u" value="edD"/>
         <int name="no" value="0"/>
-        <int name="zM" value="4"/>
       </imgdir>
       <imgdir name="29">
         <int name="x" value="0"/>
         <int name="y" value="180"/>
+        <int name="zM" value="1"/>
         <string name="u" value="edU"/>
         <int name="no" value="0"/>
-        <int name="zM" value="1"/>
       </imgdir>
       <imgdir name="30">
-        <int name="x" value="0"/>
-        <int name="y" value="180"/>
-        <string name="u" value="edD"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="1"/>
-      </imgdir>
-      <imgdir name="0">
-        <int name="x" value="-90"/>
-        <int name="y" value="180"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="1"/>
-      </imgdir>
-      <imgdir name="1">
-        <int name="x" value="-90"/>
-        <int name="y" value="180"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="1"/>
-      </imgdir>
-      <imgdir name="34">
-        <int name="x" value="-90"/>
-        <int name="y" value="240"/>
-        <string name="u" value="edD"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="1"/>
-      </imgdir>
-      <imgdir name="5">
-        <int name="x" value="-180"/>
-        <int name="y" value="180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="1"/>
-        <int name="zM" value="1"/>
-      </imgdir>
-      <imgdir name="3">
-        <int name="x" value="-90"/>
-        <int name="y" value="180"/>
-        <string name="u" value="enV1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="1"/>
-      </imgdir>
-      <imgdir name="33">
-        <int name="x" value="-180"/>
-        <int name="y" value="240"/>
-        <string name="u" value="enH1"/>
-        <int name="no" value="0"/>
-        <int name="zM" value="1"/>
-      </imgdir>
-      <imgdir name="35">
-        <int name="x" value="-270"/>
+        <int name="x" value="0"/>
         <int name="y" value="180"/>
-        <string name="u" value="edU"/>
-        <int name="no" value="0"/>
         <int name="zM" value="1"/>
+        <string name="u" value="edD"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="37">
+      <imgdir name="31">
         <int name="x" value="-270"/>
-        <int name="y" value="180"/>
-        <string name="u" value="enH0"/>
-        <int name="no" value="1"/>
+        <int name="y" value="240"/>
         <int name="zM" value="1"/>
+        <string name="u" value="edD"/>
+        <int name="no" value="0"/>
       </imgdir>
       <imgdir name="32">
         <int name="x" value="-270"/>
         <int name="y" value="240"/>
+        <int name="zM" value="1"/>
         <string name="u" value="enH1"/>
         <int name="no" value="0"/>
-        <int name="zM" value="1"/>
       </imgdir>
-      <imgdir name="2">
-        <int name="x" value="-270"/>
-        <int name="y" value="180"/>
-        <string name="u" value="bsc"/>
-        <int name="no" value="4"/>
+      <imgdir name="33">
+        <int name="x" value="-180"/>
+        <int name="y" value="240"/>
         <int name="zM" value="1"/>
+        <string name="u" value="enH1"/>
+        <int name="no" value="0"/>
       </imgdir>
-      <imgdir name="31">
-        <int name="x" value="-270"/>
+      <imgdir name="34">
+        <int name="x" value="-90"/>
         <int name="y" value="240"/>
+        <int name="zM" value="1"/>
         <string name="u" value="edD"/>
         <int name="no" value="0"/>
+      </imgdir>
+      <imgdir name="35">
+        <int name="x" value="-270"/>
+        <int name="y" value="180"/>
         <int name="zM" value="1"/>
+        <string name="u" value="edU"/>
+        <int name="no" value="0"/>
       </imgdir>
       <imgdir name="36">
         <int name="x" value="-270"/>
         <int name="y" value="180"/>
+        <int name="zM" value="1"/>
         <string name="u" value="enV0"/>
         <int name="no" value="0"/>
-        <int name="zM" value="1"/>
-      </imgdir>
-    </imgdir>
-    <imgdir name="obj">
-      <imgdir name="1">
-        <string name="oS" value="acc1"/>
-        <string name="l0" value="darkWood"/>
-        <string name="l1" value="nature"/>
-        <string name="l2" value="1"/>
-        <int name="x" value="1052"/>
-        <int name="y" value="-691"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
-        <int name="zM" value="7"/>
-        <int name="r" value="0"/>
       </imgdir>
-      <imgdir name="0">
-        <string name="oS" value="acc1"/>
-        <string name="l0" value="darkWood"/>
-        <string name="l1" value="nature"/>
-        <string name="l2" value="0"/>
-        <int name="x" value="-323"/>
-        <int name="y" value="-306"/>
-        <int name="z" value="9"/>
-        <int name="f" value="0"/>
-        <int name="zM" value="5"/>
-        <int name="r" value="0"/>
+      <imgdir name="37">
+        <int name="x" value="-270"/>
+        <int name="y" value="180"/>
+        <int name="zM" value="1"/>
+        <string name="u" value="enH0"/>
+        <int name="no" value="1"/>
       </imgdir>
     </imgdir>
   </imgdir>
   <imgdir name="4">
     <imgdir name="info">
     </imgdir>
-    <imgdir name="tile">
-    </imgdir>
     <imgdir name="obj">
     </imgdir>
+    <imgdir name="tile">
+    </imgdir>
   </imgdir>
   <imgdir name="5">
     <imgdir name="info">
     </imgdir>
-    <imgdir name="tile">
-    </imgdir>
     <imgdir name="obj">
     </imgdir>
+    <imgdir name="tile">
+    </imgdir>
   </imgdir>
   <imgdir name="6">
     <imgdir name="info">
     </imgdir>
-    <imgdir name="tile">
-    </imgdir>
     <imgdir name="obj">
     </imgdir>
+    <imgdir name="tile">
+    </imgdir>
   </imgdir>
   <imgdir name="7">
     <imgdir name="info">
     </imgdir>
+    <imgdir name="obj">
+    </imgdir>
     <imgdir name="tile">
     </imgdir>
-    <imgdir name="obj">
+  </imgdir>
+  <imgdir name="ladderRope">
+    <imgdir name="1">
+      <int name="x" value="1053"/>
+      <int name="y1" value="-2478"/>
+      <int name="y2" value="-2421"/>
+      <int name="uf" value="0"/>
+      <int name="page" value="2"/>
+      <int name="l" value="0"/>
+    </imgdir>
+    <imgdir name="2">
+      <int name="x" value="1014"/>
+      <int name="y1" value="-2481"/>
+      <int name="y2" value="-2422"/>
+      <int name="uf" value="0"/>
+      <int name="page" value="2"/>
+      <int name="l" value="0"/>
+    </imgdir>
+    <imgdir name="3">
+      <int name="x" value="695"/>
+      <int name="y1" value="-1168"/>
+      <int name="y2" value="-945"/>
+      <int name="uf" value="1"/>
+      <int name="page" value="2"/>
+      <int name="l" value="0"/>
     </imgdir>
   </imgdir>
-  <imgdir name="foothold">
+  <imgdir name="portal">
+    <imgdir name="0">
+      <int name="x" value="-198"/>
+      <int name="y" value="130"/>
+      <int name="pt" value="0"/>
+      <int name="tm" value="999999999"/>
+      <string name="tn" value=""/>
+      <string name="pn" value="sp"/>
+    </imgdir>
     <imgdir name="1">
-      <imgdir name="0">
-        <imgdir name="1">
-          <int name="x1" value="-360"/>
-          <int name="y1" value="150"/>
-          <int name="x2" value="-321"/>
-          <int name="y2" value="150"/>
-          <int name="prev" value="4"/>
-          <int name="next" value="5"/>
-        </imgdir>
-        <imgdir name="2">
-          <int name="x1" value="-180"/>
-          <int name="y1" value="150"/>
-          <int name="x2" value="-90"/>
-          <int name="y2" value="150"/>
-          <int name="prev" value="3"/>
-          <int name="next" value="6"/>
-        </imgdir>
-        <imgdir name="3">
-          <int name="x1" value="-270"/>
-          <int name="y1" value="150"/>
-          <int name="x2" value="-180"/>
-          <int name="y2" value="150"/>
-          <int name="prev" value="5"/>
-          <int name="next" value="2"/>
-        </imgdir>
-        <imgdir name="4">
+      <int name="x" value="1048"/>
+      <int name="y" value="88"/>
+      <int name="pt" value="1"/>
+      <int name="tm" value="677000011"/>
+      <string name="tn" value="in_2nd"/>
+      <string name="pn" value="go_2nd"/>
+    </imgdir>
+    <imgdir name="2">
+      <int name="x" value="765"/>
+      <int name="y" value="-213"/>
+      <int name="pt" value="1"/>
+      <int name="tm" value="677000011"/>
+      <string name="tn" value="go_2nd"/>
+      <string name="pn" value="in_2nd"/>
+    </imgdir>
+    <imgdir name="3">
+      <int name="x" value="-313"/>
+      <int name="y" value="-213"/>
+      <int name="pt" value="1"/>
+      <int name="tm" value="677000011"/>
+      <string name="tn" value="in_3rd"/>
+      <string name="pn" value="go_3rd"/>
+    </imgdir>
+    <imgdir name="4">
+      <int name="x" value="180"/>
+      <int name="y" value="-572"/>
+      <int name="pt" value="1"/>
+      <int name="tm" value="677000011"/>
+      <string name="tn" value="go_3rd"/>
+      <string name="pn" value="in_3rd"/>
+    </imgdir>
+    <imgdir name="5">
+      <int name="x" value="1049"/>
+      <int name="y" value="-573"/>
+      <int name="pt" value="1"/>
+      <int name="tm" value="677000011"/>
+      <string name="tn" value="in_4st"/>
+      <string name="pn" value="go_4st"/>
+    </imgdir>
+    <imgdir name="6">
+      <int name="x" value="-304"/>
+      <int name="y" value="-932"/>
+      <int name="pt" value="1"/>
+      <int name="tm" value="677000011"/>
+      <string name="tn" value="go_4st"/>
+      <string name="pn" value="in_4st"/>
+    </imgdir>
+    <imgdir name="7">
+      <int name="x" value="611"/>
+      <int name="y" value="-1173"/>
+      <int name="pt" value="1"/>
+      <int name="tm" value="677000011"/>
+      <string name="tn" value="in_top"/>
+      <string name="pn" value="go_top"/>
+    </imgdir>
+    <imgdir name="8">
+      <int name="x" value="60"/>
+      <int name="y" value="-1832"/>
+      <int name="pt" value="1"/>
+      <int name="tm" value="677000011"/>
+      <string name="tn" value="go_top"/>
+      <string name="pn" value="in_top"/>
+    </imgdir>
+    <imgdir name="9">
+      <int name="x" value="-335"/>
+      <int name="y" value="141"/>
+      <int name="pt" value="2"/>
+      <int name="tm" value="677000010"/>
+      <string name="tn" value="go_next"/>
+      <string name="pn" value="in_next"/>
+    </imgdir>
+  </imgdir>
+  <imgdir name="reactor">
+  </imgdir>
+  <imgdir name="back">
+    <imgdir name="0">
+      <int name="x" value="-229"/>
+      <int name="y" value="-22"/>
+      <int name="rx" value="0"/>
+      <int name="ry" value="0"/>
+      <int name="cx" value="0"/>
+      <int name="cy" value="0"/>
+      <int name="a" value="255"/>
+      <int name="type" value="1"/>
+      <int name="front" value="0"/>
+      <int name="f" value="0"/>
+      <string name="bS" value="poisonForest"/>
+      <int name="ani" value="0"/>
+      <int name="no" value="0"/>
+    </imgdir>
+    <imgdir name="1">
+      <int name="x" value="-32"/>
+      <int name="y" value="-22"/>
+      <int name="rx" value="0"/>
+      <int name="ry" value="0"/>
+      <int name="cx" value="0"/>
+      <int name="cy" value="0"/>
+      <int name="a" value="255"/>
+      <int name="type" value="1"/>
+      <int name="front" value="0"/>
+      <int name="f" value="0"/>
+      <string name="bS" value="poisonForest"/>
+      <int name="ani" value="0"/>
+      <int name="no" value="1"/>
+    </imgdir>
+    <imgdir name="2">
+      <int name="x" value="-154"/>
+      <int name="y" value="-16"/>
+      <int name="rx" value="0"/>
+      <int name="ry" value="0"/>
+      <int name="cx" value="0"/>
+      <int name="cy" value="0"/>
+      <int name="a" value="255"/>
+      <int name="type" value="1"/>
+      <int name="front" value="0"/>
+      <int name="f" value="0"/>
+      <string name="bS" value="poisonForest"/>
+      <int name="ani" value="0"/>
+      <int name="no" value="3"/>
+    </imgdir>
+  </imgdir>
+  <imgdir name="foothold">
+    <imgdir name="1">
+      <imgdir name="8">
+        <imgdir name="1">
           <int name="x1" value="-399"/>
-          <int name="y1" value="150"/>
-          <int name="x2" value="-360"/>
-          <int name="y2" value="150"/>
+          <int name="y1" value="-930"/>
+          <int name="x2" value="-321"/>
+          <int name="y2" value="-930"/>
           <int name="prev" value="0"/>
-          <int name="next" value="1"/>
+          <int name="next" value="6"/>
         </imgdir>
-        <imgdir name="5">
+        <imgdir name="6">
           <int name="x1" value="-321"/>
-          <int name="y1" value="150"/>
+          <int name="y1" value="-930"/>
           <int name="x2" value="-270"/>
-          <int name="y2" value="150"/>
+          <int name="y2" value="-930"/>
           <int name="prev" value="1"/>
-          <int name="next" value="3"/>
+          <int name="next" value="11"/>
         </imgdir>
-        <imgdir name="6">
+        <imgdir name="11">
+          <int name="x1" value="-270"/>
+          <int name="y1" value="-930"/>
+          <int name="x2" value="-180"/>
+          <int name="y2" value="-930"/>
+          <int name="prev" value="6"/>
+          <int name="next" value="17"/>
+        </imgdir>
+        <imgdir name="17">
+          <int name="x1" value="-180"/>
+          <int name="y1" value="-930"/>
+          <int name="x2" value="-90"/>
+          <int name="y2" value="-930"/>
+          <int name="prev" value="11"/>
+          <int name="next" value="23"/>
+        </imgdir>
+        <imgdir name="23">
           <int name="x1" value="-90"/>
-          <int name="y1" value="150"/>
+          <int name="y1" value="-930"/>
           <int name="x2" value="0"/>
-          <int name="y2" value="150"/>
-          <int name="prev" value="2"/>
-          <int name="next" value="7"/>
+          <int name="y2" value="-930"/>
+          <int name="prev" value="17"/>
+          <int name="next" value="30"/>
         </imgdir>
-        <imgdir name="7">
+        <imgdir name="30">
           <int name="x1" value="0"/>
-          <int name="y1" value="150"/>
+          <int name="y1" value="-930"/>
           <int name="x2" value="90"/>
-          <int name="y2" value="150"/>
-          <int name="prev" value="6"/>
-          <int name="next" value="8"/>
+          <int name="y2" value="-930"/>
+          <int name="prev" value="23"/>
+          <int name="next" value="45"/>
         </imgdir>
-        <imgdir name="8">
+        <imgdir name="35">
+          <int name="x1" value="10"/>
+          <int name="y1" value="-957"/>
+          <int name="x2" value="46"/>
+          <int name="y2" value="-970"/>
+          <int name="prev" value="0"/>
+          <int name="next" value="38"/>
+        </imgdir>
+        <imgdir name="36">
+          <int name="x1" value="20"/>
+          <int name="y1" value="-270"/>
+          <int name="x2" value="69"/>
+          <int name="y2" value="-253"/>
+          <int name="prev" value="0"/>
+          <int name="next" value="41"/>
+        </imgdir>
+        <imgdir name="38">
+          <int name="x1" value="46"/>
+          <int name="y1" value="-970"/>
+          <int name="x2" value="90"/>
+          <int name="y2" value="-971"/>
+          <int name="prev" value="35"/>
+          <int name="next" value="44"/>
+        </imgdir>
+        <imgdir name="41">
+          <int name="x1" value="69"/>
+          <int name="y1" value="-253"/>
+          <int name="x2" value="88"/>
+          <int name="y2" value="-254"/>
+          <int name="prev" value="36"/>
+          <int name="next" value="42"/>
+        </imgdir>
+        <imgdir name="42">
+          <int name="x1" value="88"/>
+          <int name="y1" value="-254"/>
+          <int name="x2" value="100"/>
+          <int name="y2" value="-251"/>
+          <int name="prev" value="41"/>
+          <int name="next" value="50"/>
+        </imgdir>
+        <imgdir name="44">
           <int name="x1" value="90"/>
-          <int name="y1" value="150"/>
+          <int name="y1" value="-971"/>
+          <int name="x2" value="121"/>
+          <int name="y2" value="-963"/>
+          <int name="prev" value="38"/>
+          <int name="next" value="54"/>
+        </imgdir>
+        <imgdir name="45">
+          <int name="x1" value="90"/>
+          <int name="y1" value="-930"/>
           <int name="x2" value="180"/>
-          <int name="y2" value="150"/>
-          <int name="prev" value="7"/>
-          <int name="next" value="9"/>
+          <int name="y2" value="-930"/>
+          <int name="prev" value="30"/>
+          <int name="next" value="63"/>
         </imgdir>
-        <imgdir name="9">
+        <imgdir name="50">
+          <int name="x1" value="100"/>
+          <int name="y1" value="-251"/>
+          <int name="x2" value="111"/>
+          <int name="y2" value="-256"/>
+          <int name="prev" value="42"/>
+          <int name="next" value="52"/>
+        </imgdir>
+        <imgdir name="51">
+          <int name="x1" value="100"/>
+          <int name="y1" value="-251"/>
+          <int name="x2" value="120"/>
+          <int name="y2" value="-248"/>
+          <int name="prev" value="42"/>
+          <int name="next" value="53"/>
+        </imgdir>
+        <imgdir name="52">
+          <int name="x1" value="111"/>
+          <int name="y1" value="-256"/>
+          <int name="x2" value="177"/>
+          <int name="y2" value="-259"/>
+          <int name="prev" value="50"/>
+          <int name="next" value="62"/>
+        </imgdir>
+        <imgdir name="53">
+          <int name="x1" value="120"/>
+          <int name="y1" value="-248"/>
+          <int name="x2" value="141"/>
+          <int name="y2" value="-233"/>
+          <int name="prev" value="51"/>
+          <int name="next" value="57"/>
+        </imgdir>
+        <imgdir name="54">
+          <int name="x1" value="121"/>
+          <int name="y1" value="-963"/>
+          <int name="x2" value="125"/>
+          <int name="y2" value="-963"/>
+          <int name="prev" value="44"/>
+          <int name="next" value="55"/>
+        </imgdir>
+        <imgdir name="55">
+          <int name="x1" value="125"/>
+          <int name="y1" value="-963"/>
+          <int name="x2" value="155"/>
+          <int name="y2" value="-965"/>
+          <int name="prev" value="54"/>
+          <int name="next" value="58"/>
+        </imgdir>
+        <imgdir name="57">
+          <int name="x1" value="141"/>
+          <int name="y1" value="-233"/>
+          <int name="x2" value="161"/>
+          <int name="y2" value="-230"/>
+          <int name="prev" value="53"/>
+          <int name="next" value="59"/>
+        </imgdir>
+        <imgdir name="58">
+          <int name="x1" value="155"/>
+          <int name="y1" value="-965"/>
+          <int name="x2" value="162"/>
+          <int name="y2" value="-964"/>
+          <int name="prev" value="55"/>
+          <int name="next" value="60"/>
+        </imgdir>
+        <imgdir name="59">
+          <int name="x1" value="161"/>
+          <int name="y1" value="-230"/>
+          <int name="x2" value="187"/>
+          <int name="y2" value="-211"/>
+          <int name="prev" value="57"/>
+          <int name="next" value="0"/>
+        </imgdir>
+        <imgdir name="60">
+          <int name="x1" value="162"/>
+          <int name="y1" value="-964"/>
+          <int name="x2" value="181"/>
+          <int name="y2" value="-969"/>
+          <int name="prev" value="58"/>
+          <int name="next" value="68"/>
+        </imgdir>
+        <imgdir name="61">
+          <int name="x1" value="166"/>
+          <int name="y1" value="-237"/>
+          <int name="x2" value="184"/>
+          <int name="y2" value="-244"/>
+          <int name="prev" value="0"/>
+          <int name="next" value="69"/>
+        </imgdir>
+        <imgdir name="62">
+          <int name="x1" value="177"/>
+          <int name="y1" value="-259"/>
+          <int name="x2" value="215"/>
+          <int name="y2" value="-252"/>
+          <int name="prev" value="52"/>
+          <int name="next" value="0"/>
+        </imgdir>
+        <imgdir name="63">
           <int name="x1" value="180"/>
-          <int name="y1" value="150"/>
+          <int name="y1" value="-930"/>
           <int name="x2" value="270"/>
-          <int name="y2" value="150"/>
-          <int name="prev" value="8"/>
-          <int name="next" value="11"/>
+          <int name="y2" value="-930"/>
+          <int name="prev" value="45"/>
+          <int name="next" value="75"/>
+        </imgdir>
+        <imgdir name="68">
+          <int name="x1" value="181"/>
+          <int name="y1" value="-969"/>
+          <int name="x2" value="221"/>
+          <int name="y2" value="-965"/>
+          <int name="prev" value="60"/>
+          <int name="next" value="72"/>
+        </imgdir>
+        <imgdir name="69">
+          <int name="x1" value="184"/>
+          <int name="y1" value="-244"/>
+          <int name="x2" value="214"/>
+          <int name="y2" value="-246"/>
+          <int name="prev" value="61"/>
+          <int name="next" value="71"/>
+        </imgdir>
+        <imgdir name="70">
+          <int name="x1" value="206"/>
+          <int name="y1" value="-230"/>
+          <int name="x2" value="242"/>
+          <int name="y2" value="-243"/>
+          <int name="prev" value="0"/>
+          <int name="next" value="73"/>
+        </imgdir>
+        <imgdir name="71">
+          <int name="x1" value="214"/>
+          <int name="y1" value="-246"/>
+          <int name="x2" value="231"/>
+          <int name="y2" value="-242"/>
+          <int name="prev" value="69"/>
+          <int name="next" value="0"/>
+        </imgdir>
+        <imgdir name="72">
+          <int name="x1" value="221"/>
+          <int name="y1" value="-965"/>
+          <int name="x2" value="258"/>
+          <int name="y2" value="-967"/>
+          <int name="prev" value="68"/>
+          <int name="next" value="74"/>
+        </imgdir>
+        <imgdir name="73">
+          <int name="x1" value="242"/>
+          <int name="y1" value="-243"/>
+          <int name="x2" value="271"/>
+          <int name="y2" value="-239"/>
+          <int name="prev" value="70"/>
+          <int name="next" value="80"/>
         </imgdir>
-        <imgdir name="10">
-          <int name="x1" value="450"/>
-          <int name="y1" value="150"/>
-          <int name="x2" value="540"/>
-          <int name="y2" value="150"/>
-          <int name="prev" value="15"/>
-          <int name="next" value="14"/>
+        <imgdir name="74">
+          <int name="x1" value="258"/>
+          <int name="y1" value="-967"/>
+          <int name="x2" value="287"/>
+          <int name="y2" value="-970"/>
+          <int name="prev" value="72"/>
+          <int name="next" value="81"/>
         </imgdir>
-        <imgdir name="11">
+        <imgdir name="75">
           <int name="x1" value="270"/>
-          <int name="y1" value="150"/>
+          <int name="y1" value="-930"/>
           <int name="x2" value="360"/>
-          <int name="y2" value="150"/>
-          <int name="prev" value="9"/>
-          <int name="next" value="15"/>
+          <int name="y2" value="-930"/>
+          <int name="prev" value="63"/>
+          <int name="next" value="84"/>
         </imgdir>
-        <imgdir name="12">
-          <int name="x1" value="810"/>
-          <int name="y1" value="150"/>
-          <int name="x2" value="861"/>
-          <int name="y2" value="150"/>
-          <int name="prev" value="16"/>
-          <int name="next" value="20"/>
+        <imgdir name="80">
+          <int name="x1" value="271"/>
+          <int name="y1" value="-239"/>
+          <int name="x2" value="301"/>
+          <int name="y2" value="-239"/>
+          <int name="prev" value="73"/>
+          <int name="next" value="82"/>
         </imgdir>
-        <imgdir name="13">
-          <int name="x1" value="630"/>
-          <int name="y1" value="150"/>
-          <int name="x2" value="720"/>
-          <int name="y2" value="150"/>
-          <int name="prev" value="14"/>
-          <int name="next" value="16"/>
+        <imgdir name="81">
+          <int name="x1" value="287"/>
+          <int name="y1" value="-970"/>
+          <int name="x2" value="313"/>
+          <int name="y2" value="-974"/>
+          <int name="prev" value="74"/>
+          <int name="next" value="0"/>
         </imgdir>
-        <imgdir name="14">
-          <int name="x1" value="540"/>
-          <int name="y1" value="150"/>
-          <int name="x2" value="630"/>
-          <int name="y2" value="150"/>
-          <int name="prev" value="10"/>
-          <int name="next" value="13"/>
+        <imgdir name="82">
+          <int name="x1" value="301"/>
+          <int name="y1" value="-239"/>
+          <int name="x2" value="312"/>
+          <int name="y2" value="-241"/>
+          <int name="prev" value="80"/>
+          <int name="next" value="83"/>
         </imgdir>
-        <imgdir name="15">
+        <imgdir name="83">
+          <int name="x1" value="312"/>
+          <int name="y1" value="-241"/>
+          <int name="x2" value="344"/>
+          <int name="y2" value="-234"/>
+          <int name="prev" value="82"/>
+          <int name="next" value="0"/>
+        </imgdir>
+        <imgdir name="84">
           <int name="x1" value="360"/>
-          <int name="y1" value="150"/>
+          <int name="y1" value="-930"/>
           <int name="x2" value="450"/>
-          <int name="y2" value="150"/>
-          <int name="prev" value="11"/>
-          <int name="next" value="10"/>
-        </imgdir>
-        <imgdir name="16">
-          <int name="x1" value="720"/>
-          <int name="y1" value="150"/>
-          <int name="x2" value="810"/>
-          <int name="y2" value="150"/>
-          <int name="prev" value="13"/>
-          <int name="next" value="12"/>
-        </imgdir>
-        <imgdir name="17">
-          <int name="x1" value="990"/>
-          <int name="y1" value="90"/>
-          <int name="x2" value="1041"/>
-          <int name="y2" value="90"/>
-          <int name="prev" value="21"/>
-          <int name="next" value="22"/>
-        </imgdir>
-        <imgdir name="18">
-          <int name="x1" value="861"/>
-          <int name="y1" value="120"/>
-          <int name="x2" value="861"/>
-          <int name="y2" value="90"/>
-          <int name="prev" value="20"/>
-          <int name="next" value="19"/>
-        </imgdir>
-        <imgdir name="19">
-          <int name="x1" value="861"/>
-          <int name="y1" value="90"/>
-          <int name="x2" value="939"/>
-          <int name="y2" value="90"/>
-          <int name="prev" value="18"/>
-          <int name="next" value="21"/>
+          <int name="y2" value="-930"/>
+          <int name="prev" value="75"/>
+          <int name="next" value="90"/>
         </imgdir>
-        <imgdir name="20">
-          <int name="x1" value="861"/>
-          <int name="y1" value="150"/>
-          <int name="x2" value="861"/>
-          <int name="y2" value="120"/>
-          <int name="prev" value="12"/>
-          <int name="next" value="18"/>
+        <imgdir name="90">
+          <int name="x1" value="450"/>
+          <int name="y1" value="-930"/>
+          <int name="x2" value="540"/>
+          <int name="y2" value="-930"/>
+          <int name="prev" value="84"/>
+          <int name="next" value="96"/>
         </imgdir>
-        <imgdir name="21">
-          <int name="x1" value="939"/>
-          <int name="y1" value="90"/>
-          <int name="x2" value="990"/>
-          <int name="y2" value="90"/>
-          <int name="prev" value="19"/>
-          <int name="next" value="17"/>
+        <imgdir name="96">
+          <int name="x1" value="540"/>
+          <int name="y1" value="-930"/>
+          <int name="x2" value="630"/>
+          <int name="y2" value="-930"/>
+          <int name="prev" value="90"/>
+          <int name="next" value="102"/>
         </imgdir>
-        <imgdir name="22">
-          <int name="x1" value="1041"/>
-          <int name="y1" value="90"/>
-          <int name="x2" value="1080"/>
-          <int name="y2" value="90"/>
-          <int name="prev" value="17"/>
-          <int name="next" value="23"/>
+        <imgdir name="102">
+          <int name="x1" value="630"/>
+          <int name="y1" value="-930"/>
+          <int name="x2" value="681"/>
+          <int name="y2" value="-930"/>
+          <int name="prev" value="96"/>
+          <int name="next" value="107"/>
         </imgdir>
-        <imgdir name="23">
-          <int name="x1" value="1080"/>
-          <int name="y1" value="90"/>
-          <int name="x2" value="1119"/>
-          <int name="y2" value="90"/>
-          <int name="prev" value="22"/>
+        <imgdir name="107">
+          <int name="x1" value="681"/>
+          <int name="y1" value="-930"/>
+          <int name="x2" value="759"/>
+          <int name="y2" value="-930"/>
+          <int name="prev" value="102"/>
           <int name="next" value="0"/>
         </imgdir>
       </imgdir>
       <imgdir name="2">
-        <imgdir name="24">
-          <int name="x1" value="-360"/>
-          <int name="y1" value="-210"/>
-          <int name="x2" value="-321"/>
-          <int name="y2" value="-210"/>
-          <int name="prev" value="27"/>
-          <int name="next" value="28"/>
-        </imgdir>
-        <imgdir name="25">
-          <int name="x1" value="-180"/>
-          <int name="y1" value="-210"/>
-          <int name="x2" value="-90"/>
-          <int name="y2" value="-210"/>
-          <int name="prev" value="29"/>
-          <int name="next" value="30"/>
-        </imgdir>
-        <imgdir name="26">
-          <int name="x1" value="0"/>
-          <int name="y1" value="-210"/>
-          <int name="x2" value="90"/>
-          <int name="y2" value="-210"/>
-          <int name="prev" value="30"/>
-          <int name="next" value="31"/>
-        </imgdir>
-        <imgdir name="27">
+        <imgdir name="2">
           <int name="x1" value="-399"/>
           <int name="y1" value="-210"/>
           <int name="x2" value="-360"/>
           <int name="y2" value="-210"/>
           <int name="prev" value="0"/>
-          <int name="next" value="24"/>
+          <int name="next" value="4"/>
         </imgdir>
-        <imgdir name="28">
+        <imgdir name="4">
+          <int name="x1" value="-360"/>
+          <int name="y1" value="-210"/>
+          <int name="x2" value="-321"/>
+          <int name="y2" value="-210"/>
+          <int name="prev" value="2"/>
+          <int name="next" value="7"/>
+        </imgdir>
+        <imgdir name="7">
           <int name="x1" value="-321"/>
           <int name="y1" value="-210"/>
           <int name="x2" value="-270"/>
           <int name="y2" value="-210"/>
-          <int name="prev" value="24"/>
-          <int name="next" value="29"/>
+          <int name="prev" value="4"/>
+          <int name="next" value="12"/>
         </imgdir>
-        <imgdir name="29">
+        <imgdir name="12">
           <int name="x1" value="-270"/>
           <int name="y1" value="-210"/>
           <int name="x2" value="-180"/>
           <int name="y2" value="-210"/>
-          <int name="prev" value="28"/>
-          <int name="next" value="25"/>
+          <int name="prev" value="7"/>
+          <int name="next" value="18"/>
         </imgdir>
-        <imgdir name="30">
+        <imgdir name="18">
+          <int name="x1" value="-180"/>
+          <int name="y1" value="-210"/>
+          <int name="x2" value="-90"/>
+          <int name="y2" value="-210"/>
+          <int name="prev" value="12"/>
+          <int name="next" value="24"/>
+        </imgdir>
+        <imgdir name="24">
           <int name="x1" value="-90"/>
           <int name="y1" value="-210"/>
           <int name="x2" value="0"/>
           <int name="y2" value="-210"/>
-          <int name="prev" value="25"/>
-          <int name="next" value="26"/>
+          <int name="prev" value="18"/>
+          <int name="next" value="32"/>
         </imgdir>
-        <imgdir name="31">
+        <imgdir name="32">
+          <int name="x1" value="0"/>
+          <int name="y1" value="-210"/>
+          <int name="x2" value="90"/>
+          <int name="y2" value="-210"/>
+          <int name="prev" value="24"/>
+          <int name="next" value="47"/>
+        </imgdir>
+        <imgdir name="47">
           <int name="x1" value="90"/>
           <int name="y1" value="-210"/>
           <int name="x2" value="180"/>
           <int name="y2" value="-210"/>
-          <int name="prev" value="26"/>
-          <int name="next" value="32"/>
+          <int name="prev" value="32"/>
+          <int name="next" value="66"/>
         </imgdir>
-        <imgdir name="32">
+        <imgdir name="66">
           <int name="x1" value="180"/>
           <int name="y1" value="-210"/>
           <int name="x2" value="270"/>
           <int name="y2" value="-210"/>
-          <int name="prev" value="31"/>
-          <int name="next" value="33"/>
+          <int name="prev" value="47"/>
+          <int name="next" value="77"/>
         </imgdir>
-        <imgdir name="33">
+        <imgdir name="77">
           <int name="x1" value="270"/>
           <int name="y1" value="-210"/>
           <int name="x2" value="360"/>
           <int name="y2" value="-210"/>
-          <int name="prev" value="32"/>
-          <int name="next" value="34"/>
+          <int name="prev" value="66"/>
+          <int name="next" value="87"/>
         </imgdir>
-        <imgdir name="34">
+        <imgdir name="87">
           <int name="x1" value="360"/>
           <int name="y1" value="-210"/>
           <int name="x2" value="450"/>
           <int name="y2" value="-210"/>
-          <int name="prev" value="33"/>
-          <int name="next" value="38"/>
+          <int name="prev" value="77"/>
+          <int name="next" value="92"/>
         </imgdir>
-        <imgdir name="35">
+        <imgdir name="92">
+          <int name="x1" value="450"/>
+          <int name="y1" value="-210"/>
+          <int name="x2" value="540"/>
+          <int name="y2" value="-210"/>
+          <int name="prev" value="87"/>
+          <int name="next" value="98"/>
+        </imgdir>
+        <imgdir name="98">
           <int name="x1" value="540"/>
           <int name="y1" value="-210"/>
           <int name="x2" value="630"/>
           <int name="y2" value="-210"/>
-          <int name="prev" value="38"/>
-          <int name="next" value="36"/>
+          <int name="prev" value="92"/>
+          <int name="next" value="104"/>
         </imgdir>
-        <imgdir name="36">
+        <imgdir name="104">
           <int name="x1" value="630"/>
           <int name="y1" value="-210"/>
           <int name="x2" value="720"/>
           <int name="y2" value="-210"/>
-          <int name="prev" value="35"/>
-          <int name="next" value="37"/>
+          <int name="prev" value="98"/>
+          <int name="next" value="109"/>
         </imgdir>
-        <imgdir name="37">
+        <imgdir name="109">
           <int name="x1" value="720"/>
           <int name="y1" value="-210"/>
           <int name="x2" value="810"/>
           <int name="y2" value="-210"/>
-          <int name="prev" value="36"/>
-          <int name="next" value="40"/>
+          <int name="prev" value="104"/>
+          <int name="next" value="112"/>
         </imgdir>
-        <imgdir name="38">
-          <int name="x1" value="450"/>
+        <imgdir name="112">
+          <int name="x1" value="810"/>
           <int name="y1" value="-210"/>
-          <int name="x2" value="540"/>
+          <int name="x2" value="861"/>
           <int name="y2" value="-210"/>
-          <int name="prev" value="34"/>
-          <int name="next" value="35"/>
+          <int name="prev" value="109"/>
+          <int name="next" value="114"/>
         </imgdir>
-        <imgdir name="39">
+        <imgdir name="114">
           <int name="x1" value="861"/>
           <int name="y1" value="-210"/>
           <int name="x2" value="939"/>
           <int name="y2" value="-210"/>
-          <int name="prev" value="40"/>
+          <int name="prev" value="112"/>
           <int name="next" value="0"/>
         </imgdir>
-        <imgdir name="40">
-          <int name="x1" value="810"/>
-          <int name="y1" value="-210"/>
-          <int name="x2" value="861"/>
-          <int name="y2" value="-210"/>
-          <int name="prev" value="37"/>
-          <int name="next" value="39"/>
-        </imgdir>
       </imgdir>
-      <imgdir name="6">
-        <imgdir name="41">
-          <int name="x1" value="450"/>
-          <int name="y1" value="-570"/>
-          <int name="x2" value="540"/>
-          <int name="y2" value="-570"/>
-          <int name="prev" value="42"/>
-          <int name="next" value="43"/>
-        </imgdir>
-        <imgdir name="42">
-          <int name="x1" value="360"/>
-          <int name="y1" value="-570"/>
-          <int name="x2" value="450"/>
-          <int name="y2" value="-570"/>
-          <int name="prev" value="51"/>
-          <int name="next" value="41"/>
-        </imgdir>
-        <imgdir name="43">
-          <int name="x1" value="540"/>
-          <int name="y1" value="-570"/>
-          <int name="x2" value="630"/>
-          <int name="y2" value="-570"/>
-          <int name="prev" value="41"/>
-          <int name="next" value="44"/>
-        </imgdir>
-        <imgdir name="44">
-          <int name="x1" value="630"/>
-          <int name="y1" value="-570"/>
-          <int name="x2" value="720"/>
-          <int name="y2" value="-570"/>
-          <int name="prev" value="43"/>
-          <int name="next" value="45"/>
-        </imgdir>
-        <imgdir name="45">
-          <int name="x1" value="720"/>
-          <int name="y1" value="-570"/>
-          <int name="x2" value="810"/>
-          <int name="y2" value="-570"/>
-          <int name="prev" value="44"/>
-          <int name="next" value="46"/>
-        </imgdir>
-        <imgdir name="46">
-          <int name="x1" value="810"/>
-          <int name="y1" value="-570"/>
-          <int name="x2" value="900"/>
-          <int name="y2" value="-570"/>
-          <int name="prev" value="45"/>
-          <int name="next" value="48"/>
-        </imgdir>
-        <imgdir name="47">
-          <int name="x1" value="990"/>
-          <int name="y1" value="-570"/>
-          <int name="x2" value="1041"/>
-          <int name="y2" value="-570"/>
-          <int name="prev" value="48"/>
-          <int name="next" value="49"/>
-        </imgdir>
-        <imgdir name="48">
-          <int name="x1" value="900"/>
-          <int name="y1" value="-570"/>
-          <int name="x2" value="990"/>
-          <int name="y2" value="-570"/>
-          <int name="prev" value="46"/>
-          <int name="next" value="47"/>
-        </imgdir>
-        <imgdir name="49">
-          <int name="x1" value="1041"/>
-          <int name="y1" value="-570"/>
-          <int name="x2" value="1080"/>
-          <int name="y2" value="-570"/>
-          <int name="prev" value="47"/>
-          <int name="next" value="50"/>
-        </imgdir>
-        <imgdir name="50">
-          <int name="x1" value="1080"/>
-          <int name="y1" value="-570"/>
-          <int name="x2" value="1119"/>
-          <int name="y2" value="-570"/>
-          <int name="prev" value="49"/>
-          <int name="next" value="0"/>
-        </imgdir>
-        <imgdir name="51">
-          <int name="x1" value="270"/>
-          <int name="y1" value="-570"/>
-          <int name="x2" value="360"/>
-          <int name="y2" value="-570"/>
-          <int name="prev" value="53"/>
-          <int name="next" value="42"/>
-        </imgdir>
-        <imgdir name="52">
-          <int name="x1" value="90"/>
-          <int name="y1" value="-570"/>
-          <int name="x2" value="129"/>
-          <int name="y2" value="-570"/>
-          <int name="prev" value="54"/>
-          <int name="next" value="55"/>
-        </imgdir>
-        <imgdir name="53">
-          <int name="x1" value="180"/>
-          <int name="y1" value="-570"/>
-          <int name="x2" value="270"/>
-          <int name="y2" value="-570"/>
-          <int name="prev" value="55"/>
-          <int name="next" value="51"/>
-        </imgdir>
-        <imgdir name="54">
-          <int name="x1" value="51"/>
-          <int name="y1" value="-570"/>
-          <int name="x2" value="90"/>
-          <int name="y2" value="-570"/>
+      <imgdir name="0">
+        <imgdir name="3">
+          <int name="x1" value="-399"/>
+          <int name="y1" value="150"/>
+          <int name="x2" value="-360"/>
+          <int name="y2" value="150"/>
           <int name="prev" value="0"/>
-          <int name="next" value="52"/>
-        </imgdir>
-        <imgdir name="55">
-          <int name="x1" value="129"/>
-          <int name="y1" value="-570"/>
-          <int name="x2" value="180"/>
-          <int name="y2" value="-570"/>
-          <int name="prev" value="52"/>
-          <int name="next" value="53"/>
+          <int name="next" value="5"/>
         </imgdir>
-      </imgdir>
-      <imgdir name="8">
-        <imgdir name="56">
-          <int name="x1" value="-399"/>
-          <int name="y1" value="-930"/>
+        <imgdir name="5">
+          <int name="x1" value="-360"/>
+          <int name="y1" value="150"/>
           <int name="x2" value="-321"/>
-          <int name="y2" value="-930"/>
-          <int name="prev" value="0"/>
-          <int name="next" value="57"/>
+          <int name="y2" value="150"/>
+          <int name="prev" value="3"/>
+          <int name="next" value="8"/>
         </imgdir>
-        <imgdir name="57">
+        <imgdir name="8">
           <int name="x1" value="-321"/>
-          <int name="y1" value="-930"/>
+          <int name="y1" value="150"/>
           <int name="x2" value="-270"/>
-          <int name="y2" value="-930"/>
-          <int name="prev" value="56"/>
-          <int name="next" value="59"/>
-        </imgdir>
-        <imgdir name="58">
-          <int name="x1" value="-180"/>
-          <int name="y1" value="-930"/>
-          <int name="x2" value="-90"/>
-          <int name="y2" value="-930"/>
-          <int name="prev" value="59"/>
-          <int name="next" value="60"/>
+          <int name="y2" value="150"/>
+          <int name="prev" value="5"/>
+          <int name="next" value="13"/>
         </imgdir>
-        <imgdir name="59">
+        <imgdir name="13">
           <int name="x1" value="-270"/>
-          <int name="y1" value="-930"/>
+          <int name="y1" value="150"/>
           <int name="x2" value="-180"/>
-          <int name="y2" value="-930"/>
-          <int name="prev" value="57"/>
-          <int name="next" value="58"/>
+          <int name="y2" value="150"/>
+          <int name="prev" value="8"/>
+          <int name="next" value="19"/>
         </imgdir>
-        <imgdir name="60">
+        <imgdir name="19">
+          <int name="x1" value="-180"/>
+          <int name="y1" value="150"/>
+          <int name="x2" value="-90"/>
+          <int name="y2" value="150"/>
+          <int name="prev" value="13"/>
+          <int name="next" value="26"/>
+        </imgdir>
+        <imgdir name="26">
           <int name="x1" value="-90"/>
-          <int name="y1" value="-930"/>
+          <int name="y1" value="150"/>
           <int name="x2" value="0"/>
-          <int name="y2" value="-930"/>
-          <int name="prev" value="58"/>
-          <int name="next" value="62"/>
-        </imgdir>
-        <imgdir name="61">
-          <int name="x1" value="90"/>
-          <int name="y1" value="-930"/>
-          <int name="x2" value="180"/>
-          <int name="y2" value="-930"/>
-          <int name="prev" value="62"/>
-          <int name="next" value="63"/>
+          <int name="y2" value="150"/>
+          <int name="prev" value="19"/>
+          <int name="next" value="34"/>
         </imgdir>
-        <imgdir name="62">
+        <imgdir name="34">
           <int name="x1" value="0"/>
-          <int name="y1" value="-930"/>
+          <int name="y1" value="150"/>
           <int name="x2" value="90"/>
-          <int name="y2" value="-930"/>
-          <int name="prev" value="60"/>
-          <int name="next" value="61"/>
+          <int name="y2" value="150"/>
+          <int name="prev" value="26"/>
+          <int name="next" value="49"/>
         </imgdir>
-        <imgdir name="63">
+        <imgdir name="49">
+          <int name="x1" value="90"/>
+          <int name="y1" value="150"/>
+          <int name="x2" value="180"/>
+          <int name="y2" value="150"/>
+          <int name="prev" value="34"/>
+          <int name="next" value="67"/>
+        </imgdir>
+        <imgdir name="67">
           <int name="x1" value="180"/>
-          <int name="y1" value="-930"/>
+          <int name="y1" value="150"/>
           <int name="x2" value="270"/>
-          <int name="y2" value="-930"/>
-          <int name="prev" value="61"/>
-          <int name="next" value="65"/>
-        </imgdir>
-        <imgdir name="64">
-          <int name="x1" value="360"/>
-          <int name="y1" value="-930"/>
-          <int name="x2" value="450"/>
-          <int name="y2" value="-930"/>
-          <int name="prev" value="65"/>
-          <int name="next" value="67"/>
+          <int name="y2" value="150"/>
+          <int name="prev" value="49"/>
+          <int name="next" value="79"/>
         </imgdir>
-        <imgdir name="65">
+        <imgdir name="79">
           <int name="x1" value="270"/>
-          <int name="y1" value="-930"/>
+          <int name="y1" value="150"/>
           <int name="x2" value="360"/>
-          <int name="y2" value="-930"/>
-          <int name="prev" value="63"/>
-          <int name="next" value="64"/>
-        </imgdir>
-        <imgdir name="66">
-          <int name="x1" value="540"/>
-          <int name="y1" value="-930"/>
-          <int name="x2" value="630"/>
-          <int name="y2" value="-930"/>
+          <int name="y2" value="150"/>
           <int name="prev" value="67"/>
-          <int name="next" value="69"/>
+          <int name="next" value="88"/>
         </imgdir>
-        <imgdir name="67">
+        <imgdir name="88">
+          <int name="x1" value="360"/>
+          <int name="y1" value="150"/>
+          <int name="x2" value="450"/>
+          <int name="y2" value="150"/>
+          <int name="prev" value="79"/>
+          <int name="next" value="93"/>
+        </imgdir>
+        <imgdir name="93">
           <int name="x1" value="450"/>
-          <int name="y1" value="-930"/>
+          <int name="y1" value="150"/>
           <int name="x2" value="540"/>
-          <int name="y2" value="-930"/>
-          <int name="prev" value="64"/>
-          <int name="next" value="66"/>
+          <int name="y2" value="150"/>
+          <int name="prev" value="88"/>
+          <int name="next" value="99"/>
         </imgdir>
-        <imgdir name="68">
-          <int name="x1" value="681"/>
-          <int name="y1" value="-930"/>
-          <int name="x2" value="759"/>
-          <int name="y2" value="-930"/>
-          <int name="prev" value="69"/>
-          <int name="next" value="0"/>
+        <imgdir name="99">
+          <int name="x1" value="540"/>
+          <int name="y1" value="150"/>
+          <int name="x2" value="630"/>
+          <int name="y2" value="150"/>
+          <int name="prev" value="93"/>
+          <int name="next" value="105"/>
         </imgdir>
-        <imgdir name="69">
+        <imgdir name="105">
           <int name="x1" value="630"/>
-          <int name="y1" value="-930"/>
-          <int name="x2" value="681"/>
-          <int name="y2" value="-930"/>
-          <int name="prev" value="66"/>
-          <int name="next" value="68"/>
-        </imgdir>
-        <imgdir name="70">
-          <int name="x1" value="111"/>
-          <int name="y1" value="-256"/>
-          <int name="x2" value="177"/>
-          <int name="y2" value="-259"/>
-          <int name="prev" value="83"/>
-          <int name="next" value="71"/>
+          <int name="y1" value="150"/>
+          <int name="x2" value="720"/>
+          <int name="y2" value="150"/>
+          <int name="prev" value="99"/>
+          <int name="next" value="110"/>
         </imgdir>
-        <imgdir name="71">
-          <int name="x1" value="177"/>
-          <int name="y1" value="-259"/>
-          <int name="x2" value="215"/>
-          <int name="y2" value="-252"/>
-          <int name="prev" value="70"/>
-          <int name="next" value="0"/>
+        <imgdir name="110">
+          <int name="x1" value="720"/>
+          <int name="y1" value="150"/>
+          <int name="x2" value="810"/>
+          <int name="y2" value="150"/>
+          <int name="prev" value="105"/>
+          <int name="next" value="113"/>
         </imgdir>
-        <imgdir name="72">
-          <int name="x1" value="206"/>
-          <int name="y1" value="-230"/>
-          <int name="x2" value="242"/>
-          <int name="y2" value="-243"/>
-          <int name="prev" value="0"/>
-          <int name="next" value="73"/>
+        <imgdir name="113">
+          <int name="x1" value="810"/>
+          <int name="y1" value="150"/>
+          <int name="x2" value="861"/>
+          <int name="y2" value="150"/>
+          <int name="prev" value="110"/>
+          <int name="next" value="117"/>
         </imgdir>
-        <imgdir name="73">
-          <int name="x1" value="242"/>
-          <int name="y1" value="-243"/>
-          <int name="x2" value="271"/>
-          <int name="y2" value="-239"/>
-          <int name="prev" value="72"/>
-          <int name="next" value="74"/>
+        <imgdir name="115">
+          <int name="x1" value="861"/>
+          <int name="y1" value="90"/>
+          <int name="x2" value="939"/>
+          <int name="y2" value="90"/>
+          <int name="prev" value="116"/>
+          <int name="next" value="119"/>
         </imgdir>
-        <imgdir name="74">
-          <int name="x1" value="271"/>
-          <int name="y1" value="-239"/>
-          <int name="x2" value="301"/>
-          <int name="y2" value="-239"/>
-          <int name="prev" value="73"/>
-          <int name="next" value="75"/>
+        <imgdir name="116">
+          <int name="x1" value="861"/>
+          <int name="y1" value="120"/>
+          <int name="x2" value="861"/>
+          <int name="y2" value="90"/>
+          <int name="prev" value="117"/>
+          <int name="next" value="115"/>
         </imgdir>
-        <imgdir name="75">
-          <int name="x1" value="301"/>
-          <int name="y1" value="-239"/>
-          <int name="x2" value="312"/>
-          <int name="y2" value="-241"/>
-          <int name="prev" value="74"/>
-          <int name="next" value="76"/>
+        <imgdir name="117">
+          <int name="x1" value="861"/>
+          <int name="y1" value="150"/>
+          <int name="x2" value="861"/>
+          <int name="y2" value="120"/>
+          <int name="prev" value="113"/>
+          <int name="next" value="116"/>
         </imgdir>
-        <imgdir name="76">
-          <int name="x1" value="312"/>
-          <int name="y1" value="-241"/>
-          <int name="x2" value="344"/>
-          <int name="y2" value="-234"/>
-          <int name="prev" value="75"/>
-          <int name="next" value="0"/>
+        <imgdir name="119">
+          <int name="x1" value="939"/>
+          <int name="y1" value="90"/>
+          <int name="x2" value="990"/>
+          <int name="y2" value="90"/>
+          <int name="prev" value="115"/>
+          <int name="next" value="121"/>
         </imgdir>
-        <imgdir name="77">
-          <int name="x1" value="166"/>
-          <int name="y1" value="-237"/>
-          <int name="x2" value="184"/>
-          <int name="y2" value="-244"/>
-          <int name="prev" value="0"/>
-          <int name="next" value="78"/>
+        <imgdir name="121">
+          <int name="x1" value="990"/>
+          <int name="y1" value="90"/>
+          <int name="x2" value="1041"/>
+          <int name="y2" value="90"/>
+          <int name="prev" value="119"/>
+          <int name="next" value="123"/>
         </imgdir>
-        <imgdir name="78">
-          <int name="x1" value="184"/>
-          <int name="y1" value="-244"/>
-          <int name="x2" value="214"/>
-          <int name="y2" value="-246"/>
-          <int name="prev" value="77"/>
-          <int name="next" value="79"/>
+        <imgdir name="123">
+          <int name="x1" value="1041"/>
+          <int name="y1" value="90"/>
+          <int name="x2" value="1080"/>
+          <int name="y2" value="90"/>
+          <int name="prev" value="121"/>
+          <int name="next" value="125"/>
         </imgdir>
-        <imgdir name="79">
-          <int name="x1" value="214"/>
-          <int name="y1" value="-246"/>
-          <int name="x2" value="231"/>
-          <int name="y2" value="-242"/>
-          <int name="prev" value="78"/>
+        <imgdir name="125">
+          <int name="x1" value="1080"/>
+          <int name="y1" value="90"/>
+          <int name="x2" value="1119"/>
+          <int name="y2" value="90"/>
+          <int name="prev" value="123"/>
           <int name="next" value="0"/>
         </imgdir>
-        <imgdir name="80">
-          <int name="x1" value="20"/>
-          <int name="y1" value="-270"/>
-          <int name="x2" value="69"/>
-          <int name="y2" value="-253"/>
+      </imgdir>
+      <imgdir name="13">
+        <imgdir name="9">
+          <int name="x1" value="-309"/>
+          <int name="y1" value="-1830"/>
+          <int name="x2" value="-231"/>
+          <int name="y2" value="-1830"/>
           <int name="prev" value="0"/>
-          <int name="next" value="81"/>
-        </imgdir>
-        <imgdir name="81">
-          <int name="x1" value="69"/>
-          <int name="y1" value="-253"/>
-          <int name="x2" value="88"/>
-          <int name="y2" value="-254"/>
-          <int name="prev" value="80"/>
-          <int name="next" value="82"/>
+          <int name="next" value="14"/>
         </imgdir>
-        <imgdir name="82">
-          <int name="x1" value="88"/>
-          <int name="y1" value="-254"/>
-          <int name="x2" value="100"/>
-          <int name="y2" value="-251"/>
-          <int name="prev" value="81"/>
-          <int name="next" value="83"/>
+        <imgdir name="14">
+          <int name="x1" value="-231"/>
+          <int name="y1" value="-1830"/>
+          <int name="x2" value="-180"/>
+          <int name="y2" value="-1830"/>
+          <int name="prev" value="9"/>
+          <int name="next" value="16"/>
         </imgdir>
-        <imgdir name="83">
-          <int name="x1" value="100"/>
-          <int name="y1" value="-251"/>
-          <int name="x2" value="111"/>
-          <int name="y2" value="-256"/>
-          <int name="prev" value="82"/>
-          <int name="next" value="70"/>
+        <imgdir name="16">
+          <int name="x1" value="-180"/>
+          <int name="y1" value="-1830"/>
+          <int name="x2" value="-90"/>
+          <int name="y2" value="-1830"/>
+          <int name="prev" value="14"/>
+          <int name="next" value="22"/>
         </imgdir>
-        <imgdir name="84">
-          <int name="x1" value="100"/>
-          <int name="y1" value="-251"/>
-          <int name="x2" value="120"/>
-          <int name="y2" value="-248"/>
-          <int name="prev" value="82"/>
-          <int name="next" value="85"/>
+        <imgdir name="22">
+          <int name="x1" value="-90"/>
+          <int name="y1" value="-1830"/>
+          <int name="x2" value="0"/>
+          <int name="y2" value="-1830"/>
+          <int name="prev" value="16"/>
+          <int name="next" value="29"/>
         </imgdir>
-        <imgdir name="85">
-          <int name="x1" value="120"/>
-          <int name="y1" value="-248"/>
-          <int name="x2" value="141"/>
-          <int name="y2" value="-233"/>
-          <int name="prev" value="84"/>
-          <int name="next" value="86"/>
+        <imgdir name="29">
+          <int name="x1" value="0"/>
+          <int name="y1" value="-1830"/>
+          <int name="x2" value="51"/>
+          <int name="y2" value="-1830"/>
+          <int name="prev" value="22"/>
+          <int name="next" value="39"/>
         </imgdir>
-        <imgdir name="86">
-          <int name="x1" value="141"/>
-          <int name="y1" value="-233"/>
-          <int name="x2" value="161"/>
-          <int name="y2" value="-230"/>
-          <int name="prev" value="85"/>
-          <int name="next" value="87"/>
+        <imgdir name="39">
+          <int name="x1" value="51"/>
+          <int name="y1" value="-1830"/>
+          <int name="x2" value="90"/>
+          <int name="y2" value="-1830"/>
+          <int name="prev" value="29"/>
+          <int name="next" value="43"/>
         </imgdir>
-        <imgdir name="87">
-          <int name="x1" value="161"/>
-          <int name="y1" value="-230"/>
-          <int name="x2" value="187"/>
-          <int name="y2" value="-211"/>
-          <int name="prev" value="86"/>
+        <imgdir name="43">
+          <int name="x1" value="90"/>
+          <int name="y1" value="-1830"/>
+          <int name="x2" value="129"/>
+          <int name="y2" value="-1830"/>
+          <int name="prev" value="39"/>
           <int name="next" value="0"/>
         </imgdir>
-        <imgdir name="88">
-          <int name="x1" value="10"/>
-          <int name="y1" value="-957"/>
-          <int name="x2" value="46"/>
-          <int name="y2" value="-970"/>
-          <int name="prev" value="0"/>
-          <int name="next" value="89"/>
-        </imgdir>
-        <imgdir name="89">
-          <int name="x1" value="46"/>
-          <int name="y1" value="-970"/>
+      </imgdir>
+      <imgdir name="6">
+        <imgdir name="40">
+          <int name="x1" value="51"/>
+          <int name="y1" value="-570"/>
           <int name="x2" value="90"/>
-          <int name="y2" value="-971"/>
-          <int name="prev" value="88"/>
-          <int name="next" value="90"/>
+          <int name="y2" value="-570"/>
+          <int name="prev" value="0"/>
+          <int name="next" value="46"/>
         </imgdir>
-        <imgdir name="90">
+        <imgdir name="46">
           <int name="x1" value="90"/>
-          <int name="y1" value="-971"/>
-          <int name="x2" value="121"/>
-          <int name="y2" value="-963"/>
-          <int name="prev" value="89"/>
+          <int name="y1" value="-570"/>
+          <int name="x2" value="129"/>
+          <int name="y2" value="-570"/>
+          <int name="prev" value="40"/>
+          <int name="next" value="56"/>
+        </imgdir>
+        <imgdir name="56">
+          <int name="x1" value="129"/>
+          <int name="y1" value="-570"/>
+          <int name="x2" value="180"/>
+          <int name="y2" value="-570"/>
+          <int name="prev" value="46"/>
+          <int name="next" value="64"/>
+        </imgdir>
+        <imgdir name="64">
+          <int name="x1" value="180"/>
+          <int name="y1" value="-570"/>
+          <int name="x2" value="270"/>
+          <int name="y2" value="-570"/>
+          <int name="prev" value="56"/>
+          <int name="next" value="76"/>
+        </imgdir>
+        <imgdir name="76">
+          <int name="x1" value="270"/>
+          <int name="y1" value="-570"/>
+          <int name="x2" value="360"/>
+          <int name="y2" value="-570"/>
+          <int name="prev" value="64"/>
+          <int name="next" value="85"/>
+        </imgdir>
+        <imgdir name="85">
+          <int name="x1" value="360"/>
+          <int name="y1" value="-570"/>
+          <int name="x2" value="450"/>
+          <int name="y2" value="-570"/>
+          <int name="prev" value="76"/>
           <int name="next" value="91"/>
         </imgdir>
         <imgdir name="91">
-          <int name="x1" value="121"/>
-          <int name="y1" value="-963"/>
-          <int name="x2" value="125"/>
-          <int name="y2" value="-963"/>
-          <int name="prev" value="90"/>
-          <int name="next" value="92"/>
+          <int name="x1" value="450"/>
+          <int name="y1" value="-570"/>
+          <int name="x2" value="540"/>
+          <int name="y2" value="-570"/>
+          <int name="prev" value="85"/>
+          <int name="next" value="97"/>
         </imgdir>
-        <imgdir name="92">
-          <int name="x1" value="125"/>
-          <int name="y1" value="-963"/>
-          <int name="x2" value="155"/>
-          <int name="y2" value="-965"/>
+        <imgdir name="97">
+          <int name="x1" value="540"/>
+          <int name="y1" value="-570"/>
+          <int name="x2" value="630"/>
+          <int name="y2" value="-570"/>
           <int name="prev" value="91"/>
-          <int name="next" value="93"/>
+          <int name="next" value="103"/>
         </imgdir>
-        <imgdir name="93">
-          <int name="x1" value="155"/>
-          <int name="y1" value="-965"/>
-          <int name="x2" value="162"/>
-          <int name="y2" value="-964"/>
-          <int name="prev" value="92"/>
-          <int name="next" value="94"/>
+        <imgdir name="103">
+          <int name="x1" value="630"/>
+          <int name="y1" value="-570"/>
+          <int name="x2" value="720"/>
+          <int name="y2" value="-570"/>
+          <int name="prev" value="97"/>
+          <int name="next" value="108"/>
         </imgdir>
-        <imgdir name="94">
-          <int name="x1" value="162"/>
-          <int name="y1" value="-964"/>
-          <int name="x2" value="181"/>
-          <int name="y2" value="-969"/>
-          <int name="prev" value="93"/>
-          <int name="next" value="95"/>
+        <imgdir name="108">
+          <int name="x1" value="720"/>
+          <int name="y1" value="-570"/>
+          <int name="x2" value="810"/>
+          <int name="y2" value="-570"/>
+          <int name="prev" value="103"/>
+          <int name="next" value="111"/>
         </imgdir>
-        <imgdir name="95">
-          <int name="x1" value="181"/>
-          <int name="y1" value="-969"/>
-          <int name="x2" value="221"/>
-          <int name="y2" value="-965"/>
-          <int name="prev" value="94"/>
-          <int name="next" value="96"/>
+        <imgdir name="111">
+          <int name="x1" value="810"/>
+          <int name="y1" value="-570"/>
+          <int name="x2" value="900"/>
+          <int name="y2" value="-570"/>
+          <int name="prev" value="108"/>
+          <int name="next" value="118"/>
         </imgdir>
-        <imgdir name="96">
-          <int name="x1" value="221"/>
-          <int name="y1" value="-965"/>
-          <int name="x2" value="258"/>
-          <int name="y2" value="-967"/>
-          <int name="prev" value="95"/>
-          <int name="next" value="97"/>
+        <imgdir name="118">
+          <int name="x1" value="900"/>
+          <int name="y1" value="-570"/>
+          <int name="x2" value="990"/>
+          <int name="y2" value="-570"/>
+          <int name="prev" value="111"/>
+          <int name="next" value="120"/>
         </imgdir>
-        <imgdir name="97">
-          <int name="x1" value="258"/>
-          <int name="y1" value="-967"/>
-          <int name="x2" value="287"/>
-          <int name="y2" value="-970"/>
-          <int name="prev" value="96"/>
-          <int name="next" value="98"/>
+        <imgdir name="120">
+          <int name="x1" value="990"/>
+          <int name="y1" value="-570"/>
+          <int name="x2" value="1041"/>
+          <int name="y2" value="-570"/>
+          <int name="prev" value="118"/>
+          <int name="next" value="122"/>
         </imgdir>
-        <imgdir name="98">
-          <int name="x1" value="287"/>
-          <int name="y1" value="-970"/>
-          <int name="x2" value="313"/>
-          <int name="y2" value="-974"/>
-          <int name="prev" value="97"/>
+        <imgdir name="122">
+          <int name="x1" value="1041"/>
+          <int name="y1" value="-570"/>
+          <int name="x2" value="1080"/>
+          <int name="y2" value="-570"/>
+          <int name="prev" value="120"/>
+          <int name="next" value="124"/>
+        </imgdir>
+        <imgdir name="124">
+          <int name="x1" value="1080"/>
+          <int name="y1" value="-570"/>
+          <int name="x2" value="1119"/>
+          <int name="y2" value="-570"/>
+          <int name="prev" value="122"/>
           <int name="next" value="0"/>
         </imgdir>
       </imgdir>
       <imgdir name="11">
-        <imgdir name="99">
-          <int name="x1" value="540"/>
-          <int name="y1" value="-1170"/>
-          <int name="x2" value="579"/>
-          <int name="y2" value="-1170"/>
-          <int name="prev" value="102"/>
-          <int name="next" value="103"/>
-        </imgdir>
-        <imgdir name="100">
-          <int name="x1" value="681"/>
+        <imgdir name="94">
+          <int name="x1" value="501"/>
           <int name="y1" value="-1170"/>
-          <int name="x2" value="759"/>
+          <int name="x2" value="540"/>
           <int name="y2" value="-1170"/>
-          <int name="prev" value="101"/>
-          <int name="next" value="0"/>
+          <int name="prev" value="0"/>
+          <int name="next" value="95"/>
         </imgdir>
-        <imgdir name="101">
-          <int name="x1" value="630"/>
+        <imgdir name="95">
+          <int name="x1" value="540"/>
           <int name="y1" value="-1170"/>
-          <int name="x2" value="681"/>
+          <int name="x2" value="579"/>
           <int name="y2" value="-1170"/>
-          <int name="prev" value="103"/>
+          <int name="prev" value="94"/>
           <int name="next" value="100"/>
         </imgdir>
-        <imgdir name="102">
-          <int name="x1" value="501"/>
-          <int name="y1" value="-1170"/>
-          <int name="x2" value="540"/>
-          <int name="y2" value="-1170"/>
-          <int name="prev" value="0"/>
-          <int name="next" value="99"/>
-        </imgdir>
-        <imgdir name="103">
+        <imgdir name="100">
           <int name="x1" value="579"/>
           <int name="y1" value="-1170"/>
           <int name="x2" value="630"/>
           <int name="y2" value="-1170"/>
-          <int name="prev" value="99"/>
+          <int name="prev" value="95"/>
           <int name="next" value="101"/>
         </imgdir>
-      </imgdir>
-      <imgdir name="13">
-        <imgdir name="104">
-          <int name="x1" value="-309"/>
-          <int name="y1" value="-1830"/>
-          <int name="x2" value="-231"/>
-          <int name="y2" value="-1830"/>
-          <int name="prev" value="0"/>
+        <imgdir name="101">
+          <int name="x1" value="630"/>
+          <int name="y1" value="-1170"/>
+          <int name="x2" value="681"/>
+          <int name="y2" value="-1170"/>
+          <int name="prev" value="100"/>
           <int name="next" value="106"/>
         </imgdir>
-        <imgdir name="105">
-          <int name="x1" value="-180"/>
-          <int name="y1" value="-1830"/>
-          <int name="x2" value="-90"/>
-          <int name="y2" value="-1830"/>
-          <int name="prev" value="106"/>
-          <int name="next" value="107"/>
-        </imgdir>
         <imgdir name="106">
-          <int name="x1" value="-231"/>
-          <int name="y1" value="-1830"/>
-          <int name="x2" value="-180"/>
-          <int name="y2" value="-1830"/>
-          <int name="prev" value="104"/>
-          <int name="next" value="105"/>
-        </imgdir>
-        <imgdir name="107">
-          <int name="x1" value="-90"/>
-          <int name="y1" value="-1830"/>
-          <int name="x2" value="0"/>
-          <int name="y2" value="-1830"/>
-          <int name="prev" value="105"/>
-          <int name="next" value="108"/>
-        </imgdir>
-        <imgdir name="108">
-          <int name="x1" value="0"/>
-          <int name="y1" value="-1830"/>
-          <int name="x2" value="51"/>
-          <int name="y2" value="-1830"/>
-          <int name="prev" value="107"/>
-          <int name="next" value="109"/>
-        </imgdir>
-        <imgdir name="109">
-          <int name="x1" value="51"/>
-          <int name="y1" value="-1830"/>
-          <int name="x2" value="90"/>
-          <int name="y2" value="-1830"/>
-          <int name="prev" value="108"/>
-          <int name="next" value="110"/>
-        </imgdir>
-        <imgdir name="110">
-          <int name="x1" value="90"/>
-          <int name="y1" value="-1830"/>
-          <int name="x2" value="129"/>
-          <int name="y2" value="-1830"/>
-          <int name="prev" value="109"/>
+          <int name="x1" value="681"/>
+          <int name="y1" value="-1170"/>
+          <int name="x2" value="759"/>
+          <int name="y2" value="-1170"/>
+          <int name="prev" value="101"/>
           <int name="next" value="0"/>
         </imgdir>
       </imgdir>
     </imgdir>
     <imgdir name="3">
       <imgdir name="1">
-        <imgdir name="111">
-          <int name="x1" value="-90"/>
+        <imgdir name="10">
+          <int name="x1" value="-309"/>
           <int name="y1" value="150"/>
-          <int name="x2" value="-39"/>
+          <int name="x2" value="-231"/>
           <int name="y2" value="150"/>
-          <int name="prev" value="112"/>
-          <int name="next" value="113"/>
+          <int name="prev" value="0"/>
+          <int name="next" value="15"/>
         </imgdir>
-        <imgdir name="112">
+        <imgdir name="15">
+          <int name="x1" value="-231"/>
+          <int name="y1" value="150"/>
+          <int name="x2" value="-180"/>
+          <int name="y2" value="150"/>
+          <int name="prev" value="10"/>
+          <int name="next" value="20"/>
+        </imgdir>
+        <imgdir name="20">
           <int name="x1" value="-180"/>
           <int name="y1" value="150"/>
           <int name="x2" value="-90"/>
           <int name="y2" value="150"/>
-          <int name="prev" value="116"/>
-          <int name="next" value="111"/>
+          <int name="prev" value="15"/>
+          <int name="next" value="25"/>
         </imgdir>
-        <imgdir name="113">
+        <imgdir name="25">
+          <int name="x1" value="-90"/>
+          <int name="y1" value="150"/>
+          <int name="x2" value="-39"/>
+          <int name="y2" value="150"/>
+          <int name="prev" value="20"/>
+          <int name="next" value="28"/>
+        </imgdir>
+        <imgdir name="28">
           <int name="x1" value="-39"/>
           <int name="y1" value="150"/>
           <int name="x2" value="0"/>
           <int name="y2" value="150"/>
-          <int name="prev" value="111"/>
-          <int name="next" value="114"/>
+          <int name="prev" value="25"/>
+          <int name="next" value="33"/>
         </imgdir>
-        <imgdir name="114">
+        <imgdir name="33">
           <int name="x1" value="0"/>
           <int name="y1" value="150"/>
           <int name="x2" value="39"/>
           <int name="y2" value="150"/>
-          <int name="prev" value="113"/>
+          <int name="prev" value="28"/>
           <int name="next" value="0"/>
         </imgdir>
-        <imgdir name="115">
-          <int name="x1" value="-309"/>
-          <int name="y1" value="150"/>
-          <int name="x2" value="-231"/>
-          <int name="y2" value="150"/>
-          <int name="prev" value="0"/>
-          <int name="next" value="116"/>
-        </imgdir>
-        <imgdir name="116">
-          <int name="x1" value="-231"/>
-          <int name="y1" value="150"/>
-          <int name="x2" value="-180"/>
-          <int name="y2" value="150"/>
-          <int name="prev" value="115"/>
-          <int name="next" value="112"/>
-        </imgdir>
       </imgdir>
-      <imgdir name="3">
-        <imgdir name="117">
-          <int name="x1" value="180"/>
+      <imgdir name="4">
+        <imgdir name="21">
+          <int name="x1" value="-129"/>
           <int name="y1" value="-210"/>
-          <int name="x2" value="270"/>
+          <int name="x2" value="-51"/>
           <int name="y2" value="-210"/>
-          <int name="prev" value="118"/>
-          <int name="next" value="120"/>
+          <int name="prev" value="0"/>
+          <int name="next" value="0"/>
         </imgdir>
-        <imgdir name="118">
-          <int name="x1" value="90"/>
+      </imgdir>
+      <imgdir name="3">
+        <imgdir name="27">
+          <int name="x1" value="-39"/>
           <int name="y1" value="-210"/>
-          <int name="x2" value="180"/>
+          <int name="x2" value="0"/>
           <int name="y2" value="-210"/>
-          <int name="prev" value="122"/>
-          <int name="next" value="117"/>
+          <int name="prev" value="0"/>
+          <int name="next" value="31"/>
         </imgdir>
-        <imgdir name="119">
+        <imgdir name="31">
           <int name="x1" value="0"/>
           <int name="y1" value="-210"/>
           <int name="x2" value="39"/>
           <int name="y2" value="-210"/>
-          <int name="prev" value="121"/>
-          <int name="next" value="122"/>
+          <int name="prev" value="27"/>
+          <int name="next" value="37"/>
         </imgdir>
-        <imgdir name="120">
-          <int name="x1" value="270"/>
+        <imgdir name="37">
+          <int name="x1" value="39"/>
           <int name="y1" value="-210"/>
-          <int name="x2" value="360"/>
+          <int name="x2" value="90"/>
           <int name="y2" value="-210"/>
-          <int name="prev" value="117"/>
-          <int name="next" value="124"/>
+          <int name="prev" value="31"/>
+          <int name="next" value="48"/>
         </imgdir>
-        <imgdir name="121">
-          <int name="x1" value="-39"/>
+        <imgdir name="48">
+          <int name="x1" value="90"/>
           <int name="y1" value="-210"/>
-          <int name="x2" value="0"/>
+          <int name="x2" value="180"/>
           <int name="y2" value="-210"/>
-          <int name="prev" value="0"/>
-          <int name="next" value="119"/>
+          <int name="prev" value="37"/>
+          <int name="next" value="65"/>
         </imgdir>
-        <imgdir name="122">
-          <int name="x1" value="39"/>
+        <imgdir name="65">
+          <int name="x1" value="180"/>
           <int name="y1" value="-210"/>
-          <int name="x2" value="90"/>
+          <int name="x2" value="270"/>
           <int name="y2" value="-210"/>
-          <int name="prev" value="119"/>
-          <int name="next" value="118"/>
+          <int name="prev" value="48"/>
+          <int name="next" value="78"/>
         </imgdir>
-        <imgdir name="123">
-          <int name="x1" value="411"/>
+        <imgdir name="78">
+          <int name="x1" value="270"/>
           <int name="y1" value="-210"/>
-          <int name="x2" value="489"/>
+          <int name="x2" value="360"/>
           <int name="y2" value="-210"/>
-          <int name="prev" value="124"/>
-          <int name="next" value="0"/>
+          <int name="prev" value="65"/>
+          <int name="next" value="86"/>
         </imgdir>
-        <imgdir name="124">
+        <imgdir name="86">
           <int name="x1" value="360"/>
           <int name="y1" value="-210"/>
           <int name="x2" value="411"/>
           <int name="y2" value="-210"/>
-          <int name="prev" value="120"/>
-          <int name="next" value="123"/>
+          <int name="prev" value="78"/>
+          <int name="next" value="89"/>
         </imgdir>
-      </imgdir>
-      <imgdir name="4">
-        <imgdir name="125">
-          <int name="x1" value="-129"/>
+        <imgdir name="89">
+          <int name="x1" value="411"/>
           <int name="y1" value="-210"/>
-          <int name="x2" value="-51"/>
+          <int name="x2" value="489"/>
           <int name="y2" value="-210"/>
-          <int name="prev" value="0"/>
+          <int name="prev" value="86"/>
           <int name="next" value="0"/>
         </imgdir>
       </imgdir>
     </imgdir>
   </imgdir>
-  <imgdir name="ladderRope">
-    <imgdir name="1">
-      <int name="l" value="0"/>
-      <int name="uf" value="0"/>
-      <int name="x" value="696"/>
-      <int name="y1" value="-976"/>
-      <int name="y2" value="-950"/>
-      <int name="page" value="2"/>
-    </imgdir>
-    <imgdir name="2">
-      <int name="l" value="0"/>
-      <int name="uf" value="0"/>
-      <int name="x" value="694"/>
-      <int name="y1" value="-1147"/>
-      <int name="y2" value="-1172"/>
-      <int name="page" value="2"/>
-    </imgdir>
-    <imgdir name="3">
-      <int name="l" value="0"/>
-      <int name="uf" value="1"/>
-      <int name="x" value="695"/>
-      <int name="y1" value="-1168"/>
-      <int name="y2" value="-970"/>
-      <int name="page" value="2"/>
-    </imgdir>
-  </imgdir>
-  <imgdir name="miniMap">
-    <canvas name="canvas" width="101" height="195">
-    </canvas>
-    <int name="width" value="1619"/>
-    <int name="height" value="3124"/>
-    <int name="centerX" value="448"/>
-    <int name="centerY" value="2794"/>
-    <int name="mag" value="4"/>
-  </imgdir>
-  <imgdir name="portal">
+  <imgdir name="life">
     <imgdir name="0">
-      <string name="pn" value="sp"/>
-      <int name="pt" value="0"/>
-      <int name="x" value="-198"/>
-      <int name="y" value="130"/>
-      <int name="tm" value="999999999"/>
-      <string name="tn" value=""/>
-    </imgdir>
-    <imgdir name="1">
-      <string name="pn" value="go_2nd"/>
-      <int name="pt" value="1"/>
-      <int name="x" value="1048"/>
-      <int name="y" value="88"/>
-      <int name="tm" value="677000011"/>
-      <string name="tn" value="in_2nd"/>
+      <string name="id" value="9400609"/>
+      <int name="x" value="310"/>
+      <int name="y" value="145"/>
+      <int name="cy" value="150"/>
+      <int name="mobTime" value="30"/>
+      <int name="rx0" value="-379"/>
+      <int name="rx1" value="1099"/>
+      <int name="f" value="0"/>
+      <string name="type" value="m"/>
+      <int name="fh" value="79"/>
+    </imgdir>
+    <imgdir name="1">
+      <string name="id" value="9400609"/>
+      <int name="x" value="432"/>
+      <int name="y" value="-215"/>
+      <int name="cy" value="-210"/>
+      <int name="mobTime" value="30"/>
+      <int name="rx0" value="-19"/>
+      <int name="rx1" value="469"/>
+      <int name="f" value="0"/>
+      <string name="type" value="m"/>
+      <int name="fh" value="87"/>
     </imgdir>
     <imgdir name="2">
-      <string name="pn" value="in_2nd"/>
-      <int name="pt" value="1"/>
-      <int name="x" value="765"/>
-      <int name="y" value="-213"/>
-      <int name="tm" value="677000011"/>
-      <string name="tn" value="go_2nd"/>
+      <string name="id" value="9400609"/>
+      <int name="x" value="358"/>
+      <int name="y" value="-575"/>
+      <int name="cy" value="-570"/>
+      <int name="mobTime" value="30"/>
+      <int name="rx0" value="71"/>
+      <int name="rx1" value="1099"/>
+      <int name="f" value="0"/>
+      <string name="type" value="m"/>
+      <int name="fh" value="76"/>
     </imgdir>
     <imgdir name="3">
-      <string name="pn" value="go_3rd"/>
-      <int name="pt" value="1"/>
-      <int name="x" value="-313"/>
-      <int name="y" value="-213"/>
-      <int name="tm" value="677000011"/>
-      <string name="tn" value="in_3rd"/>
+      <string name="id" value="9400609"/>
+      <int name="x" value="-158"/>
+      <int name="y" value="-934"/>
+      <int name="cy" value="-930"/>
+      <int name="mobTime" value="30"/>
+      <int name="rx0" value="-379"/>
+      <int name="rx1" value="739"/>
+      <int name="f" value="0"/>
+      <string name="type" value="m"/>
+      <int name="fh" value="17"/>
     </imgdir>
     <imgdir name="4">
-      <string name="pn" value="in_3rd"/>
-      <int name="pt" value="1"/>
-      <int name="x" value="180"/>
-      <int name="y" value="-572"/>
-      <int name="tm" value="677000011"/>
-      <string name="tn" value="go_3rd"/>
+      <string name="id" value="9400623"/>
+      <int name="x" value="418"/>
+      <int name="y" value="142"/>
+      <int name="cy" value="150"/>
+      <int name="mobTime" value="30"/>
+      <int name="rx0" value="-379"/>
+      <int name="rx1" value="1099"/>
+      <int name="f" value="0"/>
+      <string name="type" value="m"/>
+      <int name="fh" value="88"/>
     </imgdir>
     <imgdir name="5">
-      <string name="pn" value="go_4st"/>
-      <int name="pt" value="1"/>
-      <int name="x" value="1049"/>
-      <int name="y" value="-573"/>
-      <int name="tm" value="677000011"/>
-      <string name="tn" value="in_4st"/>
+      <string name="id" value="9400623"/>
+      <int name="x" value="544"/>
+      <int name="y" value="-229"/>
+      <int name="cy" value="-210"/>
+      <int name="mobTime" value="30"/>
+      <int name="rx0" value="-379"/>
+      <int name="rx1" value="919"/>
+      <int name="f" value="0"/>
+      <string name="type" value="m"/>
+      <int name="fh" value="98"/>
     </imgdir>
     <imgdir name="6">
-      <string name="pn" value="in_4st"/>
-      <int name="pt" value="1"/>
-      <int name="x" value="-304"/>
-      <int name="y" value="-932"/>
-      <int name="tm" value="677000011"/>
-      <string name="tn" value="go_4st"/>
+      <string name="id" value="9400623"/>
+      <int name="x" value="482"/>
+      <int name="y" value="-581"/>
+      <int name="cy" value="-570"/>
+      <int name="mobTime" value="30"/>
+      <int name="rx0" value="71"/>
+      <int name="rx1" value="1099"/>
+      <int name="f" value="0"/>
+      <string name="type" value="m"/>
+      <int name="fh" value="91"/>
     </imgdir>
     <imgdir name="7">
-      <string name="pn" value="go_top"/>
-      <int name="pt" value="1"/>
-      <int name="x" value="611"/>
-      <int name="y" value="-1173"/>
-      <int name="tm" value="677000011"/>
-      <string name="tn" value="in_top"/>
+      <string name="id" value="9400623"/>
+      <int name="x" value="531"/>
+      <int name="y" value="-940"/>
+      <int name="cy" value="-930"/>
+      <int name="mobTime" value="30"/>
+      <int name="rx0" value="-379"/>
+      <int name="rx1" value="739"/>
+      <int name="f" value="0"/>
+      <string name="type" value="m"/>
+      <int name="fh" value="90"/>
     </imgdir>
     <imgdir name="8">
-      <string name="pn" value="in_top"/>
-      <int name="pt" value="1"/>
-      <int name="x" value="60"/>
-      <int name="y" value="-1832"/>
-      <int name="tm" value="677000011"/>
-      <string name="tn" value="go_top"/>
+      <string name="id" value="9400611"/>
+      <int name="x" value="771"/>
+      <int name="y" value="144"/>
+      <int name="cy" value="150"/>
+      <int name="mobTime" value="50"/>
+      <int name="rx0" value="-379"/>
+      <int name="rx1" value="1099"/>
+      <int name="f" value="0"/>
+      <string name="type" value="m"/>
+      <int name="fh" value="110"/>
     </imgdir>
     <imgdir name="9">
-      <string name="pn" value="in_next"/>
-      <int name="pt" value="2"/>
-      <int name="x" value="-335"/>
-      <int name="y" value="141"/>
-      <int name="tm" value="677000010"/>
-      <string name="tn" value="go_next"/>
+      <string name="id" value="9400611"/>
+      <int name="x" value="-178"/>
+      <int name="y" value="-218"/>
+      <int name="cy" value="-210"/>
+      <int name="mobTime" value="50"/>
+      <int name="rx0" value="-379"/>
+      <int name="rx1" value="919"/>
+      <int name="f" value="0"/>
+      <string name="type" value="m"/>
+      <int name="fh" value="18"/>
+    </imgdir>
+    <imgdir name="10">
+      <string name="id" value="9400611"/>
+      <int name="x" value="862"/>
+      <int name="y" value="-573"/>
+      <int name="cy" value="-570"/>
+      <int name="mobTime" value="50"/>
+      <int name="rx0" value="71"/>
+      <int name="rx1" value="1099"/>
+      <int name="f" value="0"/>
+      <string name="type" value="m"/>
+      <int name="fh" value="111"/>
+    </imgdir>
+    <imgdir name="11">
+      <string name="id" value="9400611"/>
+      <int name="x" value="227"/>
+      <int name="y" value="-975"/>
+      <int name="cy" value="-965"/>
+      <int name="mobTime" value="50"/>
+      <int name="rx0" value="-379"/>
+      <int name="rx1" value="739"/>
+      <int name="f" value="0"/>
+      <string name="type" value="m"/>
+      <int name="fh" value="63"/>
+    </imgdir>
+    <imgdir name="12">
+      <string name="id" value="9400613"/>
+      <int name="x" value="-41"/>
+      <int name="y" value="-936"/>
+      <int name="cy" value="-930"/>
+      <int name="mobTime" value="30"/>
+      <int name="rx0" value="-379"/>
+      <int name="rx1" value="739"/>
+      <int name="f" value="0"/>
+      <string name="type" value="m"/>
+      <int name="fh" value="23"/>
+    </imgdir>
+    <imgdir name="13">
+      <string name="id" value="9400613"/>
+      <int name="x" value="757"/>
+      <int name="y" value="-578"/>
+      <int name="cy" value="-570"/>
+      <int name="mobTime" value="30"/>
+      <int name="rx0" value="71"/>
+      <int name="rx1" value="1099"/>
+      <int name="f" value="0"/>
+      <string name="type" value="m"/>
+      <int name="fh" value="108"/>
+    </imgdir>
+    <imgdir name="14">
+      <string name="id" value="9400613"/>
+      <int name="x" value="670"/>
+      <int name="y" value="-219"/>
+      <int name="cy" value="-210"/>
+      <int name="mobTime" value="30"/>
+      <int name="rx0" value="-379"/>
+      <int name="rx1" value="919"/>
+      <int name="f" value="0"/>
+      <string name="type" value="m"/>
+      <int name="fh" value="104"/>
+    </imgdir>
+    <imgdir name="15">
+      <string name="id" value="9400612"/>
+      <int name="x" value="376"/>
+      <int name="y" value="-934"/>
+      <int name="cy" value="-930"/>
+      <int name="mobTime" value="30"/>
+      <int name="rx0" value="-379"/>
+      <int name="rx1" value="739"/>
+      <int name="f" value="0"/>
+      <string name="type" value="m"/>
+      <int name="fh" value="84"/>
+    </imgdir>
+    <imgdir name="16">
+      <string name="id" value="9400612"/>
+      <int name="x" value="625"/>
+      <int name="y" value="-572"/>
+      <int name="cy" value="-570"/>
+      <int name="mobTime" value="30"/>
+      <int name="rx0" value="71"/>
+      <int name="rx1" value="1099"/>
+      <int name="f" value="0"/>
+      <string name="type" value="m"/>
+      <int name="fh" value="97"/>
+    </imgdir>
+    <imgdir name="17">
+      <string name="id" value="9400612"/>
+      <int name="x" value="-47"/>
+      <int name="y" value="-216"/>
+      <int name="cy" value="-210"/>
+      <int name="mobTime" value="30"/>
+      <int name="rx0" value="-379"/>
+      <int name="rx1" value="919"/>
+      <int name="f" value="0"/>
+      <string name="type" value="m"/>
+      <int name="fh" value="24"/>
+    </imgdir>
+    <imgdir name="18">
+      <string name="id" value="9400612"/>
+      <int name="x" value="526"/>
+      <int name="y" value="144"/>
+      <int name="cy" value="150"/>
+      <int name="mobTime" value="30"/>
+      <int name="rx0" value="-379"/>
+      <int name="rx1" value="1099"/>
+      <int name="f" value="0"/>
+      <string name="type" value="m"/>
+      <int name="fh" value="93"/>
+    </imgdir>
+    <imgdir name="19">
+      <string name="id" value="9400613"/>
+      <int name="x" value="648"/>
+      <int name="y" value="145"/>
+      <int name="cy" value="150"/>
+      <int name="mobTime" value="30"/>
+      <int name="rx0" value="-379"/>
+      <int name="rx1" value="1099"/>
+      <int name="f" value="0"/>
+      <string name="type" value="m"/>
+      <int name="fh" value="105"/>
+    </imgdir>
+    <imgdir name="20">
+      <string name="id" value="9201133"/>
+      <int name="x" value="-102"/>
+      <int name="y" value="-1836"/>
+      <int name="cy" value="-1830"/>
+      <int name="mobTime" value="0"/>
+      <int name="rx0" value="-152"/>
+      <int name="rx1" value="-52"/>
+      <int name="f" value="0"/>
+      <string name="type" value="n"/>
+      <int name="fh" value="16"/>
     </imgdir>
   </imgdir>
 </imgdir>
diff --git a/wz/Mob.wz/9400590.img.xml b/wz/Mob.wz/9400590.img.xml
index 3f23f4a44..dd1879df1 100644
--- a/wz/Mob.wz/9400590.img.xml
+++ b/wz/Mob.wz/9400590.img.xml
@@ -289,10 +289,10 @@
         <int name="attachfacing" value="1"/>
       </imgdir>
       <int name="type" value="0"/>
-      <short name="attackAfter" value="2860"/>
       <int name="PADamage" value="620"/>
       <int name="disease" value="125"/>
       <int name="level" value="3"/>
+      <int name="attackAfter" value="2860"/>
     </imgdir>
     <canvas name="0" width="151" height="127">
       <vector name="origin" x="45" y="126"/>
diff --git a/wz/Mob.wz/9400593.img.xml b/wz/Mob.wz/9400593.img.xml
index 81b2953b7..6adf42707 100644
--- a/wz/Mob.wz/9400593.img.xml
+++ b/wz/Mob.wz/9400593.img.xml
@@ -205,8 +205,8 @@
       </imgdir>
       <int name="attachfacing" value="1"/>
       <int name="type" value="0"/>
-      <short name="attackAfter" value="540"/>
       <int name="PADamage" value="610"/>
+      <int name="attackAfter" value="540"/>
     </imgdir>
     <canvas name="0" width="95" height="109">
       <vector name="origin" x="34" y="98"/>
@@ -379,8 +379,8 @@
         <int name="attach" value="1"/>
       </imgdir>
       <int name="type" value="0"/>
-      <short name="attackAfter" value="2040"/>
       <int name="PADamage" value="610"/>
+      <int name="attackAfter" value="2040"/>
     </imgdir>
     <canvas name="0" width="95" height="109">
       <vector name="origin" x="34" y="97"/>
@@ -622,8 +622,8 @@
         <int name="attachfacing" value="1"/>
       </imgdir>
       <int name="type" value="0"/>
-      <short name="attackAfter" value="450"/>
       <int name="PADamage" value="610"/>
+      <int name="attackAfter" value="450"/>
     </imgdir>
     <canvas name="0" width="95" height="109">
       <vector name="origin" x="34" y="97"/>
@@ -770,8 +770,8 @@
         <int name="attach" value="1"/>
       </imgdir>
       <int name="type" value="0"/>
-      <short name="attackAfter" value="1500"/>
       <int name="PADamage" value="610"/>
+      <int name="attackAfter" value="1500"/>
     </imgdir>
     <canvas name="0" width="94" height="100">
       <vector name="origin" x="32" y="97"/>
diff --git a/wz/Mob.wz/9400597.img.xml b/wz/Mob.wz/9400597.img.xml
index 8e4d51cd8..58ca82587 100644
--- a/wz/Mob.wz/9400597.img.xml
+++ b/wz/Mob.wz/9400597.img.xml
@@ -167,8 +167,8 @@
         <int name="attachfacing" value="1"/>
       </imgdir>
       <int name="type" value="0"/>
-      <short name="attackAfter" value="420"/>
       <int name="PADamage" value="600"/>
+      <int name="attackAfter" value="420"/>
     </imgdir>
     <canvas name="0" width="250" height="131">
       <vector name="origin" x="130" y="130"/>
@@ -371,8 +371,8 @@
         <int name="attach" value="1"/>
       </imgdir>
       <int name="type" value="0"/>
-      <short name="attackAfter" value="600"/>
       <int name="magic" value="1"/>
+      <int name="attackAfter" value="600"/>
     </imgdir>
     <canvas name="0" width="250" height="131">
       <vector name="origin" x="130" y="130"/>
@@ -524,8 +524,8 @@
         <int name="attachfacing" value="1"/>
       </imgdir>
       <int name="type" value="0"/>
-      <short name="attackAfter" value="750"/>
       <int name="PADamage" value="600"/>
+      <int name="attackAfter" value="750"/>
     </imgdir>
     <canvas name="0" width="250" height="131">
       <vector name="origin" x="130" y="130"/>
diff --git a/wz/Mob.wz/9400633.img.xml b/wz/Mob.wz/9400633.img.xml
index d5770e24b..4a6d52ae9 100644
--- a/wz/Mob.wz/9400633.img.xml
+++ b/wz/Mob.wz/9400633.img.xml
@@ -203,8 +203,8 @@
       </imgdir>
       <int name="attachfacing" value="1"/>
       <int name="type" value="0"/>
-      <short name="attackAfter" value="400"/>
       <int name="PADamage" value="200"/>
+      <int name="attackAfter" value="400"/>
     </imgdir>
     <canvas name="0" width="134" height="157">
       <vector name="origin" x="59" y="156"/>
@@ -314,10 +314,10 @@
       <int name="magic" value="1"/>
       <int name="disease" value="125"/>
       <int name="level" value="1"/>
-      <short name="attackAfter" value="840"/>
       <int name="conMP" value="1"/>
       <int name="MADamage" value="100"/>
       <string name="elemAttr" value="S"/>
+      <int name="attackAfter" value="840"/>
     </imgdir>
     <canvas name="0" width="134" height="157">
       <vector name="origin" x="53" y="156"/>
@@ -492,12 +492,12 @@
       </imgdir>
       <int name="type" value="0"/>
       <int name="magic" value="1"/>
-      <short name="attackAfter" value="600"/>
       <int name="MADamage" value="100"/>
       <int name="AngerAttack" value="1"/>
       <int name="disease" value="123"/>
       <int name="level" value="16"/>
       <int name="conMP" value="5"/>
+      <int name="attackAfter" value="600"/>
     </imgdir>
     <canvas name="0" width="132" height="168">
       <vector name="origin" x="56" y="167"/>
@@ -637,7 +637,6 @@
         <int name="attach" value="1"/>
       </imgdir>
       <int name="type" value="0"/>
-      <short name="attackAfter" value="3300"/>
       <int name="magic" value="1"/>
       <int name="MADamage" value="400"/>
       <int name="specialAttack" value="1"/>
@@ -646,6 +645,7 @@
       <int name="conMP" value="10"/>
       <int name="tremble" value="1"/>
       <int name="knockback" value="1"/>
+      <int name="attackAfter" value="3300"/>
     </imgdir>
     <canvas name="0" width="126" height="159">
       <vector name="origin" x="48" y="158"/>
diff --git a/wz/Quest.wz/QuestInfo.img.xml b/wz/Quest.wz/QuestInfo.img.xml
index 8300b50c2..36ddcfb6d 100644
--- a/wz/Quest.wz/QuestInfo.img.xml
+++ b/wz/Quest.wz/QuestInfo.img.xml
@@ -9880,8 +9880,7 @@ Able to proceed to &apos;For the peace of Victoria Island...&apos; as next quest
     <string name="1" value="You can reach #rAstaroth#k by going through the door in the #b#m105050400##k. It&apos;s filled with a horrible stench, so the #rWild Eye&apos;s Gas Mask#k is needed. Defeat #rAstaroth!#k Return to #bthe Rememberer#k in #bSleepywood#k once your task is completed. "/>
     <string name="2" value="You defeated the demon #rAstaroth#k, who threatened the peace in Victoria."/>
     <int name="area" value="30"/>
-    <string name="demandSummary" value="#o9400633# #a282830# 
-"/>
+    <string name="demandSummary" value="#o9400633# #a282831#"/>
     <string name="rewardSummary" value="Exp 10,000
 1,000 Meso
 "/>
diff --git a/wz/String.wz/Skill.img.xml b/wz/String.wz/Skill.img.xml
index 463b05c8a..54f08f016 100644
--- a/wz/String.wz/Skill.img.xml
+++ b/wz/String.wz/Skill.img.xml
@@ -8020,7 +8020,7 @@
     <string name="h7" value="Uses 10% of MaxHP, Uses 85% of the used HP on MP, 40 seconds until next use"/>
     <string name="h8" value="Uses 10% of MaxHP, Uses 90% of the used HP on MP, 35 seconds until next use"/>
     <string name="h9" value="Uses 10% of MaxHP, Uses 95% of the used HP on MP, 30 seconds until next use"/>
-    <string name="h10" value="Uses 10% of MaxHP, Uses 100%of the used HP on MP 회대기 seconds until next use시간 25초"/>
+    <string name="h10" value="Uses 10% of MaxHP, Uses 100% of the used HP on MP, 25 seconds until next use"/>
   </imgdir>
   <imgdir name="5101006">
     <string name="name" value="Knuckler Booster"/>
@@ -12717,7 +12717,7 @@
   <imgdir name="0000100">
     <string name="name" value="Chair Mastery"/>
     <string name="desc" value="[Master Level : 1]\nBonus recovery gain from using map chairs throughout the world."/>
-    <string name="h1" value="Passively recover extra amounts of HP and MP by resting on map chairs."/>
+    <string name="h1" value="Passively recover extra amounts of HP and MP by resting on map chairs. Heal amount is calculated over a percentage of the character&apos;s base pool."/>
   </imgdir>
   <imgdir name="10000100">
     <string name="name" value="Chair Mastery"/>
